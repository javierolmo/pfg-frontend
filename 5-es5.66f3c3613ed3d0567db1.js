!function(){function t(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,n,i){return(e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,n,i||t)}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function r(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=a(t);if(e){var r=a(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return o(this,n)}}function o(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=l(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function l(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function d(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{KTiS:function(i,l,c){window,i.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,(function(e){return t[e]}).bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=97)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];h(this,t),this.numerator=0,this.denominator=1,this.wholeValue=0,this.numerator=e,this.denominator=n,this.wholeValue=i,r&&this.simplify(),this.setRealValue()}return d(t,[{key:"toString",value:function(){var t=this.numerator+"/"+this.denominator;return 0!==this.wholeValue&&(t=this.wholeValue+" "+t),t}},{key:"clone",value:function(){return new t(this.numerator,this.denominator,this.wholeValue,!1)}},{key:"GetExpandedNumerator",value:function(){return this.wholeValue*this.denominator+this.numerator}},{key:"IsNegative",value:function(){return this.realValue<0}},{key:"expand",value:function(t){this.numerator*=t,this.denominator*=t,0!==this.wholeValue&&(this.numerator+=this.wholeValue*this.denominator,this.wholeValue=0)}},{key:"Add",value:function(t){this.numerator=(this.wholeValue*this.denominator+this.numerator)*t.denominator+(t.wholeValue*t.denominator+t.numerator)*this.denominator,this.denominator=this.denominator*t.denominator,this.wholeValue=0,this.simplify(),this.setRealValue()}},{key:"Sub",value:function(t){this.numerator=(this.wholeValue*this.denominator+this.numerator)*t.denominator-(t.wholeValue*t.denominator+t.numerator)*this.denominator,this.denominator=this.denominator*t.denominator,this.wholeValue=0,this.simplify(),this.setRealValue()}},{key:"Quantize",value:function(e){if(this.denominator<=e)return this;for(var n=new t(this.numerator+1,this.denominator,this.wholeValue);n.Denominator>e;)n.Numerator++;if(this.numerator>this.denominator){for(var i=new t(this.numerator-1,this.denominator,this.wholeValue);i.Denominator>e;)i.Numerator--;if(i.Denominator<n.Denominator)return i}return n}},{key:"Equals",value:function(t){return this.realValue===t.realValue}},{key:"CompareTo",value:function(t){var e=this.realValue-t.realValue;return e?e<0?-1:1:0}},{key:"lt",value:function(t){return this.realValue<t.realValue}},{key:"lte",value:function(t){return this.realValue<=t.realValue}},{key:"gt",value:function(t){return!this.lte(t)}},{key:"gte",value:function(t){return!this.lt(t)}},{key:"setRealValue",value:function(){this.realValue=this.wholeValue+this.numerator/this.denominator}},{key:"simplify",value:function(){if(0!==this.numerator){var e=t.greatestCommonDenominator(Math.abs(this.numerator),Math.abs(this.denominator));this.numerator/=e,this.denominator/=e;var n=Math.floor(this.numerator/this.denominator);if(0!==n&&(this.wholeValue+=n,this.numerator-=n*this.denominator,0===this.numerator&&(this.denominator=1)),this.denominator>t.maximumAllowedNumber){var i=this.denominator/t.maximumAllowedNumber;this.numerator=Math.round(this.numerator/i),this.denominator=Math.round(this.denominator/i)}if(this.numerator>t.maximumAllowedNumber){var r=this.numerator/t.maximumAllowedNumber;this.numerator=Math.round(this.numerator/r),this.denominator=Math.round(this.denominator/r)}}else this.denominator=1}},{key:"isOnBeat",value:function(e){var n=this.distanceFromBeat(e);return Math.abs(n)<t.FloatInaccuracyTolerance}},{key:"distanceFromBeat",value:function(e){var n=new t(1,e.Denominator);return this.RealValue%n.RealValue}},{key:"Numerator",get:function(){return this.numerator},set:function(t){this.numerator!==t&&(this.numerator=t,this.simplify(),this.setRealValue())}},{key:"Denominator",get:function(){return this.denominator},set:function(t){this.denominator!==t&&(this.denominator=t,0!==this.numerator&&this.simplify(),this.setRealValue())}},{key:"WholeValue",get:function(){return this.wholeValue},set:function(t){this.wholeValue!==t&&(this.wholeValue=t,this.setRealValue())}},{key:"RealValue",get:function(){return this.realValue}}],[{key:"max",value:function(t,e){return t.RealValue>e.RealValue?t:e}},{key:"Equal",value:function(t,e){return t.wholeValue===e.wholeValue&&t.Denominator===e.Denominator&&t.Numerator===e.Numerator}},{key:"createFromFraction",value:function(e){return new t(e.numerator,e.denominator,e.wholeValue,!1)}},{key:"plus",value:function(t,e){var n=t.clone();return n.Add(e),n}},{key:"minus",value:function(t,e){var n=t.clone();return n.Sub(e),n}},{key:"multiply",value:function(e,n){return new t((e.wholeValue*e.denominator+e.numerator)*(n.wholeValue*n.denominator+n.numerator),e.denominator*n.denominator)}},{key:"greatestCommonDenominator",value:function(t,e){if(0===t)return e;if(1===e)return 1;for(;0!==e;)t>e?t-=e:e-=t;return t}}]),t}();e.Fraction=i,i.maximumAllowedNumber=46340,i.FloatInaccuracyTolerance=1e-4},function(t,e,n){var i,r;!function(o,s){"use strict";void 0===(r="function"==typeof(i=function(){var t=function(){},e="undefined"!=typeof window&&void 0!==window.navigator&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function i(t,e){var n=t[e];if("function"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function r(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function o(n){return"debug"===n&&(n="log"),"undefined"!=typeof console&&("trace"===n&&e?r:void 0!==console[n]?i(console,n):void 0!==console.log?i(console,"log"):t)}function s(e,i){for(var r=0;r<n.length;r++){var o=n[r];this[o]=r<e?t:this.methodFactory(o,e,i)}this.log=this.debug}function a(t,e,n){return function(){"undefined"!=typeof console&&(s.call(this,e,n),this[t].apply(this,arguments))}}function u(t,e,n){return o(t)||a.apply(this,arguments)}function l(t,e,i){var r,o=this,a="loglevel";function l(){var t;if("undefined"!=typeof window){try{t=window.localStorage[a]}catch(t){}if(void 0===t)try{var e=window.document.cookie,n=e.indexOf(encodeURIComponent(a)+"=");-1!==n&&(t=/^([^;]+)/.exec(e.slice(n))[1])}catch(t){}return void 0===o.levels[t]&&(t=void 0),t}}t&&(a+=":"+t),o.name=t,o.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},o.methodFactory=i||u,o.getLevel=function(){return r},o.setLevel=function(e,i){if("string"==typeof e&&void 0!==o.levels[e.toUpperCase()]&&(e=o.levels[e.toUpperCase()]),!("number"==typeof e&&e>=0&&e<=o.levels.SILENT))throw"log.setLevel() called with invalid level: "+e;if(r=e,!1!==i&&function(t){var e=(n[t]||"silent").toUpperCase();if("undefined"!=typeof window){try{return void(window.localStorage[a]=e)}catch(t){}try{window.document.cookie=encodeURIComponent(a)+"="+e+";"}catch(t){}}}(e),s.call(o,e,t),"undefined"==typeof console&&e<o.levels.SILENT)return"No console available for logging"},o.setDefaultLevel=function(t){l()||o.setLevel(t,!1)},o.enableAll=function(t){o.setLevel(o.levels.TRACE,t)},o.disableAll=function(t){o.setLevel(o.levels.SILENT,t)};var c=l();null==c&&(c=null==e?"WARN":e),o.setLevel(c,!1)}var c=new l,h={};c.getLogger=function(t){if("string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=h[t];return e||(e=h[t]=new l(t,c.getLevel(),c.methodFactory)),e};var f="undefined"!=typeof window?window.log:void 0;return c.noConflict=function(){return"undefined"!=typeof window&&window.log===c&&(window.log=f),c},c.getLoggers=function(){return h},c})?i.call(e,n,e,t):i)||(t.exports=r)}()},function(t,e,n){"use strict";var i,r;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.C=0]="C",t[t.D=2]="D",t[t.E=4]="E",t[t.F=5]="F",t[t.G=7]="G",t[t.A=9]="A",t[t.B=11]="B"}(i=e.NoteEnum||(e.NoteEnum={})),function(t){t[t.SHARP=0]="SHARP",t[t.FLAT=1]="FLAT",t[t.NONE=2]="NONE",t[t.NATURAL=3]="NATURAL",t[t.DOUBLESHARP=4]="DOUBLESHARP",t[t.DOUBLEFLAT=5]="DOUBLEFLAT",t[t.TRIPLESHARP=6]="TRIPLESHARP",t[t.TRIPLEFLAT=7]="TRIPLEFLAT",t[t.QUARTERTONESHARP=8]="QUARTERTONESHARP",t[t.QUARTERTONEFLAT=9]="QUARTERTONEFLAT"}(r=e.AccidentalEnum||(e.AccidentalEnum={}));var o=function(){function t(e,n,i){h(this,t),this.accidental=r.NONE,this.fundamentalNote=e,this.octave=n,this.accidental=i,this.halfTone=e+12*(n+t.octXmlDiff)+t.HalfTonesFromAccidental(i),this.frequency=t.calcFrequency(this)}return d(t,[{key:"getHalfTone",value:function(){return this.halfTone}},{key:"getTransposedPitch",value:function(t){if(t>12)throw new Error("rewrite this method to handle bigger octave changes or don't use is with bigger octave changes!");return t>0?this.getHigherPitchByTransposeFactor(t):t<0?this.getLowerPitchByTransposeFactor(-t):this}},{key:"DoEnharmonicChange",value:function(){switch(this.accidental){case r.FLAT:case r.DOUBLEFLAT:this.fundamentalNote=this.getPreviousFundamentalNote(this.fundamentalNote),this.accidental=t.AccidentalFromHalfTones(this.halfTone-(this.fundamentalNote+12*(this.octave+t.octXmlDiff)));break;case r.SHARP:case r.DOUBLESHARP:this.fundamentalNote=this.getNextFundamentalNote(this.fundamentalNote),this.accidental=t.AccidentalFromHalfTones(this.halfTone-(this.fundamentalNote+12*(this.octave+t.octXmlDiff)));break;default:return}}},{key:"ToString",value:function(){var e=t.accidentalVexflow(this.accidental);return e||(e=""),"Key: "+t.getNoteEnumString(this.fundamentalNote)+e+", Note: "+this.fundamentalNote+", octave: "+this.octave.toString()}},{key:"OperatorEquals",value:function(t){return void 0!==this&&void 0!==t&&this.FundamentalNote===t.FundamentalNote&&this.Octave===t.Octave&&this.Accidental===t.Accidental}},{key:"OperatorNotEqual",value:function(t){return!(this===t)}},{key:"getHigherPitchByTransposeFactor",value:function(e){var n,i=t.pitchEnumValues.indexOf(this.fundamentalNote),o=this.octave;return i+e>t.pitchEnumValues.length-1?(n=t.pitchEnumValues[i+e-t.pitchEnumValues.length],o++):n=t.pitchEnumValues[i+e],new t(n,o,r.NONE)}},{key:"getLowerPitchByTransposeFactor",value:function(e){var n,i=t.pitchEnumValues.indexOf(this.fundamentalNote),o=this.octave;return i-e<0?(n=t.pitchEnumValues[t.pitchEnumValues.length+i-e],o--):n=t.pitchEnumValues[i-e],new t(n,o,r.NONE)}},{key:"getNextFundamentalNote",value:function(e){var n=t.pitchEnumValues.indexOf(e);return n=(n+1)%t.pitchEnumValues.length,t.pitchEnumValues[n]}},{key:"getPreviousFundamentalNote",value:function(e){var n=t.pitchEnumValues.indexOf(e);return n>0?t.pitchEnumValues[n-1]:t.pitchEnumValues[t.pitchEnumValues.length-1]}},{key:"AccidentalHalfTones",get:function(){return t.HalfTonesFromAccidental(this.accidental)}},{key:"Octave",get:function(){return this.octave}},{key:"FundamentalNote",get:function(){return this.fundamentalNote}},{key:"Accidental",get:function(){return this.accidental}},{key:"Frequency",get:function(){return this.frequency}}],[{key:"getNoteEnumString",value:function(t){switch(t){case i.C:return"C";case i.D:return"D";case i.E:return"E";case i.F:return"F";case i.G:return"G";case i.A:return"A";case i.B:return"B";default:return""}}},{key:"CalculateTransposedHalfTone",value:function(e,n){return t.WrapAroundCheck(e.fundamentalNote+e.AccidentalHalfTones+n,12)}},{key:"WrapAroundCheck",value:function(t,e){for(var n=0;t<0;)t+=e,n--;for(;t>=e;)t-=e,n++;return{overflow:n,value:t}}},{key:"calcFrequency",value:function(e){var n,r=0;return e instanceof t?(r=e.octave-1,n=e.fundamentalNote-i.A+e.AccidentalHalfTones):"number"==typeof e&&(n=e-57),440*Math.pow(2,r)*Math.pow(2,n/12)}},{key:"calcFractionalKey",value:function(e){return Math.log(e/440)/Math.LN10*t.halftoneFactor+57}},{key:"fromFrequency",value:function(e){var n=t.calcFractionalKey(e)+.5,i=Math.floor(n/12)-t.octXmlDiff,o=Math.floor(n)%12,s=o,a=r.NONE;return-1===this.pitchEnumValues.indexOf(s)&&(s=o-1,a=r.SHARP),new t(s,i,a)}},{key:"fromHalftone",value:function(e){var n=Math.floor(e/12)-t.octXmlDiff,i=e%12,o=i,s=r.NONE;return-1===this.pitchEnumValues.indexOf(o)&&(o=i-1,s=r.SHARP),new t(o,n,s)}},{key:"ceiling",value:function(t){var e=t%=12;return-1===this.pitchEnumValues.indexOf(e)&&(e=t+1),e}},{key:"floor",value:function(t){var e=t%=12;return-1===this.pitchEnumValues.indexOf(e)&&(e=t-1),e}},{key:"HalfTonesFromAccidental",value:function(t){switch(t){case r.NONE:return 0;case r.SHARP:return 1;case r.FLAT:return-1;case r.NATURAL:return 0;case r.DOUBLESHARP:return 2;case r.DOUBLEFLAT:return-2;case r.QUARTERTONESHARP:return.5;case r.QUARTERTONEFLAT:return-.5;case r.TRIPLESHARP:return 3;case r.TRIPLEFLAT:return-3;default:throw new Error("Unhandled AccidentalEnum value")}}},{key:"AccidentalFromHalfTones",value:function(t){switch(t){case 0:return r.NONE;case 1:return r.SHARP;case-1:return r.FLAT;case 2:return r.DOUBLESHARP;case-2:return r.DOUBLEFLAT;case.5:return r.QUARTERTONESHARP;case-.5:return r.QUARTERTONEFLAT;case 3:return r.TRIPLESHARP;case-3:return r.TRIPLEFLAT;default:return t>0&&t<1?r.QUARTERTONESHARP:t<0&&t>-1?r.QUARTERTONEFLAT:r.QUARTERTONESHARP}}},{key:"accidentalVexflow",value:function(t){var e;switch(t){case r.NATURAL:e="n";break;case r.FLAT:e="b";break;case r.SHARP:e="#";break;case r.DOUBLESHARP:e="##";break;case r.TRIPLESHARP:e="++";break;case r.DOUBLEFLAT:e="bb";break;case r.TRIPLEFLAT:e="bbs";break;case r.QUARTERTONESHARP:e="+";break;case r.QUARTERTONEFLAT:e="d"}return e}},{key:"OctaveXmlDifference",get:function(){return t.octXmlDiff}}]),t}();e.Pitch=o,o.pitchEnumValues=[i.C,i.D,i.E,i.F,i.G,i.A,i.B],o.halftoneFactor=12/(Math.LN2/Math.LN10),o.octXmlDiff=3},function(t,e,n){"use strict";var i=n(26),r=n(172),o=n(63),s=n(234),a=n(49);function u(t){return t}function l(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}e.newBlob=function(t,n){e.checkSupport("blob");try{return new Blob([t],{type:n})}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(t),i.getBlob(n)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(t,e,n){var i=[],r=0,o=t.length;if(o<=n)return String.fromCharCode.apply(null,t);for(;r<o;)i.push(String.fromCharCode.apply(null,"array"===e||"nodebuffer"===e?t.slice(r,Math.min(r+n,o)):t.subarray(r,Math.min(r+n,o)))),r+=n;return i.join("")},stringifyByChar:function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(t){return!1}}()}};function h(t){var n=65536,i=e.getTypeOf(t),r=!0;if("uint8array"===i?r=c.applyCanBeUsed.uint8array:"nodebuffer"===i&&(r=c.applyCanBeUsed.nodebuffer),r)for(;n>1;)try{return c.stringifyByChunk(t,i,n)}catch(t){n=Math.floor(n/2)}return c.stringifyByChar(t)}function f(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}e.applyFromCharCode=h;var d={};d.string={string:u,array:function(t){return l(t,new Array(t.length))},arraybuffer:function(t){return d.string.uint8array(t).buffer},uint8array:function(t){return l(t,new Uint8Array(t.length))},nodebuffer:function(t){return l(t,o.allocBuffer(t.length))}},d.array={string:h,array:u,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(t)}},d.arraybuffer={string:function(t){return h(new Uint8Array(t))},array:function(t){return f(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:u,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(new Uint8Array(t))}},d.uint8array={string:h,array:function(t){return f(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:u,nodebuffer:function(t){return o.newBufferFrom(t)}},d.nodebuffer={string:h,array:function(t){return f(t,new Array(t.length))},arraybuffer:function(t){return d.nodebuffer.uint8array(t).buffer},uint8array:function(t){return f(t,new Uint8Array(t.length))},nodebuffer:u},e.transformTo=function(t,n){if(n||(n=""),!t)return n;e.checkSupport(t);var i=e.getTypeOf(n);return d[i][t](n)},e.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":i.nodebuffer&&o.isBuffer(t)?"nodebuffer":i.uint8array&&t instanceof Uint8Array?"uint8array":i.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},e.checkSupport=function(t){if(!i[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},e.MAX_VALUE_16BITS=65535,e.MAX_VALUE_32BITS=-1,e.pretty=function(t){var e,n,i="";for(n=0;n<(t||"").length;n++)i+="\\x"+((e=t.charCodeAt(n))<16?"0":"")+e.toString(16).toUpperCase();return i},e.delay=function(t,e,n){s((function(){t.apply(n||null,e||[])}))},e.inherits=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n},e.extend=function(){var t,e,n={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===n[e]&&(n[e]=arguments[t][e]);return n},e.prepareContent=function(t,n,o,s,u){return a.Promise.resolve(n).then((function(t){return i.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new a.Promise((function(e,n){var i=new FileReader;i.onload=function(t){e(t.target.result)},i.onerror=function(t){n(t.target.error)},i.readAsArrayBuffer(t)})):t})).then((function(n){var c,h=e.getTypeOf(n);return h?("arraybuffer"===h?n=e.transformTo("uint8array",n):"string"===h&&(u?n=r.decode(n):o&&!0!==s&&(n=l(c=n,i.uint8array?new Uint8Array(c.length):new Array(c.length)))),n):a.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(1),o=n(13),s=n(5),a=n(101),l=n(65),c=n(66),f=n(42);e.BoundingBox=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];h(this,t),this.isSymbol=!1,this.relativePositionHasBeenSet=!1,this.xBordersHaveBeenSet=!1,this.yBordersHaveBeenSet=!1,this.absolutePosition=new s.PointF2D,this.relativePosition=new s.PointF2D,this.size=new a.SizeF2D,this.marginSize=new a.SizeF2D,this.upperLeftCorner=new s.PointF2D,this.upperLeftMarginCorner=new s.PointF2D,this.borderLeft=0,this.borderRight=0,this.borderTop=0,this.borderBottom=0,this.borderMarginLeft=0,this.borderMarginRight=0,this.borderMarginTop=0,this.borderMarginBottom=0,this.childElements=[],this.parent=n,this.dataObject=e,this.isSymbol=i,this.xBordersHaveBeenSet=!1,this.yBordersHaveBeenSet=!1,void 0!==n&&(this.Parent=n)}return d(t,[{key:"setAbsolutePositionFromParent",value:function(){void 0!==this.parent?(this.absolutePosition.x=this.parent.AbsolutePosition.x+this.relativePosition.x,this.absolutePosition.y=this.parent.AbsolutePosition.y+this.relativePosition.y):this.absolutePosition=this.relativePosition}},{key:"calculateAbsolutePosition",value:function(){this.absolutePosition.x=this.relativePosition.x,this.absolutePosition.y=this.relativePosition.y;for(var t=this.parent;void 0!==t;)this.absolutePosition.x+=t.relativePosition.x,this.absolutePosition.y+=t.relativePosition.y,t=t.parent}},{key:"calculateAbsolutePositionsRecursiveWithoutTopelement",value:function(){this.absolutePosition.x=0,this.absolutePosition.y=0;for(var t=0,e=this.ChildElements.length;t<e;++t)this.ChildElements[t].calculateAbsolutePositionsRecursive(this.absolutePosition.x,this.absolutePosition.y)}},{key:"calculateAbsolutePositionsRecursive",value:function(t,e){this.absolutePosition.x=this.relativePosition.x+t,this.absolutePosition.y=this.relativePosition.y+e;for(var n=0,i=this.ChildElements.length;n<i;++n)this.ChildElements[n].calculateAbsolutePositionsRecursive(this.absolutePosition.x,this.absolutePosition.y)}},{key:"calculateAbsolutePositionsOfChildren",value:function(){for(var t=0,e=this.ChildElements.length;t<e;++t)this.ChildElements[t].calculateAbsolutePositionsRecursive(this.absolutePosition.x,this.absolutePosition.y)}},{key:"calculateBoundingBox",value:function(){if(0!==this.childElements.length){for(var t=0,e=this.ChildElements.length;t<e;++t)this.ChildElements[t].calculateBoundingBox();var n=Number.MAX_VALUE,i=Number.MIN_VALUE,r=Number.MAX_VALUE,o=Number.MIN_VALUE,s=Number.MAX_VALUE,a=Number.MIN_VALUE,u=Number.MAX_VALUE,l=Number.MIN_VALUE;this.isSymbol&&(n=this.borderLeft,i=this.borderRight,r=this.borderTop,o=this.borderBottom,s=this.borderMarginLeft,a=this.borderMarginRight,u=this.borderMarginTop,l=this.borderMarginBottom);for(var c=0,h=this.ChildElements.length;c<h;++c){var f=this.ChildElements[c];n=Math.min(n,f.relativePosition.x+f.borderLeft),i=Math.max(i,f.relativePosition.x+f.borderRight),r=Math.min(r,f.relativePosition.y+f.borderTop),o=Math.max(o,f.relativePosition.y+f.borderBottom),s=Math.min(s,f.relativePosition.x+f.borderMarginLeft),a=Math.max(a,f.relativePosition.x+f.borderMarginRight),u=Math.min(u,f.relativePosition.y+f.borderMarginTop),l=Math.max(l,f.relativePosition.y+f.borderMarginBottom)}this.borderLeft=n,this.borderRight=i,this.borderTop=r,this.borderBottom=o,this.borderMarginLeft=s,this.borderMarginRight=a,this.borderMarginTop=u,this.borderMarginBottom=l,this.calculateRectangle(),this.calculateMarginRectangle(),this.xBordersHaveBeenSet=!0,this.yBordersHaveBeenSet=!0}}},{key:"calculateTopBottomBorders",value:function(){if(0!==this.childElements.length){for(var t=0,e=this.ChildElements.length;t<e;++t)this.ChildElements[t].calculateTopBottomBorders();var n=Number.MAX_VALUE,i=Number.MIN_VALUE,r=Number.MAX_VALUE,o=Number.MIN_VALUE;this.yBordersHaveBeenSet&&(n=this.borderTop,i=this.borderBottom,r=this.borderMarginTop,o=this.borderMarginBottom);for(var s=0,a=this.ChildElements.length;s<a;++s){var u=this.ChildElements[s];n=Math.min(n,u.relativePosition.y+u.borderTop),f.EngravingRules.FixStafflineBoundingBox&&u.dataObject instanceof c.StaffLineActivitySymbol||(i=Math.max(i,u.relativePosition.y+u.borderBottom)),r=Math.min(r,u.relativePosition.y+u.borderMarginTop),o=Math.max(o,u.relativePosition.y+u.borderMarginBottom)}this.borderTop=n,this.borderBottom=i,this.borderMarginTop=r,this.borderMarginBottom=o,this.calculateRectangle(),this.calculateMarginRectangle()}}},{key:"computeNonOverlappingPositionWithMargin",value:function(t,e,n){this.RelativePosition=new s.PointF2D(n.x,n.y),this.setAbsolutePositionFromParent();var r=0,a=!1;do{switch(e){case i.Left:case i.Right:r=this.relativePosition.x,t.calculateMarginPositionAlongDirection(this,e),a=Math.abs(r-this.relativePosition.x)>.001;break;case i.Up:case i.Down:r=this.relativePosition.y,t.calculateMarginPositionAlongDirection(this,e),a=Math.abs(r-this.relativePosition.y)>.001;break;default:throw new o.ArgumentOutOfRangeException("direction")}}while(a)}},{key:"collisionDetection",value:function(t){var e=Math.min(this.AbsolutePosition.x+this.borderRight,t.absolutePosition.x+t.borderRight)-Math.max(this.AbsolutePosition.x+this.borderLeft,t.absolutePosition.x+t.borderLeft),n=Math.min(this.AbsolutePosition.y+this.borderBottom,t.absolutePosition.y+t.borderBottom)-Math.max(this.AbsolutePosition.y+this.borderTop,t.absolutePosition.y+t.borderTop);return e>0&&n>0}},{key:"liesInsideBorders",value:function(t){if(this.AbsolutePosition.x+this.borderLeft<=t.absolutePosition.x+t.borderLeft&&t.absolutePosition.x+t.borderLeft<=this.AbsolutePosition.x+this.borderRight&&this.AbsolutePosition.x+this.borderLeft<=t.absolutePosition.x+t.borderRight&&t.absolutePosition.x+t.borderRight<=this.AbsolutePosition.x+this.borderRight){var e=this.AbsolutePosition.y+this.borderTop<=t.absolutePosition.y+t.borderBottom&&t.absolutePosition.y+t.borderBottom<=this.AbsolutePosition.y+this.borderBottom;if(this.AbsolutePosition.y+this.borderTop<=t.absolutePosition.y+t.borderTop&&t.absolutePosition.y+t.borderTop<=this.AbsolutePosition.y+this.borderBottom&&e)return!0}return!1}},{key:"pointLiesInsideBorders",value:function(t){return this.AbsolutePosition.x+this.borderLeft<=t.x&&t.x<=this.AbsolutePosition.x+this.borderRight&&this.AbsolutePosition.y+this.borderTop<=t.y&&t.y<=this.AbsolutePosition.y+this.borderBottom}},{key:"marginCollisionDetection",value:function(t){var e=Math.min(this.AbsolutePosition.x+this.borderMarginRight,t.absolutePosition.x+t.borderMarginRight)-Math.max(this.AbsolutePosition.x+this.borderMarginLeft,t.absolutePosition.x+t.borderMarginLeft),n=Math.min(this.AbsolutePosition.y+this.borderMarginBottom,t.absolutePosition.y+t.borderMarginBottom)-Math.max(this.AbsolutePosition.y+this.borderMarginTop,t.absolutePosition.y+t.borderMarginTop);return e>0&&n>0}},{key:"liesInsideMargins",value:function(t){if(this.AbsolutePosition.x+this.borderMarginLeft<=t.absolutePosition.x+t.borderMarginLeft&&t.absolutePosition.x+t.borderMarginLeft<=this.AbsolutePosition.x+this.borderMarginRight&&this.AbsolutePosition.x+this.borderMarginLeft<=t.absolutePosition.x+t.borderMarginRight&&t.absolutePosition.x+t.borderMarginRight<=this.AbsolutePosition.x+this.borderMarginRight){var e=this.AbsolutePosition.y+this.borderMarginTop<=t.absolutePosition.y+t.borderMarginBottom&&t.absolutePosition.y+t.borderMarginBottom<=this.AbsolutePosition.y+this.borderMarginBottom;if(this.AbsolutePosition.y+this.borderMarginTop<=t.absolutePosition.y+t.borderMarginTop&&t.absolutePosition.y+t.borderMarginTop<=this.AbsolutePosition.y+this.borderMarginBottom&&e)return!0}return!1}},{key:"pointLiesInsideMargins",value:function(t){return this.AbsolutePosition.x+this.borderMarginLeft<=t.x&&t.x<=this.AbsolutePosition.x+this.borderMarginRight&&this.AbsolutePosition.y+this.borderMarginTop<=t.y&&t.y<=this.AbsolutePosition.y+this.borderMarginBottom}},{key:"computeNonOverlappingPosition",value:function(t,e,n){this.RelativePosition=new s.PointF2D(n.x,n.y),this.setAbsolutePositionFromParent();var r=0,a=!1;do{switch(e){case i.Left:case i.Right:r=this.relativePosition.x,t.calculatePositionAlongDirection(this,e),a=Math.abs(r-this.relativePosition.x)>1e-4;break;case i.Up:case i.Down:r=this.relativePosition.y,t.calculatePositionAlongDirection(this,e),a=Math.abs(r-this.relativePosition.y)>1e-4;break;default:throw new o.ArgumentOutOfRangeException("direction")}}while(a)}},{key:"getClickedObjectOfType",value:function(t){var e=this.dataObject;if(this.pointLiesInsideBorders(t)&&void 0!==e)return e;for(var n=0,i=this.childElements.length;n<i;++n){var r=this.childElements[n].getClickedObjectOfType(t);if(void 0!==r)return r}}},{key:"getObjectsInRegion",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0!==this.dataObject)if(e){if(t.liesInsideBorders(this))return[this.dataObject]}else if(t.collisionDetection(this))return[this.dataObject];var n,i=[],r=u(this.childElements);try{for(r.s();!(n=r.n()).done;){var o=n.value;i.concat(o.getObjectsInRegion(t,e))}}catch(s){r.e(s)}finally{r.f()}return i}},{key:"calculateRectangle",value:function(){this.upperLeftCorner=new s.PointF2D(this.BorderLeft,this.BorderTop),this.size=new a.SizeF2D(this.BorderRight-this.BorderLeft,this.BorderBottom-this.BorderTop),this.boundingRectangle=l.RectangleF2D.createFromLocationAndSize(this.upperLeftCorner,this.size)}},{key:"calculateMarginRectangle",value:function(){this.upperLeftMarginCorner=new s.PointF2D(this.BorderMarginLeft,this.BorderMarginTop),this.marginSize=new a.SizeF2D(this.BorderMarginRight-this.BorderMarginLeft,this.BorderMarginBottom-this.BorderMarginTop),this.boundingMarginRectangle=l.RectangleF2D.createFromLocationAndSize(this.upperLeftMarginCorner,this.marginSize)}},{key:"calculateMarginPositionAlongDirection",value:function(t,e){if(this!==t){if(this.isSymbol&&this.marginCollisionDetection(t)){var n=0;switch(e){case i.Left:return n=this.absolutePosition.x+this.borderMarginLeft-(t.absolutePosition.x+t.borderMarginRight),t.relativePosition.x+=n,void(t.absolutePosition.x+=n);case i.Right:return n=this.absolutePosition.x+this.borderMarginRight-(t.absolutePosition.x+t.borderMarginLeft),t.relativePosition.x+=n,void(t.absolutePosition.x+=n);case i.Up:return n=this.absolutePosition.y+this.borderMarginTop-(t.absolutePosition.y+t.borderMarginBottom),t.relativePosition.y+=n,void(t.absolutePosition.y+=n);case i.Down:return n=this.absolutePosition.y+this.borderMarginBottom-(t.absolutePosition.y+t.borderMarginTop),t.relativePosition.y+=n,void(t.absolutePosition.y+=n);default:throw new o.ArgumentOutOfRangeException("direction")}}for(var r=0,s=this.ChildElements.length;r<s;++r)this.ChildElements[r].calculateMarginPositionAlongDirection(t,e)}}},{key:"calculatePositionAlongDirection",value:function(t,e){if(this!==t){var n;if(this.isSymbol&&this.collisionDetection(t))switch(e){case i.Left:return n=this.absolutePosition.x+this.borderLeft-(t.absolutePosition.x+t.borderRight),t.relativePosition.x+=n,void(t.absolutePosition.x+=n);case i.Right:return n=this.absolutePosition.x+this.borderRight-(t.absolutePosition.x+t.borderLeft),t.relativePosition.x+=n,void(t.absolutePosition.x+=n);case i.Up:return n=this.absolutePosition.y+this.borderTop-(t.absolutePosition.y+t.borderBottom),t.relativePosition.y+=n,void(t.absolutePosition.y+=n);case i.Down:return n=this.absolutePosition.y+this.borderBottom-(t.absolutePosition.y+t.borderTop),t.relativePosition.y+=n,void(t.absolutePosition.y+=n);default:throw new o.ArgumentOutOfRangeException("direction")}for(var r=0,s=this.ChildElements.length;r<s;++r)this.ChildElements[r].calculatePositionAlongDirection(t,e)}}},{key:"RelativePositionHasBeenSet",get:function(){return this.relativePositionHasBeenSet}},{key:"XBordersHaveBeenSet",get:function(){return this.xBordersHaveBeenSet},set:function(t){this.xBordersHaveBeenSet=t}},{key:"YBordersHaveBeenSet",get:function(){return this.yBordersHaveBeenSet},set:function(t){this.yBordersHaveBeenSet=t}},{key:"AbsolutePosition",get:function(){return this.absolutePosition},set:function(t){this.absolutePosition=t}},{key:"RelativePosition",get:function(){return this.relativePosition},set:function(t){this.relativePosition=t,this.relativePositionHasBeenSet=!0}},{key:"Size",get:function(){return this.size},set:function(t){this.size=t}},{key:"MarginSize",get:function(){return this.marginSize}},{key:"UpperLeftCorner",get:function(){return this.upperLeftCorner}},{key:"UpperLeftMarginCorner",get:function(){return this.upperLeftMarginCorner}},{key:"BorderLeft",get:function(){return this.borderLeft},set:function(t){this.borderLeft=t,this.calculateRectangle()}},{key:"BorderRight",get:function(){return this.borderRight},set:function(t){this.borderRight=t,this.calculateRectangle()}},{key:"BorderTop",get:function(){return this.borderTop},set:function(t){this.borderTop=t,this.calculateRectangle()}},{key:"BorderBottom",get:function(){return this.borderBottom},set:function(t){this.borderBottom=t,this.calculateRectangle()}},{key:"BorderMarginLeft",get:function(){return this.borderMarginLeft>this.borderLeft?this.borderLeft:this.borderMarginLeft},set:function(t){this.borderMarginLeft=t,this.calculateMarginRectangle()}},{key:"BorderMarginRight",get:function(){return this.borderMarginRight<this.borderRight?this.borderRight:this.borderMarginRight},set:function(t){this.borderMarginRight=t,this.calculateMarginRectangle()}},{key:"BorderMarginTop",get:function(){return this.borderMarginTop>this.borderTop?this.borderTop:this.borderMarginTop},set:function(t){this.borderMarginTop=t,this.calculateMarginRectangle()}},{key:"BorderMarginBottom",get:function(){return this.borderMarginBottom<this.borderBottom?this.borderBottom:this.borderMarginBottom},set:function(t){this.borderMarginBottom=t,this.calculateMarginRectangle()}},{key:"BoundingRectangle",get:function(){return this.boundingRectangle}},{key:"BoundingMarginRectangle",get:function(){return this.boundingMarginRectangle}},{key:"ChildElements",get:function(){return this.childElements},set:function(t){this.childElements=t}},{key:"Parent",get:function(){return this.parent},set:function(t){if(void 0!==this.parent){var e=this.parent.ChildElements.indexOf(this,0);e>-1&&this.parent.ChildElements.splice(e,1)}this.parent=t,this.parent.ChildElements.indexOf(this)>-1?r.error("BoundingBox of "+this.dataObject.constructor.name+" already in children list of "+this.parent.dataObject.constructor.name+"'s BoundingBox"):this.parent.ChildElements.push(this)}},{key:"DataObject",get:function(){return this.dataObject}},{key:"Center",get:function(){return new s.PointF2D(this.RelativePosition.x+(this.BorderMarginRight+this.BorderMarginLeft),this.RelativePosition.y+(this.BorderMarginBottom+this.BorderMarginTop))}}]),t}(),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Up=2]="Up",t[t.Down=3]="Down"}(i=e.ColDirEnum||(e.ColDirEnum={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;h(this,t),this.x=0,this.y=0,this.x=e,this.y=n}return d(t,[{key:"ToString",value:function(){return"["+this.x+", "+this.y+"]"}}],[{key:"pointsAreEqual",value:function(t,e){return t.x===e.x&&t.y===e.y}},{key:"Empty",get:function(){return new t}}]),t}();e.PointF2D=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GraphicalObject=function(){function t(){h(this,t)}return d(t,[{key:"PositionAndShape",get:function(){return this.boundingBox},set:function(t){this.boundingBox=t}}]),t}()},function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractExpression=function(){function t(e){h(this,t),this.placement=e}return d(t,[{key:"Placement",get:function(){return this.placement}}],[{key:"isStringInStringList",value:function(t,e){for(var n=0,i=t.length;n<i;++n){var r=t[n];if(e.toLowerCase()===r.toLowerCase().trim())return!0}return!1}},{key:"PlacementEnumFromString",value:function(t){switch(t.toLowerCase()){case"above":return i.Above;case"below":return i.Below;case"left":return i.Left;case"right":return i.Right;case"auto":default:return i.NotYetDefined}}}]),t}(),function(t){t[t.Above=0]="Above",t[t.Below=1]="Below",t[t.Left=2]="Left",t[t.Right=3]="Right",t[t.NotYetDefined=4]="NotYetDefined"}(i=e.PlacementEnum||(e.PlacementEnum={}))},function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.LeftTop=0]="LeftTop",t[t.LeftCenter=1]="LeftCenter",t[t.LeftBottom=2]="LeftBottom",t[t.CenterTop=3]="CenterTop",t[t.CenterCenter=4]="CenterCenter",t[t.CenterBottom=5]="CenterBottom",t[t.RightTop=6]="RightTop",t[t.RightCenter=7]="RightCenter",t[t.RightBottom=8]="RightBottom"}(i=e.TextAlignmentEnum||(e.TextAlignmentEnum={})),e.TextAlignment=function(){function t(){h(this,t)}return d(t,null,[{key:"IsLeft",value:function(t){return t===i.LeftTop||t===i.LeftCenter||t===i.LeftBottom}},{key:"IsCenterAligned",value:function(t){return t===i.CenterTop||t===i.CenterCenter||t===i.CenterBottom}},{key:"IsRight",value:function(t){return t===i.RightTop||t===i.RightCenter||t===i.RightBottom}}]),t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,s,a=i(2),u=i(53),l=i(2),c=i(2),f=i(13),p=function(t){n(i,t);var e=r(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.G,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return h(this,i),(t=e.call(this,void 0)).clefType=o.G,t.line=2,t.octaveOffset=0,t.line=s,t.clefType=n,t.octaveOffset=r,t.calcParameters(),t}return d(i,[{key:"Equals",value:function(t){return this===t||void 0!==this&&void 0!==t&&this.clefPitch===t.clefPitch&&this.Line===t.Line}},{key:"NotEqual",value:function(t){return!this.Equals(t)}},{key:"ToString",value:function(){return"ClefType: "+this.clefType}},{key:"calcParameters",value:function(){switch(this.clefType){case o.G:this.clefPitch=new a.Pitch(l.NoteEnum.G,1+this.octaveOffset,c.AccidentalEnum.NONE),this.referenceCyPosition=5-this.line+2;break;case o.F:this.clefPitch=new a.Pitch(l.NoteEnum.F,0+this.octaveOffset,c.AccidentalEnum.NONE),this.referenceCyPosition=5-this.line+1.5;break;case o.C:this.clefPitch=new a.Pitch(l.NoteEnum.C,1+this.octaveOffset,c.AccidentalEnum.NONE),this.referenceCyPosition=5-this.line;break;case o.percussion:this.clefPitch=new a.Pitch(l.NoteEnum.C,2,c.AccidentalEnum.NONE),this.referenceCyPosition=2;break;case o.TAB:this.clefPitch=new a.Pitch(l.NoteEnum.G,0,c.AccidentalEnum.NONE),this.referenceCyPosition=0;break;default:throw new f.ArgumentOutOfRangeException("clefType")}}},{key:"ClefType",get:function(){return this.clefType},set:function(t){this.clefType=t}},{key:"Line",get:function(){return this.line},set:function(t){this.line=t}},{key:"OctaveOffset",get:function(){return this.octaveOffset},set:function(t){this.octaveOffset=t}},{key:"ClefPitch",get:function(){return this.clefPitch},set:function(t){this.clefPitch=t}},{key:"ReferenceCyPosition",get:function(){return this.referenceCyPosition},set:function(t){this.referenceCyPosition=t}}],[{key:"getDefaultClefFromMidiInstrument",value:function(t){switch(t){case s.Acoustic_Grand_Piano:case s.Electric_Bass_finger:case s.Electric_Bass_pick:case s.Fretless_Bass:case s.Slap_Bass_1:case s.Slap_Bass_2:case s.Synth_Bass_1:case s.Synth_Bass_2:case s.Contrabass:return new i(o.F,0,4);default:return new i(o.G,0,2)}}},{key:"getAllPossibleClefs",value:function(){for(var t=[],e=0;e<=2;e++){var n=new i(o.G,e,2);t.push(n)}for(var r=-2;r<=0;r++){var s=new i(o.F,r,4);t.push(s)}return t}},{key:"isSupportedClef",value:function(t){switch(t){case o.G:case o.F:case o.C:case o.percussion:case o.TAB:return!0;default:return!1}}}]),i}(u.AbstractNotationInstruction);e.ClefInstruction=p,function(t){t[t.G=0]="G",t[t.F=1]="F",t[t.C=2]="C",t[t.percussion=3]="percussion",t[t.TAB=4]="TAB"}(o=e.ClefEnum||(e.ClefEnum={})),function(t){t[t.None=-1]="None",t[t.Acoustic_Grand_Piano=0]="Acoustic_Grand_Piano",t[t.Bright_Acoustic_Piano=1]="Bright_Acoustic_Piano",t[t.Electric_Grand_Piano=2]="Electric_Grand_Piano",t[t.Honky_tonk_Piano=3]="Honky_tonk_Piano",t[t.Electric_Piano_1=4]="Electric_Piano_1",t[t.Electric_Piano_2=5]="Electric_Piano_2",t[t.Harpsichord=6]="Harpsichord",t[t.Clavinet=7]="Clavinet",t[t.Celesta=8]="Celesta",t[t.Glockenspiel=9]="Glockenspiel",t[t.Music_Box=10]="Music_Box",t[t.Vibraphone=11]="Vibraphone",t[t.Marimba=12]="Marimba",t[t.Xylophone=13]="Xylophone",t[t.Tubular_Bells=14]="Tubular_Bells",t[t.Dulcimer=15]="Dulcimer",t[t.Drawbar_Organ=16]="Drawbar_Organ",t[t.Percussive_Organ=17]="Percussive_Organ",t[t.Rock_Organ=18]="Rock_Organ",t[t.Church_Organ=19]="Church_Organ",t[t.Reed_Organ=20]="Reed_Organ",t[t.Accordion=21]="Accordion",t[t.Harmonica=22]="Harmonica",t[t.Tango_Accordion=23]="Tango_Accordion",t[t.Acoustic_Guitar_nylon=24]="Acoustic_Guitar_nylon",t[t.Acoustic_Guitar_steel=25]="Acoustic_Guitar_steel",t[t.Electric_Guitar_jazz=26]="Electric_Guitar_jazz",t[t.Electric_Guitar_clean=27]="Electric_Guitar_clean",t[t.Electric_Guitar_muted=28]="Electric_Guitar_muted",t[t.Overdriven_Guitar=29]="Overdriven_Guitar",t[t.Distortion_Guitar=30]="Distortion_Guitar",t[t.Guitar_harmonics=31]="Guitar_harmonics",t[t.Acoustic_Bass=32]="Acoustic_Bass",t[t.Electric_Bass_finger=33]="Electric_Bass_finger",t[t.Electric_Bass_pick=34]="Electric_Bass_pick",t[t.Fretless_Bass=35]="Fretless_Bass",t[t.Slap_Bass_1=36]="Slap_Bass_1",t[t.Slap_Bass_2=37]="Slap_Bass_2",t[t.Synth_Bass_1=38]="Synth_Bass_1",t[t.Synth_Bass_2=39]="Synth_Bass_2",t[t.Violin=40]="Violin",t[t.Viola=41]="Viola",t[t.Cello=42]="Cello",t[t.Contrabass=43]="Contrabass",t[t.Tremolo_Strings=44]="Tremolo_Strings",t[t.Pizzicato_Strings=45]="Pizzicato_Strings",t[t.Orchestral_Harp=46]="Orchestral_Harp",t[t.Timpani=47]="Timpani",t[t.String_Ensemble_1=48]="String_Ensemble_1",t[t.String_Ensemble_2=49]="String_Ensemble_2",t[t.Synth_Strings_1=50]="Synth_Strings_1",t[t.Synth_Strings_2=51]="Synth_Strings_2",t[t.Choir_Aahs=52]="Choir_Aahs",t[t.Voice_Oohs=53]="Voice_Oohs",t[t.Synth_Voice=54]="Synth_Voice",t[t.Orchestra_Hit=55]="Orchestra_Hit",t[t.Trumpet=56]="Trumpet",t[t.Trombone=57]="Trombone",t[t.Tuba=58]="Tuba",t[t.Muted_Trumpet=59]="Muted_Trumpet",t[t.French_Horn=60]="French_Horn",t[t.Brass_Section=61]="Brass_Section",t[t.Synth_Brass_1=62]="Synth_Brass_1",t[t.Synth_Brass_2=63]="Synth_Brass_2",t[t.Soprano_Sax=64]="Soprano_Sax",t[t.Alto_Sax=65]="Alto_Sax",t[t.Tenor_Sax=66]="Tenor_Sax",t[t.Baritone_Sax=67]="Baritone_Sax",t[t.Oboe=68]="Oboe",t[t.English_Horn=69]="English_Horn",t[t.Bassoon=70]="Bassoon",t[t.Clarinet=71]="Clarinet",t[t.Piccolo=72]="Piccolo",t[t.Flute=73]="Flute",t[t.Recorder=74]="Recorder",t[t.Pan_Flute=75]="Pan_Flute",t[t.Blown_Bottle=76]="Blown_Bottle",t[t.Shakuhachi=77]="Shakuhachi",t[t.Whistle=78]="Whistle",t[t.Ocarina=79]="Ocarina",t[t.Lead_1_square=80]="Lead_1_square",t[t.Lead_2_sawtooth=81]="Lead_2_sawtooth",t[t.Lead_3_calliope=82]="Lead_3_calliope",t[t.Lead_4_chiff=83]="Lead_4_chiff",t[t.Lead_5_charang=84]="Lead_5_charang",t[t.Lead_6_voice=85]="Lead_6_voice",t[t.Lead_7_fifths=86]="Lead_7_fifths",t[t.Lead_8_bass_lead=87]="Lead_8_bass_lead",t[t.Pad_1_new_age=88]="Pad_1_new_age",t[t.Pad_2_warm=89]="Pad_2_warm",t[t.Pad_3_polysynth=90]="Pad_3_polysynth",t[t.Pad_4_choir=91]="Pad_4_choir",t[t.Pad_5_bowed=92]="Pad_5_bowed",t[t.Pad_6_metallic=93]="Pad_6_metallic",t[t.Pad_7_halo=94]="Pad_7_halo",t[t.Pad_8_sweep=95]="Pad_8_sweep",t[t.FX_1_rain=96]="FX_1_rain",t[t.FX_2_soundtrack=97]="FX_2_soundtrack",t[t.FX_3_crystal=98]="FX_3_crystal",t[t.FX_4_atmosphere=99]="FX_4_atmosphere",t[t.FX_5_brightness=100]="FX_5_brightness",t[t.FX_6_goblins=101]="FX_6_goblins",t[t.FX_7_echoes=102]="FX_7_echoes",t[t.FX_8_scifi=103]="FX_8_scifi",t[t.Sitar=104]="Sitar",t[t.Banjo=105]="Banjo",t[t.Shamisen=106]="Shamisen",t[t.Koto=107]="Koto",t[t.Kalimba=108]="Kalimba",t[t.Bag_pipe=109]="Bag_pipe",t[t.Fiddle=110]="Fiddle",t[t.Shanai=111]="Shanai",t[t.Tinkle_Bell=112]="Tinkle_Bell",t[t.Agogo=113]="Agogo",t[t.Steel_Drums=114]="Steel_Drums",t[t.Woodblock=115]="Woodblock",t[t.Taiko_Drum=116]="Taiko_Drum",t[t.Melodic_Tom=117]="Melodic_Tom",t[t.Synth_Drum=118]="Synth_Drum",t[t.Reverse_Cymbal=119]="Reverse_Cymbal",t[t.Guitar_Fret_Noise=120]="Guitar_Fret_Noise",t[t.Breath_Noise=121]="Breath_Noise",t[t.Seashore=122]="Seashore",t[t.Bird_Tweet=123]="Bird_Tweet",t[t.Telephone_Ring=124]="Telephone_Ring",t[t.Helicopter=125]="Helicopter",t[t.Applause=126]="Applause",t[t.Gunshot=127]="Gunshot",t[t.Percussion=128]="Percussion"}(s=e.MidiInstrument||(e.MidiInstrument={}))},function(t,e,n){window,t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,(function(e){return t[e]}).bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){var e="function"==typeof Map?new Map:void 0;return(s=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return u(t,arguments,c(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,t)})(t)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function u(t,e,n){return(u=a()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&l(r,n.prototype),r}).apply(null,arguments)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.r(e);var h=function(){};function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function d(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}h.L=function(t,e){if(e){var n=Array.prototype.slice.call(e).join(" ");window.console.log(t+": "+n)}},h.MakeException=function(t){return function(e){function n(e,i){var s;return r(this,n),(s=o(this,c(n).call(this,e))).name=t,s.message=e,s.data=i,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(n,e),n}(s(Error))},h.RERR=h.RuntimeError=function(){function t(e,n){r(this,t),this.code=e,this.message=n}var e;return(e=[{key:"toString",value:function(){return"[RuntimeError] "+this.code+":"+this.message}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}(),h.Merge=function(t,e){for(var n in e)t[n]=e[n];return t},h.Min=Math.min,h.Max=Math.max,h.forEach=function(t,e){for(var n=0;n<t.length;n++)e(t[n],n)},h.RoundN=function(t,e){return t%e>=e/2?parseInt(t/e,10)*e+e:parseInt(t/e,10)*e},h.MidLine=function(t,e){var n=e+(t-e)/2;return n%2>0&&(n=h.RoundN(10*n,5)/10),n},h.SortAndUnique=function(t,e,n){if(t.length>1){var i,r=[];t.sort(e);for(var o=0;o<t.length;++o)0!==o&&n(t[o],i)||r.push(t[o]),i=t[o];return r}return t},h.Contains=function(t,e){for(var n=t.length;n--;)if(t[n]===e)return!0;return!1},h.getCanvasContext=function(t){if(!t)throw new h.RERR("BadArgument","Invalid canvas selector: "+t);var e=document.getElementById(t);if(!e||!e.getContext)throw new h.RERR("UnsupportedBrowserError","This browser does not support HTML5 Canvas");return e.getContext("2d")},h.drawDot=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#55";t.save(),t.setFillStyle(i),t.beginPath(),t.arc(e,n,3,0,2*Math.PI,!0),t.closePath(),t.fill(),t.restore()},h.BM=function(t,e){var n=(new Date).getTime();e();var i=(new Date).getTime()-n;h.L(t+i+"ms")},h.StackTrace=function(){return(new Error).stack},h.W=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.join(" ");window.console.log("Warning: ",i,h.StackTrace())},(h.Prefix=function(t){return h.Prefix.prefix+t}).prefix="vf-";var p=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.set(e,n)}return d(t,null,[{key:"GCD",value:function(t,e){if("number"!=typeof t||"number"!=typeof e)throw new h.RERR("BadArgument","Invalid numbers: ".concat(t,", ").concat(e));for(var n;0!==e;)n=e,e=t%e,t=n;return t}},{key:"LCM",value:function(e,n){return e*n/t.GCD(e,n)}},{key:"LCMM",value:function(e){if(0===e.length)return 0;if(1===e.length)return e[0];if(2===e.length)return t.LCM(e[0],e[1]);var n=e[0];return e.shift(),t.LCM(n,t.LCMM(e))}}]),d(t,[{key:"set",value:function(t,e){return this.numerator=void 0===t?1:t,this.denominator=void 0===e?1:e,this}},{key:"value",value:function(){return this.numerator/this.denominator}},{key:"simplify",value:function(){var e=this.numerator,n=this.denominator,i=t.GCD(e,n);return e/=i,(n/=i)<0&&(n=-n,e=-e),this.set(e,n)}},{key:"add",value:function(e,n){var i,r;e instanceof t?(i=e.numerator,r=e.denominator):(i=void 0!==e?e:0,r=void 0!==n?n:1);var o=t.LCM(this.denominator,r);return this.set(this.numerator*(o/this.denominator)+i*(o/r),o)}},{key:"subtract",value:function(e,n){var i,r;e instanceof t?(i=e.numerator,r=e.denominator):(i=void 0!==e?e:0,r=void 0!==n?n:1);var o=t.LCM(this.denominator,r);return this.set(this.numerator*(o/this.denominator)-i*(o/r),o)}},{key:"multiply",value:function(e,n){var i,r;return e instanceof t?(i=e.numerator,r=e.denominator):(i=void 0!==e?e:1,r=void 0!==n?n:1),this.set(this.numerator*i,this.denominator*r)}},{key:"divide",value:function(e,n){var i,r;return e instanceof t?(i=e.numerator,r=e.denominator):(i=void 0!==e?e:1,r=void 0!==n?n:1),this.set(this.numerator*r,this.denominator*i)}},{key:"equals",value:function(e){var n=t.__compareA.copy(e).simplify(),i=t.__compareB.copy(this).simplify();return n.numerator===i.numerator&&n.denominator===i.denominator}},{key:"greaterThan",value:function(e){var n=t.__compareB.copy(this);return n.subtract(e),n.numerator>0}},{key:"greaterThanEquals",value:function(e){var n=t.__compareB.copy(this);return n.subtract(e),n.numerator>=0}},{key:"lessThan",value:function(t){return!this.greaterThanEquals(t)}},{key:"lessThanEquals",value:function(t){return!this.greaterThan(t)}},{key:"clone",value:function(){return new t(this.numerator,this.denominator)}},{key:"copy",value:function(t){return"number"==typeof t?this.set(t||0,1):this.set(t.numerator,t.denominator)}},{key:"quotient",value:function(){return Math.floor(this.numerator/this.denominator)}},{key:"fraction",value:function(){return this.numerator%this.denominator}},{key:"abs",value:function(){return this.denominator=Math.abs(this.denominator),this.numerator=Math.abs(this.numerator),this}},{key:"toString",value:function(){return this.numerator+"/"+this.denominator}},{key:"toSimplifiedString",value:function(){return t.__tmp.copy(this).simplify().toString()}},{key:"toMixedString",value:function(){var e="",n=this.quotient(),i=t.__tmp.copy(this);return n<0?i.abs().fraction():i.fraction(),0!==n?(e+=n,0!==i.numerator&&(e+=" "+i.toSimplifiedString())):e=0===i.numerator?"0":i.toSimplifiedString(),e}},{key:"parse",value:function(t){var e=t.split("/"),n=parseInt(e[0],10),i=e[1]?parseInt(e[1],10):1;return this.set(n,i)}}]),t}();function m(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function b(t,e,n){return e&&m(t.prototype,e),n&&m(t,n),t}p.__compareA=new p,p.__compareB=new p,p.__tmp=new p;var v=h.MakeException("RegistryError");function y(t,e,n,i,r){t[e][n]||(t[e][n]={}),t[e][n][i]=r}var g=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.clear()}return b(t,null,[{key:"INDEXES",get:function(){return["type"]}}]),b(t,[{key:"clear",value:function(){return this.index={id:{},type:{},class:{}},this}},{key:"updateIndex",value:function(t){var e=t.id,n=t.name,i=t.value,r=t.oldValue,o=this.getElementById(e);null!==r&&this.index[n][r]&&delete this.index[n][r][e],null!==i&&y(this.index,n,i,o.getAttribute("id"),o)}},{key:"register",value:function(e,n){var i=this;if(!(n=n||e.getAttribute("id")))throw new v("Can't add element without `id` attribute to registry",e);return e.setAttribute("id",n),y(this.index,"id",n,n,e),t.INDEXES.forEach((function(t){i.updateIndex({id:n,name:t,value:e.getAttribute(t),oldValue:null})})),e.onRegister(this),this}},{key:"getElementById",value:function(t){return this.index.id[t]?this.index.id[t][t]:null}},{key:"getElementsByAttribute",value:function(t,e){var n=this.index[t];return n&&n[e]?Object.keys(n[e]).map((function(t){return n[e][t]})):[]}},{key:"getElementsByType",value:function(t){return this.getElementsByAttribute("type",t)}},{key:"getElementsByClass",value:function(t){return this.getElementsByAttribute("class",t)}},{key:"onUpdate",value:function(e){var n=e.id,i=e.name,r=e.value,o=e.oldValue;return function(t,e){return t.filter((function(t){return t===e})).length>0}(t.INDEXES.concat(["id","class"]),i)?(this.updateIndex({id:n,name:i,value:r,oldValue:o}),this):this}}],[{key:"enableDefaultRegistry",value:function(e){t.defaultRegistry=e}},{key:"getDefaultRegistry",value:function(){return t.defaultRegistry}},{key:"disableDefaultRegistry",value:function(){t.defaultRegistry=null}}]),t}();function S(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _(t,e,n){return e&&w(t.prototype,e),n&&w(t,n),t}g.defaultRegistry=null;var x=function(){function t(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).type;S(this,t),this.attrs={id:t.newID(),el:null,type:e||"Base",classes:{}},this.boundingBox=null,this.context=null,this.rendered=!1,g.getDefaultRegistry()&&g.getDefaultRegistry().register(this)}return _(t,null,[{key:"newID",value:function(){return"auto"+t.ID++}}]),_(t,[{key:"setStyle",value:function(t){return this.style=t,this}},{key:"getStyle",value:function(){return this.style}},{key:"applyStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.context,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getStyle();return e?(t.save(),e.shadowColor&&t.setShadowColor(e.shadowColor),e.shadowBlur&&t.setShadowBlur(e.shadowBlur),e.fillStyle&&t.setFillStyle(e.fillStyle),e.strokeStyle&&t.setStrokeStyle(e.strokeStyle),e.lineWidth&&t.setLineWidth(e.lineWidth),this):this}},{key:"restoreStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.context;return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getStyle())?(t.restore(),this):this}},{key:"drawWithStyle",value:function(){this.checkContext(),this.applyStyle(),this.draw(),this.restoreStyle()}},{key:"hasClass",value:function(t){return!0===this.attrs.classes[t]}},{key:"addClass",value:function(t){return this.attrs.classes[t]=!0,this.registry&&this.registry.onUpdate({id:this.getAttribute("id"),name:"class",value:t,oldValue:null}),this}},{key:"removeClass",value:function(t){return delete this.attrs.classes[t],this.registry&&this.registry.onUpdate({id:this.getAttribute("id"),name:"class",value:null,oldValue:t}),this}},{key:"onRegister",value:function(t){return this.registry=t,this}},{key:"isRendered",value:function(){return this.rendered}},{key:"setRendered",value:function(){return this.rendered=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],this}},{key:"getAttributes",value:function(){return this.attrs}},{key:"getAttribute",value:function(t){return this.attrs[t]}},{key:"setAttribute",value:function(t,e){var n=this.attrs.id,i=this.attrs[t];return this.attrs[t]=e,this.registry&&this.registry.onUpdate({id:n,name:t,value:e,oldValue:i}),this}},{key:"getContext",value:function(){return this.context}},{key:"setContext",value:function(t){return this.context=t,this}},{key:"getBoundingBox",value:function(){return this.boundingBox}},{key:"checkContext",value:function(){if(!this.context)throw new h.RERR("NoContext","No rendering context attached to instance");return this.context}}]),t}();x.ID=1e3;var k=function(){function t(e,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.addPoint(e,n),this.addPoint(i,r)}var e;return(e=[{key:"width",value:function(){return this.x2-this.x1}},{key:"height",value:function(){return this.y2-this.y1}},{key:"addPoint",value:function(t,e){null!=t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),null!=e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))}},{key:"addX",value:function(t){this.addPoint(t,null)}},{key:"addY",value:function(t){this.addPoint(null,t)}},{key:"addQuadraticCurve",value:function(t,e,n,i,r,o){var s=t+2/3*(n-t),a=e+2/3*(i-e);this.addBezierCurve(t,e,s,a,s+1/3*(r-t),a+1/3*(o-e),r,o)}},{key:"addBezierCurve",value:function(t,e,n,i,r,o,s,a){var u,l=[t,e],c=[n,i],h=[r,o],f=[s,a];this.addPoint(l[0],l[1]),this.addPoint(f[0],f[1]);var d=function(t,e){return Math.pow(1-t,3)*l[e]+3*Math.pow(1-t,2)*t*c[e]+3*(1-t)*Math.pow(t,2)*h[e]+Math.pow(t,3)*f[e]};for(u=0;u<=1;u++){var p=6*l[u]-12*c[u]+6*h[u],m=-3*l[u]+9*c[u]-9*h[u]+3*f[u],b=3*c[u]-3*l[u];if(0!==m){var v=Math.pow(p,2)-4*b*m;if(!(v<0)){var y=(-p+Math.sqrt(v))/(2*m);0<y&&y<1&&(0===u&&this.addX(d(y,u)),1===u&&this.addY(d(y,u)));var g=(-p-Math.sqrt(v))/(2*m);0<g&&g<1&&(0===u&&this.addX(d(g,u)),1===u&&this.addY(d(g,u)))}}else{if(0===p)continue;var S=-b/p;0<S&&S<1&&(0===u&&this.addX(d(S,u)),1===u&&this.addY(d(S,u)))}}}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}();function E(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function P(t,e,n){return e&&E(t.prototype,e),n&&E(t,n),t}var A=function(){function t(e,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n,this.w=i,this.h=r}return P(t,null,[{key:"copy",value:function(e){return new t(e.x,e.y,e.w,e.h)}}]),P(t,[{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"getW",value:function(){return this.w}},{key:"getH",value:function(){return this.h}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setW",value:function(t){return this.w=t,this}},{key:"setH",value:function(t){return this.h=t,this}},{key:"move",value:function(t,e){this.x+=t,this.y+=e}},{key:"clone",value:function(){return t.copy(this)}},{key:"mergeWith",value:function(t,e){var n=t,i=this.x<n.x?this.x:n.x,r=this.y<n.y?this.y:n.y,o=Math.max(this.x+this.w,n.x+n.w)-i,s=Math.max(this.y+this.h,n.y+n.h)-r;return this.x=i,this.y=r,this.w=o,this.h=s,e&&this.draw(e),this}},{key:"draw",value:function(t,e,n){e||(e=0),n||(n=0),t.rect(this.x+e,this.y+n,this.w,this.h),t.stroke()}}]),t}(),L={glyphs:{v0:{x_min:0,x_max:514.5,ha:525,o:"m 236 648 b 246 648 238 648 242 648 b 288 646 261 648 283 648 b 472 513 364 634 428 587 b 514 347 502 464 514 413 b 462 163 514 272 499 217 b 257 44 409 83 333 44 b 50 163 181 44 103 83 b 0 347 14 217 0 272 b 40 513 0 413 12 464 b 236 648 87 591 155 638 m 277 614 b 253 616 273 616 261 616 b 242 616 247 616 243 616 b 170 499 193 609 181 589 b 159 348 163 446 159 398 b 166 222 159 308 161 266 b 201 91 174 138 183 106 b 257 76 215 81 235 76 b 311 91 277 76 299 81 b 347 222 330 106 338 138 b 353 348 352 266 353 308 b 344 499 353 398 351 446 b 277 614 333 587 322 606 m 257 -1 l 258 -1 l 255 -1 l 257 -1 m 257 673 l 258 673 l 255 673 l 257 673 "},v1:{x_min:-1.359375,x_max:344.359375,ha:351,o:"m 126 637 l 129 638 l 198 638 l 266 638 l 269 635 b 274 631 272 634 273 632 l 277 627 l 277 395 b 279 156 277 230 277 161 b 329 88 281 123 295 106 b 344 69 341 81 344 79 b 337 55 344 62 343 59 l 333 54 l 197 54 l 61 54 l 58 55 b 50 69 53 59 50 62 b 65 88 50 79 53 81 b 80 97 72 91 74 93 b 117 156 103 113 112 129 b 117 345 117 161 117 222 l 117 528 l 100 503 l 38 406 b 14 383 24 384 23 383 b -1 398 5 383 -1 390 b 4 415 -1 403 1 409 b 16 437 5 416 10 426 l 72 539 l 100 596 b 121 632 119 631 119 631 b 126 637 122 634 125 635 m 171 -1 l 172 -1 l 170 -1 l 171 -1 m 171 673 l 172 673 l 170 673 l 171 673 "},v2:{x_min:-1.359375,x_max:458.6875,ha:468,o:"m 197 648 b 216 648 201 648 208 648 b 258 646 232 648 253 648 b 419 546 333 637 393 599 b 432 489 428 528 432 509 b 356 342 432 440 405 384 b 235 278 322 313 288 295 b 69 170 166 256 107 217 b 69 169 69 170 69 169 b 69 169 69 169 69 169 b 74 173 69 169 72 170 b 209 222 112 204 163 222 b 310 195 247 222 274 215 b 371 179 332 184 352 179 b 396 181 379 179 387 179 b 428 202 409 184 423 194 b 442 212 431 209 436 212 b 458 197 450 212 458 206 b 441 148 458 190 449 165 b 299 44 409 84 353 44 b 288 45 295 44 292 44 b 250 61 274 45 268 49 b 122 99 212 86 164 99 b 73 91 104 99 88 97 b 28 63 53 84 34 72 b 14 54 25 56 20 54 b 1 62 9 54 4 56 l -1 65 l -1 79 b 0 99 -1 91 0 95 b 2 113 1 102 2 108 b 164 309 20 197 81 272 b 285 470 232 341 277 398 b 287 487 287 476 287 481 b 171 595 287 551 239 595 b 155 595 166 595 160 595 b 142 592 145 594 142 594 b 145 589 142 592 142 591 b 179 527 168 576 179 551 b 132 455 179 496 163 467 b 104 451 122 452 112 451 b 27 530 62 451 27 487 b 29 555 27 538 27 546 b 197 648 44 601 115 639 m 228 -1 l 230 -1 l 227 -1 l 228 -1 m 228 673 l 230 673 l 227 673 l 228 673 "},v3:{x_min:-1.359375,x_max:409.6875,ha:418,o:"m 174 648 b 191 648 176 648 183 648 b 225 648 204 648 220 648 b 402 523 317 638 389 588 b 404 503 404 517 404 510 b 402 484 404 495 404 488 b 264 373 389 437 334 394 b 257 370 259 371 257 371 b 257 370 257 370 257 370 b 264 369 258 370 261 369 b 409 202 359 334 409 267 b 318 72 409 152 381 104 b 200 43 281 52 240 43 b 23 113 134 43 69 68 b 0 169 6 129 0 149 b 77 249 0 210 29 249 l 77 249 b 152 174 125 249 152 212 b 103 102 152 145 137 116 b 103 102 103 102 103 102 b 147 94 103 101 132 95 b 153 94 149 94 151 94 b 265 206 219 94 265 141 b 264 226 265 213 265 219 b 147 355 253 299 204 353 b 126 371 133 356 126 362 b 147 388 126 383 132 388 b 254 474 196 391 238 424 b 259 502 258 484 259 494 b 182 592 259 544 228 582 b 156 595 175 595 166 595 b 115 592 142 595 129 594 l 111 591 l 115 588 b 152 524 141 574 152 549 b 92 449 152 491 130 458 b 76 448 87 448 81 448 b -1 530 32 448 -1 488 b 20 581 -1 548 5 566 b 174 648 55 619 108 641 m 204 -1 l 205 -1 l 202 -1 l 204 -1 m 204 673 l 205 673 l 202 673 l 204 673 "},v4:{x_min:0,x_max:468.21875,ha:478,o:"m 174 637 b 232 638 175 638 189 638 b 277 638 245 638 259 638 l 378 638 l 381 635 b 389 623 386 632 389 627 b 382 609 389 617 386 613 b 366 589 381 606 372 598 l 313 528 l 245 451 l 209 410 l 155 348 l 84 267 b 59 240 72 252 59 240 b 59 240 59 240 59 240 b 151 238 59 238 68 238 l 242 238 l 242 303 b 243 371 242 369 242 370 b 289 426 245 374 254 385 l 303 441 l 317 456 l 338 483 l 360 506 l 371 520 b 386 527 375 526 381 527 b 400 519 392 527 397 524 b 401 440 401 516 401 514 b 401 377 401 423 401 402 l 401 238 l 426 238 b 453 237 449 238 450 238 b 465 217 461 234 465 226 b 460 202 465 212 464 206 b 426 197 454 197 453 197 l 401 197 l 401 180 b 451 88 402 129 412 109 b 468 69 465 81 468 79 b 461 55 468 62 466 59 l 458 54 l 321 54 l 185 54 l 182 55 b 175 69 176 59 175 62 b 191 88 175 79 176 81 b 240 180 230 109 240 129 l 240 197 l 125 197 b 73 195 104 195 87 195 b 8 197 10 195 9 197 b 0 212 2 199 0 205 b 0 212 0 212 0 212 b 20 242 0 219 0 219 b 163 610 104 344 163 492 b 174 637 163 628 166 634 m 234 -1 l 235 -1 l 232 -1 l 234 -1 m 234 673 l 235 673 l 232 673 l 234 673 "},v5:{x_min:0,x_max:409.6875,ha:418,o:"m 47 637 b 53 638 49 638 50 638 b 69 634 55 638 61 637 b 210 610 114 619 161 610 b 363 634 259 610 311 619 b 382 638 372 637 378 638 b 392 634 386 638 389 637 b 397 623 396 630 397 627 b 393 610 397 620 396 616 b 298 505 368 552 338 520 b 212 494 277 498 246 494 b 65 517 163 494 106 502 b 61 517 62 517 61 517 b 61 517 61 517 61 517 b 51 408 61 517 51 412 b 51 408 51 408 51 408 b 51 408 51 408 51 408 b 61 412 53 408 55 409 b 125 434 80 421 103 430 b 185 441 145 440 166 441 b 409 244 310 441 409 353 b 401 191 409 227 406 209 b 197 43 375 105 287 43 b 159 47 183 43 171 44 b 23 123 112 56 61 86 b 0 180 6 140 0 159 b 76 260 0 220 31 260 b 92 259 81 260 87 259 b 152 183 132 251 152 216 b 100 112 152 152 134 122 b 95 111 98 112 95 111 b 95 111 95 111 95 111 b 129 98 95 109 119 101 b 148 97 136 97 141 97 b 264 235 206 97 261 158 b 265 248 265 240 265 244 b 210 398 265 312 243 373 b 179 408 201 406 194 408 b 174 408 178 408 176 408 b 53 369 130 408 88 394 b 34 359 39 359 38 359 b 17 374 24 359 17 365 b 39 628 17 384 38 625 b 47 637 40 631 43 635 m 204 -1 l 205 -1 l 202 -1 l 204 -1 m 204 673 l 205 673 l 202 673 l 204 673 "},v6:{x_min:0,x_max:475.03125,ha:485,o:"m 255 648 b 274 648 259 648 266 648 b 314 646 288 648 307 648 b 450 555 374 637 438 594 b 454 530 453 546 454 538 b 375 451 454 485 416 451 b 328 467 359 451 343 455 b 300 526 310 483 300 503 b 352 598 300 557 319 589 b 356 599 355 598 356 599 b 352 602 356 599 355 601 b 288 616 330 612 308 616 b 210 584 257 616 230 605 b 164 433 189 559 174 508 b 160 374 163 415 160 381 b 160 374 160 374 160 374 b 160 374 160 374 160 374 b 168 377 160 374 164 376 b 258 395 200 390 228 395 b 366 367 294 395 328 387 b 475 223 436 333 475 283 b 472 197 475 215 473 206 b 349 65 462 141 419 95 b 259 43 317 51 288 43 b 167 69 230 43 200 52 b 4 290 80 113 20 195 b 0 349 1 309 0 328 b 20 467 0 391 6 433 b 255 648 58 563 155 637 m 269 363 b 257 363 265 363 261 363 b 210 345 236 363 220 356 b 186 226 196 324 186 272 b 187 198 186 216 186 206 b 213 95 191 151 202 112 b 257 76 221 83 238 76 b 270 77 261 76 266 76 b 321 156 299 81 310 99 b 329 229 326 183 329 206 b 321 301 329 252 326 274 b 269 363 311 342 298 359 m 236 -1 l 238 -1 l 235 -1 l 236 -1 m 236 673 l 238 673 l 235 673 l 236 673 "},v7:{x_min:0,x_max:442.359375,ha:451,o:"m 147 648 b 166 649 153 649 160 649 b 313 598 217 649 273 630 b 340 587 323 588 328 587 l 341 587 b 412 628 367 587 390 601 b 427 638 416 635 421 638 b 439 632 431 638 435 637 b 442 623 441 630 442 628 b 430 569 442 616 439 603 b 352 369 408 492 377 410 b 300 259 325 324 313 298 b 273 84 283 205 273 140 b 265 55 273 65 272 59 l 261 54 l 181 54 l 99 54 l 96 55 b 91 61 95 56 92 59 l 89 63 l 89 77 b 147 263 89 133 111 202 b 261 401 176 313 212 355 b 378 541 315 449 349 489 l 382 548 l 375 544 b 240 495 333 512 285 495 b 129 535 198 495 160 509 b 84 560 108 552 95 560 b 76 559 81 560 78 560 b 31 487 59 555 43 530 b 14 470 27 473 24 470 b 1 477 8 470 4 471 l 0 480 l 0 553 l 0 627 l 1 630 b 16 638 4 635 9 638 b 23 635 17 638 20 637 b 49 626 36 626 39 626 b 96 638 59 626 80 630 b 104 639 99 638 102 639 b 117 644 107 641 112 642 b 147 648 125 645 137 648 m 220 -1 l 221 -1 l 219 -1 l 220 -1 m 220 673 l 221 673 l 219 673 l 220 673 "},v8:{x_min:0,x_max:488.640625,ha:499,o:"m 217 648 b 245 649 225 648 235 649 b 453 516 343 649 430 595 b 458 478 455 503 458 491 b 412 370 458 440 441 398 b 411 369 412 369 411 369 b 415 365 411 367 412 367 b 488 231 462 331 488 281 b 472 165 488 208 483 186 b 243 43 434 86 338 43 b 63 104 178 43 112 62 b 0 233 20 140 0 186 b 73 365 0 283 24 331 l 77 369 l 72 374 b 29 476 42 406 29 441 b 217 648 29 557 103 635 m 258 605 b 242 606 253 605 247 606 b 157 552 198 606 157 580 b 160 541 157 548 159 544 b 319 413 176 503 242 452 l 337 403 l 338 406 b 359 476 352 428 359 452 b 258 605 359 537 318 595 m 138 326 b 130 330 134 328 130 330 b 130 330 130 330 130 330 b 107 305 127 330 112 313 b 84 231 91 281 84 256 b 243 86 84 156 151 86 b 249 87 245 86 246 87 b 347 156 303 88 347 120 b 344 172 347 162 345 167 b 156 319 325 227 257 281 b 138 326 151 322 144 324 m 243 -1 l 245 -1 l 242 -1 l 243 -1 m 243 673 l 245 673 l 242 673 l 243 673 "},v9:{x_min:0,x_max:475.03125,ha:485,o:"m 191 646 b 212 649 198 648 205 649 b 255 644 227 649 243 646 b 458 448 348 616 428 539 b 475 342 469 415 475 378 b 460 244 475 308 469 274 b 193 44 421 124 303 44 b 91 69 157 44 122 51 b 19 161 43 97 19 126 b 21 181 19 167 20 174 b 98 241 32 220 65 241 b 170 186 129 241 160 223 b 172 166 171 179 172 173 b 121 94 172 134 152 102 b 117 93 118 94 117 93 b 121 90 117 93 118 91 b 185 76 142 80 164 76 b 270 119 220 76 251 91 b 308 259 287 145 300 194 b 313 317 310 277 313 310 b 313 317 313 317 313 317 b 313 317 313 317 313 317 b 304 315 313 317 308 316 b 216 295 273 302 245 295 b 145 308 193 295 170 299 b 19 398 88 327 42 360 b 0 469 5 420 0 444 b 24 551 0 496 8 526 b 191 646 54 596 125 637 m 227 614 b 215 616 224 616 220 616 b 202 614 210 616 206 616 b 152 535 174 610 163 592 b 144 463 147 509 144 485 b 152 391 144 440 147 417 b 216 328 163 344 179 328 b 280 391 253 328 269 344 b 288 463 285 417 288 440 b 280 535 288 485 285 509 b 227 614 269 594 258 610 m 236 -1 l 238 -1 l 235 -1 l 236 -1 m 236 673 l 238 673 l 235 673 l 236 673 "},va:{x_min:-149.71875,x_max:148.359375,ha:151,o:"m -8 -1 b -1 0 -5 -1 -4 0 b 16 -11 5 0 13 -4 b 83 -186 17 -12 47 -90 l 148 -358 l 148 -363 b 127 -385 148 -376 138 -385 b 112 -378 122 -385 118 -383 b 54 -226 110 -374 114 -385 b 0 -81 24 -147 0 -81 b -55 -226 -1 -81 -25 -147 b -114 -378 -115 -385 -111 -374 b -129 -385 -119 -383 -123 -385 b -149 -363 -140 -385 -149 -376 l -149 -358 l -84 -186 b -19 -11 -49 -90 -19 -12 b -8 -1 -17 -8 -12 -4 "},vb:{x_min:0,x_max:428.75,ha:438,o:"m 262 186 b 273 186 266 186 272 186 b 274 186 273 186 274 186 b 285 186 274 186 280 186 b 428 48 375 181 428 122 b 386 -68 428 12 416 -29 b 155 -187 329 -145 236 -187 b 12 -111 92 -187 38 -162 b 0 -51 4 -91 0 -72 b 262 186 0 58 122 179 "},vc:{x_min:0,x_max:447.8125,ha:457,o:"m 0 86 l 0 173 l 223 173 l 447 173 l 447 86 l 447 0 l 223 0 l 0 0 l 0 86 "},vf:{x_min:0,x_max:370.21875,ha:378,o:"m 0 0 l 0 277 l 61 277 l 122 277 l 122 0 l 122 -278 l 61 -278 l 0 -278 l 0 0 m 246 -1 l 246 277 l 308 277 l 370 277 l 370 -1 l 370 -278 l 308 -278 l 246 -278 l 246 -1 "},v10:{x_min:0,x_max:559.421875,ha:571,o:"m 5 127 b 14 127 6 127 9 127 b 51 126 25 127 43 127 b 175 98 93 122 138 112 l 186 94 b 279 51 210 86 255 65 b 285 47 280 51 283 48 b 319 27 291 44 311 31 l 326 22 b 359 0 332 19 352 4 l 367 -6 b 371 -9 368 -6 370 -8 l 379 -15 b 387 -22 383 -18 386 -20 l 398 -30 l 411 -40 l 417 -47 l 427 -55 l 434 -61 b 441 -66 436 -62 439 -65 l 446 -72 l 453 -77 l 462 -87 b 558 -188 490 -113 549 -176 b 559 -195 559 -191 559 -194 b 548 -205 559 -201 555 -205 b 541 -204 547 -205 544 -205 b 534 -198 539 -201 536 -199 l 525 -191 b 481 -162 518 -187 490 -167 b 472 -155 477 -159 472 -156 b 468 -152 470 -155 469 -154 b 461 -149 466 -152 464 -151 b 428 -130 454 -145 441 -137 b 371 -99 413 -122 372 -99 b 363 -95 371 -99 367 -98 b 353 -91 357 -94 353 -91 b 348 -90 353 -91 352 -91 b 332 -81 343 -87 341 -86 b 27 -12 230 -37 127 -13 b 0 -5 4 -11 2 -11 b 0 58 0 -2 0 27 b 0 122 0 88 0 120 b 5 127 1 124 4 126 "},v11:{x_min:-155.171875,x_max:153.8125,ha:157,o:"m -137 353 b -130 353 -136 353 -133 353 b -112 349 -125 353 -119 352 b -100 342 -110 347 -104 344 b 0 317 -69 326 -35 317 b 111 349 38 317 76 328 b 129 353 117 352 123 353 b 153 327 142 353 153 344 b 144 302 153 320 153 317 b 27 6 93 226 50 113 b 21 -13 24 -11 24 -11 b 0 -26 17 -22 8 -26 b -24 -12 -9 -26 -19 -22 b -28 5 -24 -9 -27 -2 b -145 302 -53 117 -95 224 b -155 327 -155 317 -155 320 b -137 353 -155 340 -148 349 "},v18:{x_min:0,x_max:323.9375,ha:331,o:"m 217 535 b 225 537 220 537 221 537 b 245 524 235 537 242 533 l 246 521 l 247 390 l 247 258 l 273 265 b 306 270 288 269 299 270 b 322 259 315 270 319 267 b 323 208 323 256 323 233 b 322 158 323 184 323 159 b 288 140 318 148 315 147 b 247 130 254 131 247 130 b 247 65 247 130 247 104 b 247 20 247 51 247 36 l 247 -88 l 273 -81 b 306 -76 289 -77 299 -76 b 318 -81 311 -76 315 -77 b 323 -123 323 -87 323 -86 l 323 -138 l 323 -154 b 318 -195 323 -191 323 -190 b 269 -210 314 -199 315 -199 b 249 -216 259 -213 250 -216 l 247 -216 l 247 -349 l 246 -483 l 245 -487 b 225 -499 242 -495 234 -499 b 206 -487 219 -499 210 -495 l 205 -483 l 205 -355 l 205 -227 l 204 -227 l 181 -233 l 138 -244 b 117 -249 127 -247 117 -249 b 115 -385 115 -249 115 -256 l 115 -523 l 114 -526 b 95 -538 110 -534 102 -538 b 74 -526 87 -538 78 -534 l 73 -523 l 73 -391 b 72 -260 73 -269 73 -260 b 72 -260 72 -260 72 -260 b 19 -273 61 -263 23 -273 b 0 -260 10 -273 4 -267 b 0 -209 0 -256 0 -256 l 0 -162 l 1 -158 b 61 -134 5 -148 5 -148 l 73 -131 l 73 -22 b 72 86 73 79 73 86 b 72 86 72 86 72 86 b 19 74 61 83 23 74 b 0 86 10 74 4 79 b 0 137 0 90 0 90 l 0 184 l 1 188 b 61 212 5 198 5 198 l 73 215 l 73 348 l 73 481 l 74 485 b 95 498 78 492 87 498 b 103 495 98 498 100 496 b 114 485 107 494 111 489 l 115 481 l 115 353 l 115 226 l 121 226 b 159 235 123 227 141 231 l 198 247 l 205 248 l 205 384 l 205 521 l 206 524 b 217 535 209 528 212 533 m 205 9 b 205 119 205 70 205 119 l 205 119 b 182 113 204 119 194 116 l 138 102 b 117 97 127 99 117 97 b 115 -12 115 97 115 91 l 115 -122 l 121 -120 b 159 -111 123 -119 141 -115 l 198 -101 l 205 -98 l 205 9 "},v1b:{x_min:0,x_max:559.421875,ha:571,o:"m 544 204 b 548 204 545 204 547 204 b 559 194 555 204 559 199 b 559 190 559 192 559 191 b 530 156 559 188 556 184 b 462 86 510 134 481 104 b 453 76 458 81 454 77 l 446 70 l 441 65 b 434 59 439 63 436 61 l 427 54 b 409 37 426 51 416 44 b 392 23 398 29 394 26 b 387 19 389 22 387 20 b 379 13 386 19 383 16 l 371 8 l 367 5 l 359 -1 l 337 -16 b 285 -48 319 -29 298 -41 l 279 -52 b 186 -95 255 -66 210 -87 l 175 -99 b 23 -129 127 -117 68 -129 b 17 -129 20 -129 19 -129 b 1 -123 2 -129 2 -129 b 0 -49 0 -122 0 -83 b 0 4 0 -22 0 1 b 27 11 2 9 4 9 b 185 31 78 12 145 20 b 198 34 186 31 193 33 b 314 73 234 44 277 58 b 349 88 328 79 340 84 b 353 90 352 90 353 90 b 363 94 353 90 357 93 b 371 98 367 97 371 98 b 428 129 372 98 413 120 b 461 148 441 136 454 144 b 468 151 464 149 466 151 b 472 154 469 152 470 154 b 481 161 473 155 477 158 b 525 190 490 166 518 186 l 534 197 b 540 201 536 198 539 199 b 544 204 541 202 544 204 "},v1d:{x_min:0,x_max:619.3125,ha:632,o:"m 274 184 b 307 186 285 186 296 186 b 616 22 465 186 597 116 b 619 -1 617 13 619 5 b 308 -187 619 -104 483 -187 b 0 -1 133 -187 0 -102 b 5 36 0 11 1 23 b 274 184 29 115 141 176 m 289 161 b 272 162 284 162 277 162 b 171 41 209 162 171 108 b 205 -73 171 5 182 -34 b 345 -163 243 -133 298 -163 b 436 -98 385 -163 420 -142 b 446 -43 443 -80 446 -62 b 289 161 446 47 377 147 "},v1e:{x_min:-402.890625,x_max:401.53125,ha:410,o:"m -219 173 b -213 174 -217 174 -215 174 b -202 173 -209 174 -205 173 b -114 86 -200 172 -179 151 b -28 0 -66 37 -28 0 b 40 84 -28 0 2 37 b 117 174 111 173 110 172 b 122 174 118 174 119 174 b 132 173 125 174 129 173 b 295 11 134 172 171 134 l 307 -1 l 336 34 b 374 76 366 72 368 74 b 381 77 375 77 378 77 b 401 56 392 77 401 68 b 400 48 401 54 401 51 b 223 -172 397 41 230 -166 b 210 -176 220 -174 215 -176 b 201 -174 206 -176 204 -176 b 112 -87 198 -173 178 -152 b 27 0 65 -38 27 0 b -42 -86 27 0 -4 -38 b -118 -174 -112 -174 -111 -173 b -123 -176 -119 -176 -121 -176 b -133 -174 -126 -176 -130 -174 b -296 -12 -136 -173 -172 -137 l -308 0 l -337 -34 b -375 -77 -367 -73 -370 -76 b -382 -79 -377 -79 -379 -79 b -402 -58 -393 -79 -402 -69 b -401 -49 -402 -55 -402 -52 b -224 172 -398 -43 -228 167 b -219 173 -223 172 -220 173 "},v1f:{x_min:-340.28125,x_max:338.921875,ha:346,o:"m -32 520 b -29 521 -31 520 -31 521 b -23 519 -27 521 -24 520 b -20 513 -21 517 -20 516 b -21 506 -20 512 -20 509 b -31 474 -23 502 -27 488 l -53 402 l -66 352 l -68 349 l -57 349 b -32 351 -51 349 -40 351 b 123 370 19 352 74 359 b 137 371 127 370 133 371 b 170 356 152 371 164 366 b 171 355 170 355 170 355 b 216 366 174 355 183 358 b 280 378 268 377 266 377 b 287 378 283 378 284 378 b 332 349 307 378 322 369 b 338 319 336 341 338 330 b 332 301 338 310 336 302 b 242 280 329 299 246 280 b 242 280 242 280 242 280 b 235 288 236 280 235 283 b 235 292 235 290 235 291 b 236 302 236 297 236 299 b 220 337 236 316 230 330 l 216 340 l 210 335 b 159 276 189 322 172 301 b 118 149 152 265 156 274 b 81 34 84 36 85 36 b -8 13 78 33 -4 13 b -8 13 -8 13 -8 13 b -14 20 -12 15 -14 15 b -8 44 -14 24 -12 31 b -2 66 -5 55 -2 65 b -2 66 -2 66 -2 66 l -2 66 b -43 41 -2 66 -21 55 b -114 4 -98 8 -98 8 b -144 0 -123 0 -134 0 b -242 99 -197 0 -242 43 b -242 109 -242 102 -242 105 b -212 219 -240 122 -242 116 b -185 312 -197 270 -185 312 l -185 312 b -189 312 -185 312 -186 312 b -259 312 -200 312 -227 312 b -321 310 -291 312 -310 310 b -334 312 -330 310 -334 312 b -340 319 -338 313 -340 316 b -336 326 -340 322 -338 324 b -291 337 -334 326 -314 331 l -247 347 l -210 348 b -172 348 -190 348 -172 348 b -168 363 -172 348 -171 355 b -145 442 -151 424 -145 441 b -133 452 -144 444 -140 446 l -77 489 b -32 520 -53 506 -32 520 m 57 334 b 53 335 55 335 54 335 b 44 334 50 335 49 335 b -70 316 8 326 -28 320 b -78 309 -78 316 -78 316 b -108 202 -80 305 -88 274 b -141 81 -136 112 -141 93 b -140 74 -141 79 -141 77 b -117 49 -137 59 -127 49 b -107 52 -114 49 -110 51 b 16 127 -106 54 14 126 b 42 217 16 127 42 215 b 49 241 42 222 44 229 b 73 320 53 251 73 317 b 57 334 73 327 65 333 "},v20:{x_min:-571.671875,x_max:570.3125,ha:582,o:"m -559 351 b -551 352 -556 352 -553 352 b -530 338 -543 352 -533 348 b -529 169 -530 337 -529 291 l -529 1 l -507 27 l -441 112 b -382 174 -394 169 -390 174 b -378 174 -381 174 -379 174 b -281 86 -370 174 -375 179 b -196 0 -234 37 -196 0 b -126 84 -196 0 -164 37 b -50 174 -55 173 -57 172 b -44 174 -49 174 -47 174 b -35 173 -42 174 -38 173 b 53 86 -32 172 -12 151 b 138 0 100 37 138 0 b 208 84 140 0 170 37 b 284 174 279 173 279 172 b 289 174 285 174 288 174 b 300 173 294 174 298 173 b 462 11 303 172 340 134 l 475 -1 l 503 34 b 541 76 534 72 536 74 b 548 77 544 77 545 77 b 570 56 560 77 570 68 b 567 48 570 54 568 51 b 392 -172 564 41 397 -166 b 378 -176 387 -174 382 -176 b 368 -174 375 -176 371 -176 b 280 -87 367 -173 347 -152 b 194 0 234 -38 194 0 b 126 -86 194 0 163 -38 b 49 -174 54 -174 55 -173 b 44 -176 47 -176 46 -176 b 34 -174 40 -176 36 -174 b -54 -87 31 -173 10 -152 b -140 0 -102 -38 -140 0 b -209 -86 -140 0 -171 -38 b -285 -174 -280 -174 -279 -173 b -291 -176 -287 -176 -288 -176 b -300 -174 -294 -176 -298 -174 b -464 -11 -303 -173 -374 -102 l -476 0 l -506 -37 b -539 -76 -528 -65 -537 -74 b -551 -80 -543 -79 -547 -80 b -570 -68 -558 -80 -566 -76 l -571 -65 l -571 136 b -570 340 -571 331 -571 337 b -559 351 -568 344 -564 348 "},v22:{x_min:0,x_max:432.828125,ha:442,o:"m 209 186 b 213 187 210 187 212 187 b 216 187 215 187 216 187 b 224 174 216 186 220 180 b 420 -1 269 105 338 43 b 432 -12 431 -8 432 -9 b 421 -23 432 -15 432 -16 b 228 -180 345 -70 264 -137 b 219 -188 221 -188 221 -188 l 219 -188 b 208 -177 215 -188 215 -188 b 10 1 163 -106 93 -44 b 0 11 0 6 0 8 b 10 22 0 13 0 15 b 202 179 87 69 167 136 b 209 186 206 183 209 186 "},v23:{x_min:0,x_max:133.390625,ha:136,o:"m 54 66 b 65 68 58 68 61 68 b 122 37 88 68 110 56 b 133 -1 130 26 133 12 b 104 -58 133 -23 123 -44 b 66 -69 92 -65 78 -69 b 10 -38 44 -69 23 -58 b 0 -1 2 -27 0 -13 b 54 66 0 30 20 61 "},v25:{x_min:0,x_max:318.5,ha:325,o:"m 20 376 b 167 377 23 377 96 377 b 296 376 231 377 294 377 b 318 347 311 371 318 359 b 296 316 318 333 311 320 b 159 315 294 315 227 315 b 21 316 91 315 24 315 b 0 345 6 320 0 333 b 20 376 0 359 6 371 "},v26:{x_min:-21.78125,x_max:483.1875,ha:493,o:"m -8 631 b -1 632 -6 632 -4 632 b 19 620 8 632 16 628 b 20 383 20 616 20 616 l 20 148 l 21 151 b 140 199 59 183 102 199 b 206 179 164 199 187 192 l 210 176 l 210 396 l 210 617 l 212 621 b 231 632 216 628 223 632 b 250 620 239 632 247 628 b 251 383 251 616 251 616 l 251 148 l 254 151 b 370 199 291 183 332 199 b 415 191 385 199 400 197 b 483 84 458 176 483 134 b 461 0 483 58 476 29 b 332 -142 439 -40 411 -72 l 255 -215 b 231 -229 240 -229 239 -229 b 216 -223 224 -229 220 -227 b 210 -158 210 -217 210 -223 b 210 -120 210 -148 210 -136 l 210 -29 l 205 -34 b 100 -142 182 -65 159 -88 l 23 -215 b -1 -229 9 -229 6 -229 b -20 -216 -9 -229 -17 -224 l -21 -212 l -21 201 l -21 616 l -20 620 b -8 631 -17 624 -13 630 m 110 131 b 96 133 106 133 100 133 b 89 133 93 133 91 133 b 24 87 63 129 40 113 l 20 80 l 20 -37 l 20 -156 l 23 -152 b 144 81 96 -72 144 20 l 144 83 b 110 131 144 113 134 126 m 341 131 b 328 133 337 133 332 133 b 322 133 326 133 323 133 b 257 87 296 129 273 113 l 251 80 l 251 -37 l 251 -156 l 255 -152 b 375 81 328 -72 375 20 l 375 83 b 341 131 375 113 367 126 "},v27:{x_min:0,x_max:432.828125,ha:442,o:"m 208 184 b 213 187 209 186 212 187 b 224 176 217 187 221 183 b 245 147 225 172 235 159 b 419 -1 288 90 347 38 b 431 -8 424 -4 431 -8 b 432 -12 432 -9 432 -11 b 430 -18 432 -13 432 -16 b 364 -61 424 -20 383 -47 b 225 -183 307 -102 250 -152 b 223 -187 224 -184 223 -187 b 220 -188 221 -188 220 -188 b 208 -176 216 -188 210 -184 b 187 -148 205 -173 197 -159 b 12 0 144 -90 84 -38 b 0 11 4 5 0 8 b 16 24 0 13 4 18 b 183 158 83 69 141 115 b 208 184 194 169 198 173 m 183 105 b 176 113 181 109 176 113 b 172 109 176 113 175 112 b 92 45 149 90 117 62 l 88 41 l 102 31 b 247 -105 160 -6 210 -55 l 254 -115 l 257 -112 l 269 -102 b 340 -45 287 -87 319 -61 l 344 -43 l 330 -33 b 183 105 272 6 221 54 "},v28:{x_min:-73.5,x_max:72.140625,ha:74,o:"m -72 252 l -73 254 l 0 254 l 72 254 l 70 252 b 0 -1 70 248 0 -1 b -72 252 -1 -1 -72 248 "},v29:{x_min:-590.71875,x_max:589.359375,ha:601,o:"m 175 273 b 182 274 178 273 181 274 b 202 262 190 274 198 269 b 204 158 204 259 204 259 l 204 56 l 250 112 b 303 174 296 172 298 172 b 308 174 304 174 307 174 b 318 173 313 174 317 173 b 481 11 322 172 357 134 l 494 -1 l 522 34 b 560 76 553 72 555 74 b 567 77 563 77 564 77 b 589 56 579 77 589 68 b 586 48 589 54 588 51 b 411 -172 583 41 416 -166 b 397 -176 406 -174 401 -176 b 387 -174 393 -176 390 -176 b 299 -87 386 -173 366 -152 b 213 0 253 -38 213 0 b 208 -6 213 0 210 -2 l 204 -12 l 204 -147 b 204 -210 204 -173 204 -194 b 198 -292 204 -297 204 -287 b 183 -299 194 -297 189 -299 b 164 -287 175 -299 167 -295 b 163 -174 163 -284 163 -284 l 161 -63 l 119 -117 b 65 -176 76 -170 73 -176 b 61 -176 63 -176 62 -176 b -35 -87 51 -174 57 -180 b -121 0 -83 -38 -121 0 b -190 -86 -122 0 -152 -38 b -266 -174 -261 -174 -259 -173 b -272 -176 -268 -176 -270 -176 b -281 -174 -276 -176 -280 -174 b -371 -86 -284 -173 -304 -152 b -457 0 -417 -38 -457 0 l -457 0 b -477 -26 -457 0 -470 -16 b -548 -227 -524 -88 -548 -161 b -536 -303 -548 -254 -544 -280 b -533 -317 -534 -309 -533 -313 b -553 -338 -533 -330 -541 -338 b -577 -315 -566 -338 -571 -333 b -590 -227 -586 -287 -590 -258 b -518 -9 -590 -154 -564 -77 b -465 56 -509 2 -504 8 l -402 134 b -363 174 -374 170 -371 174 b -359 174 -362 174 -360 174 b -262 86 -351 174 -356 179 b -176 0 -216 37 -176 0 b -107 84 -176 0 -145 37 b -31 174 -36 173 -38 172 b -25 174 -29 174 -28 174 b -16 173 -23 174 -19 173 b 147 11 -13 172 35 123 l 157 -1 l 160 1 l 163 4 l 163 130 b 164 260 163 256 163 258 b 175 273 166 266 170 270 "},v2a:{x_min:-21.78125,x_max:366.140625,ha:374,o:"m 276 1378 b 284 1379 279 1379 281 1379 b 306 1360 292 1379 298 1374 b 352 1247 326 1326 343 1286 b 366 1139 362 1213 366 1175 b 347 1009 366 1093 359 1049 l 344 1002 l 347 992 b 352 971 348 986 351 977 b 366 863 362 936 366 899 b 347 732 366 818 359 773 l 344 725 l 347 716 b 352 695 348 710 351 700 b 366 588 362 659 366 623 b 223 262 366 464 314 345 b 189 233 212 252 212 252 b 35 76 126 183 73 129 b -1 16 20 56 2 27 b -19 4 -4 9 -12 4 l -21 4 l -21 137 l -21 270 l -17 270 b 186 344 59 281 134 308 b 319 606 270 399 319 499 b 317 650 319 620 319 635 l 315 659 l 314 655 b 223 537 288 607 258 570 b 189 509 212 528 212 528 b 35 352 126 459 73 405 b -1 292 20 333 2 303 b -19 280 -4 285 -12 280 l -21 280 l -21 413 l -21 546 l -17 546 b 186 620 59 557 134 584 b 319 882 270 675 319 775 b 317 925 319 896 319 911 l 315 935 l 314 931 b 223 813 288 884 258 846 b 189 785 212 805 212 805 b 35 628 126 735 73 681 b -1 569 20 609 2 580 b -19 556 -4 562 -12 556 l -21 556 l -21 689 l -21 823 l -17 823 b 202 907 68 835 152 867 b 319 1157 280 968 319 1061 b 270 1338 319 1218 303 1281 b 262 1358 264 1349 262 1353 b 262 1364 262 1360 262 1363 b 276 1378 265 1371 269 1376 "},v2c:{x_min:-597.53125,x_max:596.171875,ha:608,o:"m -413 173 b -408 174 -412 174 -409 174 b -397 173 -404 174 -400 173 b -308 86 -394 172 -374 151 b -223 0 -261 37 -223 0 b -153 84 -223 0 -191 37 b -77 174 -83 173 -84 172 b -72 174 -76 174 -74 174 b -62 173 -68 174 -63 173 b 25 86 -59 172 -39 151 b 112 0 73 37 111 0 b 181 84 112 0 144 37 b 257 174 251 173 251 172 b 262 174 258 174 261 174 b 273 173 266 174 270 173 b 436 9 276 172 347 101 l 447 -1 l 477 36 b 522 79 511 79 513 79 l 522 79 b 552 51 533 79 539 73 b 596 -112 582 6 596 -51 b 567 -262 596 -161 586 -213 b 539 -322 558 -287 544 -316 b 524 -327 534 -326 529 -327 b 504 -315 515 -327 507 -323 b 503 -308 503 -312 503 -309 b 511 -285 503 -302 504 -297 b 555 -113 540 -227 555 -169 b 544 -34 555 -86 551 -59 b 522 19 540 -16 530 8 l 521 22 l 481 -26 l 405 -122 b 353 -176 366 -172 362 -176 b 349 -176 352 -176 351 -176 b 253 -87 341 -176 347 -180 b 167 0 206 -38 167 0 b 99 -86 167 0 136 -38 b 21 -174 27 -174 28 -173 b 17 -176 20 -176 19 -176 b 6 -174 13 -176 9 -174 b -81 -87 4 -173 -14 -152 b -167 0 -129 -38 -167 0 b -236 -86 -167 0 -198 -38 b -313 -174 -307 -174 -306 -173 b -318 -176 -314 -176 -315 -176 b -328 -174 -321 -176 -325 -174 b -491 -12 -330 -173 -367 -137 l -503 0 l -530 -34 b -570 -77 -562 -73 -564 -76 b -577 -79 -571 -79 -574 -79 b -597 -58 -588 -79 -597 -69 b -596 -49 -597 -55 -597 -52 b -417 172 -593 -43 -423 167 b -413 173 -417 172 -415 173 "},v2d:{x_min:0,x_max:438.28125,ha:447,o:"m 212 190 b 219 191 213 191 216 191 b 236 176 225 191 228 190 b 419 18 277 105 341 49 b 436 5 431 13 434 11 b 438 -1 438 4 438 1 b 424 -16 438 -8 432 -13 b 356 -49 409 -20 379 -36 b 234 -180 306 -83 258 -133 b 219 -192 230 -188 224 -192 b 200 -176 213 -192 206 -187 b 9 -15 157 -102 89 -45 b 0 0 2 -12 0 -6 b 16 18 0 9 2 12 b 200 176 93 48 159 104 b 212 190 205 186 208 188 m 239 113 b 236 117 238 116 238 117 b 230 108 235 117 234 115 b 92 -15 196 58 140 8 b 88 -18 91 -16 88 -18 b 92 -20 88 -18 91 -19 b 198 -116 130 -43 166 -74 b 200 -117 200 -117 200 -117 b 201 -117 200 -117 201 -117 b 264 -43 212 -98 242 -62 b 345 15 288 -19 321 4 b 348 18 347 16 348 16 b 344 20 348 18 347 19 b 239 113 307 41 266 79 "},v2f:{x_min:-1.359375,x_max:680.5625,ha:694,o:"m 597 1042 b 604 1042 600 1042 602 1042 b 642 1002 627 1042 642 1022 b 619 966 642 988 635 974 b 439 927 574 942 503 927 l 426 927 l 426 921 b 430 838 428 893 430 866 b 345 480 430 696 398 560 b 179 391 307 423 249 391 b 156 392 171 391 164 392 b 138 394 149 394 142 394 b 103 434 115 396 103 416 b 129 471 103 451 111 466 b 141 474 133 473 137 474 b 172 459 153 474 164 469 b 181 455 175 456 176 455 b 187 456 182 455 185 455 b 253 520 212 460 234 483 b 315 836 294 605 315 714 b 311 928 315 867 314 898 b 302 945 310 943 311 942 b 245 953 283 950 262 953 b 130 891 193 953 149 931 b 84 860 119 870 102 860 b 36 905 61 860 39 877 b 36 910 36 907 36 909 b 80 970 36 931 50 949 b 249 1017 125 1000 187 1017 b 322 1009 273 1017 299 1014 l 341 1003 b 436 991 372 995 406 991 b 577 1031 495 991 545 1004 b 597 1042 583 1038 590 1041 m 416 360 b 424 360 419 360 421 360 b 481 309 454 360 479 338 b 503 145 484 280 495 199 b 585 -185 525 16 555 -106 b 630 -245 596 -213 613 -237 l 634 -247 l 638 -245 b 647 -244 641 -245 645 -244 b 680 -278 666 -244 680 -262 b 664 -308 680 -290 675 -301 b 638 -312 658 -310 650 -312 b 613 -309 631 -312 623 -310 b 477 -201 555 -303 502 -260 b 417 -2 460 -159 434 -72 b 416 5 417 1 416 5 b 416 5 416 5 416 5 b 411 -5 415 5 413 0 b 359 -97 397 -33 377 -70 b 353 -106 355 -102 353 -105 b 359 -112 353 -108 355 -109 b 409 -130 375 -123 390 -129 b 426 -134 420 -130 421 -131 b 431 -147 428 -137 431 -141 b 420 -162 431 -152 427 -159 b 382 -169 409 -166 396 -169 b 323 -155 363 -169 341 -165 l 317 -152 l 314 -155 b 62 -303 240 -240 148 -295 b 36 -305 55 -305 44 -305 b 23 -303 29 -305 24 -305 b -1 -273 6 -299 -1 -287 b 31 -240 -1 -256 10 -240 b 36 -240 32 -240 34 -240 b 42 -241 38 -241 39 -241 b 134 -204 63 -241 99 -226 b 367 288 265 -115 357 81 b 375 330 368 313 370 320 b 416 360 383 347 400 358 m 360 -359 b 379 -359 363 -359 371 -359 b 424 -360 396 -359 416 -359 b 646 -502 536 -373 624 -430 b 649 -527 649 -510 649 -519 b 530 -673 649 -578 604 -635 l 521 -677 l 529 -681 b 653 -811 592 -714 637 -762 b 660 -853 658 -827 660 -839 b 645 -911 660 -873 656 -892 b 426 -1021 608 -981 519 -1021 b 283 -989 377 -1021 328 -1011 b 235 -949 249 -972 239 -964 b 234 -936 234 -946 234 -941 b 234 -928 234 -934 234 -931 l 235 -925 l 234 -927 l 225 -934 b 87 -982 186 -966 138 -982 b 80 -982 85 -982 83 -982 b 55 -981 70 -981 58 -981 b 17 -943 32 -981 17 -964 b 54 -904 17 -921 35 -904 b 78 -914 62 -904 72 -909 l 83 -918 l 88 -918 b 190 -831 122 -918 166 -881 b 269 -506 242 -727 269 -612 b 268 -462 269 -492 269 -477 b 266 -449 266 -458 266 -452 b 265 -444 266 -445 266 -444 b 257 -446 264 -444 261 -445 b 132 -545 196 -470 152 -505 b 88 -573 122 -563 104 -573 b 39 -523 63 -573 39 -553 b 63 -476 39 -505 44 -494 b 360 -359 136 -408 235 -369 m 419 -424 b 393 -423 411 -423 406 -423 l 375 -423 l 377 -426 b 379 -439 377 -427 378 -434 b 383 -510 382 -463 383 -487 b 314 -811 383 -609 360 -710 b 266 -893 296 -850 285 -870 b 264 -898 265 -896 264 -898 l 264 -898 b 264 -898 264 -898 264 -898 b 268 -898 264 -898 266 -898 b 273 -898 270 -898 272 -898 b 300 -909 283 -898 291 -900 b 426 -957 340 -941 385 -957 b 476 -949 443 -957 460 -954 b 547 -853 522 -931 547 -893 b 485 -745 547 -816 526 -775 b 397 -707 460 -727 432 -714 b 366 -675 375 -703 366 -692 b 396 -642 366 -657 377 -645 b 530 -557 455 -637 511 -601 b 536 -527 534 -548 536 -537 b 419 -424 536 -480 490 -437 "},v30:{x_min:-21.78125,x_max:367.5,ha:375,o:"m 276 1900 b 284 1901 279 1900 281 1901 b 306 1883 291 1901 298 1896 b 367 1686 347 1825 367 1757 b 343 1558 367 1643 359 1600 l 338 1549 l 343 1537 b 367 1411 359 1497 367 1454 b 343 1282 367 1367 359 1324 l 338 1272 l 343 1261 b 367 1135 359 1221 367 1178 b 343 1007 367 1090 359 1047 l 338 996 l 343 985 b 367 859 359 945 367 902 b 343 731 367 814 359 771 l 338 720 l 343 709 b 367 582 359 667 367 626 b 289 362 367 503 340 426 b 239 312 276 345 259 330 b 29 77 152 237 76 152 b -1 18 14 54 2 30 b -19 4 -4 11 -12 4 l -21 4 l -21 133 l -20 260 l -13 262 b 98 299 17 269 62 284 b 111 305 103 302 110 305 b 167 334 123 310 156 327 b 319 595 264 391 319 491 b 313 659 319 616 318 638 b 310 667 311 664 311 667 b 307 663 310 667 308 666 b 240 588 289 637 269 614 b 16 331 141 505 62 413 b -1 294 8 316 1 302 b -19 280 -4 287 -12 280 l -21 280 l -21 408 l -20 537 l -13 538 b 98 576 17 545 62 560 b 111 581 103 578 110 581 b 167 610 123 587 156 603 b 319 871 264 667 319 767 b 313 935 319 892 318 913 b 310 942 311 941 311 942 b 307 939 310 942 308 941 b 240 864 289 913 269 889 b 16 607 141 781 62 689 b -1 570 8 592 1 578 b -19 556 -4 563 -12 556 l -21 556 l -21 684 l -20 813 l -13 814 b 98 852 17 821 62 836 b 111 857 103 855 110 857 b 167 886 123 863 156 880 b 319 1147 264 943 319 1043 b 313 1211 319 1168 318 1189 b 310 1218 311 1217 311 1218 b 307 1215 310 1218 308 1217 b 240 1140 289 1188 269 1165 b 16 884 141 1057 62 966 b -1 846 8 868 1 855 b -19 832 -4 839 -12 832 l -21 832 l -21 960 l -20 1089 l -13 1090 b 98 1128 17 1097 62 1111 b 111 1134 103 1131 110 1134 b 167 1163 123 1139 156 1156 b 319 1424 264 1220 319 1320 b 313 1486 319 1444 318 1465 b 310 1494 311 1493 311 1494 b 307 1492 310 1494 308 1493 b 240 1417 289 1464 269 1442 b 16 1160 141 1333 62 1242 b -1 1121 8 1145 1 1131 b -19 1109 -4 1115 -12 1109 l -21 1109 l -21 1236 l -20 1365 l -13 1367 b 98 1404 17 1374 62 1388 b 111 1410 103 1407 110 1410 b 250 1508 172 1437 215 1467 b 319 1701 296 1564 319 1633 b 270 1859 319 1757 303 1814 b 262 1882 265 1868 262 1875 b 276 1900 262 1890 266 1896 "},v31:{x_min:0,x_max:386.5625,ha:394,o:"m 0 173 l 0 347 l 193 347 l 386 347 l 386 173 l 386 0 l 193 0 l 0 0 l 0 173 "},v33:{x_min:-423.3125,x_max:421.9375,ha:431,o:"m -10 276 b -2 277 -8 277 -5 277 b 17 265 5 277 13 273 b 19 163 19 260 19 260 l 19 68 l 39 45 b 277 -95 122 -34 200 -81 b 289 -97 281 -97 285 -97 b 378 0 332 -97 371 -54 b 378 11 378 4 378 6 b 302 83 378 55 345 83 b 242 66 283 83 262 77 b 208 56 231 59 219 56 b 148 120 175 56 148 81 b 200 186 148 151 164 172 b 261 198 220 194 240 198 b 420 45 341 198 411 137 b 421 22 421 37 421 29 b 257 -198 421 -86 347 -188 b 242 -198 251 -198 247 -198 b 20 -105 181 -198 95 -163 l 19 -104 l 19 -183 b 19 -216 19 -195 19 -206 b 12 -273 19 -272 17 -267 b -2 -278 8 -277 2 -278 b -21 -266 -10 -278 -19 -274 b -23 -165 -23 -263 -23 -262 l -23 -69 l -44 -47 b -250 86 -117 23 -183 66 b -295 94 -270 93 -284 94 b -315 91 -302 94 -308 94 b -381 5 -356 81 -381 43 b -355 -56 -381 -16 -372 -40 b -299 -81 -338 -73 -319 -81 b -246 -68 -283 -81 -265 -77 b -212 -58 -234 -61 -223 -58 b -168 -77 -196 -58 -179 -65 b -151 -122 -156 -90 -151 -105 b -179 -174 -151 -141 -160 -162 b -239 -195 -194 -184 -217 -192 b -257 -197 -245 -195 -250 -197 b -423 -5 -349 -197 -423 -113 b -423 0 -423 -4 -423 -1 b -277 194 -420 97 -362 173 b -247 197 -268 197 -258 197 b -24 104 -185 197 -100 162 l -23 102 l -23 181 b -21 265 -23 260 -23 260 b -10 276 -20 269 -14 274 "},v34:{x_min:0,x_max:622.03125,ha:635,o:"m 398 417 b 406 419 401 419 404 419 b 427 398 417 419 427 409 b 427 391 427 395 427 392 b 34 -274 424 385 38 -272 b 20 -280 29 -278 25 -280 b 0 -259 9 -280 0 -270 b 0 -252 0 -256 0 -254 b 393 413 2 -247 389 410 b 398 417 394 415 397 416 m 592 417 b 600 419 594 419 597 419 b 622 398 611 419 622 409 b 620 391 622 395 620 392 b 227 -274 617 385 231 -272 b 213 -280 223 -278 219 -280 b 193 -259 202 -280 193 -270 b 194 -252 193 -256 193 -254 b 586 413 196 -247 582 410 b 592 417 588 415 590 416 "},v36:{x_min:-1.359375,x_max:1064.390625,ha:1086,o:"m 296 692 b 314 694 302 694 307 694 b 386 685 337 694 366 689 b 548 498 480 660 548 580 b 548 481 548 492 548 487 b 455 395 541 426 499 395 b 370 462 420 395 383 417 b 362 496 364 477 362 488 b 377 514 362 509 367 514 b 393 501 386 514 390 510 b 432 474 397 484 413 474 b 470 487 445 474 458 478 b 491 530 484 496 491 510 b 490 544 491 534 491 539 b 333 660 479 606 411 657 l 323 662 l 315 646 b 269 524 285 591 269 556 b 321 431 269 492 287 466 b 349 395 338 413 343 408 b 363 342 359 378 363 362 b 359 312 363 333 362 322 b 285 158 348 266 318 206 b 281 152 283 155 281 152 b 281 152 281 152 281 152 b 287 154 283 152 284 152 b 318 155 298 154 308 155 b 461 98 371 155 419 136 l 464 97 l 483 112 b 503 129 494 120 503 127 b 504 130 503 129 504 129 b 503 138 504 131 503 134 b 500 180 500 152 500 166 b 553 326 500 238 518 288 b 604 366 560 331 592 358 b 649 381 617 376 632 381 b 696 362 665 381 681 374 b 724 302 714 347 724 324 b 695 238 724 278 714 255 b 660 210 691 234 662 212 b 579 148 658 209 582 151 b 579 148 579 148 579 148 b 596 106 579 144 589 119 b 622 77 604 88 609 83 b 657 69 632 72 645 69 b 748 112 688 69 721 84 b 755 123 754 117 755 120 b 755 127 755 124 755 126 b 751 165 752 137 751 151 b 758 219 751 183 754 202 b 894 387 774 290 820 347 b 896 390 896 388 896 388 b 891 398 896 391 895 392 b 622 560 827 477 730 535 b 600 580 605 564 600 569 b 617 596 600 591 607 596 b 628 595 622 596 624 596 b 1057 248 846 552 1020 412 b 1064 191 1061 229 1064 209 b 922 0 1064 94 1005 9 b 902 -1 916 -1 909 -1 b 774 76 847 -1 800 26 b 769 83 770 81 770 83 b 769 81 769 83 769 83 b 627 -1 733 29 677 -1 b 548 27 597 -1 570 8 b 515 88 537 37 525 61 l 513 95 l 510 93 l 453 45 b 390 0 396 0 396 0 b 390 0 390 0 390 0 b 374 15 381 0 377 4 b 268 105 359 69 314 105 b 250 104 262 105 257 105 l 243 102 l 234 90 b 155 1 201 49 159 2 b 147 -1 152 0 149 -1 b 130 15 138 -1 130 6 b 132 20 130 18 132 19 b 136 31 133 22 134 27 b 220 131 149 74 178 109 b 231 137 225 134 230 136 b 302 278 280 202 302 244 b 265 335 302 299 295 309 b 209 442 234 363 213 402 b 209 455 209 446 209 451 b 279 648 209 502 232 564 l 285 659 l 283 659 b 176 627 238 653 210 645 b 57 477 111 594 66 538 b 55 459 55 471 55 464 b 72 409 55 437 61 415 b 93 403 78 405 87 403 b 152 467 123 403 151 431 b 168 488 153 483 157 488 b 185 462 181 488 185 483 l 185 460 b 137 344 183 409 168 369 b 78 322 119 328 98 322 b 13 360 50 322 25 335 b -1 426 4 380 -1 402 b 89 610 -1 488 32 559 b 296 692 147 659 210 685 m 926 348 b 921 353 924 351 922 353 b 914 348 920 353 918 351 b 823 167 857 306 823 237 b 828 124 823 154 826 138 b 890 31 837 79 862 40 b 896 31 892 31 894 31 b 956 104 916 31 940 59 b 970 191 965 129 970 159 b 966 241 970 208 969 224 b 926 348 959 277 945 313 m 627 326 b 619 326 624 326 622 326 b 598 316 611 326 604 323 b 568 215 579 288 568 255 b 568 208 568 213 568 210 b 571 183 570 195 570 184 l 571 183 b 594 201 571 183 582 191 l 634 231 b 660 259 653 247 656 248 b 664 278 662 266 664 272 b 627 326 664 299 649 320 "},v38:{x_min:-1.359375,x_max:651.96875,ha:665,o:"m 389 644 b 405 645 394 645 400 645 b 504 566 450 645 492 613 b 507 541 506 557 507 549 b 480 471 507 514 498 489 l 477 467 l 483 470 b 609 591 539 485 586 531 b 613 601 611 595 613 599 b 631 609 619 607 624 609 b 651 588 641 609 651 602 b 200 -946 651 584 204 -941 b 182 -957 197 -953 190 -957 b 163 -945 174 -957 166 -953 b 161 -939 161 -942 161 -942 b 217 -743 161 -931 170 -904 b 272 -555 247 -639 272 -555 b 272 -555 272 -555 272 -555 b 264 -560 272 -555 268 -557 b 140 -603 227 -589 182 -603 b 36 -567 102 -603 65 -592 b -1 -487 12 -548 -1 -517 b 17 -427 -1 -466 5 -445 b 103 -380 38 -395 70 -380 b 191 -433 137 -380 172 -398 b 205 -484 201 -448 205 -466 b 178 -553 205 -509 196 -535 l 175 -557 l 182 -555 b 307 -435 236 -539 284 -494 b 372 -213 308 -430 372 -215 b 372 -213 372 -213 372 -213 b 364 -219 372 -213 368 -216 b 240 -262 328 -247 283 -262 b 137 -226 202 -262 166 -249 b 99 -145 112 -206 99 -176 b 118 -84 99 -124 106 -104 b 204 -38 138 -54 171 -38 b 292 -91 238 -38 273 -56 b 306 -141 302 -106 306 -124 b 279 -212 306 -167 296 -194 l 276 -215 l 281 -213 b 408 -93 336 -198 385 -151 b 473 129 409 -88 473 127 b 473 129 473 129 473 129 b 465 122 473 129 469 126 b 341 80 428 94 383 80 b 236 115 303 80 266 91 b 200 195 213 136 200 165 b 217 256 200 217 206 238 b 304 303 239 287 272 303 b 393 249 338 303 374 285 b 406 199 402 234 406 217 b 379 129 406 173 397 148 l 377 126 l 382 127 b 509 248 436 142 485 190 b 574 470 510 254 574 469 b 574 470 574 470 574 470 b 566 464 574 470 570 467 b 442 421 529 435 484 421 b 337 458 404 421 367 433 b 300 537 313 478 300 508 b 389 644 300 585 334 635 "},v39:{x_min:-171.5,x_max:251.8125,ha:257,o:"m -8 631 b -1 632 -6 632 -4 632 b 19 620 8 632 16 628 b 20 553 20 616 20 614 b 20 491 20 503 20 491 l 20 491 b 153 535 47 501 149 535 b 174 514 167 535 174 524 b 164 496 174 508 171 501 b 92 470 164 495 132 484 l 20 445 l 20 390 b 20 363 20 378 20 370 b 20 333 20 340 20 333 l 20 333 b 153 377 47 344 149 377 b 174 356 167 377 174 367 b 164 338 174 349 171 342 b 92 312 164 338 132 326 l 20 288 l 20 219 l 20 148 l 21 151 b 137 199 59 183 99 199 b 182 191 152 199 167 197 b 251 84 227 176 251 134 b 228 0 251 58 243 29 b 100 -142 206 -40 178 -72 l 23 -215 b -1 -229 9 -229 6 -229 b -20 -216 -9 -229 -17 -224 b -21 30 -21 -212 -21 -212 b -21 273 -21 163 -21 273 b -84 252 -21 273 -50 263 b -152 230 -133 234 -145 230 b -157 231 -155 230 -156 231 b -171 252 -166 234 -171 244 b -160 270 -171 259 -167 266 b -27 316 -159 270 -93 294 l -21 319 l -21 374 b -21 431 -21 406 -21 431 b -84 409 -21 431 -50 421 b -152 388 -133 392 -145 388 b -157 390 -155 388 -156 388 b -171 409 -166 392 -171 401 b -160 428 -171 417 -167 424 b -27 474 -159 428 -93 451 l -21 476 l -21 546 b -20 620 -21 614 -21 616 b -8 631 -17 624 -13 630 m 110 131 b 96 133 106 133 100 133 b 89 133 93 133 91 133 b 24 87 63 129 40 113 l 20 80 l 20 -37 l 20 -156 l 23 -152 b 144 81 96 -72 144 20 l 144 83 b 110 131 144 113 134 126 "},v3b:{x_min:0,x_max:484.5625,ha:494,o:"m 228 245 b 239 247 234 247 239 247 b 243 247 240 247 242 247 b 303 238 257 247 287 242 b 484 -2 417 208 484 104 b 412 -177 484 -65 461 -127 b 243 -248 363 -226 303 -248 b 6 -63 138 -248 36 -180 b 0 -1 1 -41 0 -20 b 228 245 0 127 98 240 m 255 181 b 240 183 247 183 245 183 b 232 181 238 183 235 183 b 142 152 200 180 168 170 l 138 149 l 190 97 l 242 44 l 294 97 l 345 149 l 340 152 b 255 181 315 169 284 180 m 147 -54 l 197 -1 l 147 51 l 95 104 l 91 99 b 62 -1 72 70 62 34 b 66 -43 62 -15 63 -29 b 91 -101 72 -63 80 -84 l 95 -106 l 147 -54 m 393 99 b 389 104 390 102 389 104 b 337 51 389 104 366 80 l 285 -1 l 337 -54 l 389 -106 l 393 -101 b 421 -1 412 -72 421 -36 b 393 99 421 34 412 69 m 294 -98 b 242 -45 265 -69 242 -45 b 190 -98 242 -45 219 -69 l 138 -151 l 142 -154 b 242 -184 172 -174 206 -184 b 340 -154 276 -184 311 -174 l 345 -151 l 294 -98 "},v3c:{x_min:0,x_max:450.53125,ha:460,o:"m 189 302 b 204 303 193 302 198 303 b 303 224 250 303 292 270 b 306 199 304 216 306 208 b 279 129 306 173 296 147 l 276 126 l 281 127 b 408 249 337 142 385 190 b 412 259 409 254 412 258 b 430 267 417 265 423 267 b 450 247 441 267 450 259 b 200 -605 450 242 204 -599 b 182 -616 197 -612 190 -616 b 163 -602 174 -616 166 -610 b 161 -598 161 -601 161 -601 b 217 -402 161 -589 170 -562 b 272 -213 247 -298 272 -213 b 272 -213 272 -213 272 -213 b 264 -219 272 -213 268 -216 b 140 -262 227 -247 182 -262 b 36 -226 102 -262 65 -249 b 0 -145 12 -206 0 -176 b 17 -84 0 -124 5 -104 b 103 -38 38 -54 70 -38 b 191 -91 137 -38 172 -56 b 205 -141 201 -106 205 -124 b 178 -212 205 -167 196 -194 l 175 -215 l 182 -213 b 307 -93 236 -198 284 -151 b 372 129 308 -88 372 127 b 372 129 372 129 372 129 b 364 122 372 129 368 126 b 240 80 328 94 283 80 b 137 115 202 80 166 91 b 99 194 111 136 99 165 b 189 302 99 244 133 292 "},v3e:{x_min:0,x_max:406.96875,ha:415,o:"m 21 183 b 28 183 24 183 25 183 b 42 181 34 183 39 183 b 127 108 47 179 47 179 b 202 41 168 72 202 41 b 279 108 204 41 238 72 b 357 177 321 145 356 176 b 375 183 363 181 370 183 b 406 151 392 183 406 169 b 404 137 406 147 405 141 b 322 62 401 131 398 129 b 251 0 284 27 251 0 b 322 -63 251 -1 284 -29 b 404 -138 398 -130 401 -133 b 406 -152 405 -142 406 -148 b 375 -184 406 -170 392 -184 b 357 -179 370 -184 363 -183 b 279 -109 356 -177 321 -147 b 202 -43 238 -73 204 -43 b 127 -109 202 -43 168 -73 b 49 -179 85 -147 50 -177 b 31 -184 43 -183 36 -184 b 0 -152 13 -184 0 -170 b 2 -138 0 -148 0 -142 b 83 -63 5 -133 8 -130 b 155 0 122 -29 155 -1 b 83 62 155 0 122 27 b 8 129 43 97 10 127 b 0 151 2 136 0 144 b 21 183 0 165 8 177 "},v3f:{x_min:-24.5,x_max:317.140625,ha:324,o:"m -24 -147 l -24 -5 l -20 -5 b -1 -19 -12 -5 -4 -11 b 58 -123 6 -43 31 -86 b 196 -278 93 -173 134 -219 b 317 -570 274 -356 317 -460 b 294 -713 317 -617 308 -666 l 289 -724 l 294 -735 b 317 -873 308 -780 317 -827 b 235 -1132 317 -963 288 -1054 b 209 -1165 228 -1140 224 -1146 b 189 -1177 204 -1172 196 -1177 b 171 -1164 182 -1177 175 -1172 b 168 -1154 170 -1161 168 -1159 b 181 -1132 168 -1149 172 -1142 b 269 -891 238 -1064 269 -975 b 269 -881 269 -886 269 -884 b 262 -814 269 -857 265 -827 b 258 -800 261 -811 259 -806 b 142 -628 240 -731 198 -667 b -8 -589 112 -606 47 -589 b -20 -589 -13 -589 -19 -589 l -24 -589 l -24 -449 l -24 -308 l -20 -308 b -1 -322 -12 -308 -4 -313 b 58 -424 6 -345 31 -388 b 194 -580 93 -476 136 -523 b 259 -660 221 -606 245 -635 b 261 -663 259 -662 261 -663 b 264 -656 262 -663 262 -660 b 269 -587 268 -632 269 -610 b 264 -521 269 -566 268 -544 b 262 -512 264 -517 262 -513 b 258 -498 261 -509 259 -503 b 142 -326 240 -428 198 -365 b -8 -287 112 -303 47 -288 b -20 -287 -13 -287 -19 -287 l -24 -287 l -24 -147 "},v40:{x_min:-1.359375,x_max:436.921875,ha:446,o:"m 213 205 b 217 205 215 205 216 205 b 234 194 224 205 234 199 b 236 187 234 194 235 190 l 245 167 l 261 129 l 270 106 b 355 -61 294 54 329 -13 b 420 -163 381 -105 402 -138 b 436 -188 435 -184 436 -184 b 436 -191 436 -190 436 -190 b 421 -206 436 -201 431 -206 l 421 -206 l 416 -206 l 405 -201 b 217 -158 347 -172 283 -158 b 31 -201 153 -158 88 -172 l 20 -206 l 14 -206 l 14 -206 b 0 -191 5 -206 0 -201 b -1 -188 0 -190 -1 -190 b 14 -163 -1 -186 0 -184 b 95 -34 36 -136 72 -77 b 166 106 119 8 148 68 l 175 129 l 183 148 l 200 188 b 213 205 205 199 208 202 "},v41:{x_min:-1.359375,x_max:556.6875,ha:568,o:"m 294 322 b 318 323 299 322 308 323 b 360 320 334 323 352 322 b 526 217 430 310 490 273 b 543 166 537 202 543 184 b 447 70 543 117 503 70 b 445 70 447 70 446 70 b 359 159 394 72 359 113 b 368 201 359 173 362 187 b 442 245 382 229 412 245 b 455 244 446 245 451 245 b 460 244 458 244 460 244 b 460 244 460 244 460 244 b 454 248 460 244 458 245 b 325 291 417 276 372 291 b 285 287 313 291 299 290 b 144 -2 183 269 144 190 b 281 -290 144 -208 179 -280 b 304 -291 289 -291 298 -291 b 524 -105 412 -291 506 -212 b 541 -84 526 -88 530 -84 b 556 -101 551 -84 556 -90 b 549 -138 556 -111 553 -122 b 334 -322 521 -237 435 -310 b 302 -324 323 -323 313 -324 b 13 -101 172 -324 54 -234 b -1 -1 4 -68 -1 -34 b 294 322 -1 161 121 303 "},v42:{x_min:-348.4375,x_max:24.5,ha:25,o:"m -330 155 b -322 156 -329 156 -326 156 b -315 156 -319 156 -317 156 b -298 147 -311 155 -308 154 b -19 30 -224 98 -122 55 l 2 26 b 24 -1 17 22 24 13 b 2 -27 24 -15 17 -23 l -19 -31 b -298 -148 -122 -56 -224 -99 b -322 -158 -313 -158 -315 -158 b -348 -131 -338 -158 -348 -145 b -344 -117 -348 -127 -347 -122 b -328 -104 -341 -112 -338 -111 b -127 -8 -269 -65 -202 -33 b -106 0 -115 -4 -106 -1 b -127 6 -106 0 -115 2 b -328 102 -202 31 -269 63 b -344 116 -338 109 -341 111 b -348 130 -347 120 -348 124 b -330 155 -348 141 -341 152 "},v43:{x_min:-442.359375,x_max:441,ha:450,o:"m -31 487 b -1 488 -21 488 -10 488 b 434 104 216 488 397 330 b 441 27 438 79 441 47 b 439 12 441 20 439 15 b 419 0 435 4 427 0 b 404 5 413 0 408 1 b 398 30 400 11 398 13 b 0 351 390 213 213 351 b -59 348 -20 351 -39 349 b -400 30 -251 324 -393 191 b -405 5 -400 13 -401 11 b -420 0 -409 1 -415 0 b -441 12 -428 0 -436 4 b -442 27 -441 15 -442 20 b -435 104 -442 47 -439 79 b -31 487 -401 316 -235 474 m -13 131 b -1 133 -9 133 -5 133 b 51 105 19 133 39 123 b 61 70 58 95 61 83 b 51 34 61 58 58 45 b -1 6 39 16 19 6 b -46 27 -17 6 -34 13 b -62 69 -57 38 -62 54 b -13 131 -62 98 -44 124 "},v44:{x_min:-21.78125,x_max:251.8125,ha:257,o:"m -8 631 b -1 632 -6 632 -4 632 b 19 620 8 632 16 628 b 20 383 20 616 20 616 l 20 148 l 21 151 b 137 199 59 183 99 199 b 182 191 152 199 167 197 b 251 84 227 176 251 134 b 228 0 251 58 243 29 b 100 -142 206 -40 178 -72 l 23 -215 b 0 -229 9 -229 6 -229 b -20 -216 -9 -229 -17 -224 l -21 -212 l -21 201 l -21 616 l -20 620 b -8 631 -17 624 -13 630 m 110 131 b 96 133 106 133 100 133 b 89 133 93 133 91 133 b 24 87 63 129 40 113 l 20 80 l 20 -37 l 20 -156 l 23 -152 b 144 81 96 -72 144 20 l 144 83 b 110 131 144 113 134 126 "},v45:{x_min:-402.890625,x_max:401.53125,ha:410,o:"m -10 273 b -4 274 -9 273 -6 274 b 16 262 4 274 12 269 b 17 158 17 259 17 259 l 17 56 l 62 112 b 117 174 110 172 110 172 b 122 174 118 174 119 174 b 132 173 125 174 129 173 b 295 11 134 172 171 134 l 307 -1 l 336 34 b 374 76 366 72 368 74 b 381 77 375 77 378 77 b 401 56 392 77 401 68 b 400 48 401 54 401 51 b 223 -172 397 41 230 -166 b 210 -176 220 -174 215 -176 b 201 -174 206 -176 204 -176 b 112 -87 198 -173 178 -152 b 27 0 65 -38 27 0 b 21 -6 27 0 24 -2 l 17 -12 l 17 -147 b 17 -210 17 -173 17 -194 b 10 -292 17 -297 16 -287 b -2 -299 6 -297 2 -299 b -21 -287 -10 -299 -19 -295 b -24 -174 -23 -284 -23 -284 l -24 -63 l -66 -117 b -121 -176 -110 -170 -114 -176 b -125 -176 -122 -176 -123 -176 b -296 -12 -134 -174 -125 -184 l -308 0 l -337 -34 b -375 -77 -367 -73 -370 -76 b -382 -79 -377 -79 -379 -79 b -402 -58 -393 -79 -402 -69 b -401 -49 -402 -55 -402 -52 b -224 170 -398 -43 -231 165 b -212 174 -221 173 -216 174 b -202 173 -208 174 -205 174 b -39 11 -200 172 -151 122 l -28 -1 l -25 1 l -24 4 l -24 130 b -23 260 -24 256 -24 258 b -10 273 -20 266 -16 270 "},v46:{x_min:0,x_max:627.46875,ha:640,o:"m 306 190 b 314 191 308 191 311 191 b 326 184 318 191 322 190 l 336 173 b 510 52 377 127 442 80 b 515 49 513 51 515 49 b 611 16 537 40 579 24 b 627 0 624 13 627 9 b 607 -18 627 -11 624 -13 b 330 -181 490 -49 389 -109 b 314 -192 323 -190 319 -192 b 306 -191 311 -192 308 -192 b 294 -177 302 -188 302 -188 b 257 -140 287 -170 265 -148 b 19 -18 193 -84 114 -44 b 0 0 2 -13 0 -11 b 16 16 0 9 2 13 b 110 49 47 24 89 40 b 117 52 111 49 114 51 b 145 65 126 56 130 58 b 281 163 200 93 245 124 b 300 186 288 170 291 174 b 306 190 300 187 303 188 m 317 137 b 313 142 315 141 314 142 b 308 137 313 142 311 141 b 161 4 276 84 220 33 b 155 0 159 1 155 0 b 163 -4 155 0 159 -2 b 308 -138 220 -34 276 -84 b 313 -142 311 -141 313 -142 b 317 -138 314 -142 315 -141 b 464 -4 351 -84 406 -34 b 470 0 468 -2 470 0 b 464 4 470 0 468 1 b 317 137 406 33 351 84 "},v47:{x_min:-24.5,x_max:315.78125,ha:322,o:"m -24 -145 l -24 -5 l -20 -5 b 1 -26 -10 -5 -6 -9 b 175 -241 31 -86 96 -166 b 314 -548 259 -323 304 -420 b 315 -589 315 -555 315 -571 b 314 -630 315 -606 315 -623 b 298 -730 311 -664 306 -699 l 295 -742 l 296 -748 b 314 -850 304 -778 311 -813 b 315 -892 315 -857 315 -874 b 314 -932 315 -909 315 -925 b 298 -1032 311 -967 306 -1002 l 295 -1045 l 296 -1050 b 314 -1153 304 -1081 311 -1115 b 315 -1193 315 -1160 315 -1177 b 314 -1235 315 -1211 315 -1228 b 217 -1526 306 -1338 270 -1444 b 201 -1533 213 -1532 208 -1533 b 182 -1522 193 -1533 185 -1529 b 179 -1514 181 -1518 179 -1517 b 189 -1489 179 -1508 182 -1501 b 266 -1217 240 -1403 266 -1308 b 262 -1156 266 -1196 265 -1177 b 110 -907 247 -1043 190 -950 b 0 -889 87 -895 50 -889 l -1 -889 l -24 -889 l -24 -749 l -24 -610 l -20 -610 b 1 -631 -10 -610 -6 -614 b 175 -846 31 -691 96 -771 b 259 -956 213 -884 236 -914 b 265 -966 262 -961 264 -966 b 265 -966 265 -966 265 -966 b 265 -953 265 -964 265 -959 b 266 -920 266 -943 266 -932 b 262 -853 266 -898 265 -873 b 110 -605 247 -741 190 -648 b 0 -587 87 -592 50 -587 l -1 -587 l -24 -587 l -24 -448 l -24 -308 l -20 -308 b 1 -328 -10 -308 -6 -312 b 175 -544 31 -388 96 -469 b 259 -655 213 -581 236 -612 b 265 -663 262 -659 264 -663 b 265 -663 265 -663 265 -663 b 265 -650 265 -663 265 -657 b 266 -617 266 -641 266 -630 b 262 -551 266 -595 265 -570 b 110 -303 247 -438 190 -345 b 0 -284 87 -290 50 -284 l -1 -284 l -24 -284 l -24 -145 "},v49:{x_min:0,x_max:630.203125,ha:643,o:"m 308 204 b 314 205 310 205 313 205 b 326 201 319 205 323 204 b 355 154 328 199 338 180 b 401 83 362 142 392 95 l 409 72 b 431 41 412 66 424 49 b 619 -174 498 -51 570 -134 b 630 -192 626 -180 630 -186 b 626 -202 630 -195 628 -199 b 616 -206 623 -205 620 -206 b 552 -188 608 -206 592 -202 b 310 -155 488 -169 392 -155 b 268 -156 295 -155 281 -155 b 77 -188 197 -161 126 -173 b 13 -206 35 -202 20 -206 b 9 -206 12 -206 10 -206 b 0 -191 2 -202 0 -197 b 8 -176 0 -186 2 -180 b 204 49 58 -136 138 -43 l 220 72 l 227 83 b 295 188 245 108 281 166 b 308 204 299 197 304 202 m 315 147 b 314 147 315 147 314 147 b 314 147 314 147 314 147 b 306 129 314 145 310 138 l 296 105 b 281 72 292 97 284 77 l 274 56 b 181 -123 247 -4 212 -72 l 174 -134 l 176 -133 b 314 -123 215 -127 272 -123 b 451 -133 356 -123 413 -127 l 454 -134 l 449 -123 b 353 56 417 -72 381 -4 l 347 72 b 332 105 344 77 336 97 l 322 129 b 315 147 318 138 315 145 "},v4a:{x_min:70.78125,x_max:378.390625,ha:315,o:"m 246 373 b 254 373 249 373 251 373 b 372 324 303 373 360 351 b 378 302 377 317 378 309 b 338 251 378 278 362 255 b 328 249 334 249 332 249 b 283 294 303 249 283 270 b 288 315 283 301 284 308 b 289 319 289 317 289 319 b 289 319 289 319 289 319 b 283 320 289 320 287 320 b 270 322 279 322 274 322 b 206 288 242 322 215 308 b 206 283 206 287 206 285 b 257 223 206 267 230 238 b 284 206 272 213 277 210 b 351 90 328 173 351 130 b 340 47 351 74 348 59 b 205 -30 314 -2 264 -30 b 182 -29 198 -30 190 -30 b 84 15 147 -24 103 -5 b 70 48 74 24 70 36 b 108 99 70 70 85 94 b 121 102 112 101 117 102 b 167 56 147 102 167 80 b 159 31 167 48 164 40 l 156 26 l 157 26 b 190 20 167 22 178 20 b 220 26 201 20 212 22 b 258 65 243 34 258 51 b 257 70 258 66 258 69 b 204 126 249 94 234 109 b 114 258 148 158 114 209 b 125 302 114 273 118 288 b 246 373 147 342 193 370 "},v4b:{x_min:0,x_max:503.609375,ha:514,o:"m 274 430 b 277 430 276 430 277 430 b 310 394 296 430 310 415 b 308 383 310 391 308 387 b 306 367 307 381 307 374 b 236 120 298 305 272 210 b 40 -273 189 -5 125 -134 b 20 -287 35 -283 27 -287 b 5 -281 14 -287 9 -285 b 0 -267 1 -277 0 -273 b 9 -242 0 -262 2 -255 b 246 395 137 -12 232 242 b 274 430 249 416 257 427 m 468 430 b 472 430 469 430 470 430 b 503 394 490 430 503 415 b 502 383 503 391 503 387 b 499 367 502 381 500 374 b 431 120 491 305 465 210 b 234 -273 382 -5 318 -134 b 213 -287 228 -283 220 -287 b 198 -281 208 -287 202 -285 b 193 -267 194 -277 193 -273 b 202 -242 193 -262 196 -255 b 439 395 330 -12 426 242 b 468 430 442 416 451 427 "},v4d:{x_min:-311.6875,x_max:310.328125,ha:317,o:"m -9 388 b -2 390 -8 390 -5 390 b 5 388 1 390 4 390 b 19 378 10 387 16 383 b 23 333 23 371 23 371 b 24 298 23 299 24 298 b 81 276 34 298 65 285 b 213 91 145 240 190 177 b 224 24 217 76 224 36 b 257 24 224 24 235 24 b 299 19 292 24 292 24 b 310 -1 306 15 310 6 b 299 -23 310 -11 306 -19 b 257 -27 292 -27 292 -27 b 224 -29 235 -27 224 -29 b 213 -95 224 -40 217 -80 b 81 -280 190 -181 145 -244 b 24 -301 65 -290 34 -301 b 23 -335 24 -301 23 -303 l 23 -340 b 17 -381 23 -374 23 -374 b -1 -391 13 -388 5 -391 b -21 -381 -9 -391 -17 -388 b -27 -340 -27 -374 -27 -374 l -27 -335 b -28 -301 -27 -303 -27 -301 b -85 -280 -38 -301 -69 -290 b -217 -95 -149 -244 -194 -181 b -228 -29 -221 -80 -228 -40 b -259 -27 -228 -29 -238 -27 b -300 -23 -294 -27 -294 -27 b -311 -2 -307 -19 -311 -11 b -294 23 -311 8 -304 19 b -259 24 -291 23 -284 24 b -228 24 -239 24 -228 24 b -217 91 -228 36 -221 76 b -85 276 -194 177 -149 240 b -28 298 -69 285 -38 298 b -27 333 -27 298 -27 299 b -27 371 -27 362 -27 369 b -9 388 -24 378 -17 385 m -27 136 b -28 247 -27 197 -28 247 b -61 216 -31 247 -53 226 b -123 33 -95 172 -121 98 l -125 24 l -76 24 l -27 24 l -27 136 m 29 242 b 24 247 27 245 24 247 b 23 136 24 247 23 197 l 23 24 l 72 24 l 121 24 l 119 33 b 29 242 115 116 77 206 m -27 -140 l -27 -27 l -76 -27 l -125 -27 l -123 -36 b -61 -220 -121 -102 -95 -176 b -28 -251 -53 -230 -31 -251 b -27 -140 -28 -251 -27 -201 m 119 -36 l 121 -27 l 72 -27 l 23 -27 l 23 -140 b 24 -251 23 -201 24 -251 b 57 -220 27 -251 49 -230 b 119 -36 91 -176 117 -102 "},v4e:{x_min:0,x_max:239.5625,ha:244,o:"m 10 460 b 20 462 13 462 14 462 b 39 449 28 462 35 458 l 40 446 l 40 326 b 40 205 40 259 40 205 b 127 227 40 205 80 215 b 220 249 196 244 213 249 b 227 247 224 249 225 248 b 238 237 231 245 235 241 l 239 233 l 239 -106 l 239 -448 l 238 -451 b 219 -463 234 -459 225 -463 b 198 -451 210 -463 202 -459 l 197 -448 l 197 -324 b 197 -201 197 -248 197 -201 b 110 -223 196 -201 157 -210 b 17 -245 42 -240 24 -245 b 10 -242 13 -245 13 -244 b 0 -233 6 -241 2 -237 l 0 -230 l 0 108 l 0 446 l 0 449 b 10 460 2 453 6 458 m 197 22 b 197 70 197 41 197 58 b 196 116 197 113 197 116 l 196 116 b 118 97 196 116 160 106 l 40 77 l 40 -18 b 40 -112 40 -69 40 -112 l 119 -93 l 197 -73 l 197 22 "},v51:{x_min:-1.359375,x_max:455.96875,ha:465,o:"m 352 541 b 357 542 353 542 355 542 b 377 530 364 542 372 537 l 378 526 l 378 394 l 379 262 l 404 266 b 436 270 420 269 430 270 b 450 265 443 270 446 269 b 455 220 455 259 455 260 l 455 208 l 455 161 l 454 156 b 411 140 449 147 447 147 b 378 133 393 137 379 134 b 378 68 378 133 378 106 b 378 22 378 54 378 38 l 379 -87 l 404 -83 b 436 -79 420 -80 430 -79 b 450 -84 443 -79 446 -80 b 455 -129 455 -90 455 -88 l 455 -141 l 455 -188 l 454 -192 b 413 -209 449 -202 447 -202 b 382 -215 398 -212 383 -215 l 378 -215 l 378 -345 l 378 -380 b 375 -485 378 -484 378 -480 b 357 -494 371 -491 364 -494 b 340 -485 351 -494 344 -491 b 336 -383 337 -480 336 -484 l 336 -349 l 336 -223 l 334 -223 b 291 -231 334 -223 314 -227 l 247 -240 l 247 -371 l 246 -503 l 245 -506 b 225 -519 242 -514 234 -519 b 206 -506 219 -519 210 -514 l 205 -503 l 205 -376 l 205 -248 l 160 -256 l 115 -265 l 115 -396 l 115 -527 l 114 -531 b 95 -544 110 -539 102 -544 b 76 -531 87 -544 78 -539 l 73 -527 l 73 -399 b 73 -273 73 -330 73 -273 b 49 -277 73 -273 61 -274 b 17 -281 32 -280 24 -281 b 4 -276 10 -281 8 -280 b -1 -234 0 -269 -1 -272 b 0 -219 -1 -229 0 -224 l 0 -170 l 1 -167 b 10 -158 2 -163 6 -159 b 49 -149 13 -156 16 -155 l 73 -145 l 73 -34 b 73 76 73 26 73 76 b 49 72 73 76 61 74 b 17 68 32 69 24 68 b 4 73 10 68 8 69 b -1 115 0 80 -1 77 b 0 130 -1 120 0 124 l 0 179 l 1 181 b 10 191 2 186 6 190 b 49 199 13 192 16 194 l 73 204 l 73 338 b 73 374 73 352 73 365 b 77 483 73 484 73 477 b 95 492 81 489 88 492 b 111 483 100 492 107 489 b 115 378 115 477 115 483 l 115 342 b 117 212 115 223 115 212 b 204 229 117 212 200 227 l 205 229 l 205 365 l 205 502 l 206 505 b 225 517 210 513 219 517 b 245 505 234 517 242 513 l 246 502 l 247 369 l 247 237 l 249 237 b 336 254 253 238 336 254 b 337 390 336 254 337 302 l 337 526 l 338 530 b 352 541 341 535 347 539 m 336 15 b 336 126 336 102 336 126 l 336 126 b 291 117 336 126 315 122 l 247 109 l 247 -1 l 247 -112 l 249 -112 b 336 -95 253 -111 336 -95 b 336 15 336 -95 336 -56 m 205 -120 b 205 -55 205 -120 205 -93 b 205 -9 205 -41 205 -24 l 205 101 l 160 93 l 115 84 l 115 -26 b 115 -83 115 -49 115 -69 b 117 -137 115 -133 115 -137 b 205 -120 118 -137 204 -120 "},v52:{x_min:-10.890625,x_max:298.078125,ha:294,o:"m 138 473 b 142 474 140 473 141 474 b 164 459 148 474 153 470 b 191 402 183 442 191 423 b 181 353 191 388 187 371 b 178 349 179 352 178 349 b 179 348 178 348 179 348 b 185 349 181 348 182 348 b 255 376 210 355 234 363 b 272 381 264 381 266 381 b 298 355 287 381 298 370 b 288 330 298 348 298 345 b 171 34 238 254 194 141 b 166 13 168 16 168 16 b 144 1 161 5 152 1 b 121 15 134 1 125 5 b 115 33 119 18 117 24 b 0 330 91 145 49 252 b -10 355 -9 345 -10 348 b 13 381 -10 371 0 381 b 31 376 19 381 25 380 b 132 345 61 358 103 345 l 136 345 l 137 355 b 145 378 138 359 142 370 b 152 415 149 394 152 405 b 137 452 152 427 148 438 b 133 464 134 458 133 460 b 138 473 133 467 134 470 "},v53:{x_min:0,x_max:902.421875,ha:921,o:"m 17 240 b 24 241 19 241 21 241 b 32 240 28 241 31 241 b 46 229 38 238 43 234 b 50 88 50 223 50 237 b 50 -1 50 63 50 34 b 50 -90 50 -36 50 -65 b 46 -231 50 -238 50 -224 b 25 -242 42 -238 34 -242 b 0 -224 14 -242 4 -235 b 0 2 0 -222 0 -108 b 0 223 0 112 0 220 b 17 240 2 230 9 237 m 110 240 b 118 241 111 241 114 241 b 126 240 121 241 123 241 b 142 223 133 237 140 230 b 144 123 144 220 144 205 b 144 29 144 45 144 29 b 144 29 144 29 144 29 b 393 183 166 106 264 167 b 450 186 412 184 431 186 b 756 29 600 186 732 120 b 756 29 756 29 756 29 b 758 123 758 29 758 45 b 760 227 758 226 758 223 b 784 241 766 237 774 241 b 804 229 792 241 800 237 b 809 88 808 223 809 237 l 809 -1 l 809 -90 b 804 -231 809 -238 808 -224 b 784 -242 800 -238 792 -242 b 762 -231 775 -242 766 -238 b 758 -124 756 -224 758 -231 b 756 -30 758 -47 758 -30 b 756 -30 756 -30 756 -30 b 509 -184 736 -108 637 -169 b 450 -187 488 -187 469 -187 b 144 -30 300 -187 168 -122 b 144 -30 144 -30 144 -30 b 144 -124 144 -30 144 -47 b 140 -231 144 -231 144 -224 b 118 -242 134 -238 126 -242 b 92 -224 107 -242 96 -235 b 92 2 92 -222 92 -108 b 92 223 92 112 92 220 b 110 240 95 230 102 237 m 432 161 b 413 162 426 162 420 162 b 313 41 351 162 313 109 b 347 -73 313 5 323 -34 b 487 -163 385 -133 439 -163 b 578 -97 526 -163 562 -142 b 588 -43 585 -80 588 -62 b 432 161 588 47 518 147 m 868 240 b 876 241 869 241 872 241 b 884 240 879 241 882 241 b 898 229 890 238 894 234 b 902 88 902 223 902 237 l 902 -1 l 902 -90 b 898 -231 902 -238 902 -224 b 876 -242 892 -238 884 -242 b 852 -224 865 -242 854 -235 b 850 2 850 -222 850 -108 b 852 223 850 112 850 220 b 868 240 853 230 860 237 "},v54:{x_min:-24.5,x_max:317.140625,ha:324,o:"m -24 -161 l -24 -5 l -20 -5 b 0 -24 -9 -5 -2 -12 b 171 -315 21 -124 84 -233 b 317 -660 268 -406 317 -531 b 187 -1014 317 -782 274 -909 b 161 -1034 172 -1034 171 -1034 b 141 -1013 149 -1034 141 -1025 b 152 -991 141 -1004 142 -1002 b 266 -682 228 -899 266 -788 b 174 -430 266 -588 236 -498 b -23 -317 136 -388 66 -348 b -24 -161 -23 -316 -24 -285 "},v55:{x_min:0,x_max:551.25,ha:563,o:"m 289 644 b 304 645 294 645 299 645 b 404 566 349 645 392 613 b 406 541 405 557 406 549 b 379 471 406 514 397 489 l 377 467 l 382 470 b 509 591 438 485 485 531 b 513 601 510 595 513 599 b 530 609 518 607 524 609 b 551 588 540 609 551 602 b 200 -605 551 584 204 -599 b 182 -616 197 -612 190 -616 b 163 -602 174 -616 166 -610 b 161 -598 161 -601 161 -601 b 217 -402 161 -589 170 -562 b 272 -213 247 -298 272 -213 b 272 -213 272 -213 272 -213 b 264 -219 272 -213 268 -216 b 140 -262 227 -247 182 -262 b 36 -226 102 -262 65 -249 b 0 -145 12 -206 0 -176 b 17 -84 0 -124 5 -104 b 103 -38 38 -54 70 -38 b 191 -91 137 -38 172 -56 b 205 -141 201 -106 205 -124 b 178 -212 205 -167 196 -194 l 175 -215 l 182 -213 b 307 -93 236 -198 284 -151 b 372 129 308 -88 372 127 b 372 129 372 129 372 129 b 364 122 372 129 368 126 b 240 80 328 94 283 80 b 137 115 202 80 166 91 b 99 195 112 136 99 165 b 118 256 99 217 106 238 b 204 303 138 287 171 303 b 292 249 238 303 273 285 b 306 199 302 234 306 217 b 279 129 306 173 296 148 l 276 126 l 281 127 b 408 248 336 142 385 190 b 473 470 409 254 473 469 b 473 470 473 470 473 470 b 465 464 473 470 469 467 b 341 421 428 435 383 421 b 236 458 303 421 266 433 b 200 537 212 478 200 508 b 289 644 200 585 234 635 "},v58:{x_min:-21.78125,x_max:367.5,ha:375,o:"m 259 1553 b 265 1553 261 1553 264 1553 b 288 1540 272 1553 277 1550 b 367 1351 340 1493 367 1424 b 336 1221 367 1308 357 1263 l 332 1211 l 333 1208 b 367 1077 356 1170 367 1124 b 336 945 367 1032 357 986 l 332 935 l 333 932 b 367 800 356 893 367 848 b 336 669 367 756 357 710 l 332 659 l 333 656 b 367 523 356 617 367 571 b 345 412 367 485 360 446 b 231 273 322 356 284 310 b -1 19 121 195 27 93 b -17 4 -4 11 -10 5 l -21 4 l -21 134 l -21 265 l -17 265 b 133 291 20 265 96 278 b 318 537 245 328 318 433 b 307 603 318 559 315 582 b 303 614 304 612 304 614 b 298 609 302 614 300 613 b 231 549 281 589 258 567 b -1 295 121 471 27 369 b -17 280 -4 287 -10 281 l -21 280 l -21 410 l -21 541 l -17 541 b 133 567 20 541 96 555 b 318 813 245 605 318 709 b 307 880 318 835 315 859 b 303 891 304 888 304 891 b 298 885 302 891 300 888 b 231 825 281 866 258 843 b -1 571 121 748 27 645 b -17 556 -4 563 -10 557 l -21 556 l -21 687 l -21 817 l -17 817 b 133 843 20 817 96 830 b 318 1089 245 881 318 985 b 307 1156 318 1111 315 1134 b 303 1167 304 1164 304 1167 b 298 1161 302 1167 300 1164 b 231 1102 281 1140 258 1120 b -1 848 121 1024 27 921 b -17 832 -4 839 -10 834 l -21 832 l -21 963 l -21 1093 l -17 1093 b 114 1113 12 1093 78 1103 b 313 1314 215 1142 289 1218 b 318 1364 317 1331 318 1347 b 255 1511 318 1422 295 1478 b 243 1532 247 1519 243 1525 b 259 1553 243 1540 250 1550 "},v59:{x_min:0,x_max:464.140625,ha:474,o:"m 0 0 l 0 347 l 76 347 l 153 347 l 153 0 l 153 -348 l 76 -348 l 0 -348 l 0 0 m 308 -1 l 308 347 l 386 347 l 464 347 l 464 -1 l 464 -348 l 386 -348 l 308 -348 l 308 -1 "},v5a:{x_min:-171.5,x_max:170.140625,ha:174,o:"m -6 566 b 0 567 -5 567 -2 567 b 14 556 6 567 12 563 b 92 285 14 555 50 433 b 170 13 166 33 170 19 b 168 13 170 13 170 13 b 161 1 168 8 167 4 l 159 0 l 122 0 l 84 0 l 81 1 b 21 195 76 5 78 -5 b -32 381 -8 297 -32 381 b -87 197 -32 381 -57 298 b -141 8 -115 94 -140 9 b -155 0 -142 2 -149 0 b -171 15 -163 0 -171 5 b -14 556 -171 18 -24 528 b -6 566 -14 560 -10 564 "},v5b:{x_min:-441,x_max:439.640625,ha:449,o:"m -428 -2 b -421 0 -427 -1 -424 0 b -406 -6 -416 0 -409 -2 b -400 -31 -401 -12 -400 -15 b -1 -352 -392 -215 -215 -352 b 58 -349 19 -352 38 -351 b 398 -31 250 -326 392 -192 b 404 -6 398 -15 400 -12 b 419 -1 408 -2 413 -1 b 439 -13 427 -1 435 -5 b 439 -29 439 -16 439 -22 b 434 -105 439 -48 438 -80 b 0 -489 397 -333 213 -489 b -68 -484 -23 -489 -44 -488 b -441 -36 -280 -452 -436 -263 b -441 -30 -441 -34 -441 -31 b -428 -2 -441 -11 -439 -5 m -13 -9 b -1 -8 -9 -8 -5 -8 b 50 -36 19 -8 39 -19 b 61 -72 57 -47 61 -59 b 50 -106 61 -84 57 -97 b -1 -134 39 -124 19 -134 b -46 -115 -17 -134 -34 -129 b -62 -72 -57 -102 -62 -87 b -13 -9 -62 -44 -44 -16 "},v5c:{x_min:0,x_max:447.8125,ha:457,o:"m 0 -87 l 0 0 l 223 0 l 447 0 l 447 -87 l 447 -174 l 223 -174 l 0 -174 l 0 -87 "},v5d:{x_min:-1.359375,x_max:592.078125,ha:604,o:"m 280 692 b 295 694 283 692 289 694 b 310 692 300 694 307 692 b 357 630 340 684 357 657 b 336 580 357 612 351 594 b 311 538 321 566 311 549 b 352 492 311 512 330 492 b 366 495 357 492 362 492 b 397 553 390 503 397 517 b 415 603 397 576 402 591 b 460 623 427 617 443 623 b 509 599 479 623 498 614 b 522 559 518 587 522 573 b 494 506 522 538 513 519 b 451 495 481 498 473 496 b 415 488 432 495 426 494 b 394 449 404 483 394 464 b 394 448 394 448 394 448 l 394 440 l 397 433 b 428 409 404 420 413 413 b 438 408 431 408 435 408 b 479 431 450 408 462 415 b 528 455 495 448 510 455 b 548 452 534 455 541 453 b 592 391 577 442 592 416 b 549 331 592 365 577 340 b 528 327 541 328 534 327 b 479 351 510 327 495 335 b 438 374 464 367 450 374 b 417 369 431 374 424 373 b 394 333 402 360 394 348 b 400 312 394 326 396 319 b 451 287 408 294 420 288 b 513 258 484 285 499 278 b 522 223 519 247 522 234 b 461 159 522 190 496 159 b 449 161 457 159 453 159 b 397 229 416 167 397 191 b 366 288 397 265 390 278 b 352 290 362 290 357 290 b 315 262 336 290 321 280 b 311 245 313 256 311 251 b 334 204 311 233 318 220 b 355 170 348 190 351 184 b 357 152 356 166 357 159 b 355 136 357 147 356 140 b 295 88 345 104 321 88 b 232 152 264 88 232 112 b 255 204 232 174 238 186 b 279 244 273 222 279 231 l 279 245 b 238 290 279 270 259 290 b 224 288 234 290 228 290 b 193 229 200 278 193 265 b 141 161 193 191 174 167 b 129 159 137 159 133 159 b 68 223 93 159 68 190 b 77 258 68 234 70 247 b 138 287 91 278 106 285 b 185 302 166 287 175 291 b 196 333 193 312 196 323 b 174 369 196 347 187 360 b 152 374 166 373 159 374 b 111 351 140 374 126 367 b 62 327 95 335 80 327 b 51 328 58 327 54 327 b -1 391 16 334 -1 363 b 53 455 -1 420 17 449 b 62 455 57 455 59 455 b 111 431 80 455 95 448 b 152 408 127 415 140 408 b 161 409 155 408 159 408 b 193 433 176 413 186 420 l 196 440 l 196 448 b 196 451 196 449 196 449 b 190 471 196 459 194 463 b 137 495 182 489 167 495 l 134 495 l 134 495 b 68 560 95 495 68 521 b 129 623 68 596 95 623 b 144 621 134 623 138 623 b 193 553 175 614 193 589 b 224 495 193 517 200 503 b 238 492 228 492 234 492 b 279 538 259 492 279 512 b 254 580 279 549 269 566 b 232 630 239 594 232 612 b 280 692 232 657 250 684 m 307 456 b 295 458 303 458 299 458 b 230 391 258 458 230 426 b 236 360 230 381 231 371 b 295 324 249 337 272 324 b 353 360 318 324 341 337 b 360 391 357 370 360 381 b 307 456 360 421 340 451 "},v60:{x_min:-590.71875,x_max:589.359375,ha:601,o:"m -367 173 b -362 174 -366 174 -364 174 b -351 173 -357 174 -353 173 b -262 86 -348 172 -328 151 b -176 0 -216 37 -176 0 b -107 84 -176 0 -145 37 b -31 174 -36 173 -38 172 b -25 174 -29 174 -28 174 b -16 173 -23 174 -19 173 b 72 86 -13 172 6 151 b 157 0 119 37 157 0 b 227 84 159 0 189 37 b 303 174 298 173 296 172 b 308 174 304 174 307 174 b 318 173 313 174 317 173 b 481 11 322 172 357 134 l 494 -1 l 522 34 b 560 76 553 72 555 74 b 567 77 563 77 564 77 b 589 56 579 77 589 68 b 586 48 589 54 588 51 b 411 -172 583 41 416 -166 b 397 -176 406 -174 401 -176 b 387 -174 393 -176 390 -176 b 299 -87 386 -173 366 -152 b 213 0 253 -38 213 0 b 144 -86 213 0 182 -38 b 68 -174 73 -174 74 -173 b 62 -176 66 -176 65 -176 b 53 -174 59 -176 55 -174 b -35 -87 50 -173 29 -152 b -121 0 -83 -38 -121 0 b -190 -86 -122 0 -152 -38 b -266 -174 -261 -174 -259 -173 b -272 -176 -268 -176 -270 -176 b -281 -174 -276 -176 -280 -174 b -371 -86 -284 -173 -304 -152 b -457 0 -417 -38 -457 0 l -457 0 b -477 -26 -457 0 -470 -16 b -548 -227 -524 -88 -548 -161 b -536 -303 -548 -254 -544 -280 b -533 -317 -534 -309 -533 -313 b -553 -338 -533 -330 -541 -338 b -577 -315 -566 -338 -571 -333 b -590 -227 -586 -287 -590 -258 b -518 -9 -590 -154 -564 -77 b -465 56 -509 2 -504 8 l -402 134 b -367 173 -375 169 -372 172 "},v62:{x_min:46.28125,x_max:669.671875,ha:563,o:"m 183 376 b 189 376 185 376 187 376 b 212 374 197 376 208 376 b 265 337 234 369 253 355 b 274 317 268 331 273 320 b 274 316 274 317 274 316 b 280 323 276 316 276 319 b 311 358 288 337 299 348 b 319 366 315 360 318 365 b 356 376 326 373 340 376 b 382 371 364 376 374 374 b 428 337 400 366 417 352 b 436 317 431 331 436 320 b 438 316 436 317 436 316 b 442 323 438 316 439 319 b 475 358 451 337 462 348 b 483 366 477 360 481 365 b 518 376 488 373 503 376 b 544 373 528 376 536 376 b 604 285 579 360 604 326 b 597 249 604 273 601 258 b 543 63 596 247 544 70 b 541 54 543 61 541 55 b 540 44 540 51 540 47 b 552 23 540 33 545 23 b 552 23 552 23 552 23 b 647 126 586 29 627 72 b 658 138 651 136 653 138 b 660 138 660 138 660 138 b 669 129 666 137 669 136 b 654 88 669 122 665 109 b 562 -12 631 43 602 9 l 549 -19 b 521 -27 540 -24 530 -27 b 447 30 490 -27 458 -4 b 443 58 445 38 443 48 b 450 93 443 72 446 84 b 504 278 453 97 504 272 b 507 288 506 283 506 287 b 509 298 507 292 509 295 b 491 326 509 310 502 320 b 487 327 490 327 488 327 b 479 324 484 327 483 326 b 441 270 462 316 443 288 b 435 249 441 265 436 254 b 398 127 434 248 419 195 b 362 4 379 61 362 5 b 328 -1 359 -1 362 -1 b 314 -1 323 -1 319 -1 b 302 -1 310 -1 306 -1 b 266 4 266 -1 269 -1 b 265 6 265 5 265 5 b 303 144 265 13 272 34 b 343 278 325 216 343 276 b 344 288 343 281 344 285 b 345 298 345 291 345 295 b 330 326 345 310 340 320 b 323 327 328 327 325 327 b 317 324 322 327 321 326 b 279 270 300 316 281 288 b 273 249 279 265 274 254 b 236 127 272 248 255 195 b 200 4 216 61 200 5 b 164 -1 197 -1 198 -1 b 151 -1 161 -1 156 -1 b 140 -1 147 -1 142 -1 b 103 4 104 -1 106 -1 b 103 6 103 5 103 5 b 141 144 103 13 108 34 b 181 278 161 216 179 276 b 182 288 181 281 181 285 b 183 298 182 291 183 295 b 168 324 183 310 178 320 b 160 327 166 326 163 327 b 141 320 156 327 151 324 b 69 230 112 305 85 272 b 57 215 65 217 62 215 b 55 215 57 215 55 215 b 46 224 49 215 46 217 b 59 260 46 231 50 242 b 151 363 81 306 112 341 b 161 369 155 365 160 367 b 183 376 166 371 174 374 "},v68:{x_min:-597.53125,x_max:596.171875,ha:608,o:"m -533 324 b -525 327 -530 326 -528 327 b -504 305 -514 327 -504 317 b -504 305 -504 305 -504 305 b -513 284 -504 299 -504 299 b -556 112 -541 226 -556 167 b -545 33 -556 84 -552 58 b -524 -20 -541 15 -532 -9 l -522 -23 l -491 15 l -413 111 b -355 174 -367 169 -363 174 b -351 174 -353 174 -352 174 b -254 86 -343 174 -348 179 b -168 -1 -208 37 -168 -1 b -100 84 -168 -1 -137 37 b -23 173 -28 173 -29 172 b -19 174 -21 174 -20 174 b -8 173 -14 174 -10 173 b 155 11 -5 172 43 123 l 166 -1 l 168 1 l 170 4 l 170 130 b 171 260 170 256 170 258 b 191 274 175 269 183 274 b 205 267 196 274 201 272 b 212 158 212 262 210 273 l 212 56 l 257 112 b 311 173 304 172 304 172 b 317 174 313 174 314 174 b 326 173 319 174 323 173 b 490 11 329 172 366 134 l 502 -1 l 530 34 b 568 76 560 72 563 74 b 575 77 570 77 573 77 b 596 56 586 77 596 68 b 594 48 596 54 596 51 b 417 -172 592 41 424 -166 b 405 -176 415 -174 409 -176 b 396 -174 401 -176 398 -176 b 307 -87 393 -173 372 -152 b 221 -1 259 -38 221 -1 b 216 -6 221 -1 219 -2 l 212 -12 l 212 -147 b 212 -210 212 -173 212 -194 b 205 -292 212 -297 210 -287 b 191 -299 201 -297 196 -299 b 172 -287 183 -299 175 -295 b 170 -174 171 -284 171 -284 l 170 -63 l 127 -117 b 73 -176 84 -170 80 -176 b 68 -176 72 -176 70 -176 b -27 -87 59 -174 65 -180 b -114 0 -74 -38 -112 0 b -182 -86 -114 0 -145 -38 b -258 -174 -253 -174 -253 -173 b -264 -176 -259 -176 -262 -176 b -274 -174 -268 -176 -272 -174 b -438 -11 -277 -173 -348 -102 l -449 0 l -479 -37 b -524 -80 -513 -80 -514 -80 l -524 -80 b -553 -52 -534 -80 -540 -74 b -597 109 -583 -8 -597 48 b -560 280 -597 165 -585 224 b -533 324 -548 310 -540 322 "},v6c:{x_min:-1.359375,x_max:193.28125,ha:197,o:"m 78 233 b 87 233 81 233 84 233 b 187 140 132 233 174 195 b 193 102 190 127 193 115 b 43 -113 193 22 136 -62 b 27 -119 36 -116 31 -119 b 19 -108 21 -119 19 -115 b 29 -97 19 -102 20 -101 b 102 13 73 -72 102 -27 b 92 51 102 26 98 40 l 91 54 l 84 54 b 8 104 53 54 21 74 b -1 142 1 116 -1 130 b 78 233 -1 187 31 227 "},v6d:{x_min:-590.71875,x_max:589.359375,ha:601,o:"m 544 335 b 553 337 548 337 551 337 b 575 313 563 337 570 330 b 589 226 583 285 589 256 b 517 8 589 152 563 76 b 464 -58 507 -4 503 -9 l 401 -136 b 362 -176 372 -172 370 -176 b 357 -176 360 -176 359 -176 b 261 -87 349 -174 355 -180 b 175 0 215 -38 175 0 b 106 -86 175 0 144 -38 b 29 -174 35 -174 36 -173 b 24 -176 28 -176 27 -176 b 14 -174 21 -176 17 -174 b -73 -87 12 -173 -8 -152 b -159 0 -121 -38 -159 0 b -228 -86 -160 0 -190 -38 b -304 -174 -299 -174 -298 -173 b -310 -176 -306 -176 -308 -176 b -319 -174 -314 -176 -318 -174 b -483 -12 -323 -173 -359 -137 l -495 0 l -524 -34 b -562 -77 -553 -73 -556 -76 b -568 -79 -564 -79 -566 -79 b -590 -58 -581 -79 -590 -69 b -588 -49 -590 -55 -589 -52 b -412 170 -585 -43 -417 165 b -398 174 -408 173 -402 174 b -389 173 -394 174 -392 174 b -300 86 -387 172 -366 151 b -215 -1 -254 37 -215 -1 b -145 84 -215 -1 -183 37 b -69 173 -74 173 -76 172 b -63 174 -68 174 -66 174 b -54 173 -61 174 -57 173 b 34 86 -51 172 -31 151 b 119 -1 81 37 119 -1 b 189 84 121 -1 151 37 b 265 173 259 173 258 172 b 270 174 266 174 269 174 b 280 173 274 174 279 173 b 370 84 283 172 303 151 b 455 -1 416 37 455 -1 l 455 -1 b 476 24 455 -1 469 15 b 547 226 522 87 547 159 b 534 302 547 252 543 278 b 532 317 533 308 532 313 b 544 335 532 326 536 333 "},v6f:{x_min:-80.3125,x_max:78.9375,ha:81,o:"m 63 191 b 69 192 65 192 66 192 b 77 188 72 192 76 191 b 78 183 78 187 78 186 b 74 158 78 179 77 172 l 66 115 b 9 -161 49 30 10 -158 b -10 -187 6 -172 -1 -181 b -34 -194 -17 -191 -25 -194 b -80 -147 -58 -194 -80 -174 b -80 -141 -80 -144 -80 -142 b 9 70 -80 -134 -73 -117 l 49 163 b 63 191 59 188 61 190 "},v70:{x_min:0,x_max:436.921875,ha:446,o:"m 213 190 b 217 191 215 191 216 191 b 231 184 223 191 228 188 b 249 154 240 167 246 159 b 419 18 292 91 348 45 b 436 -1 435 11 436 8 b 424 -16 436 -9 434 -13 b 308 -87 394 -26 340 -59 b 231 -186 276 -117 257 -142 b 219 -192 228 -191 225 -192 b 198 -174 209 -192 208 -191 b 47 -33 161 -113 110 -63 b 10 -16 34 -26 17 -19 b 0 -1 2 -13 0 -9 b 17 18 0 8 1 11 b 198 173 95 48 156 101 b 213 190 206 187 208 188 "},v72:{x_min:-423.3125,x_max:421.9375,ha:431,o:"m -262 197 b -247 197 -257 197 -253 197 b -118 162 -210 197 -163 184 b 40 45 -61 134 -13 98 b 277 -95 119 -33 200 -81 b 289 -97 281 -97 285 -97 b 378 0 332 -97 371 -55 b 378 11 378 4 378 6 b 302 83 378 55 345 83 b 242 66 283 83 262 77 b 208 56 231 59 219 56 b 148 120 175 56 148 81 b 201 186 148 151 164 172 b 261 198 220 194 240 198 b 420 45 341 198 411 136 b 421 22 421 37 421 29 b 245 -199 421 -93 338 -199 b 238 -198 243 -199 240 -199 b -44 -47 148 -194 50 -141 b -250 86 -114 22 -183 66 b -295 94 -270 91 -283 94 b -315 91 -302 94 -307 94 b -381 4 -356 81 -381 43 b -355 -56 -381 -18 -372 -40 b -298 -81 -338 -73 -319 -81 b -246 -68 -283 -81 -265 -77 b -212 -58 -234 -61 -223 -58 b -178 -69 -200 -58 -189 -62 b -151 -122 -160 -81 -151 -101 b -171 -167 -151 -138 -157 -155 b -239 -195 -185 -181 -213 -192 b -257 -197 -245 -197 -250 -197 b -423 -5 -352 -197 -423 -109 b -412 65 -423 16 -419 40 b -262 197 -389 137 -329 188 "},v74:{x_min:-206.890625,x_max:428.75,ha:438,o:"m 389 -351 b 394 -351 390 -351 393 -351 b 428 -385 413 -351 428 -367 b 428 -394 428 -388 428 -391 b 394 -428 426 -406 421 -410 l 332 -473 l 269 -516 l 205 -560 l 141 -603 l 77 -648 l 13 -692 l -50 -737 l -114 -780 l -145 -802 b -171 -813 -157 -810 -163 -813 b -175 -813 -172 -813 -174 -813 b -206 -777 -194 -811 -206 -795 b -202 -760 -206 -771 -205 -766 b -87 -675 -197 -752 -206 -757 l -34 -639 l 83 -557 l 145 -514 l 209 -470 l 272 -427 b 389 -351 375 -356 381 -352 "},v75:{x_min:-149.71875,x_max:148.359375,ha:151,o:"m -137 381 b -130 383 -134 383 -133 383 b -111 371 -122 383 -114 378 b -55 224 -110 370 -85 305 b 0 80 -25 145 -1 80 b 54 224 0 80 24 145 b 112 377 114 384 110 373 b 127 384 118 381 122 384 b 148 362 138 384 148 374 l 148 356 l 83 183 b 16 9 47 88 17 11 b -1 0 12 2 5 0 b -14 5 -5 0 -10 1 b -84 183 -19 9 -13 -6 l -149 356 l -149 362 b -137 381 -149 371 -145 378 "},v78:{x_min:0,x_max:193.28125,ha:197,o:"m 85 514 b 95 517 88 517 89 517 b 114 505 103 517 110 513 l 115 502 l 115 376 b 115 249 115 306 115 249 b 141 258 117 249 127 252 l 167 266 l 172 266 b 190 254 181 265 187 262 l 193 251 l 193 202 l 193 188 b 187 147 193 149 191 152 b 147 130 183 142 182 141 l 115 119 l 115 9 b 115 -99 115 -51 115 -99 b 141 -91 115 -99 127 -95 b 171 -81 166 -81 167 -81 l 171 -81 b 191 -94 181 -81 189 -87 b 193 -142 191 -97 193 -120 b 191 -195 193 -167 191 -194 b 125 -227 187 -205 187 -204 l 115 -230 l 115 -366 l 115 -503 l 114 -506 b 95 -519 110 -514 102 -519 b 74 -506 87 -519 78 -514 l 73 -503 l 73 -374 b 73 -245 73 -260 73 -245 b 73 -245 73 -245 73 -245 b 55 -252 72 -245 63 -249 l 32 -260 b 19 -263 27 -262 23 -263 b 4 -256 13 -263 8 -260 b 0 -215 0 -251 0 -254 b 0 -199 0 -210 0 -206 l 0 -152 l 1 -149 b 8 -140 2 -145 5 -141 b 42 -127 9 -140 24 -133 l 73 -116 l 73 -5 b 73 23 73 4 73 15 b 73 105 73 70 73 105 b 49 97 73 105 61 101 b 17 88 32 91 23 88 b 4 95 10 88 8 91 b 0 137 0 101 0 98 b 0 151 0 141 0 145 l 0 199 l 1 202 b 43 224 5 212 5 212 l 73 234 l 73 367 l 73 502 l 74 505 b 85 514 77 509 81 513 "},v79:{x_min:-1.359375,x_max:899.703125,ha:918,o:"m 307 349 b 332 351 315 351 323 351 b 443 340 367 351 408 347 b 741 47 607 306 720 195 b 744 0 743 31 744 16 b 660 -303 744 -90 713 -206 b 28 -755 534 -531 304 -695 b 14 -756 23 -755 19 -756 b -1 -741 4 -756 -1 -750 b 21 -720 -1 -731 1 -728 b 567 -56 337 -601 548 -344 b 568 -11 568 -41 568 -24 b 442 285 568 129 525 233 b 325 319 406 308 367 319 b 93 177 232 319 137 266 b 84 154 91 170 84 155 b 84 154 84 154 84 154 b 88 156 84 154 85 155 b 159 177 110 170 134 177 b 257 134 194 177 231 162 b 294 41 281 108 294 73 b 171 -97 294 -24 246 -90 b 156 -98 166 -97 161 -98 b 6 74 73 -98 6 -22 b 6 80 6 76 6 79 b 307 349 10 223 141 340 m 839 215 b 845 216 841 216 842 216 b 862 213 852 216 860 215 b 899 163 887 206 899 184 b 872 117 899 145 890 127 b 847 111 865 112 856 111 b 808 130 833 111 818 117 b 796 162 800 140 796 151 b 839 215 796 187 812 212 m 839 -112 b 845 -112 841 -112 842 -112 b 862 -115 852 -112 860 -113 b 899 -165 887 -122 899 -144 b 872 -210 899 -183 890 -201 b 847 -217 865 -215 856 -217 b 808 -198 833 -217 818 -210 b 796 -165 800 -188 796 -177 b 839 -112 796 -140 812 -116 "},v7a:{x_min:-1.359375,x_max:386.5625,ha:394,o:"m 249 535 b 257 537 251 537 253 537 b 276 524 266 537 273 533 l 277 521 l 279 419 l 279 316 l 304 323 b 337 328 319 326 330 328 b 353 316 347 328 349 324 b 355 266 355 315 355 290 b 353 215 355 241 355 217 b 319 198 349 206 347 205 b 279 187 284 190 279 188 b 279 156 279 187 279 174 b 279 136 279 151 279 144 l 279 84 l 289 87 l 330 98 b 367 105 352 102 362 105 b 378 101 372 105 375 104 b 386 61 385 95 386 94 b 386 40 386 55 386 48 l 386 -5 l 385 -8 b 374 -19 383 -12 378 -18 b 291 -40 372 -19 347 -26 b 279 -43 284 -41 279 -43 b 279 -83 279 -43 279 -59 b 279 -95 279 -87 279 -91 l 279 -145 l 304 -140 b 337 -133 321 -136 330 -133 b 349 -140 343 -133 347 -136 b 355 -181 355 -145 355 -142 l 355 -197 l 355 -210 b 349 -252 355 -249 355 -247 b 300 -269 345 -258 347 -258 b 280 -274 291 -272 281 -273 l 279 -274 l 277 -378 l 277 -483 l 276 -487 b 257 -499 273 -495 265 -499 b 238 -487 249 -499 242 -495 l 236 -483 l 236 -384 l 236 -285 l 235 -285 l 212 -291 l 170 -301 b 148 -308 159 -305 148 -306 b 147 -415 147 -308 147 -313 l 147 -523 l 145 -526 b 126 -538 141 -534 133 -538 b 106 -526 118 -538 110 -534 l 104 -523 l 104 -420 b 103 -317 104 -326 104 -317 b 103 -317 103 -317 103 -317 b 50 -330 92 -322 54 -330 b 31 -317 42 -330 35 -326 b 29 -267 29 -315 29 -315 l 29 -219 l 32 -216 b 92 -192 36 -206 36 -206 l 104 -190 l 104 -138 b 103 -87 104 -91 104 -87 b 103 -87 103 -87 103 -87 b 88 -91 103 -87 96 -88 l 49 -101 b 17 -106 32 -105 23 -106 b 6 -102 13 -106 10 -105 b -1 -62 0 -97 -1 -95 b 0 -41 -1 -56 0 -49 l 0 4 l 1 6 b 10 16 2 11 6 15 b 91 37 12 18 38 24 l 104 41 l 104 93 b 103 144 104 140 104 144 b 103 144 103 144 103 144 b 50 131 92 141 54 131 b 31 144 42 131 35 137 b 29 195 29 147 29 148 l 29 242 l 32 245 b 92 269 36 255 36 255 l 104 273 l 104 377 l 104 481 l 106 485 b 126 498 110 492 118 498 b 134 495 129 498 132 496 b 145 485 138 494 142 489 l 147 481 l 147 383 l 147 283 l 152 284 b 190 294 155 285 171 290 l 230 303 l 236 305 l 236 413 l 236 521 l 238 524 b 249 535 240 528 243 533 m 236 126 b 235 177 236 154 236 177 l 235 177 b 213 172 235 177 225 174 l 170 161 b 147 155 157 158 147 155 b 147 124 147 155 147 142 b 147 102 147 117 147 111 l 147 52 l 153 54 l 228 72 l 236 74 l 236 126 m 236 -105 b 235 -54 236 -65 236 -54 l 235 -54 b 231 -55 235 -54 234 -54 b 172 -69 227 -55 204 -62 l 149 -76 l 147 -76 l 147 -127 l 147 -179 l 152 -177 b 190 -167 155 -177 171 -173 l 230 -158 l 236 -156 l 236 -105 "},v7c:{x_min:0,x_max:300.8125,ha:307,o:"m 49 505 b 53 506 50 505 51 506 b 70 496 58 506 62 503 b 81 485 73 492 78 488 l 96 473 l 111 459 l 122 449 l 134 438 l 182 396 l 255 330 b 292 291 292 298 292 298 l 292 290 l 292 284 l 283 270 b 209 36 234 197 209 113 b 288 -170 209 -44 235 -119 b 299 -184 295 -179 299 -181 b 300 -191 300 -187 300 -188 b 285 -206 300 -199 294 -206 b 280 -206 283 -206 281 -206 b 247 -201 270 -202 259 -201 b 176 -222 223 -201 197 -208 b 114 -340 136 -249 114 -292 b 172 -471 114 -384 134 -433 b 185 -492 182 -481 185 -487 b 181 -502 185 -496 183 -499 b 171 -508 176 -505 174 -508 b 152 -498 166 -508 160 -503 b 0 -284 65 -428 12 -352 b 0 -260 0 -278 0 -270 b 1 -238 0 -252 0 -242 b 148 -140 16 -177 73 -140 b 209 -148 167 -140 189 -142 b 215 -149 212 -148 215 -149 b 215 -149 215 -149 215 -149 l 215 -149 b 201 -136 215 -148 209 -142 l 157 -97 l 96 -41 b 17 34 21 24 17 29 b 17 37 17 36 17 36 b 17 38 17 37 17 38 b 25 56 17 44 17 44 b 110 298 81 131 110 219 b 46 474 110 367 88 431 b 38 491 40 480 38 487 b 49 505 38 498 42 502 "},v7d:{x_min:-1.359375,x_max:436.921875,ha:446,o:"m 213 205 b 217 205 215 205 216 205 b 234 194 224 205 234 199 b 236 187 234 194 235 190 l 245 167 l 261 129 l 270 106 b 355 -61 294 54 329 -13 b 420 -163 381 -105 402 -138 b 436 -188 435 -184 436 -184 b 436 -191 436 -190 436 -190 b 421 -206 436 -201 431 -206 l 421 -206 l 416 -206 l 405 -201 b 217 -158 347 -172 283 -158 b 31 -201 153 -158 88 -172 l 20 -206 l 14 -206 l 14 -206 b 0 -191 5 -206 0 -201 b -1 -188 0 -190 -1 -190 b 14 -163 -1 -186 0 -184 b 95 -34 36 -136 72 -77 b 166 106 119 8 148 68 l 175 129 l 183 148 l 200 188 b 213 205 205 199 208 202 "},v7f:{x_min:0,x_max:367.5,ha:375,o:"m 0 124 l 0 187 l 61 187 l 122 187 l 122 138 l 122 91 l 153 61 l 183 30 l 213 61 l 243 91 l 243 138 l 243 187 l 306 187 l 367 187 l 367 124 l 367 61 l 321 61 l 274 61 l 243 30 l 213 0 l 243 -31 l 274 -62 l 321 -62 l 367 -62 l 367 -124 l 367 -188 l 306 -188 l 243 -188 l 243 -140 l 243 -93 l 213 -62 l 183 -31 l 153 -62 l 122 -93 l 122 -140 l 122 -188 l 61 -188 l 0 -188 l 0 -124 l 0 -62 l 46 -62 l 92 -62 l 123 -31 l 153 0 l 123 30 l 92 61 l 46 61 l 0 61 l 0 124 "},v80:{x_min:29.9375,x_max:420.578125,ha:371,o:"m 115 345 b 221 347 117 345 166 347 b 411 345 306 347 409 345 b 420 330 416 342 420 335 b 415 319 420 326 419 321 b 178 118 397 303 179 118 b 178 117 178 118 178 117 b 181 117 178 117 178 117 b 189 117 182 117 185 117 b 193 117 190 117 191 117 b 247 98 215 117 232 111 b 296 75 266 83 280 76 b 302 75 299 75 300 75 b 322 91 311 75 315 79 b 322 91 322 91 322 91 b 322 91 322 91 322 91 b 319 91 322 91 321 91 b 313 90 318 90 315 90 b 283 107 300 90 288 97 b 277 126 279 114 277 121 b 319 167 277 149 295 167 b 319 167 319 167 319 167 b 362 118 347 167 362 147 b 355 82 362 108 359 96 b 311 33 349 65 340 55 b 224 1 284 12 253 1 b 194 5 213 1 204 2 b 168 18 183 8 178 11 b 110 36 151 30 130 36 b 57 15 88 36 68 29 b 47 11 54 12 51 11 b 31 20 40 11 34 13 b 29 26 31 22 29 25 b 68 66 29 36 39 45 b 285 250 73 71 281 248 b 285 250 285 250 285 250 b 231 252 285 252 261 252 b 137 250 190 252 141 250 b 93 227 122 248 110 241 b 78 220 88 222 83 220 b 66 227 74 220 70 222 b 63 234 65 229 63 231 b 85 291 63 241 69 252 b 115 345 108 342 108 344 "},v81:{x_min:0,x_max:428.75,ha:438,o:"m 262 186 b 273 186 266 186 272 186 b 274 186 273 186 274 186 b 285 186 274 186 280 186 b 428 48 375 181 428 122 b 386 -68 428 12 416 -29 b 155 -187 329 -145 236 -187 b 12 -111 92 -187 38 -162 b 0 -51 4 -91 0 -72 b 262 186 0 58 122 179 m 366 131 b 352 134 362 133 357 134 b 219 81 321 134 269 115 b 47 -111 126 23 50 -62 b 47 -112 47 -111 47 -112 b 77 -136 47 -129 58 -136 b 264 -45 118 -136 194 -101 b 382 109 336 12 382 76 b 366 131 382 120 377 129 "},v83:{x_min:-1.359375,x_max:847.96875,ha:865,o:"m 488 1499 b 495 1500 490 1500 492 1500 b 541 1465 507 1500 521 1490 b 679 1078 622 1372 679 1210 b 677 1050 679 1068 677 1060 b 477 642 668 893 604 764 l 443 609 l 431 596 l 431 592 l 438 562 l 449 508 l 460 458 b 481 355 475 390 481 355 b 481 355 481 355 481 355 b 490 356 481 355 485 355 b 528 358 495 356 511 358 b 558 356 540 358 552 356 b 839 95 699 338 808 237 b 847 22 845 72 847 47 b 631 -303 847 -113 766 -242 b 620 -309 623 -308 620 -309 l 620 -310 b 631 -359 620 -310 626 -333 l 646 -435 l 660 -496 b 672 -588 668 -535 672 -563 b 664 -653 672 -610 669 -630 b 383 -875 630 -792 509 -875 b 201 -810 321 -875 257 -855 b 129 -680 151 -768 129 -730 b 274 -530 129 -592 200 -530 b 351 -553 300 -530 326 -538 b 412 -669 393 -582 412 -626 b 287 -805 412 -735 366 -800 l 279 -805 l 285 -809 b 383 -830 318 -823 351 -830 b 586 -718 464 -830 540 -789 b 626 -584 612 -678 626 -631 b 619 -528 626 -566 623 -548 b 612 -495 619 -526 616 -510 b 577 -324 590 -387 577 -324 b 577 -324 577 -324 577 -324 b 568 -326 575 -324 571 -324 b 528 -334 558 -328 537 -333 b 465 -338 506 -337 485 -338 b 24 -11 269 -338 87 -206 b -1 145 8 41 -1 93 b 96 442 -1 249 32 351 b 322 714 166 541 236 626 l 352 745 l 345 782 l 332 843 l 315 921 b 303 984 310 950 304 978 b 295 1082 298 1017 295 1049 b 413 1426 295 1208 336 1329 b 488 1499 436 1456 477 1496 m 549 1301 b 541 1301 547 1301 544 1301 b 411 1207 500 1301 447 1263 b 355 1004 374 1152 355 1079 b 359 942 355 984 356 963 b 371 881 362 927 363 917 l 385 818 b 392 782 389 799 392 784 l 392 782 b 434 828 393 782 424 816 b 607 1165 534 941 594 1060 b 608 1193 608 1175 608 1183 b 597 1270 608 1224 604 1254 b 549 1301 589 1286 571 1299 m 398 528 b 393 555 396 542 393 553 b 392 555 393 555 393 555 b 317 470 390 555 347 505 b 190 298 266 408 212 334 b 127 70 148 227 127 148 b 155 -77 127 19 137 -30 b 468 -303 209 -216 333 -303 b 519 -299 484 -303 502 -302 b 568 -284 541 -295 568 -287 l 568 -284 b 563 -263 568 -284 566 -274 l 534 -120 l 511 -13 l 496 61 l 480 133 b 469 187 472 176 469 187 b 468 188 469 187 469 188 b 416 162 462 188 430 172 b 337 13 364 126 337 69 b 413 -124 337 -40 363 -93 b 428 -144 424 -131 428 -137 b 428 -149 428 -145 428 -148 b 409 -166 426 -161 419 -166 b 394 -162 405 -166 400 -165 b 240 77 302 -122 240 -27 l 240 77 b 430 342 240 197 315 301 l 436 344 l 426 394 l 398 528 m 548 194 b 526 195 540 195 532 195 b 519 195 524 195 521 195 l 514 195 l 518 177 l 539 79 l 552 15 l 566 -48 l 594 -187 l 605 -240 b 612 -266 609 -254 611 -266 b 612 -266 612 -266 612 -266 b 641 -248 613 -266 630 -256 b 744 -98 692 -212 730 -156 b 751 -40 749 -79 751 -59 b 548 194 751 76 665 181 "},v84:{x_min:25.859375,x_max:164.6875,ha:168,o:"m 34 369 b 40 370 35 370 38 370 b 59 353 49 370 50 367 b 164 40 122 254 155 158 b 164 0 164 33 164 16 b 164 -40 164 -16 164 -34 b 59 -353 155 -158 122 -254 b 40 -371 53 -366 47 -371 b 34 -370 38 -371 36 -370 b 25 -358 28 -367 25 -363 b 31 -337 25 -352 27 -347 b 92 0 72 -234 92 -117 b 31 335 92 116 72 233 b 25 356 27 345 25 352 b 34 369 25 363 28 366 "},v86:{x_min:-571.671875,x_max:570.3125,ha:582,o:"m -386 173 b -381 174 -385 174 -383 174 b -370 173 -377 174 -372 173 b -281 86 -367 172 -347 151 b -196 0 -235 37 -196 0 b -126 84 -196 0 -164 37 b -50 174 -55 173 -57 172 b -44 174 -49 174 -47 174 b -35 173 -42 174 -38 173 b 53 86 -32 172 -12 151 b 138 0 100 37 138 0 b 208 84 140 0 170 37 b 284 174 279 173 277 172 b 289 174 285 174 288 174 b 299 173 294 174 298 173 b 462 11 303 172 338 134 l 475 -1 l 503 34 b 541 76 534 72 536 74 b 548 77 544 77 545 77 b 570 56 560 77 570 68 b 567 48 570 54 568 51 b 392 -172 564 41 397 -166 b 378 -176 387 -174 382 -176 b 368 -174 374 -176 371 -176 b 280 -87 367 -173 345 -152 b 194 0 234 -38 194 0 b 125 -86 194 0 163 -38 b 49 -174 54 -174 55 -173 b 43 -176 47 -176 46 -176 b 34 -174 40 -176 36 -174 b -54 -87 31 -173 10 -152 b -140 0 -102 -38 -140 0 b -209 -86 -141 0 -171 -38 b -285 -174 -280 -174 -279 -173 b -291 -176 -287 -176 -289 -176 b -300 -174 -295 -176 -299 -174 b -464 -12 -304 -173 -340 -137 l -476 0 l -504 -34 b -543 -77 -534 -73 -537 -76 b -549 -79 -545 -79 -547 -79 b -571 -58 -562 -79 -571 -69 b -568 -49 -571 -55 -570 -52 b -392 172 -566 -43 -396 167 b -386 173 -390 172 -387 173 "},v8a:{x_min:-170.140625,x_max:168.78125,ha:172,o:"m -160 567 b -122 567 -159 567 -149 567 l -87 567 l -84 566 b -74 553 -78 563 -77 560 b -20 366 -73 551 -49 466 b 31 186 8 267 31 186 b 85 371 31 186 55 269 b 140 559 114 473 138 557 b 153 567 141 564 148 567 b 168 559 159 567 166 564 b 168 555 168 557 168 557 b 92 281 168 548 159 513 b 14 13 50 134 14 13 b 0 0 14 6 6 0 b -17 15 -8 0 -17 8 b -93 283 -17 15 -51 136 b -170 552 -166 533 -170 548 b -170 553 -170 552 -170 552 b -160 567 -170 560 -167 564 "},v8b:{x_min:0,x_max:319.859375,ha:326,o:"m 149 508 b 159 509 152 509 155 509 b 186 494 170 509 181 503 b 190 440 190 487 190 488 l 190 430 l 190 377 l 242 377 l 251 377 b 303 373 298 377 296 377 b 319 345 314 367 319 356 b 304 319 319 335 314 324 b 250 315 296 315 299 315 l 242 315 l 190 315 l 190 262 l 190 252 b 186 198 190 204 190 205 b 159 183 179 188 170 183 b 132 198 148 183 138 188 b 127 252 127 205 127 204 l 127 262 l 127 315 l 76 315 l 68 315 b 14 319 20 315 21 315 b 0 347 4 324 0 335 b 14 373 0 356 4 367 b 68 377 21 377 20 377 l 76 377 l 127 377 l 127 430 l 127 440 b 132 494 127 488 127 487 b 149 508 136 501 142 505 "},v8c:{x_min:-330.75,x_max:329.390625,ha:336,o:"m -133 483 b -117 484 -127 484 -122 484 b 31 373 -51 484 9 440 b 35 348 34 365 35 356 b -25 285 35 313 10 285 b -87 331 -55 285 -76 302 b -167 402 -100 376 -133 402 b -191 398 -175 402 -183 401 b -227 341 -215 388 -227 369 b -225 320 -227 334 -227 327 b -13 74 -209 230 -125 133 b 6 65 -4 70 5 66 l 9 63 l 10 65 b 117 231 12 68 40 112 l 189 341 l 242 424 b 268 460 262 456 264 458 b 283 464 273 463 277 464 b 308 438 296 464 308 453 l 308 437 b 287 396 308 430 308 428 l 95 98 l 59 43 l 58 41 l 65 37 b 253 -156 151 -8 217 -77 b 281 -285 272 -199 281 -244 b 148 -481 281 -381 231 -463 b 115 -485 137 -484 126 -485 b -32 -376 51 -485 -9 -442 b -36 -349 -35 -366 -36 -358 b 25 -287 -36 -315 -12 -287 b 85 -333 54 -287 74 -302 b 166 -403 99 -377 133 -403 b 190 -399 174 -403 182 -402 b 225 -342 215 -390 225 -370 b 224 -322 225 -335 225 -328 b 12 -76 208 -231 125 -134 b -8 -66 2 -72 -6 -68 l -10 -65 l -12 -66 b -118 -231 -13 -68 -42 -113 l -190 -342 l -243 -426 b -269 -462 -264 -458 -265 -458 b -284 -466 -274 -464 -279 -466 b -310 -440 -298 -466 -310 -455 l -310 -438 b -288 -398 -310 -430 -308 -430 l -96 -99 l -59 -44 l -59 -43 l -66 -38 b -281 284 -198 33 -281 158 l -281 284 b -133 483 -281 392 -220 474 m 254 177 b 266 179 258 177 262 179 b 319 149 287 179 307 167 b 329 115 326 140 329 127 b 319 79 329 102 326 90 b 268 51 307 61 287 51 b 221 72 250 51 234 58 b 205 115 210 84 205 99 b 254 177 205 142 223 170 m -281 -54 b -269 -52 -277 -52 -273 -52 b -223 -73 -253 -52 -235 -59 b -206 -116 -212 -84 -206 -101 b -216 -151 -206 -129 -209 -141 b -269 -179 -228 -170 -249 -179 b -314 -159 -285 -179 -302 -173 b -330 -116 -325 -147 -330 -131 b -281 -54 -330 -88 -313 -61 "},v8d:{x_min:-1.359375,x_max:255.890625,ha:261,o:"m 118 514 b 127 517 121 517 122 517 b 147 505 136 517 142 513 l 148 502 l 148 403 b 148 306 148 351 148 306 b 174 315 149 306 160 310 l 200 324 l 205 323 b 223 312 213 323 220 319 l 225 308 l 225 260 b 225 245 225 255 225 249 b 220 204 225 208 224 209 b 179 188 216 199 215 199 l 148 177 l 148 124 l 148 70 l 189 84 b 236 98 219 94 230 98 b 247 94 240 98 243 97 b 255 52 254 88 255 87 b 255 33 255 47 255 40 l 254 -12 l 253 -15 b 249 -22 253 -18 250 -20 l 245 -24 l 196 -41 l 148 -58 l 148 -108 b 148 -158 148 -136 148 -158 b 174 -148 148 -158 160 -154 b 204 -140 198 -140 200 -140 l 204 -140 b 224 -152 213 -140 221 -145 b 225 -201 224 -155 225 -177 b 224 -254 225 -226 224 -251 b 157 -284 220 -262 220 -262 l 148 -288 l 148 -395 l 148 -503 l 147 -506 b 127 -519 142 -514 134 -519 b 107 -506 119 -519 111 -514 l 106 -503 l 106 -403 b 106 -303 106 -316 106 -303 b 104 -303 104 -303 104 -303 b 88 -310 104 -303 96 -306 l 63 -319 b 51 -322 59 -320 55 -322 b 36 -315 46 -322 40 -319 b 31 -273 32 -309 31 -312 b 31 -258 31 -269 31 -263 l 31 -210 l 34 -206 b 40 -198 35 -204 38 -199 b 74 -186 42 -197 57 -191 l 106 -173 l 106 -123 b 106 -97 106 -112 106 -104 b 106 -72 106 -76 106 -72 b 104 -72 106 -72 106 -72 b 20 -99 89 -79 23 -99 b 0 -84 10 -99 2 -93 b -1 -37 0 -81 -1 -59 b 0 11 -1 -15 0 9 b 58 40 4 22 2 22 l 106 56 l 106 109 b 106 123 106 115 106 119 b 106 162 106 147 106 162 b 81 155 106 162 93 159 b 50 147 65 149 55 147 b 36 152 43 147 40 148 b 31 194 32 158 31 156 b 31 209 31 198 31 204 l 31 256 l 34 260 b 76 281 38 269 38 269 l 106 292 l 106 396 l 106 502 l 107 505 b 118 514 110 509 114 513 "},v8f:{x_min:-21.78125,x_max:362.0625,ha:369,o:"m 302 1031 b 308 1032 304 1032 307 1032 b 330 1016 318 1032 325 1027 b 362 867 351 970 362 920 b 340 738 362 824 353 780 l 336 727 l 340 717 b 362 591 355 677 362 634 b 257 323 362 496 325 401 b 204 272 243 306 227 290 b 20 56 129 206 66 133 b -1 18 12 44 0 22 b -19 4 -4 9 -12 4 l -21 4 l -21 140 l -21 276 l -12 277 b 167 333 61 288 127 309 b 319 598 262 388 319 491 b 311 664 319 620 317 642 l 310 673 l 304 664 b 204 548 279 620 250 587 b 20 333 129 483 66 409 b -1 292 12 320 0 298 b -19 280 -4 285 -12 280 l -21 280 l -21 416 l -21 552 l -12 553 b 167 609 61 564 127 585 b 319 874 264 666 319 770 b 294 992 319 914 311 954 b 288 1011 288 1004 288 1007 b 302 1031 288 1021 294 1028 "},v90:{x_min:-171.5,x_max:483.1875,ha:493,o:"m -8 631 b -1 632 -6 632 -4 632 b 19 620 8 632 16 628 b 20 495 20 616 20 616 b 20 373 20 427 20 373 b 115 410 20 373 63 390 l 210 448 l 210 531 b 212 620 210 614 210 616 b 231 632 215 628 223 632 b 246 627 236 632 242 631 b 251 541 251 620 251 628 l 251 463 l 315 489 b 387 514 368 509 381 514 b 393 513 390 514 392 514 b 406 494 402 510 406 502 b 397 476 406 487 404 480 b 323 446 396 474 363 462 l 251 417 l 251 283 l 251 148 l 254 151 b 370 199 291 183 332 199 b 415 191 385 199 400 197 b 483 84 458 176 483 134 b 461 0 483 58 476 29 b 332 -142 439 -40 411 -72 l 255 -215 b 231 -229 240 -229 239 -229 b 216 -223 224 -229 220 -227 b 210 -158 210 -217 210 -223 b 210 -120 210 -148 210 -136 l 210 -29 l 205 -34 b 100 -142 182 -65 159 -88 l 23 -215 b -1 -229 9 -229 6 -229 b -19 -217 -9 -229 -16 -224 l -20 -215 l -21 48 l -21 310 l -83 287 b -152 262 -133 266 -145 262 b -157 263 -153 262 -155 262 b -171 283 -166 266 -171 274 b -161 301 -171 290 -167 297 b -91 328 -160 302 -129 315 l -21 356 l -21 487 l -20 617 l -19 621 b -8 631 -17 626 -12 630 m 210 288 b 210 401 210 351 210 401 b 114 365 209 401 167 384 l 20 327 l 20 238 l 20 148 l 21 151 b 140 199 59 183 102 199 b 206 180 164 199 187 192 l 209 177 b 209 177 209 177 209 177 b 210 288 210 177 210 199 m 110 131 b 96 133 106 133 100 133 b 89 133 93 133 91 133 b 24 87 63 129 40 113 l 20 80 l 20 -37 l 20 -156 l 23 -152 b 144 81 96 -72 144 20 l 144 83 b 110 131 144 113 134 126 m 341 131 b 328 133 337 133 332 133 b 322 133 326 133 323 133 b 257 87 296 129 273 113 l 251 80 l 251 -37 l 251 -156 l 255 -152 b 375 81 328 -72 375 20 l 375 83 b 341 131 375 113 367 126 "},v92:{x_min:0,x_max:598.890625,ha:611,o:"m 62 181 b 77 183 66 183 72 183 b 91 181 83 183 88 183 b 202 131 100 180 106 177 l 299 87 l 394 131 b 517 183 499 181 502 183 b 519 183 517 183 518 183 b 598 104 567 183 598 144 b 577 49 598 84 592 65 b 518 15 567 38 563 37 b 484 0 499 6 484 0 b 518 -16 484 -1 499 -8 b 577 -51 563 -38 567 -40 b 598 -105 592 -66 598 -86 b 519 -184 598 -145 567 -184 b 517 -184 518 -184 517 -184 b 394 -133 502 -184 499 -183 l 299 -88 l 202 -133 b 81 -184 99 -183 95 -184 b 77 -184 80 -184 78 -184 b 0 -105 29 -184 0 -145 b 20 -51 0 -86 5 -66 b 80 -16 29 -40 34 -38 b 114 -1 98 -8 114 -1 b 80 15 114 0 98 6 b 20 49 34 37 29 38 b 0 104 6 65 0 84 b 62 181 0 140 23 174 m 88 134 b 74 136 85 134 80 136 b 68 134 72 136 69 136 b 46 104 54 130 46 117 b 55 81 46 95 49 88 b 149 34 59 76 53 80 b 224 -1 190 15 224 0 b 144 -38 224 -1 187 -18 b 54 -84 59 -79 58 -79 b 46 -105 49 -90 46 -98 b 76 -137 46 -122 58 -137 b 78 -137 77 -137 77 -137 b 194 -86 87 -137 76 -141 b 298 -36 250 -58 298 -36 b 298 -36 298 -36 298 -36 b 402 -84 299 -36 345 -58 b 518 -137 522 -141 510 -137 b 521 -137 519 -137 519 -137 b 551 -105 539 -137 551 -122 b 541 -83 551 -98 548 -90 b 447 -36 537 -77 544 -81 b 374 -1 406 -16 374 -1 b 447 34 374 0 406 15 b 541 81 544 80 537 76 b 551 104 548 88 551 97 b 521 136 551 120 539 136 b 518 136 519 136 519 136 b 517 136 518 136 517 136 l 517 136 b 402 83 511 136 511 136 b 298 34 345 56 299 34 b 298 34 298 34 298 34 b 194 84 298 34 250 56 b 88 134 137 111 89 133 "},v93:{x_min:0,x_max:438.28125,ha:447,o:"m 212 205 b 219 205 213 205 216 205 b 239 183 228 205 231 204 b 421 -163 298 40 363 -83 b 438 -191 434 -180 438 -186 b 436 -197 438 -192 438 -195 b 424 -206 434 -204 431 -206 b 406 -201 420 -206 415 -205 b 216 -156 347 -172 281 -156 b 23 -205 148 -156 80 -173 b 14 -206 20 -206 17 -206 b 0 -191 6 -206 0 -201 b 6 -176 0 -187 1 -183 b 202 192 63 -104 142 45 b 212 205 205 199 208 202 m 264 48 l 249 81 l 243 94 l 242 91 b 89 -126 208 36 137 -66 b 81 -138 85 -133 81 -138 b 81 -138 81 -138 81 -138 b 81 -138 81 -138 81 -138 b 95 -133 81 -138 87 -136 b 280 -94 156 -108 221 -94 b 334 -98 299 -94 317 -95 b 343 -99 338 -99 343 -99 b 343 -99 343 -99 343 -99 b 338 -94 343 -99 341 -97 b 264 48 318 -58 287 1 "},v94:{x_min:-149.71875,x_max:148.359375,ha:151,o:"m -9 215 b 0 217 -6 217 -4 217 b 19 205 8 217 14 213 b 20 142 20 202 20 201 l 20 84 l 23 84 b 144 -27 81 74 129 30 b 148 -66 147 -40 148 -54 b 36 -213 148 -134 103 -197 b 0 -219 24 -217 12 -219 b -145 -104 -68 -219 -129 -173 b -149 -68 -148 -91 -149 -79 b -24 84 -149 6 -98 74 l -21 84 l -21 142 b -19 205 -20 201 -20 202 b -9 215 -17 209 -13 213 m -21 -15 b -23 41 -21 37 -21 41 b -23 41 -23 41 -23 41 b -76 11 -35 40 -62 26 b -108 -65 -98 -11 -108 -38 b -1 -176 -108 -122 -65 -176 b 107 -65 63 -176 107 -122 b 74 11 107 -38 96 -11 b 20 41 61 26 32 41 b 20 -15 20 41 20 15 b 19 -74 20 -72 20 -72 b 0 -87 14 -83 6 -87 b -19 -74 -8 -87 -16 -83 b -21 -15 -20 -72 -20 -72 "},v95:{x_min:0,x_max:406.96875,ha:415,o:"m 55 181 b 70 183 61 183 66 183 b 111 170 85 183 99 179 b 160 130 115 167 137 149 l 202 95 l 245 130 b 319 181 299 176 302 179 b 334 183 325 183 330 183 b 406 109 375 183 406 148 b 401 81 406 99 405 91 b 348 24 394 65 390 59 b 318 -1 332 11 318 0 b 348 -26 318 -1 332 -12 b 401 -83 390 -61 394 -66 b 406 -111 405 -93 406 -101 b 334 -184 406 -149 375 -184 b 319 -183 330 -184 325 -184 b 245 -131 302 -180 299 -177 l 202 -97 l 160 -131 b 85 -183 107 -177 103 -180 b 70 -184 80 -184 76 -184 b 0 -111 31 -184 0 -149 b 4 -83 0 -101 1 -93 b 58 -26 10 -66 16 -61 b 88 -1 74 -12 88 -1 b 58 24 88 0 74 11 b 10 69 23 54 17 59 b 0 109 2 81 0 95 b 55 181 0 142 21 173 m 83 133 b 72 136 78 136 76 136 b 57 131 66 136 61 134 b 46 109 49 126 46 117 b 50 93 46 104 47 98 b 107 45 51 91 77 70 b 160 0 137 20 160 0 b 107 -47 160 -1 137 -22 b 50 -94 77 -72 51 -93 b 46 -111 47 -99 46 -105 b 59 -134 46 -120 50 -130 b 72 -137 62 -136 68 -137 b 83 -136 76 -137 80 -136 b 144 -84 84 -134 107 -116 b 202 -36 176 -58 202 -36 b 261 -84 202 -36 230 -58 b 323 -136 299 -116 321 -134 b 334 -137 326 -136 330 -137 b 345 -134 338 -137 343 -136 b 360 -111 355 -130 360 -120 b 355 -94 360 -105 359 -99 b 299 -47 353 -93 329 -72 b 245 0 269 -22 245 -1 b 299 45 245 0 269 20 b 355 93 329 70 353 91 b 360 109 359 98 360 104 b 345 133 360 119 355 129 b 334 136 343 134 338 136 b 323 134 330 136 326 134 b 261 83 321 133 299 115 b 202 34 230 56 202 34 b 144 83 202 34 176 56 b 83 133 106 115 84 133 "},v97:{x_min:-228.671875,x_max:227.3125,ha:232,o:"m -217 487 l -213 488 l 0 488 l 212 488 l 216 487 b 225 476 220 484 224 480 l 227 473 l 227 244 l 227 15 l 225 12 b 206 0 223 4 215 0 b 197 1 204 0 200 0 b 187 12 193 4 189 6 l 186 15 l 186 138 l 186 262 l -1 262 l -187 262 l -187 138 l -187 15 l -189 12 b -208 0 -193 4 -200 0 b -227 12 -216 0 -223 4 l -228 15 l -228 244 l -228 473 l -227 476 b -217 487 -225 480 -221 484 "},v9a:{x_min:-21.78125,x_max:367.5,ha:375,o:"m 230 1031 b 238 1032 232 1032 235 1032 b 259 1014 245 1032 251 1027 b 367 662 330 906 367 782 b 364 602 367 641 367 621 b 232 317 352 488 304 384 b 57 120 155 245 103 187 b -1 18 31 84 6 40 b -19 4 -4 11 -12 4 l -21 4 l -21 159 l -21 315 l -16 315 b 96 335 10 315 62 324 b 315 695 227 380 315 527 b 313 738 315 709 314 724 b 224 991 304 825 273 916 b 216 1013 219 999 216 1007 b 230 1031 216 1021 220 1028 "},v9b:{x_min:-24.5,x_max:313.0625,ha:319,o:"m -24 -133 l -24 -5 l -20 -5 b -1 -19 -12 -5 -4 -11 b 142 -213 13 -61 74 -144 b 258 -376 196 -269 230 -315 b 313 -605 295 -449 313 -528 b 292 -742 313 -652 306 -699 b 288 -752 289 -748 288 -752 b 288 -752 288 -752 288 -752 b 292 -764 289 -753 291 -757 b 313 -907 306 -811 313 -860 b 292 -1045 313 -954 306 -1002 b 288 -1054 289 -1050 288 -1054 b 288 -1054 288 -1054 288 -1054 b 292 -1067 289 -1054 291 -1060 b 313 -1210 306 -1113 313 -1161 b 292 -1346 313 -1257 306 -1304 b 288 -1357 289 -1353 288 -1357 b 288 -1357 288 -1357 288 -1357 b 292 -1368 289 -1357 291 -1363 b 313 -1512 306 -1415 313 -1464 b 292 -1648 313 -1560 306 -1605 b 288 -1660 289 -1654 288 -1660 b 288 -1660 288 -1660 288 -1660 b 292 -1671 289 -1660 291 -1665 b 313 -1814 306 -1719 313 -1766 b 250 -2040 313 -1897 291 -1977 b 232 -2062 238 -2057 236 -2059 b 221 -2065 230 -2063 225 -2065 b 200 -2045 210 -2065 201 -2057 b 200 -2043 200 -2044 200 -2044 b 208 -2026 200 -2037 202 -2034 b 269 -1826 249 -1966 269 -1897 b 153 -1544 269 -1726 230 -1625 b -9 -1472 115 -1506 58 -1481 b -21 -1471 -14 -1471 -19 -1471 l -24 -1471 l -24 -1343 l -24 -1215 l -20 -1215 b -1 -1229 -12 -1215 -4 -1221 b 142 -1424 13 -1270 74 -1353 b 257 -1582 196 -1478 228 -1524 b 264 -1594 261 -1589 264 -1594 l 264 -1594 b 265 -1582 264 -1594 264 -1589 b 270 -1525 268 -1562 270 -1544 b 153 -1243 270 -1424 228 -1321 b -9 -1170 115 -1203 58 -1178 b -21 -1168 -14 -1170 -19 -1168 l -24 -1168 l -24 -1041 l -24 -913 l -20 -913 b -1 -927 -12 -913 -4 -918 b 142 -1121 13 -967 74 -1050 b 257 -1281 196 -1175 228 -1221 b 264 -1292 261 -1286 264 -1292 l 264 -1292 b 265 -1279 264 -1292 264 -1286 b 270 -1222 268 -1261 270 -1242 b 153 -941 270 -1121 228 -1018 b -9 -867 115 -900 58 -875 b -21 -866 -14 -867 -19 -866 l -24 -866 l -24 -738 l -24 -610 l -20 -610 b -1 -624 -12 -610 -4 -616 b 142 -818 13 -664 74 -749 b 257 -978 196 -873 228 -918 b 264 -989 261 -984 264 -989 l 264 -989 b 265 -977 264 -989 264 -984 b 270 -920 268 -959 270 -939 b 153 -638 270 -818 228 -716 b -9 -564 115 -598 58 -573 b -21 -563 -14 -564 -19 -563 l -24 -563 l -24 -435 l -24 -308 l -20 -308 b -1 -322 -12 -308 -4 -313 b 142 -516 13 -363 74 -446 b 257 -675 196 -571 228 -616 b 264 -687 261 -681 264 -687 l 264 -687 b 265 -674 264 -687 264 -681 b 270 -617 268 -656 270 -637 b 153 -335 270 -516 228 -413 b -9 -262 115 -295 58 -270 b -21 -260 -14 -262 -19 -260 l -24 -260 l -24 -133 "},v9c:{x_min:-166.0625,x_max:-25.859375,ha:0,o:"m -49 369 b -42 370 -46 369 -44 370 b -27 360 -36 370 -29 366 b -25 355 -27 359 -25 358 b -32 335 -25 351 -28 347 b -92 52 -66 248 -87 159 b -93 -1 -93 43 -93 20 b -92 -54 -93 -23 -93 -45 b -32 -337 -85 -162 -66 -251 b -25 -355 -27 -349 -25 -352 b -42 -371 -25 -365 -32 -371 b -61 -353 -50 -371 -51 -369 b -163 -63 -119 -262 -153 -165 b -166 -1 -166 -37 -166 -31 b -163 62 -166 30 -166 36 b -61 352 -153 163 -119 260 b -49 369 -54 365 -51 366 "},v9e:{x_min:0,x_max:607.0625,ha:619,o:"m 243 631 b 250 632 246 632 249 632 b 270 620 259 632 268 628 l 272 616 l 272 201 l 272 -212 l 270 -216 b 251 -229 268 -224 259 -229 b 227 -215 243 -229 240 -229 l 151 -142 b 32 -16 81 -80 53 -49 b 0 84 9 18 0 52 b 111 199 0 149 42 199 b 137 197 119 199 127 198 b 228 151 168 191 197 177 l 231 148 l 231 383 b 232 620 231 616 231 616 b 243 631 234 624 238 630 m 168 131 b 152 133 163 133 157 133 b 107 102 130 133 111 120 b 106 86 107 97 106 91 b 111 41 106 73 108 56 b 227 -152 125 -13 171 -90 l 231 -156 l 231 -37 l 231 80 l 225 87 b 168 131 210 111 190 126 m 347 631 b 353 632 348 632 351 632 b 374 620 363 632 371 628 b 375 383 375 616 375 616 l 375 148 l 377 151 b 492 199 415 183 454 199 b 537 191 507 199 522 197 b 607 84 582 176 607 134 b 583 0 607 58 598 29 b 455 -142 562 -40 533 -72 l 378 -215 b 355 -229 364 -229 362 -229 b 334 -216 345 -229 337 -224 l 333 -212 l 333 201 l 333 616 l 334 620 b 347 631 337 624 341 630 m 465 131 b 451 133 461 133 455 133 b 445 133 449 133 446 133 b 379 87 419 129 396 113 l 375 80 l 375 -37 l 375 -156 l 378 -152 b 499 81 451 -72 499 20 l 499 83 b 465 131 499 113 490 126 "},va3:{x_min:58.53125,x_max:228.671875,ha:294,o:"m 138 371 b 142 373 140 371 141 373 b 178 342 149 373 156 366 b 228 251 217 297 228 278 b 228 244 228 248 228 247 b 176 147 227 212 212 184 b 123 73 152 122 132 93 b 121 62 122 70 121 66 b 145 13 121 48 129 31 b 153 -2 151 6 153 1 b 149 -9 153 -5 152 -6 b 144 -11 148 -11 145 -11 b 129 -1 140 -11 136 -8 b 61 87 89 37 68 68 b 58 113 59 95 58 105 b 110 215 58 144 74 177 b 163 287 134 240 155 269 b 166 299 166 291 166 295 b 141 348 166 313 157 330 b 133 360 134 356 133 358 b 133 363 133 362 133 362 b 138 371 133 367 136 370 "},va5:{x_min:0,x_max:349.8125,ha:357,o:"m 88 302 b 103 303 93 302 98 303 b 202 224 149 303 191 270 b 205 199 204 216 205 208 b 178 129 205 173 196 147 l 175 126 l 182 127 b 307 249 236 142 284 190 b 313 259 308 254 311 258 b 329 267 317 265 323 267 b 349 247 340 267 349 259 b 201 -263 349 242 204 -258 b 182 -273 197 -270 190 -273 b 163 -260 174 -273 166 -269 b 161 -256 161 -259 161 -258 b 217 -59 161 -248 170 -220 b 272 129 247 43 272 127 b 272 129 272 129 272 129 b 264 122 272 129 268 126 b 140 80 227 94 183 80 b 36 115 102 80 65 91 b 0 194 10 136 0 165 b 88 302 0 244 32 292 "},va9:{x_min:-24.5,x_max:314.421875,ha:321,o:"m -24 -145 l -24 -5 l -20 -5 b 0 -23 -9 -5 -2 -12 b 27 -87 4 -38 14 -66 b 138 -220 53 -136 88 -177 b 235 -328 179 -255 208 -288 b 314 -592 287 -409 314 -501 b 292 -732 314 -639 307 -687 l 289 -742 l 294 -756 b 314 -896 307 -802 314 -849 b 292 -1035 314 -943 307 -991 l 289 -1045 l 294 -1057 b 314 -1197 307 -1104 314 -1152 b 292 -1338 314 -1246 307 -1292 l 289 -1347 l 294 -1360 b 314 -1500 307 -1407 314 -1454 b 273 -1689 314 -1565 300 -1628 b 250 -1712 265 -1710 261 -1712 b 228 -1691 236 -1712 228 -1704 l 228 -1685 l 234 -1675 b 270 -1507 258 -1621 270 -1564 b 98 -1193 270 -1381 209 -1261 b 40 -1174 76 -1179 58 -1174 b -10 -1189 24 -1174 8 -1178 b -20 -1192 -14 -1192 -16 -1192 l -24 -1192 l -24 -1052 l -24 -913 l -20 -913 b 0 -931 -9 -913 -2 -920 b 27 -995 4 -946 14 -974 b 138 -1128 53 -1043 88 -1085 b 257 -1275 190 -1172 228 -1220 b 262 -1283 259 -1279 262 -1283 l 262 -1283 b 269 -1249 264 -1282 268 -1260 b 270 -1206 270 -1233 270 -1220 b 98 -891 270 -1075 206 -957 b 40 -871 76 -877 58 -871 b -10 -886 24 -871 8 -875 b -20 -889 -14 -889 -16 -889 l -24 -889 l -24 -749 l -24 -610 l -20 -610 b 0 -628 -9 -610 -2 -617 b 27 -692 4 -644 14 -671 b 138 -825 53 -741 88 -782 b 257 -973 190 -870 228 -917 b 262 -981 259 -977 262 -981 l 262 -981 b 269 -946 264 -979 268 -957 b 270 -903 270 -931 270 -917 b 98 -588 270 -774 206 -655 b 40 -569 76 -574 58 -569 b -10 -584 24 -569 8 -574 b -20 -587 -14 -587 -16 -587 l -24 -587 l -24 -448 l -24 -308 l -20 -308 b 0 -326 -9 -308 -2 -315 b 27 -390 4 -341 14 -369 b 138 -523 53 -438 88 -480 b 257 -670 190 -567 228 -614 b 262 -678 259 -674 262 -678 b 262 -678 262 -678 262 -678 b 269 -644 264 -677 268 -656 b 270 -601 270 -628 270 -614 b 98 -285 270 -471 206 -352 b 40 -266 76 -273 58 -266 b -10 -281 24 -266 8 -272 b -20 -284 -14 -284 -16 -284 l -24 -284 l -24 -145 "},vaa:{x_min:-1.359375,x_max:752.703125,ha:768,o:"m 490 985 b 504 986 495 986 500 986 b 604 907 551 986 593 954 b 607 884 607 900 607 892 b 581 813 607 857 597 831 l 578 810 l 583 811 b 710 932 638 827 687 873 b 714 943 711 936 713 942 b 730 952 720 949 725 952 b 752 931 741 952 752 943 b 200 -946 752 927 204 -941 b 182 -957 197 -953 190 -957 b 163 -945 174 -957 166 -953 b 161 -939 161 -942 161 -942 b 217 -743 161 -931 170 -904 b 272 -555 247 -639 272 -555 b 272 -555 272 -555 272 -555 b 264 -560 272 -555 268 -557 b 140 -603 227 -589 182 -603 b 36 -567 102 -603 65 -592 b -1 -487 12 -548 -1 -517 b 17 -427 -1 -466 5 -445 b 103 -380 38 -395 70 -380 b 191 -433 137 -380 172 -398 b 205 -484 201 -448 205 -466 b 178 -553 205 -509 196 -535 l 175 -557 l 182 -555 b 307 -435 236 -539 284 -494 b 372 -213 308 -430 372 -215 b 372 -213 372 -213 372 -213 b 364 -219 372 -213 368 -216 b 240 -262 328 -247 283 -262 b 137 -226 202 -262 166 -249 b 99 -145 112 -206 99 -176 b 118 -84 99 -124 106 -104 b 204 -38 138 -54 171 -38 b 292 -91 238 -38 273 -56 b 306 -141 302 -106 306 -124 b 279 -212 306 -167 296 -194 l 276 -215 l 281 -213 b 408 -93 336 -198 385 -151 b 473 129 409 -88 473 127 b 473 129 473 129 473 129 b 465 122 473 129 469 126 b 341 80 428 94 383 80 b 236 115 303 80 266 91 b 200 195 213 136 200 165 b 217 256 200 217 206 238 b 304 303 239 287 272 303 b 393 249 338 303 374 285 b 406 199 402 234 406 217 b 379 129 406 173 397 148 l 377 126 l 382 127 b 509 248 436 142 485 190 b 574 470 510 254 574 469 b 574 470 574 470 574 470 b 566 464 574 470 570 467 b 442 421 529 435 484 421 b 337 458 404 421 367 433 b 300 538 314 477 300 508 b 318 598 300 559 306 580 b 404 645 340 630 372 645 b 494 592 439 645 475 627 b 507 541 502 577 507 559 b 480 471 507 516 498 489 l 477 467 l 483 470 b 608 589 537 485 586 531 b 675 811 611 595 675 810 b 675 811 675 811 675 811 b 666 806 675 811 671 809 b 543 763 628 777 585 763 b 438 799 504 763 468 775 b 401 878 412 820 401 849 b 490 985 401 928 434 977 "},vab:{x_min:0,x_max:272.21875,ha:278,o:"m 243 631 b 250 632 246 632 249 632 b 270 620 259 632 268 628 l 272 616 l 272 201 l 272 -212 l 270 -216 b 251 -229 268 -224 259 -229 b 227 -215 243 -229 240 -229 l 151 -142 b 32 -16 81 -80 53 -49 b 0 84 9 18 0 52 b 111 199 0 149 42 199 b 137 197 119 199 127 198 b 228 151 168 191 197 177 l 231 148 l 231 383 b 232 620 231 616 231 616 b 243 631 234 624 238 630 m 168 131 b 152 133 163 133 157 133 b 107 102 130 133 111 120 b 106 86 107 97 106 91 b 111 41 106 73 108 56 b 227 -152 125 -13 171 -90 l 231 -156 l 231 -37 l 231 80 l 225 87 b 168 131 210 111 190 126 "},vad:{x_min:0,x_max:873.828125,ha:892,o:"m 0 0 l 0 703 l 81 703 l 164 703 l 164 0 l 164 -705 l 81 -705 l 0 -705 l 0 0 m 225 0 l 225 703 l 246 703 l 268 703 l 268 366 l 268 30 l 274 36 b 314 79 284 44 302 63 b 413 302 357 137 392 213 b 432 327 419 324 421 327 b 449 306 443 327 447 322 b 611 115 457 195 529 115 b 651 122 624 115 638 117 b 728 316 705 140 724 188 b 729 388 728 342 729 366 b 671 635 729 533 711 602 b 581 662 649 652 616 662 b 477 637 545 662 510 653 l 475 635 l 477 634 b 503 627 488 632 495 631 b 545 556 532 612 545 584 b 491 480 545 524 526 491 b 465 474 481 476 473 474 b 379 563 417 474 379 516 b 389 602 379 576 382 588 b 541 691 409 641 479 681 b 582 694 555 692 568 694 b 865 462 714 694 834 598 b 873 392 871 440 873 416 b 865 317 873 367 871 341 b 639 84 839 194 748 101 b 612 83 630 83 620 83 b 511 116 577 83 543 94 b 504 120 509 119 506 120 b 504 120 504 120 504 120 b 469 59 504 120 488 93 l 432 -1 l 469 -61 b 504 -122 488 -94 504 -122 b 504 -122 504 -122 504 -122 b 511 -117 506 -122 509 -120 b 612 -84 543 -95 577 -84 b 665 -91 630 -84 647 -87 b 869 -338 771 -122 850 -216 b 873 -392 872 -356 873 -374 b 798 -595 873 -469 847 -539 b 581 -695 741 -662 660 -695 b 406 -626 517 -695 454 -671 b 381 -563 389 -607 381 -585 b 465 -477 381 -519 413 -477 b 545 -559 514 -477 545 -519 b 503 -628 545 -587 532 -613 b 477 -635 495 -632 488 -634 l 475 -637 l 477 -638 b 581 -663 510 -655 545 -663 b 671 -637 616 -663 649 -653 b 729 -391 711 -603 729 -534 b 728 -317 729 -367 728 -344 b 623 -117 722 -173 698 -124 b 611 -116 619 -116 615 -116 b 449 -308 528 -116 457 -198 b 432 -328 447 -323 443 -328 b 413 -303 421 -328 419 -326 b 314 -80 392 -215 357 -138 b 274 -37 302 -65 284 -45 l 268 -31 l 268 -367 l 268 -705 l 246 -705 l 225 -705 l 225 0 "},vb1:{x_min:78.9375,x_max:485.921875,ha:417,o:"m 362 378 b 378 380 367 380 372 380 b 472 348 415 380 453 367 b 485 315 481 338 485 327 b 462 273 485 298 477 281 b 439 267 454 269 446 267 b 398 290 424 267 409 274 b 344 319 385 309 364 319 b 281 269 315 319 289 301 b 279 262 280 266 279 262 b 276 256 279 260 277 258 b 274 249 276 254 274 251 b 238 127 273 248 257 192 b 201 4 217 61 201 5 b 166 -1 198 -1 200 -1 b 153 -1 163 -1 157 -1 b 141 -1 148 -1 144 -1 b 104 4 106 -1 107 -1 b 104 6 104 5 104 5 b 142 144 104 13 110 34 b 182 278 164 219 181 276 b 183 288 182 281 182 285 b 185 302 185 292 185 298 b 164 330 185 317 176 328 b 159 330 163 330 161 330 b 102 302 140 330 119 320 b 91 294 95 295 93 294 b 88 294 91 294 89 294 b 78 303 83 294 78 298 b 81 312 78 306 78 309 b 200 373 106 347 160 373 b 215 371 205 373 209 371 b 266 335 235 367 254 353 b 269 331 268 333 269 331 b 269 331 269 331 269 331 b 273 335 269 331 270 334 b 362 378 298 359 330 376 "},vb3:{x_min:0,x_max:227.3125,ha:232,o:"m 91 213 b 100 215 93 215 96 215 b 227 58 167 215 224 144 b 227 52 227 56 227 54 b 61 -201 227 -43 164 -138 b 29 -216 44 -212 36 -216 b 23 -210 27 -216 24 -213 b 21 -205 21 -208 21 -206 b 34 -192 21 -201 25 -197 b 122 -55 89 -161 122 -106 b 104 6 122 -33 117 -12 l 103 9 l 96 9 b 4 79 57 9 17 38 b 0 112 1 90 0 101 b 91 213 0 163 36 209 "},vb4:{x_min:-597.53125,x_max:596.171875,ha:608,o:"m -533 324 b -525 327 -530 326 -528 327 b -504 305 -514 327 -504 317 b -504 305 -504 305 -504 305 b -513 284 -504 299 -504 299 b -556 112 -541 226 -556 167 b -545 33 -556 84 -552 58 b -524 -20 -541 15 -532 -9 l -522 -23 l -491 15 l -413 111 b -355 174 -367 169 -363 174 b -351 174 -353 174 -352 174 b -254 86 -343 174 -348 179 b -168 -1 -208 37 -168 -1 b -100 84 -168 -1 -137 37 b -23 173 -28 173 -29 172 b -19 174 -21 174 -20 174 b -8 173 -14 174 -10 173 b 80 86 -5 172 13 151 b 166 -1 127 37 166 -1 b 235 84 166 -1 197 37 b 311 173 306 173 304 172 b 317 174 313 174 314 174 b 326 173 319 174 323 173 b 490 11 329 172 366 134 l 502 -1 l 530 34 b 568 76 560 72 563 74 b 575 77 570 77 573 77 b 596 56 586 77 596 68 b 594 48 596 54 596 51 b 417 -172 592 41 424 -166 b 405 -176 415 -174 409 -176 b 396 -174 401 -176 398 -176 b 307 -87 393 -173 372 -152 b 221 -1 259 -38 221 -1 b 152 -86 221 -1 190 -38 b 76 -176 81 -174 83 -173 b 70 -176 74 -176 73 -176 b 61 -174 66 -176 62 -174 b -27 -87 58 -173 38 -152 b -114 -1 -74 -38 -112 -1 b -182 -86 -114 -1 -145 -38 b -258 -176 -253 -174 -253 -173 b -264 -176 -259 -176 -262 -176 b -274 -174 -268 -176 -272 -174 b -438 -11 -277 -173 -348 -102 l -449 0 l -479 -37 b -524 -80 -513 -80 -514 -80 l -524 -80 b -553 -52 -534 -80 -540 -74 b -597 109 -583 -8 -597 48 b -560 280 -597 165 -585 224 b -533 324 -548 310 -540 322 "},vb6:{x_min:0,x_max:556.6875,ha:568,o:"m 289 545 b 298 546 292 545 295 546 b 318 533 306 546 315 541 b 319 428 319 530 319 528 l 319 327 l 334 327 b 526 223 412 326 485 285 b 543 172 537 206 543 190 b 447 76 543 122 503 76 b 445 76 446 76 446 76 b 359 165 394 77 359 119 b 368 205 359 179 362 192 b 441 251 382 233 412 251 b 455 249 446 251 451 251 b 460 248 458 249 460 248 b 460 248 460 248 460 248 b 454 254 460 249 458 251 b 334 295 419 280 378 294 l 319 295 l 319 4 l 319 -287 l 321 -285 b 328 -285 322 -285 325 -285 b 524 -99 424 -277 507 -198 b 541 -79 526 -84 530 -79 b 556 -97 551 -79 556 -84 b 548 -133 556 -105 553 -117 b 334 -317 521 -233 434 -306 b 322 -319 329 -317 323 -317 l 319 -319 l 319 -424 b 319 -471 319 -444 319 -459 b 313 -541 319 -544 318 -535 b 298 -548 308 -545 303 -548 b 279 -534 289 -548 281 -542 b 277 -424 277 -531 277 -530 l 277 -317 l 273 -317 b 13 -95 153 -305 51 -217 b 0 2 4 -62 0 -29 b 182 295 0 126 66 238 b 274 324 210 309 249 320 l 277 324 l 277 427 b 279 533 277 528 277 530 b 289 545 281 538 285 542 m 277 2 b 277 291 277 161 277 291 b 268 288 277 291 273 290 b 144 1 179 265 144 184 b 276 -284 144 -199 175 -267 l 277 -285 l 277 2 "},vb7:{x_min:-176.9375,x_max:251.8125,ha:257,o:"m -8 631 b -1 632 -6 632 -4 632 b 19 620 8 632 16 628 b 20 503 20 616 20 614 b 20 391 20 442 20 391 b 84 424 20 391 49 406 l 147 456 l 152 456 b 153 456 153 456 153 456 b 175 435 166 456 175 446 b 172 427 175 433 174 430 b 92 380 170 420 172 421 l 20 342 l 20 245 l 20 148 l 21 151 b 137 199 59 183 99 199 b 182 191 152 199 167 197 b 251 84 227 176 251 134 b 228 0 251 58 243 29 b 100 -142 206 -40 178 -72 l 23 -215 b 0 -229 9 -229 6 -229 b -20 -216 -9 -229 -17 -224 b -21 54 -21 -212 -21 -212 b -21 322 -21 201 -21 322 b -85 290 -21 322 -50 308 l -148 256 l -153 256 b -155 256 -155 256 -155 256 b -176 277 -167 256 -176 266 b -174 285 -176 280 -175 283 b -93 333 -171 294 -174 292 l -21 370 l -21 494 b -20 620 -21 616 -21 616 b -8 631 -17 624 -13 630 m 110 131 b 96 133 106 133 100 133 b 89 133 93 133 91 133 b 24 87 63 129 40 113 l 20 80 l 20 -37 l 20 -156 l 23 -152 b 144 81 96 -72 144 20 l 144 83 b 110 131 144 113 134 126 "},vb9:{x_min:-122.5,x_max:121.140625,ha:124,o:"m -16 145 b 0 147 -10 147 -5 147 b 121 -1 66 147 121 77 b 114 -49 121 -16 118 -33 b -1 -148 95 -112 47 -148 b -85 -106 -31 -148 -61 -134 b -122 -1 -110 -76 -122 -38 b -16 145 -122 68 -81 134 m 12 111 b 0 113 8 113 4 113 b -68 22 -29 113 -61 73 b -70 0 -69 15 -70 6 b -13 -113 -70 -49 -47 -98 b -1 -115 -9 -115 -5 -115 b 63 -40 24 -115 53 -83 b 68 -1 66 -27 68 -15 b 12 111 68 48 46 97 "},vba:{x_min:-118.421875,x_max:597.53125,ha:381,o:"m 460 574 b 464 574 461 574 462 574 b 488 574 470 574 481 574 b 500 573 491 574 498 574 b 594 503 543 570 588 538 b 597 488 596 498 597 494 b 528 417 597 449 564 417 b 502 423 519 417 510 419 b 465 481 477 434 465 458 b 488 528 465 499 472 516 b 490 530 490 530 490 530 b 490 530 490 530 490 530 b 468 517 488 530 475 523 b 349 340 419 485 377 420 b 347 330 348 334 347 330 b 383 328 347 328 363 328 b 428 326 423 328 424 328 b 442 302 438 320 442 312 b 430 281 442 294 438 285 b 385 276 424 277 426 276 l 377 276 l 332 276 l 330 269 b 178 -117 303 126 250 -9 b 1 -249 129 -194 69 -237 b -20 -251 -6 -251 -13 -251 b -114 -187 -65 -251 -100 -227 b -118 -156 -117 -177 -118 -166 b -51 -84 -118 -116 -91 -84 b -31 -87 -46 -84 -39 -86 b 16 -152 0 -95 16 -124 b -12 -205 16 -173 8 -194 b -16 -208 -14 -206 -16 -208 b -14 -208 -16 -208 -14 -208 b -9 -206 -14 -208 -12 -208 b 74 -124 23 -197 54 -166 b 172 224 98 -79 125 22 b 185 276 178 252 183 274 b 185 276 185 276 185 276 b 141 276 185 276 181 276 b 91 280 96 276 96 276 b 77 302 83 285 77 294 b 91 326 77 312 83 320 b 148 328 95 328 96 328 l 198 330 l 202 341 b 460 574 249 473 351 566 "},vbf:{x_min:-53.078125,x_max:513.140625,ha:485,o:"m 185 383 b 196 384 187 383 191 384 b 277 334 230 384 259 365 b 288 301 281 324 288 306 b 288 297 288 298 288 297 b 294 302 289 297 291 299 b 394 370 323 338 367 367 b 404 371 398 370 401 371 b 510 272 453 371 498 328 b 513 237 513 262 513 251 b 507 172 513 217 511 192 b 326 -34 487 59 412 -26 b 314 -36 322 -36 318 -36 b 274 -24 298 -36 283 -31 l 265 -16 b 224 44 246 -1 232 20 b 223 49 224 47 223 49 b 223 49 223 49 223 49 b 149 -197 221 48 149 -194 b 149 -198 149 -197 149 -198 b 170 -210 149 -202 155 -205 b 187 -215 174 -210 175 -212 b 204 -231 201 -219 204 -222 b 197 -245 204 -240 202 -242 l 194 -248 l 76 -248 l -42 -248 l -46 -245 b -53 -231 -51 -242 -53 -240 b -35 -215 -53 -222 -49 -217 b -13 -210 -21 -212 -20 -212 b -6 -208 -10 -209 -8 -208 b 0 -206 -6 -208 -2 -206 b 25 -188 13 -201 21 -195 b 163 280 28 -183 163 276 b 166 291 163 283 164 287 b 167 302 167 295 167 299 b 155 324 167 315 161 324 b 155 324 155 324 155 324 b 65 230 125 322 85 280 b 53 215 61 217 58 215 b 51 215 53 215 51 215 b 42 224 46 215 42 217 b 57 263 42 231 47 244 b 140 360 77 305 104 337 b 152 370 144 365 149 369 b 185 383 157 376 172 381 m 374 306 b 366 308 371 308 368 308 b 300 273 348 308 321 294 b 284 254 288 262 287 259 b 280 242 283 249 281 245 b 257 169 279 240 270 213 l 236 98 l 236 93 b 251 48 238 77 243 61 b 279 27 258 37 272 27 b 281 27 279 27 280 27 b 291 31 281 27 287 30 b 396 170 334 52 378 109 b 406 247 402 197 406 224 b 401 277 406 259 405 270 b 374 306 397 290 383 303 "},vc3:{x_min:-10.890625,x_max:299.4375,ha:294,o:"m 136 460 b 142 462 137 462 140 462 b 166 449 152 462 161 456 b 171 428 168 446 168 445 b 288 131 194 322 238 209 b 298 115 295 120 296 117 b 299 106 298 112 299 109 b 273 81 299 91 287 81 b 255 86 268 81 261 83 b 155 116 225 104 183 116 l 152 116 l 149 108 b 141 83 148 102 144 91 b 134 48 137 69 134 58 b 149 9 134 34 140 24 b 153 -1 152 5 153 1 b 149 -9 153 -5 152 -6 b 144 -11 148 -11 147 -11 b 122 2 138 -11 133 -6 b 95 61 104 20 95 38 b 107 108 95 74 99 90 b 108 113 107 111 108 112 b 107 113 108 113 108 113 b 102 113 106 113 104 113 b 31 86 76 108 53 98 b 14 80 24 81 20 80 b -10 106 0 80 -10 91 b 0 131 -10 115 -9 116 b 115 430 49 209 91 317 b 136 460 119 451 123 456 "},vd0:{x_min:-10.890625,x_max:299.4375,ha:294,o:"m 44 174 b 51 174 47 174 49 174 b 68 173 55 174 61 174 l 287 112 l 551 40 b 615 20 617 22 609 23 b 626 0 622 16 626 8 b 615 -22 626 -9 622 -18 b 613 -23 613 -23 613 -23 b 613 -23 613 -23 613 -23 b 287 -113 613 -24 597 -29 l 68 -174 b 53 -176 61 -176 57 -176 b 39 -172 47 -176 43 -174 b 27 -151 31 -167 27 -159 b 39 -129 27 -141 31 -133 b 230 -74 43 -124 20 -131 l 370 -36 l 468 -9 b 498 0 484 -4 498 -1 b 468 8 498 0 484 2 l 370 34 l 230 73 b 40 126 28 129 43 124 b 27 149 31 131 27 140 b 44 174 27 161 34 170 m 205 110 l 205 300 b 205 330 245 330 245 300 l 245 300 l 245 -300 b 245 -330 205 -330 205 -300 l 205 -300 l 205 110 l 345 90 m 345 90 l 345 330 b 345 360 385 360 385 330 l 385 330 l 385 -270 b 385 -300 345 -300 345 -270 l 345 -270 l 345 90 "},vd1:{x_min:-20,x_max:320,ha:257,o:"m -8 200 b -8 210 8 200 16 200 l 20 148 -199 l 23 -615 b 0 -629 9 -629 6 -629 l -21 -612 l -21 -201 l -21 216 l -20 200 m 16 200 l 310 0 l 240 0 l 16 140 l 16 -120 l 240 0 l 310 0 l 16 -200 "},vd2:{x_min:0,x_max:430.75,ha:386,o:"m 0 200 l 0 -200 l 430 -200 l 430 200 l 0 200 "},vd3:{x_min:0,x_max:430.75,ha:386,o:"m 0 200 l 0 -200 l 430 -200 l 430 200 l 0 200 l 50 150 l 380 150 l 380 -150 l 50 -150 l 50 150 "},vd4:{x_min:0,x_max:430.75,ha:360,o:"m 0 150 l 0 -150 l 430 -150 l 430 150 l 0 150 "},vd5:{x_min:0,x_max:430.75,ha:360,o:"m 0 150 l 0 -150 l 430 -150 l 430 150 l 0 150 l 50 100 l 380 100 l 380 -100 l 50 -100 l 50 100"},vd6:{x_min:0,x_max:430.75,ha:360,o:"m -146 537 b -138 538 -143 538 -141 538 b -118 525 -129 538 -121 533 b -117 390 -117 522 -117 521 b -115 259 -117 268 -117 259 b -115 259 -115 259 -115 259 b -59 272 -104 263 -62 272 b -39 259 -50 272 -42 267 b -37 209 -38 257 -37 233 b -39 159 -37 185 -38 162 b -85 138 -43 149 -44 149 l -117 131 l -117 21 b -115 -88 -117 -80 -117 -88 b -115 -88 -115 -88 -115 -88 b -59 -75 -104 -84 -62 -75 b -44 -81 -52 -75 -48 -77 b -38 -124 -38 -87 -38 -85 b -38 -138 -38 -124 -38 -138 b -38 -152 -38 -138 -38 -152 b -44 -195 -38 -191 -38 -190 b -85 -209 -48 -200 -48 -200 l -117 -217 l -117 -349 b -118 -486 -117 -481 -117 -482 b -138 -499 -121 -494 -129 -499 b -153 -493 -143 -499 -149 -497 b -159 -415 -158 -487 -159 -496 b -159 -355 -159 -398 -159 -379 b -159 -227 -159 -284 -159 -227 b -205 -238 -159 -227 -180 -232 b -250 -249 -230 -244 -250 -249 b -251 -386 -251 -249 -251 -311 b -252 -525 -251 -521 -251 -522 b -272 -538 -255 -534 -264 -538 b -287 -532 -277 -538 -283 -536 b -293 -452 -292 -527 -293 -536 b -293 -391 -293 -436 -293 -415 b -294 -260 -293 -269 -293 -260 b -294 -260 -294 -260 -294 -260 b -348 -272 -306 -264 -345 -272 b -368 -259 -357 -272 -365 -267 b -369 -209 -369 -257 -369 -233 b -368 -159 -369 -185 -369 -162 b -323 -139 -364 -149 -362 -148 l -293 -131 l -293 -22 b -294 87 -293 80 -293 87 b -294 87 -294 87 -294 87 b -348 75 -306 84 -345 75 b -368 88 -357 75 -365 80 b -369 138 -369 91 -369 114 b -368 188 -369 162 -369 186 b -323 209 -364 198 -362 199 l -293 216 l -293 349 b -292 486 -293 481 -293 482 b -272 499 -288 494 -280 499 b -257 493 -266 499 -261 497 b -251 414 -251 487 -251 496 b -251 354 -251 398 -251 378 b -251 226 -251 284 -251 226 b -205 238 -250 226 -230 231 b -159 249 -180 244 -159 249 b -159 385 -159 249 -159 310 b -157 525 -159 521 -159 522 b -146 537 -156 530 -151 535 z m -159 11 b -159 120 -159 98 -159 120 l -159 120 b -175 116 -160 120 -167 119 b -221 105 -184 114 -204 109 l -251 98 l -251 -12 b -251 -121 -251 -72 -251 -121 b -205 -110 -250 -121 -230 -116 b -159 -99 -180 -104 -159 -99 b -159 11 -159 -99 -159 -49 z m 89 517 b 97 519 92 518 94 519 b 117 505 106 519 114 513 b 119 376 119 502 119 501 l 119 249 l 145 258 b 176 267 169 266 172 267 b 177 267 176 267 177 267 b 196 255 186 267 192 263 l 197 252 l 197 205 b 197 181 197 195 197 187 b 193 149 197 153 197 153 b 152 131 190 144 187 143 l 119 120 l 119 10 b 119 -100 119 -62 119 -100 b 145 -91 120 -100 131 -96 b 173 -82 159 -86 171 -82 b 176 -81 174 -81 175 -81 b 196 -94 185 -81 193 -87 b 198 -151 197 -97 198 -125 b 197 -194 198 -172 197 -192 b 153 -218 193 -203 192 -204 l 119 -230 l 119 -367 l 118 -504 l 117 -507 b 97 -519 113 -514 105 -519 b 82 -512 92 -519 87 -517 b 76 -434 77 -507 76 -516 b 76 -374 76 -418 76 -398 b 76 -245 76 -303 76 -245 b 52 -254 76 -245 65 -249 b 19 -263 34 -260 25 -263 b 6 -257 13 -263 10 -261 b 0 -214 0 -251 0 -253 b 0 -200 0 -210 0 -205 b 0 -188 0 -196 0 -192 b 6 -143 0 -147 0 -149 b 46 -126 10 -139 10 -139 l 76 -115 l 76 -5 b 76 106 76 56 76 106 b 51 98 76 106 64 102 b 18 89 34 92 25 89 b 6 95 13 89 10 91 b 0 139 0 101 0 99 b 0 153 0 143 0 148 b 0 179 0 163 0 172 b 44 225 0 215 3 211 l 76 236 l 76 369 b 78 505 76 501 76 502 b 89 517 80 510 85 515 z "},vd7:{x_min:0,x_max:430.75,ha:360,o:"m 283 633 b 291 634 286 634 289 634 b 311 621 300 634 308 629 b 313 505 313 618 313 617 b 313 393 313 443 313 393 b 378 425 313 393 343 407 l 443 458 l 448 458 b 449 458 449 458 449 458 b 471 437 462 458 471 448 b 469 429 471 434 470 432 b 387 382 466 421 469 423 l 313 344 l 313 247 l 313 150 l 315 152 b 433 201 353 184 394 201 b 479 193 448 201 464 198 b 549 86 524 177 549 135 b 526 1 549 59 541 29 b 395 -143 504 -39 475 -71 b 316 -214 351 -182 341 -191 b 292 -229 302 -228 300 -229 b 272 -216 283 -229 275 -224 b 271 55 271 -212 271 -212 b 270 323 271 203 270 323 b 205 291 270 323 241 308 l 140 258 l 135 258 b 134 258 135 258 134 258 b 112 279 121 258 112 267 b 114 287 112 281 113 284 b 196 334 117 295 114 293 l 271 371 l 271 495 b 272 621 271 617 271 618 b 283 633 274 626 279 631 z m 404 133 b 391 134 400 134 395 134 b 384 134 388 134 386 134 b 318 88 358 130 335 114 l 313 81 l 313 -37 l 313 -156 l 316 -152 b 439 83 391 -71 439 22 l 439 84 b 404 133 439 115 430 128 z m -8 633 l -8 633 b 0 634 -6 634 -3 634 b 20 621 8 634 17 629 b 21 384 21 618 21 617 l 21 150 l 24 152 b 141 201 62 184 102 201 b 187 193 157 201 172 198 b 257 86 232 177 257 135 b 234 1 257 59 250 29 b 103 -143 212 -39 183 -71 b 24 -214 60 -182 49 -191 b 0 -229 10 -228 8 -229 b -20 -216 -9 -229 -17 -224 l -21 -212 l -21 203 l -21 618 l -20 621 b -8 633 -18 626 -13 631 z m 113 133 l 113 133 b 99 134 109 134 103 134 b 93 134 97 134 94 134 b 26 88 66 130 43 114 l 21 81 l 21 -37 l 21 -156 l 25 -152 b 148 83 99 -71 148 22 l 148 84 b 113 133 148 115 138 128 z "}},cssFontWeight:"normal",ascender:1903,underlinePosition:-125,cssFontStyle:"normal",boundingBox:{yMin:-2065.375,xMin:-695.53125,yMax:1901.578125,xMax:1159.671875},resolution:1e3,descender:-2066,familyName:"VexFlow-18",lineHeight:4093,underlineThickness:50};function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function C(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function N(t,e,n){return e&&C(t.prototype,e),n&&C(t,n),t}function I(t,e){return(I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t,e,n,i,r,o){var s,a,u,l=0;function c(){return e+t[l++]*i}function h(){return n+t[l++]*r}for(;l<t.length;)switch(s=t[l++]){case"m":case"l":o[s](c(),h());break;case"q":a=c(),u=h(),o.q(c(),h(),a,u);break;case"b":a=c(),u=h(),o.b(c(),h(),c(),h(),a,u)}}var O=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e){return!e||"object"!==T(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,M(e).call(this))).setAttribute("type","Glyph"),r.code=t,r.point=n,r.options={cache:!0,font:L},r.metrics=null,r.x_shift=0,r.y_shift=0,r.originShift={x:0,y:0},i?r.setOptions(i):r.reset(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&I(t,e)}(e,t),N(e,null,[{key:"loadMetrics",value:function(t,e,n){var i=t.glyphs[e];if(!i)throw new h.RERR("BadGlyph","Glyph ".concat(e," does not exist in font."));var r,o=i.x_min,s=i.x_max,a=i.ha;if(i.o)return n?i.cached_outline?r=i.cached_outline:(r=i.o.split(" "),i.cached_outline=r):(i.cached_outline&&delete i.cached_outline,r=i.o.split(" ")),{x_min:o,x_max:s,ha:a,outline:r};throw new h.RERR("BadGlyph","Glyph ".concat(e," has no outline defined."))}},{key:"renderGlyph",value:function(t,n,i,r,o,s){var a=72*r/(100*L.resolution),u=e.loadMetrics(L,o,!s);e.renderOutline(t,u.outline,a,n,i)}},{key:"renderOutline",value:function(t,e,n,i,r){t.beginPath(),t.moveTo(i,r),R(e,i,r,n,-n,{m:t.moveTo.bind(t),l:t.lineTo.bind(t),q:t.quadraticCurveTo.bind(t),b:t.bezierCurveTo.bind(t)}),t.fill()}},{key:"getOutlineBoundingBox",value:function(t,e,n,i){var r=new k;return R(t,n,i,e,-e,{m:r.addPoint.bind(r),l:r.addPoint.bind(r),q:r.addQuadraticCurve.bind(r),b:r.addBezierCurve.bind(r)}),new A(r.x1,r.y1,r.width(),r.height())}}]),N(e,[{key:"setOptions",value:function(t){h.Merge(this.options,t),this.reset()}},{key:"setPoint",value:function(t){return this.point=t,this}},{key:"setStave",value:function(t){return this.stave=t,this}},{key:"setXShift",value:function(t){return this.x_shift=t,this}},{key:"setYShift",value:function(t){return this.y_shift=t,this}},{key:"reset",value:function(){this.scale=72*this.point/(100*this.options.font.resolution),this.metrics=e.loadMetrics(this.options.font,this.code,this.options.cache),this.bbox=e.getOutlineBoundingBox(this.metrics.outline,this.scale,0,0)}},{key:"getMetrics",value:function(){if(!this.metrics)throw new h.RuntimeError("BadGlyph","Glyph ".concat(this.code," is not initialized."));return{x_min:this.metrics.x_min*this.scale,x_max:this.metrics.x_max*this.scale,width:this.bbox.getW(),height:this.bbox.getH()}}},{key:"setOriginX",value:function(t){var e=this.bbox,n=(t-Math.abs(e.getX()/e.getW()))*e.getW();this.originShift.x=-n}},{key:"setOriginY",value:function(t){var e=this.bbox,n=(t-Math.abs(e.getY()/e.getH()))*e.getH();this.originShift.y=-n}},{key:"setOrigin",value:function(t,e){this.setOriginX(t),this.setOriginY(e)}},{key:"render",value:function(t,n,i){if(!this.metrics)throw new h.RuntimeError("BadGlyph","Glyph ".concat(this.code," is not initialized."));var r=this.metrics.outline,o=this.scale;this.setRendered(),this.applyStyle(t),e.renderOutline(t,r,o,n+this.originShift.x,i+this.originShift.y),this.restoreStyle(t)}},{key:"renderToStave",value:function(t){if(this.checkContext(),!this.metrics)throw new h.RuntimeError("BadGlyph","Glyph ".concat(this.code," is not initialized."));if(!this.stave)throw new h.RuntimeError("GlyphError","No valid stave");var n=this.metrics.outline,i=this.scale;this.setRendered(),this.applyStyle(),e.renderOutline(this.context,n,i,t+this.x_shift,this.stave.getYForGlyphs()+this.y_shift),this.restoreStyle()}}]),e}(x);function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var B={STEM_WIDTH:1.5,STEM_HEIGHT:35,STAVE_LINE_THICKNESS:1,RESOLUTION:16384,DEFAULT_NOTATION_FONT_SCALE:39,DEFAULT_TABLATURE_FONT_SCALE:39,SLASH_NOTEHEAD_WIDTH:15,TEXT_HEIGHT_OFFSET_HACK:1,IsKerned:!0};function D(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function j(t,e,n){return e&&D(t.prototype,e),n&&D(t,n),t}B.clefProperties=function(t){if(!t)throw new h.RERR("BadArgument","Invalid clef: "+t);var e=B.clefProperties.values[t];if(!e)throw new h.RERR("BadArgument","Invalid clef: "+t);return e},B.clefProperties.values={treble:{line_shift:0},bass:{line_shift:6},tenor:{line_shift:4},alto:{line_shift:3},soprano:{line_shift:1},percussion:{line_shift:0},"mezzo-soprano":{line_shift:2},"baritone-c":{line_shift:5},"baritone-f":{line_shift:5},subbass:{line_shift:7},french:{line_shift:-1}},B.keyProperties=function(t,e,n){void 0===e&&(e="treble");var i={octave_shift:0};"object"===F(n)&&h.Merge(i,n);var r=t.split("/");if(r.length<2)throw new h.RERR("BadArguments","Key must have note + octave and an optional glyph: ".concat(t));var o=r[0].toUpperCase(),s=B.keyProperties.note_values[o];if(!s)throw new h.RERR("BadArguments","Invalid key name: "+o);s.octave&&(r[1]=s.octave);var a=parseInt(r[1],10),u=(7*(a+=-1*i.octave_shift)-28+s.index)/2,l=0;(u+=B.clefProperties(e).line_shift)<=0&&2*u%2==0&&(l=1),u>=6&&2*u%2==0&&(l=-1);var c=void 0!==s.int_val?12*a+s.int_val:null,f=s.code,d=s.shift_right;if(r.length>2&&r[2]){var p=r[2].toUpperCase(),m=B.keyProperties.note_glyph[p];m&&(f=m.code,d=m.shift_right)}return{key:o,octave:a,line:u,int_value:c,accidental:s.accidental,code:f,stroke:l,shift_right:d,displaced:!1}},B.keyProperties.note_values={C:{index:0,int_val:0,accidental:null},CN:{index:0,int_val:0,accidental:"n"},"C#":{index:0,int_val:1,accidental:"#"},"C##":{index:0,int_val:2,accidental:"##"},CB:{index:0,int_val:-1,accidental:"b"},CBB:{index:0,int_val:-2,accidental:"bb"},D:{index:1,int_val:2,accidental:null},DN:{index:1,int_val:2,accidental:"n"},"D#":{index:1,int_val:3,accidental:"#"},"D##":{index:1,int_val:4,accidental:"##"},DB:{index:1,int_val:1,accidental:"b"},DBB:{index:1,int_val:0,accidental:"bb"},E:{index:2,int_val:4,accidental:null},EN:{index:2,int_val:4,accidental:"n"},"E#":{index:2,int_val:5,accidental:"#"},"E##":{index:2,int_val:6,accidental:"##"},EB:{index:2,int_val:3,accidental:"b"},EBB:{index:2,int_val:2,accidental:"bb"},F:{index:3,int_val:5,accidental:null},FN:{index:3,int_val:5,accidental:"n"},"F#":{index:3,int_val:6,accidental:"#"},"F##":{index:3,int_val:7,accidental:"##"},FB:{index:3,int_val:4,accidental:"b"},FBB:{index:3,int_val:3,accidental:"bb"},G:{index:4,int_val:7,accidental:null},GN:{index:4,int_val:7,accidental:"n"},"G#":{index:4,int_val:8,accidental:"#"},"G##":{index:4,int_val:9,accidental:"##"},GB:{index:4,int_val:6,accidental:"b"},GBB:{index:4,int_val:5,accidental:"bb"},A:{index:5,int_val:9,accidental:null},AN:{index:5,int_val:9,accidental:"n"},"A#":{index:5,int_val:10,accidental:"#"},"A##":{index:5,int_val:11,accidental:"##"},AB:{index:5,int_val:8,accidental:"b"},ABB:{index:5,int_val:7,accidental:"bb"},B:{index:6,int_val:11,accidental:null},BN:{index:6,int_val:11,accidental:"n"},"B#":{index:6,int_val:12,accidental:"#"},"B##":{index:6,int_val:13,accidental:"##"},BB:{index:6,int_val:10,accidental:"b"},BBB:{index:6,int_val:9,accidental:"bb"},R:{index:6,int_val:9,rest:!0},X:{index:6,accidental:"",octave:4,code:"v3e",shift_right:5.5}},B.keyProperties.note_glyph={D0:{code:"v27",shift_right:-.5},D1:{code:"v2d",shift_right:-.5},D2:{code:"v22",shift_right:-.5},D3:{code:"v70",shift_right:-.5},T0:{code:"v49",shift_right:-2,stem_up_y_offset:-4,stem_down_y_offset:4},T1:{code:"v93",shift_right:.5,stem_up_y_offset:-4,stem_down_y_offset:4},T2:{code:"v40",shift_right:.5,stem_up_y_offset:-4,stem_down_y_offset:4},T3:{code:"v7d",shift_right:.5,stem_up_y_offset:-4,stem_down_y_offset:4},X0:{code:"v92",shift_right:-2,stem_up_y_offset:4,stem_down_y_offset:4},X1:{code:"v95",shift_right:-.5,stem_up_y_offset:4,stem_down_y_offset:4},X2:{code:"v3e",shift_right:.5,stem_up_y_offset:4,stem_down_y_offset:4},X3:{code:"v3b",shift_right:-2,stem_up_y_offset:2,stem_down_y_offset:2},S1:{code:"vd3",shift_right:0},S2:{code:"vd2",shift_right:0},R1:{code:"vd5",shift_right:0},R2:{code:"vd4",shift_right:0}},B.integerToNote=function(t){if(void 0===t)throw new h.RERR("BadArguments","Undefined integer for integerToNote");if(t<-2)throw new h.RERR("BadArguments","integerToNote requires integer > -2: ".concat(t));var e=B.integerToNote.table[t];if(!e)throw new h.RERR("BadArguments","Unknown note value for integer: ".concat(t));return e},B.integerToNote.table={0:"C",1:"C#",2:"D",3:"D#",4:"E",5:"F",6:"F#",7:"G",8:"G#",9:"A",10:"A#",11:"B"},B.tabToGlyph=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=null,i=0,r=0;if("X"===t.toString().toUpperCase()){var o=new O("v7f",B.DEFAULT_TABLATURE_FONT_SCALE).getMetrics();n="v7f",i=o.width,r=-o.height/2}else i=B.textWidth(t.toString());return{text:t,code:n,getWidth:function(){return i*e},shift_y:r}},B.textWidth=function(t){return 7*t.toString().length},B.articulationCodes=function(t){return B.articulationCodes.articulations[t]},B.articulationCodes.articulations={"a.":{code:"v23",between_lines:!0},av:{code:"v28",between_lines:!0},"a>":{code:"v42",between_lines:!0},"a-":{code:"v25",between_lines:!0},"a^":{code:"va",between_lines:!1},"a+":{code:"v8b",between_lines:!1},ao:{code:"v94",between_lines:!1},ah:{code:"vb9",between_lines:!1},"a@a":{code:"v43",between_lines:!1},"a@u":{code:"v5b",between_lines:!1},"a|":{code:"v75",between_lines:!1},am:{code:"v97",between_lines:!1},"a,":{code:"vb3",between_lines:!1}},B.accidentalCodes=function(t){return B.accidentalCodes.accidentals[t]},B.accidentalCodes.accidentals={"#":{code:"v18",parenRightPaddingAdjustment:-1},"##":{code:"v7f",parenRightPaddingAdjustment:-1},b:{code:"v44",parenRightPaddingAdjustment:-2},bb:{code:"v26",parenRightPaddingAdjustment:-2},n:{code:"v4e",parenRightPaddingAdjustment:-1},"{":{code:"v9c",parenRightPaddingAdjustment:-1},"}":{code:"v84",parenRightPaddingAdjustment:-1},db:{code:"v9e",parenRightPaddingAdjustment:-1},d:{code:"vab",parenRightPaddingAdjustment:0},bbs:{code:"v90",parenRightPaddingAdjustment:-1},"++":{code:"v51",parenRightPaddingAdjustment:-1},"+":{code:"v78",parenRightPaddingAdjustment:-1},"+-":{code:"v8d",parenRightPaddingAdjustment:-1},"++-":{code:"v7a",parenRightPaddingAdjustment:-1},bs:{code:"vb7",parenRightPaddingAdjustment:-1},bss:{code:"v39",parenRightPaddingAdjustment:-1},o:{code:"vd0",parenRightPaddingAdjustment:-1},k:{code:"vd1",parenRightPaddingAdjustment:-1},ashs:{code:"vd6",parenRightPaddingAdjustment:-1},afhf:{code:"vd7",parenRightPaddingAdjustment:-1}},B.accidentalColumnsTable={1:{a:[1],b:[1]},2:{a:[1,2]},3:{a:[1,3,2],b:[1,2,1],second_on_bottom:[1,2,3]},4:{a:[1,3,4,2],b:[1,2,3,1],spaced_out_tetrachord:[1,2,1,2]},5:{a:[1,3,5,4,2],b:[1,2,4,3,1],spaced_out_pentachord:[1,2,3,2,1],very_spaced_out_pentachord:[1,2,1,2,1]},6:{a:[1,3,5,6,4,2],b:[1,2,4,5,3,1],spaced_out_hexachord:[1,3,2,1,3,2],very_spaced_out_hexachord:[1,2,1,2,1,2]}},B.ornamentCodes=function(t){return B.ornamentCodes.ornaments[t]},B.ornamentCodes.ornaments={mordent:{code:"v1e"},mordent_inverted:{code:"v45"},turn:{code:"v72"},turn_inverted:{code:"v33"},tr:{code:"v1f"},upprall:{code:"v60"},downprall:{code:"vb4"},prallup:{code:"v6d"},pralldown:{code:"v2c"},upmordent:{code:"v29"},downmordent:{code:"v68"},lineprall:{code:"v20"},prallprall:{code:"v86"}},B.keySignature=function(t){var e=B.keySignature.keySpecs[t];if(!e)throw new h.RERR("BadKeySignature","Bad key signature spec: '".concat(t,"'"));if(!e.acc)return[];for(var n=B.keySignature.accidentalList(e.acc),i=[],r=0;r<e.num;++r)i.push({type:e.acc,line:n[r]});return i},B.keySignature.keySpecs={C:{acc:null,num:0},Am:{acc:null,num:0},F:{acc:"b",num:1},Dm:{acc:"b",num:1},Bb:{acc:"b",num:2},Gm:{acc:"b",num:2},Eb:{acc:"b",num:3},Cm:{acc:"b",num:3},Ab:{acc:"b",num:4},Fm:{acc:"b",num:4},Db:{acc:"b",num:5},Bbm:{acc:"b",num:5},Gb:{acc:"b",num:6},Ebm:{acc:"b",num:6},Cb:{acc:"b",num:7},Abm:{acc:"b",num:7},G:{acc:"#",num:1},Em:{acc:"#",num:1},D:{acc:"#",num:2},Bm:{acc:"#",num:2},A:{acc:"#",num:3},"F#m":{acc:"#",num:3},E:{acc:"#",num:4},"C#m":{acc:"#",num:4},B:{acc:"#",num:5},"G#m":{acc:"#",num:5},"F#":{acc:"#",num:6},"D#m":{acc:"#",num:6},"C#":{acc:"#",num:7},"A#m":{acc:"#",num:7}},B.unicode={sharp:String.fromCharCode(parseInt("266F",16)),flat:String.fromCharCode(parseInt("266D",16)),natural:String.fromCharCode(parseInt("266E",16)),triangle:String.fromCharCode(parseInt("25B3",16)),"o-with-slash":String.fromCharCode(parseInt("00F8",16)),degrees:String.fromCharCode(parseInt("00B0",16)),circle:String.fromCharCode(parseInt("25CB",16))},B.keySignature.accidentalList=function(t){return{b:[2,.5,2.5,1,3,1.5,3.5],"#":[0,1.5,-.5,1,2.5,.5,2]}[t]},B.parseNoteDurationString=function(t){if("string"!=typeof t)return null;var e=/(\d*\/?\d+|[a-z])(d*)([nrhms]|$)/.exec(t);if(!e)return null;var n=e[3];return 0===n.length&&(n="n"),{duration:e[1],dots:e[2].length,type:n}},B.parseNoteData=function(t){var e=B.parseNoteDurationString(t.duration);if(!e)return null;var n=B.durationToTicks(e.duration);if(null==n)return null;var i=t.type;if(i){if("n"!==i&&"r"!==i&&"h"!==i&&"m"!==i&&"s"!==i)return null}else{if(i=e.type,void 0!==t.keys){var r=t.keys[0].split("/");r&&3===r.length&&(i=r[2])}i||(i="n")}var o=t.dots?t.dots:e.dots;if("number"!=typeof o)return null;for(var s=n,a=0;a<o;a++){if(s<=1)return null;n+=s/=2}return{duration:e.duration,type:i,dots:o,ticks:n}},B.sanitizeDuration=function(t){var e=B.durationAliases[t];if(void 0!==e&&(t=e),void 0===B.durationToTicks.durations[t])throw new h.RERR("BadArguments","The provided duration is not valid: ".concat(t));return t},B.durationToFraction=function(t){return(new p).parse(B.sanitizeDuration(t))},B.durationToNumber=function(t){return B.durationToFraction(t).value()},B.durationToTicks=function(t){t=B.sanitizeDuration(t);var e=B.durationToTicks.durations[t];return void 0===e?null:e},B.durationToTicks.durations={"1/2":2*B.RESOLUTION,1:B.RESOLUTION/1,2:B.RESOLUTION/2,4:B.RESOLUTION/4,8:B.RESOLUTION/8,16:B.RESOLUTION/16,32:B.RESOLUTION/32,64:B.RESOLUTION/64,128:B.RESOLUTION/128,256:B.RESOLUTION/256},B.durationAliases={w:"1",h:"2",q:"4",b:"256"},B.durationToGlyph=function(t,e){t=B.sanitizeDuration(t);var n=B.durationToGlyph.duration_codes[t];if(void 0===n)return null;e||(e="n");var i=n.type[e];if(void 0===i){var r=B.keyProperties.note_glyph[e.toUpperCase()];if(void 0===r)return null;i={code_head:r.code,stem_up_y_offset:r.stem_up_y_offset,stem_down_y_offset:r.stem_down_y_offset}}return h.Merge(h.Merge({},n.common),i)},B.durationToGlyph.duration_codes={"1/2":{common:{getWidth:function(){return new O(this.code_head||"v53",arguments.length>0&&void 0!==arguments[0]?arguments[0]:B.DEFAULT_NOTATION_FONT_SCALE).getMetrics().width},stem:!1,stem_offset:0,flag:!1,stem_up_extension:-B.STEM_HEIGHT,stem_down_extension:-B.STEM_HEIGHT,tabnote_stem_up_extension:-B.STEM_HEIGHT,tabnote_stem_down_extension:-B.STEM_HEIGHT,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"v53"},h:{code_head:"v59"},m:{code_head:"vf",stem_offset:0},r:{code_head:"v31",rest:!0,position:"B/5",dot_shiftY:.5},s:{getWidth:function(){return B.SLASH_NOTEHEAD_WIDTH},position:"B/4"}}},1:{common:{getWidth:function(){return new O(this.code_head||"v1d",arguments.length>0&&void 0!==arguments[0]?arguments[0]:B.DEFAULT_NOTATION_FONT_SCALE).getMetrics().width},stem:!1,stem_offset:0,flag:!1,stem_up_extension:-B.STEM_HEIGHT,stem_down_extension:-B.STEM_HEIGHT,tabnote_stem_up_extension:-B.STEM_HEIGHT,tabnote_stem_down_extension:-B.STEM_HEIGHT,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"v1d"},h:{code_head:"v46"},m:{code_head:"v92",stem_offset:-3},r:{code_head:"v5c",rest:!0,position:"D/5",dot_shiftY:.5},s:{getWidth:function(){return B.SLASH_NOTEHEAD_WIDTH},position:"B/4"}}},2:{common:{getWidth:function(){return new O(this.code_head||"v81",arguments.length>0&&void 0!==arguments[0]?arguments[0]:B.DEFAULT_NOTATION_FONT_SCALE).getMetrics().width},stem:!0,stem_offset:0,flag:!1,stem_up_extension:0,stem_down_extension:0,tabnote_stem_up_extension:0,tabnote_stem_down_extension:0,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"v81"},h:{code_head:"v2d"},m:{code_head:"v95",stem_offset:-3},r:{code_head:"vc",stem:!1,rest:!0,position:"B/4",dot_shiftY:-.5},s:{getWidth:function(){return B.SLASH_NOTEHEAD_WIDTH},position:"B/4"}}},4:{common:{getWidth:function(){return new O(this.code_head||"vb",arguments.length>0&&void 0!==arguments[0]?arguments[0]:B.DEFAULT_NOTATION_FONT_SCALE).getMetrics().width},stem:!0,stem_offset:0,flag:!1,stem_up_extension:0,stem_down_extension:0,tabnote_stem_up_extension:0,tabnote_stem_down_extension:0,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e",stem_offset:-3},r:{code_head:"v7c",stem:!1,rest:!0,position:"B/4",dot_shiftY:-.5,line_above:1.5,line_below:1.5},s:{getWidth:function(){return B.SLASH_NOTEHEAD_WIDTH},position:"B/4"}}},8:{common:{getWidth:function(){return new O(this.code_head||"vb",arguments.length>0&&void 0!==arguments[0]?arguments[0]:B.DEFAULT_NOTATION_FONT_SCALE).getMetrics().width},stem:!0,stem_offset:0,flag:!0,beam_count:1,code_flag_upstem:"v54",code_flag_downstem:"v9a",stem_up_extension:0,stem_down_extension:0,tabnote_stem_up_extension:0,tabnote_stem_down_extension:0,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e"},r:{code_head:"va5",stem:!1,flag:!1,rest:!0,position:"B/4",dot_shiftY:-.5,line_above:1,line_below:1},s:{getWidth:function(){return B.SLASH_NOTEHEAD_WIDTH},position:"B/4"}}},16:{common:{beam_count:2,getWidth:function(){return new O(this.code_head||"vb",arguments.length>0&&void 0!==arguments[0]?arguments[0]:B.DEFAULT_NOTATION_FONT_SCALE).getMetrics().width},stem:!0,stem_offset:0,flag:!0,code_flag_upstem:"v3f",code_flag_downstem:"v8f",stem_up_extension:0,stem_down_extension:0,tabnote_stem_up_extension:0,tabnote_stem_down_extension:0,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e"},r:{code_head:"v3c",stem:!1,flag:!1,rest:!0,position:"B/4",dot_shiftY:-.5,line_above:1,line_below:2},s:{getWidth:function(){return B.SLASH_NOTEHEAD_WIDTH},position:"B/4"}}},32:{common:{beam_count:3,getWidth:function(){return new O(this.code_head||"vb",arguments.length>0&&void 0!==arguments[0]?arguments[0]:B.DEFAULT_NOTATION_FONT_SCALE).getMetrics().width},stem:!0,stem_offset:0,flag:!0,code_flag_upstem:"v47",code_flag_downstem:"v2a",stem_up_extension:9,stem_down_extension:9,tabnote_stem_up_extension:8,tabnote_stem_down_extension:5,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e"},r:{code_head:"v55",stem:!1,flag:!1,rest:!0,position:"B/4",dot_shiftY:-1.5,line_above:2,line_below:2},s:{getWidth:function(){return B.SLASH_NOTEHEAD_WIDTH},position:"B/4"}}},64:{common:{beam_count:4,getWidth:function(){return new O(this.code_head||"vb",arguments.length>0&&void 0!==arguments[0]?arguments[0]:B.DEFAULT_NOTATION_FONT_SCALE).getMetrics().width},stem:!0,stem_offset:0,flag:!0,code_flag_upstem:"va9",code_flag_downstem:"v58",stem_up_extension:13,stem_down_extension:13,tabnote_stem_up_extension:12,tabnote_stem_down_extension:9,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e"},r:{code_head:"v38",stem:!1,flag:!1,rest:!0,position:"B/4",dot_shiftY:-1.5,line_above:2,line_below:3},s:{getWidth:function(){return B.SLASH_NOTEHEAD_WIDTH},position:"B/4"}}},128:{common:{beam_count:5,getWidth:function(){return new O(this.code_head||"vb",arguments.length>0&&void 0!==arguments[0]?arguments[0]:B.DEFAULT_NOTATION_FONT_SCALE).getMetrics().width},stem:!0,stem_offset:0,flag:!0,code_flag_upstem:"v9b",code_flag_downstem:"v30",stem_up_extension:22,stem_down_extension:22,tabnote_stem_up_extension:21,tabnote_stem_down_extension:18,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e"},r:{code_head:"vaa",stem:!1,flag:!1,rest:!0,position:"B/4",dot_shiftY:1.5,line_above:3,line_below:3},s:{getWidth:function(){return B.SLASH_NOTEHEAD_WIDTH},position:"B/4"}}}},B.smufl={},B.smufl.to_code_points={bracketTop:"v1b",bracketBottom:"v10",barlineTick:"v6f",segno:"v8c",coda:"v4d",gClef:"v83",cClef:"vad",fClef:"v79",unpitchedPercussionClef1:"v59","6stringTabClef":"v2f",timeSig0:"v0",timeSig1:"v1",timeSig2:"v2",timeSig3:"v3",timeSig4:"v4",timeSig5:"v5",timeSig6:"v6",timeSig7:"v7",timeSig8:"v8",timeSig9:"v9",timeSigCommon:"v41",timeSigCutCommon:"vb6",noteheadDoubleWhole:"v53",noteheadWhole:"v1d",noteheadHalf:"v81",noteheadBlack:"vb",noteheadXWhole:"v92",noteheadXHalf:"v95",noteheadXBlack:"v3e",noteheadCircleX:"v3b",noteheadTriangleUpWhole:"v49",noteheadTriangleUpHalf:"v93",noteheadTriangleUpBlack:"v40",noteheadDiamondWhole:"v46",noteheadDiamondHalf:"v2d",noteheadDiamondBlack:"v22",augmentationDot:"v23",tremolo1:"v74",flag8thUp:"v54",flag8thDown:"v9a",flag16thUp:"v3f",flag16thDown:"v8f",flag32ndUp:"v47",flag32ndDown:"v2a",flag64thUp:"va9",flag64thDown:"v58",flag128thUp:"v9b",flag128thDown:"v30",accidentalFlat:"v44",accidentalNatural:"v4e",accidentalSharp:"v18",accidentalDoubleSharp:"v7f",accidentalDoubleFlat:"v26",accidentalParensLeft:"v9c",accidentalParensRight:"v84",accidentalQuarterToneFlatStein:"vab",accidentalThreeQuarterTonesFlatZimmermann:"v9e",accidentalQuarterToneSharpStein:"v78",accidentalThreeQuarterTonesSharpStein:"v51",accidentalBuyukMucennebFlat:"v39",accidentalBakiyeFlat:"vb7",accidentalKomaSharp:"v51",accidentalKucukMucennebSharp:"v8d",accidentalKoron:"vd1",accidentalSori:"vd0",articAccentAbove:"v42",articAccentBelow:"v42",articTenutoAbove:"v25",articTenutoBelow:"v25",articStaccatoAbove:"v23",articStaccatoBelow:"v23",articStaccatissimoAbove:"v28",articMarcatoAbove:"va",fermataAbove:"v43",fermataBelow:"v5b",breathMarkComma:"v6c",breathMarkUpbow:"v8a",caesura:"v34",caesuraCurved:"v4b",restMaxima:"v59",restDoubleWhole:"v31",restWhole:"v5c",restHalf:"vc",restQuarter:"v7c",rest8th:"va5",rest16th:"v3c",rest32nd:"v55",rest64th:"v38",rest128th:"vaa",dynamicPiano:"vbf",dynamicMezzo:"v62",dynamicForte:"vba",dynamicRinforzando:"vba",dynamicSforzando:"v4a",dynamicZ:"v80",ornamentTrill:"v1f",ornamentTurn:"v72",ornamentTurnSlash:"v33",ornamentMordent:"v45",ornamentMordentInverted:"v1e",ornamentTremblement:"v86",ornamentPrecompAppoggTrill:"v20",ornamentPrecompSlideTrillDAnglebert:"v60",ornamentPrecompSlideTrillBach:"v29",ornamentPrecompTrillSuffixDandrieu:"v6d",ornamentPrecompDoubleCadenceUpperPrefix:"vb4",ornamentPrecompDoubleCadenceUpperPrefixTurn:"v68",ornamentPrecompTrillLowerSuffix:"v2c",stringsDownBow:"v94",stringsUpBow:"v75",stringsHarmonic:"vb9",pluckedSnapPizzicatoAbove:"v94",pluckedLeftHandPizzicato:"v8b",keyboardPedalPed:"v36",keyboardPedalUp:"v5d",pictChokeCymbal:"vb3",wiggleArpeggiatoUp:"va3",arrowheadBlackUp:"vc3",arrowheadBlackDown:"v52"},B.TIME4_4={num_beats:4,beat_value:4,resolution:B.RESOLUTION};var V=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vexFlowCanvasContext=e,this.canvas=e.canvas?e.canvas:{width:t.WIDTH,height:t.HEIGHT}}return j(t,null,[{key:"WIDTH",get:function(){return 600}},{key:"HEIGHT",get:function(){return 400}}]),j(t,[{key:"clear",value:function(){this.vexFlowCanvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"openGroup",value:function(){}},{key:"closeGroup",value:function(){}},{key:"add",value:function(){}},{key:"setFont",value:function(t,e,n){return this.vexFlowCanvasContext.font=(n||"")+" "+e+"pt "+t,this}},{key:"setRawFont",value:function(t){return this.vexFlowCanvasContext.font=t,this}},{key:"setFillStyle",value:function(t){return this.vexFlowCanvasContext.fillStyle=t,this}},{key:"setBackgroundFillStyle",value:function(t){return this.background_fillStyle=t,this}},{key:"setStrokeStyle",value:function(t){return this.vexFlowCanvasContext.strokeStyle=t,this}},{key:"setShadowColor",value:function(t){return this.vexFlowCanvasContext.shadowColor=t,this}},{key:"setShadowBlur",value:function(t){return this.vexFlowCanvasContext.shadowBlur=t,this}},{key:"setLineWidth",value:function(t){return this.vexFlowCanvasContext.lineWidth=t,this}},{key:"setLineCap",value:function(t){return this.vexFlowCanvasContext.lineCap=t,this}},{key:"setLineDash",value:function(t){return this.vexFlowCanvasContext.lineDash=t,this}},{key:"scale",value:function(t,e){return this.vexFlowCanvasContext.scale(parseFloat(t),parseFloat(e))}},{key:"resize",value:function(t,e){return this.vexFlowCanvasContext.resize(parseInt(t,10),parseInt(e,10))}},{key:"rect",value:function(t,e,n,i){return this.vexFlowCanvasContext.rect(t,e,n,i)}},{key:"fillRect",value:function(t,e,n,i){return this.vexFlowCanvasContext.fillRect(t,e,n,i)}},{key:"clearRect",value:function(t,e,n,i){return this.vexFlowCanvasContext.clearRect(t,e,n,i)}},{key:"beginPath",value:function(){return this.vexFlowCanvasContext.beginPath()}},{key:"moveTo",value:function(t,e){return this.vexFlowCanvasContext.moveTo(t,e)}},{key:"lineTo",value:function(t,e){return this.vexFlowCanvasContext.lineTo(t,e)}},{key:"bezierCurveTo",value:function(t,e,n,i,r,o){return this.vexFlowCanvasContext.bezierCurveTo(t,e,n,i,r,o)}},{key:"quadraticCurveTo",value:function(t,e,n,i){return this.vexFlowCanvasContext.quadraticCurveTo(t,e,n,i)}},{key:"arc",value:function(t,e,n,i,r,o){return this.vexFlowCanvasContext.arc(t,e,n,i,r,o)}},{key:"glow",value:function(){return this.vexFlowCanvasContext.glow()}},{key:"fill",value:function(){return this.vexFlowCanvasContext.fill()}},{key:"stroke",value:function(){return this.vexFlowCanvasContext.stroke()}},{key:"closePath",value:function(){return this.vexFlowCanvasContext.closePath()}},{key:"measureText",value:function(t){return this.vexFlowCanvasContext.measureText(t)}},{key:"fillText",value:function(t,e,n){return this.vexFlowCanvasContext.fillText(t,e,n)}},{key:"save",value:function(){return this.vexFlowCanvasContext.save()}},{key:"restore",value:function(){return this.vexFlowCanvasContext.restore()}}]),t}(),G=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.paper=Raphael(e),this.path="",this.pen={x:0,y:0},this.lineWidth=1,this.state={scale:{x:1,y:1},font_family:"Arial",font_size:8,font_weight:800},this.attributes={"stroke-width":.3,fill:"black",stroke:"black",font:"10pt Arial"},this.background_attributes={"stroke-width":0,fill:"white",stroke:"white",font:"10pt Arial"},this.shadow_attributes={width:0,color:"black"},this.state_stack=[]}var e;return(e=[{key:"openGroup",value:function(){}},{key:"closeGroup",value:function(){}},{key:"add",value:function(){}},{key:"setFont",value:function(t,e,n){return this.state.font_family=t,this.state.font_size=e,this.state.font_weight=n,this.attributes.font=(this.state.font_weight||"")+" "+this.state.font_size*this.state.scale.x+"pt "+this.state.font_family,this}},{key:"setRawFont",value:function(t){return this.attributes.font=t,this}},{key:"setFillStyle",value:function(t){return this.attributes.fill=t,this}},{key:"setBackgroundFillStyle",value:function(t){return this.background_attributes.fill=t,this.background_attributes.stroke=t,this}},{key:"setStrokeStyle",value:function(t){return this.attributes.stroke=t,this}},{key:"setShadowColor",value:function(t){return this.shadow_attributes.color=t,this}},{key:"setShadowBlur",value:function(t){return this.shadow_attributes.width=t,this}},{key:"setLineWidth",value:function(t){this.attributes["stroke-width"]=t,this.lineWidth=t}},{key:"setLineDash",value:function(){return this}},{key:"setLineCap",value:function(){return this}},{key:"scale",value:function(t,e){return this.state.scale={x:t,y:e},this.attributes.transform="S"+t+","+e+",0,0",this.attributes.scale=t+","+e+",0,0",this.attributes.font=this.state.font_size*this.state.scale.x+"pt "+this.state.font_family,this.background_attributes.transform="S"+t+","+e+",0,0",this.background_attributes.font=this.state.font_size*this.state.scale.x+"pt "+this.state.font_family,this}},{key:"clear",value:function(){this.paper.clear()}},{key:"resize",value:function(t,e){return this.element.style.width=t,this.paper.setSize(t,e),this}},{key:"setViewBox",value:function(t){this.paper.canvas.setAttribute("viewBox",t)}},{key:"rect",value:function(t,e,n,i){return i<0&&(e+=i,i=-i),this.paper.rect(t,e,n-.5,i-.5).attr(this.attributes).attr("fill","none").attr("stroke-width",this.lineWidth),this}},{key:"fillRect",value:function(t,e,n,i){return i<0&&(e+=i,i=-i),this.paper.rect(t,e,n-.5,i-.5).attr(this.attributes),this}},{key:"clearRect",value:function(t,e,n,i){return i<0&&(e+=i,i=-i),this.paper.rect(t,e,n-.5,i-.5).attr(this.background_attributes),this}},{key:"beginPath",value:function(){return this.path="",this.pen.x=0,this.pen.y=0,this}},{key:"moveTo",value:function(t,e){return this.path+="M"+t+","+e,this.pen.x=t,this.pen.y=e,this}},{key:"lineTo",value:function(t,e){return this.path+="L"+t+","+e,this.pen.x=t,this.pen.y=e,this}},{key:"bezierCurveTo",value:function(t,e,n,i,r,o){return this.path+="C"+t+","+e+","+n+","+i+","+r+","+o,this.pen.x=r,this.pen.y=o,this}},{key:"quadraticCurveTo",value:function(t,e,n,i){return this.path+="Q"+t+","+e+","+n+","+i,this.pen.x=n,this.pen.y=i,this}},{key:"arc",value:function(t,e,n,i,r,o){function s(t){for(;t<0;)t+=2*Math.PI;for(;t>2*Math.PI;)t-=2*Math.PI;return t}if((i=s(i))>(r=s(r))){var a=i;i=r,r=a,o=!o}var u=r-i;return u>Math.PI?(this.arcHelper(t,e,n,i,i+u/2,o),this.arcHelper(t,e,n,i+u/2,r,o)):this.arcHelper(t,e,n,i,r,o),this}},{key:"arcHelper",value:function(t,e,n,i,r,o){var s=t+n*Math.cos(i),a=e+n*Math.sin(i),u=t+n*Math.cos(r),l=e+n*Math.sin(r),c=0,h=0;o?(h=1,r-i<Math.PI&&(c=1)):r-i>Math.PI&&(c=1),this.path+="M"+s+","+a+",A"+n+","+n+",0,"+c+","+h+","+u+","+l+"M"+this.pen.x+","+this.pen.y}},{key:"glow",value:function(){var t=this.paper.set();if(this.shadow_attributes.width>0)for(var e=this.shadow_attributes,n=e.width/2,i=1;i<=n;i++)t.push(this.paper.path(this.path).attr({stroke:e.color,"stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(e.width/n*i).toFixed(3),opacity:+((e.opacity||.3)/n).toFixed(3),transform:this.attributes.transform,scale:this.attributes.scale}));return t}},{key:"fill",value:function(){var t=this.paper.path(this.path).attr(this.attributes).attr("stroke-width",0);return this.glow(t),this}},{key:"stroke",value:function(){var t=this.lineWidth*(this.state.scale.x+this.state.scale.y)/2,e=this.paper.path(this.path).attr(this.attributes).attr("fill","none").attr("stroke-width",t);return this.glow(e),this}},{key:"closePath",value:function(){return this.path+="Z",this}},{key:"measureText",value:function(t){var e=this.paper.text(0,0,t).attr(this.attributes).attr("fill","none").attr("stroke","none"),n=e.getBBox();return e.remove(),{width:n.width,height:n.height}}},{key:"fillText",value:function(t,e,n){return this.paper.text(e+this.measureText(t).width/2,n-this.state.font_size/(2.25*this.state.scale.y),t).attr(this.attributes),this}},{key:"save",value:function(){return this.state_stack.push({state:{font_family:this.state.font_family},attributes:{font:this.attributes.font,fill:this.attributes.fill,stroke:this.attributes.stroke,"stroke-width":this.attributes["stroke-width"]},shadow_attributes:{width:this.shadow_attributes.width,color:this.shadow_attributes.color}}),this}},{key:"restore",value:function(){var t=this.state_stack.pop();return this.state.font_family=t.state.font_family,this.attributes.font=t.attributes.font,this.attributes.fill=t.attributes.fill,this.attributes.stroke=t.attributes.stroke,this.attributes["stroke-width"]=t.attributes["stroke-width"],this.shadow_attributes.width=t.shadow_attributes.width,this.shadow_attributes.color=t.shadow_attributes.color,this}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}(),U={path:{x:!0,y:!0,width:!0,height:!0},rect:{},text:{width:!0,height:!0}},z={"font-family":!0,"font-weight":!0,"font-style":!0,"font-size":!0};h.Merge(U.rect,z),h.Merge(U.path,z);var W=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.svgNS="http://www.w3.org/2000/svg";var n=this.create("svg");this.element.appendChild(n),this.svg=n,this.groups=[this.svg],this.parent=this.svg,this.path="",this.pen={x:NaN,y:NaN},this.lineWidth=1,this.state={scale:{x:1,y:1},"font-family":"Arial","font-size":"8pt","font-weight":"normal"},this.attributes={"stroke-width":.3,fill:"black",stroke:"black","stroke-dasharray":"none","font-family":"Arial","font-size":"10pt","font-weight":"normal","font-style":"normal"},this.background_attributes={"stroke-width":0,fill:"white",stroke:"white","stroke-dasharray":"none","font-family":"Arial","font-size":"10pt","font-weight":"normal","font-style":"normal"},this.shadow_attributes={width:0,color:"black"},this.state_stack=[],this.iePolyfill()}var e;return(e=[{key:"create",value:function(t){return document.createElementNS(this.svgNS,t)}},{key:"openGroup",value:function(t,e,n){var i=this.create("g");return this.groups.push(i),this.parent.appendChild(i),this.parent=i,t&&i.setAttribute("class",h.Prefix(t)),e&&i.setAttribute("id",h.Prefix(e)),n&&n.pointerBBox&&i.setAttribute("pointer-events","bounding-box"),i}},{key:"closeGroup",value:function(){this.groups.pop(),this.parent=this.groups[this.groups.length-1]}},{key:"add",value:function(t){this.parent.appendChild(t)}},{key:"iePolyfill",value:function(){"undefined"!=typeof navigator&&(this.ie=/MSIE 9/i.test(navigator.userAgent)||/MSIE 10/i.test(navigator.userAgent)||/rv:11\.0/i.test(navigator.userAgent)||/Trident/i.test(navigator.userAgent))}},{key:"setFont",value:function(t,e,n){var i=!1,r=!1,o="normal";"string"==typeof n&&(-1!==n.indexOf("italic")&&(n=n.replace(/italic/g,""),r=!0),-1!==n.indexOf("bold")&&(n=n.replace(/bold/g,""),i=!0),n=n.replace(/ /g,""));var s={"font-family":t,"font-size":e+"pt","font-weight":n=void 0===(n=i?"bold":n)||""===n?"normal":n,"font-style":o=r?"italic":o};return this.fontSize=Number(e),h.Merge(this.attributes,s),h.Merge(this.state,s),this}},{key:"setRawFont",value:function(t){var e=(t=t.trim()).split(" ");return this.attributes["font-family"]=e[1],this.state["font-family"]=e[1],this.attributes["font-size"]=e[0],this.state["font-size"]=e[0],this.fontSize=Number(e[0].match(/\d+/)),this}},{key:"setFillStyle",value:function(t){return this.attributes.fill=t,this}},{key:"setBackgroundFillStyle",value:function(t){return this.background_attributes.fill=t,this.background_attributes.stroke=t,this}},{key:"setStrokeStyle",value:function(t){return this.attributes.stroke=t,this}},{key:"setShadowColor",value:function(t){return this.shadow_attributes.color=t,this}},{key:"setShadowBlur",value:function(t){return this.shadow_attributes.width=t,this}},{key:"setLineWidth",value:function(t){this.attributes["stroke-width"]=t,this.lineWidth=t}},{key:"setLineDash",value:function(t){if("[object Array]"===Object.prototype.toString.call(t))return t=t.join(", "),this.attributes["stroke-dasharray"]=t,this;throw new h.RERR("ArgumentError","lineDash must be an array of integers.")}},{key:"setLineCap",value:function(t){return this.attributes["stroke-linecap"]=t,this}},{key:"resize",value:function(t,e){return this.width=t,this.height=e,this.element.style.width=t,this.applyAttributes(this.svg,{width:t,height:e}),this.scale(this.state.scale.x,this.state.scale.y),this}},{key:"scale",value:function(t,e){return this.state.scale={x:t,y:e},this.setViewBox(0,0,this.width/t,this.height/e),this}},{key:"setViewBox",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.svg.setAttribute("viewBox",1===e.length?e[0]:e[0]+" "+e[1]+" "+e[2]+" "+e[3])}},{key:"applyAttributes",value:function(t,e){var n=U[t.nodeName];return Object.keys(e).forEach((function(i){n&&n[i]||t.setAttributeNS(null,i,e[i])})),t}},{key:"clear",value:function(){for(;this.svg.lastChild;)this.svg.removeChild(this.svg.lastChild);this.scale(this.state.scale.x,this.state.scale.y)}},{key:"rect",value:function(t,e,n,i,r){i<0&&(e+=i,i*=-1);var o=this.create("rect");return void 0===r&&(r={fill:"none","stroke-width":this.lineWidth,stroke:"black"}),h.Merge(r,{x:t,y:e,width:n,height:i}),this.applyAttributes(o,r),this.add(o),this}},{key:"fillRect",value:function(t,e,n,i){return i<0&&(e+=i,i*=-1),this.rect(t,e,n,i,this.attributes),this}},{key:"clearRect",value:function(t,e,n,i){return this.rect(t,e,n,i,this.background_attributes),this}},{key:"beginPath",value:function(){return this.path="",this.pen.x=NaN,this.pen.y=NaN,this}},{key:"moveTo",value:function(t,e){return this.path+="M"+t+" "+e,this.pen.x=t,this.pen.y=e,this}},{key:"lineTo",value:function(t,e){return this.path+="L"+t+" "+e,this.pen.x=t,this.pen.y=e,this}},{key:"bezierCurveTo",value:function(t,e,n,i,r,o){return this.path+="C"+t+" "+e+","+n+" "+i+","+r+" "+o,this.pen.x=r,this.pen.y=o,this}},{key:"quadraticCurveTo",value:function(t,e,n,i){return this.path+="Q"+t+" "+e+","+n+" "+i,this.pen.x=n,this.pen.y=i,this}},{key:"arc",value:function(t,e,n,i,r,o){function s(t){for(;t<0;)t+=2*Math.PI;for(;t>2*Math.PI;)t-=2*Math.PI;return t}if((i=s(i))>(r=s(r))){var a=i;i=r,r=a,o=!o}var u=r-i;return u>Math.PI?(this.arcHelper(t,e,n,i,i+u/2,o),this.arcHelper(t,e,n,i+u/2,r,o)):this.arcHelper(t,e,n,i,r,o),this}},{key:"arcHelper",value:function(t,e,n,i,r,o){var s=t+n*Math.cos(i),a=e+n*Math.sin(i),u=t+n*Math.cos(r),l=e+n*Math.sin(r),c=0,h=0;o?(h=1,r-i<Math.PI&&(c=1)):r-i>Math.PI&&(c=1),this.path+="M"+s+" "+a+" A"+n+" "+n+" 0 "+c+" "+h+" "+u+" "+l,isNaN(this.pen.x)||isNaN(this.pen.y)||(this.peth+="M"+this.pen.x+" "+this.pen.y)}},{key:"closePath",value:function(){return this.path+="Z",this}},{key:"glow",value:function(){if(this.shadow_attributes.width>0)for(var t=this.shadow_attributes,e=t.width/2,n=1;n<=e;n++){var i={stroke:t.color,"stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(.4*t.width/e*n).toFixed(3),opacity:+((t.opacity||.3)/e).toFixed(3)},r=this.create("path");i.d=this.path,this.applyAttributes(r,i),this.add(r)}return this}},{key:"fill",value:function(t){this.glow();var e=this.create("path");return void 0===t&&(h.Merge(t={},this.attributes),t.stroke="none"),t.d=this.path,this.applyAttributes(e,t),this.add(e),this}},{key:"stroke",value:function(){this.glow();var t=this.create("path"),e={};return h.Merge(e,this.attributes),e.fill="none",e["stroke-width"]=this.lineWidth,e.d=this.path,this.applyAttributes(t,e),this.add(t),this}},{key:"measureText",value:function(t){var e=this.create("text");if("function"!=typeof e.getBBox)return{x:0,y:0,width:0,height:0};e.textContent=t,this.applyAttributes(e,this.attributes),this.svg.appendChild(e);var n=e.getBBox();return this.ie&&""!==t&&"italic"===this.attributes["font-style"]&&(n=this.ieMeasureTextFix(n,t)),this.svg.removeChild(e),n}},{key:"ieMeasureTextFix",value:function(t){var e=1.196*Number(this.fontSize)+1.9598;return{x:t.x,y:t.y,width:t.width-e,height:t.height-1.5}}},{key:"fillText",value:function(t,e,n){if(t&&!(t.length<=0)){var i={};h.Merge(i,this.attributes),i.stroke="none",i.x=e,i.y=n;var r=this.create("text");r.textContent=t,this.applyAttributes(r,i),this.add(r)}}},{key:"save",value:function(){return this.state_stack.push({state:{"font-family":this.state["font-family"],"font-weight":this.state["font-weight"],"font-style":this.state["font-style"],"font-size":this.state["font-size"],scale:this.state.scale},attributes:{"font-family":this.attributes["font-family"],"font-weight":this.attributes["font-weight"],"font-style":this.attributes["font-style"],"font-size":this.attributes["font-size"],fill:this.attributes.fill,stroke:this.attributes.stroke,"stroke-width":this.attributes["stroke-width"],"stroke-dasharray":this.attributes["stroke-dasharray"]},shadow_attributes:{width:this.shadow_attributes.width,color:this.shadow_attributes.color},lineWidth:this.lineWidth}),this}},{key:"restore",value:function(){var t=this.state_stack.pop();return this.state["font-family"]=t.state["font-family"],this.state["font-weight"]=t.state["font-weight"],this.state["font-style"]=t.state["font-style"],this.state["font-size"]=t.state["font-size"],this.state.scale=t.state.scale,this.attributes["font-family"]=t.attributes["font-family"],this.attributes["font-weight"]=t.attributes["font-weight"],this.attributes["font-style"]=t.attributes["font-style"],this.attributes["font-size"]=t.attributes["font-size"],this.attributes.fill=t.attributes.fill,this.attributes.stroke=t.attributes.stroke,this.attributes["stroke-width"]=t.attributes["stroke-width"],this.attributes["stroke-dasharray"]=t.attributes["stroke-dasharray"],this.shadow_attributes.width=t.shadow_attributes.width,this.shadow_attributes.color=t.shadow_attributes.color,this.lineWidth=t.lineWidth,this}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}();function H(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function q(t,e,n){return e&&H(t.prototype,e),n&&H(t,n),t}var Y=null,X=function(){function t(e,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.elementId=e,!this.elementId)throw new h.RERR("BadArgument","Invalid id for renderer.");if(this.element=document.getElementById(e),this.element||(this.element=e),this.ctx=null,this.paper=null,this.backend=n,this.backend===t.Backends.CANVAS){if(!this.element.getContext)throw new h.RERR("BadElement","Can't get canvas context from element: ".concat(e));this.ctx=t.bolsterCanvasContext(this.element.getContext("2d"))}else if(this.backend===t.Backends.RAPHAEL)this.ctx=new G(this.element);else{if(this.backend!==t.Backends.SVG)throw new h.RERR("InvalidBackend","No support for backend: ".concat(this.backend));this.ctx=new W(this.element)}}return q(t,null,[{key:"buildContext",value:function(e,n,i,r,o){var s=new t(e,n);i&&r&&s.resize(i,r),o||(o="#FFF");var a=s.getContext();return a.setBackgroundFillStyle(o),t.lastContext=a,a}},{key:"getCanvasContext",value:function(e,n,i,r){return t.buildContext(e,t.Backends.CANVAS,n,i,r)}},{key:"getRaphaelContext",value:function(e,n,i,r){return t.buildContext(e,t.Backends.RAPHAEL,n,i,r)}},{key:"getSVGContext",value:function(e,n,i,r){return t.buildContext(e,t.Backends.SVG,n,i,r)}},{key:"bolsterCanvasContext",value:function(e){return t.USE_CANVAS_PROXY?new V(e):(e.vexFlowCanvasContext=e,["clear","setFont","setRawFont","setFillStyle","setBackgroundFillStyle","setStrokeStyle","setShadowColor","setShadowBlur","setLineWidth","setLineCap","setLineDash","openGroup","closeGroup","getGroup"].forEach((function(t){e[t]=e[t]||V.prototype[t]})),e)}},{key:"drawDashedLine",value:function(t,e,n,i,r,o){t.beginPath();var s=i-e,a=r-n,u=Math.atan2(a,s),l=e,c=n;t.moveTo(e,n);for(var h=0,f=!0;!(s<0?l<=i:l>=i)||!(a<0?c<=r:c>=r);){var d=o[h++%o.length],p=l+Math.cos(u)*d;l=s<0?Math.max(i,p):Math.min(i,p);var m=c+Math.sin(u)*d;c=a<0?Math.max(r,m):Math.min(r,m),f?t.lineTo(l,c):t.moveTo(l,c),f=!f}t.closePath(),t.stroke()}},{key:"Backends",get:function(){return{CANVAS:1,RAPHAEL:2,SVG:3,VML:4}}},{key:"LineEndType",get:function(){return{NONE:1,UP:2,DOWN:3}}},{key:"USE_CANVAS_PROXY",get:function(){return!1}},{key:"lastContext",get:function(){return Y},set:function(t){Y=t}}]),q(t,[{key:"resize",value:function(e,n){if(this.backend===t.Backends.CANVAS){if(!this.element.getContext)throw new h.RERR("BadElement","Can't get canvas context from element: ".concat(this.elementId));var i=window.devicePixelRatio||1;this.element.width=e*i,this.element.height=n*i,this.element.style.width=e+"px",this.element.style.height=n+"px",this.ctx=t.bolsterCanvasContext(this.element.getContext("2d")),this.ctx.scale(i,i)}else this.ctx.resize(e,n);return this}},{key:"getContext",value:function(){return this.ctx}}]),t}();function K(t){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z(t,e){return!e||"object"!==K(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Q(t){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function tt(t,e,n){return e&&$(t.prototype,e),n&&$(t,n),t}function et(t,e){return(et=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var nt=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return J(this,e),(t=Z(this,Q(e).call(this))).setAttribute("type","Stem"),t.x_begin=n.x_begin||0,t.x_end=n.x_end||0,t.y_top=n.y_top||0,t.y_bottom=n.y_bottom||0,t.stem_extension=n.stem_extension||0,t.stem_direction=n.stem_direction||0,t.hide=n.hide||!1,t.isStemlet=n.isStemlet||!1,t.stemletHeight=n.stemletHeight||0,t.stem_up_y_offset=n.stem_up_y_offset||0,t.stem_down_y_offset=n.stem_down_y_offset||0,t.renderHeightAdjustment=0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&et(t,e)}(e,t),tt(e,null,[{key:"CATEGORY",get:function(){return"stem"}},{key:"UP",get:function(){return 1}},{key:"DOWN",get:function(){return-1}},{key:"WIDTH",get:function(){return B.STEM_WIDTH}},{key:"HEIGHT",get:function(){return B.STEM_HEIGHT}}]),tt(e,[{key:"setNoteHeadXBounds",value:function(t,e){return this.x_begin=t,this.x_end=e,this}},{key:"setDirection",value:function(t){this.stem_direction=t}},{key:"setExtension",value:function(t){this.stem_extension=t}},{key:"getExtension",value:function(){return this.stem_extension}},{key:"setYBounds",value:function(t,e){this.y_top=t,this.y_bottom=e}},{key:"getCategory",value:function(){return e.CATEGORY}},{key:"getHeight",value:function(){return(this.y_bottom-this.y_top)*this.stem_direction+(e.HEIGHT-(this.stem_direction===e.UP?this.stem_up_y_offset:this.stem_down_y_offset)+this.stem_extension)*this.stem_direction}},{key:"getBoundingBox",value:function(){throw new h.RERR("NotImplemented","getBoundingBox() not implemented.")}},{key:"getExtents",value:function(){var t=this.stem_direction===e.UP,n=[this.y_top,this.y_bottom],i=e.HEIGHT+this.stem_extension,r=(t?Math.min:Math.max).apply(void 0,n),o=(t?Math.max:Math.min).apply(void 0,n);return{topY:r+i*-this.stem_direction,baseY:o}}},{key:"setVisibility",value:function(t){return this.hide=!t,this}},{key:"setStemlet",value:function(t,e){return this.isStemlet=t,this.stemletHeight=e,this}},{key:"draw",value:function(){if(this.setRendered(),!this.hide){var t,n,i=this.checkContext(),r=this.stem_direction;r===e.DOWN?(t=this.x_begin,n=this.y_top+this.stem_down_y_offset):(t=this.x_end,n=this.y_bottom-this.stem_up_y_offset);var o=this.getHeight();!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];nt.DEBUG&&h.L("Vex.Flow.Stem",e)}("Rendering stem - ","Top Y: ",this.y_top,"Bottom Y: ",this.y_bottom);var s=this.isStemlet?o-this.stemletHeight*this.stem_direction:0;i.save(),this.applyStyle(i),i.beginPath(),i.setLineWidth(e.WIDTH),i.moveTo(t,n-s),i.lineTo(t,n-o-this.renderHeightAdjustment*r),i.stroke(),this.restoreStyle(i),i.restore()}}}]),e}(x);function it(t){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rt(t){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ot(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function st(t,e,n){return e&&ot(t.prototype,e),n&&ot(t,n),t}function at(t,e){return(at=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ut=function(t){function e(t,n){var i;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=function(t,e){return!e||"object"!==it(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,rt(e).call(this))).setAttribute("type","Tuplet"),!t||!t.length)throw new h.RuntimeError("BadArguments","No notes provided for tuplet.");return i.options=h.Merge({},n),i.notes=t,i.num_notes="num_notes"in i.options?i.options.num_notes:t.length,i.options.beats_occupied&&i.beatsOccupiedDeprecationWarning(),i.notes_occupied=i.options.notes_occupied||i.options.beats_occupied||2,i.bracketed="bracketed"in i.options?i.options.bracketed:t.some((function(t){return null===t.beam})),i.ratioed="ratioed"in i.options?i.options.ratioed:Math.abs(i.notes_occupied-i.num_notes)>1,i.point=28,i.y_pos=16,i.x_pos=100,i.width=200,i.location=i.options.location||e.LOCATION_TOP,xi.AlignRestsToNotes(t,!0,!0),i.resolveGlyphs(),i.attach(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&at(t,e)}(e,t),st(e,null,[{key:"LOCATION_TOP",get:function(){return 1}},{key:"LOCATION_BOTTOM",get:function(){return-1}},{key:"NESTING_OFFSET",get:function(){return 15}}]),st(e,[{key:"attach",value:function(){for(var t=0;t<this.notes.length;t++)this.notes[t].setTuplet(this)}},{key:"detach",value:function(){for(var t=0;t<this.notes.length;t++)this.notes[t].resetTuplet(this)}},{key:"setBracketed",value:function(t){return this.bracketed=!!t,this}},{key:"setRatioed",value:function(t){return this.ratioed=!!t,this}},{key:"setTupletLocation",value:function(t){if(t){if(t!==e.LOCATION_TOP&&t!==e.LOCATION_BOTTOM)throw new h.RERR("BadArgument","Invalid tuplet location: "+t)}else t=e.LOCATION_TOP;return this.location=t,this}},{key:"getNotes",value:function(){return this.notes}},{key:"getNoteCount",value:function(){return this.num_notes}},{key:"beatsOccupiedDeprecationWarning",value:function(){var t=["beats_occupied has been deprecated as an ","option for tuplets. Please use notes_occupied ","instead. Calls to getBeatsOccupied and ","setBeatsOccupied should now be routed to ","getNotesOccupied and setNotesOccupied instead"].join("");console&&console.warn?console.warn(t):console&&console.log(t)}},{key:"getBeatsOccupied",value:function(){return this.beatsOccupiedDeprecationWarning(),this.getNotesOccupied()}},{key:"setBeatsOccupied",value:function(t){return this.beatsOccupiedDeprecationWarning(),this.setNotesOccupied(t)}},{key:"getNotesOccupied",value:function(){return this.notes_occupied}},{key:"setNotesOccupied",value:function(t){this.detach(),this.notes_occupied=t,this.resolveGlyphs(),this.attach()}},{key:"resolveGlyphs",value:function(){this.numerator_glyphs=[];for(var t=this.num_notes;t>=1;)this.numerator_glyphs.unshift(new O("v"+t%10,this.point)),t=parseInt(t/10,10);for(this.denom_glyphs=[],t=this.notes_occupied;t>=1;)this.denom_glyphs.unshift(new O("v"+t%10,this.point)),t=parseInt(t/10,10)}},{key:"getNestedTupletCount",value:function(){var t=this.location,e=this.notes[0],n=r(e,t),i=r(e,t);function r(t,e){return t.tupletStack.filter((function(t){return t.location===e})).length}return this.notes.forEach((function(e){var o=r(e,t);n=o>n?o:n,i=o<i?o:i})),n-i}},{key:"getYPosition",value:function(){var t,n=this.getNestedTupletCount()*e.NESTING_OFFSET*-this.location,i=this.options.y_offset||0,r=this.notes[0];if(this.location===e.LOCATION_TOP){t=r.getStave().getYForLine(0)-15;for(var o=0;o<this.notes.length;++o){var s=this.notes[o].getStemDirection()===nt.UP?this.notes[o].getStemExtents().topY-10:this.notes[o].getStemExtents().baseY-20;s<t&&(t=s)}}else{t=r.getStave().getYForLine(4)+20;for(var a=0;a<this.notes.length;++a){var u=this.notes[a].getStemDirection()===nt.UP?this.notes[a].getStemExtents().baseY+20:this.notes[a].getStemExtents().topY+10;u>t&&(t=u)}}return t+n+i}},{key:"draw",value:function(){var t=this;this.checkContext(),this.setRendered();var n=this.notes[0],i=this.notes[this.notes.length-1];this.bracketed?(this.x_pos=n.getTieLeftX()-5,this.width=i.getTieRightX()-this.x_pos+5):(this.x_pos=n.getStemX(),this.width=i.getStemX()-this.x_pos),this.y_pos=this.getYPosition();var r=function(t,e){return t+e.getMetrics().width},o=this.numerator_glyphs.reduce(r,0);this.ratioed&&(o=this.denom_glyphs.reduce(r,o),o+=.32*this.point);var s=this.x_pos+this.width/2-o/2;if(this.bracketed){var a=this.width/2-o/2-5;a>0&&(this.context.fillRect(this.x_pos,this.y_pos,a,1),this.context.fillRect(this.x_pos+this.width/2+o/2+5,this.y_pos,a,1),this.context.fillRect(this.x_pos,this.y_pos+(this.location===e.LOCATION_BOTTOM),1,10*this.location),this.context.fillRect(this.x_pos+this.width,this.y_pos+(this.location===e.LOCATION_BOTTOM),1,10*this.location))}var u=0;if(this.numerator_glyphs.forEach((function(e){e.render(t.context,s+u,t.y_pos+t.point/3-2),u+=e.getMetrics().width})),this.ratioed){var l=s+u+.16*this.point,c=.06*this.point;this.context.beginPath(),this.context.arc(l,this.y_pos-.08*this.point,c,0,2*Math.PI,!0),this.context.closePath(),this.context.fill(),this.context.beginPath(),this.context.arc(l,this.y_pos+.12*this.point,c,0,2*Math.PI,!0),this.context.closePath(),this.context.fill(),u+=.32*this.point,this.denom_glyphs.forEach((function(e){e.render(t.context,s+u,t.y_pos+t.point/3-2),u+=e.getMetrics().width}))}}}]),e}(x);function lt(t){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ct(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ht(t){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ft(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function pt(t,e,n){return e&&dt(t.prototype,e),n&&dt(t,n),t}function mt(t,e){return(mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bt(t){var e=0;return t.forEach((function(t){t.keyProps&&t.keyProps.forEach((function(t){e+=t.line-3}))})),e>=0?nt.DOWN:nt.UP}var vt="L",yt="B",gt=function(t){function e(t,n){var i,r,o,s;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=!(r=ht(e).call(this))||"object"!==lt(r)&&"function"!=typeof r?ft(this):r).setAttribute("type","Beam"),!t||t===[])throw new h.RuntimeError("BadArguments","No notes provided for beam.");if(1===t.length)throw new h.RuntimeError("BadArguments","Too few notes for beam.");if(i.ticks=t[0].getIntrinsicTicks(),i.ticks>=B.durationToTicks("4"))throw new h.RuntimeError("BadArguments","Beams can only be applied to notes shorter than a quarter note.");for(i.stem_direction=nt.UP,o=0;o<t.length;++o)if((s=t[o]).hasStem()){i.stem_direction=s.getStemDirection();break}var a=i.stem_direction;for(n&&"stavenotes"===t[0].getCategory()?a=bt(t):n&&"tabnotes"===t[0].getCategory()&&(a=t.reduce((function(t,e){return t+e.stem_direction}),0)>-1?nt.UP:nt.DOWN),o=0;o<t.length;++o)s=t[o],n&&(s.setStemDirection(a),i.stem_direction=a),s.setBeam(ft(i));return i.postFormatted=!1,i.notes=t,i.beam_count=i.getBeamCount(),i.break_on_indices=[],i.render_options={beam_width:5,max_slope:.25,min_slope:-.25,slope_iterations:20,slope_cost:100,show_stemlets:!1,stemlet_extension:7,partial_beam_length:10,flat_beams:!1,min_flat_beam_offset:15},i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mt(t,e)}(e,t),pt(e,null,[{key:"getDefaultBeamGroups",value:function(t){t&&"c"!==t||(t="4/4");var e={"1/2":["1/2"],"2/2":["1/2"],"3/2":["1/2"],"4/2":["1/2"],"1/4":["1/4"],"2/4":["1/4"],"3/4":["1/4"],"4/4":["1/4"],"1/8":["1/8"],"2/8":["2/8"],"3/8":["3/8"],"4/8":["2/8"],"1/16":["1/16"],"2/16":["2/16"],"3/16":["3/16"],"4/16":["2/16"]}[t];if(void 0!==e)return e.map((function(t){return(new p).parse(t)}));var n=parseInt(t.split("/")[0],10),i=parseInt(t.split("/")[1],10);return n%3==0?[new p(3,i)]:i>4?[new p(2,i)]:i<=4?[new p(1,i)]:[new p(1,4)]}},{key:"applyAndGetBeams",value:function(t,n,i){return e.generateBeams(t.getTickables(),{groups:i,stem_direction:n})}},{key:"generateBeams",value:function(t,n){n||(n={}),n.groups&&n.groups.length||(n.groups=[new p(2,8)]);var i,r,o=n.groups.map((function(t){if(!t.multiply)throw new h.RuntimeError("InvalidBeamGroups","The beam groups must be an array of Vex.Flow.Fractions");return t.clone().multiply(B.RESOLUTION,1)})),s=0,a=[],u=[];function l(){o.length-1>s?s+=1:s=0}i=[],t.forEach((function(t){if(i=[],t.shouldIgnoreTicks())return a.push(u),void(u=i);u.push(t);var e=o[s].clone(),n=u.reduce((function(t,e){return e.getTicks().clone().add(t)}),new p(0,1)),r=B.durationToNumber(t.duration)<8;r&&t.tuplet&&(e.numerator*=2),n.greaterThan(e)?(r||i.push(u.pop()),a.push(u),u=i,l()):n.equals(e)&&(a.push(u),u=i,l())})),u.length>0&&a.push(u),r=[],a.forEach((function(t){var e=[];t.forEach((function(t,i,o){var s=0===i||i===o.length-1,a=o[i-1],u=!n.beam_rests&&t.isRest(),l=n.beam_rests&&n.beam_middle_only&&t.isRest()&&s,c=!1;if(n.maintain_stem_directions&&a&&!t.isRest()&&!a.isRest()){var h=a.getStemDirection();c=t.getStemDirection()!==h}var f=parseInt(t.duration,10)<8;u||l||c||f?(e.length>0&&r.push(e),e=c?[t]:[]):e.push(t)})),e.length>0&&r.push(e)})),(a=r).forEach((function(t){var e;if(n.maintain_stem_directions){var i=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(!n.isRest())return n}return!1}(t);e=i?i.getStemDirection():nt.UP}else e=n.stem_direction?n.stem_direction:bt(t);!function(t,e){t.forEach((function(t){t.setStemDirection(e)}))}(t,e)}));var c,f=a.filter((function(t){if(t.length>1){var e=!0;return t.forEach((function(t){t.getIntrinsicTicks()>=B.durationToTicks("4")&&(e=!1)})),e}return!1})),d=(c=[],a.forEach((function(t){var e=null;t.forEach((function(t){t.tuplet&&e!==t.tuplet&&c.push(e=t.tuplet)}))})),c),m=[];return f.forEach((function(t){var i=new e(t);n.show_stemlets&&(i.render_options.show_stemlets=!0),n.secondary_breaks&&(i.render_options.secondary_break_ticks=B.durationToTicks(n.secondary_breaks)),!0===n.flat_beams&&(i.render_options.flat_beams=!0,i.render_options.flat_beam_offset=n.flat_beam_offset),m.push(i)})),d.forEach((function(t){t.setTupletLocation(t.notes[0].stem_direction===nt.DOWN?ut.LOCATION_BOTTOM:ut.LOCATION_TOP);for(var e=!1,n=0;n<t.notes.length;n++)if(null===t.notes[n].beam){e=!0;break}t.setBracketed(e)})),m}}]),pt(e,[{key:"getNotes",value:function(){return this.notes}},{key:"getBeamCount",value:function(){return this.notes.map((function(t){return t.getGlyph().beam_count})).reduce((function(t,e){return e>t?e:t}))}},{key:"breakSecondaryAt",value:function(t){return this.break_on_indices=t,this}},{key:"getSlopeY",value:function(t,e,n,i){return n+(t-e)*i}},{key:"calculateSlope",value:function(){for(var t=this.notes,e=this.stem_direction,n=this.render_options,i=n.max_slope,r=n.min_slope,o=n.slope_iterations,s=n.slope_cost,a=t[0],u=function(t,e){var n=t.getStemExtents().topY,i=t.getStemX();return(e.getStemExtents().topY-n)/(e.getStemX()-i)}(a,t[t.length-1]),l=(i-r)/o,c=Number.MAX_VALUE,h=0,f=0,d=r;d<=i;d+=l){for(var p=0,m=0,b=1;b<t.length;++b){var v=t[b],y=this.getSlopeY(v.getStemX(),a.getStemX(),a.getStemExtents().topY,d)+m,g=v.getStemExtents().topY;if(g*e<y*e){var S=Math.abs(g-y);m+=S*-e,p+=S*b}else p+=(g-y)*e}var w=s*Math.abs(u/2-d)+Math.abs(p);w<c&&(c=w,h=d,f=m)}this.slope=h,this.y_shift=f}},{key:"calculateFlatSlope",value:function(){for(var t=this.notes,e=this.stem_direction,n=this.render_options,i=n.beam_width,r=n.min_flat_beam_offset,o=n.flat_beam_offset,s=0,a=0,u=0,l=0,c=0;c<t.length;c++){var h=t[c],f=h.getStemExtents().topY;s+=f,e===nt.DOWN&&l<f?(l=f,a=Math.max.apply(Math,ct(h.getYs())),u=h.getBeamCount()):e===nt.UP&&(0===l||l>f)&&(l=f,a=Math.min.apply(Math,ct(h.getYs())),u=h.getBeamCount())}var d=s/t.length,p=r+u*(1.5*i),m=a+p*-e;e===nt.DOWN&&d<m?d=a+p:e===nt.UP&&d>m&&(d=a-p),o?(e===nt.DOWN&&d>o||e===nt.UP&&d<o)&&(this.render_options.flat_beam_offset=d):this.render_options.flat_beam_offset=d,this.slope=0,this.y_shift=0}},{key:"getBeamYToDraw",value:function(){var t=this.notes[0].getStemExtents().topY;return this.render_options.flat_beams&&this.render_options.flat_beam_offset&&(t=this.render_options.flat_beam_offset),t}},{key:"applyStemExtensions",value:function(){for(var t=this.notes,e=this.slope,n=this.y_shift,i=this.stem_direction,r=this.beam_count,o=this.render_options,s=o.show_stemlets,a=o.stemlet_extension,u=o.beam_width,l=t[0],c=this.getBeamYToDraw(),h=l.getStemX(),f=0;f<t.length;++f){var d=t[f],p=d.getStemX(),m=d.getStemExtents().topY,b=this.getSlopeY(p,h,c,e)+n,v=d.getStem().getExtension();if(d.stem.setExtension(v+(i===nt.UP?m-b:b-m)),d.stem.renderHeightAdjustment=-nt.WIDTH/2,d.isRest()&&s){var y=(r-1)*u*1.5+u;d.stem.setVisibility(!0).setStemlet(!0,y+a)}}}},{key:"lookupBeamDirection",value:function(t,e,n,i){if("4"===t)return vt;var r="".concat(B.durationToNumber(t)/2),o=e<B.durationToTicks(r),s=i<B.durationToTicks(r),a=n<B.durationToTicks(r);return o&&s&&a?yt:o&&!s&&a?vt:!o&&s&&a?"R":this.lookupBeamDirection(r,e,n,i)}},{key:"getBeamLines",value:function(t){for(var e=B.durationToTicks(t),n=[],i=!1,r=null,o=this.render_options.partial_beam_length,s=!1,a=0,u=0;u<this.notes.length;++u){var l=this.notes[u];a+=l.ticks.value();var c=!1;parseInt(t,10)>=8&&(c=-1!==this.break_on_indices.indexOf(u),this.render_options.secondary_break_ticks&&a>=this.render_options.secondary_break_ticks&&(a=0,c=!0));var h=l.getIntrinsicTicks()<e,f=l.getStemX()-nt.WIDTH/2,d=this.notes[u-1],p=this.notes[u+1],m=p&&p.getIntrinsicTicks()<e,b=d&&d.getIntrinsicTicks()<e,v=d&&p&&h&&!b&&!m;if(h)if(i)(r=n[n.length-1]).end=f,c&&(i=!1,p&&!m&&null===r.end&&(r.end=r.start-o));else{if(r={start:f,end:null},i=!0,v){var y=d.getIntrinsicTicks(),g=p.getIntrinsicTicks(),S=l.getIntrinsicTicks(),w=this.lookupBeamDirection(t,y,S,g);r.end=[vt,yt].includes(w)?r.start-o:r.start+o}else m?c&&(r.end=r.start-o,i=!1):r.end=(s||0===u)&&p?r.start+o:r.start-o;n.push(r)}else i=!1;s=c}var _=n[n.length-1];return _&&null===_.end&&(_.end=_.start-o),n}},{key:"drawStems",value:function(){var t=this;this.notes.forEach((function(e){e.getStem()&&e.getStem().setContext(t.context).draw()}),this)}},{key:"drawBeamLines",value:function(){this.checkContext();for(var t=["4","8","16","32","64"],e=this.notes[0],n=this.getBeamYToDraw(),i=e.getStemX(),r=this.render_options.beam_width*this.stem_direction,o=0;o<t.length;++o){for(var s=this.getBeamLines(t[o]),a=0;a<s.length;++a){var u=s[a],l=u.start,c=this.getSlopeY(l,i,n,this.slope),h=u.end,f=this.getSlopeY(h,i,n,this.slope);this.context.beginPath(),this.context.moveTo(l,c),this.context.lineTo(l,c+r),this.context.lineTo(h+1,f+r),this.context.lineTo(h+1,f),this.context.closePath(),this.context.fill()}n+=1.5*r}}},{key:"preFormat",value:function(){return this}},{key:"postFormat",value:function(){this.postFormatted||("tabnotes"===this.notes[0].getCategory()||this.render_options.flat_beams?this.calculateFlatSlope():this.calculateSlope(),this.applyStemExtensions(),this.postFormatted=!0)}},{key:"draw",value:function(){this.checkContext(),this.setRendered(),this.unbeamable||(this.postFormatted||this.postFormat(),this.drawStems(),this.applyStyle(),this.drawBeamLines(),this.restoreStyle())}}]),e}(x);function St(t){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wt(t){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function xt(t,e,n){return e&&_t(t.prototype,e),n&&_t(t,n),t}function kt(t,e){return(kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Et=function(t){function e(t){var n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==St(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,wt(e).call(this))).setAttribute("type","Voice"),"string"==typeof t){var i=t.match(/(\d+)\/(\d+)/);i&&(t={num_beats:i[1],beat_value:i[2],resolution:B.RESOLUTION})}return n.time=h.Merge({num_beats:4,beat_value:4,resolution:B.RESOLUTION},t),n.totalTicks=new p(n.time.num_beats*(n.time.resolution/n.time.beat_value),1),n.resolutionMultiplier=1,n.tickables=[],n.ticksUsed=new p(0,1),n.smallestTickCount=n.totalTicks.clone(),n.largestTickWidth=0,n.stave=null,n.mode=e.Mode.STRICT,n.voiceGroup=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kt(t,e)}(e,t),xt(e,null,[{key:"Mode",get:function(){return{STRICT:1,SOFT:2,FULL:3}}}]),xt(e,[{key:"getTotalTicks",value:function(){return this.totalTicks}},{key:"getTicksUsed",value:function(){return this.ticksUsed}},{key:"getLargestTickWidth",value:function(){return this.largestTickWidth}},{key:"getSmallestTickCount",value:function(){return this.smallestTickCount}},{key:"getTickables",value:function(){return this.tickables}},{key:"getMode",value:function(){return this.mode}},{key:"setMode",value:function(t){return this.mode=t,this}},{key:"getResolutionMultiplier",value:function(){return this.resolutionMultiplier}},{key:"getActualResolution",value:function(){return this.resolutionMultiplier*this.time.resolution}},{key:"setStave",value:function(t){return this.stave=t,this.boundingBox=null,this}},{key:"getBoundingBox",value:function(){var t,e,n,i;if(!this.boundingBox){if(!this.stave)throw new h.RERR("NoStave","Can't get bounding box without stave.");for(t=this.stave,e=null,i=0;i<this.tickables.length;++i)this.tickables[i].setStave(t),(n=this.tickables[i].getBoundingBox())&&(e=e?e.mergeWith(n):n);this.boundingBox=e}return this.boundingBox}},{key:"getVoiceGroup",value:function(){if(!this.voiceGroup)throw new h.RERR("NoVoiceGroup","No voice group for voice.");return this.voiceGroup}},{key:"setVoiceGroup",value:function(t){return this.voiceGroup=t,this}},{key:"setStrict",value:function(t){return this.mode=t?e.Mode.STRICT:e.Mode.SOFT,this}},{key:"isComplete",value:function(){return this.mode!==e.Mode.STRICT&&this.mode!==e.Mode.FULL||this.ticksUsed.equals(this.totalTicks)}},{key:"addTickable",value:function(t){if(!t.shouldIgnoreTicks()){var n=t.getTicks();if(this.ticksUsed.add(n),(this.mode===e.Mode.STRICT||this.mode===e.Mode.FULL)&&this.ticksUsed.greaterThan(this.totalTicks))throw this.ticksUsed.subtract(n),new h.RERR("BadArgument","Too many ticks.");n.lessThan(this.smallestTickCount)&&(this.smallestTickCount=n.clone()),this.resolutionMultiplier=this.ticksUsed.denominator,this.totalTicks.add(0,this.ticksUsed.denominator)}return this.tickables.push(t),t.setVoice(this),this}},{key:"addTickables",value:function(t){for(var e=0;e<t.length;++e)this.addTickable(t[e]);return this}},{key:"preFormat",value:function(){var t=this;return this.preFormatted||(this.tickables.forEach((function(e){e.getStave()||e.setStave(t.stave)})),this.preFormatted=!0),this}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.context,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.stave;this.setRendered();for(var n=null,i=0;i<this.tickables.length;++i){var r=this.tickables[i];if(e&&r.setStave(e),!r.getStave())throw new h.RuntimeError("MissingStave","The voice cannot draw tickables without staves.");if(0===i&&(n=r.getBoundingBox()),i>0&&n){var o=r.getBoundingBox();o&&n.mergeWith(o)}r.setContext(t),r.drawWithStyle()}this.boundingBox=n}}]),e}(x);function Pt(t){return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function At(t){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Tt(t,e,n){return e&&Lt(t.prototype,e),n&&Lt(t,n),t}function Mt(t,e){return(Mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ct(t,e,n,i,r){if(e!==Nt.type.BOLD_DOUBLE_LEFT&&e!==Nt.type.BOLD_DOUBLE_RIGHT)throw new h.RERR("InvalidConnector","A REPEAT_BEGIN or REPEAT_END type must be provided.");var o=3,s=3.5;e===Nt.type.BOLD_DOUBLE_RIGHT&&(o=-5,s=3),t.fillRect(n+o,i,1,r-i),t.fillRect(n-2,i,s,r-i)}var Nt=function(t){function e(t,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=function(t,e){return!e||"object"!==Pt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,At(e).call(this))).setAttribute("type","StaveConnector"),i.thickness=B.STAVE_LINE_THICKNESS,i.width=3,i.top_stave=t,i.bottom_stave=n,i.type=e.type.DOUBLE,i.font={family:"times",size:16,weight:"normal"},i.x_shift=0,i.texts=[],i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mt(t,e)}(e,t),Tt(e,null,[{key:"type",get:function(){return{SINGLE_RIGHT:0,SINGLE_LEFT:1,SINGLE:1,DOUBLE:2,BRACE:3,BRACKET:4,BOLD_DOUBLE_LEFT:5,BOLD_DOUBLE_RIGHT:6,THIN_DOUBLE:7,NONE:8}}},{key:"typeString",get:function(){return{singleRight:e.type.SINGLE_RIGHT,singleLeft:e.type.SINGLE_LEFT,single:e.type.SINGLE,double:e.type.DOUBLE,brace:e.type.BRACE,bracket:e.type.BRACKET,boldDoubleLeft:e.type.BOLD_DOUBLE_LEFT,boldDoubleRight:e.type.BOLD_DOUBLE_RIGHT,thinDouble:e.type.THIN_DOUBLE,none:e.type.NONE}}}]),Tt(e,[{key:"setType",value:function(t){return(t="string"==typeof t?e.typeString[t]:t)>=e.type.SINGLE_RIGHT&&t<=e.type.NONE&&(this.type=t),this}},{key:"setText",value:function(t,e){return this.texts.push({content:t,options:h.Merge({shift_x:0,shift_y:0},e)}),this}},{key:"setFont",value:function(t){h.Merge(this.font,t)}},{key:"setXShift",value:function(t){if("number"!=typeof t)throw h.RERR("InvalidType","x_shift must be a Number");return this.x_shift=t,this}},{key:"draw",value:function(){var t=this.checkContext();this.setRendered();var n=this.top_stave.getYForLine(0),i=this.bottom_stave.getYForLine(this.bottom_stave.getNumLines()-1)+this.thickness,r=this.width,o=this.top_stave.getX();(this.type===e.type.SINGLE_RIGHT||this.type===e.type.BOLD_DOUBLE_RIGHT||this.type===e.type.THIN_DOUBLE)&&(o=this.top_stave.getX()+this.top_stave.width);var s=i-n;switch(this.type){case e.type.SINGLE:case e.type.SINGLE_LEFT:case e.type.SINGLE_RIGHT:r=1;break;case e.type.DOUBLE:o-=this.width+2;break;case e.type.BRACE:r=12;var a=this.top_stave.getX()-2+this.x_shift,u=n,l=a,c=i,f=a-r,d=u+s/2,p=f-.9*r,m=u+.2*s,b=a+1.1*r,v=d-.135*s,y=b,g=d+.135*s,S=p,w=c-.2*s,_=f-r,x=w,k=a+.4*r,E=d+.135*s,P=k,A=d-.135*s,L=_,T=m;t.beginPath(),t.moveTo(a,u),t.bezierCurveTo(p,m,b,v,f,d),t.bezierCurveTo(y,g,S,w,l,c),t.bezierCurveTo(_,x,k,E,f,d),t.bezierCurveTo(P,A,L,T,a,u),t.fill(),t.stroke();break;case e.type.BRACKET:s=(i+=4)-(n-=4),O.renderGlyph(t,o-5,n-3,40,"v1b",!0),O.renderGlyph(t,o-5,i+3,40,"v10",!0),o-=this.width+2;break;case e.type.BOLD_DOUBLE_LEFT:Ct(t,this.type,o+this.x_shift,n,i);break;case e.type.BOLD_DOUBLE_RIGHT:Ct(t,this.type,o,n,i);break;case e.type.THIN_DOUBLE:r=1;break;case e.type.NONE:break;default:throw new h.RERR("InvalidType","The provided StaveConnector.type (".concat(this.type,") is invalid"))}this.type!==e.type.BRACE&&this.type!==e.type.BOLD_DOUBLE_LEFT&&this.type!==e.type.BOLD_DOUBLE_RIGHT&&this.type!==e.type.NONE&&t.fillRect(o,n,r,s),this.type===e.type.THIN_DOUBLE&&t.fillRect(o-3,n,r,s),t.save(),t.lineWidth=2,t.setFont(this.font.family,this.font.size,this.font.weight);for(var M=0;M<this.texts.length;M++){var C=this.texts[M],N=t.measureText(""+C.content).width,I=this.top_stave.getX()-N-24+C.options.shift_x,R=(this.top_stave.getYForLine(0)+this.bottom_stave.getBottomLineY())/2+C.options.shift_y;t.fillText(""+C.content,I,R+4)}t.restore()}}]),e}(x);function It(t){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rt(t){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ot(t,e){return(Ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ft=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e){return!e||"object"!==It(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Rt(e).call(this))).setAttribute("type","Tickable"),t.ticks=new p(0,1),t.intrinsicTicks=0,t.tickMultiplier=new p(1,1),t.width=0,t.x_shift=0,t.voice=null,t.tickContext=null,t.modifierContext=null,t.modifiers=[],t.preFormatted=!1,t.postFormatted=!1,t.tuplet=null,t.tupletStack=[],t.align_center=!1,t.center_x_shift=0,t.ignore_ticks=!1,t.formatterMetrics={freedom:{left:0,right:0},duration:"",iterations:0,space:{used:0,mean:0,deviation:0}},t}var n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ot(t,e)}(e,t),(n=[{key:"reset",value:function(){return this}},{key:"getTicks",value:function(){return this.ticks}},{key:"shouldIgnoreTicks",value:function(){return this.ignore_ticks}},{key:"getWidth",value:function(){return this.width}},{key:"getFormatterMetrics",value:function(){return this.formatterMetrics}},{key:"setXShift",value:function(t){this.x_shift=t}},{key:"getCenterXShift",value:function(){return this.isCenterAligned()?this.center_x_shift:0}},{key:"isCenterAligned",value:function(){return this.align_center}},{key:"setCenterAlignment",value:function(t){return this.align_center=t,this}},{key:"getVoice",value:function(){if(!this.voice)throw new h.RERR("NoVoice","Tickable has no voice.");return this.voice}},{key:"setVoice",value:function(t){this.voice=t}},{key:"getTuplet",value:function(){return this.tuplet}},{key:"resetTuplet",value:function(t){var e,n;if(t){var i=this.tupletStack.indexOf(t);return-1!==i&&(this.tupletStack.splice(i,1),e=t.getNoteCount(),n=t.getNotesOccupied(),this.applyTickMultiplier(e,n)),this}for(;this.tupletStack.length;)e=(t=this.tupletStack.pop()).getNoteCount(),n=t.getNotesOccupied(),this.applyTickMultiplier(e,n);return this}},{key:"setTuplet",value:function(t){if(t){this.tupletStack.push(t);var e=t.getNoteCount(),n=t.getNotesOccupied();this.applyTickMultiplier(n,e)}return this.tuplet=t,this}},{key:"addToModifierContext",value:function(t){this.modifierContext=t,this.preFormatted=!1}},{key:"addModifier",value:function(t){return this.modifiers.push(t),this.preFormatted=!1,this}},{key:"getModifiers",value:function(){return this.modifiers}},{key:"setTickContext",value:function(t){this.tickContext=t,this.preFormatted=!1}},{key:"preFormat",value:function(){this.preFormatted||(this.width=0,this.modifierContext&&(this.modifierContext.preFormat(),this.width+=this.modifierContext.getWidth()))}},{key:"postFormat",value:function(){return this.postFormatted||(this.postFormatted=!0),this}},{key:"getIntrinsicTicks",value:function(){return this.intrinsicTicks}},{key:"setIntrinsicTicks",value:function(t){this.intrinsicTicks=t,this.ticks=this.tickMultiplier.clone().multiply(this.intrinsicTicks)}},{key:"getTickMultiplier",value:function(){return this.tickMultiplier}},{key:"applyTickMultiplier",value:function(t,e){this.tickMultiplier.multiply(t,e),this.ticks=this.tickMultiplier.clone().multiply(this.intrinsicTicks)}},{key:"setDuration",value:function(t){var e=t.numerator*(B.RESOLUTION/t.denominator);this.ticks=this.tickMultiplier.clone().multiply(e),this.intrinsicTicks=this.ticks.value()}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(e.prototype,n),e}(x);function Bt(t){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dt(t){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Vt(t,e,n){return e&&jt(t.prototype,e),n&&jt(t,n),t}function Gt(t,e){return(Gt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ut=function(t){function e(t){var n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==Bt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Dt(e).call(this))).setAttribute("type","Note"),!t)throw new h.RuntimeError("BadArguments","Note must have valid initialization data to identify duration and type.");var i=B.parseNoteData(t);if(!i)throw new h.RuntimeError("BadArguments","Invalid note initialization object: ".concat(JSON.stringify(t)));if(n.duration=i.duration,n.dots=i.dots,n.noteType=i.type,t.duration_override?n.setDuration(t.duration_override):n.setIntrinsicTicks(i.ticks),n.modifiers=[],n.glyph=B.durationToGlyph(n.duration,n.noteType),n.positions&&("object"!==Bt(n.positions)||!n.positions.length))throw new h.RuntimeError("BadArguments","Note keys must be array type.");return n.playNote=null,n.tickContext=null,n.modifierContext=null,n.ignore_ticks=!1,n.width=0,n.extraLeftPx=0,n.extraRightPx=0,n.x_shift=0,n.left_modPx=0,n.right_modPx=0,n.voice=null,n.preFormatted=!1,n.ys=[],t.align_center&&n.setCenterAlignment(t.align_center),n.stave=null,n.render_options={annotation_spacing:5,stave_padding:e.STAVEPADDING},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gt(t,e)}(e,t),Vt(e,null,[{key:"plotMetrics",value:function(t,e,n){var i=e.getMetrics(),r=e.getAbsoluteX()-i.modLeftPx-i.extraLeftPx,o=e.getAbsoluteX()-i.extraLeftPx,s=e.getAbsoluteX(),a=e.getAbsoluteX()+i.noteWidth,u=e.getAbsoluteX()+i.noteWidth+i.extraRightPx,l=e.getAbsoluteX()+i.noteWidth+i.extraRightPx+i.modRightPx,c=l+e.getFormatterMetrics().freedom.right,f=l-r;t.save(),t.setFont("Arial",8,""),t.fillText(Math.round(f)+"px",r+e.getXShift(),n);var d=n+7;function p(n,i,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d;t.beginPath(),t.setStrokeStyle(r),t.setFillStyle(r),t.setLineWidth(3),t.moveTo(n+e.getXShift(),o),t.lineTo(i+e.getXShift(),o),t.stroke()}p(r,o,"red"),p(o,s,"#999"),p(s,a,"green"),p(a,u,"#999"),p(u,l,"red"),p(l,c,"#DD0"),p(r-e.getXShift(),r,"#BBB"),h.drawDot(t,s+e.getXShift(),d,"blue");var m=e.getFormatterMetrics();if(m.iterations>0){var b=m.space.deviation,v=b>=0?"+":"";t.setFillStyle("red"),t.fillText(v+Math.round(b),s+e.getXShift(),n-10)}t.restore()}},{key:"CATEGORY",get:function(){return"note"}},{key:"STAVEPADDING",get:function(){return 12}}]),Vt(e,[{key:"getPlayNote",value:function(){return this.playNote}},{key:"setPlayNote",value:function(t){return this.playNote=t,this}},{key:"isRest",value:function(){return!1}},{key:"addStroke",value:function(t,e){return e.setNote(this),e.setIndex(t),this.modifiers.push(e),this.setPreFormatted(!1),this}},{key:"getStave",value:function(){return this.stave}},{key:"setStave",value:function(t){return this.stave=t,this.setYs([t.getYForLine(0)]),this.context=this.stave.context,this}},{key:"getCategory",value:function(){return e.CATEGORY}},{key:"setContext",value:function(t){return this.context=t,this}},{key:"getExtraLeftPx",value:function(){return this.extraLeftPx}},{key:"getExtraRightPx",value:function(){return this.extraRightPx}},{key:"setExtraLeftPx",value:function(t){return this.extraLeftPx=t,this}},{key:"setExtraRightPx",value:function(t){return this.extraRightPx=t,this}},{key:"shouldIgnoreTicks",value:function(){return this.ignore_ticks}},{key:"getLineNumber",value:function(){return 0}},{key:"getLineForRest",value:function(){return 0}},{key:"getGlyph",value:function(){return this.glyph}},{key:"getGlyphWidth",value:function(){return this.glyph.getWidth(this.render_options.glyph_font_scale)}},{key:"setYs",value:function(t){return this.ys=t,this}},{key:"getYs",value:function(){if(0===this.ys.length)throw new h.RERR("NoYValues","No Y-values calculated for this note.");return this.ys}},{key:"getYForTopText",value:function(t){if(!this.stave)throw new h.RERR("NoStave","No stave attached to this note.");return this.stave.getYForTopText(t)}},{key:"getBoundingBox",value:function(){return null}},{key:"getVoice",value:function(){if(!this.voice)throw new h.RERR("NoVoice","Note has no voice.");return this.voice}},{key:"setVoice",value:function(t){return this.voice=t,this.preFormatted=!1,this}},{key:"getTickContext",value:function(){return this.tickContext}},{key:"setTickContext",value:function(t){return this.tickContext=t,this.preFormatted=!1,this}},{key:"getDuration",value:function(){return this.duration}},{key:"isDotted",value:function(){return this.dots>0}},{key:"hasStem",value:function(){return!1}},{key:"getDots",value:function(){return this.dots}},{key:"getNoteType",value:function(){return this.noteType}},{key:"setBeam",value:function(){return this}},{key:"setModifierContext",value:function(t){return this.modifierContext=t,this}},{key:"addModifier",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.setNote(this),t.setIndex(e),this.modifiers.push(t),this.setPreFormatted(!1),this}},{key:"getModifierStartXY",value:function(){if(!this.preFormatted)throw new h.RERR("UnformattedNote","Can't call GetModifierStartXY on an unformatted note");return{x:this.getAbsoluteX(),y:this.ys[0]}}},{key:"getMetrics",value:function(){if(!this.preFormatted)throw new h.RERR("UnformattedNote","Can't call getMetrics on an unformatted note.");var t=0,e=0;null!=this.modifierContext&&(t=this.modifierContext.state.left_shift,e=this.modifierContext.state.right_shift);var n=this.getWidth();return{width:n,noteWidth:n-t-e-this.extraLeftPx-this.extraRightPx,left_shift:this.x_shift,modLeftPx:t,modRightPx:e,extraLeftPx:this.extraLeftPx,extraRightPx:this.extraRightPx}}},{key:"setWidth",value:function(t){this.width=t}},{key:"getWidth",value:function(){if(!this.preFormatted)throw new h.RERR("UnformattedNote","Can't call GetWidth on an unformatted note.");return this.width+(this.modifierContext?this.modifierContext.getWidth():0)}},{key:"setXShift",value:function(t){return this.x_shift=t,this}},{key:"getXShift",value:function(){return this.x_shift}},{key:"getX",value:function(){if(!this.tickContext)throw new h.RERR("NoTickContext","Note needs a TickContext assigned for an X-Value");return this.tickContext.getX()+this.x_shift}},{key:"getAbsoluteX",value:function(){if(!this.tickContext)throw new h.RERR("NoTickContext","Note needs a TickContext assigned for an X-Value");var t=this.tickContext.getX();return this.stave&&(t+=this.stave.getNoteStartX()+this.render_options.stave_padding),this.isCenterAligned()&&(t+=this.getCenterXShift()),t}},{key:"setPreFormatted",value:function(t){if(this.preFormatted=t,this.preFormatted){var e=this.tickContext.getExtraPx();this.left_modPx=Math.max(this.left_modPx,e.left),this.right_modPx=Math.max(this.right_modPx,e.right)}}}]),e}(Ft);function zt(t){return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wt(t,e,n){return(Wt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ht(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Ht(t){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Yt(t,e,n){return e&&qt(t.prototype,e),n&&qt(t,n),t}function Xt(t,e){return(Xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Kt=function(t){function e(t){var n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==zt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Ht(e).call(this,t))).setAttribute("type","NoteHead"),n.index=t.index,n.x=t.x||0,n.y=t.y||0,n.note_type=t.note_type,n.duration=t.duration,n.displaced=t.displaced||!1,n.stem_direction=t.stem_direction||Se.STEM_UP,n.line=t.line,n.glyph=B.durationToGlyph(n.duration,n.note_type),!n.glyph)throw new h.RuntimeError("BadArguments","No glyph found for duration '".concat(n.duration,"' and type '").concat(n.note_type,"'"));return n.glyph_code=n.glyph.code_head,n.x_shift=t.x_shift,t.custom_glyph_code&&(n.custom_glyph=!0,n.glyph_code=t.custom_glyph_code),n.style=t.style,n.slashed=t.slashed,h.Merge(n.render_options,{glyph_font_scale:t.glyph_font_scale||B.DEFAULT_NOTATION_FONT_SCALE,stroke_px:3}),n.setWidth(n.glyph.getWidth(n.render_options.glyph_font_scale)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xt(t,e)}(e,t),Yt(e,null,[{key:"CATEGORY",get:function(){return"notehead"}}]),Yt(e,[{key:"getCategory",value:function(){return e.CATEGORY}},{key:"getWidth",value:function(){return this.width}},{key:"isDisplaced",value:function(){return!0===this.displaced}},{key:"getGlyph",value:function(){return this.glyph}},{key:"setX",value:function(t){return this.x=t,this}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(t){return this.y=t,this}},{key:"getLine",value:function(){return this.line}},{key:"setLine",value:function(t){return this.line=t,this}},{key:"getAbsoluteX",value:function(){return(this.preFormatted?Wt(Ht(e.prototype),"getAbsoluteX",this).call(this):this.x)+(this.displaced?(this.width-nt.WIDTH/2)*this.stem_direction:0)}},{key:"getBoundingBox",value:function(){if(!this.preFormatted)throw new h.RERR("UnformattedNote","Can't call getBoundingBox on an unformatted note.");var t=this.stave.getSpacingBetweenLines(),e=this.y-t/2;return new B.BoundingBox(this.getAbsoluteX(),e,this.width,t)}},{key:"setStave",value:function(t){var e=this.getLine();return this.stave=t,this.setY(t.getYForNote(e)),this.context=this.stave.context,this}},{key:"preFormat",value:function(){if(this.preFormatted)return this;var t=this.getWidth()+this.extraLeftPx+this.extraRightPx;return this.setWidth(t),this.setPreFormatted(!0),this}},{key:"draw",value:function(){this.checkContext(),this.setRendered();var t=this.context,e=this.getAbsoluteX(),n=this.y;!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Kt.DEBUG&&h.L("Vex.Flow.NoteHead",e)}("Drawing note head '",this.note_type,this.duration,"' at",e,n);var i=this.stem_direction,r=this.render_options.glyph_font_scale;if(this.style&&this.applyStyle(t),"s"===this.note_type){var o=this.stave.getSpacingBetweenLines();!function(t,e,n,i,r,o){var s=B.SLASH_NOTEHEAD_WIDTH;t.save(),t.setLineWidth(B.STEM_WIDTH);var a=!1;if(B.durationToNumber(e)>2&&(a=!0),a||(n-=B.STEM_WIDTH/2*r),t.beginPath(),t.moveTo(n,i+o),t.lineTo(n,i+1),t.lineTo(n+s,i-o),t.lineTo(n+s,i),t.lineTo(n,i+o),t.closePath(),a?t.fill():t.stroke(),B.durationToFraction(e).equals(.5))for(var u=[-3,-1,s+1,s+3],l=0;l<u.length;l++)t.beginPath(),t.moveTo(n+u[l],i-10),t.lineTo(n+u[l],i+11),t.stroke();t.restore()}(t,this.duration,e,n,i,o)}else O.renderGlyph(t,e,n,r,this.glyph_code);this.style&&this.restoreStyle(t)}}]),e}(Ut);function Jt(t){return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zt(t){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qt(t,e){return(Qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $t=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==Jt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Zt(e).call(this,t))).setAttribute("type","StemmableNote"),n.stem=null,n.stemExtensionOverride=null,n.beam=null,n}var n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qt(t,e)}(e,t),(n=[{key:"getStem",value:function(){return this.stem}},{key:"setStem",value:function(t){return this.stem=t,this}},{key:"buildStem",value:function(){var t=new nt;return this.setStem(t),this}},{key:"buildFlag",value:function(){var t=this.glyph;if(t&&t.flag&&null===this.beam){var e=this.getStemDirection()===nt.DOWN?t.code_flag_downstem:t.code_flag_upstem;this.flag=new O(e,this.render_options.glyph_font_scale)}}},{key:"getStemLength",value:function(){return nt.HEIGHT+this.getStemExtension()}},{key:"getBeamCount",value:function(){var t=this.getGlyph();return t?t.beam_count:0}},{key:"getStemMinumumLength",value:function(){var t=B.durationToFraction(this.duration).value()<=1?0:20;switch(this.duration){case"8":null==this.beam&&(t=35);break;case"16":t=null==this.beam?35:25;break;case"32":t=null==this.beam?45:35;break;case"64":t=null==this.beam?50:40;break;case"128":t=null==this.beam?55:45}return t}},{key:"getStemDirection",value:function(){return this.stem_direction}},{key:"setStemDirection",value:function(t){if(t||(t=nt.UP),t!==nt.UP&&t!==nt.DOWN)throw new h.RERR("BadArgument","Invalid stem direction: ".concat(t));return this.stem_direction=t,this.stem&&(this.stem.setDirection(t),this.stem.setExtension(this.getStemExtension())),this.reset(),this.flag&&this.buildFlag(),this.beam=null,this.preFormatted&&this.preFormat(),this}},{key:"getStemX",value:function(){var t=this.getAbsoluteX()+this.x_shift,e=this.getAbsoluteX()+this.x_shift+this.getGlyphWidth();return this.stem_direction===nt.DOWN?t:e}},{key:"getCenterGlyphX",value:function(){return this.getAbsoluteX()+this.x_shift+this.getGlyphWidth()/2}},{key:"getStemExtension",value:function(){var t=this.getGlyph();return null!=this.stemExtensionOverride?this.stemExtensionOverride:t?1===this.getStemDirection()?t.stem_up_extension:t.stem_down_extension:0}},{key:"setStemLength",value:function(t){return this.stemExtensionOverride=t-nt.HEIGHT,this}},{key:"getStemExtents",value:function(){return this.stem.getExtents()}},{key:"setBeam",value:function(t){return this.beam=t,this}},{key:"getYForTopText",value:function(t){var e=this.getStemExtents();return this.hasStem()?Math.min(this.stave.getYForTopText(t),e.topY-this.render_options.annotation_spacing*(t+1)):this.stave.getYForTopText(t)}},{key:"getYForBottomText",value:function(t){var e=this.getStemExtents();return this.hasStem()?Math.max(this.stave.getYForTopText(t),e.baseY+this.render_options.annotation_spacing*t):this.stave.getYForBottomText(t)}},{key:"hasFlag",value:function(){return B.durationToGlyph(this.duration).flag&&!this.beam}},{key:"postFormat",value:function(){return this.beam&&this.beam.postFormat(),this.postFormatted=!0,this}},{key:"drawStem",value:function(t){this.checkContext(),this.setRendered(),this.setStem(new nt(t)),this.stem.setContext(this.context).draw()}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(e.prototype,n),e}(Ut);function te(t){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ee(t){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ne(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ie(t,e,n){return e&&ne(t.prototype,e),n&&ne(t,n),t}function re(t,e){return(re=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var oe=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e){return!e||"object"!==te(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,ee(e).call(this))).setAttribute("type","Modifier"),t.width=0,t.note=null,t.index=null,t.text_line=0,t.position=e.Position.LEFT,t.modifier_context=null,t.x_shift=0,t.y_shift=0,t.spacingFromNextModifier=0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&re(t,e)}(e,t),ie(e,null,[{key:"CATEGORY",get:function(){return"none"}},{key:"Position",get:function(){return{LEFT:1,RIGHT:2,ABOVE:3,BELOW:4}}},{key:"PositionString",get:function(){return{above:e.Position.ABOVE,below:e.Position.BELOW,left:e.Position.LEFT,right:e.Position.RIGHT}}}]),ie(e,[{key:"getCategory",value:function(){return e.CATEGORY}},{key:"getWidth",value:function(){return this.width}},{key:"setWidth",value:function(t){return this.width=t,this}},{key:"getNote",value:function(){return this.note}},{key:"setNote",value:function(t){return this.note=t,this}},{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(t){return this.index=t,this}},{key:"getModifierContext",value:function(){return this.modifier_context}},{key:"setModifierContext",value:function(t){return this.modifier_context=t,this}},{key:"getPosition",value:function(){return this.position}},{key:"setPosition",value:function(t){return this.position="string"==typeof t?e.PositionString[t]:t,this}},{key:"setTextLine",value:function(t){return this.text_line=t,this}},{key:"setYShift",value:function(t){return this.y_shift=t,this}},{key:"setSpacingFromNextModifier",value:function(t){this.spacingFromNextModifier=t}},{key:"getSpacingFromNextModifier",value:function(){return this.spacingFromNextModifier}},{key:"setXShift",value:function(t){this.x_shift=0,this.position===e.Position.LEFT?this.x_shift-=t:this.x_shift+=t}},{key:"getXShift",value:function(){return this.x_shift}},{key:"draw",value:function(){throw this.checkContext(),new h.RERR("MethodNotImplemented","draw() not implemented for this modifier.")}},{key:"alignSubNotesWithNote",value:function(t,e){var n=e.getTickContext(),i=n.getExtraPx(),r=n.getX()-i.left-i.extraLeft+this.getSpacingFromNextModifier();t.forEach((function(t){var n=t.getTickContext();t.setStave(e.stave),n.setXOffset(r)}))}}]),e}(x);function se(t){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ae(t){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ue(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function le(t,e,n){return e&&ue(t.prototype,e),n&&ue(t,n),t}function ce(t,e){return(ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var he=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e){return!e||"object"!==se(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,ae(e).call(this))).setAttribute("type","Dot"),t.note=null,t.index=null,t.position=oe.Position.RIGHT,t.radius=2,t.setWidth(5),t.dot_shiftY=0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ce(t,e)}(e,t),le(e,null,[{key:"format",value:function(t,e){var n=e.right_shift;if(!t||0===t.length)return!1;for(var i=[],r={},o=0;o<t.length;++o){var s=t[o],a=s.getNote(),u=void 0,l=void 0;"function"==typeof a.getKeyProps?l=(u=a.getKeyProps()[s.getIndex()]).displaced?a.getExtraRightPx():0:(u={line:.5},l=0);var c=a.getAttribute("id");i.push({line:u.line,note:a,note_id:c,dot:s}),r[c]=Math.max(r[c]||l,l)}i.sort((function(t,e){return e.line-t.line}));for(var h=n,f=0,d=null,p=null,m=null,b=0,v=0;v<i.length;++v){var y=i[v],g=y.dot,S=y.note,w=y.line;w===d&&S===p||(h=r[y.note_id]),S.isRest()||w===d||(.5===Math.abs(w%1)?b=0:(b=.5,null==p||p.isRest()||d-w!=.5?w+b===m&&(b=-.5):b=-.5)),S.isRest()?g.dot_shiftY+=-b:g.dot_shiftY=-b,m=w+b,g.setXShift(h),f=(h+=g.getWidth()+1)>f?h:f,d=w,p=S}return e.right_shift+=f,!0}},{key:"CATEGORY",get:function(){return"dots"}}]),le(e,[{key:"getCategory",value:function(){return e.CATEGORY}},{key:"setNote",value:function(t){this.note=t,"gracenotes"===this.note.getCategory()&&(this.radius*=.5,this.setWidth(3))}},{key:"setDotShiftY",value:function(t){return this.dot_shiftY=t,this}},{key:"draw",value:function(){if(this.checkContext(),this.setRendered(),!this.note||null===this.index)throw new h.RERR("NoAttachedNote","Can't draw dot without a note and index.");var t=this.note.stave.options.spacing_between_lines_px,e=this.note.getModifierStartXY(this.position,this.index,{forceFlagRight:!0});"tabnotes"===this.note.getCategory()&&(e.y=this.note.getStemExtents().baseY);var n=e.x+this.x_shift+this.width-this.radius,i=e.y+this.y_shift+this.dot_shiftY*t,r=this.context;r.beginPath(),r.arc(n,i,this.radius,0,2*Math.PI,!1),r.fill()}}]),e}(oe);function fe(t){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function de(){return(de=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function pe(t,e,n){return(pe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=me(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function me(t){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function be(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ve(t,e,n){return e&&be(t.prototype,e),n&&be(t,n),t}function ye(t,e){return(ye=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ge(t,e,n){var i=(e.isrest?0:1)*n;t.line+=i,t.maxLine+=i,t.minLine+=i,t.note.setKeyLine(0,t.note.getKeyLine(0)+i)}var Se=function(t){function e(t){var n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==fe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,me(e).call(this,t))).setAttribute("type","StaveNote"),n.keys=t.keys,n.clef=t.clef,n.octave_shift=t.octave_shift,n.beam=null,n.glyph=B.durationToGlyph(n.duration,n.noteType),!n.glyph)throw new h.RuntimeError("BadArguments","Invalid note initialization data (No glyph found): ".concat(JSON.stringify(t)));return n.displaced=!1,n.dot_shiftY=0,n.keyProps=[],n.use_default_head_x=!1,n.note_heads=[],n.modifiers=[],h.Merge(n.render_options,{glyph_font_scale:t.glyph_font_scale||B.DEFAULT_NOTATION_FONT_SCALE,stroke_px:t.stroke_px||e.DEFAULT_LEDGER_LINE_OFFSET}),n.calculateKeyProps(),n.buildStem(),t.auto_stem?n.autoStem():n.setStemDirection(t.stem_direction),n.reset(),n.buildFlag(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ye(t,e)}(e,t),ve(e,null,[{key:"format",value:function(t,n){if(!t||t.length<2)return!1;if(t[0].getStave())return e.formatByY(t,n);for(var i=[],r=0;r<t.length;r++){var o=t[r].getKeyProps(),s=o[0].line,a=o[o.length-1].line,u=t[r].getStemDirection(),l=t[r].getStemLength()/10,c=t[r].getStemMinumumLength()/10,f=void 0;t[r].isRest()?(f=s+t[r].glyph.line_above,a=s-t[r].glyph.line_below):(f=1===u?o[o.length-1].line+l:o[o.length-1].line,a=1===u?o[0].line:o[0].line-l),i.push({line:o[0].line,maxLine:f,minLine:a,isrest:t[r].isRest(),stemDirection:u,stemMax:l,stemMin:c,voice_shift:t[r].getVoiceShiftWidth(),is_displaced:t[r].isDisplaced(),note:t[r]})}var d=i.length,p=i[0],m=d>2?i[1]:null,b=d>2?i[2]:i[1];2===d&&-1===p.stemDirection&&1===b.stemDirection&&(p=i[1],b=i[0]);var v,y=Math.max(p.voice_shift,b.voice_shift),g=0;if(2===d){var S=p.stemDirection===b.stemDirection?0:.5;return p.stemDirection===b.stemDirection&&p.minLine<=b.maxLine&&(p.isrest||(v=Math.abs(p.line-(b.maxLine+.5)),v=Math.max(v,p.stemMin),p.minLine=p.line-v,p.note.setStemLength(10*v))),p.minLine<=b.maxLine+S&&(p.isrest?ge(p,b,1):b.isrest?ge(b,p,-1):(g=y,p.stemDirection===b.stemDirection?p.note.setXShift(g+3):b.note.setXShift(g))),!0}return null!==m&&m.minLine<b.maxLine+.5&&(m.isrest||(v=Math.abs(m.line-(b.maxLine+.5)),v=Math.max(v,m.stemMin),m.minLine=m.line-v,m.note.setStemLength(10*v))),m.isrest&&!p.isrest&&!b.isrest&&(p.minLine<=m.maxLine||m.minLine<=b.maxLine)?(m.maxLine-m.minLine<p.minLine-b.maxLine?function(t,e,n){var i=t.line-h.MidLine(e.minLine,n.maxLine);t.note.setKeyLine(0,t.note.getKeyLine(0)-i),t.line-=i,t.maxLine-=i,t.minLine-=i}(m,p,b):m.note.setXShift(g=y+3),!0):p.isrest&&m.isrest&&b.isrest?(ge(p,m,1),ge(b,m,-1),!0):(m.isrest&&p.isrest&&m.minLine<=b.maxLine&&ge(m,b,1),m.isrest&&b.isrest&&p.minLine<=m.maxLine&&ge(m,p,-1),p.isrest&&p.minLine<=m.maxLine&&ge(p,m,1),b.isrest&&m.minLine<=b.maxLine&&ge(b,m,-1),(!p.isrest&&!m.isrest&&p.minLine<=m.maxLine+.5||!m.isrest&&!b.isrest&&m.minLine<=b.maxLine)&&m.note.setXShift(g=y+3),!0)}},{key:"formatByY",value:function(t,e){for(var n=!0,i=0;i<t.length;i++)n=n&&null!=t[i].getStave();if(!n)throw new h.RERR("Stave Missing","All notes must have a stave - Vex.Flow.ModifierContext.formatMultiVoice!");for(var r=0,o=0;o<t.length-1;o++){var s=t[o],a=t[o+1];s.getStemDirection()===nt.DOWN&&(s=t[o+1],a=t[o]);var u=s.getKeyProps(),l=a.getKeyProps(),c=s.getStave().getYForLine(5-u[0].line+.5);a.getStave().getYForLine(5-l[l.length-1].line-.5)-c<0&&(r=s.getVoiceShiftWidth()+2,a.setXShift(r))}e.right_shift+=r}},{key:"postFormat",value:function(t){return!!t&&(t.forEach((function(t){return t.postFormat()})),!0)}},{key:"CATEGORY",get:function(){return"stavenotes"}},{key:"STEM_UP",get:function(){return nt.UP}},{key:"STEM_DOWN",get:function(){return nt.DOWN}},{key:"DEFAULT_LEDGER_LINE_OFFSET",get:function(){return 3}}]),ve(e,[{key:"reset",value:function(){var t=this;pe(me(e.prototype),"reset",this).call(this);var n=this.note_heads.map((function(t){return t.getStyle()}));this.buildNoteHeads(),this.note_heads.forEach((function(t,e){return t.setStyle(n[e])})),this.stave&&this.note_heads.forEach((function(e){return e.setStave(t.stave)})),this.calcExtraPx()}},{key:"setBeam",value:function(t){return this.beam=t,this.calcExtraPx(),this}},{key:"getCategory",value:function(){return e.CATEGORY}},{key:"buildStem",value:function(){var t=this.getGlyph();this.setStem(new nt({stem_up_y_offset:t.stem_up_y_offset,stem_down_y_offset:t.stem_down_y_offset,hide:!!this.isRest()}))}},{key:"buildNoteHeads",value:function(){this.note_heads=[];var t,e,n,i=this.getStemDirection(),r=this.getKeys(),o=null,s=null,a=!1;i===nt.UP?(t=0,e=r.length,n=1):i===nt.DOWN&&(t=r.length-1,e=-1,n=-1);for(var u=t;u!==e;u+=n){var l=this.keyProps[u],c=l.line;null===o?o=c:0===(s=Math.abs(o-c))||.5===s?a=!a:(a=!1,this.use_default_head_x=!0),o=c;var h=new Kt({duration:this.duration,note_type:this.noteType,displaced:a,stem_direction:i,custom_glyph_code:l.code,glyph_font_scale:this.render_options.glyph_font_scale,x_shift:l.shift_right,line:l.line});this.note_heads[u]=h}}},{key:"autoStem",value:function(){this.minLine=this.keyProps[0].line,this.maxLine=this.keyProps[this.keyProps.length-1].line,this.setStemDirection((this.minLine+this.maxLine)/2<3?nt.UP:nt.DOWN)}},{key:"calculateKeyProps",value:function(){for(var t=null,e=0;e<this.keys.length;++e){var n=this.keys[e];this.glyph.rest&&(this.glyph.position=n);var i=B.keyProperties(n,this.clef,{octave_shift:this.octave_shift||0});if(!i)throw new h.RuntimeError("BadArguments","Invalid key for note properties: ".concat(n));"R"===i.key&&(i.line="1"===this.duration||"w"===this.duration?4:3);var r=i.line;null===t?t=r:.5===Math.abs(t-r)&&(this.displaced=!0,i.displaced=!0,this.keyProps.length>0&&(this.keyProps[e-1].displaced=!0)),t=r,this.keyProps.push(i)}t=-1/0,this.keyProps.forEach((function(e){e.line<t&&h.W("Unsorted keys in note will be sorted. See https://github.com/0xfe/vexflow/issues/104 for details."),t=e.line})),this.keyProps.sort((function(t,e){return t.line-e.line}))}},{key:"getBoundingBox",value:function(){if(!this.preFormatted)throw new h.RERR("UnformattedNote","Can't call getBoundingBox on an unformatted note.");var t=this.getMetrics(),e=t.width,n=t.modLeftPx,i=t.extraLeftPx,r=this.getAbsoluteX()-n-i,o=0,s=0,a=this.getStave().getSpacingBetweenLines()/2,u=2*a;if(this.isRest()){var l=this.ys[0],c=B.durationToFraction(this.duration);c.equals(1)||c.equals(2)?(o=l-a,s=l+a):(o=l-this.glyph.line_above*u,s=l+this.glyph.line_below*u)}else if(this.glyph.stem){var f=this.getStemExtents();f.baseY+=a*this.stem_direction,o=Math.min(f.topY,f.baseY),s=Math.max(f.topY,f.baseY)}else{o=null,s=null;for(var d=0;d<this.ys.length;++d){var p=this.ys[d];0===d?(o=p,s=p):(o=Math.min(p,o),s=Math.max(p,s))}o-=a,s+=a}return new A(r,o,e,s-o)}},{key:"getLineNumber",value:function(t){if(!this.keyProps.length)throw new h.RERR("NoKeyProps","Can't get bottom note line, because note is not initialized properly.");for(var e=this.keyProps[0].line,n=0;n<this.keyProps.length;n++){var i=this.keyProps[n].line;t?i>e&&(e=i):i<e&&(e=i)}return e}},{key:"isRest",value:function(){return this.glyph.rest}},{key:"isChord",value:function(){return!this.isRest()&&this.keys.length>1}},{key:"hasStem",value:function(){return this.glyph.stem}},{key:"hasFlag",value:function(){return pe(me(e.prototype),"hasFlag",this).call(this)&&!this.isRest()}},{key:"getStemX",value:function(){return"r"===this.noteType?this.getCenterGlyphX():pe(me(e.prototype),"getStemX",this).call(this)+nt.WIDTH/(2*-this.getStemDirection())}},{key:"getYForTopText",value:function(t){var e=this.getStemExtents();return Math.min(this.stave.getYForTopText(t),e.topY-this.render_options.annotation_spacing*(t+1))}},{key:"getYForBottomText",value:function(t){var e=this.getStemExtents();return Math.max(this.stave.getYForTopText(t),e.baseY+this.render_options.annotation_spacing*t)}},{key:"setStave",value:function(t){pe(me(e.prototype),"setStave",this).call(this,t);var n=this.note_heads.map((function(e){return e.setStave(t),e.getY()}));if(this.setYs(n),this.stem){var i=this.getNoteHeadBounds();this.stem.setYBounds(i.y_top,i.y_bottom)}return this}},{key:"getKeys",value:function(){return this.keys}},{key:"getKeyProps",value:function(){return this.keyProps}},{key:"isDisplaced",value:function(){return this.displaced}},{key:"setNoteDisplaced",value:function(t){return this.displaced=t,this}},{key:"getTieRightX",value:function(){var t=this.getAbsoluteX();return t+=this.getGlyphWidth()+this.x_shift+this.extraRightPx,this.modifierContext&&(t+=this.modifierContext.getExtraRightPx()),t}},{key:"getTieLeftX",value:function(){return this.getAbsoluteX()+(this.x_shift-this.extraLeftPx)}},{key:"getLineForRest",value:function(){var t=this.keyProps[0].line;if(this.keyProps.length>1){var e=this.keyProps[this.keyProps.length-1].line,n=Math.max(t,e),i=Math.min(t,e);t=h.MidLine(n,i)}return t}},{key:"getModifierStartXY",value:function(t,e,n){if(n=n||{},!this.preFormatted)throw new h.RERR("UnformattedNote","Can't call GetModifierStartXY on an unformatted note");if(0===this.ys.length)throw new h.RERR("NoYValues","No Y-Values calculated for this note.");var i=oe.Position,r=i.ABOVE,o=i.BELOW,s=0;return t===i.LEFT?s=-2:t===i.RIGHT?(s=this.getGlyphWidth()+this.x_shift+2,this.stem_direction===nt.UP&&this.hasFlag()&&(n.forceFlagRight||function(t,e){return e===(t.getStemDirection()===nt.UP?t.keyProps.length-1:0)}(this,e))&&(s+=this.flag.getMetrics().width)):t!==o&&t!==r||(s=this.getGlyphWidth()/2),{x:this.getAbsoluteX()+s,y:this.ys[e]}}},{key:"setStyle",value:function(t){pe(me(e.prototype),"setStyle",this).call(this,t),this.note_heads.forEach((function(e){return e.setStyle(t)})),this.stem.setStyle(t)}},{key:"setStemStyle",value:function(t){this.getStem().setStyle(t)}},{key:"getStemStyle",value:function(){return this.stem.getStyle()}},{key:"setLedgerLineStyle",value:function(t){this.ledgerLineStyle=t}},{key:"getLedgerLineStyle",value:function(){return this.ledgerLineStyle}},{key:"setFlagStyle",value:function(t){this.flagStyle=t}},{key:"getFlagStyle",value:function(){return this.flagStyle}},{key:"setKeyStyle",value:function(t,e){return this.note_heads[t].setStyle(e),this}},{key:"setKeyLine",value:function(t,e){return this.keyProps[t].line=e,this.reset(),this}},{key:"getKeyLine",value:function(t){return this.keyProps[t].line}},{key:"addToModifierContext",value:function(t){this.setModifierContext(t);for(var e=0;e<this.modifiers.length;++e)this.modifierContext.addModifier(this.modifiers[e]);return this.modifierContext.addModifier(this),this.setPreFormatted(!1),this}},{key:"addModifier",value:function(t,e){return e.setNote(this),e.setIndex(t),this.modifiers.push(e),this.setPreFormatted(!1),this}},{key:"addAccidental",value:function(t,e){return this.addModifier(t,e)}},{key:"addArticulation",value:function(t,e){return this.addModifier(t,e)}},{key:"addAnnotation",value:function(t,e){return this.addModifier(t,e)}},{key:"addDot",value:function(t){var e=new he;return e.setDotShiftY(this.glyph.dot_shiftY),this.dots++,this.addModifier(t,e)}},{key:"addDotToAll",value:function(){for(var t=0;t<this.keys.length;++t)this.addDot(t);return this}},{key:"getAccidentals",value:function(){return this.modifierContext.getModifiers("accidentals")}},{key:"getDots",value:function(){return this.modifierContext.getModifiers("dots")}},{key:"getVoiceShiftWidth",value:function(){return this.getGlyphWidth()*(this.displaced?2:1)}},{key:"calcExtraPx",value:function(){this.setExtraLeftPx(this.displaced&&this.stem_direction===nt.DOWN?this.getGlyphWidth():0),this.setExtraRightPx(!this.hasFlag()&&this.displaced&&this.stem_direction===nt.UP?this.getGlyphWidth():0)}},{key:"preFormat",value:function(){if(!this.preFormatted){this.modifierContext&&this.modifierContext.preFormat();var t=this.getGlyphWidth()+this.extraLeftPx+this.extraRightPx;this.glyph.flag&&null===this.beam&&this.stem_direction===nt.UP&&(t+=this.getGlyphWidth()),this.setWidth(t),this.setPreFormatted(!0)}}},{key:"getNoteHeadBounds",value:function(){var t=null,e=null,n=null,i=null,r=this.stave.getNumLines(),o=1,s=!1,a=!1,u=r,l=o;return this.note_heads.forEach((function(c){var h=c.getLine(),f=c.getY();(null===t||f<t)&&(t=f),(null===e||f>e)&&(e=f),null===i&&c.isDisplaced()&&(i=c.getAbsoluteX()),null!==n||c.isDisplaced()||(n=c.getAbsoluteX()),r=h>r?h:r,o=h<o?h:o,c.isDisplaced()?(s=!1===s?h:Math.max(h,s),a=!1===a?h:Math.min(h,a)):(u=Math.max(h,u),l=Math.min(h,l))}),this),{y_top:t,y_bottom:e,displaced_x:i,non_displaced_x:n,highest_line:r,lowest_line:o,highest_displaced_line:s,lowest_displaced_line:a,highest_non_displaced_line:u,lowest_non_displaced_line:l}}},{key:"getNoteHeadBeginX",value:function(){return this.getAbsoluteX()+this.x_shift}},{key:"getNoteHeadEndX",value:function(){return this.getNoteHeadBeginX()+this.getGlyphWidth()}},{key:"drawLedgerLines",value:function(){var t=this.stave,e=this.glyph,n=this.render_options.stroke_px,i=this.context,r=e.getWidth()+2*n,o=2*(e.getWidth()+n)-nt.WIDTH/2;if(!this.isRest()){if(!i)throw new h.RERR("NoCanvasContext","Can't draw without a canvas context.");var s=this.getNoteHeadBounds(),a=s.highest_line,u=s.lowest_line,l=s.highest_displaced_line,c=s.highest_non_displaced_line,f=s.lowest_displaced_line,d=s.lowest_non_displaced_line,p=s.displaced_x,m=s.non_displaced_x,b=Math.min(p,m),v=function(t,e,s){var a;a=s&&e?b-n:e?m-n:p-n;var u=e&&s?o:r;i.beginPath(),i.moveTo(a,t),i.lineTo(a+u,t),i.stroke()},y=de({},t.getStyle()||{},this.getLedgerLineStyle()||{});this.applyStyle(i,y);for(var g=6;g<=a;++g){var S=null!==m&&g<=c,w=null!==p&&g<=l;v(t.getYForNote(g),S,w)}for(var _=0;_>=u;--_){var x=null!==m&&_>=d,k=null!==p&&_>=f;v(t.getYForNote(_),x,k)}this.restoreStyle(i,y)}}},{key:"drawModifiers",value:function(){if(!this.context)throw new h.RERR("NoCanvasContext","Can't draw without a canvas context.");var t=this.context;t.openGroup("modifiers");for(var e=0;e<this.modifiers.length;e++){var n=this.modifiers[e],i=this.note_heads[n.getIndex()],r=i.getStyle();i.applyStyle(t,r),n.setContext(t),n.drawWithStyle(),i.restoreStyle(t,r)}t.closeGroup()}},{key:"drawFlag",value:function(){var t=this.stem,e=this.beam,n=this.context;if(!n)throw new h.RERR("NoCanvasContext","Can't draw without a canvas context.");var i=null===e;if(this.getGlyph().flag&&i){var r=this.getNoteHeadBounds(),o=r.y_top,s=r.y_bottom,a=t.getHeight(),u=this.getStemX(),l=this.getStemDirection()===nt.DOWN?o-a+2:s-a-2;n.openGroup("flag",null,{pointerBBox:!0}),this.applyStyle(n,this.getFlagStyle()||!1),this.flag.render(n,u,l),this.restoreStyle(n,this.getFlagStyle()||!1),n.closeGroup()}}},{key:"drawNoteHeads",value:function(){var t=this;this.note_heads.forEach((function(e){t.context.openGroup("notehead",null,{pointerBBox:!0}),e.setContext(t.context).draw(),t.context.closeGroup()}))}},{key:"drawStem",value:function(t){if(!this.context)throw new h.RERR("NoCanvasContext","Can't draw without a canvas context.");t&&this.setStem(new nt(t)),this.context.openGroup("stem",null,{pointerBBox:!0}),this.stem.setContext(this.context).draw(),this.context.closeGroup()}},{key:"draw",value:function(){if(!this.context)throw new h.RERR("NoCanvasContext","Can't draw without a canvas context.");if(!this.stave)throw new h.RERR("NoStave","Can't draw without a stave.");if(0===this.ys.length)throw new h.RERR("NoYValues","Can't draw note without Y values.");var t=this.getNoteHeadBeginX(),e=this.hasStem()&&!this.beam;this.note_heads.forEach((function(e){return e.setX(t)}));var n=this.getStemX();this.stem.setNoteHeadXBounds(n,n),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Se.DEBUG&&h.L("Vex.Flow.StaveNote",e)}("Rendering ",this.isChord()?"chord :":"note :",this.keys),this.drawLedgerLines(),this.applyStyle(),this.setAttribute("el",this.context.openGroup("stavenote",this.getAttribute("id"))),this.context.openGroup("note",null,{pointerBBox:!0}),e&&this.drawStem(),this.drawNoteHeads(),this.drawFlag(),this.context.closeGroup(),this.drawModifiers(),this.context.closeGroup(),this.restoreStyle(),this.setRendered()}}]),e}($t);function we(t){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _e(t){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ke(t,e,n){return e&&xe(t.prototype,e),n&&xe(t,n),t}function Ee(t,e){return(Ee=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pe=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==we(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,_e(e).call(this))).setAttribute("type","FretHandFinger"),n.note=null,n.index=null,n.finger=t,n.width=7,n.position=oe.Position.LEFT,n.x_shift=0,n.y_shift=0,n.x_offset=0,n.y_offset=0,n.font={family:"sans-serif",size:9,weight:"bold"},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ee(t,e)}(e,t),ke(e,null,[{key:"format",value:function(t,e){var n=e.left_shift,i=e.right_shift;if(!t||0===t.length)return!1;for(var r=[],o=null,s=0,a=0,u=0;u<t.length;++u){var l=t[u],c=l.getNote(),h=l.getPosition(),f=c.getKeyProps()[l.getIndex()];if(c!==o){for(var d=0;d<c.keys.length;++d){var p=c.getKeyProps()[d];0===n&&(s=p.displaced?c.getExtraLeftPx():s),0===i&&(a=p.displaced?c.getExtraRightPx():a)}o=c}r.push({note:c,num:l,pos:h,line:f.line,shiftL:s,shiftR:a})}r.sort((function(t,e){return e.line-t.line}));for(var m=0,b=0,v=0,y=0,g=null,S=null,w=0;w<r.length;++w){var _=0,x=r[w],k=x.note,E=x.pos,P=x.num,A=x.line;A===g&&k===S||(m=n+x.shiftL,b=i+x.shiftR);var L=P.getWidth()+1;E===oe.Position.LEFT?(P.setXShift(n+m),v=(_=n+L)>v?_:v):E===oe.Position.RIGHT&&(P.setXShift(b),y=(_=a+L)>y?_:y),g=A,S=k}return e.left_shift+=v,e.right_shift+=y,!0}},{key:"CATEGORY",get:function(){return"frethandfinger"}}]),ke(e,[{key:"getCategory",value:function(){return e.CATEGORY}},{key:"setFretHandFinger",value:function(t){return this.finger=t,this}},{key:"setOffsetX",value:function(t){return this.x_offset=t,this}},{key:"setOffsetY",value:function(t){return this.y_offset=t,this}},{key:"draw",value:function(){if(this.checkContext(),!this.note||null==this.index)throw new h.RERR("NoAttachedNote","Can't draw string number without a note and index.");this.setRendered();var t=this.context,e=this.note.getModifierStartXY(this.position,this.index),n=e.x+this.x_shift+this.x_offset,i=e.y+this.y_shift+this.y_offset+5;switch(this.position){case oe.Position.ABOVE:n-=4,i-=12;break;case oe.Position.BELOW:n-=2,i+=10;break;case oe.Position.LEFT:n-=this.width;break;case oe.Position.RIGHT:n+=1;break;default:throw new h.RERR("InvalidPostion","The position ".concat(this.position," does not exist"))}t.save(),t.setFont(this.font.family,this.font.size,this.font.weight),t.fillText(""+this.finger,n,i),t.restore()}}]),e}(oe);function Ae(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Le=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"NUM_TONES",get:function(){return 12}},{key:"roots",get:function(){return["c","d","e","f","g","a","b"]}},{key:"root_values",get:function(){return[0,2,4,5,7,9,11]}},{key:"root_indices",get:function(){return{c:0,d:1,e:2,f:3,g:4,a:5,b:6}}},{key:"canonical_notes",get:function(){return["c","c#","d","d#","e","f","f#","g","g#","a","a#","b"]}},{key:"diatonic_intervals",get:function(){return["unison","m2","M2","m3","M3","p4","dim5","p5","m6","M6","b7","M7","octave"]}},{key:"diatonic_accidentals",get:function(){return{unison:{note:0,accidental:0},m2:{note:1,accidental:-1},M2:{note:1,accidental:0},m3:{note:2,accidental:-1},M3:{note:2,accidental:0},p4:{note:3,accidental:0},dim5:{note:4,accidental:-1},p5:{note:4,accidental:0},m6:{note:5,accidental:-1},M6:{note:5,accidental:0},b7:{note:6,accidental:-1},M7:{note:6,accidental:0},octave:{note:7,accidental:0}}}},{key:"intervals",get:function(){return{u:0,unison:0,m2:1,b2:1,min2:1,S:1,H:1,2:2,M2:2,maj2:2,T:2,W:2,m3:3,b3:3,min3:3,M3:4,3:4,maj3:4,4:5,p4:5,"#4":6,b5:6,aug4:6,dim5:6,5:7,p5:7,"#5":8,b6:8,aug5:8,6:9,M6:9,maj6:9,b7:10,m7:10,min7:10,dom7:10,M7:11,maj7:11,8:12,octave:12}}},{key:"scales",get:function(){return{major:[2,2,1,2,2,2,1],dorian:[2,1,2,2,2,1,2],mixolydian:[2,2,1,2,2,1,2],minor:[2,1,2,2,1,2,2]}}},{key:"scaleTypes",get:function(){return{M:t.scales.major,m:t.scales.minor}}},{key:"accidentals",get:function(){return["bb","b","n","#","##"]}},{key:"noteValues",get:function(){return{c:{root_index:0,int_val:0},cn:{root_index:0,int_val:0},"c#":{root_index:0,int_val:1},"c##":{root_index:0,int_val:2},cb:{root_index:0,int_val:11},cbb:{root_index:0,int_val:10},d:{root_index:1,int_val:2},dn:{root_index:1,int_val:2},"d#":{root_index:1,int_val:3},"d##":{root_index:1,int_val:4},db:{root_index:1,int_val:1},dbb:{root_index:1,int_val:0},e:{root_index:2,int_val:4},en:{root_index:2,int_val:4},"e#":{root_index:2,int_val:5},"e##":{root_index:2,int_val:6},eb:{root_index:2,int_val:3},ebb:{root_index:2,int_val:2},f:{root_index:3,int_val:5},fn:{root_index:3,int_val:5},"f#":{root_index:3,int_val:6},"f##":{root_index:3,int_val:7},fb:{root_index:3,int_val:4},fbb:{root_index:3,int_val:3},g:{root_index:4,int_val:7},gn:{root_index:4,int_val:7},"g#":{root_index:4,int_val:8},"g##":{root_index:4,int_val:9},gb:{root_index:4,int_val:6},gbb:{root_index:4,int_val:5},a:{root_index:5,int_val:9},an:{root_index:5,int_val:9},"a#":{root_index:5,int_val:10},"a##":{root_index:5,int_val:11},ab:{root_index:5,int_val:8},abb:{root_index:5,int_val:7},b:{root_index:6,int_val:11},bn:{root_index:6,int_val:11},"b#":{root_index:6,int_val:0},"b##":{root_index:6,int_val:1},bb:{root_index:6,int_val:10},bbb:{root_index:6,int_val:9}}}}],(n=[{key:"isValidNoteValue",value:function(e){return!(null==e||e<0||e>=t.NUM_TONES)}},{key:"isValidIntervalValue",value:function(t){return this.isValidNoteValue(t)}},{key:"getNoteParts",value:function(t){if(!t||t.length<1)throw new h.RERR("BadArguments","Invalid note name: "+t);if(t.length>3)throw new h.RERR("BadArguments","Invalid note name: "+t);var e=t.toLowerCase(),n=/^([cdefgab])(b|bb|n|#|##)?$/.exec(e);if(null!=n)return{root:n[1],accidental:n[2]};throw new h.RERR("BadArguments","Invalid note name: "+t)}},{key:"getKeyParts",value:function(t){if(!t||t.length<1)throw new h.RERR("BadArguments","Invalid key: "+t);var e=t.toLowerCase(),n=/^([cdefgab])(b|#)?(mel|harm|m|M)?$/.exec(e);if(null!=n){var i=n[3];return i||(i="M"),{root:n[1],accidental:n[2],type:i}}throw new h.RERR("BadArguments","Invalid key: ".concat(t))}},{key:"getNoteValue",value:function(e){var n=t.noteValues[e];if(null==n)throw new h.RERR("BadArguments","Invalid note name: ".concat(e));return n.int_val}},{key:"getIntervalValue",value:function(e){var n=t.intervals[e];if(null==n)throw new h.RERR("BadArguments","Invalid interval name: ".concat(e));return n}},{key:"getCanonicalNoteName",value:function(e){if(!this.isValidNoteValue(e))throw new h.RERR("BadArguments","Invalid note value: ".concat(e));return t.canonical_notes[e]}},{key:"getCanonicalIntervalName",value:function(e){if(!this.isValidIntervalValue(e))throw new h.RERR("BadArguments","Invalid interval value: ".concat(e));return t.diatonic_intervals[e]}},{key:"getRelativeNoteValue",value:function(e,n,i){if(null==i&&(i=1),1!==i&&-1!==i)throw new h.RERR("BadArguments","Invalid direction: ".concat(i));var r=(e+i*n)%t.NUM_TONES;return r<0&&(r+=t.NUM_TONES),r}},{key:"getRelativeNoteName",value:function(e,n){var i=this.getNoteParts(e),r=this.getNoteValue(i.root),o=n-r;if(Math.abs(o)>t.NUM_TONES-3){var s=1;o>0&&(s=-1);var a=(n+1+(r+1))%t.NUM_TONES*s;if(Math.abs(a)>2)throw new h.RERR("BadArguments","Notes not related: ".concat(e,", ").concat(n,")"));o=a}if(Math.abs(o)>2)throw new h.RERR("BadArguments","Notes not related: ".concat(e,", ").concat(n,")"));var u=i.root;if(o>0)for(var l=1;l<=o;++l)u+="#";else if(o<0)for(var c=-1;c>=o;--c)u+="b";return u}},{key:"getScaleTones",value:function(t,e){for(var n=[t],i=t,r=0;r<e.length;r+=1)(i=this.getRelativeNoteValue(i,e[r]))!==t&&n.push(i);return n}},{key:"getIntervalBetween",value:function(e,n,i){if(null==i&&(i=1),1!==i&&-1!==i)throw new h.RERR("BadArguments","Invalid direction: ".concat(i));if(!this.isValidNoteValue(e)||!this.isValidNoteValue(n))throw new h.RERR("BadArguments","Invalid notes: ".concat(e,", ").concat(n));var r=1===i?n-e:e-n;return r<0&&(r+=t.NUM_TONES),r}},{key:"createScaleMap",value:function(e){var n=this.getKeyParts(e),i=t.scaleTypes[n.type],r=n.root;if(n.accidental&&(r+=n.accidental),!i)throw new h.RERR("BadArguments","Unsupported key type: "+e);for(var o=this.getScaleTones(this.getNoteValue(r),i),s=t.root_indices[n.root],a={},u=0;u<t.roots.length;++u){var l=t.roots[(s+u)%t.roots.length],c=this.getRelativeNoteName(l,o[u]);1===c.length&&(c+="n"),a[l]=c}return a}}])&&Ae(e.prototype,n),i&&Ae(e,i),t}();function Te(t){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Me(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ne(t,e){return!e||"object"!==Te(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ie(t){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Re(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Oe(t,e,n){return e&&Re(t.prototype,e),n&&Re(t,n),t}function Fe(t,e){return(Fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Be(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];je.DEBUG&&h.L("Vex.Flow.Accidental",e)}var De=function(t){return t.getMetrics().width},je=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(Ce(this,e),(t=Ne(this,Ie(e).call(this))).setAttribute("type","Accidental"),Be("New accidental: ",n),t.note=null,t.index=null,t.type=n,t.position=oe.Position.LEFT,t.render_options={font_scale:38,stroke_px:3,parenLeftPadding:2,parenRightPadding:2},t.accidental=B.accidentalCodes(t.type),!t.accidental)throw new h.RERR("ArgumentError","Unknown accidental type: ".concat(n));return t.cautionary=!1,t.parenLeft=null,t.parenRight=null,t.reset(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fe(t,e)}(e,t),Oe(e,null,[{key:"format",value:function(t,e){var n=this,i=e.left_shift+1;if(t&&0!==t.length){for(var r=[],o=null,s=0,a=0;a<t.length;++a){var u=t[a],l=u.getNote(),c=l.getStave(),h=l.getKeyProps()[u.getIndex()];if(l!==o){for(var f=0;f<l.keys.length;++f)s=l.getKeyProps()[f].displaced?l.getExtraLeftPx():s;o=l}if(null!==c){var d=c.options.spacing_between_lines_px,p=c.getYForLine(h.line),m=Math.round(p/d*2)/2;r.push({y:p,line:m,shift:s,acc:u,lineSpace:d})}else r.push({line:h.line,shift:s,acc:u})}r.sort((function(t,e){return e.line-t.line}));for(var b=[],v=0,y=null,g=0;g<r.length;g++){var S=r[g];null!==y&&y===S.line||b.push({line:S.line,flatLine:!0,dblSharpLine:!0,numAcc:0,width:0}),"b"!==S.acc.type&&"bb"!==S.acc.type&&(b[b.length-1].flatLine=!1),"##"!==S.acc.type&&(b[b.length-1].dblSharpLine=!1),b[b.length-1].numAcc++,b[b.length-1].width+=S.acc.getWidth()+3,v=S.shift>v?S.shift:v,y=S.line}for(var w=0,_=function(t){for(var e=!1,i=t,r=t;r+1<b.length&&!e;)n.checkCollision(b[r],b[r+1])?r++:e=!0;var o=function(t){return b[i+t]},s=function(t){return t.map(o)},a=function(e,n){var i=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),2!==n.length);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(s([e,n]).map((function(t){return t.line})));return x=t,i[0]-i[1]},u=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.map(s).every((function(t){return!n.checkCollision.apply(n,Me(t))}))},l=r-i+1,c=n.checkCollision(b[i],b[r])?"a":"b";switch(l){case 3:"a"===c&&.5===a(1,2)&&.5!==a(0,1)&&(c="second_on_bottom");break;case 4:u([0,2],[1,3])&&(c="spaced_out_tetrachord");break;case 5:"b"===c&&u([1,3])&&(c="spaced_out_pentachord",u([0,2],[2,4])&&(c="very_spaced_out_pentachord"));break;case 6:u([0,3],[1,4],[2,5])&&(c="spaced_out_hexachord"),u([0,2],[2,4],[1,3],[3,5])&&(c="very_spaced_out_hexachord")}var h=void 0,f=void 0;if(l>=7){for(var d=2,p=!0;!0===p;){p=!1;for(var m=0;m+d<b.length;m++)if(n.checkCollision(b[m],b[m+d])){p=!0,d++;break}}for(h=t;h<=r;h++)b[h].column=f=(h-t)%d+1,w=w>f?w:f}else for(h=t;h<=r;h++)b[h].column=f=B.accidentalColumnsTable[l][c][h-t],w=w>f?w:f;x=t=r},x=0;x<b.length;x++)_(x);for(var k=[],E=[],P=0;P<=w;P++)k[P]=0,E[P]=0;k[0]=v+i,E[0]=v+i,b.forEach((function(t){t.width>k[t.column]&&(k[t.column]=t.width)}));for(var A=1;A<k.length;A++)E[A]=k[A]+E[A-1];var L=E[E.length-1],T=0;b.forEach((function(t){for(var e=0,n=T+t.numAcc;T<n;T++){var i=E[t.column-1]+e;r[T].acc.setXShift(i),e+=r[T].acc.getWidth()+3,Be("Line, accCount, shift: ",t.line,T,i)}})),e.left_shift+=L}}},{key:"checkCollision",value:function(t,e){var n=e.line-t.line,i=3;n>0?(i=e.flatLine||e.dblSharpLine?2.5:3,t.dblSharpLine&&(n-=.5)):(i=t.flatLine||t.dblSharpLine?2.5:3,e.dblSharpLine&&(n-=.5));var r=Math.abs(n)<i;return Be("Line_1, Line_2, Collision: ",t.line,e.line,r),r}},{key:"applyAccidentals",value:function(t,n){var i=[],r={};t.forEach((function(t){var e=new p(0,1);t.getTickables().forEach((function(t){if(!t.shouldIgnoreTicks()){var n=r[e.value()];n?n.push(t):(i.push(e.value()),r[e.value()]=[t]),e.add(t.getTicks())}}))}));var o=new Le;n||(n="C");var s=o.createScaleMap(n);i.forEach((function(t){var n=[];r[t].forEach((function t(i){i.isRest()||i.shouldIgnoreTicks()||(i.keys.forEach((function(t,r){var a=o.getNoteParts(t.split("/")[0]),u=a.accidental||"n",l=a.root+u,c=s[a.root]===l,h=n.indexOf(l)>-1;if(!c||c&&h){s[a.root]=l;var f=new e(u);i.addAccidental(r,f),n.push(l)}})),i.getModifiers().forEach((function(e){"gracenotegroups"===e.getCategory()&&e.getGraceNotes().forEach(t)})))}))}))}},{key:"CATEGORY",get:function(){return"accidentals"}}]),Oe(e,[{key:"reset",value:function(){var t=this.render_options.font_scale;this.glyph=new O(this.accidental.code,t),this.glyph.setOriginX(1),this.cautionary&&(this.parenLeft=new O(B.accidentalCodes("{").code,t),this.parenRight=new O(B.accidentalCodes("}").code,t),this.parenLeft.setOriginX(1),this.parenRight.setOriginX(1))}},{key:"getCategory",value:function(){return e.CATEGORY}},{key:"getWidth",value:function(){var t=this.cautionary?De(this.parenLeft)+De(this.parenRight)+this.render_options.parenLeftPadding+this.render_options.parenRightPadding:0;return De(this.glyph)+t}},{key:"setNote",value:function(t){if(!t)throw new h.RERR("ArgumentError","Bad note value: ".concat(t));this.note=t,"gracenotes"===this.note.getCategory()&&(this.render_options.font_scale=25,this.reset())}},{key:"setAsCautionary",value:function(){return this.cautionary=!0,this.render_options.font_scale=28,this.reset(),this}},{key:"draw",value:function(){var t=this.context,e=this.type,n=this.position,i=this.note,r=this.index,o=this.cautionary,s=this.x_shift,a=this.y_shift,u=this.glyph,l=this.parenLeft,c=this.parenRight,f=this.render_options,d=f.parenLeftPadding,p=f.parenRightPadding;if(this.checkContext(),!i||null==r)throw new h.RERR("NoAttachedNote","Can't draw accidental without a note and index.");var m=i.getModifierStartXY(n,r),b=m.x+s,v=m.y+a;Be("Rendering: ",e,b,v),o?(c.render(t,b,v),b-=De(c),b-=p,u.render(t,b-=this.accidental.parenRightPaddingAdjustment,v),b-=De(u),l.render(t,b-=d,v)):u.render(t,b,v),this.setRendered()}}]),e}(oe);function Ve(t){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ge(t,e){return!e||"object"!==Ve(e)&&"function"!=typeof e?ze(t):e}function Ue(t){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ze(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function We(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function He(t,e,n){return e&&We(t.prototype,e),n&&We(t,n),t}function qe(t,e){return(qe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ye=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ge(this,Ue(e).call(this))).setAttribute("type","NoteSubGroup"),n.note=null,n.index=null,n.position=oe.Position.LEFT,n.subNotes=t,n.subNotes.forEach((function(t){t.ignore_ticks=!1})),n.width=0,n.preFormatted=!1,n.formatter=new xi,n.voice=new Et({num_beats:4,beat_value:4,resolution:B.RESOLUTION}).setStrict(!1),n.voice.addTickables(n.subNotes),Ge(n,ze(n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qe(t,e)}(e,t),He(e,null,[{key:"format",value:function(t,e){if(!t||0===t.length)return!1;for(var n=0,i=0;i<t.length;++i){var r=t[i];r.preFormat(),n+=r.getWidth()}return e.left_shift+=n,!0}},{key:"CATEGORY",get:function(){return"notesubgroup"}}]),He(e,[{key:"getCategory",value:function(){return e.CATEGORY}},{key:"preFormat",value:function(){this.preFormatted||(this.formatter.joinVoices([this.voice]).format([this.voice],0),this.setWidth(this.formatter.getMinTotalWidth()),this.preFormatted=!0)}},{key:"setNote",value:function(t){this.note=t}},{key:"setWidth",value:function(t){this.width=t}},{key:"getWidth",value:function(){return this.width}},{key:"draw",value:function(){var t=this;this.checkContext();var e=this.getNote();if(!e||null===this.index)throw new h.RuntimeError("NoAttachedNote","Can't draw notes without a parent note and parent note index.");this.setRendered(),this.alignSubNotesWithNote(this.subNotes,e),this.subNotes.forEach((function(e){return e.setContext(t.context).drawWithStyle()}))}}]),e}(oe);function Xe(t){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ke(t){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Je(t,e){return(Je=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ze=function(t){function e(t,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=function(t,e){return!e||"object"!==Xe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Ke(e).call(this))).setAttribute("type","StaveTie"),i.notes=t,i.context=null,i.text=n,i.direction=null,i.render_options={cp1:8,cp2:12,text_shift_x:0,first_x_shift:0,last_x_shift:0,y_shift:7,tie_spacing:0,font:{family:"Arial",size:10,style:""}},i.font=i.render_options.font,i.setNotes(t),i}var n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Je(t,e)}(e,t),(n=[{key:"setFont",value:function(t){return this.font=t,this}},{key:"setDirection",value:function(t){return this.direction=t,this}},{key:"setNotes",value:function(t){if(!t.first_note&&!t.last_note)throw new h.RuntimeError("BadArguments","Tie needs to have either first_note or last_note set.");if(t.first_indices||(t.first_indices=[0]),t.last_indices||(t.last_indices=[0]),t.first_indices.length!==t.last_indices.length)throw new h.RuntimeError("BadArguments","Tied notes must have similar index sizes");return this.first_note=t.first_note,this.first_indices=t.first_indices,this.last_note=t.last_note,this.last_indices=t.last_indices,this}},{key:"isPartial",value:function(){return!this.first_note||!this.last_note}},{key:"renderTie",value:function(t){if(0===t.first_ys.length||0===t.last_ys.length)throw new h.RERR("BadArguments","No Y-values to render");var e=this.context,n=this.render_options.cp1,i=this.render_options.cp2;Math.abs(t.last_x_px-t.first_x_px)<10&&(n=2,i=8);for(var r=this.render_options.first_x_shift,o=this.render_options.last_x_shift,s=this.render_options.y_shift*t.direction,a=0;a<this.first_indices.length;++a){var u=(t.last_x_px+o+(t.first_x_px+r))/2,l=t.first_ys[this.first_indices[a]]+s,c=t.last_ys[this.last_indices[a]]+s;if(isNaN(l)||isNaN(c))throw new h.RERR("BadArguments","Bad indices for tie rendering.");var f=(l+c)/2+n*t.direction,d=(l+c)/2+i*t.direction;e.beginPath(),e.moveTo(t.first_x_px+r,l),e.quadraticCurveTo(u,f,t.last_x_px+o,c),e.quadraticCurveTo(u,d,t.first_x_px+r,l),e.closePath(),e.fill()}}},{key:"renderText",value:function(t,e){if(this.text){var n=(t+e)/2;n-=this.context.measureText(this.text).width/2,this.context.save(),this.context.setFont(this.font.family,this.font.size,this.font.style),this.context.fillText(this.text,n+this.render_options.text_shift_x,(this.first_note||this.last_note).getStave().getYForTopText()-1),this.context.restore()}}},{key:"draw",value:function(){this.checkContext(),this.setRendered();var t,e,n,i,r,o=this.first_note,s=this.last_note;return o?(t=o.getTieRightX()+this.render_options.tie_spacing,r=o.getStemDirection(),n=o.getYs()):(t=s.getStave().getTieStartX(),n=s.getYs(),this.first_indices=this.last_indices),s?(e=s.getTieLeftX()+this.render_options.tie_spacing,r=s.getStemDirection(),i=s.getYs()):(e=o.getStave().getTieEndX(),i=o.getYs(),this.last_indices=this.first_indices),this.direction&&(r=this.direction),this.renderTie({first_x_px:t,last_x_px:e,first_ys:n,last_ys:i,direction:r}),this.renderText(t,e),!0}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(e.prototype,n),e}(x);function Qe(t){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $e(t){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function en(t,e,n){return e&&tn(t.prototype,e),n&&tn(t,n),t}function nn(t,e){return(nn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var rn=function(t){function e(t,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=function(t,e){return!e||"object"!==Qe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,$e(e).call(this,t,n))).setAttribute("type","TabTie"),i.render_options.cp1=9,i.render_options.cp2=11,i.render_options.y_shift=3,i.setNotes(t),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nn(t,e)}(e,t),en(e,null,[{key:"createHammeron",value:function(t){return new e(t,"H")}},{key:"createPulloff",value:function(t){return new e(t,"P")}}]),en(e,[{key:"draw",value:function(){this.checkContext(),this.setRendered();var t,e,n,i,r=this.first_note,o=this.last_note;return r?(t=r.getTieRightX()+this.render_options.tie_spacing,n=r.getYs()):(t=o.getStave().getTieStartX(),n=o.getYs(),this.first_indices=this.last_indices),o?(e=o.getTieLeftX()+this.render_options.tie_spacing,i=o.getYs()):(e=r.getStave().getTieEndX(),i=r.getYs(),this.last_indices=this.first_indices),this.renderTie({first_x_px:t,last_x_px:e,first_ys:n,last_ys:i,direction:-1}),this.renderText(t,e),!0}}]),e}(Ze);function on(t){return(on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sn(t,e){return!e||"object"!==on(e)&&"function"!=typeof e?un(t):e}function an(t){return(an=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function un(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ln(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function cn(t,e,n){return e&&ln(t.prototype,e),n&&ln(t,n),t}function hn(t,e){return(hn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fn=function(t){function e(t,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=sn(this,an(e).call(this))).setAttribute("type","GraceNoteGroup"),i.note=null,i.index=null,i.position=oe.Position.LEFT,i.grace_notes=t,i.width=0,i.preFormatted=!1,i.show_slur=n,i.slur=null,i.formatter=new xi,i.voice=new Et({num_beats:4,beat_value:4,resolution:B.RESOLUTION}).setStrict(!1),i.render_options={slur_y_shift:0},i.beams=[],i.voice.addTickables(i.grace_notes),sn(i,un(i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hn(t,e)}(e,t),cn(e,null,[{key:"format",value:function(t,e){if(!t||0===t.length)return!1;for(var n=[],i=null,r=0,o=0;o<t.length;++o){var s=t[o],a=s.getNote(),u=a.getCategory()===Se.CATEGORY,l=u?4:0;if(u&&a!==i){for(var c=0;c<a.keys.length;++c)r=a.getKeyProps()[c].displaced?a.getExtraLeftPx():r;i=a}n.push({shift:r,gracenote_group:s,spacing:l})}for(var h,f=n[0].shift,d=0;d<n.length;++d){var p=n[d].gracenote_group;p.preFormat(),h=p.getWidth()+n[d].spacing,f=Math.max(h,f)}for(var m=0;m<n.length;++m){var b=n[m].gracenote_group;h=b.getWidth()+n[m].spacing,b.setSpacingFromNextModifier(f-Math.min(h,f))}return e.left_shift+=f,!0}},{key:"CATEGORY",get:function(){return"gracenotegroups"}}]),cn(e,[{key:"getCategory",value:function(){return e.CATEGORY}},{key:"preFormat",value:function(){this.preFormatted||(this.formatter.joinVoices([this.voice]).format([this.voice],0),this.setWidth(this.formatter.getMinTotalWidth()),this.preFormatted=!0)}},{key:"beamNotes",value:function(t){if((t=t||this.grace_notes).length>1){var e=new gt(t);e.render_options.beam_width=3,e.render_options.partial_beam_length=4,this.beams.push(e)}return this}},{key:"setNote",value:function(t){this.note=t}},{key:"setWidth",value:function(t){this.width=t}},{key:"getWidth",value:function(){return this.width}},{key:"getGraceNotes",value:function(){return this.grace_notes}},{key:"draw",value:function(){var t=this;this.checkContext();var e=this.getNote();if(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];fn.DEBUG&&h.L("Vex.Flow.GraceNoteGroup",e)}("Drawing grace note group for:",e),!e||null===this.index)throw new h.RuntimeError("NoAttachedNote","Can't draw grace note without a parent note and parent note index.");if(this.setRendered(),this.alignSubNotesWithNote(this.getGraceNotes(),e),this.grace_notes.forEach((function(e){e.setContext(t.context).draw()})),this.beams.forEach((function(e){e.setContext(t.context).draw()})),this.show_slur){var n=this.getNote().getCategory()===Se.CATEGORY;this.slur=new(n?Ze:rn)({last_note:this.grace_notes[0],first_note:e,first_indices:[0],last_indices:[0]}),this.slur.render_options.cp2=12,this.slur.render_options.y_shift=(n?7:5)+this.render_options.slur_y_shift,this.slur.setContext(this.context).draw()}}}]),e}(oe);function dn(t){return(dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pn(t){return(pn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function bn(t,e,n){return e&&mn(t.prototype,e),n&&mn(t,n),t}function vn(t,e){return(vn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yn=function(t){function e(t,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=function(t,e){return!e||"object"!==dn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,pn(e).call(this))).setAttribute("type","Stroke"),i.note=null,i.options=h.Merge({},n),i.all_voices=!("all_voices"in i.options)||i.options.all_voices,i.note_end=null,i.index=null,i.type=t,i.position=oe.Position.LEFT,i.render_options={font_scale:38,stroke_px:3,stroke_spacing:10},i.font={family:"serif",size:10,weight:"bold italic"},i.setXShift(0),i.setWidth(10),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vn(t,e)}(e,t),bn(e,null,[{key:"format",value:function(t,e){var n=e.left_shift;if(!t||0===t.length)return this;var i=t.map((function(t){var e=t.getNote();if(e instanceof Se){var n=e.getKeyProps()[t.getIndex()];return{line:n.line,shift:n.displaced?e.getExtraLeftPx():0,stroke:t}}return{line:e.getPositions()[t.getIndex()].str,shift:0,stroke:t}})),r=n,o=i.reduce((function(t,e){var n=e.stroke;return n.setXShift(r+e.shift),Math.max(n.getWidth()+0,t)}),0);return e.left_shift+=o,!0}},{key:"CATEGORY",get:function(){return"strokes"}},{key:"Type",get:function(){return{BRUSH_DOWN:1,BRUSH_UP:2,ROLL_DOWN:3,ROLL_UP:4,RASQUEDO_DOWN:5,RASQUEDO_UP:6,ARPEGGIO_DIRECTIONLESS:7}}}]),bn(e,[{key:"getCategory",value:function(){return e.CATEGORY}},{key:"getPosition",value:function(){return this.position}},{key:"addEndNote",value:function(t){return this.note_end=t,this}},{key:"draw",value:function(){if(this.checkContext(),this.setRendered(),!this.note||null==this.index)throw new h.RERR("NoAttachedNote","Can't draw stroke without a note and index.");for(var t,n,i,r,o,s=this.note.getModifierStartXY(this.position,this.index),a=this.note.getYs(),u=s.y,l=s.y,c=s.x-5,f=this.note.stave.options.spacing_between_lines_px,d=this.getModifierContext().getModifiers(this.note.getCategory()),p=0;p<d.length;p++){a=d[p].getYs();for(var m=0;m<a.length;m++)(this.note===d[p]||this.all_voices)&&(u=h.Min(u,a[m]),l=h.Max(l,a[m]))}switch(this.type){case e.Type.BRUSH_DOWN:t="vc3",n=-3,i=u-f/2+10,l+=f/2;break;case e.Type.BRUSH_UP:t="v11",n=.5,i=l+f/2,u-=f/2;break;case e.Type.ROLL_DOWN:case e.Type.RASQUEDO_DOWN:t="vc3",r=this.x_shift+(n=-3)-2,this.note instanceof Se?(i=(u+=1.5*f)-f,o=(l+=(l-u)%2!=0?.5*f:f)+f+2):(i=(u+=1.5*f)-.75*f,o=(l+=f)+.25*f);break;case e.Type.ROLL_UP:case e.Type.RASQUEDO_UP:t="v52",r=this.x_shift+(n=-4)-1,this.note instanceof Se?(i=f/2,(l-(u+=.5*f))%2==0&&(l+=f/2),i=l+.5*f,o=u-1.25*f):(i=(l+=.5*f)+.25*f,o=(u+=.25*f)-f);break;case e.Type.ARPEGGIO_DIRECTIONLESS:u+=.5*f,l+=f;break;default:throw new h.RERR("InvalidType","The stroke type ".concat(this.type," does not exist"))}if(this.type===e.Type.BRUSH_DOWN||this.type===e.Type.BRUSH_UP)this.context.fillRect(c+this.x_shift,u,1,l-u);else if(this.note instanceof Se)for(var b=u;b<=l;b+=f)O.renderGlyph(this.context,c+this.x_shift-4,b,this.render_options.font_scale,"va3");else{var v;for(v=u;v<=l;v+=10)O.renderGlyph(this.context,c+this.x_shift-4,v,this.render_options.font_scale,"va3");this.type===e.Type.RASQUEDO_DOWN&&(o=v+.25*f)}this.type!==e.Type.ARPEGGIO_DIRECTIONLESS&&(O.renderGlyph(this.context,c+this.x_shift+n,i,this.render_options.font_scale,t),this.type!==e.Type.RASQUEDO_DOWN&&this.type!==e.Type.RASQUEDO_UP||(this.context.save(),this.context.setFont(this.font.family,this.font.size,this.font.weight),this.context.fillText("R",c+r,o),this.context.restore()))}}]),e}(oe);function gn(t){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sn(t){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _n(t,e,n){return e&&wn(t.prototype,e),n&&wn(t,n),t}function xn(t,e){return(xn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var kn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==gn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Sn(e).call(this))).setAttribute("type","StringNumber"),n.note=null,n.last_note=null,n.index=null,n.string_number=t,n.setWidth(20),n.position=oe.Position.ABOVE,n.x_shift=0,n.y_shift=0,n.x_offset=0,n.y_offset=0,n.dashed=!0,n.leg=X.LineEndType.NONE,n.radius=8,n.font={family:"sans-serif",size:10,weight:"bold"},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xn(t,e)}(e,t),_n(e,null,[{key:"format",value:function(t,e){var n=e.left_shift,i=e.right_shift;if(!t||0===t.length)return this;var r,o,s,a,u,l=[],c=null,h=0,f=0;for(r=0;r<t.length;++r)for(s=(o=t[r]).getNote(),r=0;r<t.length;++r){s=(o=t[r]).getNote(),a=o.getPosition();var d=s.getKeyProps()[o.getIndex()];if(s!==c){for(var p=0;p<s.keys.length;++p)u=s.getKeyProps()[p],0===n&&(h=u.displaced?s.getExtraLeftPx():h),0===i&&(f=u.displaced?s.getExtraRightPx():f);c=s}l.push({pos:a,note:s,num:o,line:d.line,shiftL:h,shiftR:f})}l.sort((function(t,e){return e.line-t.line}));var m=0,b=0,v=0,y=null,g=null;for(r=0;r<l.length;++r){var S=0;s=l[r].note,a=l[r].pos;var w=l[r].line;w===y&&s===g||(m=i+l[r].shiftR);var _=(o=l[r].num).getWidth()+1;a===oe.Position.LEFT?(o.setXShift(n),b=(S=h+_)>b?S:b):a===oe.Position.RIGHT&&(o.setXShift(m),v=(S+=_)>v?S:v),y=w,g=s}return e.left_shift+=b,e.right_shift+=v,!0}},{key:"CATEGORY",get:function(){return"stringnumber"}}]),_n(e,[{key:"getCategory",value:function(){return e.CATEGORY}},{key:"getNote",value:function(){return this.note}},{key:"setNote",value:function(t){return this.note=t,this}},{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(t){return this.index=t,this}},{key:"setLineEndType",value:function(t){return t>=X.LineEndType.NONE&&t<=X.LineEndType.DOWN&&(this.leg=t),this}},{key:"setStringNumber",value:function(t){return this.string_number=t,this}},{key:"setOffsetX",value:function(t){return this.x_offset=t,this}},{key:"setOffsetY",value:function(t){return this.y_offset=t,this}},{key:"setLastNote",value:function(t){return this.last_note=t,this}},{key:"setDashed",value:function(t){return this.dashed=t,this}},{key:"draw",value:function(){var t=this.checkContext();if(!this.note||null==this.index)throw new h.RERR("NoAttachedNote","Can't draw string number without a note and index.");this.setRendered();var e=this.note.stave.options.spacing_between_lines_px,n=this.note.getModifierStartXY(this.position,this.index),i=n.x+this.x_shift+this.x_offset,r=n.y+this.y_shift+this.y_offset;switch(this.position){case oe.Position.ABOVE:case oe.Position.BELOW:var o=this.note.getStemExtents(),s=o.topY,a=o.baseY+2;this.note.stem_direction===Se.STEM_DOWN&&(s=o.baseY,a=o.topY-2),r=this.position===oe.Position.ABOVE?this.note.hasStem()?s-1.75*e:n.y-1.75*e:this.note.hasStem()?a+1.5*e:n.y+1.75*e,r+=this.y_shift+this.y_offset;break;case oe.Position.LEFT:i-=this.radius/2+5;break;case oe.Position.RIGHT:i+=this.radius/2+6;break;default:throw new h.RERR("InvalidPosition","The position ".concat(this.position," is invalid"))}t.save(),t.beginPath(),t.arc(i,r,this.radius,0,2*Math.PI,!1),t.lineWidth=1.5,t.stroke(),t.setFont(this.font.family,this.font.size,this.font.weight);var u=i-t.measureText(this.string_number).width/2;if(t.fillText(""+this.string_number,u,r+4.5),null!=this.last_note){var l=this.last_note.getStemX()-this.note.getX()+5;switch(t.strokeStyle="#000000",t.lineCap="round",t.lineWidth=.6,X.drawDashedLine(t,i+10,r,i+l,r,this.dashed?[3,3]:[3,0]),this.leg){case X.LineEndType.UP:X.drawDashedLine(t,i+l,r,i+l,r+-10,this.dashed?[3,3]:[3,0]);break;case X.LineEndType.DOWN:X.drawDashedLine(t,i+l,r,i+l,r+10,this.dashed?[3,3]:[3,0])}}t.restore()}}]),e}(oe);function En(t){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function An(t){return(An=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ln(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Tn(t,e,n){return e&&Ln(t.prototype,e),n&&Ln(t,n),t}function Mn(t,e){return(Mn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Cn(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Nn=oe.Position,In=Nn.ABOVE,Rn=Nn.BELOW,On=function(t,e){return.5*t(e/.5)},Fn=function(t,e){return e===In?t<=5:t>=1},Bn=function(t,e){return Fn(t,e)?e===In?Math.ceil:Math.floor:Math.round},Dn=function(t){var e=t.getCategory();return"stavenotes"===e||"gracenotes"===e},jn=function(t){function e(t){var n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==En(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,An(e).call(this))).setAttribute("type","Articulation"),n.note=null,n.index=null,n.type=t,n.position=Rn,n.render_options={font_scale:38},n.articulation=B.articulationCodes(n.type),!n.articulation)throw new h.RERR("ArgumentError","Articulation not found: ".concat(n.type));return n.glyph=new O(n.articulation.code,n.render_options.font_scale),n.setWidth(n.glyph.getMetrics().width),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mn(t,e)}(e,t),Tn(e,null,[{key:"format",value:function(t,e){if(!t||0===t.length)return!1;var n=function(t,e,n){return On(Bn(e,n),t.glyph.getMetrics().height/10+.5)};t.filter((function(t){return t.getPosition()===In})).forEach((function(t){t.setTextLine(e.top_text_line),e.top_text_line+=n(t,e.top_text_line,In)})),t.filter((function(t){return t.getPosition()===Rn})).forEach((function(t){t.setTextLine(e.text_line),e.text_line+=n(t,e.text_line,Rn)}));var i=t.map((function(t){return t.getWidth()})).reduce((function(t,e){return Math.max(e,t)}));return e.left_shift+=i/2,e.right_shift+=i/2,!0}},{key:"easyScoreHook",value:function(t,e,n){var i=t.articulations;if(i){var r={staccato:"a.",tenuto:"a-"};i.split(",").map((function(t){return t.trim().split(".")})).map((function(t){var e=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),2!==n.length);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(t),i=e[1],o={type:r[e[0]]};return i&&(o.position=oe.PositionString[i]),n.getFactory().Articulation(o)})).map((function(t){return e.addModifier(0,t)}))}}},{key:"CATEGORY",get:function(){return"articulations"}},{key:"INITIAL_OFFSET",get:function(){return-.5}}]),Tn(e,[{key:"getCategory",value:function(){return e.CATEGORY}},{key:"draw",value:function(){var t,n=this.note,i=this.index,r=this.position,o=this.glyph,s=this.articulation.between_lines,a=this.text_line,u=this.context;if(this.checkContext(),!n||null==i)throw new h.RERR("NoAttachedNote","Can't draw Articulation without a note and index.");this.setRendered();var l=n.getStave(),c=l.getSpacingBetweenLines(),f="tabnotes"===n.getCategory(),d=n.getModifierStartXY(r,i).x,p=!s||f,m=function(t,e){var n=e===In&&t.getStemDirection()===nt.UP||e===Rn&&t.getStemDirection()===nt.DOWN;return Dn(t)?t.hasStem()&&n?.5:1:t.hasStem()&&n?1:0}(n,r),b=(t={},Pn(t,In,(function(){o.setOrigin(.5,1);var t=function(t,e){var n=t.getStave(),i=t.getStemDirection(),r=t.getStemExtents(),o=r.topY,s=r.baseY;if(Dn(t))return t.hasStem()?i===nt.UP?o:s:Math.min.apply(Math,Cn(t.getYs()));if("tabnotes"===t.getCategory())return t.hasStem()&&i===nt.UP?o:n.getYForTopText(e);throw new h.RERR("UnknownCategory","Only can get the top and bottom ys of stavenotes and tabnotes")}(n,a)-(a+m)*c;return p?Math.min(l.getYForTopText(e.INITIAL_OFFSET),t):t})),Pn(t,Rn,(function(){o.setOrigin(.5,0);var t=function(t,e){var n=t.getStave(),i=t.getStemDirection(),r=t.getStemExtents(),o=r.topY,s=r.baseY;if(Dn(t))return t.hasStem()?i===nt.UP?s:o:Math.max.apply(Math,Cn(t.getYs()));if("tabnotes"===t.getCategory())return t.hasStem()?i===nt.UP?n.getYForBottomText(e):o:n.getYForBottomText(e);throw new h.RERR("UnknownCategory","Only can get the top and bottom ys of stavenotes and tabnotes")}(n,a)+(a+m)*c;return p?Math.max(l.getYForBottomText(e.INITIAL_OFFSET),t):t})),t)[r]();if(!f){var v=r===In?-1:1,y=f?n.positions[i].str:n.getKeyProps()[i].line,g=(n.getYs()[i]-b)/c+y,S=function(t,e,n,i){var r=On(Bn(e,n),e);return t&&Fn(r,n)&&r%1==0?r+.5*-i:r}(s,g,r,v);Fn(S,r)&&o.setOrigin(.5,.5),b+=Math.abs(S-g)*c*v}!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];jn.DEBUG&&h.L("Vex.Flow.Articulation",e)}("Rendering articulation at (x: ".concat(d,", y: ").concat(b,")")),o.render(u,d,b)}}]),e}(oe);function Vn(t){return(Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gn(t){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Un(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function zn(t,e,n){return e&&Un(t.prototype,e),n&&Un(t,n),t}function Wn(t,e){return(Wn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Hn=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e){return!e||"object"!==Vn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Gn(e).call(this))).setAttribute("type","TickContext"),t.currentTick=new p(0,1),t.maxTicks=new p(0,1),t.minTicks=null,t.padding=3,t.x=0,t.xBase=0,t.xOffset=0,t.tickables=[],t.notePx=0,t.extraLeftPx=0,t.extraRightPx=0,t.tContexts=[],t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wn(t,e)}(e,t),zn(e,null,[{key:"getNextContext",value:function(t){var e=t.tContexts,n=e.indexOf(t);return e[n+1]}}]),zn(e,[{key:"getX",value:function(){return this.x}},{key:"setX",value:function(t){return this.x=t,this.xBase=t,this.xOffset=0,this}},{key:"getXBase",value:function(){return this.xBase}},{key:"setXBase",value:function(t){this.xBase=t,this.x=t+this.xOffset}},{key:"getXOffset",value:function(){return this.xOffset}},{key:"setXOffset",value:function(t){this.xOffset=t,this.x=this.xBase+t}},{key:"getWidth",value:function(){return this.width+2*this.padding}},{key:"setPadding",value:function(t){return this.padding=t,this}},{key:"getMaxTicks",value:function(){return this.maxTicks}},{key:"getMinTicks",value:function(){return this.minTicks}},{key:"getTickables",value:function(){return this.tickables}},{key:"getCenterAlignedTickables",value:function(){return this.tickables.filter((function(t){return t.isCenterAligned()}))}},{key:"getMetrics",value:function(){return{width:this.width,notePx:this.notePx,extraLeftPx:this.extraLeftPx,extraRightPx:this.extraRightPx}}},{key:"getCurrentTick",value:function(){return this.currentTick}},{key:"setCurrentTick",value:function(t){this.currentTick=t,this.preFormatted=!1}},{key:"getExtraPx",value:function(){for(var t=0,e=0,n=0,i=0,r=0;r<this.tickables.length;r++){n=Math.max(this.tickables[r].extraLeftPx||0,n),i=Math.max(this.tickables[r].extraRightPx||0,i);var o=this.tickables[r].modifierContext;o&&null!=o&&(t=Math.max(t,o.state.left_shift),e=Math.max(e,o.state.right_shift))}return{left:t,right:e,extraLeft:n,extraRight:i}}},{key:"addTickable",value:function(t){if(!t)throw new h.RERR("BadArgument","Invalid tickable added.");if(!t.shouldIgnoreTicks()){this.ignore_ticks=!1;var e=t.getTicks();e.greaterThan(this.maxTicks)&&(this.maxTicks=e.clone()),(null==this.minTicks||e.lessThan(this.minTicks))&&(this.minTicks=e.clone())}return t.setTickContext(this),this.tickables.push(t),this.preFormatted=!1,this}},{key:"preFormat",value:function(){if(this.preFormatted)return this;for(var t=0;t<this.tickables.length;++t){var e=this.tickables[t];e.preFormat();var n=e.getMetrics();this.extraLeftPx=Math.max(this.extraLeftPx,n.extraLeftPx+n.modLeftPx),this.extraRightPx=Math.max(this.extraRightPx,n.extraRightPx+n.modRightPx),this.notePx=Math.max(this.notePx,n.noteWidth),this.width=this.notePx+this.extraLeftPx+this.extraRightPx}return this}},{key:"postFormat",value:function(){return this.postFormatted||(this.postFormatted=!0),this}}]),e}(Ft);function qn(t){return(qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yn(t){return(Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Kn(t,e,n){return e&&Xn(t.prototype,e),n&&Xn(t,n),t}function Jn(t,e){return(Jn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zn=function(t){function e(t){var n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==qn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Yn(e).call(this))).setAttribute("type","Ornament"),n.note=null,n.index=null,n.type=t,n.position=oe.Position.ABOVE,n.delayed=!1,n.accidentalUpper=null,n.accidentalLower=null,n.render_options={font_scale:38,accidentalLowerPadding:3,accidentalUpperPadding:3},n.ornament=B.ornamentCodes(n.type),!n.ornament)throw new h.RERR("ArgumentError","Ornament not found: '".concat(n.type,"'"));return n.glyph=new O(n.ornament.code,n.render_options.font_scale),n.glyph.setOrigin(.5,1),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jn(t,e)}(e,t),Kn(e,null,[{key:"format",value:function(t,e){if(!t||0===t.length)return!1;for(var n=0,i=0;i<t.length;++i){var r=t[i];n=Math.max(r.getWidth(),n),r.getPosition()===oe.Position.ABOVE?(r.setTextLine(e.top_text_line),e.top_text_line+=2):(r.setTextLine(e.text_line),e.text_line+=2)}return e.left_shift+=n/2,e.right_shift+=n/2,!0}},{key:"CATEGORY",get:function(){return"ornaments"}}]),Kn(e,[{key:"getCategory",value:function(){return e.CATEGORY}},{key:"setDelayed",value:function(t){return this.delayed=t,this}},{key:"setUpperAccidental",value:function(t){var e=this.render_options.font_scale/1.3;return this.accidentalUpper=new O(B.accidentalCodes(t).code,e),this.accidentalUpper.setOrigin(.5,1),this}},{key:"setLowerAccidental",value:function(t){var e=this.render_options.font_scale/1.3;return this.accidentalLower=new O(B.accidentalCodes(t).code,e),this.accidentalLower.setOrigin(.5,1),this}},{key:"draw",value:function(){if(this.checkContext(),!this.note||null==this.index)throw new h.RERR("NoAttachedNote","Can't draw Ornament without a note and index.");this.setRendered();var t=this.context,e=this.note.getStemDirection(),n=this.note.getStave(),i=this.note.getStem().getExtents(),r=e===Se.STEM_DOWN?i.baseY:i.topY;"tabnotes"===this.note.getCategory()&&(this.note.hasStem()?e===Se.STEM_DOWN&&(r=n.getYForTopText(this.text_line)):r=n.getYForTopText(this.text_line));var o=e===Se.STEM_DOWN,s=n.getSpacingBetweenLines(),a=1;!o&&this.note.beam&&(a+=.5);var u=r-s*(this.text_line+a),l=this.note.getModifierStartXY(this.position,this.index).x,c=Math.min(n.getYForTopText(this.text_line),u);if(c+=this.y_shift,this.delayed){var f=0;if(void 0!==this.delayXShift)f=this.delayXShift;else{f+=this.glyph.getMetrics().width/2;var d=Hn.getNextContext(this.note.getTickContext());f+=d?.5*(d.getX()-l):.5*(n.x+n.width-l),this.delayXShift=f}l+=f}!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Zn.DEBUG&&h.L("Vex.Flow.Ornament",e)}("Rendering ornament: ",this.ornament,l,c),this.accidentalLower&&(this.accidentalLower.render(t,l,c),c-=this.accidentalLower.getMetrics().height,c-=this.render_options.accidentalLowerPadding),this.glyph.render(t,l,c),c-=this.glyph.getMetrics().height,this.accidentalUpper&&this.accidentalUpper.render(t,l,c-=this.render_options.accidentalUpperPadding)}}]),e}(oe);function Qn(t){return(Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $n(t){return($n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ti(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ei(t,e,n){return e&&ti(t.prototype,e),n&&ti(t,n),t}function ni(t,e){return(ni=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ii=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==Qn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,$n(e).call(this))).setAttribute("type","Annotation"),n.note=null,n.index=null,n.text=t,n.justification=e.Justify.CENTER,n.vert_justification=e.VerticalJustify.TOP,n.font={family:"Arial",size:10,weight:""},n.setWidth(B.textWidth(t)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ni(t,e)}(e,t),ei(e,null,[{key:"format",value:function(t,e){if(!t||0===t.length)return!1;for(var n=0,i=0;i<t.length;++i){var r=t[i];n=Math.max(r.getWidth(),n),r.getPosition()===oe.Position.ABOVE?(r.setTextLine(e.top_text_line),e.top_text_line++):(r.setTextLine(e.text_line),e.text_line++)}return e.left_shift+=n/2,e.right_shift+=n/2,!0}},{key:"CATEGORY",get:function(){return"annotations"}},{key:"Justify",get:function(){return{LEFT:1,CENTER:2,RIGHT:3,CENTER_STEM:4}}},{key:"JustifyString",get:function(){return{left:e.Justify.LEFT,right:e.Justify.RIGHT,center:e.Justify.CENTER,centerStem:e.Justify.CENTER_STEM}}},{key:"VerticalJustify",get:function(){return{TOP:1,CENTER:2,BOTTOM:3,CENTER_STEM:4}}},{key:"VerticalJustifyString",get:function(){return{above:e.VerticalJustify.TOP,top:e.VerticalJustify.TOP,below:e.VerticalJustify.BOTTOM,bottom:e.VerticalJustify.BOTTOM,center:e.VerticalJustify.CENTER,centerStem:e.VerticalJustify.CENTER_STEM}}}]),ei(e,[{key:"getCategory",value:function(){return e.CATEGORY}},{key:"setFont",value:function(t,e,n){return this.font={family:t,size:e,weight:n},this}},{key:"setVerticalJustification",value:function(t){return this.vert_justification="string"==typeof t?e.VerticalJustifyString[t]:t,this}},{key:"getJustification",value:function(){return this.justification}},{key:"setJustification",value:function(t){return this.justification="string"==typeof t?e.JustifyString[t]:t,this}},{key:"draw",value:function(){if(this.checkContext(),!this.note)throw new h.RERR("NoNoteForAnnotation","Can't draw text annotation without an attached note.");this.setRendered();var t=this.note.getModifierStartXY(oe.Position.ABOVE,this.index);this.context.save(),this.context.setFont(this.font.family,this.font.size,this.font.weight);var n,i,r,o,s=this.context.measureText(this.text).width,a=this.context.measureText("m").width;n=this.justification===e.Justify.LEFT?t.x:this.justification===e.Justify.RIGHT?t.x-s:this.justification===e.Justify.CENTER?t.x-s/2:this.note.getStemX()-s/2;var u=this.note.hasStem(),l=this.note.getStave();if(u&&(r=this.note.getStem().getExtents(),o=l.getSpacingBetweenLines()),this.vert_justification===e.VerticalJustify.BOTTOM){if(i=l.getYForBottomText(this.text_line+B.TEXT_HEIGHT_OFFSET_HACK),u){var c=1===this.note.getStemDirection()?r.baseY:r.topY;i=Math.max(i,c+o*(this.text_line+2))}}else if(this.vert_justification===e.VerticalJustify.CENTER){var f=this.note.getYForTopText(this.text_line)-1;i=f+(l.getYForBottomText(this.text_line)-f)/2+a/2}else if(this.vert_justification===e.VerticalJustify.TOP)i=Math.min(l.getYForTopText(this.text_line),this.note.getYs()[0]-10),u&&(i=Math.min(i,r.topY-5-o*this.text_line));else{var d=this.note.getStemExtents();i=d.topY+(d.baseY-d.topY)/2+a/2}!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];ii.DEBUG&&h.L("Vex.Flow.Annotation",e)}("Rendering annotation: ",this.text,n,i),this.context.fillText(this.text,n,i),this.context.restore()}}]),e}(oe);function ri(t){return(ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oi(t){return(oi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function si(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ai(t,e,n){return e&&si(t.prototype,e),n&&si(t,n),t}function ui(t,e){return(ui=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var li=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e){return!e||"object"!==ri(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,oi(e).call(this))).setAttribute("type","Bend"),r.text=t,r.x_shift=0,r.release=n||!1,r.font="10pt Arial",r.render_options={line_width:1.5,line_style:"#777777",bend_width:8,release_width:8},i?r.phrase=i:(r.phrase=[{type:e.UP,text:r.text}],r.release&&r.phrase.push({type:e.DOWN,text:""})),r.updateWidth(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ui(t,e)}(e,t),ai(e,null,[{key:"format",value:function(t,e){if(!t||0===t.length)return!1;for(var n=0,i=e.top_text_line,r=0;r<t.length;++r){var o=t[r];o.setXShift(n),n=o.getWidth(),o.setTextLine(i)}return e.right_shift+=n,e.top_text_line+=1,!0}},{key:"CATEGORY",get:function(){return"bends"}},{key:"UP",get:function(){return 0}},{key:"DOWN",get:function(){return 1}}]),ai(e,[{key:"getCategory",value:function(){return e.CATEGORY}},{key:"setXShift",value:function(t){this.x_shift=t,this.updateWidth()}},{key:"setFont",value:function(t){return this.font=t,this}},{key:"getText",value:function(){return this.text}},{key:"updateWidth",value:function(){for(var t,n=0,i=0;i<this.phrase.length;++i){var r=this.phrase[i];"width"in r||(r.width=h.Max(r.type===e.UP?this.render_options.bend_width:this.render_options.release_width,(t=r.text,this.context?this.context.measureText(t).width:B.textWidth(t)))+3,r.draw_width=r.width/2),n+=r.width}return this.setWidth(n+this.x_shift),this}},{key:"draw",value:function(){if(this.checkContext(),!this.note||null==this.index)throw new h.RERR("NoNoteForBend","Can't draw bend without a note or index.");this.setRendered();var t=this.note.getModifierStartXY(oe.Position.RIGHT,this.index);t.x+=3,t.y+=.5;var n=this.x_shift,i=this.context,r=this.note.getStave().getYForTopText(this.text_line)+3,o=this.note.getStave().getYForTopText(this.text_line)-1,s=this;function a(t,e,n,r){i.save(),i.beginPath(),i.setLineWidth(s.render_options.line_width),i.setStrokeStyle(s.render_options.line_style),i.setFillStyle(s.render_options.line_style),i.moveTo(t,r),i.quadraticCurveTo(t+n,r,t+n,e),i.stroke(),i.restore()}function u(t,e,n){var r=n||1;i.beginPath(),i.moveTo(t,e),i.lineTo(t-4,e+4*r),i.lineTo(t+4,e+4*r),i.closePath(),i.fill()}function l(t,e){i.save(),i.setRawFont(s.font);var n=t-i.measureText(e).width/2;i.fillText(e,n,o),i.restore()}for(var c,f,d,p,m,b,v=null,y=0,g=0;g<this.phrase.length;++g){var S=this.phrase[g];0===g&&(S.draw_width+=n),y=S.draw_width+(v?v.draw_width:0)-(1===g?n:0),S.type===e.UP&&(v&&v.type===e.UP&&u(t.x,r),p=r,m=(c=t.x)+(d=y),b=f=t.y,i.save(),i.beginPath(),i.setLineWidth(s.render_options.line_width),i.setStrokeStyle(s.render_options.line_style),i.setFillStyle(s.render_options.line_style),i.moveTo(c,f),i.quadraticCurveTo(m,b,c+d,p),i.stroke(),i.restore()),S.type===e.DOWN&&(v&&v.type===e.UP&&a(t.x,t.y,y,r),v&&v.type===e.DOWN&&(u(t.x,t.y,-1),a(t.x,t.y,y,r)),null===v&&a(t.x,t.y,y=S.draw_width,r)),l(t.x+y,S.text),(v=S).x=t.x,t.x+=y}v.type===e.UP?u(v.x+y,r):v.type===e.DOWN&&u(v.x+y,t.y,-1)}}]),e}(oe);function ci(t){return(ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hi(t){return(hi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function di(t,e,n){return e&&fi(t.prototype,e),n&&fi(t,n),t}function pi(t,e){return(pi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var mi=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e){return!e||"object"!==ci(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,hi(e).call(this))).setAttribute("type","Vibrato"),t.position=oe.Position.RIGHT,t.render_options={harsh:!1,vibrato_width:20,wave_height:6,wave_width:4,wave_girth:2},t.setVibratoWidth(t.render_options.vibrato_width),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pi(t,e)}(e,t),di(e,null,[{key:"format",value:function(t,e,n){if(!t||0===t.length)return!1;var i=e.top_text_line,r=0,o=e.right_shift-7,s=n.getModifiers(li.CATEGORY);s&&s.length>0&&i--;for(var a=0;a<t.length;++a){var u=t[a];u.setXShift(o),u.setTextLine(i),o+=r+=u.getWidth()}return e.right_shift+=r,e.top_text_line+=1,!0}},{key:"CATEGORY",get:function(){return"vibratos"}}]),di(e,[{key:"getCategory",value:function(){return e.CATEGORY}},{key:"setHarsh",value:function(t){return this.render_options.harsh=t,this}},{key:"setVibratoWidth",value:function(t){return this.render_options.vibrato_width=t,this.setWidth(t),this}},{key:"draw",value:function(){var t=this.checkContext();if(!this.note)throw new h.RERR("NoNoteForVibrato","Can't draw vibrato without an attached note.");this.setRendered();var n=this.note.getModifierStartXY(oe.Position.RIGHT,this.index).x+this.x_shift,i=this.note.getYForTopText(this.text_line)+2;e.renderVibrato(t,n,i,this.render_options)}}],[{key:"renderVibrato",value:function(t,e,n,i){var r,o=i.harsh,s=i.wave_width,a=i.wave_girth,u=i.wave_height,l=i.vibrato_width/s;if(t.beginPath(),o){for(t.moveTo(e,n+a+1),r=0;r<l/2;++r)t.lineTo(e+s,n-u/2),t.lineTo((e+=s)+s,n+u/2),e+=s;for(r=0;r<l/2;++r)t.lineTo(e-s,n-u/2+a+1),t.lineTo((e-=s)-s,n+u/2+a+1),e-=s;t.fill()}else{for(t.moveTo(e,n+a),r=0;r<l/2;++r)t.quadraticCurveTo(e+s/2,n-u/2,e+s,n),t.quadraticCurveTo((e+=s)+s/2,n+u/2,e+s,n),e+=s;for(r=0;r<l/2;++r)t.quadraticCurveTo(e-s/2,n+u/2+a,e-s,n+a),t.quadraticCurveTo((e-=s)-s/2,n-u/2+a,e-s,n+a),e-=s;t.fill()}}}]),e}(oe);function bi(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];vi.DEBUG&&h.L("Vex.Flow.ModifierContext",e)}var vi=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.modifiers={},this.preFormatted=!1,this.postFormatted=!1,this.width=0,this.spacing=0,this.state={left_shift:0,right_shift:0,text_line:0,top_text_line:0},this.PREFORMAT=[Se,he,Pe,je,yn,fn,Ye,kn,jn,Zn,ii,li,mi],this.POSTFORMAT=[Se]}var e;return(e=[{key:"addModifier",value:function(t){var e=t.getCategory();return this.modifiers[e]||(this.modifiers[e]=[]),this.modifiers[e].push(t),t.setModifierContext(this),this.preFormatted=!1,this}},{key:"getModifiers",value:function(t){return this.modifiers[t]}},{key:"getWidth",value:function(){return this.width}},{key:"getExtraLeftPx",value:function(){return this.state.left_shift}},{key:"getExtraRightPx",value:function(){return this.state.right_shift}},{key:"getState",value:function(){return this.state}},{key:"getMetrics",value:function(){if(!this.formatted)throw new h.RERR("UnformattedModifier","Unformatted modifier has no metrics.");return{width:this.state.left_shift+this.state.right_shift+this.spacing,spacing:this.spacing,extra_left_px:this.state.left_shift,extra_right_px:this.state.right_shift}}},{key:"preFormat",value:function(){var t=this;this.preFormatted||(this.PREFORMAT.forEach((function(e){bi("Preformatting ModifierContext: ",e.CATEGORY),e.format(t.getModifiers(e.CATEGORY),t.state,t)})),this.width=this.state.left_shift+this.state.right_shift,this.preFormatted=!0)}},{key:"postFormat",value:function(){var t=this;this.postFormatted||this.POSTFORMAT.forEach((function(e){bi("Postformatting ModifierContext: ",e.CATEGORY),e.postFormat(t.getModifiers(e.CATEGORY),t)}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}();function yi(t){return(yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Si(t,e,n){return e&&gi(t.prototype,e),n&&gi(t,n),t}function wi(t,e,n,i){var r=e;for(n+=1;n<t.length;n+=1){var o=t[n];if(!o.isRest()&&!o.shouldIgnoreTicks()){r=o.getLineForRest();break}}if(i&&e!==r){var s=Math.max(e,r),a=Math.min(e,r);r=h.MidLine(s,a)}return r}function _i(t,e,n){if(!t||!t.length)throw new h.RERR("BadArgument","No voices to format");var i=t[0].getTotalTicks(),r=t.reduce((function(t,e){if(!e.getTotalTicks().equals(i))throw new h.RERR("TickMismatch","Voices should have same total note duration in ticks.");if(e.getMode()===Et.Mode.STRICT&&!e.isComplete())throw new h.RERR("IncompleteVoice","Voice does not have enough notes.");return Math.max(t,p.LCM(t,e.getResolutionMultiplier()))}),1),o={},s=[],a=[];return t.forEach((function(t){var i=new p(0,r);t.getTickables().forEach((function(t){var r=i.numerator;if(!o[r]){var u=new e;a.push(u),o[r]=u}n(t,o[r]),s.push(r),i.add(t.getTicks())}))})),{map:o,array:a,list:h.SortAndUnique(s,(function(t,e){return t-e}),(function(t,e){return t===e})),resolutionMultiplier:r}}var xi=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.minTotalWidth=0,this.hasMinTotalWidth=!1,this.totalTicks=new p(0,1),this.tickContexts=null,this.modiferContexts=null,this.contextGaps={total:0,gaps:[]},this.voices=[]}return Si(t,null,[{key:"SimpleFormat",value:function(t){var e=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).paddingBetween,n=void 0===e?10:e;t.reduce((function(t,e){e.addToModifierContext(new vi);var i=(new Hn).addTickable(e).preFormat(),r=i.getExtraPx();return i.setX(t+r.left),t+i.getWidth()+r.right+n}),arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}},{key:"plotDebugging",value:function(t,e,n,i,r){var o=n+Ut.STAVEPADDING,s=e.contextGaps;t.save(),t.setFont("Arial",8,""),s.gaps.forEach((function(e){var n,s,a;n=o+e.x1,s=o+e.x2,a="#aaa",t.beginPath(),t.setStrokeStyle(a),t.setFillStyle(a),t.setLineWidth(1),t.fillRect(n,i,s-n,r-i),t.fillText(Math.round(e.x2-e.x1),o+e.x1,r+12)})),t.fillText(Math.round(s.total)+"px",o-20,r+12),t.setFillStyle("red"),t.fillText("Loss: "+e.lossHistory.map((function(t){return Math.round(t)})),o-20,r+22),t.restore()}},{key:"FormatAndDraw",value:function(e,n,i,r){var o={auto_beam:!1,align_rests:!1};"object"===yi(r)?h.Merge(o,r):"boolean"==typeof r&&(o.auto_beam=r);var s=new Et(B.TIME4_4).setMode(Et.Mode.SOFT).addTickables(i),a=o.auto_beam?gt.applyAndGetBeams(s):[];return(new t).joinVoices([s],{align_rests:o.align_rests}).formatToStave([s],n,{align_rests:o.align_rests,stave:n}),s.setStave(n).draw(e,n),a.forEach((function(t){return t.setContext(e).draw()})),s.getBoundingBox()}},{key:"FormatAndDrawTab",value:function(e,n,i,r,o,s,a){var u={auto_beam:s,align_rests:!1};"object"===yi(a)?h.Merge(u,a):"boolean"==typeof a&&(u.auto_beam=a);var l=new Et(B.TIME4_4).setMode(Et.Mode.SOFT).addTickables(o),c=new Et(B.TIME4_4).setMode(Et.Mode.SOFT).addTickables(r),f=u.auto_beam?gt.applyAndGetBeams(l):[];(new t).joinVoices([l],{align_rests:u.align_rests}).joinVoices([c]).formatToStave([l,c],i,{align_rests:u.align_rests}),l.draw(e,i),c.draw(e,n),f.forEach((function(t){return t.setContext(e).draw()})),new Nt(i,n).setContext(e).draw()}},{key:"AlignRestsToNotes",value:function(t,e,n){return t.forEach((function(i,r){if(i instanceof Se&&i.isRest()){if(i.tuplet&&!n)return;var o=i.getGlyph().position.toUpperCase();if("R/4"!==o&&"B/4"!==o)return;if(e||null!=i.beam){var s=i.getKeyProps()[0];if(0===r)s.line=wi(t,s.line,r,!1),i.setKeyLine(0,s.line);else if(r>0&&r<t.length){var a;t[r-1].isRest()?(a=t[r-1].getKeyProps()[0].line,s.line=a):(a=t[r-1].getLineForRest(),s.line=wi(t,a,r,!0)),i.setKeyLine(0,s.line)}}}})),this}}]),Si(t,[{key:"alignRests",value:function(e,n){if(!e||!e.length)throw new h.RERR("BadArgument","No voices to format rests");e.forEach((function(e){return t.AlignRestsToNotes(e.getTickables(),n)}))}},{key:"preCalculateMinTotalWidth",value:function(t){if(this.hasMinTotalWidth)return this.minTotalWidth;if(!this.tickContexts){if(!t)throw new h.RERR("BadArgument","'voices' required to run preCalculateMinTotalWidth");this.createTickContexts(t)}var e=this.tickContexts,n=e.map;return this.minTotalWidth=e.list.map((function(t){var e=n[t];return e.preFormat(),e.getWidth()})).reduce((function(t,e){return t+e}),0),this.hasMinTotalWidth=!0,this.minTotalWidth}},{key:"getMinTotalWidth",value:function(){if(!this.hasMinTotalWidth)throw new h.RERR("NoMinTotalWidth","Call 'preCalculateMinTotalWidth' or 'preFormat' before calling 'getMinTotalWidth'");return this.minTotalWidth}},{key:"createModifierContexts",value:function(t){var e=_i(t,vi,(function(t,e){return t.addToModifierContext(e)}));return this.modiferContexts=e,e}},{key:"createTickContexts",value:function(t){var e=_i(t,Hn,(function(t,e){return e.addTickable(t)}));return e.array.forEach((function(t){t.tContexts=e.array})),this.totalTicks=t[0].getTicksUsed().clone(),this.tickContexts=e,e}},{key:"preFormat",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=this.tickContexts,s=o.list,a=o.map,u=o.resolutionMultiplier;i&&r&&i.forEach((function(t){return t.setStave(r).preFormat()}));var l=0,c=0,h=e/2;if(this.minTotalWidth=0,s.forEach((function(e){var i=a[e];n&&i.setContext(n),i.preFormat();var r=i.getWidth();t.minTotalWidth+=r;var o=i.getMetrics();i.setX(l=l+c+o.extraLeftPx),c=r-o.extraLeftPx})),this.minTotalWidth=l+c,this.hasMinTotalWidth=!0,!(e<=0)){var f=(e-this.minTotalWidth)/(this.totalTicks.value()*u),d=0;s.forEach((function(t,e){var n=a[t];d+=(t-(s[e-1]||0))*f,n.setX(n.getX()+d),n.getCenterAlignedTickables().forEach((function(t){t.center_x_shift=h-n.getX()}))})),1!==s.length&&(this.justifyWidth=e,this.lossHistory=[],this.evaluate())}}},{key:"evaluate",value:function(){var t=this,e=this.justifyWidth;this.contextGaps={total:0,gaps:[]},this.tickContexts.list.forEach((function(e,n){if(0!==n){var i=t.tickContexts.map[t.tickContexts.list[n-1]],r=t.tickContexts.map[e],o=i.getMetrics(),s=i.getX()+o.width,a=r.getX(),u=a-s;t.contextGaps.total+=u,t.contextGaps.gaps.push({x1:s,x2:a}),r.getFormatterMetrics().freedom.left=u,i.getFormatterMetrics().freedom.right=u}}));var n=this.durationStats={};this.voices.forEach((function(t){t.getTickables().forEach((function(t,i,r){var o=t.getTicks().clone().simplify().toString(),s=t.getMetrics(),a=t.getFormatterMetrics(),u=t.getX()+s.noteWidth+s.modRightPx+s.extraRightPx,l=0;if(i<r.length-1){var c=r[i+1],h=c.getMetrics();l=c.getX()-h.modLeftPx-h.extraLeftPx-u,a.space.used=c.getX()-t.getX(),c.getFormatterMetrics().freedom.left=l}else l=e-u,a.space.used=e-t.getX();a.freedom.right=l,function(t,e){var i=n[t];void 0===i?n[t]={mean:e,count:1}:(i.count+=1,i.mean=(i.mean+e)/2)}(o,a.space.used)}))}));var i=0;return this.voices.forEach((function(t){t.getTickables().forEach((function(t){var e=t.getTicks().clone().simplify().toString(),r=t.getFormatterMetrics();r.iterations+=1,r.space.deviation=r.space.used-n[e].mean,r.duration=e,r.space.mean=n[e].mean,i+=Math.pow(n[e].mean,2)}))})),this.totalCost=Math.sqrt(i),this.lossHistory.push(this.totalCost),this}},{key:"tune",value:function(){var t=this,e=0;return this.tickContexts.list.forEach((function(n,i,r){var o=t.tickContexts.map[n],s=i<r.length-1?t.tickContexts.map[r[i+1]]:null;!function(t,e,n,i){t.setX(t.getX()+i),t.getFormatterMetrics().freedom.left+=i,t.getFormatterMetrics().freedom.right-=i,e&&(e.getFormatterMetrics().freedom.right+=i),n&&(n.getFormatterMetrics().freedom.left-=i)}(o,i>0?t.tickContexts.map[r[i-1]]:null,s,e);var a=-o.getTickables().map((function(t){return t.getFormatterMetrics().space.deviation})).reduce((function(t,e){return t+e}));a>0?e=-Math.min(o.getFormatterMetrics().freedom.right,Math.abs(a)):a<0&&(e=s?Math.min(s.getFormatterMetrics().freedom.right,Math.abs(a)):0);var u=Math.min(5,Math.abs(e));e=e>0?u:-u})),this.evaluate()}},{key:"postFormat",value:function(){var t=function(t){return t.list.forEach((function(e){return t.map[e].postFormat()}))};return t(this.modiferContexts),t(this.tickContexts),this}},{key:"joinVoices",value:function(t){return this.createModifierContexts(t),this.hasMinTotalWidth=!1,this}},{key:"format",value:function(t,e,n){var i={align_rests:!1,context:null,stave:null};return h.Merge(i,n),this.voices=t,this.alignRests(t,i.align_rests),this.createTickContexts(t),this.preFormat(e,i.context,t,i.stave),i.stave&&this.postFormat(),this}},{key:"formatToStave",value:function(t,e,n){var i=e.getNoteEndX()-e.getNoteStartX()-10;!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];xi.DEBUG&&h.L("Vex.Flow.Formatter",e)}("Formatting voices to width: ",i);var r={context:e.getContext()};return h.Merge(r,n),this.format(t,i,r)}}]),t}();function ki(t){return(ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ei(t){return(Ei=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ai(t,e,n){return e&&Pi(t.prototype,e),n&&Pi(t,n),t}function Li(t,e){return(Li=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ti=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e){return!e||"object"!==ki(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Ei(e).call(this))).setAttribute("type","StaveModifier"),t.padding=10,t.position=e.Position.ABOVE,t.layoutMetrics=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Li(t,e)}(e,t),Ai(e,null,[{key:"Position",get:function(){return{LEFT:1,RIGHT:2,ABOVE:3,BELOW:4,BEGIN:5,END:6}}}]),Ai(e,[{key:"getPosition",value:function(){return this.position}},{key:"setPosition",value:function(t){return this.position=t,this}},{key:"getStave",value:function(){return this.stave}},{key:"setStave",value:function(t){return this.stave=t,this}},{key:"getWidth",value:function(){return this.width}},{key:"setWidth",value:function(t){return this.width=t,this}},{key:"getX",value:function(){return this.x}},{key:"setX",value:function(t){return this.x=t,this}},{key:"getCategory",value:function(){return""}},{key:"makeSpacer",value:function(t){return{getContext:function(){return!0},setStave:function(){},renderToStave:function(){},getMetrics:function(){return{width:t}}}}},{key:"placeGlyphOnLine",value:function(t,e,n){t.setYShift(e.getYForLine(n)-e.getYForGlyphs())}},{key:"getPadding",value:function(t){return void 0!==t&&t<2?0:this.padding}},{key:"setPadding",value:function(t){return this.padding=t,this}},{key:"setLayoutMetrics",value:function(t){return this.layoutMetrics=t,this}},{key:"getLayoutMetrics",value:function(){return this.layoutMetrics}}]),e}(x);function Mi(t){return(Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ci(t){return(Ci=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ni(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ii(t,e,n){return e&&Ni(t.prototype,e),n&&Ni(t,n),t}function Ri(t,e){return(Ri=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Oi=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==Mi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Ci(e).call(this))).setAttribute("type","Barline"),n.thickness=B.STAVE_LINE_THICKNESS;var i=e.type;return n.widths={},n.widths[i.SINGLE]=5,n.widths[i.DOUBLE]=5,n.widths[i.END]=5,n.widths[i.REPEAT_BEGIN]=5,n.widths[i.REPEAT_END]=5,n.widths[i.REPEAT_BOTH]=5,n.widths[i.NONE]=5,n.paddings={},n.paddings[i.SINGLE]=0,n.paddings[i.DOUBLE]=0,n.paddings[i.END]=0,n.paddings[i.REPEAT_BEGIN]=15,n.paddings[i.REPEAT_END]=15,n.paddings[i.REPEAT_BOTH]=15,n.paddings[i.NONE]=0,n.layoutMetricsMap={},n.layoutMetricsMap[i.SINGLE]={xMin:0,xMax:1,paddingLeft:5,paddingRight:5},n.layoutMetricsMap[i.DOUBLE]={xMin:-3,xMax:1,paddingLeft:5,paddingRight:5},n.layoutMetricsMap[i.END]={xMin:-5,xMax:1,paddingLeft:5,paddingRight:5},n.layoutMetricsMap[i.REPEAT_END]={xMin:-10,xMax:1,paddingLeft:5,paddingRight:5},n.layoutMetricsMap[i.REPEAT_BEGIN]={xMin:-2,xMax:10,paddingLeft:5,paddingRight:5},n.layoutMetricsMap[i.REPEAT_BOTH]={xMin:-10,xMax:10,paddingLeft:5,paddingRight:5},n.layoutMetricsMap[i.NONE]={xMin:0,xMax:0,paddingLeft:5,paddingRight:5},n.setPosition(Ti.Position.BEGIN),n.setType(t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ri(t,e)}(e,t),Ii(e,null,[{key:"CATEGORY",get:function(){return"barlines"}},{key:"type",get:function(){return{SINGLE:1,DOUBLE:2,END:3,REPEAT_BEGIN:4,REPEAT_END:5,REPEAT_BOTH:6,NONE:7}}},{key:"typeString",get:function(){return{single:e.type.SINGLE,double:e.type.DOUBLE,end:e.type.END,repeatBegin:e.type.REPEAT_BEGIN,repeatEnd:e.type.REPEAT_END,repeatBoth:e.type.REPEAT_BOTH,none:e.type.NONE}}}]),Ii(e,[{key:"getCategory",value:function(){return e.CATEGORY}},{key:"getType",value:function(){return this.type}},{key:"setType",value:function(t){return this.type="string"==typeof t?e.typeString[t]:t,this.setWidth(this.widths[this.type]),this.setPadding(this.paddings[this.type]),this.setLayoutMetrics(this.layoutMetricsMap[this.type]),this}},{key:"draw",value:function(t){switch(t.checkContext(),this.setRendered(),this.type){case e.type.SINGLE:this.drawVerticalBar(t,this.x,!1);break;case e.type.DOUBLE:this.drawVerticalBar(t,this.x,!0);break;case e.type.END:this.drawVerticalEndBar(t,this.x);break;case e.type.REPEAT_BEGIN:this.drawRepeatBar(t,this.x,!0),t.getX()!==this.x&&this.drawVerticalBar(t,t.getX());break;case e.type.REPEAT_END:this.drawRepeatBar(t,this.x,!1);break;case e.type.REPEAT_BOTH:this.drawRepeatBar(t,this.x,!1),this.drawRepeatBar(t,this.x,!0)}}},{key:"drawVerticalBar",value:function(t,e,n){t.checkContext();var i=t.getTopLineTopY(),r=t.getBottomLineBottomY();n&&t.context.fillRect(e-3,i,1,r-i),t.context.fillRect(e,i,1,r-i)}},{key:"drawVerticalEndBar",value:function(t,e){t.checkContext();var n=t.getTopLineTopY(),i=t.getBottomLineBottomY();t.context.fillRect(e-5,n,1,i-n),t.context.fillRect(e-2,n,3,i-n)}},{key:"drawRepeatBar",value:function(t,e,n){t.checkContext();var i=t.getTopLineTopY(),r=t.getBottomLineBottomY(),o=3;n||(o=-5),t.context.fillRect(e+o,i,1,r-i),t.context.fillRect(e-2,i,3,r-i),n?o+=4:o-=4;var s=e+o+1,a=(t.getNumLines()-1)*t.getSpacingBetweenLines(),u=i+(a=a/2-t.getSpacingBetweenLines()/2)+1;t.context.beginPath(),t.context.arc(s,u,2,0,2*Math.PI,!1),t.context.fill(),u+=t.getSpacingBetweenLines(),t.context.beginPath(),t.context.arc(s,u,2,0,2*Math.PI,!1),t.context.fill()}}]),e}(Ti);function Fi(t){return(Fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bi(t){return(Bi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Di(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ji(t,e,n){return e&&Di(t.prototype,e),n&&Di(t,n),t}function Vi(t,e){return(Vi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Gi=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e){return!e||"object"!==Fi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Bi(e).call(this))).setAttribute("type","Repetition"),r.symbol_type=t,r.x=n,r.x_shift=0,r.y_shift=i,r.font={family:"times",size:12,weight:"bold italic"},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vi(t,e)}(e,t),ji(e,null,[{key:"CATEGORY",get:function(){return"repetitions"}},{key:"type",get:function(){return{NONE:1,CODA_LEFT:2,CODA_RIGHT:3,SEGNO_LEFT:4,SEGNO_RIGHT:5,DC:6,DC_AL_CODA:7,DC_AL_FINE:8,DS:9,DS_AL_CODA:10,DS_AL_FINE:11,FINE:12}}}]),ji(e,[{key:"getCategory",value:function(){return e.CATEGORY}},{key:"setShiftX",value:function(t){return this.x_shift=t,this}},{key:"setShiftY",value:function(t){return this.y_shift=t,this}},{key:"draw",value:function(t,n){switch(this.setRendered(),this.symbol_type){case e.type.CODA_RIGHT:this.drawCodaFixed(t,n+t.width);break;case e.type.CODA_LEFT:this.drawSymbolText(t,n,"Coda",!0);break;case e.type.SEGNO_LEFT:this.drawSignoFixed(t,n);break;case e.type.SEGNO_RIGHT:this.drawSignoFixed(t,n+t.width);break;case e.type.DC:this.drawSymbolText(t,n,"D.C.",!1);break;case e.type.DC_AL_CODA:this.drawSymbolText(t,n,"D.C. al",!0);break;case e.type.DC_AL_FINE:this.drawSymbolText(t,n,"D.C. al Fine",!1);break;case e.type.DS:this.drawSymbolText(t,n,"D.S.",!1);break;case e.type.DS_AL_CODA:this.drawSymbolText(t,n,"D.S. al",!0);break;case e.type.DS_AL_FINE:this.drawSymbolText(t,n,"D.S. al Fine",!1);break;case e.type.FINE:this.drawSymbolText(t,n,"Fine",!1)}return this}},{key:"drawCodaFixed",value:function(t,e){var n=t.getYForTopText(t.options.num_lines)+this.y_shift;return O.renderGlyph(t.context,this.x+e+this.x_shift,n+25,40,"v4d",!0),this}},{key:"drawSignoFixed",value:function(t,e){var n=t.getYForTopText(t.options.num_lines)+this.y_shift;return O.renderGlyph(t.context,this.x+e+this.x_shift,n+25,30,"v8c",!0),this}},{key:"drawSymbolText",value:function(t,n,i,r){var o=t.checkContext();o.save(),o.setFont(this.font.family,this.font.size,this.font.weight);var s=0+this.x_shift,a=n+this.x_shift;this.symbol_type===e.type.CODA_LEFT?a=(s=this.x+t.options.vertical_bar_width)+o.measureText(i).width+12:s=(a=this.x+n+t.width-5+this.x_shift)-+o.measureText(i).width-12;var u=t.getYForTopText(t.options.num_lines)+this.y_shift;return r&&O.renderGlyph(o,a,u,40,"v4d",!0),o.fillText(i,s,u+5),o.restore(),this}}]),e}(Ti);function Ui(t){return(Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zi(t){return(zi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Hi(t,e,n){return e&&Wi(t.prototype,e),n&&Wi(t,n),t}function qi(t,e){return(qi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Yi=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e){return!e||"object"!==Ui(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,zi(e).call(this))).setAttribute("type","StaveSection"),r.setWidth(16),r.section=t,r.x=n,r.shift_x=0,r.shift_y=i,r.font={family:"sans-serif",size:12,weight:"bold"},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qi(t,e)}(e,t),Hi(e,null,[{key:"CATEGORY",get:function(){return"stavesection"}}]),Hi(e,[{key:"getCategory",value:function(){return e.CATEGORY}},{key:"setStaveSection",value:function(t){return this.section=t,this}},{key:"setShiftX",value:function(t){return this.shift_x=t,this}},{key:"setShiftY",value:function(t){return this.shift_y=t,this}},{key:"draw",value:function(t,e){var n=t.checkContext();this.setRendered(),n.save(),n.lineWidth=2,n.setFont(this.font.family,this.font.size,this.font.weight);var i=n.measureText(""+this.section).width,r=i+6;r<18&&(r=18);var o=t.getYForTopText(3)+this.shift_y,s=this.x+e;return n.beginPath(),n.lineWidth=2,n.rect(s,o,r,20),n.stroke(),n.fillText(""+this.section,s+=(r-i)/2,o+16),n.restore(),this}}]),e}(Ti);function Xi(t){return(Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ki(t){return(Ki=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ji(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Zi(t,e,n){return e&&Ji(t.prototype,e),n&&Ji(t,n),t}function Qi(t,e){return(Qi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $i=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e){return!e||"object"!==Xi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Ki(e).call(this))).setAttribute("type","StaveTempo"),r.tempo=t,r.position=oe.Position.ABOVE,r.x=n,r.shift_x=10,r.shift_y=i,r.font={family:"times",size:14,weight:"bold"},r.render_options={glyph_font_scale:30},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qi(t,e)}(e,t),Zi(e,null,[{key:"CATEGORY",get:function(){return"stavetempo"}}]),Zi(e,[{key:"getCategory",value:function(){return e.CATEGORY}},{key:"setTempo",value:function(t){return this.tempo=t,this}},{key:"setShiftX",value:function(t){return this.shift_x=t,this}},{key:"setShiftY",value:function(t){return this.shift_y=t,this}},{key:"draw",value:function(t,e){var n=t.checkContext();this.setRendered();var i=this.render_options,r=i.glyph_font_scale/38,o=this.tempo.name,s=this.tempo.duration,a=this.tempo.dots,u=this.tempo.bpm,l=this.font,c=this.x+this.shift_x+e,h=t.getYForTopText(1)+this.shift_y;if(n.save(),o&&(n.setFont(l.family,l.size,l.weight),n.fillText(o,c,h),c+=n.measureText(o).width),s&&u){n.setFont(l.family,l.size,"normal"),o&&(c+=n.measureText(" ").width,n.fillText("(",c,h),c+=n.measureText("(").width);var f=B.durationToGlyph(s);if(O.renderGlyph(n,c+=3*r,h,i.glyph_font_scale,f.code_head),c+=f.getWidth()*r,f.stem){var d=30;f.beam_count&&(d+=3*(f.beam_count-1));var p=h-(d*=r);n.fillRect(c-r,p,r,d),f.flag&&(O.renderGlyph(n,c,p,i.glyph_font_scale,f.code_flag_upstem),a||(c+=6*r))}for(var m=0;m<a;m++)c+=6*r,n.beginPath(),n.arc(c,h+2*r,2*r,0,2*Math.PI,!1),n.fill();n.fillText(" = "+u+(o?")":""),c+3*r,h)}return n.restore(),this}}]),e}(Ti);function tr(t){return(tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function er(t){return(er=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ir(t,e,n){return e&&nr(t.prototype,e),n&&nr(t,n),t}function rr(t,e){return(rr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var or=function(t){function e(t){var n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==tr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,er(e).call(this,t))).setAttribute("type","TextNote"),n.text=t.text,n.superscript=t.superscript,n.subscript=t.subscript,n.glyph_type=t.glyph,n.glyph=null,n.font={family:"Arial",size:12,weight:""},t.font&&(n.font=t.font),n.glyph_type){var i=e.GLYPHS[n.glyph_type];if(!i)throw new h.RERR("Invalid glyph type: "+n.glyph_type);n.glyph=new O(i.code,i.point,{cache:!1}),n.setWidth(i.width?i.width:n.glyph.getMetrics().width),n.glyph_struct=i}else n.setWidth(B.textWidth(n.text));return n.line=t.line||0,n.smooth=t.smooth||!1,n.ignore_ticks=t.ignore_ticks||!1,n.justification=e.Justification.LEFT,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rr(t,e)}(e,t),ir(e,null,[{key:"Justification",get:function(){return{LEFT:1,CENTER:2,RIGHT:3}}},{key:"GLYPHS",get:function(){return{segno:{code:"v8c",point:40,x_shift:0,y_shift:-10},tr:{code:"v1f",point:40,x_shift:0,y_shift:0},mordent_upper:{code:"v1e",point:40,x_shift:0,y_shift:0},mordent_lower:{code:"v45",point:40,x_shift:0,y_shift:0},f:{code:"vba",point:40,x_shift:0,y_shift:0},p:{code:"vbf",point:40,x_shift:0,y_shift:0},m:{code:"v62",point:40,x_shift:0,y_shift:0},s:{code:"v4a",point:40,x_shift:0,y_shift:0},z:{code:"v80",point:40,x_shift:0,y_shift:0},coda:{code:"v4d",point:40,x_shift:0,y_shift:-8},pedal_open:{code:"v36",point:40,x_shift:0,y_shift:0},pedal_close:{code:"v5d",point:40,x_shift:0,y_shift:3},caesura_straight:{code:"v34",point:40,x_shift:0,y_shift:2},caesura_curved:{code:"v4b",point:40,x_shift:0,y_shift:2},breath:{code:"v6c",point:40,x_shift:0,y_shift:0},tick:{code:"v6f",point:50,x_shift:0,y_shift:0},turn:{code:"v72",point:40,x_shift:0,y_shift:0},turn_inverted:{code:"v33",point:40,x_shift:0,y_shift:0},mordent:{code:"v1e",point:40,x_shift:0,y_shift:0}}}}]),ir(e,[{key:"setJustification",value:function(t){return this.justification=t,this}},{key:"setLine",value:function(t){return this.line=t,this}},{key:"preFormat",value:function(){this.checkContext(),this.preFormatted||(this.smooth?this.setWidth(0):this.glyph||this.setWidth(this.context.measureText(this.text).width),this.justification===e.Justification.CENTER?this.extraLeftPx=this.width/2:this.justification===e.Justification.RIGHT&&(this.extraLeftPx=this.width),this.setPreFormatted(!0))}},{key:"draw",value:function(){if(this.checkContext(),!this.stave)throw new h.RERR("NoStave","Can't draw without a stave.");this.setRendered();var t,n=this.context,i=this.getAbsoluteX();if(this.justification===e.Justification.CENTER?i-=this.getWidth()/2:this.justification===e.Justification.RIGHT&&(i-=this.getWidth()),this.glyph)t=this.stave.getYForLine(this.line+-3),this.glyph.render(this.context,i+this.glyph_struct.x_shift,t+this.glyph_struct.y_shift);else{t=this.stave.getYForLine(this.line+-3),this.applyStyle(n),n.setFont(this.font.family,this.font.size,this.font.weight),n.fillText(this.text,i,t);var r=n.measureText("M").width,o=n.measureText(this.text).width;this.superscript&&(n.setFont(this.font.family,this.font.size/1.3,this.font.weight),n.fillText(this.superscript,i+o+2,t-r/2.2)),this.subscript&&(n.setFont(this.font.family,this.font.size/1.3,this.font.weight),n.fillText(this.subscript,i+o+2,t+r/2.2-1)),this.restoreStyle(n)}}}]),e}(Ut);function sr(t){return(sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ar(t){return(ar=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ur(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function lr(t,e,n){return e&&ur(t.prototype,e),n&&ur(t,n),t}function cr(t,e){return(cr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var hr=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e){return!e||"object"!==sr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,ar(e).call(this))).setAttribute("type","StaveText"),r.setWidth(16),r.text=t,r.position=n,r.options={shift_x:0,shift_y:0,justification:or.Justification.CENTER},h.Merge(r.options,i),r.font={family:"times",size:16,weight:"normal"},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cr(t,e)}(e,t),lr(e,null,[{key:"CATEGORY",get:function(){return"stavetext"}}]),lr(e,[{key:"getCategory",value:function(){return e.CATEGORY}},{key:"setStaveText",value:function(t){return this.text=t,this}},{key:"setShiftX",value:function(t){return this.shift_x=t,this}},{key:"setShiftY",value:function(t){return this.shift_y=t,this}},{key:"setFont",value:function(t){h.Merge(this.font,t)}},{key:"setText",value:function(t){this.text=t}},{key:"draw",value:function(t){var e=t.checkContext();this.setRendered(),e.save(),e.lineWidth=2,e.setFont(this.font.family,this.font.size,this.font.weight);var n,i,r=e.measureText(""+this.text).width,o=Ti.Position,s=or.Justification;switch(this.position){case o.LEFT:case o.RIGHT:i=(t.getYForLine(0)+t.getBottomLineY())/2+this.options.shift_y,n=this.position===o.LEFT?t.getX()-r-24+this.options.shift_x:t.getX()+t.getWidth()+24+this.options.shift_x;break;case o.ABOVE:case o.BELOW:n=t.getX()+this.options.shift_x,this.options.justification===s.CENTER?n+=t.getWidth()/2-r/2:this.options.justification===s.RIGHT&&(n+=t.getWidth()-r),i=this.position===o.ABOVE?t.getYForTopText(2)+this.options.shift_y:t.getYForBottomText(2)+this.options.shift_y;break;default:throw new h.RERR("InvalidPosition","Value Must be in Modifier.Position.")}return e.fillText(""+this.text,n,i+4),e.restore(),this}}]),e}(Ti);function fr(t){return(fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dr(t){return(dr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function mr(t,e,n){return e&&pr(t.prototype,e),n&&pr(t,n),t}function br(t,e){return(br=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vr=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e){return!e||"object"!==fr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,dr(e).call(this))).setAttribute("type","Clef"),r.setPosition(Ti.Position.BEGIN),r.setType(t,n,i),r.setWidth(r.glyph.getMetrics().width),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];vr.DEBUG&&h.L("Vex.Flow.Clef",e)}("Creating clef:",t),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&br(t,e)}(e,t),mr(e,null,[{key:"CATEGORY",get:function(){return"clefs"}},{key:"types",get:function(){return{treble:{code:"v83",line:3},bass:{code:"v79",line:1},alto:{code:"vad",line:2},tenor:{code:"vad",line:1},percussion:{code:"v59",line:2},soprano:{code:"vad",line:4},"mezzo-soprano":{code:"vad",line:3},"baritone-c":{code:"vad",line:0},"baritone-f":{code:"v79",line:2},subbass:{code:"v79",line:0},french:{code:"v83",line:4},tab:{code:"v2f"}}}},{key:"sizes",get:function(){return{default:40,small:32}}},{key:"annotations",get:function(){return{"8va":{code:"v8",sizes:{default:{point:20,attachments:{treble:{line:-1.2,x_shift:11}}},small:{point:18,attachments:{treble:{line:-.4,x_shift:8}}}}},"8vb":{code:"v8",sizes:{default:{point:20,attachments:{treble:{line:6.3,x_shift:10},bass:{line:4,x_shift:1}}},small:{point:18,attachments:{treble:{line:5.8,x_shift:6},bass:{line:3.5,x_shift:.5}}}}}}}}]),mr(e,[{key:"getCategory",value:function(){return e.CATEGORY}},{key:"setType",value:function(t,n,i){if(this.type=t,this.clef=e.types[t],this.size=void 0===n?"default":n,this.clef.point=e.sizes[this.size],this.glyph=new O(this.clef.code,this.clef.point),void 0!==i){var r=e.annotations[i];this.annotation={code:r.code,point:r.sizes[this.size].point,line:r.sizes[this.size].attachments[this.type].line,x_shift:r.sizes[this.size].attachments[this.type].x_shift},this.attachment=new O(this.annotation.code,this.annotation.point),this.attachment.metrics.x_max=0,this.attachment.setXShift(this.annotation.x_shift)}else this.annotation=void 0;return this}},{key:"getWidth",value:function(){if("tab"===this.type&&!this.stave)throw new h.RERR("ClefError","Can't get width without stave.");return this.width}},{key:"setStave",value:function(t){if(this.stave=t,"tab"!==this.type)return this;var e,n,i=this.stave.getOptions().num_lines;switch(i){case 8:e=55,n=14;break;case 7:e=47,n=8;break;case 6:e=40,n=1;break;case 5:e=30,n=-6;break;case 4:e=23,n=-12;break;default:throw new h.RERR("ClefError","Invalid number of lines: ".concat(i))}return this.glyph.setPoint(e),this.glyph.setYShift(n),this}},{key:"draw",value:function(){if(!this.x)throw new h.RERR("ClefError","Can't draw clef without x.");if(!this.stave)throw new h.RERR("ClefError","Can't draw clef without stave.");this.setRendered(),this.glyph.setStave(this.stave),this.glyph.setContext(this.stave.context),void 0!==this.clef.line&&this.placeGlyphOnLine(this.glyph,this.stave,this.clef.line),this.glyph.renderToStave(this.x),void 0!==this.annotation&&(this.placeGlyphOnLine(this.attachment,this.stave,this.annotation.line),this.attachment.setStave(this.stave),this.attachment.setContext(this.stave.context),this.attachment.renderToStave(this.x))}}]),e}(Ti);function yr(t){return(yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gr(t){return(gr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function wr(t,e,n){return e&&Sr(t.prototype,e),n&&Sr(t,n),t}function _r(t,e){return(_r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xr=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e){return!e||"object"!==yr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,gr(e).call(this))).setAttribute("type","KeySignature"),r.setKeySig(t,n,i),r.setPosition(Ti.Position.BEGIN),r.glyphFontScale=38,r.glyphs=[],r.xPositions=[],r.paddingForced=!1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_r(t,e)}(e,t),wr(e,null,[{key:"CATEGORY",get:function(){return"keysignatures"}},{key:"accidentalSpacing",get:function(){return{"#":{above:6,below:4},b:{above:4,below:7},n:{above:4,below:1},"##":{above:6,below:4},bb:{above:4,below:7},db:{above:4,below:7},d:{above:4,below:7},bbs:{above:4,below:7},"++":{above:6,below:4},"+":{above:6,below:4},"+-":{above:6,below:4},"++-":{above:6,below:4},bs:{above:4,below:10},bss:{above:4,below:10}}}}]),wr(e,[{key:"getCategory",value:function(){return e.CATEGORY}},{key:"convertToGlyph",value:function(t,n){var i=B.accidentalCodes(t.type),r=new O(i.code,this.glyphFontScale),o=1;if("n"===t.type&&n){var s=e.accidentalSpacing[n.type];s&&(o=n.line>=t.line?s.above:s.below)}this.placeGlyphOnLine(r,this.stave,t.line),this.glyphs.push(r);var a=this.xPositions[this.xPositions.length-1],u=r.getMetrics().width+o;this.xPositions.push(a+u),this.width+=u}},{key:"cancelKey",value:function(t){return this.formatted=!1,this.cancelKeySpec=t,this}},{key:"convertToCancelAccList",value:function(t){var e=B.keySignature(t),n=this.accList.length>0&&e.length>0&&e[0].type!==this.accList[0].type,i=n?e.length:e.length-this.accList.length;if(!(i<1)){for(var r=[],o=0;o<i;o++){var s=o;n||(s=e.length-i+o),r.push({type:"n",line:e[s].line})}return this.accList=r.concat(this.accList),{accList:r,type:e[0].type}}}},{key:"addToStave",value:function(t){return this.paddingForced=!0,t.addModifier(this),this}},{key:"convertAccLines",value:function(t,e){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.accList,o=0;switch(t){case"soprano":"#"===e?n=[2.5,.5,2,0,1.5,-.5,1]:o=-1;break;case"mezzo-soprano":"b"===e?n=[0,2,.5,2.5,1,3,1.5]:o=1.5;break;case"alto":o=.5;break;case"tenor":"#"===e?n=[3,1,2.5,.5,2,0,1.5]:o=-.5;break;case"baritone-f":case"baritone-c":"b"===e?n=[.5,2.5,1,3,1.5,3.5,2]:o=2;break;case"bass":case"french":o=1}if(void 0!==n)for(i=0;i<r.length;++i)r[i].line=n[i];else if(0!==o)for(i=0;i<r.length;++i)r[i].line+=o}},{key:"getPadding",value:function(t){return this.formatted||this.format(),0===this.glyphs.length||!this.paddingForced&&t<2?0:this.padding}},{key:"getWidth",value:function(){return this.formatted||this.format(),this.width}},{key:"setKeySig",value:function(t,e,n){return this.formatted=!1,this.keySpec=t,this.cancelKeySpec=e,this.alterKeySpec=n,this}},{key:"alterKey",value:function(t){return this.formatted=!1,this.alterKeySpec=t,this}},{key:"convertToAlterAccList",value:function(t){for(var e=Math.min(t.length,this.accList.length),n=0;n<e;++n)t[n]&&(this.accList[n].type=t[n])}},{key:"format",value:function(){if(!this.stave)throw new h.RERR("KeySignatureError","Can't draw key signature without stave.");this.width=0,this.glyphs=[],this.xPositions=[0],this.accList=B.keySignature(this.keySpec);var t,e=this.accList,n=e.length>0?e[0].type:null;if(this.cancelKeySpec&&(t=this.convertToCancelAccList(this.cancelKeySpec)),this.alterKeySpec&&this.convertToAlterAccList(this.alterKeySpec),this.accList.length>0){var i=(this.position===Ti.Position.END?this.stave.endClef:this.stave.clef)||this.stave.clef;t&&this.convertAccLines(i,t.type,t.accList),this.convertAccLines(i,n,e);for(var r=0;r<this.accList.length;++r)this.convertToGlyph(this.accList[r],this.accList[r+1])}this.formatted=!0}},{key:"draw",value:function(){if(!this.x)throw new h.RERR("KeySignatureError","Can't draw key signature without x.");if(!this.stave)throw new h.RERR("KeySignatureError","Can't draw key signature without stave.");this.formatted||this.format(),this.setRendered();for(var t=0;t<this.glyphs.length;t++){var e=this.glyphs[t],n=this.x+this.xPositions[t];e.setStave(this.stave),e.setContext(this.stave.context),e.renderToStave(n)}}}]),e}(Ti);function kr(t){return(kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Er(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pr(t,e){return!e||"object"!==kr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ar(t){return(Ar=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Tr(t,e,n){return e&&Lr(t.prototype,e),n&&Lr(t,n),t}function Mr(t,e){return(Mr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Cr=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(Er(this,e),(t=Pr(this,Ar(e).call(this))).setAttribute("type","TimeSignature"),t.validate_args=r,null===n)return Pr(t);var o=i;return t.point=40,t.topLine=2,t.bottomLine=4,t.setPosition(Ti.Position.BEGIN),t.setTimeSig(n),t.setWidth(t.timeSig.glyph.getMetrics().width),t.setPadding(o),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mr(t,e)}(e,t),Tr(e,null,[{key:"CATEGORY",get:function(){return"timesignatures"}},{key:"glyphs",get:function(){return{C:{code:"v41",point:40,line:2},"C|":{code:"vb6",point:40,line:2}}}}]),Tr(e,[{key:"getCategory",value:function(){return e.CATEGORY}},{key:"parseTimeSpec",value:function(t){if("C"===t||"C|"===t){var n=e.glyphs[t];return{line:n.line,num:!1,glyph:new O(n.code,n.point)}}this.validate_args&&function(t){var e=t.split("/").filter((function(t){return""!==t}));if(2!==e.length)throw new h.RERR("BadTimeSignature","Invalid time spec: ".concat(t,'. Must be in the form "<numerator>/<denominator>"'));e.forEach((function(e){if(isNaN(Number(e)))throw new h.RERR("BadTimeSignature","Invalid time spec: ".concat(t,". Must contain two valid numbers."))}))}(t);var i=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),2!==n.length);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(t.split("/").map((function(t){return t.split("")})));return{num:!0,glyph:this.makeTimeSignatureGlyph(i[0],i[1])}}},{key:"makeTimeSignatureGlyph",value:function(t,e){var n=new O("v0",this.point);n.topGlyphs=[],n.botGlyphs=[];for(var i=0,r=0;r<t.length;++r){var o=new O("v"+t[r],this.point);n.topGlyphs.push(o),i+=o.getMetrics().width}for(var s=0,a=0;a<e.length;++a){var u=new O("v"+e[a],this.point);n.botGlyphs.push(u),s+=u.getMetrics().width}var l=i>s?i:s,c=n.getMetrics().x_min;n.getMetrics=function(){return{x_min:c,x_max:c+l,width:l}};var h=(l-i)/2,f=(l-s)/2,d=this;return n.renderToStave=function(t){for(var e=t+h,n=0;n<this.topGlyphs.length;++n){var i=this.topGlyphs[n];O.renderOutline(this.context,i.metrics.outline,i.scale,e+i.x_shift,this.stave.getYForLine(d.topLine)+1),e+=i.getMetrics().width}e=t+f;for(var r=0;r<this.botGlyphs.length;++r){var o=this.botGlyphs[r];d.placeGlyphOnLine(o,this.stave,o.line),O.renderOutline(this.context,o.metrics.outline,o.scale,e+o.x_shift,this.stave.getYForLine(d.bottomLine)+1),e+=o.getMetrics().width}},n}},{key:"getTimeSig",value:function(){return this.timeSig}},{key:"setTimeSig",value:function(t){return this.timeSig=this.parseTimeSpec(t),this}},{key:"draw",value:function(){if(!this.x)throw new h.RERR("TimeSignatureError","Can't draw time signature without x.");if(!this.stave)throw new h.RERR("TimeSignatureError","Can't draw time signature without stave.");this.setRendered(),this.timeSig.glyph.setStave(this.stave),this.timeSig.glyph.setContext(this.stave.context),this.placeGlyphOnLine(this.timeSig.glyph,this.stave,this.timeSig.line),this.timeSig.glyph.renderToStave(this.x)}}]),e}(Ti);function Nr(t){return(Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ir(t){return(Ir=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Or(t,e,n){return e&&Rr(t.prototype,e),n&&Rr(t,n),t}function Fr(t,e){return(Fr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Br=function(t){function e(t,n,i,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=function(t,e){return!e||"object"!==Nr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Ir(e).call(this))).setAttribute("type","Volta"),o.volta=t,o.x=i,o.y_shift=r,o.number=n,o.font={family:"sans-serif",size:9,weight:"bold"},o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fr(t,e)}(e,t),Or(e,null,[{key:"CATEGORY",get:function(){return"voltas"}},{key:"type",get:function(){return{NONE:1,BEGIN:2,MID:3,END:4,BEGIN_END:5}}}]),Or(e,[{key:"getCategory",value:function(){return e.CATEGORY}},{key:"setShiftY",value:function(t){return this.y_shift=t,this}},{key:"draw",value:function(t,n){var i=t.checkContext();this.setRendered();var r=t.width,o=t.getYForTopText(t.options.num_lines)+this.y_shift,s=1.5*t.options.spacing_between_lines_px;switch(this.volta){case e.type.BEGIN:i.fillRect(this.x+n,o,1,s);break;case e.type.END:i.fillRect(this.x+n+(r-=5),o,1,s);break;case e.type.BEGIN_END:r-=3,i.fillRect(this.x+n,o,1,s),i.fillRect(this.x+n+r,o,1,s)}return this.volta!==e.type.BEGIN&&this.volta!==e.type.BEGIN_END||(i.save(),i.setFont(this.font.family,this.font.size,this.font.weight),i.fillText(this.number,this.x+n+5,o+15),i.restore()),i.fillRect(this.x+n,o,r,1),this}}]),e}(Ti);function Dr(t){return(Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jr(){return(jr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function Vr(t){return(Vr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gr(t,e){return(Gr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ur=function(t){function e(t,n,i,r){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=function(t,e){return!e||"object"!==Dr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Vr(e).call(this))).setAttribute("type","Stave"),o.x=t,o.y=n,o.width=i,o.formatted=!1,o.start_x=t+5,o.end_x=t+i,o.modifiers=[],o.measure=0,o.clef="treble",o.endClef=void 0,o.font={family:"sans-serif",size:8,weight:""},o.options={vertical_bar_width:10,glyph_spacing_px:10,num_lines:5,fill_style:"#999999",left_bar:!0,right_bar:!0,spacing_between_lines_px:10,space_above_staff_ln:4,space_below_staff_ln:4,top_text_position:1},o.bounds={x:o.x,y:o.y,w:o.width,h:0},h.Merge(o.options,r),o.resetLines();var s=Oi.type;return o.addModifier(new Oi(o.options.left_bar?s.SINGLE:s.NONE)),o.addEndModifier(new Oi(o.options.right_bar?s.SINGLE:s.NONE)),o}var n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gr(t,e)}(e,t),(n=[{key:"space",value:function(t){return this.options.spacing_between_lines_px*t}},{key:"resetLines",value:function(){this.options.line_config=[];for(var t=0;t<this.options.num_lines;t++)this.options.line_config.push({visible:!0});this.height=(this.options.num_lines+this.options.space_above_staff_ln)*this.options.spacing_between_lines_px,this.options.bottom_text_position=this.options.num_lines}},{key:"getOptions",value:function(){return this.options}},{key:"setNoteStartX",value:function(t){if(this.formatted||this.format(),this.start_x=t,this.modifiers.length>0){var e=this.modifiers[0];e.getType()===Oi.type.REPEAT_BEGIN&&e.setX(this.start_x-e.getWidth())}return this}},{key:"getNoteStartX",value:function(){return this.formatted||this.format(),this.start_x}},{key:"getNoteEndX",value:function(){return this.formatted||this.format(),this.end_x}},{key:"getTieStartX",value:function(){return this.start_x}},{key:"getTieEndX",value:function(){return this.x+this.width}},{key:"getX",value:function(){return this.x}},{key:"getNumLines",value:function(){return this.options.num_lines}},{key:"setNumLines",value:function(t){return this.options.num_lines=parseInt(t,10),this.resetLines(),this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"getTopLineTopY",value:function(){return this.getYForLine(0)-B.STAVE_LINE_THICKNESS/2}},{key:"getBottomLineBottomY",value:function(){return this.getYForLine(this.getNumLines()-1)+B.STAVE_LINE_THICKNESS/2}},{key:"setX",value:function(t){var e=t-this.x;this.formatted=!1,this.x=t,this.start_x+=e,this.end_x+=e;for(var n=0;n<this.modifiers.length;n++){var i=this.modifiers[n];void 0!==i.x&&(i.x+=e)}return this}},{key:"setWidth",value:function(t){return this.formatted=!1,this.width=t,this.end_x=this.x+t,this}},{key:"getWidth",value:function(){return this.width}},{key:"getStyle",value:function(){return jr({fillStyle:this.options.fill_style,strokeStyle:this.options.fill_style,lineWidth:B.STAVE_LINE_THICKNESS},this.style||{})}},{key:"setMeasure",value:function(t){return this.measure=t,this}},{key:"getModifierXShift",value:function(){if("number"!=typeof(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0))throw new h.RERR("InvalidIndex","Must be of number type");if(this.formatted||this.format(),1===this.getModifiers(Ti.Position.BEGIN).length)return 0;var t=this.start_x-this.x,e=this.modifiers[0];return e.getType()===Oi.type.REPEAT_BEGIN&&t>e.getWidth()&&(t-=e.getWidth()),t}},{key:"setRepetitionTypeLeft",value:function(t,e){return this.modifiers.push(new Gi(t,this.x,e)),this}},{key:"setRepetitionTypeRight",value:function(t,e){return this.modifiers.push(new Gi(t,this.x,e)),this}},{key:"setVoltaType",value:function(t,e,n){return this.modifiers.push(new Br(t,e,this.x,n)),this}},{key:"setSection",value:function(t,e){return this.modifiers.push(new Yi(t,this.x,e)),this}},{key:"setTempo",value:function(t,e){return this.modifiers.push(new $i(t,this.x,e)),this}},{key:"setText",value:function(t,e,n){return this.modifiers.push(new hr(t,e,n)),this}},{key:"getHeight",value:function(){return this.height}},{key:"getSpacingBetweenLines",value:function(){return this.options.spacing_between_lines_px}},{key:"getBoundingBox",value:function(){return new A(this.x,this.y,this.width,this.getBottomY()-this.y)}},{key:"getBottomY",value:function(){var t=this.options,e=t.spacing_between_lines_px;return this.getYForLine(t.num_lines)+t.space_below_staff_ln*e}},{key:"getBottomLineY",value:function(){return this.getYForLine(this.options.num_lines)}},{key:"getYForLine",value:function(t){var e=this.options,n=e.spacing_between_lines_px;return this.y+t*n+e.space_above_staff_ln*n}},{key:"getLineForY",value:function(t){var e=this.options;return(t-this.y)/e.spacing_between_lines_px-e.space_above_staff_ln}},{key:"getYForTopText",value:function(t){return this.getYForLine(-(t||0)-this.options.top_text_position)}},{key:"getYForBottomText",value:function(t){return this.getYForLine(this.options.bottom_text_position+(t||0))}},{key:"getYForNote",value:function(t){var e=this.options,n=e.spacing_between_lines_px;return this.y+e.space_above_staff_ln*n+5*n-t*n}},{key:"getYForGlyphs",value:function(){return this.getYForLine(3)}},{key:"addModifier",value:function(t,e){return void 0!==e&&t.setPosition(e),t.setStave(this),this.formatted=!1,this.modifiers.push(t),this}},{key:"addEndModifier",value:function(t){return this.addModifier(t,Ti.Position.END),this}},{key:"setBegBarType",value:function(t){var e=Oi.type;return t!==e.SINGLE&&t!==e.REPEAT_BEGIN&&t!==e.NONE||(this.modifiers[0].setType(t),this.formatted=!1),this}},{key:"setEndBarType",value:function(t){return t!==Oi.type.REPEAT_BEGIN&&(this.modifiers[1].setType(t),this.formatted=!1),this}},{key:"setClef",value:function(t,e,n,i){void 0===i&&(i=Ti.Position.BEGIN),i===Ti.Position.END?this.endClef=t:this.clef=t;var r=this.getModifiers(i,vr.CATEGORY);return 0===r.length?this.addClef(t,e,n,i):r[0].setType(t,e,n),this}},{key:"setEndClef",value:function(t,e,n){return this.setClef(t,e,n,Ti.Position.END),this}},{key:"setKeySignature",value:function(t,e,n){void 0===n&&(n=Ti.Position.BEGIN);var i=this.getModifiers(n,xr.CATEGORY);return 0===i.length?this.addKeySignature(t,e,n):i[0].setKeySig(t,e),this}},{key:"setEndKeySignature",value:function(t,e){return this.setKeySignature(t,e,Ti.Position.END),this}},{key:"setTimeSignature",value:function(t,e,n){void 0===n&&(n=Ti.Position.BEGIN);var i=this.getModifiers(n,Cr.CATEGORY);return 0===i.length?this.addTimeSignature(t,e,n):i[0].setTimeSig(t),this}},{key:"setEndTimeSignature",value:function(t,e){return this.setTimeSignature(t,e,Ti.Position.END),this}},{key:"addKeySignature",value:function(t,e,n){return void 0===n&&(n=Ti.Position.BEGIN),this.addModifier(new xr(t,e).setPosition(n),n),this}},{key:"addClef",value:function(t,e,n,i){return void 0===i||i===Ti.Position.BEGIN?this.clef=t:i===Ti.Position.END&&(this.endClef=t),this.addModifier(new vr(t,e,n),i),this}},{key:"addEndClef",value:function(t,e,n){return this.addClef(t,e,n,Ti.Position.END),this}},{key:"addTimeSignature",value:function(t,e,n){return this.addModifier(new Cr(t,e),n),this}},{key:"addEndTimeSignature",value:function(t,e){return this.addTimeSignature(t,e,Ti.Position.END),this}},{key:"addTrebleGlyph",value:function(){return this.addClef("treble"),this}},{key:"getModifiers",value:function(t,e){return void 0===t&&void 0===e?this.modifiers:this.modifiers.filter((function(n){return!(void 0!==t&&t!==n.getPosition()||void 0!==e&&e!==n.getCategory())}))}},{key:"sortByCategory",value:function(t,e){for(var n=t.length-1;n>=0;n--)for(var i=0;i<n;i++)if(e[t[i].getCategory()]>e[t[i+1].getCategory()]){var r=t[i];t[i]=t[i+1],t[i+1]=r}}},{key:"format",value:function(){var t,e,n,i=this.modifiers[0],r=this.modifiers[1],o=this.getModifiers(Ti.Position.BEGIN),s=this.getModifiers(Ti.Position.END);this.sortByCategory(o,{barlines:0,clefs:1,keysignatures:2,timesignatures:3}),this.sortByCategory(s,{timesignatures:0,keysignatures:1,barlines:2,clefs:3}),o.length>1&&i.getType()===Oi.type.REPEAT_BEGIN&&(o.push(o.splice(0,1)[0]),o.splice(0,0,new Oi(Oi.type.SINGLE))),s.indexOf(r)>0&&s.splice(0,0,new Oi(Oi.type.NONE));for(var a=0,u=this.x,l=0;l<o.length;l++)e=(n=o[l]).getPadding(l+a),t=n.getWidth(),n.setX(u+=e),u+=t,e+t===0&&a--;this.start_x=u,u=this.x+this.width;for(var c={left:0,right:0,paddingRight:0,paddingLeft:0},h=0,f=0;f<s.length;f++){h="barlines"===(n=s[f]).getCategory()?f:h,c.right=0,c.left=0,c.paddingRight=0,c.paddingLeft=0;var d=n.getLayoutMetrics();d?(0!==f&&(c.right=d.xMax||0,c.paddingRight=d.paddingRight||0),c.left=-d.xMin||0,c.paddingLeft=d.paddingLeft||0,f===s.length-1&&(c.paddingLeft=0)):(c.paddingRight=n.getPadding(f-h),0!==f&&(c.right=n.getWidth()),0===f&&(c.left=n.getWidth())),u-=c.paddingRight,n.setX(u-=c.right),u-=c.left,u-=c.paddingLeft}this.end_x=1===s.length?this.x+this.width:u,this.formatted=!0}},{key:"draw",value:function(){this.checkContext(),this.setRendered(),this.formatted||this.format();for(var t,e=this.options.num_lines,n=this.width,i=this.x,r=0;r<e;r++)t=this.getYForLine(r),this.applyStyle(),this.options.line_config[r].visible&&(this.context.beginPath(),this.context.moveTo(i,t),this.context.lineTo(i+n,t),this.context.stroke()),this.restoreStyle();for(var o=0;o<this.modifiers.length;o++)"function"==typeof this.modifiers[o].draw&&(this.modifiers[o].applyStyle(this.context),this.modifiers[o].draw(this,this.getModifierXShift(o)),this.modifiers[o].restoreStyle(this.context));if(this.measure>0){this.context.save(),this.context.setFont(this.font.family,this.font.size,this.font.weight);var s=this.context.measureText(""+this.measure).width;t=this.getYForTopText(0)+3,this.context.fillText(""+this.measure,this.x-s/2,t),this.context.restore()}return this}},{key:"drawVertical",value:function(t,e){this.drawVerticalFixed(this.x+t,e)}},{key:"drawVerticalFixed",value:function(t,e){this.checkContext();var n=this.getYForLine(0),i=this.getYForLine(this.options.num_lines-1);e&&this.context.fillRect(t-3,n,1,i-n+1),this.context.fillRect(t,n,1,i-n+1)}},{key:"drawVerticalBar",value:function(t){this.drawVerticalBarFixed(this.x+t,!1)}},{key:"drawVerticalBarFixed",value:function(t){this.checkContext();var e=this.getYForLine(0),n=this.getYForLine(this.options.num_lines-1);this.context.fillRect(t,e,1,n-e+1)}},{key:"getConfigForLines",value:function(){return this.options.line_config}},{key:"setConfigForLine",value:function(t,e){if(t>=this.options.num_lines||t<0)throw new h.RERR("StaveConfigError","The line number must be within the range of the number of lines in the Stave.");if(void 0===e.visible)throw new h.RERR("StaveConfigError","The line configuration object is missing the 'visible' property.");if("boolean"!=typeof e.visible)throw new h.RERR("StaveConfigError","The line configuration objects 'visible' property must be true or false.");return this.options.line_config[t]=e,this}},{key:"setConfigForLines",value:function(t){if(t.length!==this.options.num_lines)throw new h.RERR("StaveConfigError","The length of the lines configuration array must match the number of lines in the Stave");for(var e in t)t[e]||(t[e]=this.options.line_config[e]),h.Merge(this.options.line_config[e],t[e]);return this.options.line_config=t,this}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(e.prototype,n),e}(x);function zr(t){return(zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wr(t){return(Wr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hr(t,e){return(Hr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qr=function(t){function e(t,n,i,r){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s={spacing_between_lines_px:13,num_lines:6,top_text_position:1};return h.Merge(s,r),(o=function(t,e){return!e||"object"!==zr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Wr(e).call(this,t,n,i,s))).setAttribute("type","TabStave"),o}var n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hr(t,e)}(e,t),(n=[{key:"getYForGlyphs",value:function(){return this.getYForLine(2.5)}},{key:"addTabGlyph",value:function(){return this.addClef("tab"),this}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(e.prototype,n),e}(Ur);function Yr(t){return(Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xr(t,e,n){return(Xr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Kr(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Kr(t){return(Kr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Zr(t,e,n){return e&&Jr(t.prototype,e),n&&Jr(t,n),t}function Qr(t,e){return(Qr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $r=function(t){function e(t,n){var i;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=function(t,e){return!e||"object"!==Yr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Kr(e).call(this,t))).setAttribute("type","TabNote"),i.ghost=!1,i.positions=t.positions,h.Merge(i.render_options,{glyph_font_scale:B.DEFAULT_TABLATURE_FONT_SCALE,draw_stem:n,draw_dots:n,draw_stem_through_stave:!1,y_shift:0,scale:1,font:"10pt Arial"}),i.glyph=B.durationToGlyph(i.duration,i.noteType),!i.glyph)throw new h.RuntimeError("BadArguments","Invalid note initialization data (No glyph found): ".concat(JSON.stringify(t)));return i.buildStem(),i.setStemDirection(t.stem_direction?t.stem_direction:nt.UP),i.ghost=!1,i.updateWidth(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qr(t,e)}(e,t),Zr(e,null,[{key:"CATEGORY",get:function(){return"tabnotes"}}]),Zr(e,[{key:"reset",value:function(){this.stave&&this.setStave(this.stave)}},{key:"getCategory",value:function(){return e.CATEGORY}},{key:"setGhost",value:function(t){return this.ghost=t,this.updateWidth(),this}},{key:"hasStem",value:function(){return this.render_options.draw_stem}},{key:"getStemExtension",value:function(){var t=this.getGlyph();return null!=this.stem_extension_override?this.stem_extension_override:t?1===this.getStemDirection()?t.tabnote_stem_up_extension:t.tabnote_stem_down_extension:0}},{key:"addDot",value:function(){var t=new he;return this.dots+=1,this.addModifier(t,0)}},{key:"updateWidth",value:function(){var t=this;this.glyphs=[],this.width=0;for(var e=0;e<this.positions.length;++e){var n=this.positions[e].fret;this.ghost&&(n="("+n+")");var i=B.tabToGlyph(n,this.render_options.scale);this.glyphs.push(i),this.width=Math.max(i.getWidth(),this.width)}this.glyph.getWidth=function(){return t.width}}},{key:"setStave",value:function(t){var n,i=this;if(Xr(Kr(e.prototype),"setStave",this).call(this,t),this.context=t.context,this.context){var r=this.context;this.width=0;var o=function(){var t=i.glyphs[n],e=""+t.text;"X"!==e.toUpperCase()&&(r.save(),r.setRawFont(i.render_options.font),t.width=r.measureText(e).width,r.restore(),t.getWidth=function(){return t.width}),i.width=Math.max(t.getWidth(),i.width)};for(n=0;n<this.glyphs.length;++n)o();this.glyph.getWidth=function(){return i.width}}var s=this.positions.map((function(e){return t.getYForLine(e.str-1)}));return this.setYs(s),this.stem&&this.stem.setYBounds(this.getStemY(),this.getStemY()),this}},{key:"getPositions",value:function(){return this.positions}},{key:"addToModifierContext",value:function(t){this.setModifierContext(t);for(var e=0;e<this.modifiers.length;++e)this.modifierContext.addModifier(this.modifiers[e]);return this.modifierContext.addModifier(this),this.preFormatted=!1,this}},{key:"getTieRightX",value:function(){var t=this.getAbsoluteX();return(t+=this.glyph.getWidth()/2)+(-this.width/2+this.width+2)}},{key:"getTieLeftX",value:function(){var t=this.getAbsoluteX();return(t+=this.glyph.getWidth()/2)-(this.width/2+2)}},{key:"getModifierStartXY",value:function(t,e){if(!this.preFormatted)throw new h.RERR("UnformattedNote","Can't call GetModifierStartXY on an unformatted note");if(0===this.ys.length)throw new h.RERR("NoYValues","No Y-Values calculated for this note.");var n=0;return t===oe.Position.LEFT?n=-2:t===oe.Position.RIGHT?n=this.width+2:t!==oe.Position.BELOW&&t!==oe.Position.ABOVE||(n=this.glyph.getWidth()/2),{x:this.getAbsoluteX()+n,y:this.ys[e]}}},{key:"getLineForRest",value:function(){return this.positions[0].str}},{key:"preFormat",value:function(){this.preFormatted||(this.modifierContext&&this.modifierContext.preFormat(),this.setPreFormatted(!0))}},{key:"getStemX",value:function(){return this.getCenterGlyphX()}},{key:"getStemY",value:function(){var t=this.stave.getNumLines()-.5;return this.stave.getYForLine(nt.UP===this.stem_direction?-.5:t)}},{key:"getStemExtents",value:function(){return this.stem.getExtents()}},{key:"drawFlag",value:function(){var t=this.glyph,e=this.context,n=this.stem,i=this.stem_direction,r=this.render_options,o=r.glyph_font_scale;if(t.flag&&null==this.beam&&r.draw_stem){var s=this.getStemX()+1,a=this.getStemY()-n.getHeight();O.renderGlyph(e,s,a,o,i===nt.DOWN?t.code_flag_downstem:t.code_flag_upstem)}}},{key:"drawModifiers",value:function(){var t=this;this.modifiers.forEach((function(e){("dots"!==e.getCategory()||t.render_options.draw_dots)&&(e.setContext(t.context),e.drawWithStyle())}))}},{key:"drawStemThrough",value:function(){var t=this.getStemX(),e=this.getStemY(),n=this.context;if(this.render_options.draw_stem&&this.render_options.draw_stem_through_stave){var i=function(t,e,n,i){var r=1!==i,o=-1!==i,s=n.getSpacingBetweenLines(),a=n.getNumLines(),u=[];return e.forEach((function(e){var l=e.indexOf(a)>-1,c=e.indexOf(1)>-1;if(!(r&&c||o&&l)){1===e.length&&e.push(e[0]);var h=[];e.forEach((function(e,r,o){var u=1===e,l=e===a,c=n.getYForLine(e-1);0!==r||u?r!==o.length-1||l||(c+=s/2-1):c-=s/2-1,h.push(c),1===i&&u?h.push(t-2):-1===i&&l&&h.push(t+2)})),u.push(h.sort((function(t,e){return t-e})))}})),u}(e,function(t,e){for(var n=[],i=[],r=1;r<=t;r++)e.indexOf(r)>-1?(n.push(i),i=[]):i.push(r);return i.length>0&&n.push(i),n}(this.stave.getNumLines(),this.positions.map((function(t){return t.str}))),this.getStave(),this.getStemDirection());n.save(),n.setLineWidth(nt.WIDTH),i.forEach((function(e){0!==e.length&&(n.beginPath(),n.moveTo(t,e[0]),n.lineTo(t,e[e.length-1]),n.stroke(),n.closePath())})),n.restore()}}},{key:"drawPositions",value:function(){for(var t=this.context,e=this.getAbsoluteX(),n=this.ys,i=0;i<this.positions.length;++i){var r=n[i]+this.render_options.y_shift,o=this.glyphs[i],s=e+this.glyph.getWidth()/2-o.getWidth()/2;if(t.clearRect(s-2,r-3,o.getWidth()+4,6),o.code)O.renderGlyph(t,s,r,this.render_options.glyph_font_scale*this.render_options.scale,o.code);else{t.save(),t.setRawFont(this.render_options.font);var a=o.text.toString();t.fillText(a,s,r+5*this.render_options.scale),t.restore()}}}},{key:"draw",value:function(){if(this.checkContext(),!this.stave)throw new h.RERR("NoStave","Can't draw without a stave.");if(0===this.ys.length)throw new h.RERR("NoYValues","Can't draw note without Y values.");this.setRendered();var t=null==this.beam&&this.render_options.draw_stem;this.drawPositions(),this.drawStemThrough();var e=this.getStemX();this.stem.setNoteHeadXBounds(e,e),t&&(this.context.openGroup("stem",null,{pointerBBox:!0}),this.stem.setContext(this.context).draw(),this.context.closeGroup()),this.drawFlag(),this.drawModifiers()}}]),e}($t);function to(t){return(to="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eo(t){return(eo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function no(t,e){return(no=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var io,ro=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==to(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,eo(e).call(this))).setAttribute("type","VibratoBracket"),n.start=t.start,n.stop=t.stop,n.line=1,n.render_options={harsh:!1,wave_height:6,wave_width:4,wave_girth:2},n}var n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&no(t,e)}(e,t),(n=[{key:"setLine",value:function(t){return this.line=t,this}},{key:"setHarsh",value:function(t){return this.render_options.harsh=t,this}},{key:"draw",value:function(){var t=this.context;this.setRendered();var e=this.start?this.start.getStave().getYForTopText(this.line):this.stop.getStave().getYForTopText(this.line),n=this.start?this.start.getAbsoluteX():this.stop.getStave().getTieStartX(),i=this.stop?this.stop.getAbsoluteX()-this.stop.getWidth()-5:this.start.getStave().getTieEndX()-10;this.render_options.vibrato_width=i-n,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];ro.DEBUG&&h.L("Vex.Flow.VibratoBracket",e)}("Rendering VibratoBracket: start_x:",n,"stop_x:",i,"y:",e),mi.renderVibrato(t,n,e,this.render_options)}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(e.prototype,n),e}(x);function oo(t){return(oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function so(t){return(so=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ao(t,e){return(ao=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var uo=function(t){function e(t,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=function(t,e){return!e||"object"!==oo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,so(e).call(this))).setAttribute("type","MultiMeasureRest"),i.render_options={show_number:!0,number_line:-.5,number_glyph_point:40,padding_left:void 0,padding_right:void 0,line:2,spacing_between_lines_px:10,line_thickness:void 0,serif_thickness:2,use_symbols:!1,symbol_spacing:void 0,semibrave_rest_glyph_scale:B.DEFAULT_NOTATION_FONT_SCALE},h.Merge(i.render_options,n),i.number_of_measures=t,i.xs={left:NaN,right:NaN},i}var n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ao(t,e)}(e,t),(n=[{key:"getXs",value:function(){return this.xs}},{key:"setStave",value:function(t){return this.stave=t,this}},{key:"getStave",value:function(){return this.stave}},{key:"drawLine",value:function(t,e,n,i){var r=this.stave.getYForLine(this.render_options.line),o=.1*(n-e);e+=o,n-=o;var s=this.render_options.serif_thickness,a=.25*i;isNaN(this.render_options.line_thickness)||(a=.5*this.render_options.line_thickness),t.save(),t.beginPath(),t.moveTo(e,r-i),t.lineTo(e+s,r-i),t.lineTo(e+s,r-a),t.lineTo(n-s,r-a),t.lineTo(n-s,r-i),t.lineTo(n,r-i),t.lineTo(n,r+i),t.lineTo(n-s,r+i),t.lineTo(n-s,r+a),t.lineTo(e+s,r+a),t.lineTo(e+s,r+i),t.lineTo(e,r+i),t.closePath(),t.fill()}},{key:"drawSymbols",value:function(t,e,n,i){var r=Math.floor(this.number_of_measures/4),o=this.number_of_measures%4,s=Math.floor(o/2),a=o%2,u=function(){if(!io){var t=new Kt({duration:"w",note_type:"r"});io={glyph_font_scale:t.render_options.glyph_font_scale,glyph_code:t.glyph_code,width:t.getWidth()}}return io}(),l=u.width*(this.render_options.semibrave_rest_glyph_scale/u.glyph_font_scale),c={2:{width:.5*l,height:i},1:{width:l}},h=1.35*l;isNaN(this.render_options.symbol_spacing)||(h=this.render_options.symbol_spacing);var f=e+.5*(n-e)-.5*(r*c[2].width+s*c[2].width+a*c[1].width+(r+s+a-1)*h),d=this.stave.getYForLine(this.render_options.line-1),p=this.stave.getYForLine(this.render_options.line),m=this.stave.getYForLine(this.render_options.line+1);t.save(),t.setStrokeStyle("none"),t.setLineWidth(0);for(var b=0;b<r;++b)t.fillRect(f,p-c[2].height,c[2].width,c[2].height),t.fillRect(f,m-c[2].height,c[2].width,c[2].height),f+=c[2].width+h;for(var v=0;v<s;++v)t.fillRect(f,p-c[2].height,c[2].width,c[2].height),f+=c[2].width+h;for(var y=0;y<a;++y)O.renderGlyph(t,f,d,this.render_options.semibrave_rest_glyph_scale,u.glyph_code),f+=c[1].width+h;t.restore()}},{key:"draw",value:function(){this.checkContext(),this.setRendered();var t=this.context,e=this.stave,n=this.render_options.spacing_between_lines_px,i=e.getNoteStartX(),r=e.getNoteEndX(),o=e.getModifiers(Ti.Position.BEGIN);if(1===o.length&&"barlines"===o[0].getCategory()&&(i-=o[0].getWidth()),isNaN(this.render_options.padding_left)||(i=e.getX()+this.render_options.padding_left),isNaN(this.render_options.padding_right)||(r=e.getX()+e.getWidth()-this.render_options.padding_right),this.xs.left=i,this.xs.right=r,this.render_options.use_symbols?this.drawSymbols(t,i,r,n):this.drawLine(t,i,r,n),this.render_options.show_number){var s="/"+this.number_of_measures,a=new Cr(null,void 0,!1);a.point=this.render_options.number_glyph_point,a.setTimeSig(s),a.setStave(e),a.x=i+.5*(r-i)-.5*a.timeSig.glyph.getMetrics().width,a.bottomLine=this.render_options.number_line,a.setContext(t).draw()}}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(e.prototype,n),e}(x);function lo(t){return(lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function co(t,e,n){return(co="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ho(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function ho(t){return(ho=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function po(t,e,n){return e&&fo(t.prototype,e),n&&fo(t,n),t}function mo(t,e){return(mo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var bo=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e){return!e||"object"!==lo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,ho(e).call(this,{duration:"b"}))).setAttribute("type","ClefNote"),r.setType(t,n,i),r.ignore_ticks=!0,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mo(t,e)}(e,t),po(e,null,[{key:"CATEGORY",get:function(){return"clefnote"}}]),po(e,[{key:"setType",value:function(t,e,n){return this.type=t,this.clef_obj=new vr(t,e,n),this.clef=this.clef_obj.clef,this.glyph=new O(this.clef.code,this.clef.point),this.setWidth(this.glyph.getMetrics().width),this}},{key:"getClef",value:function(){return this.clef}},{key:"setContext",value:function(t){return this.context=t,this.glyph.setContext(this.context),this}},{key:"getBoundingBox",value:function(){return co(ho(e.prototype),"getBoundingBox",this).call(this)}},{key:"addToModifierContext",value:function(){return this}},{key:"getCategory",value:function(){return e.CATEGORY}},{key:"preFormat",value:function(){return this.setPreFormatted(!0),this}},{key:"draw",value:function(){if(!this.stave)throw new h.RERR("NoStave","Can't draw without a stave.");this.glyph.getContext()||this.glyph.setContext(this.context),this.setRendered();var t=this.getAbsoluteX();if(this.glyph.setStave(this.stave),this.glyph.setYShift(this.stave.getYForLine(this.clef.line)-this.stave.getYForGlyphs()),this.glyph.renderToStave(t),void 0!==this.clef_obj.annotation){var e=new O(this.clef_obj.annotation.code,this.clef_obj.annotation.point);e.getContext()||e.setContext(this.context),e.setStave(this.stave),e.setYShift(this.stave.getYForLine(this.clef_obj.annotation.line)-this.stave.getYForGlyphs()),e.setXShift(this.clef_obj.annotation.x_shift),e.renderToStave(t)}}}]),e}(Ut);function vo(t){return(vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yo(t,e,n){return(yo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=go(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function go(t){return(go=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function So(t,e){return(So=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wo=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e){return!e||"object"!==vo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,go(e).call(this,{duration:"b"}))).setAttribute("type","KeySigNote"),r.keySignature=new xr(t,n,i),r.ignore_ticks=!0,r}var n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&So(t,e)}(e,t),(n=[{key:"getBoundingBox",value:function(){return yo(go(e.prototype),"getBoundingBox",this).call(this)}},{key:"addToModifierContext",value:function(){return this}},{key:"preFormat",value:function(){return this.setPreFormatted(!0),this.keySignature.setStave(this.stave),this.keySignature.format(),this.setWidth(this.keySignature.width),this}},{key:"draw",value:function(){this.stave.checkContext(),this.setRendered(),this.keySignature.x=this.getAbsoluteX(),this.keySignature.setContext(this.context),this.keySignature.draw()}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(e.prototype,n),e}(Ut);function _o(t){return(_o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xo(t,e,n){return(xo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ko(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function ko(t){return(ko=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Eo(t,e){return(Eo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Po=function(t){function e(t,n){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=function(t,e){return!e||"object"!==_o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,ko(e).call(this,{duration:"b"}))).setAttribute("type","TimeSigNote");var r=new Cr(t,n);return i.timeSig=r.getTimeSig(),i.setWidth(i.timeSig.glyph.getMetrics().width),i.ignore_ticks=!0,i}var n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Eo(t,e)}(e,t),(n=[{key:"getBoundingBox",value:function(){return xo(ko(e.prototype),"getBoundingBox",this).call(this)}},{key:"addToModifierContext",value:function(){return this}},{key:"preFormat",value:function(){return this.setPreFormatted(!0),this}},{key:"draw",value:function(){this.stave.checkContext(),this.setRendered(),this.timeSig.glyph.getContext()||this.timeSig.glyph.setContext(this.context),this.timeSig.glyph.setStave(this.stave),this.timeSig.glyph.setYShift(this.stave.getYForLine(this.timeSig.line)-this.stave.getYForGlyphs()),this.timeSig.glyph.renderToStave(this.getAbsoluteX())}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(e.prototype,n),e}(Ut);function Ao(t){return(Ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lo(t){return(Lo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function To(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Mo(t,e,n){return e&&To(t.prototype,e),n&&To(t,n),t}function Co(t,e){return(Co=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var No=function(t){function e(t,n){var i;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=function(t,e){return!e||"object"!==Ao(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Lo(e).call(this,t,"sl."))).setAttribute("type","TabSlide"),!n){var r=t.first_note.getPositions()[0].fret,o=t.last_note.getPositions()[0].fret;n=parseInt(r,10)>parseInt(o,10)?e.SLIDE_DOWN:e.SLIDE_UP}return i.slide_direction=n,i.render_options.cp1=11,i.render_options.cp2=14,i.render_options.y_shift=.5,i.setFont({font:"Times",size:10,style:"bold italic"}),i.setNotes(t),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Co(t,e)}(e,t),Mo(e,null,[{key:"createSlideUp",value:function(t){return new e(t,e.SLIDE_UP)}},{key:"createSlideDown",value:function(t){return new e(t,e.SLIDE_DOWN)}},{key:"SLIDE_UP",get:function(){return 1}},{key:"SLIDE_DOWN",get:function(){return-1}}]),Mo(e,[{key:"renderTie",value:function(t){if(0===t.first_ys.length||0===t.last_ys.length)throw new h.RERR("BadArguments","No Y-values to render");var n=this.context,i=t.first_x_px,r=t.first_ys,o=t.last_x_px,s=this.slide_direction;if(s!==e.SLIDE_UP&&s!==e.SLIDE_DOWN)throw new h.RERR("BadSlide","Invalid slide direction");for(var a=0;a<this.first_indices.length;++a){var u=r[this.first_indices[a]]+this.render_options.y_shift;if(isNaN(u))throw new h.RERR("BadArguments","Bad indices for slide rendering.");n.beginPath(),n.moveTo(i,u+3*s),n.lineTo(o,u-3*s),n.closePath(),n.stroke()}this.setRendered()}}]),e}(rn);function Io(t){return(Io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ro(){return(Ro=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function Oo(t,e,n){return(Oo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fo(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Fo(t){return(Fo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Do(t,e,n){return e&&Bo(t.prototype,e),n&&Bo(t,n),t}function jo(t,e){return(jo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Vo=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==Io(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Fo(e).call(this,Ro(t,{glyph_font_scale:B.DEFAULT_NOTATION_FONT_SCALE*e.SCALE,stroke_px:e.LEDGER_LINE_OFFSET})))).setAttribute("type","GraceNote"),n.slash=t.slash,n.slur=!0,n.buildNoteHeads(),n.width=3,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jo(t,e)}(e,t),Do(e,null,[{key:"CATEGORY",get:function(){return"gracenotes"}},{key:"LEDGER_LINE_OFFSET",get:function(){return 2}},{key:"SCALE",get:function(){return.66}}]),Do(e,[{key:"getStemExtension",value:function(){if(null!=this.stem_extension_override)return this.stem_extension_override;var t=this.getGlyph();if(t){var n=Oo(Fo(e.prototype),"getStemExtension",this).call(this);if(t.stem){var i=this.getStaveNoteScale();n=(nt.HEIGHT+n)*i-nt.HEIGHT}return n}return 0}},{key:"getCategory",value:function(){return e.CATEGORY}},{key:"getStaveNoteScale",value:function(){return this.render_options.glyph_font_scale/B.DEFAULT_NOTATION_FONT_SCALE}},{key:"draw",value:function(){Oo(Fo(e.prototype),"draw",this).call(this),this.setRendered();var t=this.stem;if(this.slash&&t){var n=this.getStaveNoteScale(),i=n/.66,r=void 0,o=this.beam;if(o)o.postFormatted||o.postFormat(),r=this.calcBeamedNotesSlashBBox(8*i,8*i,{stem:6*i,beam:5*i});else{var s=this.getStemDirection(),a=this.getNoteHeadBounds(),u=t.getHeight(),l=this.getAbsoluteX(),c=s===B.Stem.DOWN?a.y_top-u:a.y_bottom-u,h=B.STEM_HEIGHT;h-=h/2.8,c+=(h+=s===B.Stem.DOWN?this.glyph.stem_down_extension:this.glyph.stem_up_extension)*n*s;var f=s===B.Stem.UP?{x1:1,y1:0,x2:13,y2:-9}:{x1:-4,y1:1,x2:13,y2:9};r={x1:l+=f.x1*i,y1:c+=f.y1*i,x2:l+f.x2*i,y2:c+f.y2*i}}var d=this.context;d.save(),d.setLineWidth(1*i),d.beginPath(),d.moveTo(r.x1,r.y1),d.lineTo(r.x2,r.y2),d.closePath(),d.stroke(),d.restore()}}},{key:"calcBeamedNotesSlashBBox",value:function(t,e,n){var i=this.beam,r=i.slope,o=i.notes[i.notes.length-1]===this?-1:1,s=Math.atan(r*o),a=Math.cos(s)*e,u=Math.sin(s)*e;t*=this.getStemDirection();var l=Math.atan((u-t)/a),c=Math.cos(l)*n.stem*o,h=Math.sin(l)*n.stem,f=Math.cos(l)*n.beam*o,d=Math.sin(l)*n.beam,p=this.getStemX(),m=i.notes[0].getStemX(),b=this.beam.getBeamYToDraw()+(p-m)*r;return{x1:p-c,y1:b+t-h,x2:p+a*o+f,y2:b+u+d}}}]),e}(Se);function Go(t){return(Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Uo(t,e,n){return(Uo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zo(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function zo(t){return(zo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ho(t,e,n){return e&&Wo(t.prototype,e),n&&Wo(t,n),t}function qo(t,e){return(qo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Yo=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==Go(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,zo(e).call(this,t,!1))).setAttribute("type","GraceTabNote"),h.Merge(n.render_options,{y_shift:.3,scale:.6,font:"7.5pt Arial"}),n.updateWidth(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qo(t,e)}(e,t),Ho(e,null,[{key:"CATEGORY",get:function(){return"gracetabnotes"}}]),Ho(e,[{key:"getCategory",value:function(){return e.CATEGORY}},{key:"draw",value:function(){Uo(zo(e.prototype),"draw",this).call(this),this.setRendered()}}]),e}($r);function Xo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ko(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Jo(t,e,n){return e&&Ko(t.prototype,e),n&&Ko(t,n),t}var Zo=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"E/5,B/4,G/4,D/4,A/3,E/3,B/2,E/2";Xo(this,t),this.setTuning(e)}return Jo(t,null,[{key:"names",get:function(){return{standard:"E/5,B/4,G/4,D/4,A/3,E/3",dagdad:"D/5,A/4,G/4,D/4,A/3,D/3",dropd:"E/5,B/4,G/4,D/4,A/3,D/3",eb:"Eb/5,Bb/4,Gb/4,Db/4,Ab/3,Db/3",standardBanjo:"D/5,B/4,G/4,D/4,G/5"}}}]),Jo(t,[{key:"noteToInteger",value:function(t){return B.keyProperties(t).int_value}},{key:"setTuning",value:function(e){t.names[e]&&(e=t.names[e]),this.tuningString=e,this.tuningValues=[],this.numStrings=0;var n=e.split(/\s*,\s*/);if(0===n.length)throw new h.RERR("BadArguments","Invalid tuning string: "+e);this.numStrings=n.length;for(var i=0;i<this.numStrings;++i)this.tuningValues[i]=this.noteToInteger(n[i])}},{key:"getValueForString",value:function(t){var e=parseInt(t,10);if(e<1||e>this.numStrings)throw new h.RERR("BadArguments","String number must be between 1 and ".concat(this.numStrings,":").concat(t));return this.tuningValues[e-1]}},{key:"getValueForFret",value:function(t,e){var n=this.getValueForString(e),i=parseInt(t,10);if(i<0)throw new h.RERR("BadArguments","Fret number must be 0 or higher: "+t);return n+i}},{key:"getNoteForFret",value:function(t,e){var n=this.getValueForFret(t,e),i=Math.floor(n/12);return B.integerToNote(n%12)+"/"+i}}]),t}(),Qo=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.music=new Le,this.setKey(e)}var e;return(e=[{key:"setKey",value:function(t){return this.key=t,this.reset(),this}},{key:"getKey",value:function(){return this.key}},{key:"reset",value:function(){if(this.keyParts=this.music.getKeyParts(this.key),this.keyString=this.keyParts.root,this.keyParts.accidental&&(this.keyString+=this.keyParts.accidental),!Le.scaleTypes[this.keyParts.type])throw new h.RERR("BadArguments","Unsupported key type: ".concat(this.key));this.scale=this.music.getScaleTones(this.music.getNoteValue(this.keyString),Le.scaleTypes[this.keyParts.type]),this.scaleMap={},this.scaleMapByValue={},this.originalScaleMapByValue={};for(var t=Le.root_indices[this.keyParts.root],e=0;e<Le.roots.length;++e){var n=Le.roots[(t+e)%Le.roots.length],i=this.music.getRelativeNoteName(n,this.scale[e]);this.scaleMap[n]=i,this.scaleMapByValue[this.scale[e]]=i,this.originalScaleMapByValue[this.scale[e]]=i}return this}},{key:"getAccidental",value:function(t){var e=this.music.getKeyParts(t).root,n=this.music.getNoteParts(this.scaleMap[e]);return{note:this.scaleMap[e],accidental:n.accidental}}},{key:"selectNote",value:function(t){t=t.toLowerCase();var e=this.music.getNoteParts(t),n=this.scaleMap[e.root],i=this.music.getNoteParts(n);if(n===t)return{note:n,accidental:e.accidental,change:!1};var r=this.scaleMapByValue[this.music.getNoteValue(t)];if(null!=r)return{note:r,accidental:this.music.getNoteParts(r).accidental,change:!1};var o=this.originalScaleMapByValue[this.music.getNoteValue(t)];return null!=o?(this.scaleMap[i.root]=o,delete this.scaleMapByValue[this.music.getNoteValue(n)],this.scaleMapByValue[this.music.getNoteValue(t)]=o,{note:o,accidental:this.music.getNoteParts(o).accidental,change:!0}):i.root===t?(delete this.scaleMapByValue[this.music.getNoteValue(this.scaleMap[e.root])],this.scaleMapByValue[this.music.getNoteValue(i.root)]=i.root,this.scaleMap[i.root]=i.root,{note:i.root,accidental:null,change:!0}):(delete this.scaleMapByValue[this.music.getNoteValue(this.scaleMap[e.root])],this.scaleMapByValue[this.music.getNoteValue(t)]=t,delete this.scaleMap[i.root],this.scaleMap[i.root]=t,{note:t,accidental:e.accidental,change:!0})}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}();function $o(t){return($o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ts(t){return(ts=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function es(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ns(t,e,n){return e&&es(t.prototype,e),n&&es(t,n),t}function is(t,e){return(is=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var rs=function(t){function e(t,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=function(t,e){return!e||"object"!==$o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,ts(e).call(this))).setAttribute("type","StaveHairpin"),i.notes=t,i.hairpin=n,i.position=oe.Position.BELOW,i.render_options={height:10,y_shift:0,left_shift_px:0,right_shift_px:0},i.setNotes(t),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&is(t,e)}(e,t),ns(e,null,[{key:"FormatByTicksAndDraw",value:function(t,n,i,r,o,s){var a=n.pixelsPerTick;if(null==a)throw new h.RuntimeError("BadArguments","A valid Formatter must be provide to draw offsets by ticks.");var u={height:s.height,y_shift:s.y_shift,left_shift_px:a*s.left_shift_ticks,right_shift_px:a*s.right_shift_ticks};new e({first_note:i.first_note,last_note:i.last_note},r).setContext(t).setRenderOptions(u).setPosition(o).draw()}},{key:"type",get:function(){return{CRESC:1,DECRESC:2}}}]),ns(e,[{key:"setPosition",value:function(t){return t!==oe.Position.ABOVE&&t!==oe.Position.BELOW||(this.position=t),this}},{key:"setRenderOptions",value:function(t){return null!=t.height&&null!=t.y_shift&&null!=t.left_shift_px&&null!=t.right_shift_px&&(this.render_options=t),this}},{key:"setNotes",value:function(t){if(!t.first_note&&!t.last_note)throw new h.RuntimeError("BadArguments","Hairpin needs to have either first_note or last_note set.");return this.first_note=t.first_note,this.last_note=t.last_note,this}},{key:"renderHairpin",value:function(t){var n=this.checkContext(),i=this.render_options.y_shift+20,r=t.first_y;this.position===oe.Position.ABOVE&&(i=30-i,r=t.first_y-t.staff_height);var o=this.render_options.left_shift_px,s=this.render_options.right_shift_px;switch(n.beginPath(),this.hairpin){case e.type.CRESC:n.moveTo(t.last_x+s,r+i),n.lineTo(t.first_x+o,r+this.render_options.height/2+i),n.lineTo(t.last_x+s,r+this.render_options.height+i);break;case e.type.DECRESC:n.moveTo(t.first_x+o,r+i),n.lineTo(t.last_x+s,r+this.render_options.height/2+i),n.lineTo(t.first_x+o,r+this.render_options.height+i)}n.stroke(),n.closePath()}},{key:"draw",value:function(){this.checkContext(),this.setRendered();var t=this.first_note,e=this.last_note,n=t.getModifierStartXY(this.position,0),i=e.getModifierStartXY(this.position,0);return this.renderHairpin({first_x:n.x,last_x:i.x,first_y:t.getStave().y+t.getStave().height,last_y:e.getStave().y+e.getStave().height,staff_height:t.getStave().height}),!0}}]),e}(x);function os(t){return(os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ss(t){return(ss=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function as(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function us(t,e,n){return e&&as(t.prototype,e),n&&as(t,n),t}function ls(t,e){return(ls=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var cs=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e){return!e||"object"!==os(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,ss(e).call(this))).setAttribute("type","Curve"),r.render_options={spacing:2,thickness:2,x_shift:0,y_shift:10,position:e.Position.NEAR_HEAD,position_end:e.Position.NEAR_HEAD,invert:!1,cps:[{x:0,y:10},{x:0,y:10}]},h.Merge(r.render_options,i),r.setNotes(t,n),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ls(t,e)}(e,t),us(e,null,[{key:"Position",get:function(){return{NEAR_HEAD:1,NEAR_TOP:2}}},{key:"PositionString",get:function(){return{nearHead:e.Position.NEAR_HEAD,nearTop:e.Position.NEAR_TOP}}}]),us(e,[{key:"setNotes",value:function(t,e){if(!t&&!e)throw new h.RuntimeError("BadArguments","Curve needs to have either first_note or last_note set.");return this.from=t,this.to=e,this}},{key:"isPartial",value:function(){return!this.from||!this.to}},{key:"renderCurve",value:function(t){var e=this.context,n=this.render_options.cps,i=this.render_options.x_shift,r=this.render_options.y_shift*t.direction,o=t.first_x+i,s=t.first_y+r,a=t.last_x-i,u=t.last_y+r,l=this.render_options.thickness,c=(a-o)/(n.length+2);e.beginPath(),e.moveTo(o,s),e.bezierCurveTo(o+c+n[0].x,s+n[0].y*t.direction,a-c+n[1].x,u+n[1].y*t.direction,a,u),e.bezierCurveTo(a-c+n[1].x,u+(n[1].y+l)*t.direction,o+c+n[0].x,s+(n[0].y+l)*t.direction,o,s),e.stroke(),e.closePath(),e.fill()}},{key:"draw",value:function(){this.checkContext(),this.setRendered();var t,n,i,r,o,s=this.from,a=this.to,u="baseY",l="baseY";function c(t){return"string"==typeof t?e.PositionString[t]:t}var h=c(this.render_options.position),f=c(this.render_options.position_end);return h===e.Position.NEAR_TOP&&(u="topY",l="topY"),f===e.Position.NEAR_HEAD?l="baseY":f===e.Position.NEAR_TOP&&(l="topY"),s?(t=s.getTieRightX(),o=s.getStemDirection(),i=s.getStemExtents()[u]):(t=a.getStave().getTieStartX(),i=a.getStemExtents()[u]),a?(n=a.getTieLeftX(),o=a.getStemDirection(),r=a.getStemExtents()[l]):(n=s.getStave().getTieEndX(),r=s.getStemExtents()[l]),this.renderCurve({first_x:t,last_x:n,first_y:i,last_y:r,direction:o*(!0===this.render_options.invert?-1:1)}),!0}}]),e}(x);function hs(t){return(hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fs(t){return(fs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ds(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ps(t,e,n){return e&&ds(t.prototype,e),n&&ds(t,n),t}function ms(t,e){return(ms=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bs(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];vs.DEBUG&&h.L("Vex.Flow.TextDynamics",e)}var vs=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==hs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,fs(e).call(this,t))).setAttribute("type","TextDynamics"),n.sequence=t.text.toLowerCase(),n.line=t.line||0,n.glyphs=[],h.Merge(n.render_options,{glyph_font_size:40}),bs("New Dynamics Text: ",n.sequence),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ms(t,e)}(e,t),ps(e,null,[{key:"GLYPHS",get:function(){return{f:{code:"vba",width:12},p:{code:"vbf",width:14},m:{code:"v62",width:17},s:{code:"v4a",width:10},z:{code:"v80",width:12},r:{code:"vb1",width:12}}}}]),ps(e,[{key:"setLine",value:function(t){return this.line=t,this}},{key:"preFormat",value:function(){var t=this,n=0;return this.sequence.split("").forEach((function(i){var r=e.GLYPHS[i];if(!r)throw new h.RERR("Invalid dynamics character: "+i);var o=new O(r.code,t.render_options.glyph_font_size);t.glyphs.push(o),n+=r.width})),this.setWidth(n),this.preFormatted=!0,this}},{key:"draw",value:function(){var t=this;this.setRendered();var n=this.getAbsoluteX(),i=this.stave.getYForLine(this.line+-3);bs("Rendering Dynamics: ",this.sequence);var r=n;this.glyphs.forEach((function(n,o){var s=t.sequence[o];n.render(t.context,r,i),r+=e.GLYPHS[s].width}))}}]),e}(Ut);function ys(t){return(ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gs(t){return(gs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ss(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ws(t,e,n){return e&&Ss(t.prototype,e),n&&Ss(t,n),t}function _s(t,e){return(_s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xs(t,e,n,i,r,o,s){t.beginPath(),t.moveTo(e,n),t.lineTo(i,r),t.lineTo(o,s),t.lineTo(e,n),t.closePath(),t.fill()}var ks=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==ys(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,gs(e).call(this))).setAttribute("type","StaveLine"),n.notes=t,n.text="",n.font={family:"Arial",size:10,weight:""},n.render_options={padding_left:4,padding_right:3,line_width:1,line_dash:null,rounded_end:!0,color:null,draw_start_arrow:!1,draw_end_arrow:!1,arrowhead_length:10,arrowhead_angle:Math.PI/8,text_position_vertical:e.TextVerticalPosition.TOP,text_justification:e.TextJustification.CENTER},n.setNotes(t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_s(t,e)}(e,t),ws(e,null,[{key:"TextVerticalPosition",get:function(){return{TOP:1,BOTTOM:2}}},{key:"TextJustification",get:function(){return{LEFT:1,CENTER:2,RIGHT:3}}}]),ws(e,[{key:"setFont",value:function(t){return this.font=t,this}},{key:"setText",value:function(t){return this.text=t,this}},{key:"setNotes",value:function(t){if(!t.first_note&&!t.last_note)throw new h.RuntimeError("BadArguments","Notes needs to have either first_note or last_note set.");if(t.first_indices||(t.first_indices=[0]),t.last_indices||(t.last_indices=[0]),t.first_indices.length!==t.last_indices.length)throw new h.RuntimeError("BadArguments","Connected notes must have similar index sizes");return this.first_note=t.first_note,this.first_indices=t.first_indices,this.last_note=t.last_note,this.last_indices=t.last_indices,this}},{key:"applyLineStyle",value:function(){var t=this.checkContext(),e=this.render_options;e.line_dash&&t.setLineDash(e.line_dash),e.line_width&&t.setLineWidth(e.line_width),t.setLineCap(e.rounded_end?"round":"square")}},{key:"applyFontStyle",value:function(){var t=this.checkContext();this.font&&t.setFont(this.font.family,this.font.size,this.font.weight),this.render_options.color&&(t.setStrokeStyle(this.render_options.color),t.setFillStyle(this.render_options.color))}},{key:"draw",value:function(){var t=this,n=this.checkContext();this.setRendered();var i,r,o=this.first_note,s=this.last_note,a=this.render_options;n.save(),this.applyLineStyle(),this.first_indices.forEach((function(e,u){var l=t.last_indices[u];i=o.getModifierStartXY(2,e),r=s.getModifierStartXY(1,l);var c=i.y>r.y;i.x+=o.getMetrics().modRightPx+a.padding_left,r.x-=s.getMetrics().modLeftPx+a.padding_right;var h=o.getGlyph().getWidth();o.getKeyProps()[e].displaced&&1===o.getStemDirection()&&(i.x+=h+a.padding_left),s.getKeyProps()[l].displaced&&-1===s.getStemDirection()&&(r.x-=h+a.padding_right),i.y+=c?-3:1,r.y+=c?2:0,function(t,e,n,i){var r,o,s,a,u=i.draw_start_arrow&&i.draw_end_arrow,l=e.x,c=e.y,h=n.x,f=n.y,d=Math.sqrt((h-l)*(h-l)+(f-c)*(f-c)),p=(d-i.arrowhead_length/3)/d;i.draw_end_arrow||u?(r=Math.round(l+(h-l)*p),o=Math.round(c+(f-c)*p)):(r=h,o=f),i.draw_start_arrow||u?(s=l+(h-l)*(1-p),a=c+(f-c)*(1-p)):(s=l,a=c),i.color&&(t.setStrokeStyle(i.color),t.setFillStyle(i.color)),t.beginPath(),t.moveTo(s,a),t.lineTo(r,o),t.stroke(),t.closePath();var m,b,v,y,g=Math.atan2(f-c,h-l),S=Math.abs(i.arrowhead_length/Math.cos(i.arrowhead_angle));(i.draw_end_arrow||u)&&(m=g+Math.PI+i.arrowhead_angle,v=h+Math.cos(m)*S,y=f+Math.sin(m)*S,b=g+Math.PI-i.arrowhead_angle,xs(t,v,y,h,f,h+Math.cos(b)*S,f+Math.sin(b)*S)),(i.draw_start_arrow||u)&&(m=g+i.arrowhead_angle,v=l+Math.cos(m)*S,y=c+Math.sin(m)*S,b=g-i.arrowhead_angle,xs(t,v,y,l,c,l+Math.cos(b)*S,c+Math.sin(b)*S))}(n,i,r,t.render_options)})),n.restore();var u,l=n.measureText(this.text).width,c=a.text_justification,h=0;c===e.TextJustification.LEFT?h=i.x:c===e.TextJustification.CENTER?h=(r.x-i.x)/2+i.x-l/2:c===e.TextJustification.RIGHT&&(h=r.x-l);var f=a.text_position_vertical;return f===e.TextVerticalPosition.TOP?u=o.getStave().getYForTopText():f===e.TextVerticalPosition.BOTTOM&&(u=o.getStave().getYForBottomText(B.TEXT_HEIGHT_OFFSET_HACK)),n.save(),this.applyFontStyle(),n.fillText(this.text,h,u),n.restore(),this}}]),e}(x);function Es(t){return(Es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ps(t){return(Ps=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function As(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ls(t,e,n){return e&&As(t.prototype,e),n&&As(t,n),t}function Ts(t,e){return(Ts=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ms(t,e,n,i,r){var o=Cs.GLYPHS[t];new O(o.code,r).render(e,n+o.x_shift,i+o.y_shift)}var Cs=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==Es(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Ps(e).call(this))).setAttribute("type","PedalMarking"),n.notes=t,n.style=e.TEXT,n.line=0,n.custom_depress_text="",n.custom_release_text="",n.font={family:"Times New Roman",size:12,weight:"italic bold"},n.render_options={bracket_height:10,text_margin_right:6,bracket_line_width:1,glyph_point_size:40,color:"black"},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ts(t,e)}(e,t),Ls(e,null,[{key:"createSustain",value:function(t){return new e(t)}},{key:"createSostenuto",value:function(t){var n=new e(t);return n.setStyle(e.Styles.MIXED),n.setCustomText("Sost. Ped."),n}},{key:"createUnaCorda",value:function(t){var n=new e(t);return n.setStyle(e.Styles.TEXT),n.setCustomText("una corda","tre corda"),n}},{key:"GLYPHS",get:function(){return{pedal_depress:{code:"v36",x_shift:-10,y_shift:0},pedal_release:{code:"v5d",x_shift:-2,y_shift:3}}}},{key:"Styles",get:function(){return{TEXT:1,BRACKET:2,MIXED:3}}},{key:"StylesString",get:function(){return{text:e.Styles.TEXT,bracket:e.Styles.BRACKET,mixed:e.Styles.MIXED}}}]),Ls(e,[{key:"setCustomText",value:function(t,e){return this.custom_depress_text=t||"",this.custom_release_text=e||"",this}},{key:"setStyle",value:function(t){if(t<1&&t>3)throw new h.RERR("InvalidParameter","The style must be one found in PedalMarking.Styles");return this.style=t,this}},{key:"setLine",value:function(t){return this.line=t,this}},{key:"drawBracketed",value:function(){var t,n,i=this.context,r=!1,o=this;this.notes.forEach((function(s,a,u){r=!r;var l=s.getAbsoluteX(),c=s.getStave().getYForBottomText(o.line+3);if(l<t)throw new h.RERR("InvalidConfiguration","The notes provided must be in order of ascending x positions");var f=u[a+1]===s,d=u[a-1]===s,p=0;if(r)if(p=d?5:0,o.style!==e.Styles.MIXED||d)i.beginPath(),i.moveTo(l,c-o.render_options.bracket_height),i.lineTo(l+p,c),i.stroke(),i.closePath();else if(o.custom_depress_text){var m=i.measureText(o.custom_depress_text).width;i.fillText(o.custom_depress_text,l-m/2,c),p=m/2+o.render_options.text_margin_right}else Ms("pedal_depress",i,l,c,o.render_options.glyph_point_size),p=20+o.render_options.text_margin_right;else p=f?-5:0,i.beginPath(),i.moveTo(t,n),i.lineTo(l+p,c),i.lineTo(l,c-o.render_options.bracket_height),i.stroke(),i.closePath();t=l+p,n=c}))}},{key:"drawText",value:function(){var t=this.context,e=!1,n=this,i=n.render_options.glyph_point_size;this.notes.forEach((function(r){e=!e;var o=r.getStave(),s=r.getAbsoluteX(),a=o.getYForBottomText(n.line+3),u=0;e?n.custom_depress_text?(u=t.measureText(n.custom_depress_text).width,t.fillText(n.custom_depress_text,s-u/2,a)):Ms("pedal_depress",t,s,a,i):n.custom_release_text?(u=t.measureText(n.custom_release_text).width,t.fillText(n.custom_release_text,s-u/2,a)):Ms("pedal_release",t,s,a,i)}))}},{key:"draw",value:function(){var t=this.checkContext();this.setRendered(),t.save(),t.setStrokeStyle(this.render_options.color),t.setFillStyle(this.render_options.color),t.setFont(this.font.family,this.font.size,this.font.weight),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Cs.DEBUG&&h.L("Vex.Flow.PedalMarking",e)}("Rendering Pedal Marking"),this.style===e.Styles.BRACKET||this.style===e.Styles.MIXED?(t.setLineWidth(this.render_options.bracket_line_width),this.drawBracketed()):this.style===e.Styles.TEXT&&this.drawText(),t.restore()}}]),e}(x);function Ns(t){return(Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Is(){return(Is=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function Rs(t){return(Rs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Os(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Fs(t,e,n){return e&&Os(t.prototype,e),n&&Os(t,n),t}function Bs(t,e){return(Bs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ds=function(t){function e(t){var n,i=t.start,r=t.stop,o=t.text,s=void 0===o?"":o,a=t.superscript,u=void 0===a?"":a,l=t.position,c=void 0===l?e.Positions.TOP:l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==Ns(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Rs(e).call(this))).setAttribute("type","TextBracket"),n.start=i,n.stop=r,n.text=s,n.superscript=u,n.position="string"==typeof c?e.PositionString[c]:c,n.line=1,n.font={family:"Serif",size:15,weight:"italic"},n.render_options={dashed:!0,dash:[5],color:"black",line_width:1,show_bracket:!0,bracket_height:8,underline_superscript:!0},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bs(t,e)}(e,t),Fs(e,null,[{key:"Positions",get:function(){return{TOP:1,BOTTOM:-1}}},{key:"PositionString",get:function(){return{top:e.Positions.TOP,bottom:e.Positions.BOTTOM}}}]),Fs(e,[{key:"applyStyle",value:function(t){return t.setFont(this.font.family,this.font.size,this.font.weight),t.setStrokeStyle(this.render_options.color),t.setFillStyle(this.render_options.color),t.setLineWidth(this.render_options.line_width),this}},{key:"setDashed",value:function(t,e){return this.render_options.dashed=t,e&&(this.render_options.dash=e),this}},{key:"setFont",value:function(t){return this.font=Is({},this.font,t),this}},{key:"setLine",value:function(t){return this.line=t,this}},{key:"draw",value:function(){var t=this.context;this.setRendered();var n=0;switch(this.position){case e.Positions.TOP:n=this.start.getStave().getYForTopText(this.line);break;case e.Positions.BOTTOM:n=this.start.getStave().getYForBottomText(this.line+B.TEXT_HEIGHT_OFFSET_HACK);break;default:throw new h.RERR("InvalidPosition","The position ".concat(this.position," is invalid"))}var i={x:this.start.getAbsoluteX(),y:n},r={x:this.stop.getAbsoluteX(),y:n};!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Ds.DEBUG&&h.L("Vex.Flow.TextBracket",e)}("Rendering TextBracket: start:",i,"stop:",r,"y:",n);var o=this.render_options.bracket_height*this.position;t.save(),this.applyStyle(t),t.fillText(this.text,i.x,i.y);var s=t.measureText(this.text).width,a=t.measureText("M").width,u=i.y-a/2.5;t.setFont(this.font.family,this.font.size/1.4,this.font.weight),t.fillText(this.superscript,i.x+s+1,u);var l=t.measureText(this.superscript).width,c=t.measureText("M").width,f=i.x,d=u,p=r.x+this.stop.getGlyph().getWidth();this.position===e.Positions.TOP?(f+=s+l+5,d-=c/2.7):this.position===e.Positions.BOTTOM&&(d+=c/2.7,f+=s+2,this.render_options.underline_superscript||(f+=l)),this.render_options.dashed?(X.drawDashedLine(t,f,d,p,d,this.render_options.dash),this.render_options.show_bracket&&X.drawDashedLine(t,p,d+1*this.position,p,d+o,this.render_options.dash)):(t.beginPath(),t.moveTo(f,d),t.lineTo(p,d),this.render_options.show_bracket&&t.lineTo(p,d+o),t.stroke(),t.closePath()),t.restore()}}]),e}(x);function js(t){return(js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vs(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Us(t,e){return!e||"object"!==js(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zs(t,e,n){return(zs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ws(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Ws(t){return(Ws=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hs(t,e){return(Hs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qs=function(t){function e(){var t,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oi.type.SINGLE;Gs(this,e),(n=Us(this,Ws(e).call(this,{duration:"b"}))).setAttribute("type","BarNote"),n.metrics={widths:{}};var r=Oi.type;return n.metrics.widths=(Vs(t={},r.SINGLE,8),Vs(t,r.DOUBLE,12),Vs(t,r.END,15),Vs(t,r.REPEAT_BEGIN,14),Vs(t,r.REPEAT_END,14),Vs(t,r.REPEAT_BOTH,18),Vs(t,r.NONE,0),t),n.ignore_ticks=!0,n.setType(i),n}var n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hs(t,e)}(e,t),(n=[{key:"getType",value:function(){return this.type}},{key:"setType",value:function(t){return this.type="string"==typeof t?Oi.typeString[t]:t,this.setWidth(this.metrics.widths[this.type]),this}},{key:"getBoundingBox",value:function(){return zs(Ws(e.prototype),"getBoundingBox",this).call(this)}},{key:"addToModifierContext",value:function(){return this}},{key:"preFormat",value:function(){return this.setPreFormatted(!0),this}},{key:"draw",value:function(){if(this.checkContext(),!this.stave)throw new h.RERR("NoStave","Can't draw without a stave.");!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];qs.DEBUG&&h.L("Vex.Flow.BarNote",e)}("Rendering bar line at: ",this.getAbsoluteX());var t=new Oi(this.type);t.setX(this.getAbsoluteX()),t.draw(this.stave),this.setRendered()}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(e.prototype,n),e}(Ut);function Ys(t){return(Ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xs(t,e,n){return(Xs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ks(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Ks(t){return(Ks=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Js(t,e){return(Js=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zs=function(t){function e(t){var n,i;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new h.RuntimeError("BadArguments","Ghost note must have valid initialization data to identify duration.");if("string"==typeof t)i={duration:t};else{if("object"!==Ys(t))throw new h.RuntimeError("BadArguments","Ghost note must have valid initialization data to identify duration.");i=t}return(n=function(t,e){return!e||"object"!==Ys(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Ks(e).call(this,i))).setAttribute("type","GhostNote"),n.setWidth(0),n}var n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Js(t,e)}(e,t),(n=[{key:"isRest",value:function(){return!0}},{key:"setStave",value:function(t){Xs(Ks(e.prototype),"setStave",this).call(this,t)}},{key:"addToModifierContext",value:function(){return this}},{key:"preFormat",value:function(){return this.setPreFormatted(!0),this}},{key:"draw",value:function(){if(!this.stave)throw new h.RERR("NoStave","Can't draw without a stave.");this.setRendered();for(var t=0;t<this.modifiers.length;++t){var e=this.modifiers[t];e.setContext(this.context),e.drawWithStyle()}}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(e.prototype,n),e}($t);function Qs(t){return(Qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $s(t){return($s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ta(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ea(t,e,n){return e&&ta(t.prototype,e),n&&ta(t,n),t}function na(t,e){return(na=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ia=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==Qs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,$s(e).call(this))).setAttribute("type","Tremolo"),n.num=t,n.note=null,n.index=null,n.position=oe.Position.CENTER,n.code="v74",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&na(t,e)}(e,t),ea(e,null,[{key:"CATEGORY",get:function(){return"tremolo"}},{key:"YOFFSETSTEMUP",get:function(){return-9}},{key:"YOFFSETSTEMDOWN",get:function(){return-21}},{key:"XOFFSETSTEMUP",get:function(){return 6}},{key:"XOFFSETSTEMDOWN",get:function(){return-2}}]),ea(e,[{key:"getCategory",value:function(){return e.CATEGORY}},{key:"draw",value:function(){if(this.checkContext(),!this.note||null==this.index)throw new h.RERR("NoAttachedNote","Can't draw Tremolo without a note and index.");this.setRendered();var t=this.note.getStemDirection();this.y_spacing=4*t;var n=this.note.getModifierStartXY(this.position,this.index).x,i=this.note.stem.getExtents().topY,r="gracenotes"===this.note.getCategory()?Vo.SCALE:1;i+=t<0?e.YOFFSETSTEMDOWN*r:e.YOFFSETSTEMUP*r,this.font={family:"Arial",size:16*r,weight:""},this.render_options={font_scale:35*r,stroke_px:3,stroke_spacing:10*r},n+=t<0?e.XOFFSETSTEMDOWN:e.XOFFSETSTEMUP;for(var o=0;o<this.num;++o)O.renderGlyph(this.context,n,i,this.render_options.font_scale,this.code),i+=this.y_spacing}}]),e}(oe);function ra(t){return(ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oa(t){return(oa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sa(t,e){return(sa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var aa=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==ra(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,oa(e).call(this,t))).setAttribute("type","Crescendo"),n.decrescendo=!1,n.line=t.line||0,n.height=15,h.Merge(n.render_options,{extend_left:0,extend_right:0,y_shift:0}),n}var n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sa(t,e)}(e,t),(n=[{key:"setLine",value:function(t){return this.line=t,this}},{key:"setHeight",value:function(t){return this.height=t,this}},{key:"setDecrescendo",value:function(t){return this.decrescendo=t,this}},{key:"preFormat",value:function(){return this.preFormatted=!0,this}},{key:"draw",value:function(){this.checkContext(),this.setRendered();var t=this.getTickContext(),e=Hn.getNextContext(t),n=this.getAbsoluteX(),i=e?e.getX():this.stave.x+this.stave.width,r=this.stave.getYForLine(this.line+-3)+1;!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];aa.DEBUG&&h.L("Vex.Flow.Crescendo",e)}("Drawing ",this.decrescendo?"decrescendo ":"crescendo ",this.height,"x",n-i),function(t,e){var n=e.begin_x,i=e.end_x,r=e.y,o=e.height/2;t.beginPath(),e.reverse?(t.moveTo(n,r-o),t.lineTo(i,r),t.lineTo(n,r+o)):(t.moveTo(i,r-o),t.lineTo(n,r),t.lineTo(i,r+o)),t.stroke(),t.closePath()}(this.context,{begin_x:n-this.render_options.extend_left,end_x:i+this.render_options.extend_right,y:r+this.render_options.y_shift,height:this.height,reverse:this.decrescendo})}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(e.prototype,n),e}(Ut),ua=h.MakeException("ParserError");function la(t){return void 0!==t.matchedString?t.matchedString:t.results?la(t.results):1===t.length?la(t[0]):0===t.length?null:t.map(la)}var ca=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.grammar=e}var e;return(e=[{key:"parse",value:function(t){this.line=t,this.pos=0,this.errorPos=-1;var e=this.expect(this.grammar.begin());return e.errorPos=this.errorPos,e}},{key:"matchFail",value:function(t){-1===this.errorPos&&(this.errorPos=this.pos),this.pos=t}},{key:"matchSuccess",value:function(){this.errorPos=-1}},{key:"matchToken",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?new RegExp("^(("+t+"))"):new RegExp("^(("+t+")\\s*)"),n=this.line.slice(this.pos).match(e);return null!==n?{success:!0,matchedString:n[2],incrementPos:n[1].length,pos:this.pos}:{success:!1,pos:this.pos}}},{key:"expectOne",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],i=this.pos,r=!0,o=!1;e=!0===e||!0===t.maybe;for(var s=0;s<t.expect.length;s++){var a=this.pos,u=this.expect(t.expect[s]);if(u.success){if(n.push(u),o=!0,t.or)break}else if(r=!1,!t.or){this.pos=a;break}}var l=t.or&&o||r,c=l||!0===e;return e&&!l&&(this.pos=i),c?this.matchSuccess():this.matchFail(i),{success:c,results:n,numMatches:l?1:0}}},{key:"expectOneOrMore",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],i=this.pos,r=0,o=!0;do{var s=this.expectOne(t);s.success?(r++,n.push(s.results)):o=!1}while(o);var a=r>0||!0===e;return!e||r>0||(this.pos=i),a?this.matchSuccess():this.matchFail(i),{success:a,results:n,numMatches:r}}},{key:"expectZeroOrMore",value:function(t){return this.expectOneOrMore(t,!0)}},{key:"expect",value:function(t){var e;if(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];ca.DEBUG&&h.L("Vex.Flow.Parser",e)}("Evaluating rules:",t),!t)throw new ua("Invalid Rule: "+t,t);var n=t.bind(this.grammar)();if(n.token)(e=this.matchToken(n.token,!0===n.noSpace)).success&&(this.pos+=e.incrementPos);else{if(!n.expect)throw new ua("Bad grammar! No `token` or `expect` property",n);e=n.oneOrMore?this.expectOneOrMore(n):n.zeroOrMore?this.expectZeroOrMore(n):this.expectOne(n)}return e.matches=[],e.results&&e.results.forEach((function(t){return e.matches.push(la(t))})),n.run&&e.success&&n.run(e),e}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,e),t}();function ha(t){return(ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fa(){return(fa=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function da(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pa(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ma(t,e,n){return e&&pa(t.prototype,e),n&&pa(t,n),t}function ba(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];_a.DEBUG&&h.L("Vex.Flow.EasyScore",e)}var va=h.MakeException("EasyScoreError"),ya=function(){function t(e){da(this,t),this.builder=e}return ma(t,[{key:"begin",value:function(){return this.LINE}},{key:"LINE",value:function(){return{expect:[this.PIECE,this.PIECES,this.EOL]}}},{key:"PIECE",value:function(){var t=this;return{expect:[this.CHORDORNOTE,this.PARAMS],run:function(){return t.builder.commitPiece()}}}},{key:"PIECES",value:function(){return{expect:[this.COMMA,this.PIECE],zeroOrMore:!0}}},{key:"PARAMS",value:function(){return{expect:[this.DURATION,this.TYPE,this.DOTS,this.OPTS]}}},{key:"CHORDORNOTE",value:function(){return{expect:[this.CHORD,this.SINGLENOTE],or:!0}}},{key:"CHORD",value:function(){var t=this;return{expect:[this.LPAREN,this.NOTES,this.RPAREN],run:function(e){return t.builder.addChord(e.matches[1])}}}},{key:"NOTES",value:function(){return{expect:[this.NOTE],oneOrMore:!0}}},{key:"NOTE",value:function(){return{expect:[this.NOTENAME,this.ACCIDENTAL,this.OCTAVE]}}},{key:"SINGLENOTE",value:function(){var t=this;return{expect:[this.NOTENAME,this.ACCIDENTAL,this.OCTAVE],run:function(e){return t.builder.addSingleNote(e.matches[0],e.matches[1],e.matches[2])}}}},{key:"ACCIDENTAL",value:function(){return{expect:[this.ACCIDENTALS],maybe:!0}}},{key:"DOTS",value:function(){var t=this;return{expect:[this.DOT],zeroOrMore:!0,run:function(e){return t.builder.setNoteDots(e.matches[0])}}}},{key:"TYPE",value:function(){var t=this;return{expect:[this.SLASH,this.MAYBESLASH,this.TYPES],maybe:!0,run:function(e){return t.builder.setNoteType(e.matches[2])}}}},{key:"DURATION",value:function(){var t=this;return{expect:[this.SLASH,this.DURATIONS],maybe:!0,run:function(e){return t.builder.setNoteDuration(e.matches[1])}}}},{key:"OPTS",value:function(){return{expect:[this.LBRACKET,this.KEYVAL,this.KEYVALS,this.RBRACKET],maybe:!0}}},{key:"KEYVALS",value:function(){return{expect:[this.COMMA,this.KEYVAL],zeroOrMore:!0}}},{key:"KEYVAL",value:function(){var t=this;return{expect:[this.KEY,this.EQUALS,this.VAL],run:function(e){return t.builder.addNoteOption(e.matches[0],e.matches[2].slice(1,-1))}}}},{key:"VAL",value:function(){return{expect:[this.SVAL,this.DVAL],or:!0}}},{key:"KEY",value:function(){return{token:"[a-zA-Z][a-zA-Z0-9]*"}}},{key:"DVAL",value:function(){return{token:'["][^"]*["]'}}},{key:"SVAL",value:function(){return{token:"['][^']*[']"}}},{key:"NOTENAME",value:function(){return{token:"[a-gA-G]"}}},{key:"OCTAVE",value:function(){return{token:"[0-9]+"}}},{key:"ACCIDENTALS",value:function(){return{token:"bbs|bb|bss|bs|b|db|d|##|#|n|\\+\\+-|\\+-|\\+\\+|\\+|k|o"}}},{key:"DURATIONS",value:function(){return{token:"[0-9whq]+"}}},{key:"TYPES",value:function(){return{token:"[rRsSxX]"}}},{key:"LPAREN",value:function(){return{token:"[(]"}}},{key:"RPAREN",value:function(){return{token:"[)]"}}},{key:"COMMA",value:function(){return{token:"[,]"}}},{key:"DOT",value:function(){return{token:"[.]"}}},{key:"SLASH",value:function(){return{token:"[/]"}}},{key:"MAYBESLASH",value:function(){return{token:"[/]?"}}},{key:"EQUALS",value:function(){return{token:"[=]"}}},{key:"LBRACKET",value:function(){return{token:"\\["}}},{key:"RBRACKET",value:function(){return{token:"\\]"}}},{key:"EOL",value:function(){return{token:"$"}}}]),t}(),ga=function(){function t(e){da(this,t),this.factory=e,this.commitHooks=[],this.reset()}return ma(t,[{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options={stem:"auto",clef:"treble"},this.elements={notes:[],accidentals:[]},this.rollingDuration="8",this.resetPiece(),fa(this.options,t)}},{key:"getFactory",value:function(){return this.factory}},{key:"getElements",value:function(){return this.elements}},{key:"addCommitHook",value:function(t){this.commitHooks.push(t)}},{key:"resetPiece",value:function(){ba("resetPiece"),this.piece={chord:[],duration:this.rollingDuration,dots:0,type:void 0,options:{}}}},{key:"setNoteDots",value:function(t){ba("setNoteDots:",t),t&&(this.piece.dots=t.length)}},{key:"setNoteDuration",value:function(t){ba("setNoteDuration:",t),this.rollingDuration=this.piece.duration=t||this.rollingDuration}},{key:"setNoteType",value:function(t){ba("setNoteType:",t),t&&(this.piece.type=t)}},{key:"addNoteOption",value:function(t,e){ba("addNoteOption: key:",t,"value:",e),this.piece.options[t]=e}},{key:"addNote",value:function(t,e,n){ba("addNote:",t,e,n),this.piece.chord.push({key:t,accid:e,octave:n})}},{key:"addSingleNote",value:function(t,e,n){ba("addSingleNote:",t,e,n),this.addNote(t,e,n)}},{key:"addChord",value:function(t){var e=this;ba("startChord"),"object"!==ha(t[0])?this.addSingleNote(t[0]):t.forEach((function(t){t&&e.addNote.apply(e,function(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(t))})),ba("endChord")}},{key:"commitPiece",value:function(){var t=this;ba("commitPiece");var e=this.factory;if(e){var n=fa({},this.options,this.piece.options),i=n.stem,r=n.clef,o="auto"===i.toLowerCase(),s=o||"up"!==i.toLowerCase()?Se.STEM_DOWN:Se.STEM_UP,a=this.piece,u=a.chord,l=a.duration,c=a.dots,h=a.type,f=u.map((function(t){return t.key+"/"+t.octave})),d=e.StaveNote({keys:f,duration:l,dots:c,type:h,clef:r,auto_stem:o});o||d.setStemDirection(s);var p=u.map((function(t){return t.accid||null}));p.forEach((function(t,n){t&&d.addAccidental(n,e.Accidental({type:t}))}));for(var m=0;m<c;m++)d.addDotToAll();this.commitHooks.forEach((function(e){return e(n,d,t)})),this.elements.notes.push(d),this.elements.accidentals.concat(p),this.resetPiece()}}}]),t}();function Sa(t,e){var n=t.id;void 0!==n&&e.setAttribute("id",n)}function wa(t,e){t.class&&t.class.split(/\s*,\s*/).forEach((function(t){return e.addClass(t)}))}var _a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};da(this,t),this.setOptions(e),this.defaults={clef:"treble",time:"4/4",stem:"auto"}}return ma(t,[{key:"set",value:function(t){return fa(this.defaults,t),this}},{key:"setOptions",value:function(t){var e=this;return this.options=fa({factory:null,builder:null,commitHooks:[Sa,wa,jn.easyScoreHook],throwOnError:!1},t),this.factory=this.options.factory,this.builder=this.options.builder||new ga(this.factory),this.grammar=new ya(this.builder),this.parser=new ca(this.grammar),this.options.commitHooks.forEach((function(t){return e.addCommitHook(t)})),this}},{key:"setContext",value:function(t){return this.factory&&this.factory.setContext(t),this}},{key:"parse",value:function(t){this.builder.reset(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});var e=this.parser.parse(t);if(!e.success&&this.options.throwOnError)throw new va("Error parsing line: "+t,e);return e}},{key:"beam",value:function(t){return this.factory.Beam({notes:t,options:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}}),t}},{key:"tuplet",value:function(t){return this.factory.Tuplet({notes:t,options:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}}),t}},{key:"notes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=fa({clef:this.defaults.clef,stem:this.defaults.stem},e),this.parse(t,e),this.builder.getElements().notes}},{key:"voice",value:function(t,e){return e=fa({time:this.defaults.time},e),this.factory.Voice(e).addTickables(t)}},{key:"addCommitHook",value:function(t){return this.builder.addCommitHook(t)}}]),t}();function xa(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ka(){return(ka=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var Ea=h.MakeException("FactoryError");function Pa(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=e.options;return(t=ka(e,t)).options=ka(n,t.options),t}var Aa=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Aa.DEBUG&&h.L("Vex.Flow.Factory",e)}("New factory: ",e),this.options={stave:{space:10},renderer:{context:null,elementId:"",backend:X.Backends.SVG,width:500,height:200,background:"#FFF"},font:{face:"Arial",point:10,style:""}},this.setOptions(e)}var e,n,i;return e=t,i=[{key:"newFromElementId",value:function(e){return new t({renderer:{elementId:e,width:arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,height:arguments.length>2&&void 0!==arguments[2]?arguments[2]:200}})}}],(n=[{key:"reset",value:function(){this.renderQ=[],this.systems=[],this.staves=[],this.voices=[],this.stave=null}},{key:"getOptions",value:function(){return this.options}},{key:"setOptions",value:function(t){for(var e=["stave","renderer","font"],n=0;n<e.length;n++){var i=e[n];ka(this.options[i],t[i])}(null!==this.options.renderer.elementId||this.options.renderer.context)&&this.initRenderer(),this.reset()}},{key:"initRenderer",value:function(){var t=this.options.renderer,e=t.elementId,n=t.backend,i=t.width,r=t.height,o=t.background;if(""===e)throw new Ea("HTML DOM element not set in Factory");this.context=X.buildContext(e,n,i,r,o)}},{key:"getContext",value:function(){return this.context}},{key:"setContext",value:function(t){return this.context=t,this}},{key:"getStave",value:function(){return this.stave}},{key:"getVoices",value:function(){return this.voices}},{key:"space",value:function(t){return this.options.stave.space*t}},{key:"Stave",value:function(t){t=Pa(t,{x:0,y:0,width:this.options.renderer.width-this.space(1),options:{spacing_between_lines_px:this.options.stave.space}});var e=new Ur(t.x,t.y,t.width,t.options);return this.staves.push(e),e.setContext(this.context),this.stave=e,e}},{key:"TabStave",value:function(t){t=Pa(t,{x:0,y:0,width:this.options.renderer.width-this.space(1),options:{spacing_between_lines_px:1.3*this.options.stave.space}});var e=new qr(t.x,t.y,t.width,t.options);return this.staves.push(e),e.setContext(this.context),this.stave=e,e}},{key:"StaveNote",value:function(t){var e=new Se(t);return this.stave&&e.setStave(this.stave),e.setContext(this.context),this.renderQ.push(e),e}},{key:"GhostNote",value:function(t){var e=new Zs(t);return this.stave&&e.setStave(this.stave),e.setContext(this.context),this.renderQ.push(e),e}},{key:"TextNote",value:function(t){var e=new or(t);return this.stave&&e.setStave(this.stave),e.setContext(this.context),this.renderQ.push(e),e}},{key:"BarNote",value:function(t){t=Pa(t,{type:"single",options:{}});var e=new qs(t.type);return this.stave&&e.setStave(this.stave),e.setContext(this.context),this.renderQ.push(e),e}},{key:"ClefNote",value:function(t){t=Pa(t,{type:"treble",options:{size:"default"}});var e=new bo(t.type,t.options.size,t.options.annotation);return this.stave&&e.setStave(this.stave),e.setContext(this.context),this.renderQ.push(e),e}},{key:"TimeSigNote",value:function(t){t=Pa(t,{time:"4/4",options:{}});var e=new Po(t.time);return this.stave&&e.setStave(this.stave),e.setContext(this.context),this.renderQ.push(e),e}},{key:"KeySigNote",value:function(t){var e=new wo(t.key,t.cancelKey,t.alterKey);return this.stave&&e.setStave(this.stave),e.setContext(this.context),this.renderQ.push(e),e}},{key:"TabNote",value:function(t){var e=new $r(t);return this.stave&&e.setStave(this.stave),e.setContext(this.context),this.renderQ.push(e),e}},{key:"GraceNote",value:function(t){var e=new Vo(t);return this.stave&&e.setStave(this.stave),e.setContext(this.context),e}},{key:"GraceNoteGroup",value:function(t){var e=new fn(t.notes,t.slur);return e.setContext(this.context),e}},{key:"Accidental",value:function(t){t=Pa(t,{type:null,options:{}});var e=new je(t.type);return e.setContext(this.context),e}},{key:"Annotation",value:function(t){t=Pa(t,{text:"p",vJustify:"below",hJustify:"center",fontFamily:"Times",fontSize:14,fontWeight:"bold italic",options:{}});var e=new ii(t.text);return e.setJustification(t.hJustify),e.setVerticalJustification(t.vJustify),e.setFont(t.fontFamily,t.fontSize,t.fontWeight),e.setContext(this.context),e}},{key:"Articulation",value:function(t){t=Pa(t,{type:"a.",position:"above",options:{}});var e=new jn(t.type);return e.setPosition(t.position),e.setContext(this.context),e}},{key:"TextDynamics",value:function(t){t=Pa(t,{text:"p",duration:"q",dots:0,line:0,options:{}});var e=new vs({text:t.text,line:t.line,duration:t.duration,dots:t.dots});return this.stave&&e.setStave(this.stave),e.setContext(this.context),this.renderQ.push(e),e}},{key:"Fingering",value:function(t){t=Pa(t,{number:"0",position:"left",options:{}});var e=new Pe(t.number);return e.setPosition(t.position),e.setContext(this.context),e}},{key:"StringNumber",value:function(t){t=Pa(t,{number:"0",position:"left",options:{}});var e=new kn(t.number);return e.setPosition(t.position),e.setContext(this.context),e}},{key:"TickContext",value:function(){return(new Hn).setContext(this.context)}},{key:"ModifierContext",value:function(){return new vi}},{key:"MultiMeasureRest",value:function(t){var e=new uo(t.number_of_measures,t);return e.setContext(this.context),this.renderQ.push(e),e}},{key:"Voice",value:function(t){t=Pa(t,{time:"4/4",options:{}});var e=new Et(t.time);return this.voices.push(e),e}},{key:"StaveConnector",value:function(t){t=Pa(t,{top_stave:null,bottom_stave:null,type:"double",options:{}});var e=new Nt(t.top_stave,t.bottom_stave);return e.setType(t.type).setContext(this.context),this.renderQ.push(e),e}},{key:"Formatter",value:function(){return new xi}},{key:"Tuplet",value:function(t){t=Pa(t,{notes:[],options:{}});var e=new ut(t.notes,t.options).setContext(this.context);return this.renderQ.push(e),e}},{key:"Beam",value:function(t){t=Pa(t,{notes:[],options:{autoStem:!1,secondaryBeamBreaks:[]}});var e=new gt(t.notes,t.options.autoStem).setContext(this.context);return e.breakSecondaryAt(t.options.secondaryBeamBreaks),this.renderQ.push(e),e}},{key:"Curve",value:function(t){t=Pa(t,{from:null,to:null,options:{}});var e=new cs(t.from,t.to,t.options).setContext(this.context);return this.renderQ.push(e),e}},{key:"StaveTie",value:function(t){t=Pa(t,{from:null,to:null,first_indices:[0],last_indices:[0],text:null,options:{direction:void 0}});var e=new Ze({first_note:t.from,last_note:t.to,first_indices:t.first_indices,last_indices:t.last_indices},t.text);return t.options.direction&&e.setDirection(t.options.direction),e.setContext(this.context),this.renderQ.push(e),e}},{key:"StaveLine",value:function(t){t=Pa(t,{from:null,to:null,first_indices:[0],last_indices:[0],options:{}});var e=new ks({first_note:t.from,last_note:t.to,first_indices:t.first_indices,last_indices:t.last_indices});return t.options.text&&e.setText(t.options.text),t.options.font&&e.setFont(t.options.font),e.setContext(this.context),this.renderQ.push(e),e}},{key:"VibratoBracket",value:function(t){t=Pa(t,{from:null,to:null,options:{harsh:!1}});var e=new ro({start:t.from,stop:t.to});return t.options.line&&e.setLine(t.options.line),t.options.harsh&&e.setHarsh(t.options.harsh),e.setContext(this.context),this.renderQ.push(e),e}},{key:"TextBracket",value:function(t){t=Pa(t,{from:null,to:null,text:"",options:{superscript:"",position:1}});var e=new Ds({start:t.from,stop:t.to,text:t.text,superscript:t.options.superscript,position:t.options.position});return t.options.line&&e.setLine(t.options.line),t.options.font&&e.setFont(t.options.font),e.setContext(this.context),this.renderQ.push(e),e}},{key:"System",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.factory=this;var e=new Fa(t).setContext(this.context);return this.systems.push(e),e}},{key:"EasyScore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.factory=this,new _a(t)}},{key:"PedalMarking",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=Pa(t,{notes:[],options:{style:"mixed"}});var e=new Cs(t.notes);return e.setStyle(Cs.StylesString[t.options.style]),e.setContext(this.context),this.renderQ.push(e),e}},{key:"NoteSubGroup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=Pa(t,{notes:[],options:{}});var e=new Ye(t.notes);return e.setContext(this.context),e}},{key:"draw",value:function(){var t=this;this.systems.forEach((function(e){return e.setContext(t.context).format()})),this.staves.forEach((function(e){return e.setContext(t.context).draw()})),this.voices.forEach((function(e){return e.setContext(t.context).draw()})),this.renderQ.forEach((function(e){e.isRendered()||e.setContext(t.context).draw()})),this.systems.forEach((function(e){return e.setContext(t.context).draw()})),this.reset()}}])&&xa(e.prototype,n),i&&xa(e,i),t}();function La(t){return(La="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ta(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ma(t,e){return!e||"object"!==La(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ca(t,e,n){return(Ca="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Na(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Na(t){return(Na=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ia(t,e){return(Ia=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ra(){return(Ra=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function Oa(t,e){var n=e.options;return(t=Ra(e,t)).options=Ra(n,t.options),t}var Fa=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ta(this,e),(t=Ma(this,Na(e).call(this))).setAttribute("type","System"),t.setOptions(n),t.parts=[],t}var n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ia(t,e)}(e,t),(n=[{key:"setOptions",value:function(){this.options=Oa(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{x:10,y:10,width:500,connector:null,spaceBetweenStaves:12,factory:null,debugFormatter:!1,formatIterations:0,options:{}}),this.factory=this.options.factory||new Aa({renderer:{el:null}})}},{key:"setContext",value:function(t){return Ca(Na(e.prototype),"setContext",this).call(this,t),this.factory.setContext(t),this}},{key:"addConnector",value:function(){return this.connector=this.factory.StaveConnector({top_stave:this.parts[0].stave,bottom_stave:this.parts[this.parts.length-1].stave,type:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"double"}),this.connector}},{key:"addStave",value:function(t){var e=this;return(t=Oa(t,{stave:null,voices:[],spaceAbove:0,spaceBelow:0,debugNoteMetrics:!1,options:{left_bar:!1}})).stave||(t.stave=this.factory.Stave({x:this.options.x,y:this.options.y,width:this.options.width,options:t.options})),t.voices.forEach((function(n){return n.setContext(e.context).setStave(t.stave).getTickables().forEach((function(e){return e.setStave(t.stave)}))})),this.parts.push(t),t.stave}},{key:"format",value:function(){var t=this,e=new xi;this.formatter=e;var n=this.options.y,i=0,r=[],o=[];this.parts.forEach((function(s){n+=s.stave.space(s.spaceAbove),s.stave.setY(n),e.joinVoices(s.voices),n+=s.stave.space(s.spaceBelow),n+=s.stave.space(t.options.spaceBetweenStaves),s.debugNoteMetrics&&(o.push({y:n,voice:s.voices[0]}),n+=15),r=r.concat(s.voices),i=Math.max(i,s.stave.getNoteStartX())})),this.parts.forEach((function(t){return t.stave.setNoteStartX(i)})),e.format(r,this.options.width-(i-this.options.x)-Ut.STAVEPADDING);for(var s=0;s<this.options.formatIterations;s++)e.tune();this.startX=i,this.debugNoteMetricsYs=o,this.lastY=n}},{key:"draw",value:function(){var t=this.checkContext();this.setRendered(),this.options.debugFormatter&&xi.plotDebugging(t,this.formatter,this.startX,this.options.y,this.lastY),this.debugNoteMetricsYs.forEach((function(e){e.voice.getTickables().forEach((function(n){return Ut.plotMetrics(t,n,e.y)}))}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(e.prototype,n),e}(x);(h.Flow=B).Element=x,h.Flow.Fraction=p,h.Flow.Renderer=X,h.Flow.Formatter=xi,h.Flow.Music=Le,h.Flow.Glyph=O,h.Flow.Stave=Ur,h.Flow.StaveNote=Se,h.Flow.StaveModifier=Ti,h.Flow.StaveTempo=$i,h.Flow.Voice=Et,h.Flow.Accidental=je,h.Flow.Beam=gt,h.Flow.StaveTie=Ze,h.Flow.TabStave=qr,h.Flow.TabNote=$r,h.Flow.Bend=li,h.Flow.Vibrato=mi,h.Flow.VibratoBracket=ro,h.Flow.Note=Ut,h.Flow.ModifierContext=vi,h.Flow.MultiMeasureRest=uo,h.Flow.TickContext=Hn,h.Flow.Articulation=jn,h.Flow.Annotation=ii,h.Flow.Barline=Oi,h.Flow.NoteHead=Kt,h.Flow.StaveConnector=Nt,h.Flow.ClefNote=bo,h.Flow.KeySignature=xr,h.Flow.KeySigNote=wo,h.Flow.TimeSignature=Cr,h.Flow.TimeSigNote=Po,h.Flow.Stem=nt,h.Flow.TabTie=rn,h.Flow.Clef=vr,h.Flow.Dot=he,h.Flow.Modifier=oe,h.Flow.TabSlide=No,h.Flow.Tuplet=ut,h.Flow.GraceNote=Vo,h.Flow.GraceTabNote=Yo,h.Flow.Tuning=Zo,h.Flow.KeyManager=Qo,h.Flow.StaveHairpin=rs,h.Flow.BoundingBox=A,h.Flow.Stroke=yn,h.Flow.TextNote=or,h.Flow.Curve=cs,h.Flow.TextDynamics=vs,h.Flow.StaveLine=ks,h.Flow.Ornament=Zn,h.Flow.PedalMarking=Cs,h.Flow.TextBracket=Ds,h.Flow.FretHandFinger=Pe,h.Flow.Repetition=Gi,h.Flow.BarNote=qs,h.Flow.GhostNote=Zs,h.Flow.NoteSubGroup=Ye,h.Flow.GraceNoteGroup=fn,h.Flow.Tremolo=ia,h.Flow.StringNumber=kn,h.Flow.Crescendo=aa,h.Flow.Volta=Br,h.Flow.Font=L,h.Flow.System=Fa,h.Flow.Factory=Aa,h.Flow.Parser=ca,h.Flow.EasyScore=_a,h.Flow.Registry=g,e.default=h}]).default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.prototype.hasOwnProperty;function r(t){return"function"==typeof t}function o(t){return void 0===t}function s(t){return"[object String]"===Object.prototype.toString.call(t)}e.has=function(t,e){return i.call(t,e)},e.defaultCompare=function(t,e){return t<e?-1:t===e?0:1},e.defaultEquals=function(t,e){return t===e},e.defaultToString=function(t){return null===t?"COLLECTION_NULL":o(t)?"COLLECTION_UNDEFINED":s(t)?"$s"+t:"$o"+t.toString()},e.makeString=function(t,n){if(void 0===n&&(n=","),null===t)return"COLLECTION_NULL";if(o(t))return"COLLECTION_UNDEFINED";if(s(t))return t.toString();var i="{",r=!0;for(var a in t)e.has(t,a)&&(r?r=!1:i+=n,i=i+a+":"+t[a]);return i+"}"},e.isFunction=r,e.isUndefined=o,e.isString=s,e.reverseCompareFunction=function(t){return o(t)||!r(t)?function(t,e){return t<e?1:t===e?0:-1}:function(e,n){return-1*t(e,n)}},e.compareToEquals=function(t){return function(e,n){return 0===t(e,n)}}},function(t,e,n){"use strict";function i(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var n=0;n<this._listeners[t].length;n++)this._listeners[t][n].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var t=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},t.exports=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MusicSheetReadingException=function(){return function t(e,n){h(this,t),this.message=e,void 0!==n&&(this.message+=" "+n.toString())}}(),e.ArgumentOutOfRangeException=function(){return function t(e){h(this,t),this.message=e}}(),e.InvalidEnumArgumentException=function(){return function t(e){h(this,t),this.message=e}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(11),r=function(){function t(t){this.table={},this.nElements=0,this.toStr=t||i.defaultToString}return t.prototype.getValue=function(t){var e=this.table["$"+this.toStr(t)];if(!i.isUndefined(e))return e.value},t.prototype.setValue=function(t,e){if(!i.isUndefined(t)&&!i.isUndefined(e)){var n,r="$"+this.toStr(t),o=this.table[r];return i.isUndefined(o)?(this.nElements++,n=void 0):n=o.value,this.table[r]={key:t,value:e},n}},t.prototype.remove=function(t){var e="$"+this.toStr(t),n=this.table[e];if(!i.isUndefined(n))return delete this.table[e],this.nElements--,n.value},t.prototype.keys=function(){var t=[];for(var e in this.table)i.has(this.table,e)&&t.push(this.table[e].key);return t},t.prototype.values=function(){var t=[];for(var e in this.table)i.has(this.table,e)&&t.push(this.table[e].value);return t},t.prototype.forEach=function(t){for(var e in this.table)if(i.has(this.table,e)){var n=this.table[e];if(!1===t(n.key,n.value))return}},t.prototype.containsKey=function(t){return!i.isUndefined(this.getValue(t))},t.prototype.clear=function(){this.table={},this.nElements=0},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return this.nElements<=0},t.prototype.toString=function(){var t="{";return this.forEach((function(e,n){t+="\n\t"+e+" : "+n})),t+"\n}"},t}();e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(53),a=i(2),u=i(2),l=function(t){n(i,t);var e=r(i);function i(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.major;return h(this,i),(n=e.call(this,t)).Key=r,n.mode=s,n}return d(i,[{key:"getFundamentalNotesOfAccidentals",value:function(){var t=[];if(this.keyType>0)for(var e=0;e<this.keyType;e++)t.push(i.sharpPositionList[e]);else if(this.keyType<0)for(var n=0;n<-this.keyType;n++)t.push(i.flatPositionList[n]);return t}},{key:"getAlterationForPitch",value:function(t){return this.keyType>0&&i.sharpPositionList.indexOf(t.FundamentalNote)<=this.keyType?u.AccidentalEnum.SHARP:this.keyType<0&&i.flatPositionList.indexOf(t.FundamentalNote)<=Math.abs(this.keyType)?u.AccidentalEnum.FLAT:u.AccidentalEnum.NONE}},{key:"ToString",value:function(){return"Key: "+this.keyType+this.mode}},{key:"OperatorEquals",value:function(t){return this===t||void 0!==this&&void 0!==t&&this.Key===t.Key&&this.Mode===t.Mode}},{key:"OperatorNotEqual",value:function(t){return!this.OperatorEquals(t)}},{key:"Key",get:function(){return this.keyType},set:function(t){this.keyType=t}},{key:"Mode",get:function(){return this.mode},set:function(t){this.mode=t}}],[{key:"copy",value:function(t){return new i(t.parent,t.Key,t.Mode)}},{key:"getNoteEnumList",value:function(t){var e=[];if(t.keyType>0)for(var n=0;n<t.keyType;n++)e.push(i.sharpPositionList[n]);if(t.keyType<0)for(var r=0;r<Math.abs(t.keyType);r++)e.push(i.flatPositionList[r]);return e}},{key:"getAllPossibleMajorKeyInstructions",value:function(){for(var t=[],e=-7;e<7;e++){var n=new i(void 0,e,o.major);t.push(n)}return t}}]),i}(s.AbstractNotationInstruction);e.KeyInstruction=l,l.sharpPositionList=[a.NoteEnum.F,a.NoteEnum.C,a.NoteEnum.G,a.NoteEnum.D,a.NoteEnum.A,a.NoteEnum.E,a.NoteEnum.B],l.flatPositionList=[a.NoteEnum.B,a.NoteEnum.E,a.NoteEnum.A,a.NoteEnum.D,a.NoteEnum.G,a.NoteEnum.C,a.NoteEnum.F],e.NoteEnumToHalfToneLink=function(){return function t(e,n){h(this,t),this.note=e,this.halfTone=n}}(),function(t){t[t.major=0]="major",t[t.minor=1]="minor",t[t.none=2]="none",t[t.dorian=3]="dorian",t[t.phrygian=4]="phrygian",t[t.lydian=5]="lydian",t[t.mixolydian=6]="mixolydian",t[t.aeolian=7]="aeolian",t[t.ionian=8]="ionian",t[t.locrian=9]="locrian"}(o=e.KeyEnum||(e.KeyEnum={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(8),r=n(70);e.Label=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.TextAlignmentEnum.CenterBottom,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.Fonts.TimesNewRoman;h(this,t),this.text=e,this.textAlignment=n,this.font=o}return d(t,[{key:"ToString",value:function(){return this.text}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r,o=n(0),s=n(35),a=n(2),u=n(54),l=n(2),c=n(14),f=function(){function t(e,n,i){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];h(this,t),this.notes=[],this.articulations=[],this.technicalInstructions=[],this.lyricsEntries=new c.default,this.wantedStemDirection=r.Undefined,this.stemDirectionXml=r.Undefined,this.stemDirection=r.Undefined,this.timestamp=e,this.parentVoice=n,this.parentSourceStaffEntry=i,this.isGrace=o,this.graceAfterMainNote=!1,this.graceNoteSlash=s,this.graceSlur=a}return d(t,[{key:"hasTie",value:function(){for(var t=0,e=this.Notes.length;t<e;++t)if(void 0!==this.Notes[t].NoteTie)return!0;return!1}},{key:"hasSlur",value:function(){for(var t=0,e=this.Notes.length;t<e;++t)if(this.Notes[t].NoteSlurs.length>0)return!0;return!1}},{key:"isStaccato",value:function(){for(var t=0,e=this.Articulations.length;t<e;++t)if(this.Articulations[t]===i.staccato)return!0;return!1}},{key:"isAccent",value:function(){for(var t=0,e=this.Articulations.length;t<e;++t){var n=this.Articulations[t];if(n===i.accent||n===i.strongaccent)return!0}return!1}},{key:"getVerseNumberForLyricEntry",value:function(t){var e=1;return this.lyricsEntries.forEach((function(n,i){t===i&&(e=n)})),e}},{key:"createVoiceEntriesForOrnament",value:function(t,e){void 0===t&&(t=this);var n=[];if(void 0!==t.ornamentContainer){var i=this.notes[0],r=i.Length,s=t.ParentVoice,a=t.Timestamp,c=o.Fraction.createFromFraction(a);switch(t.ornamentContainer.GetOrnament){case u.OrnamentEnum.Trill:var h=new o.Fraction(r.Numerator,8*r.Denominator),f=i.Pitch.getTransposedPitch(1),d=e.getAlterationForPitch(f);t.OrnamentContainer.AccidentalAbove!==l.AccidentalEnum.NONE&&(d=t.ornamentContainer.AccidentalAbove);for(var p=0;p<8;p++)c=o.Fraction.plus(a,new o.Fraction(p*h.Numerator,h.Denominator)),p%2==0?this.createBaseVoiceEntry(c,h,s,i,n):this.createAlteratedVoiceEntry(c,h,s,f,d,n);break;case u.OrnamentEnum.Turn:var m=new o.Fraction(r.Numerator,4*r.Denominator),b=i.Pitch.getTransposedPitch(-1),v=e.getAlterationForPitch(b),y=i.Pitch.getTransposedPitch(1),g=e.getAlterationForPitch(y);this.createAlteratedVoiceEntry(c,m,s,y,g,n),c.Add(m),this.createBaseVoiceEntry(c,m,s,i,n),c.Add(m),this.createAlteratedVoiceEntry(c,m,s,b,v,n),c.Add(m),this.createBaseVoiceEntry(c,m,s,i,n);break;case u.OrnamentEnum.InvertedTurn:var S=new o.Fraction(r.Numerator,4*r.Denominator),w=i.Pitch.getTransposedPitch(-1),_=e.getAlterationForPitch(w),x=i.Pitch.getTransposedPitch(1),k=e.getAlterationForPitch(x);this.createAlteratedVoiceEntry(c,S,s,w,_,n),c.Add(S),this.createBaseVoiceEntry(c,S,s,i,n),c.Add(S),this.createAlteratedVoiceEntry(c,S,s,x,k,n),c.Add(S),this.createBaseVoiceEntry(c,S,s,i,n);break;case u.OrnamentEnum.DelayedTurn:var E=new o.Fraction(r.Numerator,2*r.Denominator),P=i.Pitch.getTransposedPitch(-1),A=e.getAlterationForPitch(P),L=i.Pitch.getTransposedPitch(1),T=e.getAlterationForPitch(L);this.createBaseVoiceEntry(c,E,s,i,n),c=o.Fraction.plus(a,E),E.Denominator=8*r.Denominator,this.createAlteratedVoiceEntry(c,E,s,L,T,n),c.Add(E),this.createBaseVoiceEntry(c,E,s,i,n),c.Add(E),this.createAlteratedVoiceEntry(c,E,s,P,A,n),c.Add(E),this.createBaseVoiceEntry(c,E,s,i,n);break;case u.OrnamentEnum.DelayedInvertedTurn:var M=new o.Fraction(r.Numerator,2*r.Denominator),C=i.Pitch.getTransposedPitch(-1),N=e.getAlterationForPitch(C),I=i.Pitch.getTransposedPitch(1),R=e.getAlterationForPitch(I);this.createBaseVoiceEntry(c,M,s,i,n),c=o.Fraction.plus(a,M),M.Denominator=8*r.Denominator,this.createAlteratedVoiceEntry(c,M,s,C,N,n),c.Add(M),this.createBaseVoiceEntry(c,M,s,i,n),c.Add(M),this.createAlteratedVoiceEntry(c,M,s,I,R,n),c.Add(M),this.createBaseVoiceEntry(c,M,s,i,n);break;case u.OrnamentEnum.Mordent:var O=new o.Fraction(r.Numerator,4*r.Denominator),F=i.Pitch.getTransposedPitch(1),B=e.getAlterationForPitch(F);this.createBaseVoiceEntry(c,O,s,i,n),c.Add(O),this.createAlteratedVoiceEntry(c,O,s,F,B,n),O.Denominator=2*r.Denominator,c=o.Fraction.plus(a,O),this.createBaseVoiceEntry(c,O,s,i,n);break;case u.OrnamentEnum.InvertedMordent:var D=new o.Fraction(r.Numerator,4*r.Denominator),j=i.Pitch.getTransposedPitch(-1),V=e.getAlterationForPitch(j);this.createBaseVoiceEntry(c,D,s,i,n),c.Add(D),this.createAlteratedVoiceEntry(c,D,s,j,V,n),D.Denominator=2*r.Denominator,c=o.Fraction.plus(a,D),this.createBaseVoiceEntry(c,D,s,i,n);break;default:throw new RangeError}return n}}},{key:"createBaseVoiceEntry",value:function(e,n,i,r,o){var u=new t(e,i,r.ParentStaffEntry),l=new a.Pitch(r.Pitch.FundamentalNote,r.Pitch.Octave,r.Pitch.Accidental),c=new s.Note(u,void 0,n,l);u.Notes.push(c),o.push(u)}},{key:"createAlteratedVoiceEntry",value:function(e,n,i,r,o,u){var l=new t(e,i,void 0),c=new a.Pitch(r.FundamentalNote,r.Octave,o),h=new s.Note(l,void 0,n,c);l.Notes.push(h),u.push(l)}},{key:"ParentSourceStaffEntry",get:function(){return this.parentSourceStaffEntry}},{key:"ParentVoice",get:function(){return this.parentVoice}},{key:"Timestamp",get:function(){return this.timestamp},set:function(t){this.timestamp=t}},{key:"Notes",get:function(){return this.notes}},{key:"IsGrace",get:function(){return this.isGrace},set:function(t){this.isGrace=t}},{key:"GraceAfterMainNote",get:function(){return this.graceAfterMainNote},set:function(t){this.graceAfterMainNote=t}},{key:"GraceNoteSlash",get:function(){return this.graceNoteSlash},set:function(t){this.graceNoteSlash=t}},{key:"GraceSlur",get:function(){return this.graceSlur},set:function(t){this.graceSlur=t}},{key:"Articulations",get:function(){return this.articulations}},{key:"TechnicalInstructions",get:function(){return this.technicalInstructions}},{key:"LyricsEntries",get:function(){return this.lyricsEntries}},{key:"Arpeggio",get:function(){return this.arpeggio},set:function(t){this.arpeggio=t}},{key:"OrnamentContainer",get:function(){return this.ornamentContainer},set:function(t){this.ornamentContainer=t}},{key:"WantedStemDirection",set:function(t){this.wantedStemDirection=t},get:function(){return this.wantedStemDirection}},{key:"StemDirectionXml",set:function(t){this.stemDirectionXml=t},get:function(){return this.stemDirectionXml}},{key:"StemDirection",set:function(t){this.stemDirection=t},get:function(){return this.stemDirection}},{key:"StemColorXml",get:function(){return this.stemColorXml},set:function(t){this.stemColorXml=t}},{key:"StemColor",get:function(){return this.stemColor},set:function(t){this.stemColor=t}}],[{key:"isSupportedArticulation",value:function(t){switch(t){case i.accent:case i.strongaccent:case i.invertedstrongaccent:case i.staccato:case i.staccatissimo:case i.spiccato:case i.tenuto:case i.fermata:case i.invertedfermata:case i.breathmark:case i.caesura:case i.lefthandpizzicato:case i.naturalharmonic:case i.snappizzicato:case i.upbow:case i.downbow:return!0;default:return!1}}}]),t}();e.VoiceEntry=f,function(t){t[t.accent=0]="accent",t[t.strongaccent=1]="strongaccent",t[t.invertedstrongaccent=2]="invertedstrongaccent",t[t.staccato=3]="staccato",t[t.staccatissimo=4]="staccatissimo",t[t.spiccato=5]="spiccato",t[t.tenuto=6]="tenuto",t[t.fermata=7]="fermata",t[t.invertedfermata=8]="invertedfermata",t[t.breathmark=9]="breathmark",t[t.caesura=10]="caesura",t[t.lefthandpizzicato=11]="lefthandpizzicato",t[t.naturalharmonic=12]="naturalharmonic",t[t.snappizzicato=13]="snappizzicato",t[t.upbow=14]="upbow",t[t.downbow=15]="downbow",t[t.scoop=16]="scoop",t[t.plop=17]="plop",t[t.doit=18]="doit",t[t.falloff=19]="falloff",t[t.stress=20]="stress",t[t.unstress=21]="unstress",t[t.detachedlegato=22]="detachedlegato",t[t.otherarticulation=23]="otherarticulation"}(i=e.ArticulationEnum||(e.ArticulationEnum={})),function(t){t[t.Undefined=-1]="Undefined",t[t.Up=0]="Up",t[t.Down=1]="Down",t[t.None=2]="None",t[t.Double=3]="Double"}(r=e.StemDirectionType||(e.StemDirectionType={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){n(i,t);var e=r(i);function i(t,n){var r;return h(this,i),(r=e.call(this,void 0)).rhythm=t,r.numerator=t.Numerator,r.denominator=t.Denominator,r.symbolEnum=n,r}return d(i,[{key:"clone",value:function(){return new i(this.rhythm.clone(),this.symbolEnum)}},{key:"OperatorEquals",value:function(t){return this===t||void 0!==this&&void 0!==t&&this.numerator===t.numerator&&this.denominator===t.denominator}},{key:"OperatorNotEqual",value:function(t){return!(this===t)}},{key:"ToString",value:function(){return"Rhythm: "+this.rhythm.toString()}},{key:"Rhythm",get:function(){return this.rhythm},set:function(t){this.rhythm=t}},{key:"SymbolEnum",get:function(){return this.symbolEnum},set:function(t){this.symbolEnum=t}}]),i}(i(53).AbstractNotationInstruction);e.RhythmInstruction=o,function(t){t[t.NONE=0]="NONE",t[t.COMMON=1]="COMMON",t[t.CUT=2]="CUT"}(e.RhythmSymbolEnum||(e.RhythmSymbolEnum={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),r=n(9),o=n(2),s=n(18),a=n(15),l=n(2),c=n(2),f=n(37),p=n(46),m=n(70),b=n(24),v=n(1),y=n(17),g=n(44),S=n(54),w=n(76),_=n(20),x=n(59),k=function(){function t(){h(this,t)}return d(t,null,[{key:"duration",value:function(t,e){var n=t.RealValue;return n>=1?"w":n<1&&n>=.5?e&&n>.5?"w":"h":n<.5&&n>=.25?e&&n>.25?"h":"q":n<.25&&n>=.125?e&&n>.125?"q":"8":n<.125&&n>=.0625?e&&n>.0625?"8":"16":n<.0625&&n>=.03125?e&&n>.03125?"16":"32":n<.03125&&n>=.015625?e&&n>.015625?"32":"64":e?"64":"128"}},{key:"pitch",value:function(t,e){var n=c.NoteEnum[e.FundamentalNote].toLowerCase(),i=o.Pitch.accidentalVexflow(e.Accidental),r=e.Octave-t.Clef().OctaveOffset+3,s=t.sourceNote.Notehead,a="";return void 0!==s&&(a=this.NoteHeadCode(s)),[n+"n/"+r+a,i,t.Clef()]}},{key:"NoteHeadCode",value:function(t){var e=t.Filled?"2":"1";switch(t.Shape){case w.NoteHeadShape.NORMAL:return"";case w.NoteHeadShape.DIAMOND:return"/D"+e;case w.NoteHeadShape.TRIANGLE:return"/T"+e;case w.NoteHeadShape.X:return"/X"+e;case w.NoteHeadShape.CIRCLEX:return"/X3";case w.NoteHeadShape.RECTANGLE:return"/R"+e;case w.NoteHeadShape.SQUARE:return"/S"+e;case w.NoteHeadShape.SLASH:default:return""}}},{key:"GhostNote",value:function(e){return new i.Flow.GhostNote({duration:t.duration(e,!1)})}},{key:"StaveNote",value:function(e){var n=e.notes.reverse(),r=e.parentStaffEntry.parentMeasure.parentSourceMeasure.Rules,o=n[0],s=[],a=[],l=o.graphicalNoteLength,c=void 0!==o.sourceNote.NoteTuplet,h=t.duration(l,c);void 0!==o.sourceNote.TypeLength&&o.sourceNote.TypeLength!==l&&(h=t.duration(o.sourceNote.TypeLength,c));var f,d,p=void 0,m=o.numberOfDots,b=!1,v=0,g=!1,S=!1,x=u(n);try{for(x.s();!(d=x.n()).done;){var k=d.value;if(m<k.numberOfDots&&(m=k.numberOfDots),k.sourceNote.isRest()){S=!0,s=["b/4"],k.parentVoiceEntry.parentStaffEntry.parentMeasure.parentSourceMeasure.Duration.RealValue<=l.RealValue&&(s=["d/5"],h="w",m=0,b=!0,v=r.WholeRestXShiftVexflow*_.unitInPixels);break}k.sourceNote.Notehead&&k.sourceNote.Notehead.Shape===w.NoteHeadShape.SLASH&&(g=!0);var E=k.vfpitch;s.push(E[0]),a.push(E[1]),p||(p=t.Clef(E[2]).type)}}catch(V){x.e(V)}finally{x.f()}for(var P=0,A=m;P<A;++P)h+="d";g&&(h+="s"),S&&(h+="r");var L={align_center:b,auto_stem:!0,clef:p,duration:h,keys:s,slash:e.parentVoiceEntry.GraceNoteSlash},T=e.notes[0].sourceNote;if(T.IsCueNote&&(L.glyph_font_scale=i.Flow.DEFAULT_NOTATION_FONT_SCALE*i.Flow.GraceNote.SCALE,L.stroke_px=i.Flow.GraceNote.LEDGER_LINE_OFFSET),f=e.parentVoiceEntry.IsGrace||e.notes[0].sourceNote.IsCueNote?new i.Flow.GraceNote(L):new i.Flow.StaveNote(L),r.ColoringEnabled){var M=r.DefaultColorStem,C=e.parentVoiceEntry.StemColor;!C&&M&&(C=M);var N={fillStyle:C,strokeStyle:C};C&&(e.parentVoiceEntry.StemColor=C,f.setStemStyle(N),f.flag&&r.ColorFlags&&f.setFlagStyle(N))}if(f.x_shift=v,e.parentVoiceEntry.IsGrace&&e.notes[0].sourceNote.NoteBeam&&(e.parentVoiceEntry.WantedStemDirection=e.notes[0].sourceNote.NoteBeam.Notes[0].ParentVoiceEntry.WantedStemDirection),void 0!==e.parentVoiceEntry)switch(e.parentVoiceEntry.WantedStemDirection){case y.StemDirectionType.Up:f.setStemDirection(i.Flow.Stem.UP);break;case y.StemDirectionType.Down:f.setStemDirection(i.Flow.Stem.DOWN)}for(var I=0,R=n.length;I<R;I+=1){if(n[I].setIndex(f,I),a[I]){if("++"===a[I]){f.addAccidental(I,new i.Flow.Accidental("##")),f.addAccidental(I,new i.Flow.Accidental("#"));continue}if("bbs"===a[I]){f.addAccidental(I,new i.Flow.Accidental("bb")),f.addAccidental(I,new i.Flow.Accidental("b"));continue}f.addAccidental(I,new i.Flow.Accidental(a[I]))}var O=n[I].sourceNote.TremoloStrokes;O>0&&f.addModifier(I,new i.Flow.Tremolo(O))}if(.25===T.Length.RealValue&&T.Notehead&&!1===T.Notehead.Filled)for(var F=f.getKeyProps(),B=0;B<F.length;B++)F[B].code="v81";for(var D=0,j=m;D<j;++D)f.addDotToAll();return f}},{key:"generateArticulations",value:function(t,e){if(void 0!==t&&"GhostNote"!==t.getAttribute("type")){var n=3;t.getStemDirection()===i.Flow.Stem.UP&&(n=4);var r,o=u(e);try{for(o.s();!(r=o.n()).done;){var s=r.value,a=void 0;switch(s){case y.ArticulationEnum.accent:a=new i.Flow.Articulation("a>");break;case y.ArticulationEnum.downbow:a=new i.Flow.Articulation("am");break;case y.ArticulationEnum.fermata:a=new i.Flow.Articulation("a@a"),n=3;break;case y.ArticulationEnum.invertedfermata:a=new i.Flow.Articulation("a@u"),n=4;break;case y.ArticulationEnum.lefthandpizzicato:a=new i.Flow.Articulation("a+");break;case y.ArticulationEnum.snappizzicato:a=new i.Flow.Articulation("ao");break;case y.ArticulationEnum.staccatissimo:a=new i.Flow.Articulation("av");break;case y.ArticulationEnum.staccato:a=new i.Flow.Articulation("a.");break;case y.ArticulationEnum.tenuto:a=new i.Flow.Articulation("a-");break;case y.ArticulationEnum.upbow:a=new i.Flow.Articulation("a|");break;case y.ArticulationEnum.strongaccent:a=new i.Flow.Articulation("a^")}void 0!==a&&(a.setPosition(n),t.addModifier(0,a))}}catch(l){o.e(l)}finally{o.f()}}}},{key:"generateOrnaments",value:function(t,e){var n=3;t.getStemDirection()===i.Flow.Stem.UP&&(n=4);var r=void 0;switch(e.GetOrnament){case S.OrnamentEnum.DelayedInvertedTurn:(r=new i.Flow.Ornament("turn_inverted")).setDelayed(!0);break;case S.OrnamentEnum.DelayedTurn:(r=new i.Flow.Ornament("turn")).setDelayed(!0);break;case S.OrnamentEnum.InvertedMordent:(r=new i.Flow.Ornament("mordent_inverted")).setDelayed(!1);break;case S.OrnamentEnum.InvertedTurn:(r=new i.Flow.Ornament("turn_inverted")).setDelayed(!1);break;case S.OrnamentEnum.Mordent:(r=new i.Flow.Ornament("mordent")).setDelayed(!1);break;case S.OrnamentEnum.Trill:(r=new i.Flow.Ornament("tr")).setDelayed(!1);break;case S.OrnamentEnum.Turn:(r=new i.Flow.Ornament("turn")).setDelayed(!1);break;default:return void v.warn("unhandled OrnamentEnum type: "+e.GetOrnament)}void 0!==r&&(e.AccidentalBelow!==l.AccidentalEnum.NONE&&r.setLowerAccidental(o.Pitch.accidentalVexflow(e.AccidentalBelow)),e.AccidentalAbove!==l.AccidentalEnum.NONE&&r.setUpperAccidental(o.Pitch.accidentalVexflow(e.AccidentalAbove)),r.setPosition(n),t.addModifier(0,r))}},{key:"StrokeTypeFromArpeggioType",value:function(t){switch(t){case x.ArpeggioType.ARPEGGIO_DIRECTIONLESS:return 7;case x.ArpeggioType.BRUSH_DOWN:return 2;case x.ArpeggioType.BRUSH_UP:return 1;case x.ArpeggioType.RASQUEDO_DOWN:return 6;case x.ArpeggioType.RASQUEDO_UP:return 5;case x.ArpeggioType.ROLL_DOWN:return 4;case x.ArpeggioType.ROLL_UP:return 3;default:return 7}}},{key:"CreateTabNote",value:function(e){var n,r=[],o=t.duration(e.notes[0].graphicalNoteLength,void 0!==e.notes[0].sourceNote.NoteTuplet),s=0,a=u(e.notes);try{for(a.s();!(n=a.n()).done;){var l=n.value,c=l.sourceNote;r.push({str:c.StringNumber,fret:c.FretNumber}),s<l.numberOfDots&&(s=l.numberOfDots)}}catch(d){a.e(d)}finally{a.f()}for(var h=0,f=s;h<f;++h)o+="d";return new i.Flow.TabNote({duration:o,positions:r})}},{key:"Clef",value:function(t){var e,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";switch("default"!==i&&"small"!==i&&(v.warn('Invalid VexFlow clef size "'.concat(i,'" specified. Using "default".')),i="default"),t.ClefType){case r.ClefEnum.G:switch(t.Line){case 1:e="french";break;case 2:e="treble";break;default:e="treble",v.error("Clef ".concat(r.ClefEnum[t.ClefType]," on line ").concat(t.Line,' not supported by VexFlow. Using default value "').concat(e,'".'))}break;case r.ClefEnum.F:switch(t.Line){case 4:e="bass";break;case 3:e="baritone-f";break;case 5:e="subbass";break;default:e="bass",v.error("Clef ".concat(r.ClefEnum[t.ClefType]," on line ").concat(t.Line,' not supported by VexFlow. Using default value "').concat(e,'".'))}break;case r.ClefEnum.C:switch(t.Line){case 3:e="alto";break;case 4:e="tenor";break;case 1:e="soprano";break;case 2:e="mezzo-soprano";break;default:e="alto",v.error("Clef ".concat(r.ClefEnum[t.ClefType]," on line ").concat(t.Line,' not supported by VexFlow. Using default value "').concat(e,'".'))}break;case r.ClefEnum.percussion:e="percussion";break;case r.ClefEnum.TAB:e="treble"}return 1===t.OctaveOffset&&"bass"!==e?n="8va":-1===t.OctaveOffset&&(n="8vb"),{type:e,size:i,annotation:n}}},{key:"TimeSignature",value:function(t){var e;switch(t.SymbolEnum){case s.RhythmSymbolEnum.NONE:e=t.Rhythm.Numerator+"/"+t.Rhythm.Denominator;break;case s.RhythmSymbolEnum.COMMON:e="C";break;case s.RhythmSymbolEnum.CUT:e="C|"}return new i.Flow.TimeSignature(e)}},{key:"keySignature",value:function(e){if(void 0!==e){var n;switch(e.Mode){case a.KeyEnum.minor:n=t.minorMap[e.Key]+"m";break;case a.KeyEnum.major:case a.KeyEnum.none:n=t.majorMap[e.Key];break;default:n="C"}return n}}},{key:"line",value:function(t,e){switch(t){case f.SystemLinesEnum.SingleThin:return e===g.SystemLinePosition.MeasureBegin?1:0;case f.SystemLinesEnum.DoubleThin:return 2;case f.SystemLinesEnum.ThinBold:return 6;case f.SystemLinesEnum.BoldThinDots:return 5;case f.SystemLinesEnum.DotsThinBold:case f.SystemLinesEnum.DotsBoldBoldDots:return 6;case f.SystemLinesEnum.None:return 8}}},{key:"font",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.FontStyles.Regular,n=(arguments.length>2&&void 0!==arguments[2]||m.Fonts.TimesNewRoman,arguments.length>3?arguments[3]:void 0),i="normal",r="normal",o="'"+n.DefaultFontFamily+"'";switch(e){case p.FontStyles.Bold:r="bold";break;case p.FontStyles.Italic:i="italic";break;case p.FontStyles.BoldItalic:i="italic",r="bold"}return i+" "+r+" "+Math.floor(t)+"px "+o}},{key:"fontStyle",value:function(t){switch(t){case p.FontStyles.Bold:return"bold";case p.FontStyles.Italic:return"italic";case p.FontStyles.BoldItalic:return"italic bold";default:return"normal"}}},{key:"style",value:function(t){return b.OUTLINE_AND_FILL_STYLE_DICT.getValue(t)}}]),t}();e.VexFlowConverter=k,k.majorMap={"-1":"F","-2":"Bb","-3":"Eb","-4":"Ab","-5":"Db","-6":"Gb","-7":"Cb","-8":"Fb",0:"C",1:"G",2:"D",3:"A",4:"E",5:"B",6:"F#",7:"C#",8:"G#"},k.minorMap={"-1":"D","-2":"G","-3":"C","-4":"F","-5":"Bb","-6":"Eb","-7":"Ab","-8":"Db",0:"A",1:"E",2:"B",3:"F#",4:"C#",5:"G#",6:"D#",7:"A#",8:"E#"}},function(t,i,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),o(10);var s=o(120),l=o(65),c=o(5),f=o(78),p=o(24),m=o(7),b=o(71),v=o(79),y=o(1),g=o(58),S=o(34);i.unitInPixels=10,i.VexFlowMusicSheetDrawer=function(t){n(s,t);var o=r(s);function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new S.DrawingParameters;return h(this,s),(t=o.call(this,new f.VexFlowTextMeasurer(e.Rules),e)).backends=[],t.zoom=1,t.pageIdx=0,t}return d(s,[{key:"drawSheet",value:function(t){this.pageIdx=0;var n,i=u(t.MusicPages);try{for(i.s();!(n=i.n()).done;){var r=n.value,o=this.backends[this.pageIdx];o.graphicalMusicPage=r,o.scale(this.zoom),this.pageIdx+=1}}catch(l){i.e(l)}finally{i.f()}this.pageIdx=0,this.backend=this.backends[0],e(a(s.prototype),"drawSheet",this).call(this,t)}},{key:"drawPage",value:function(t){this.backend=this.backends[t.PageNumber-1],e(a(s.prototype),"drawPage",this).call(this,t),this.pageIdx+=1,this.backend=this.backends[this.pageIdx]}},{key:"clear",value:function(){var t,e=u(this.backends);try{for(e.s();!(t=e.n()).done;){t.value.clear()}}catch(n){e.e(n)}finally{e.f()}}},{key:"setZoom",value:function(t){this.zoom=t}},{key:"calculatePixelDistance",value:function(t){return t*i.unitInPixels}},{key:"drawStaffLine",value:function(t){e(a(s.prototype),"drawStaffLine",this).call(this,t),this.rules.RenderSlurs&&this.drawSlurs(t,t.PositionAndShape.AbsolutePosition)}},{key:"drawSlurs",value:function(t,e){var n,i=u(t.GraphicalSlurs);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.slur.isCrossed()||this.drawSlur(r,e)}}catch(o){i.e(o)}finally{i.f()}}},{key:"drawSlur",value:function(t,e){var n=[],i=new c.PointF2D(t.bezierStartPt.x+e.x,t.bezierStartPt.y+e.y),r=new c.PointF2D(t.bezierStartControlPt.x+e.x,t.bezierStartControlPt.y+e.y),o=new c.PointF2D(t.bezierEndControlPt.x+e.x,t.bezierEndControlPt.y+e.y),s=new c.PointF2D(t.bezierEndPt.x+e.x,t.bezierEndPt.y+e.y);n.push(this.applyScreenTransformation(i)),n.push(this.applyScreenTransformation(r)),n.push(this.applyScreenTransformation(o)),n.push(this.applyScreenTransformation(s)),t.placement===m.PlacementEnum.Above?(i.y-=.05,r.y-=.3,o.y-=.3,s.y-=.05):(i.y+=.05,r.y+=.3,o.y+=.3,s.y+=.05),n.push(this.applyScreenTransformation(i)),n.push(this.applyScreenTransformation(r)),n.push(this.applyScreenTransformation(o)),n.push(this.applyScreenTransformation(s)),this.backend.renderCurve(n)}},{key:"drawMeasure",value:function(t){t.setAbsoluteCoordinates(t.PositionAndShape.AbsolutePosition.x*i.unitInPixels,t.PositionAndShape.AbsolutePosition.y*i.unitInPixels),t.draw(this.backend.getContext());var e,n=u(t.staffEntries);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.drawStaffEntry(r)}}catch(o){n.e(o)}finally{n.f()}}},{key:"drawLine",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#FF0000FF",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.2;t=this.applyScreenTransformation(t),e=this.applyScreenTransformation(e),this.backend.renderLine(t,e,n,r*i.unitInPixels)}},{key:"DrawOverlayLine",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#FF0000FF",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2;if(!n.PageNumber||n.PageNumber>this.backends.length||n.PageNumber<1)console.log("VexFlowMusicSheetDrawer.drawOverlayLine: invalid page number / music page number doesn't correspond to an existing backend.");else{var s=this.backends[n.PageNumber-1];t=this.applyScreenTransformation(t),e=this.applyScreenTransformation(e),s.renderLine(t,e,r,o*i.unitInPixels)}}},{key:"drawSkyLine",value:function(t){this.drawSampledLine(t.SkyLine,t.PositionAndShape.AbsolutePosition,t.PositionAndShape.Size.width)}},{key:"drawBottomLine",value:function(t){var e=new c.PointF2D(t.PositionAndShape.AbsolutePosition.x,t.PositionAndShape.AbsolutePosition.y);this.drawSampledLine(t.BottomLine,e,t.PositionAndShape.Size.width,"#0000FFFF")}},{key:"drawSampledLine",value:function(t,e,n){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#FF0000FF",r=[],o=0,s=0;s<t.length;s++)t[s]!==o&&(r.push(s),o=t[s]);var a=e;if(r.length>0){var u,l,h=this.rules.SamplingUnit,f=new c.PointF2D(a.x,a.y),d=new c.PointF2D(r[0]/h+a.x,a.y);this.drawLine(f,d,i),t[0]>=0&&(u=new c.PointF2D(r[0]/h+a.x,a.y),l=new c.PointF2D(r[0]/h+a.x,a.y+t[r[0]]),this.drawLine(u,l,i));for(var p=1;p<r.length;p++)f=new c.PointF2D(r[p-1]/h+a.x,a.y+t[r[p-1]]),d=new c.PointF2D(r[p]/h+a.x,a.y+t[r[p-1]]),this.drawLine(f,d,i),u=new c.PointF2D(r[p]/h+a.x,a.y+t[r[p-1]]),l=new c.PointF2D(r[p]/h+a.x,a.y+t[r[p]]),this.drawLine(u,l,i);r[r.length-1]<t.length?(f=new c.PointF2D(r[r.length-1]/h+a.x,a.y+t[r[r.length-1]]),d=new c.PointF2D(a.x+n,a.y+t[r[r.length-1]]),this.drawLine(f,d,i)):(f=new c.PointF2D(r[r.length-1]/h+a.x,a.y),d=new c.PointF2D(a.x+n,a.y),this.drawLine(f,d,i))}else{var m=new c.PointF2D(a.x,a.y),b=new c.PointF2D(a.x+n,a.y);this.drawLine(m,b,i)}}},{key:"drawStaffEntry",value:function(t){if(void 0!==t.graphicalChordContainers&&t.graphicalChordContainers.length>0){var e,n=u(t.graphicalChordContainers);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.drawLabel(i.GetGraphicalLabel,p.GraphicalLayers.Notes)}}catch(r){n.e(r)}finally{n.f()}}this.rules.RenderLyrics&&t.LyricsEntries.length>0&&this.drawLyrics(t.LyricsEntries,p.GraphicalLayers.Notes)}},{key:"drawLyrics",value:function(t,e){var n=this;t.forEach((function(t){return n.drawLabel(t.GraphicalLabel,e)}))}},{key:"drawInstrumentBrace",value:function(t,e){t.draw(this.backend.getContext())}},{key:"drawGroupBracket",value:function(t,e){t.draw(this.backend.getContext())}},{key:"drawOctaveShifts",value:function(t){var e,n=u(t.OctaveShifts);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i){var r=this.backend.getContext(),o=i.getTextBracket();o.setContext(r);var s=t.PositionAndShape.AbsolutePosition.x+o.start.getX()/10,a=t.PositionAndShape.AbsolutePosition.x+o.stop.getX()/10;if(1===o.position){var l=t.SkyBottomLineCalculator.getSkyLineMinInRange(s,a);if(l===1/0)return;o.start.getStave().options.space_above_staff_ln=l}else{var c=t.SkyBottomLineCalculator.getBottomLineMaxInRange(s,a);if(c===1/0)return;o.start.getStave().options.space_below_staff_ln=c}o.draw()}}}catch(h){n.e(h)}finally{n.f()}}},{key:"drawExpressions",value:function(t){var e,n=u(t.AbstractExpressions);try{for(n.s();!(e=n.n()).done;){var i=e.value;i instanceof v.GraphicalInstantaneousDynamicExpression?this.drawInstantaneousDynamic(i):i instanceof b.GraphicalInstantaneousTempoExpression?this.drawLabel(i.GraphicalLabel,p.GraphicalLayers.Notes):i instanceof g.GraphicalContinuousDynamicExpression?this.drawContinuousDynamic(i):y.warn("Unkown type of expression!")}}catch(r){n.e(r)}finally{n.f()}}},{key:"drawInstantaneousDynamic",value:function(t){this.drawLabel(t.Label,p.GraphicalLayers.Notes)}},{key:"drawContinuousDynamic",value:function(t){if(t.IsVerbal)this.drawLabel(t.Label,p.GraphicalLayers.Notes);else{var e,n=u(t.Lines);try{for(n.s();!(e=n.n()).done;){var i=e.value,r=new c.PointF2D(t.ParentStaffLine.PositionAndShape.AbsolutePosition.x+i.Start.x,t.ParentStaffLine.PositionAndShape.AbsolutePosition.y+i.Start.y),o=new c.PointF2D(t.ParentStaffLine.PositionAndShape.AbsolutePosition.x+i.End.x,t.ParentStaffLine.PositionAndShape.AbsolutePosition.y+i.End.y);this.drawLine(r,o,"black",i.Width)}}catch(s){n.e(s)}finally{n.f()}}}},{key:"renderLabel",value:function(t,e,n,r,o,s){var a,u=t.Label.fontHeight*i.unitInPixels,l=t.Label,c=l.fontStyle,h=l.font,f=l.text;this.rules.ColoringEnabled&&((a=t.Label.colorDefault)||(a=this.rules.DefaultColorLabel)),this.backend.renderText(u,c,h,f,o,s,a)}},{key:"renderRectangle",value:function(t,e,n,i){this.backend.renderRectangle(t,n,i)}},{key:"applyScreenTransformation",value:function(t){return new c.PointF2D(t.x*i.unitInPixels,t.y*i.unitInPixels)}},{key:"applyScreenTransformationForRect",value:function(t){return new l.RectangleF2D(t.x*i.unitInPixels,t.y*i.unitInPixels,t.width*i.unitInPixels,t.height*i.unitInPixels)}},{key:"Backends",get:function(){return this.backends}}]),s}(s.MusicSheetDrawer)},function(t,e,n){"use strict";(function(t){var i=n(223),r=n(224),o=n(166);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return l(this,t,e,n)}function l(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i),u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e),t}(t,e,n,i):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|p(e,n),r=(t=a(t,i)).write(e,n);return r!==i&&(t=t.slice(0,r)),t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|d(e.length);return 0===(t=a(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?a(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(c(e),t=a(t,e<0?0:0|d(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|d(e.length);t=a(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function d(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(t).length;default:if(i)return V(t).length;e=(""+e).toLowerCase(),i=!0}}function m(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return T(this,e,n);case"utf8":case"utf-8":return P(this,e,n);case"ascii":return A(this,e,n);case"latin1":case"binary":return L(this,e,n);case"base64":return E(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function b(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function v(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=u.from(e,i)),u.isBuffer(e))return 0===e.length?-1:y(t,e,n,i,r);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,i,r){var o,s=1,a=t.length,u=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var c=-1;for(o=n;o<a;o++)if(l(t,o)===l(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var h=!0,f=0;f<u;f++)if(l(t,o+f)!==l(e,f)){h=!1;break}if(h)return o}return-1}function g(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function S(t,e,n,i){return U(V(e,t.length-n),t,n,i)}function w(t,e,n,i){return U(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function _(t,e,n,i){return w(t,e,n,i)}function x(t,e,n,i){return U(G(e),t,n,i)}function k(t,e,n,i){return U(function(t,e){for(var n,i,r=[],o=0;o<t.length&&!((e-=2)<0);++o)i=(n=t.charCodeAt(o))>>8,r.push(n%256),r.push(i);return r}(e,t.length-n),t,n,i)}function E(t,e,n){return i.fromByteArray(0===e&&n===t.length?t:t.slice(e,n))}function P(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o,s,a,u,l=t[r],c=null,h=l>239?4:l>223?3:l>191?2:1;if(r+h<=n)switch(h){case 1:l<128&&(c=l);break;case 2:128==(192&(o=t[r+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:s=t[r+2],128==(192&(o=t[r+1]))&&128==(192&s)&&(u=(15&l)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:s=t[r+2],a=t[r+3],128==(192&(o=t[r+1]))&&128==(192&s)&&128==(192&a)&&(u=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(i.push((c-=65536)>>>10&1023|55296),c=56320|1023&c),i.push(c),r+=h}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);for(var n="",i=0;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=4096));return n}(i)}function A(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function L(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function T(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=e;o<n;++o)r+=j(t[o]);return r}function M(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function C(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,n,i,r,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function I(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);r<o;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function R(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);r<o;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function O(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(t,e,n,i,o){return o||O(t,0,n,4),r.write(t,e,n,i,23,4),n+4}function B(t,e,n,i,o){return o||O(t,0,n,8),r.write(t,e,n,i,52,8),n+8}e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return l(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,i){return c(e),e<=0?a(t,e):void 0!==n?"string"==typeof i?a(t,e).fill(n,i):a(t,e).fill(n):a(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return h(null,t)},u.allocUnsafeSlow=function(t){return h(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=u.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var s=t[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,r),r+=s.length}return i},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)b(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)b(this,e,e+3),b(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)b(this,e,e+7),b(this,e+1,e+6),b(this,e+2,e+5),b(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?P(this,0,t):m.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,i,r){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(r>>>=0)-(i>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),l=this.slice(i,r),c=t.slice(e,n),h=0;h<a;++h)if(l[h]!==c[h]){o=l[h],s=c[h];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},u.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return g(this,t,e,n);case"utf8":case"utf-8":return S(this,t,e,n);case"ascii":return w(this,t,e,n);case"latin1":case"binary":return _(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},u.prototype.slice=function(t,e){var n,i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var r=e-t;n=new u(r,void 0);for(var o=0;o<r;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},u.prototype.readUInt8=function(t,e){return e||C(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||C(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||C(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||C(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||C(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||C(t,4,this.length),r.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||C(t,4,this.length),r.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||C(t,8,this.length),r.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||C(t,8,this.length),r.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,i){t=+t,e|=0,n|=0,i||N(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);)this[e+o]=t/r&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,i){t=+t,e|=0,n|=0,i||N(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):R(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);N(this,t,e,n,r-1,-r)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);N(this,t,e,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):R(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return F(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return F(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return B(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return B(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,o=i-n;if(this===t&&n<e&&e<i)for(r=o-1;r>=0;--r)t[r+e]=this[r+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!u.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=u.isBuffer(t)?t:V(new u(t,i).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function j(t){return t<16?"0"+t.toString(16):t.toString(16)}function V(t,e){var n;e=e||1/0;for(var i=t.length,r=null,o=[],s=0;s<i;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function G(t){return i.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(D,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function U(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}}).call(this,n(28))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(68),r=n(0),o=n(35),s=n(9),a=n(36),l=n(17),c=n(110),f=n(5),p=n(30),m=n(25),b=n(8),v=n(15),y=n(45),g=n(4),S=n(112),w=n(113),_=n(9),x=n(1),k=n(14),E=n(23),P=n(16),A=n(56),L=n(7),T=n(71),M=n(72),C=(n(73),n(38)),N=n(58),I=n(51),R=function(){function t(){h(this,t),this.staffEntriesWithGraphicalTies=[],this.staffEntriesWithOrnaments=[],this.staffEntriesWithChordSymbols=[],this.staffLinesWithLyricWords=[],this.graphicalLyricWords=[]}return d(t,[{key:"initialize",value:function(t){this.graphicalMusicSheet=t,this.rules=t.ParentMusicSheet.Rules,this.prepareGraphicalMusicSheet()}},{key:"prepareGraphicalMusicSheet",value:function(){var t=this.graphicalMusicSheet.ParentMusicSheet;this.staffEntriesWithGraphicalTies=[],this.staffEntriesWithOrnaments=[],this.staffEntriesWithChordSymbols=[],this.staffLinesWithLyricWords=[],this.graphicalMusicSheet.Initialize();for(var e=this.graphicalMusicSheet.MeasureList,n=this.createAccidentalCalculators(),i=this.graphicalMusicSheet.initializeActiveClefs(),r=[],o=t.getCompleteNumberOfStaves(),s=[],a=0;a<o;a++)s.push(void 0);for(var u=0,l=t.SourceMeasures.length;u<l;++u){var c=this.createGraphicalMeasuresForSourceMeasure(t.SourceMeasures[u],n,r,s,i);e.push(c)}this.handleStaffEntries(),this.calculateVerticalContainersList(),this.setIndicesToVerticalGraphicalContainers()}},{key:"calculate",value:function(){this.musicSystems=[],this.clearSystemsAndMeasures(),this.clearRecreatedObjects(),this.createGraphicalTies(),this.calculateSheetLabelBoundingBoxes(),this.calculateXLayout(this.graphicalMusicSheet,this.maxInstrNameLabelLength()),this.graphicalMusicSheet.MusicPages.length=0,this.calculateMusicSystems(),i.GraphicalMusicSheet.transformRelativeToAbsolutePosition(this.graphicalMusicSheet)}},{key:"calculateXLayout",value:function(e,n){var i=0,r=this.rules.MaxInstructionsConstValue;if(this.graphicalMusicSheet.MeasureList.length>0){var o=this.graphicalMusicSheet.MeasureList[0],s=this.calculateMeasureXLayout(o);s=this.calculateMeasureWidthFromLyrics(o,s),t.setMeasuresMinStaffEntriesWidth(o,s),i=1.2*s+n+r;for(var a=1;a<this.graphicalMusicSheet.MeasureList.length;a++)o=this.graphicalMusicSheet.MeasureList[a],s=this.calculateMeasureXLayout(o),s=this.calculateMeasureWidthFromLyrics(o,s),t.setMeasuresMinStaffEntriesWidth(o,s),i=Math.max(i,1.2*s+r)}this.graphicalMusicSheet.MinAllowedSystemWidth=i}},{key:"calculateMeasureWidthFromLyrics",value:function(t,e){throw new Error("abstract, not implemented")}},{key:"formatMeasures",value:function(){throw new Error("abstract, not implemented")}},{key:"calculateMeasureXLayout",value:function(t){throw new Error("abstract, not implemented")}},{key:"initGraphicalMeasuresCreation",value:function(){throw new Error("abstract, not implemented")}},{key:"handleBeam",value:function(t,e,n){throw new Error("abstract, not implemented")}},{key:"handleTiedGraphicalNote",value:function(t,e,n,i,r,o,s,a){throw new Error("abstract, not implemented")}},{key:"handleVoiceEntryLyrics",value:function(t,e,n){throw new Error("abstract, not implemented")}},{key:"handleVoiceEntryOrnaments",value:function(t,e,n){throw new Error("abstract, not implemented")}},{key:"handleVoiceEntryArticulations",value:function(t,e,n){throw new Error("abstract, not implemented")}},{key:"handleVoiceEntryTechnicalInstructions",value:function(t,e,n){throw new Error("abstract, not implemented")}},{key:"handleTuplet",value:function(t,e,n){throw new Error("abstract, not implemented")}},{key:"layoutVoiceEntry",value:function(t,e,n,i){throw new Error("abstract, not implemented")}},{key:"layoutStaffEntry",value:function(t){throw new Error("abstract, not implemented")}},{key:"createGraphicalTie",value:function(t,e,n,i,r){throw new Error("abstract, not implemented")}},{key:"updateStaffLineBorders",value:function(t){throw new Error("abstract, not implemented")}},{key:"calculateMeasureNumberPlacement",value:function(t){var e,n=t.StaffLines[0],i=n.Measures[0].MeasureNumber,r=u(n.Measures);try{for(r.s();!(e=r.n()).done;){var o=e.value;0!==o.MeasureNumber&&1!==o.MeasureNumber||(i=o.MeasureNumber),o.MeasureNumber!==i&&o.MeasureNumber!==i+this.rules.MeasureNumberLabelOffset||o.parentSourceMeasure.ImplicitMeasure||((1!==o.MeasureNumber||1===o.MeasureNumber&&o!==n.Measures[0])&&this.calculateSingleMeasureNumberPlacement(o,n,t),i=o.MeasureNumber)}}catch(s){r.e(s)}finally{r.f()}}},{key:"calculateSingleMeasureNumberPlacement",value:function(t,e,n){var i=t.MeasureNumber.toString(),r=new m.GraphicalLabel(new P.Label(i),this.rules.MeasureNumberLabelHeight,b.TextAlignmentEnum.LeftBottom,this.rules),o=e.SkyBottomLineCalculator;r.setLabelPositionAndShapeBorders(),r.PositionAndShape.Parent=n.PositionAndShape;var s,a=e.PositionAndShape.RelativePosition.x+t.PositionAndShape.RelativePosition.x-r.PositionAndShape.BorderMarginLeft,l=a,c=a-r.PositionAndShape.BorderLeft+r.PositionAndShape.BorderMarginRight;e===n.StaffLines[0]&&n===this.musicSystems[0]&&(l-=e.PositionAndShape.RelativePosition.x,c-=e.PositionAndShape.RelativePosition.x);var h=o.getSkyLineMinInRange(l,c);if(t===e.Measures[0]){var d=0;if(n.GroupBrackets.length>0){var p,v=u(n.GroupBrackets);try{for(v.s();!(p=v.n()).done;){var y=p.value;d=Math.min(d,y.PositionAndShape.BorderTop)}}catch(g){v.e(g)}finally{v.f()}}s=Math.min(h,d)}else s=h;s=Math.min(0,s),r.PositionAndShape.RelativePosition=new f.PointF2D(a,s),o.updateSkyLineInRange(l,c,s+r.PositionAndShape.BorderMarginTop),n.MeasureNumberLabels.push(r)}},{key:"layoutGraphicalTie",value:function(t,e){throw new Error("abstract, not implemented")}},{key:"calculateSingleStaffLineLyricsPosition",value:function(t,e){for(var n=0,i=this.rules.StaffHeight,r=[],o=t.SkyBottomLineCalculator,s=t.Measures.length,a=0;a<s;++a)for(var u=t.Measures[a],l=u.PositionAndShape.RelativePosition,c=u.staffEntries.length,h=0;h<c;++h){var d=u.staffEntries[h];if(d.LyricsEntries.length>0){r.push(d),n=Math.max(n,d.LyricsEntries.length);for(var p=d.PositionAndShape.RelativePosition.x+l.x,m=Number.MAX_VALUE,b=Number.MIN_VALUE,v=0;v<d.LyricsEntries.length;v++){var y=d.LyricsEntries[v].GraphicalLabel;m=Math.min(m,p+y.PositionAndShape.BorderMarginLeft),b=Math.max(b,p+y.PositionAndShape.BorderMarginRight)}var g=o.getBottomLineMaxInRange(m,b);i=Math.max(i,g)}}var S=0;s=r.length;for(var w=0,_=r;w<_.length;w++)for(var x=_[w],k=0;k<x.LyricsEntries.length;k++){var E=x.LyricsEntries[k],P=E.GraphicalLabel,A=e.indexOf(E.LyricsEntry.VerseNumber),L=i+this.rules.LyricsHeight+this.rules.VerticalBetweenLyricsDistance+(this.rules.VerticalBetweenLyricsDistance+this.rules.LyricsHeight)*A;this.leadSheet&&(L=3.4+(this.rules.VerticalBetweenLyricsDistance+this.rules.LyricsHeight)*A),P.PositionAndShape.RelativePosition=new f.PointF2D(P.PositionAndShape.RelativePosition.x,L),S=Math.max(S,L)}if(r.length>0){var T=t.PositionAndShape.Size.width,M=r[0].PositionAndShape.RelativePosition.x+r[0].PositionAndShape.BorderMarginLeft+r[0].parentMeasure.PositionAndShape.RelativePosition.x;M=M>T?T:M,o.updateBottomLineInRange(M,T,S)}return r}},{key:"calculateLyricsExtendsAndDashes",value:function(t){for(var e=0,n=t.length;e<n;++e)for(var i=t[e],r=0;r<i.LyricsEntries.length;r++){var o=i.LyricsEntries[r];void 0!==o.ParentLyricWord&&o.ParentLyricWord.GraphicalLyricsEntries[o.ParentLyricWord.GraphicalLyricsEntries.length-1]!==o&&this.calculateSingleLyricWord(o),o.LyricsEntry.extend&&this.calculateLyricExtend(o)}}},{key:"calculateSingleOctaveShift",value:function(t,e,n,i){throw new Error("abstract, not implemented")}},{key:"calculateWordRepetitionInstruction",value:function(t,e){throw new Error("abstract, not implemented")}},{key:"calculateMoodAndUnknownExpression",value:function(t,e,n){throw new Error("abstract, not implemented")}},{key:"clearRecreatedObjects",value:function(){for(var t=0,e=this.staffEntriesWithGraphicalTies.length;t<e;++t)this.staffEntriesWithGraphicalTies[t].GraphicalTies.length=0;this.staffEntriesWithGraphicalTies.length=0}},{key:"handleStaffEntryLink",value:function(t,e){x.debug("handleStaffEntryLink not implemented")}},{key:"calculateMusicSystems",value:function(){if(void 0!==this.graphicalMusicSheet.MeasureList){var t=this.graphicalMusicSheet.MeasureList;if(void 0!==t){this.rules.MinMeasureToDrawIndex>t.length-1&&(x.debug("minimum measure to draw index out of range. resetting min measure index to limit."),this.rules.MinMeasureToDrawIndex=t.length-1);for(var e=[],n=this.rules.MinMeasureToDrawIndex,i=t.length;n<i&&n<=this.rules.MaxMeasureToDrawIndex;++n){for(var r=[],o=0,s=t[n].length;o<s;++o){var a=t[n][o];if(a.isVisible()&&(r.push(a),this.rules.ColoringEnabled)){var l,h=u(a.staffEntries);try{for(h.s();!(l=h.n()).done;){var d,p=u(l.value.graphicalVoiceEntries);try{for(p.s();!(d=p.n()).done;){d.value.color()}}catch(z){p.e(z)}finally{p.f()}}}catch(z){h.e(z)}finally{h.f()}}}e.push(r)}for(var m=0,b=0,v=e.length;b<v;++b){m=Math.max(e[b].length,m);break}if(0!==m){var y=new c.MusicSystemBuilder;if(y.initialize(this.graphicalMusicSheet,e,m),this.musicSystems=y.buildMusicSystems(),this.formatMeasures(),this.checkMeasuresForWholeRestNotes(),this.leadSheet||(this.optimizeRestPlacement(),this.calculateStaffEntryArticulationMarks(),this.rules.RenderSlurs&&this.calculateTieCurves()),this.calculateSkyBottomLines(),this.calculateTupletNumbers(),this.rules.RenderMeasureNumbers)for(var g=0,S=this.musicSystems.length;g<S;++g)this.calculateMeasureNumberPlacement(this.musicSystems[g]);!this.leadSheet&&this.rules.RenderSlurs&&this.calculateSlurs(),this.leadSheet||this.calculateOrnaments(),this.calculateChordSymbols(),this.leadSheet||(this.calculateDynamicExpressions(),this.calculateMoodAndUnknownExpressions(),this.calculateExpressionAlignements(),this.calculateOctaveShifts(),this.calculateWordRepetitionInstructions()),this.calculateRepetitionEndings(),this.leadSheet||this.calculateTempoExpressions(),this.calculateLyricsPosition();for(var w=0,_=this.musicSystems.length;w<_;++w)for(var k=this.musicSystems[w],E=0,P=k.StaffLines.length;E<P;++E)this.updateStaffLineBorders(k.StaffLines[E]);y.calculateSystemYLayout(),this.calculateComments(),this.calculateMarkedAreas();for(var A=0,L=this.graphicalMusicSheet.MusicPages.length;A<L;++A){for(var T=this.graphicalMusicSheet.MusicPages[A],M=0,C=T.MusicSystems.length;M<C;++M){var N=0===A&&0===M,I=T.MusicSystems[M];I.setMusicSystemLabelsYPosition(),this.leadSheet?I===I.Parent.MusicSystems[0]&&I.createSystemLeftLine(this.rules.SystemThinLineWidth,this.rules.SystemLabelsRightMargin,N):(I.setYPositionsToVerticalLineObjectsAndCreateLines(this.rules),I.createSystemLeftLine(this.rules.SystemThinLineWidth,this.rules.SystemLabelsRightMargin,N),I.createInstrumentBrackets(this.graphicalMusicSheet.ParentMusicSheet.Instruments,this.rules.StaffHeight),I.createGroupBrackets(this.graphicalMusicSheet.ParentMusicSheet.InstrumentalGroups,this.rules.StaffHeight,0),I.alignBeginInstructions()),I.calculateBorders(this.rules)}for(var R=T.MusicSystems[0].PositionAndShape.BorderTop,O=0,F=T.MusicSystems.length;O<F;++O){var B=T.MusicSystems[O];B.PositionAndShape.RelativePosition=new f.PointF2D(B.PositionAndShape.RelativePosition.x,B.PositionAndShape.RelativePosition.y-R)}for(var D=0,j=T.MusicSystems.length;D<j;++D)for(var V=T.MusicSystems[D],G=0,U=V.StaffLines.length;G<U;++G)V.StaffLines[G].addActivitySymbolClickArea();T.PositionAndShape.calculateTopBottomBorders(),T===this.graphicalMusicSheet.MusicPages[0]&&this.calculatePageLabels(T),T.PositionAndShape.calculateTopBottomBorders()}}}}}},{key:"calculateMarkedAreas",value:function(){}},{key:"calculateComments",value:function(){}},{key:"calculateChordSymbols",value:function(){var t,e=u(this.musicSystems);try{for(e.s();!(t=e.n()).done;){var n,i=u(t.value.StaffLines);try{for(i.s();!(n=i.n()).done;){var r,o=n.value,s=o.SkyBottomLineCalculator,a=u(o.Measures);try{for(a.s();!(r=a.n()).done;){var l,c=u(r.value.staffEntries);try{for(c.s();!(l=c.n()).done;){var h=l.value;if(h.graphicalChordContainers&&0!==h.graphicalChordContainers.length){var f,d=u(h.graphicalChordContainers);try{for(d.s();!(f=d.n()).done;){var p=f.value,m=h.PositionAndShape,b=p.PositionAndShape;s.updateSkyLineInRange(b.BorderMarginLeft+m.AbsolutePosition.x,b.BorderMarginRight+m.AbsolutePosition.x,m.BorderMarginTop)}}catch(v){d.e(v)}finally{d.f()}}}}catch(v){c.e(v)}finally{c.f()}}}catch(v){a.e(v)}finally{a.f()}}}catch(v){i.e(v)}finally{i.f()}}}catch(v){e.e(v)}finally{e.f()}}},{key:"layoutMeasureWithWholeRest",value:function(t,e,n){}},{key:"layoutBeams",value:function(t){}},{key:"layoutArticulationMarks",value:function(t,e,n){}},{key:"layoutOrnament",value:function(t,e,n){}},{key:"calculateRestNotePlacementWithinGraphicalBeam",value:function(t,e,n,i,r){}},{key:"calculateTupletNumbers",value:function(){}},{key:"calculateSlurs",value:function(){}},{key:"calculateDynamicExpressionsForMultiExpression",value:function(t,e,n){}},{key:"calculateGraphicalVerbalContinuousDynamic",value:function(t,e){var n,i=t.Label,r=e.x+i.PositionAndShape.BorderMarginLeft,o=e.x+i.PositionAndShape.BorderMarginRight,s=t.ParentStaffLine.SkyBottomLineCalculator;t.ContinuousDynamic.Placement===L.PlacementEnum.Below?(n=s.getBottomLineMaxInRange(r,o),i.PositionAndShape.RelativePosition=new f.PointF2D(e.x,n-i.PositionAndShape.BorderMarginTop)):(n=s.getSkyLineMinInRange(r,o),i.PositionAndShape.RelativePosition=new f.PointF2D(e.x,n-i.PositionAndShape.BorderMarginBottom))}},{key:"calculateGraphicalContinuousDynamic",value:function(t,e){var n=t.ParentStaffLine.ParentStaff.idInMusicSheet,i=this.graphicalMusicSheet.getGraphicalMeasureFromSourceMeasureAndIndex(t.ContinuousDynamic.EndMultiExpression.SourceMeasureParent,n);if(i){t.EndMeasure=i;var o=t.ParentStaffLine,s=i.ParentStaffLine,a=void 0!==s&&o===s,u=!1;s?u=s.isPartOfMultiStaffInstrument():o&&(u=o.isPartOfMultiStaffInstrument());var l=r.Fraction.createFromFraction(t.ContinuousDynamic.EndMultiExpression.AbsoluteTimestamp),c=this.getRelativePositionInStaffLineFromTimestamp(l,n,s,u,0),h=o.ParentMusicSystem,f=h.StaffLines.indexOf(o),d=o.SkyBottomLineCalculator,p=t.ContinuousDynamic.Placement,m=void 0;a&&c.x-e.x<this.rules.WedgeMinLength&&(c.x=e.x+this.rules.WedgeMinLength);var b=e.x,v=s.Measures[0].beginInstructionsWidth-this.rules.WedgeHorizontalMargin-2,y=0,g=0;a?y=c.x:(y=o.PositionAndShape.Size.width,g=c.x,(m=new N.GraphicalContinuousDynamicExpression(t.ContinuousDynamic,s)).IsSplittedPart=!0,t.IsSplittedPart=!0);var S=0,w=0;if(p===L.PlacementEnum.Below){var _=0;f<h.StaffLines.length-1&&(_=f+1),S=_>f?this.rules.StaffHeight+(h.StaffLines[_].PositionAndShape.RelativePosition.y-o.PositionAndShape.RelativePosition.y-this.rules.StaffHeight)/2:this.rules.WedgePlacementBelowY,S-=this.rules.WedgeOpeningLength/2,a||(w=S);var k=d.getBottomLineMaxInRange(b,y);k>S&&(S=k);if(f<h.StaffLines.length-1){o.findClosestStaffEntry(y);o.findClosestStaffEntry(b)}a||((k=s.SkyBottomLineCalculator.getBottomLineMaxInRange(v,g))>w&&(w=k),w+=this.rules.WedgeOpeningLength/2,w+=this.rules.WedgeVerticalMargin),S+=this.rules.WedgeOpeningLength/2,S+=this.rules.WedgeVerticalMargin}else if(p===L.PlacementEnum.Above){if(1===o.ParentStaff.ParentInstrument.Staves.length)S=this.rules.WedgePlacementAboveY;else{var E=0;f>0&&(E=f-1),S=-(o.PositionAndShape.RelativePosition.y-h.StaffLines[E].PositionAndShape.RelativePosition.y-this.rules.StaffHeight)/2}S+=this.rules.WedgeOpeningLength/2,a||(w=S);var P=d.getSkyLineMinInRange(b,y);P<S&&(S=P);if(o.ParentStaff.ParentInstrument.Staves.length>1&&f>0){var A=o.findClosestStaffEntry(b),T=o.findClosestStaffEntry(y);if(A&&T);}a||((P=s.SkyBottomLineCalculator.getSkyLineMinInRange(v,g))<w&&(w=P),w-=this.rules.WedgeOpeningLength/2),S-=this.rules.WedgeOpeningLength/2,S-=this.rules.WedgeVerticalMargin,a||(w-=this.rules.WedgeVerticalMargin)}t.Lines.clear(),t.ContinuousDynamic.DynamicType===C.ContDynamicEnum.crescendo?a?(t.createCrescendoLines(b,y,S),t.calcPsi()):(t.createFirstHalfCrescendoLines(b,y,S),t.calcPsi(),m.createSecondHalfCrescendoLines(v,g,w),m.calcPsi()):t.ContinuousDynamic.DynamicType===C.ContDynamicEnum.diminuendo&&(a?(t.createDiminuendoLines(b,y,S),t.calcPsi()):(t.createFirstHalfDiminuendoLines(b,y,S),t.calcPsi(),m.createSecondHalfDiminuendoLines(v,g,w),m.calcPsi()))}else x.warn("Not working")}},{key:"calculateGraphicalInstantaneousDynamicExpression",value:function(t,e){var n=t.ParentStaffLine,i=e.x+t.PositionAndShape.BorderMarginLeft,r=e.x+t.PositionAndShape.BorderMarginRight,o=n.SkyBottomLineCalculator,s=0;if(t.Placement===L.PlacementEnum.Above){var a=o.getSkyLineMinInRange(i,r);if(n.isPartOfMultiStaffInstrument()&&n.ParentStaff!==n.ParentStaff.ParentInstrument.Staves[0]){var u=n.ParentMusicSystem.StaffLines[n.ParentMusicSystem.StaffLines.indexOf(n)-1],l=n.PositionAndShape.RelativePosition.y-u.PositionAndShape.RelativePosition.y-this.rules.StaffHeight;s=a>-l/2?-l/2:a-t.PositionAndShape.BorderMarginBottom}else s=a-t.PositionAndShape.BorderMarginBottom;t.PositionAndShape.RelativePosition=new f.PointF2D(e.x,s)}else if(t.Placement===L.PlacementEnum.Below){var c=o.getBottomLineMaxInRange(i,r),h=n.ParentStaff.ParentInstrument.Staves[n.ParentStaff.ParentInstrument.Staves.length-1];if(n.isPartOfMultiStaffInstrument()&&n.ParentStaff!==h){var d=n.ParentMusicSystem.StaffLines[n.ParentMusicSystem.StaffLines.indexOf(n)+1].PositionAndShape.RelativePosition.y-n.PositionAndShape.RelativePosition.y-this.rules.StaffHeight;s=c+t.PositionAndShape.BorderMarginBottom<this.rules.StaffHeight+d/2?this.rules.StaffHeight+d/2:c-t.PositionAndShape.BorderMarginTop}else s=c-t.PositionAndShape.BorderMarginTop;t.PositionAndShape.RelativePosition=new f.PointF2D(e.x,s)}t.updateSkyBottomLine()}},{key:"calcGraphicalRepetitionEndingsRecursively",value:function(t){}},{key:"layoutSingleRepetitionEnding",value:function(t,e,n,i,r,o){}},{key:"calculateLabel",value:function(t,e,n,i,r,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:b.TextAlignmentEnum.CenterBottom,a=new P.Label(n,s);a.fontHeight=o;var u=new m.GraphicalLabel(a,o,a.textAlignment,this.rules,t.PositionAndShape);u.Label.fontStyle=i,r===L.PlacementEnum.Below&&(u.Label.textAlignment=b.TextAlignmentEnum.LeftTop),u.setLabelPositionAndShapeBorders(),u.PositionAndShape.BorderMarginBottom*=1.1,u.PositionAndShape.BorderMarginTop*=1.1,u.PositionAndShape.BorderMarginLeft*=1.1,u.PositionAndShape.BorderMarginRight*=1.1;var l,c=e.x+u.PositionAndShape.BorderMarginLeft,h=e.x+u.PositionAndShape.BorderMarginRight;h>t.PositionAndShape.Size.width&&(c=(h=t.PositionAndShape.Size.width-this.rules.MeasureRightMargin)-u.PositionAndShape.MarginSize.width,e.x=c-u.PositionAndShape.BorderMarginLeft);var d=t.SkyBottomLineCalculator;return l=r===L.PlacementEnum.Below?d.getBottomLineMaxInRange(c,h):d.getSkyLineMinInRange(c,h),u.PositionAndShape.RelativePosition=new f.PointF2D(e.x,l),r===L.PlacementEnum.Below?d.updateBottomLineInRange(c,h,u.PositionAndShape.BorderMarginBottom+l):d.updateSkyLineInRange(c,h,u.PositionAndShape.BorderMarginTop+l),u}},{key:"calculateTempoExpressionsForMultiTempoExpression",value:function(t,e,n){var i=r.Fraction.plus(t.AbsoluteTimestamp,e.Timestamp),o=this.graphicalMusicSheet.MeasureList[n],s=new f.PointF2D;if(e.ContinuousTempo||e.InstantaneousTempo){if(this.rules.MinMeasureToDrawIndex>0)return;for(var a=o[0].ParentStaffLine,l=o[0].PositionAndShape.RelativePosition.x,c=0,h=0;h<o.length;h++)if(o[h].ParentStaffLine&&0!==o[h].ParentStaffLine.Measures.length&&o[h].ParentStaffLine.Measures.length>0){a=o[h].ParentStaffLine,l=o[h].PositionAndShape.RelativePosition.x,c=h;break}if(s=this.getRelativePositionInStaffLineFromTimestamp(i,c,a,a.isPartOfMultiStaffInstrument(),l),e.EntriesList.length>0&&e.EntriesList[0].Expression instanceof M.InstantaneousTempoExpression&&(e.EntriesList[0].Expression.Placement=L.PlacementEnum.Above,a.Measures[0].staffEntries.length>0&&0===Math.abs(s.x-a.Measures[0].staffEntries[0].PositionAndShape.RelativePosition.x)&&a.ParentMusicSystem===this.musicSystems[0])){var d=a.Measures[0].FirstInstructionStaffEntry;if(d){var p=d.GraphicalInstructions.last();s.x=p.PositionAndShape.RelativePosition.x}this.rules.CompactMode&&(s.x=a.PositionAndShape.RelativePosition.x+a.Measures[0].PositionAndShape.RelativePosition.x)}var m,v=u(e.EntriesList);try{for(v.s();!(m=v.n()).done;){var y=m.value,g=b.TextAlignmentEnum.CenterBottom;this.rules.CompactMode&&(g=b.TextAlignmentEnum.LeftBottom);var S=this.calculateLabel(a,s,y.label,e.getFontstyleOfFirstEntry(),y.Expression.Placement,this.rules.UnknownTextHeight,g);if(y.Expression instanceof M.InstantaneousTempoExpression){var w,_=u(a.AbstractExpressions);try{for(_.s();!(w=_.n()).done;)w.value}catch(k){_.e(k)}finally{_.f()}if(void 0===new T.GraphicalInstantaneousTempoExpression(y.Expression,S).ParentStaffLine&&x.warn("Adding staffline didn't work"),y.Expression.Enum===M.TempoEnum.metronomeMark){this.createMetronomeMark(y.Expression);continue}}}}catch(k){v.e(k)}finally{v.f()}}}},{key:"createMetronomeMark",value:function(t){throw new Error("abstract, not implemented")}},{key:"graphicalMeasureCreatedCalculations",value:function(t){}},{key:"clearSystemsAndMeasures",value:function(){for(var t=0,e=this.graphicalMusicSheet.MusicPages.length;t<e;++t){for(var n=this.graphicalMusicSheet.MusicPages[t],i=0,r=n.MusicSystems.length;i<r;++i){for(var o=n.MusicSystems[i],s=0,a=o.StaffLines.length;s<a;++s){for(var u=o.StaffLines[s],l=0,c=u.Measures.length;l<c;++l){var h=u.Measures[l];if(void 0!==h.FirstInstructionStaffEntry){var f=h.PositionAndShape.ChildElements.indexOf(h.FirstInstructionStaffEntry.PositionAndShape);f>-1&&h.PositionAndShape.ChildElements.splice(f,1),h.FirstInstructionStaffEntry=void 0,h.beginInstructionsWidth=0}if(void 0!==h.LastInstructionStaffEntry){var d=h.PositionAndShape.ChildElements.indexOf(h.LastInstructionStaffEntry.PositionAndShape);d>-1&&h.PositionAndShape.ChildElements.splice(d,1),h.LastInstructionStaffEntry=void 0,h.endInstructionsWidth=0}}u.Measures=[],u.PositionAndShape.ChildElements=[]}o.StaffLines.length=0,o.PositionAndShape.ChildElements=[]}n.MusicSystems=[],n.PositionAndShape.ChildElements=[]}this.graphicalMusicSheet.MusicPages=[]}},{key:"handleVoiceEntry",value:function(e,n,i,r,o,s,a,u,c,h){e.StemDirectionXml!==l.StemDirectionType.Undefined&&this.rules.SetWantedStemDirectionByXml&&void 0!==e.StemDirectionXml?e.WantedStemDirection=e.StemDirectionXml:this.calculateStemDirectionFromVoices(e);var f=n.findOrCreateGraphicalVoiceEntry(e);f.octaveShiftValue=u;var d,p=n.tabStaffEntry;void 0!==p&&(d=p.findOrCreateGraphicalVoiceEntry(e));for(var m=0,b=e.Notes.length;m<b;++m){var v=e.Notes[m];if(void 0!==v&&!(void 0!==h&&void 0!==h.Link&&void 0!==c&&c.indexOf(v)>-1)){var y=void 0;if(y=e.IsGrace?t.symbolFactory.createGraceNote(v,f,o,u):t.symbolFactory.createNote(v,f,o,u,void 0),void 0!==v.Pitch&&this.checkNoteForAccidental(y,i,o,u),this.resetYPositionForLeadSheet(y.PositionAndShape),n.addGraphicalNoteToListAtCorrectYPosition(f,y),y.PositionAndShape.calculateBoundingBox(),this.leadSheet||(void 0!==v.NoteBeam&&v.PrintObject&&this.handleBeam(y,v.NoteBeam,a),void 0!==v.NoteTuplet&&v.PrintObject&&this.handleTuplet(y,v.NoteTuplet,s)),d){var g=t.symbolFactory.createNote(v,d,o,u,void 0);p.addGraphicalNoteToListAtCorrectYPosition(d,g),g.PositionAndShape.calculateBoundingBox(),this.leadSheet||v.NoteTuplet&&this.handleTuplet(g,v.NoteTuplet,s)}}}return e.Articulations.length>0&&this.handleVoiceEntryArticulations(e.Articulations,e,n),e.TechnicalInstructions.length>0&&this.handleVoiceEntryTechnicalInstructions(e.TechnicalInstructions,e,n),e.LyricsEntries.size()>0&&this.handleVoiceEntryLyrics(e,n,r),void 0!==e.OrnamentContainer&&this.handleVoiceEntryOrnaments(e.OrnamentContainer,e,n),u}},{key:"resetYPositionForLeadSheet",value:function(t){this.leadSheet&&(t.RelativePosition=new f.PointF2D(t.RelativePosition.x,0))}},{key:"layoutVoiceEntries",value:function(t){if(t.PositionAndShape.RelativePosition=new f.PointF2D(0,0),!this.leadSheet){var e,n=u(t.graphicalVoiceEntries);try{for(n.s();!(e=n.n()).done;){var i=e.value.notes;0!==i.length&&this.layoutVoiceEntry(i[0].sourceNote.ParentVoiceEntry,i,t,void 0!==i[0].sourceNote.Pitch)}}catch(r){n.e(r)}finally{n.f()}}}},{key:"maxInstrNameLabelLength",value:function(){var t,e=0,n=u(this.graphicalMusicSheet.ParentMusicSheet.Instruments);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.Voices.length>0&&i.Voices[0].Visible){var r=i.NameLabel;this.rules.RenderPartNames||(r=new P.Label("",r.textAlignment,r.font));var o=new m.GraphicalLabel(r,this.rules.InstrumentLabelTextHeight,b.TextAlignmentEnum.LeftCenter,this.rules);o.setLabelPositionAndShapeBorders(),e=Math.max(e,o.PositionAndShape.MarginSize.width)}}}catch(s){n.e(s)}finally{n.f()}return this.rules.RenderPartNames?e:0}},{key:"calculateSheetLabelBoundingBoxes",value:function(){var t=this.graphicalMusicSheet.ParentMusicSheet,e=this.rules.DefaultColorTitle;if(void 0!==t.Title&&this.rules.RenderTitle){var n=new m.GraphicalLabel(t.Title,this.rules.SheetTitleHeight,b.TextAlignmentEnum.CenterBottom,this.rules);n.Label.colorDefault=e,this.graphicalMusicSheet.Title=n,n.setLabelPositionAndShapeBorders()}else this.rules.RenderTitle||(this.graphicalMusicSheet.Title=void 0);if(void 0!==t.Subtitle&&this.rules.RenderSubtitle){var i=new m.GraphicalLabel(t.Subtitle,this.rules.SheetSubtitleHeight,b.TextAlignmentEnum.CenterCenter,this.rules);i.Label.colorDefault=e,this.graphicalMusicSheet.Subtitle=i,i.setLabelPositionAndShapeBorders()}else this.rules.RenderSubtitle||(this.graphicalMusicSheet.Subtitle=void 0);if(void 0!==t.Composer&&this.rules.RenderComposer){var r=new m.GraphicalLabel(t.Composer,this.rules.SheetComposerHeight,b.TextAlignmentEnum.RightCenter,this.rules);r.Label.colorDefault=e,this.graphicalMusicSheet.Composer=r,r.setLabelPositionAndShapeBorders()}else this.rules.RenderComposer||(this.graphicalMusicSheet.Composer=void 0);if(void 0!==t.Lyricist&&this.rules.RenderLyricist){var o=new m.GraphicalLabel(t.Lyricist,this.rules.SheetAuthorHeight,b.TextAlignmentEnum.LeftCenter,this.rules);o.Label.colorDefault=e,this.graphicalMusicSheet.Lyricist=o,o.setLabelPositionAndShapeBorders()}else this.rules.RenderLyricist||(this.graphicalMusicSheet.Lyricist=void 0)}},{key:"checkMeasuresForWholeRestNotes",value:function(){for(var t=0,e=this.musicSystems.length;t<e;++t)for(var n=this.musicSystems[t],i=0,o=n.StaffLines.length;i<o;++i)for(var s=n.StaffLines[i],a=0,u=s.Measures.length;a<u;++a){var l=s.Measures[a];if(1===l.staffEntries.length){var c=l.staffEntries[0];if(c.graphicalVoiceEntries.length>0&&1===c.graphicalVoiceEntries[0].notes.length){var h=c.graphicalVoiceEntries[0].notes[0];void 0===h.sourceNote.Pitch&&new r.Fraction(1,2).lt(h.sourceNote.Length)&&this.layoutMeasureWithWholeRest(h,c,l)}}}}},{key:"optimizeRestNotePlacement",value:function(t,e){if(0!==t.graphicalVoiceEntries.length){var n=t.graphicalVoiceEntries[0].notes;if(0!==n.length){var i=n[0],r=void 0===i.sourceNote.Pitch;if(2===t.graphicalVoiceEntries.length){var o=!1,s=t.graphicalVoiceEntries[1].notes;s.length>0&&(o=void 0===s[0].sourceNote.Pitch),r&&o?this.calculateTwoRestNotesPlacementWithCollisionDetection(t):(r||o)&&this.calculateRestNotePlacementWithCollisionDetectionFromGraphicalNote(t)}else if(r&&t!==e.staffEntries[0]&&t!==e.staffEntries[e.staffEntries.length-1]){var a=e.staffEntries.indexOf(t),u=e.staffEntries[a-1],l=e.staffEntries[a+1];if(1===u.graphicalVoiceEntries.length){var c=u.graphicalVoiceEntries[0].notes[0];if(void 0!==c.sourceNote.NoteBeam&&1===l.graphicalVoiceEntries.length){var h=l.graphicalVoiceEntries[0].notes[0];void 0!==h.sourceNote.NoteBeam&&c.sourceNote.NoteBeam===h.sourceNote.NoteBeam&&(this.calculateRestNotePlacementWithinGraphicalBeam(t,i,c,l,h),t.PositionAndShape.calculateBoundingBox())}}}}}}},{key:"getRelativePositionInStaffLineFromTimestamp",value:function(t,e,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=new f.PointF2D,a=void 0,u=void 0,l=this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers.length,c=this.graphicalMusicSheet.GetInterpolatedIndexInVerticalContainers(t),h=Math.min(Math.floor(c),l-1),d=Math.min(Math.ceil(c),l-1);if(h<0||e<0)return s;if(a=this.getFirstLeftNotNullStaffEntryFromContainer(h,e,i),u=this.getFirstRightNotNullStaffEntryFromContainer(d,e,i),void 0!==a&&void 0!==u){var p=a.parentMeasure.PositionAndShape.RelativePosition.x;o>0&&(p=o);var m=a.PositionAndShape.RelativePosition.x+p,b=u.PositionAndShape.RelativePosition.x+u.parentMeasure.PositionAndShape.RelativePosition.x;o>0&&(b=u.PositionAndShape.RelativePosition.x+p);var v=0;if(a!==u){var y=a.getAbsoluteTimestamp(),g=u.getAbsoluteTimestamp();v=r.Fraction.minus(t,y).RealValue/r.Fraction.minus(g,y).RealValue}a.parentMeasure.ParentStaffLine!==u.parentMeasure.ParentStaffLine&&(a.parentMeasure.ParentStaffLine===n?b=n.PositionAndShape.Size.width:m=n.PositionAndShape.RelativePosition.x),s=new f.PointF2D(m+(b-m)*v,0)}return s}},{key:"getRelativeXPositionFromTimestamp",value:function(t){var e=this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers.length,n=this.graphicalMusicSheet.GetInterpolatedIndexInVerticalContainers(t),i=Math.max(0,Math.min(Math.round(n),e-1)),r=this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[i].getFirstNonNullStaffEntry();return r.PositionAndShape.RelativePosition.x+r.parentMeasure.PositionAndShape.RelativePosition.x}},{key:"calculatePageLabels",value:function(t){this.rules.RenderSingleHorizontalStaffline&&(t.PositionAndShape.BorderRight=t.PositionAndShape.Size.width,t.PositionAndShape.calculateBoundingBox(),this.graphicalMusicSheet.ParentMusicSheet.pageWidth=t.PositionAndShape.Size.width);var e=10;if(t.MusicSystems.length>0){var n=t.MusicSystems[0];e=n.PositionAndShape.RelativePosition.y+n.PositionAndShape.BorderTop}if(void 0!==this.graphicalMusicSheet.Title){var i=this.graphicalMusicSheet.Title;i.PositionAndShape.Parent=t.PositionAndShape;var r=new f.PointF2D;r.x=this.graphicalMusicSheet.ParentMusicSheet.pageWidth/2,r.y=this.rules.TitleTopDistance+this.rules.SheetTitleHeight,i.PositionAndShape.RelativePosition=r,t.Labels.push(i)}if(void 0!==this.graphicalMusicSheet.Subtitle){var o=this.graphicalMusicSheet.Subtitle;o.PositionAndShape.Parent=t.PositionAndShape;var s=new f.PointF2D;s.x=this.graphicalMusicSheet.ParentMusicSheet.pageWidth/2,s.y=this.rules.TitleTopDistance+this.rules.SheetTitleHeight+this.rules.SheetMinimumDistanceBetweenTitleAndSubtitle,o.PositionAndShape.RelativePosition=s,t.Labels.push(o)}var a=this.graphicalMusicSheet.Composer;if(void 0!==a){a.PositionAndShape.Parent=t.PositionAndShape,a.setLabelPositionAndShapeBorders();var u=new f.PointF2D;u.x=this.graphicalMusicSheet.ParentMusicSheet.pageWidth-this.rules.PageRightMargin,u.y=e-this.rules.SystemComposerDistance,a.PositionAndShape.RelativePosition=u,t.Labels.push(a)}var l=this.graphicalMusicSheet.Lyricist;if(void 0!==l){l.PositionAndShape.Parent=t.PositionAndShape,l.setLabelPositionAndShapeBorders();var c=new f.PointF2D;c.x=this.rules.PageLeftMargin,c.y=e-this.rules.SystemComposerDistance,l.PositionAndShape.RelativePosition=c,t.Labels.push(l)}}},{key:"createGraphicalTies",value:function(){for(var t=0;t<this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length;t++)for(var e=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[t],n=0;n<e.CompleteNumberOfStaves;n++)for(var i=0;i<e.VerticalSourceStaffEntryContainers.length;i++){var r=e.VerticalSourceStaffEntryContainers[i].StaffEntries[n];if(void 0!==r)for(var o=this.graphicalMusicSheet.findGraphicalStaffEntryFromMeasureList(n,t,r),s=0,a=r.VoiceEntries.length;s<a;++s)for(var u=r.VoiceEntries[s],l=0,c=u.Notes.length;l<c;++l){var h=u.Notes[l];void 0!==h.NoteTie&&this.handleTie(h.NoteTie,o,n,t)}}}},{key:"handleTie",value:function(t,e,n,i){for(var r=e,o=r.findEndTieGraphicalNoteFromNote(t.StartNote),s=void 0,a=void 0,u=1;u<t.Notes.length;u++)if(o=r.findEndTieGraphicalNoteFromNote(t.Notes[u-1]),s=this.graphicalMusicSheet.GetGraphicalFromSourceStaffEntry(t.Notes[u].ParentStaffEntry)){if(a=s.findEndTieGraphicalNoteFromNote(t.Notes[u]),void 0!==o&&void 0!==a&&void 0!==s){if(!o.sourceNote.PrintObject||!a.sourceNote.PrintObject)continue;var l=this.createGraphicalTie(t,r,s,o,a);r.GraphicalTies.push(l),this.staffEntriesWithGraphicalTies.indexOf(r)>=0&&this.staffEntriesWithGraphicalTies.push(r)}r=s}}},{key:"createAccidentalCalculators",value:function(){var t=[],e=this.graphicalMusicSheet.ParentMusicSheet.getFirstSourceMeasure();if(void 0!==e)for(var n=0;n<e.CompleteNumberOfStaves;n++){var i=new w.AccidentalCalculator;if(t.push(i),void 0!==e.FirstInstructionsStaffEntries[n])for(var r=0,o=e.FirstInstructionsStaffEntries[n].Instructions.length;r<o;++r){var s=e.FirstInstructionsStaffEntries[n].Instructions[r];s instanceof v.KeyInstruction&&(i.ActiveKeyInstruction=s)}}return t}},{key:"calculateVerticalContainersList",value:function(){for(var t=this.graphicalMusicSheet.MeasureList[0].length,e=0;e<this.graphicalMusicSheet.MeasureList.length;e++)for(var n=0;n<t;n++)for(var i=this.graphicalMusicSheet.MeasureList[e][n],r=0,o=i.staffEntries.length;r<o;++r){var s=i.staffEntries[r],a=this.graphicalMusicSheet.getOrCreateVerticalContainer(s.getAbsoluteTimestamp());void 0!==a&&(a.StaffEntries[n]=s,s.parentVerticalContainer=a)}}},{key:"setIndicesToVerticalGraphicalContainers",value:function(){for(var t=0;t<this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers.length;t++)this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[t].Index=t}},{key:"createGraphicalMeasuresForSourceMeasure",value:function(t,e,n,i,r){this.initGraphicalMeasuresCreation();for(var o=[],s=[],a=[],u=[],l=0;l<t.CompleteNumberOfStaves;l++){var c=this.createGraphicalMeasure(t,a,s,e[l],r,i,n,l,u);this.graphicalMeasureCreatedCalculations(c),o.push(c)}return t.VerticalMeasureList=o,o}},{key:"createGraphicalMeasure",value:function(e,n,i,c,h,f,d,m,b){var y=this.graphicalMusicSheet.ParentMusicSheet.getStaffFromIndex(m),g=void 0;if(h[m].ClefType===s.ClefEnum.TAB?(y.isTab=!0,g=t.symbolFactory.createTabStaffMeasure(e,y)):g=t.symbolFactory.createGraphicalMeasure(e,y),g.hasError=e.getErrorInMeasure(m),void 0!==e.FirstInstructionsStaffEntries[m])for(var w=0,x=e.FirstInstructionsStaffEntries[m].Instructions.length;w<x;++w){var k=e.FirstInstructionsStaffEntries[m].Instructions[w];if(k instanceof v.KeyInstruction){var E=v.KeyInstruction.copy(k);0!==this.graphicalMusicSheet.ParentMusicSheet.Transpose&&g.ParentStaff.ParentInstrument.MidiInstrumentId!==_.MidiInstrument.Percussion&&void 0!==t.transposeCalculator&&t.transposeCalculator.transposeKey(E,this.graphicalMusicSheet.ParentMusicSheet.Transpose),c.ActiveKeyInstruction=E}}for(var P=0,L=e.StaffLinkedExpressions[m].length;P<L;++P){var T=e.StaffLinkedExpressions[m][P];if(void 0!==T.OctaveShiftStart){var M=T.OctaveShiftStart;f[m]=new S.OctaveShiftParams(M,T.AbsoluteTimestamp,M.ParentEndMultiExpression.AbsoluteTimestamp)}}for(var C=0;C<e.VerticalSourceStaffEntryContainers.length;C++){var N=e.VerticalSourceStaffEntryContainers[C].StaffEntries[m];if(void 0!==N){for(var R=0,O=N.Instructions.length;R<O;++R){var F=N.Instructions[R];F instanceof s.ClefInstruction&&(h[m]=F)}var B=t.symbolFactory.createStaffEntry(N,g);C<g.staffEntries.length?g.addGraphicalStaffEntryAtTimestamp(B):g.addGraphicalStaffEntry(B);var D=[];void 0!==N.Link&&(N.findLinkedNotes(D),this.handleStaffEntryLink(B,b));var j=a.OctaveEnum.NONE;void 0!==f[m]&&f[m].getAbsoluteStartTimestamp.lte(N.AbsoluteTimestamp)&&N.AbsoluteTimestamp.lte(f[m].getAbsoluteEndTimestamp)&&(j=f[m].getOpenOctaveShift.Type);for(var V=0,G=N.VoiceEntries.length;V<G;++V)j=this.handleVoiceEntry(N.VoiceEntries[V],B,c,d,h[m],n,i,j,D,N);N.Instructions.length>0&&t.symbolFactory.createInStaffClef(B,N.Instructions[0]),N.ChordContainers&&N.ChordContainers.length>0&&(N.ParentStaff.ParentInstrument.HasChordSymbols=!0,t.symbolFactory.createChordSymbols(N,B,this.graphicalMusicSheet.ParentMusicSheet.Transpose))}}if(c.doCalculationsAtEndOfMeasure(),void 0!==e.LastInstructionsStaffEntries[m])for(var U=e.LastInstructionsStaffEntries[m],z=0,W=U.Instructions.length;z<W;++z){var H=U.Instructions[z];H instanceof s.ClefInstruction&&(h[m]=H)}for(var q=0,Y=e.StaffLinkedExpressions[m].length;q<Y;++q){var X=e.StaffLinkedExpressions[m][q];void 0!==X.OctaveShiftEnd&&void 0!==f[m]&&X.OctaveShiftEnd===f[m].getOpenOctaveShift&&(f[m]=void 0)}var K,J=u(g.staffEntries);try{for(J.s();!(K=J.n()).done;){var Z,Q=u(K.value.graphicalVoiceEntries);try{for(Q.s();!(Z=Q.n()).done;){var $=Z.value;this.setBeamNotesWantedStemDirections($.parentVoiceEntry)}}catch(st){Q.e(st)}finally{Q.f()}}}catch(st){J.e(st)}finally{J.f()}if(this.rules.FillEmptyMeasuresWithWholeRest>=1&&0===g.staffEntries.length){var tt=new p.SourceStaffEntry(new A.VerticalSourceStaffEntryContainer(g.parentSourceMeasure,g.parentSourceMeasure.AbsoluteTimestamp,g.parentSourceMeasure.CompleteNumberOfStaves),y),et=new l.VoiceEntry(new r.Fraction(0,1),y.Voices[0],tt),nt=new o.Note(et,tt,r.Fraction.createFromFraction(e.Duration),void 0);nt.PrintObject=this.rules.FillEmptyMeasuresWithWholeRest===I.FillEmptyMeasuresWithWholeRests.YesVisible,et.Notes.push(nt);var it=t.symbolFactory.createStaffEntry(tt,g);g.addGraphicalStaffEntry(it),it.relInMeasureTimestamp=et.Timestamp;var rt=t.symbolFactory.createVoiceEntry(et,it);it.graphicalVoiceEntries.push(rt);var ot=t.symbolFactory.createNote(nt,rt,new s.ClefInstruction,a.OctaveEnum.NONE,void 0);rt.notes.push(ot)}return g}},{key:"checkNoteForAccidental",value:function(t,e,n,i){var r=t.sourceNote.Pitch,o=this.graphicalMusicSheet.ParentMusicSheet.Transpose;0!==o&&t.sourceNote.ParentStaffEntry.ParentStaff.ParentInstrument.MidiInstrumentId!==_.MidiInstrument.Percussion&&(r=t.Transpose(e.ActiveKeyInstruction,n,o,i)),t.sourceNote.halfTone=r.getHalfTone(),e.checkAccidental(t,r)}},{key:"handleStaffEntries",value:function(){for(var t=0,e=this.graphicalMusicSheet.MeasureList.length;t<e;++t)for(var n=this.graphicalMusicSheet.MeasureList[t],i=0,r=n.length;i<r;++i){var o,s=u(n[i].staffEntries);try{for(s.s();!(o=s.n()).done;){var a=o.value;void 0!==a.parentMeasure&&a.graphicalVoiceEntries.length>0&&a.graphicalVoiceEntries[0].notes.length>0&&(this.layoutVoiceEntries(a),this.layoutStaffEntry(a))}}catch(l){s.e(l)}finally{s.f()}}}},{key:"calculateSkyBottomLines",value:function(){var t,e=u(this.musicSystems);try{for(e.s();!(t=e.n()).done;){var n,i=u(t.value.StaffLines);try{for(i.s();!(n=i.n()).done;){n.value.SkyBottomLineCalculator.calculateLines()}}catch(r){i.e(r)}finally{i.f()}}}catch(r){e.e(r)}finally{e.f()}}},{key:"calculateExpressionAlignements",value:function(){}},{key:"calculateStaffEntryArticulationMarks",value:function(){for(var t=0,e=this.musicSystems.length;t<e;++t)for(var n=this.musicSystems[t],i=0,r=n.StaffLines.length;i<r;++i)for(var o=n.StaffLines[i],s=0,a=o.Measures.length;s<a;++s)for(var u=o.Measures[s],l=0,c=u.staffEntries.length;l<c;++l)for(var h=u.staffEntries[l],f=0,d=h.sourceStaffEntry.VoiceEntries.length;f<d;++f){var p=h.sourceStaffEntry.VoiceEntries[f];p.Articulations.length>0&&this.layoutArticulationMarks(p.Articulations,p,h)}}},{key:"calculateOrnaments",value:function(){for(var t=0,e=this.musicSystems.length;t<e;++t)for(var n=this.musicSystems[t],i=0,r=n.StaffLines.length;i<r;++i)for(var o=n.StaffLines[i],s=0,a=o.Measures.length;s<a;++s)for(var u=o.Measures[s],l=0,c=u.staffEntries.length;l<c;++l)for(var h=u.staffEntries[l],f=0,d=h.sourceStaffEntry.VoiceEntries.length;f<d;++f){var p=h.sourceStaffEntry.VoiceEntries[f];if(void 0!==p.OrnamentContainer){if(p.hasTie()&&!h.relInMeasureTimestamp.Equals(p.Timestamp))continue;this.layoutOrnament(p.OrnamentContainer,p,h),-1===this.staffEntriesWithOrnaments.indexOf(h)&&this.staffEntriesWithOrnaments.push(h)}}}},{key:"optimizeRestPlacement",value:function(){for(var t=0,e=this.musicSystems.length;t<e;++t)for(var n=this.musicSystems[t],i=0,r=n.StaffLines.length;i<r;++i)for(var o=n.StaffLines[i],s=0,a=o.Measures.length;s<a;++s)for(var u=o.Measures[s],l=0,c=u.staffEntries.length;l<c;++l)this.optimizeRestNotePlacement(u.staffEntries[l],u)}},{key:"calculateTwoRestNotesPlacementWithCollisionDetection",value:function(t){var e=t.graphicalVoiceEntries[0].notes[0],n=t.graphicalVoiceEntries[1].notes[0];n.PositionAndShape.RelativePosition=new f.PointF2D(0,2.5),t.PositionAndShape.calculateAbsolutePositionsRecursiveWithoutTopelement(),e.PositionAndShape.computeNonOverlappingPositionWithMargin(t.PositionAndShape,g.ColDirEnum.Up,new f.PointF2D(0,n.PositionAndShape.RelativePosition.y));var i=e.PositionAndShape.RelativePosition;i.y-=1,e.PositionAndShape.RelativePosition=i,t.PositionAndShape.calculateBoundingBox()}},{key:"calculateRestNotePlacementWithCollisionDetectionFromGraphicalNote",value:function(t){var e,n;t.graphicalVoiceEntries[0].notes[0].sourceNote.isRest()?(e=t.graphicalVoiceEntries[0].notes[0],n=t.graphicalVoiceEntries[1].notes):(n=t.graphicalVoiceEntries[0].notes,e=t.graphicalVoiceEntries[1].notes[0]);var i=!1;t.PositionAndShape.calculateAbsolutePositionsRecursiveWithoutTopelement();for(var r=0,o=n.length;r<o;++r)if(e.PositionAndShape.marginCollisionDetection(n[r].PositionAndShape)){i=!0;break}if(i)if(e.sourceNote.ParentVoiceEntry.ParentVoice instanceof y.LinkedVoice)e.PositionAndShape.RelativePosition=new f.PointF2D(0,n[0].PositionAndShape.BorderMarginBottom+n[0].PositionAndShape.RelativePosition.y-e.PositionAndShape.BorderMarginTop+.5);else{var s=n[n.length-1],a=s.PositionAndShape.BorderMarginTop+s.PositionAndShape.RelativePosition.y;if(n[0].sourceNote.ParentVoiceEntry.ParentVoice instanceof y.LinkedVoice)e.PositionAndShape.RelativePosition=new f.PointF2D(0,a-e.PositionAndShape.BorderMarginBottom-.5);else{var u=n[0].PositionAndShape.BorderMarginBottom+n[0].PositionAndShape.RelativePosition.y;e.PositionAndShape.RelativePosition=new f.PointF2D(0,u<2?u-e.PositionAndShape.BorderMarginTop+.5:a-e.PositionAndShape.BorderMarginBottom-0)}}t.PositionAndShape.calculateBoundingBox()}},{key:"calculateTieCurves",value:function(){for(var t=0,e=this.musicSystems.length;t<e;++t)for(var n=this.musicSystems[t],i=0,r=n.StaffLines.length;i<r;++i)for(var o=n.StaffLines[i],s=0,a=o.Measures.length;s<a;++s)for(var u=o.Measures[s],l=0,c=u.staffEntries.length;l<c;++l)for(var h=u.staffEntries[l],f=h.GraphicalTies,d=0,p=f.length;d<p;++d){var m=f[d];void 0!==m.StartNote&&m.StartNote.parentVoiceEntry.parentStaffEntry===h&&this.layoutGraphicalTie(m,m.StartNote.parentVoiceEntry.parentStaffEntry.parentMeasure.ParentStaffLine!==m.EndNote.parentVoiceEntry.parentStaffEntry.parentMeasure.ParentStaffLine)}}},{key:"calculateLyricsPosition",value:function(){for(var t=new k.default,e=0,n=this.graphicalMusicSheet.ParentMusicSheet.Instruments.length;e<n;++e){var i=this.graphicalMusicSheet.ParentMusicSheet.Instruments[e];i.HasLyrics&&i.LyricVersesNumbers.length>0&&i.LyricVersesNumbers.sort()}for(var r=0,o=this.musicSystems.length;r<o;++r)for(var s=this.musicSystems[r],a=0,u=s.StaffLines.length;a<u;++a){var l=s.StaffLines[a],c=this.calculateSingleStaffLineLyricsPosition(l,l.ParentStaff.ParentInstrument.LyricVersesNumbers);t.setValue(l,c),this.calculateLyricsExtendsAndDashes(t.getValue(l))}for(var h=0,f=this.musicSystems.length;h<f;++h)for(var d=this.musicSystems[h],p=0,m=d.StaffLines.length;p<m;++p)this.calculateLyricsExtendsAndDashes(t.getValue(d.StaffLines[p]))}},{key:"calculateSingleLyricWord",value:function(t){var e=t.ParentLyricWord,n=e.GraphicalLyricsEntries.indexOf(t),i=void 0;if(n>=0&&(i=e.GraphicalLyricsEntries[n+1]),void 0!==i){var r=t.StaffEntryParent.parentMeasure.ParentStaffLine,o=i.StaffEntryParent.parentMeasure.ParentStaffLine,s=t.StaffEntryParent,a=i.StaffEntryParent;if(t.StaffEntryParent.parentMeasure.ParentStaffLine===i.StaffEntryParent.parentMeasure.ParentStaffLine){var u=s.parentMeasure.PositionAndShape.RelativePosition.x+s.PositionAndShape.RelativePosition.x+t.GraphicalLabel.PositionAndShape.RelativePosition.x+t.GraphicalLabel.PositionAndShape.BorderMarginRight,l=a.parentMeasure.PositionAndShape.RelativePosition.x+a.PositionAndShape.RelativePosition.x+t.GraphicalLabel.PositionAndShape.RelativePosition.x+i.GraphicalLabel.PositionAndShape.BorderMarginLeft,c=t.GraphicalLabel.PositionAndShape.RelativePosition.y,h=1;l-u>3*this.rules.MinimumDistanceBetweenDashes&&(h=Math.floor((l-u)/this.rules.MinimumDistanceBetweenDashes)-1),1===h?this.calculateSingleDashForLyricWord(r,u,l,c):this.calculateDashes(r,u,l,c)}else{var f=r.Measures[r.Measures.length-1],d=t.GraphicalLabel.PositionAndShape.RelativePosition.y;this.calculateDashes(r,s.parentMeasure.PositionAndShape.RelativePosition.x+s.PositionAndShape.RelativePosition.x+t.GraphicalLabel.PositionAndShape.BorderMarginRight,f.PositionAndShape.RelativePosition.x+f.PositionAndShape.Size.width,d),o&&o.Measures[0]&&a.parentMeasure.ParentStaffLine&&(a!==a.parentMeasure.staffEntries[0]||a.parentMeasure!==a.parentMeasure.ParentStaffLine.Measures[0])&&(d=i.GraphicalLabel.PositionAndShape.RelativePosition.y,this.calculateDashes(o,o.Measures[0].staffEntries[0].PositionAndShape.RelativePosition.x,a.parentMeasure.PositionAndShape.RelativePosition.x+a.PositionAndShape.RelativePosition.x+i.GraphicalLabel.PositionAndShape.BorderMarginLeft,d))}}}},{key:"calculateDashes",value:function(t,e,n,i){var r=n-e;if(r<3*this.rules.MinimumDistanceBetweenDashes)this.calculateSingleDashForLyricWord(t,e,n,i);else{var o=Math.floor(r/this.rules.MinimumDistanceBetweenDashes)-1,s=r/(o+1),a=0;for(e+=s,n-=s;a<=Math.floor(o/2)&&n>e;)r=this.calculateRightAndLeftDashesForLyricWord(t,e,n,i),e+=s,n-=s,a++;r>2*s&&this.calculateSingleDashForLyricWord(t,e,n,i)}}},{key:"calculateSingleDashForLyricWord",value:function(t,e,n,i){var r=new m.GraphicalLabel(new P.Label("-"),this.rules.LyricsHeight,b.TextAlignmentEnum.CenterBottom,this.rules);r.setLabelPositionAndShapeBorders(),t.LyricsDashes.push(r),-1===this.staffLinesWithLyricWords.indexOf(t)&&this.staffLinesWithLyricWords.push(t),r.PositionAndShape.Parent=t.PositionAndShape;var o=new f.PointF2D(e+(n-e)/2,i);r.PositionAndShape.RelativePosition=o}},{key:"calculateLyricExtend",value:function(t){for(var e=t.GraphicalLabel.PositionAndShape.RelativePosition.y,n=t.StaffEntryParent,i=n.parentMeasure.ParentStaffLine,r=void 0,o=void 0,s=n.parentMeasure.ParentStaff.idInMusicSheet,a=n.parentVerticalContainer.Index+1;a<this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers.length;++a){var u=this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[a].StaffEntries[s];if(void 0!==u){if(u.hasOnlyRests())break;if(u.LyricsEntries.length>0)break;o=(r=u).parentMeasure.ParentStaffLine}}if(void 0!==r)if(i===o)e-=t.GraphicalLabel.PositionAndShape.Size.height/4,this.calculateSingleLyricWordWithUnderscore(i,n.parentMeasure.PositionAndShape.RelativePosition.x+n.PositionAndShape.RelativePosition.x+t.GraphicalLabel.PositionAndShape.BorderMarginRight,r.parentMeasure.PositionAndShape.RelativePosition.x+r.PositionAndShape.RelativePosition.x+r.PositionAndShape.BorderMarginRight,e);else{var l=i.Measures[i.Measures.length-1].PositionAndShape;if(e-=t.GraphicalLabel.PositionAndShape.Size.height/4,this.calculateSingleLyricWordWithUnderscore(i,n.parentMeasure.PositionAndShape.RelativePosition.x+n.PositionAndShape.RelativePosition.x+t.GraphicalLabel.PositionAndShape.BorderMarginRight,l.RelativePosition.x+l.Size.width,e),void 0===r)return;r===r.parentMeasure.staffEntries[0]&&r.parentMeasure===r.parentMeasure.ParentStaffLine.Measures[0]||this.calculateSingleLyricWordWithUnderscore(o,o.Measures[0].staffEntries[0].PositionAndShape.RelativePosition.x,r.parentMeasure.PositionAndShape.RelativePosition.x+r.PositionAndShape.RelativePosition.x+r.PositionAndShape.BorderMarginRight,e)}}},{key:"calculateSingleLyricWordWithUnderscore",value:function(t,e,n,i){var r=new f.PointF2D(e,i),o=new f.PointF2D(n,i),s=new E.GraphicalLine(r,o,this.rules.LyricUnderscoreLineWidth);t.LyricLines.push(s),-1===this.staffLinesWithLyricWords.indexOf(t)&&this.staffLinesWithLyricWords.push(t)}},{key:"calculateRightAndLeftDashesForLyricWord",value:function(t,e,n,i){var r=new m.GraphicalLabel(new P.Label("-"),this.rules.LyricsHeight,b.TextAlignmentEnum.CenterBottom,this.rules);r.setLabelPositionAndShapeBorders(),t.LyricsDashes.push(r),-1===this.staffLinesWithLyricWords.indexOf(t)&&this.staffLinesWithLyricWords.push(t),r.PositionAndShape.Parent=t.PositionAndShape;var o=new f.PointF2D(e,i);r.PositionAndShape.RelativePosition=o;var s=new m.GraphicalLabel(new P.Label("-"),this.rules.LyricsHeight,b.TextAlignmentEnum.CenterBottom,this.rules);s.setLabelPositionAndShapeBorders(),t.LyricsDashes.push(s),s.PositionAndShape.Parent=t.PositionAndShape;var a=new f.PointF2D(n,i);return s.PositionAndShape.RelativePosition=a,s.PositionAndShape.RelativePosition.x-r.PositionAndShape.RelativePosition.x}},{key:"calculateDynamicExpressions",value:function(){for(var t=Math.min(this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length-1,this.rules.MaxMeasureToDrawIndex),e=Math.min(this.rules.MinMeasureToDrawIndex,this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length);e<=t;e++)for(var n=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[e],i=0;i<n.StaffLinkedExpressions.length;i++)if(this.graphicalMusicSheet.MeasureList[e][i].ParentStaff.ParentInstrument.Visible)for(var r=0;r<n.StaffLinkedExpressions[i].length;r++)(void 0!==n.StaffLinkedExpressions[i][r].InstantaneousDynamic||void 0!==n.StaffLinkedExpressions[i][r].StartingContinuousDynamic&&n.StaffLinkedExpressions[i][r].StartingContinuousDynamic.StartMultiExpression===n.StaffLinkedExpressions[i][r]&&0===n.StaffLinkedExpressions[i][r].UnknownList.length)&&this.calculateDynamicExpressionsForMultiExpression(n.StaffLinkedExpressions[i][r],e,i)}},{key:"calculateOctaveShifts",value:function(){for(var t=0;t<this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length;t++)for(var e=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[t],n=0;n<e.StaffLinkedExpressions.length;n++)if(this.graphicalMusicSheet.MeasureList[t][n].ParentStaff.ParentInstrument.Visible)for(var i=0;i<e.StaffLinkedExpressions[n].length;i++)void 0!==e.StaffLinkedExpressions[n][i].OctaveShiftStart&&this.calculateSingleOctaveShift(e,e.StaffLinkedExpressions[n][i],t,n)}},{key:"getFirstLeftNotNullStaffEntryFromContainer",value:function(t,e,n){if(void 0!==this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[t].StaffEntries[e])return this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[t].StaffEntries[e];for(var i=t-1;i>=0;i--)if(void 0!==this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[i].StaffEntries[e])return this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[i].StaffEntries[e]}},{key:"getFirstRightNotNullStaffEntryFromContainer",value:function(t,e,n){if(void 0!==this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[t].StaffEntries[e])return this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[t].StaffEntries[e];for(var i=t+1;i<this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers.length;i++)if(void 0!==this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[i].StaffEntries[e])return this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[i].StaffEntries[e]}},{key:"calculateWordRepetitionInstructions",value:function(){for(var t=0;t<this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length;t++){for(var e=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[t],n=0,i=e.FirstRepetitionInstructions.length;n<i;++n)this.calculateWordRepetitionInstruction(e.FirstRepetitionInstructions[n],t);for(var r=0,o=e.LastRepetitionInstructions.length;r<o;++r)this.calculateWordRepetitionInstruction(e.LastRepetitionInstructions[r],t)}}},{key:"calculateRepetitionEndings",value:function(){for(var t=this.graphicalMusicSheet.ParentMusicSheet,e=0,n=t.Repetitions.length;e<n;++e)this.calcGraphicalRepetitionEndingsRecursively(t.Repetitions[e])}},{key:"calculateTempoExpressions",value:function(){for(var t=Math.min(this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length-1,this.rules.MaxMeasureToDrawIndex),e=this.rules.MinMeasureToDrawIndex;e<=t;e++)for(var n=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[e],i=0;i<n.TempoExpressions.length;i++)this.calculateTempoExpressionsForMultiTempoExpression(n,n.TempoExpressions[i],e)}},{key:"calculateMoodAndUnknownExpressions",value:function(){for(var t=0;t<this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length;t++)for(var e=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[t],n=0;n<e.StaffLinkedExpressions.length;n++)if(this.graphicalMusicSheet.MeasureList[t][n].ParentStaff.ParentInstrument.Visible)for(var i=0;i<e.StaffLinkedExpressions[n].length;i++)(e.StaffLinkedExpressions[n][i].MoodList.length>0||e.StaffLinkedExpressions[n][i].UnknownList.length>0)&&this.calculateMoodAndUnknownExpression(e.StaffLinkedExpressions[n][i],t,n)}},{key:"calculateStemDirectionFromVoices",value:function(t){if(void 0!==t.ParentSourceStaffEntry.Link)return t===t.ParentSourceStaffEntry.VoiceEntries[0]?void(t.WantedStemDirection=l.StemDirectionType.Up):void(t.WantedStemDirection=l.StemDirectionType.Down);t.ParentVoice instanceof y.LinkedVoice?t.WantedStemDirection=l.StemDirectionType.Down:t.ParentSourceStaffEntry.VoiceEntries.length>1&&(t.WantedStemDirection=l.StemDirectionType.Up)}},{key:"setBeamNotesWantedStemDirections",value:function(t){if(t.WantedStemDirection===l.StemDirectionType.Undefined&&t.Notes.length>0){var e=t.Notes[0].NoteBeam;if(void 0!==e){var n,i=u(e.Notes);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.ParentVoiceEntry!==t&&r.ParentVoiceEntry.WantedStemDirection!==l.StemDirectionType.Undefined){t.WantedStemDirection=r.ParentVoiceEntry.WantedStemDirection;break}}}catch(o){i.e(o)}finally{i.f()}}}}},{key:"leadSheet",get:function(){return this.graphicalMusicSheet.LeadSheet}}],[{key:"setMeasuresMinStaffEntriesWidth",value:function(t,e){for(var n=0,i=t.length;n<i;++n)t[n].minimumStaffEntriesWidth=e}},{key:"TextMeasurer",get:function(){return t.textMeasurer},set:function(e){t.textMeasurer=e}}]),t}();e.MusicSheetCalculator=R},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(24);e.GraphicalLine=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.OutlineAndFillStyleEnum.BaseWritingColor;h(this,t),this.start=e,this.end=n,this.width=r,this.styleId=o}return d(t,[{key:"Start",get:function(){return this.start},set:function(t){this.start=t}},{key:"End",get:function(){return this.end},set:function(t){this.end=t}},{key:"Width",get:function(){return this.width},set:function(t){this.width=t}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(104);!function(t){t[t.BaseWritingColor=0]="BaseWritingColor",t[t.FollowingCursor=1]="FollowingCursor",t[t.AlternativeFollowingCursor=2]="AlternativeFollowingCursor",t[t.PlaybackCursor=3]="PlaybackCursor",t[t.Highlighted=4]="Highlighted",t[t.ErrorUnderlay=5]="ErrorUnderlay",t[t.Selected=6]="Selected",t[t.SelectionSymbol=7]="SelectionSymbol",t[t.DebugColor1=8]="DebugColor1",t[t.DebugColor2=9]="DebugColor2",t[t.DebugColor3=10]="DebugColor3",t[t.SplitScreenDivision=11]="SplitScreenDivision",t[t.GreyTransparentOverlay=12]="GreyTransparentOverlay",t[t.MarkedArea1=13]="MarkedArea1",t[t.MarkedArea2=14]="MarkedArea2",t[t.MarkedArea3=15]="MarkedArea3",t[t.MarkedArea4=16]="MarkedArea4",t[t.MarkedArea5=17]="MarkedArea5",t[t.MarkedArea6=18]="MarkedArea6",t[t.MarkedArea7=19]="MarkedArea7",t[t.MarkedArea8=20]="MarkedArea8",t[t.MarkedArea9=21]="MarkedArea9",t[t.MarkedArea10=22]="MarkedArea10",t[t.Comment1=23]="Comment1",t[t.Comment2=24]="Comment2",t[t.Comment3=25]="Comment3",t[t.Comment4=26]="Comment4",t[t.Comment5=27]="Comment5",t[t.Comment6=28]="Comment6",t[t.Comment7=29]="Comment7",t[t.Comment8=30]="Comment8",t[t.Comment9=31]="Comment9",t[t.Comment10=32]="Comment10"}(i=e.OutlineAndFillStyleEnum||(e.OutlineAndFillStyleEnum={})),e.OUTLINE_AND_FILL_STYLE_DICT=new r.Dictionary,e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.BaseWritingColor,"Thistle"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.FollowingCursor,"Aqua"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.AlternativeFollowingCursor,"Azure"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.PlaybackCursor,"Bisque"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.Highlighted,"CadetBlue"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.ErrorUnderlay,"DarkBlue"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.Selected,"DarkGoldenRod"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.SelectionSymbol,"BlanchedAlmond"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.DebugColor1,"Chartreuse"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.DebugColor2,"DarkGreen"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.DebugColor3,"DarkOrange"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.SplitScreenDivision,"FireBrick"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.GreyTransparentOverlay,"DarkSalmon"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.MarkedArea1,"DarkSeaGreen"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.MarkedArea2,"DarkOrchid"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.MarkedArea3,"Aquamarine"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.MarkedArea4,"DarkKhaki"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.MarkedArea5,"ForestGreen"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.MarkedArea6,"AliceBlue"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.MarkedArea7,"DeepPink"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.MarkedArea8,"Coral"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.MarkedArea9,"DarkOliveGreen"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.MarkedArea10,"Chocolate"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.Comment1,"DodgerBlue"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.Comment2,"Blue"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.Comment3,"Beige"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.Comment4,"Crimson"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.Comment5,"Fuchsia"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.Comment6,"Brown"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.Comment7,"BlanchedAlmond"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.Comment8,"CornflowerBlue"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.Comment9,"Cornsilk"),e.OUTLINE_AND_FILL_STYLE_DICT.setValue(i.Comment10,"DarkGrey"),function(t){t[t.MarkedArea=0]="MarkedArea",t[t.Comment=1]="Comment"}(e.StyleSets||(e.StyleSets={})),function(t){t[t.Background=0]="Background",t[t.Highlight=1]="Highlight",t[t.MeasureError=2]="MeasureError",t[t.SelectionSymbol=3]="SelectionSymbol",t[t.Cursor=4]="Cursor",t[t.PSI_Debug=5]="PSI_Debug",t[t.Notes=6]="Notes",t[t.Comment=7]="Comment",t[t.Debug_above=8]="Debug_above"}(e.GraphicalLayers||(e.GraphicalLayers={})),function(t){t[t.Normal=0]="Normal",t[t.Selected=1]="Selected",t[t.Follow_Confirmed=2]="Follow_Confirmed",t[t.QFeedback_NotFound=3]="QFeedback_NotFound",t[t.QFeedback_OK=4]="QFeedback_OK",t[t.QFeedback_Perfect=5]="QFeedback_Perfect",t[t.Debug1=6]="Debug1",t[t.Debug2=7]="Debug2",t[t.Debug3=8]="Debug3"}(e.NoteState||(e.NoteState={})),function(t){t.C="#d82c6b",t.D="#F89D15",t.E="#FFE21A",t.F="#4dbd5c",t.G="#009D96",t.A="#43469d",t.B="#76429c",t.Rest="#000000"}(e.AutoColorSet||(e.AutoColorSet={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(8),a=i(4),u=i(111),l=i(22);e.GraphicalLabel=function(t){n(i,t);var e=r(i);function i(t,n,r,o,u){var l;return h(this,i),(l=e.call(this)).label=t,l.boundingBox=new a.BoundingBox(s(l),u),l.label.fontHeight=n,l.label.textAlignment=r,l.rules=o,l}return d(i,[{key:"toString",value:function(){return"".concat(this.label.text," (").concat(this.boundingBox.RelativePosition.x,",").concat(this.boundingBox.RelativePosition.y,")")}},{key:"setLabelPositionAndShapeBorders",value:function(){var t,e;if(""!==this.Label.text.trim()){var n=null!==(e=null===(t=this.rules)||void 0===t?void 0:t.LabelMarginBorderFactor)&&void 0!==e?e:.1,i=l.MusicSheetCalculator.TextMeasurer.computeTextWidthToHeightRatio(this.Label.text,this.Label.font,this.Label.fontStyle),r=this.Label.fontHeight,s=r*i,a=this.PositionAndShape;switch(this.Label.textAlignment){case o.TextAlignmentEnum.CenterBottom:a.BorderTop=-r,a.BorderLeft=-s/2,a.BorderBottom=0,a.BorderRight=s/2;break;case o.TextAlignmentEnum.CenterCenter:a.BorderTop=-r/2,a.BorderLeft=-s/2,a.BorderBottom=r/2,a.BorderRight=s/2;break;case o.TextAlignmentEnum.CenterTop:a.BorderTop=0,a.BorderLeft=-s/2,a.BorderBottom=r,a.BorderRight=s/2;break;case o.TextAlignmentEnum.LeftBottom:a.BorderTop=-r,a.BorderLeft=0,a.BorderBottom=0,a.BorderRight=s;break;case o.TextAlignmentEnum.LeftCenter:a.BorderTop=-r/2,a.BorderLeft=0,a.BorderBottom=r/2,a.BorderRight=s;break;case o.TextAlignmentEnum.LeftTop:a.BorderTop=0,a.BorderLeft=0,a.BorderBottom=r,a.BorderRight=s;break;case o.TextAlignmentEnum.RightBottom:a.BorderTop=-r,a.BorderLeft=-s,a.BorderBottom=0,a.BorderRight=0;break;case o.TextAlignmentEnum.RightCenter:a.BorderTop=-r/2,a.BorderLeft=-s,a.BorderBottom=r/2,a.BorderRight=0;break;case o.TextAlignmentEnum.RightTop:a.BorderTop=0,a.BorderLeft=-s,a.BorderBottom=r,a.BorderRight=0}a.BorderMarginTop=a.BorderTop-r*n,a.BorderMarginLeft=a.BorderLeft-r*n,a.BorderMarginBottom=a.BorderBottom+r*n,a.BorderMarginRight=a.BorderRight+r*n}}},{key:"Label",get:function(){return this.label}}]),i}(u.Clickable)},function(t,e,n){"use strict";(function(t){if(e.base64=!0,e.array=!0,e.string=!0,e.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,e.nodebuffer=void 0!==t,e.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)e.blob=!1;else{var i=new ArrayBuffer(0);try{e.blob=0===new Blob([i],{type:"application/zip"}).size}catch(t){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(i),e.blob=0===r.getBlob("application/zip").size}catch(t){e.blob=!1}}}try{e.nodestream=!!n(167).Readable}catch(t){e.nodestream=!1}}).call(this,n(21).Buffer)},function(t,e,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)r(n,i)&&(t[i]=n[i])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var o={arraySet:function(t,e,n,i,r){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+i),r);else for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){var e,n,i,r,o,s;for(i=0,e=0,n=t.length;e<n;e++)i+=t[e].length;for(s=new Uint8Array(i),r=0,e=0,n=t.length;e<n;e++)s.set(o=t[e],r),r+=o.length;return s}},s={arraySet:function(t,e,n,i,r){for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,o)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,s))},e.setTyped(i)},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Array.prototype.last||(Array.prototype.last=function(){return this[this.length-1]}),Array.prototype.clear||(Array.prototype.clear=function(){this.length=0}),Array.prototype.contains||(Array.prototype.contains=function(t){return-1!==this.indexOf(t)}),e.CollectionUtil=function(){function t(){h(this,t)}return d(t,null,[{key:"contains2",value:function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1}},{key:"last",value:function(t){return t[t.length-1]}},{key:"removeDictElementIfTrue",value:function(t,e,n){var i=[];e.forEach((function(e,r){n(t,e,r)&&i.push(e)}));for(var r=0;r<i.length;r++)e.remove(i[r])}},{key:"getLastElement",value:function(t){return t[t.length-1]}},{key:"binarySearch",value:function(t,e,n){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.length-1,o=1;i<r;){var s=n(t[o=Math.floor((i+r)/2)],e);if(0===s)return o;s<0&&(i=o+1),0<s&&(r=o)}return-o}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(9),o=n(15),s=n(18);e.SourceStaffEntry=function(){function t(e,n){h(this,t),this.voiceEntries=[],this.instructions=[],this.chordSymbolContainers=[],this.verticalContainerParent=e,this.parentStaff=n}return d(t,[{key:"removeAllInstructionsOfTypeClefInstruction",value:function(){for(var t=0,e=0;t<this.instructions.length;)this.instructions[t]instanceof r.ClefInstruction?(this.instructions.splice(t,1),e++):t++;return e}},{key:"removeFirstInstructionOfTypeClefInstruction",value:function(){for(var t=0;t<this.instructions.length;t++)if(this.instructions[t]instanceof r.ClefInstruction)return this.instructions.splice(t,1),!0;return!1}},{key:"removeAllInstructionsOfTypeKeyInstruction",value:function(){for(var t=0,e=0;t<this.instructions.length;)this.instructions[t]instanceof o.KeyInstruction?(this.instructions.splice(t,1),e++):t++;return e}},{key:"removeFirstInstructionOfTypeKeyInstruction",value:function(){for(var t=0;t<this.instructions.length;t++)if(this.instructions[t]instanceof o.KeyInstruction)return this.instructions.splice(t,1),!0;return!1}},{key:"removeAllInstructionsOfTypeRhythmInstruction",value:function(){for(var t=0,e=0;t<this.instructions.length;)this.instructions[t]instanceof s.RhythmInstruction?(this.instructions.splice(t,1),e++):t++;return e}},{key:"removeFirstInstructionOfTypeRhythmInstruction",value:function(){for(var t=0;t<this.instructions.length;t++)if(this.instructions[t]instanceof s.RhythmInstruction)return this.instructions.splice(t,1),!0;return!1}},{key:"calculateMinNoteLength",value:function(){for(var t=new i.Fraction(Number.MAX_VALUE,1),e=0,n=this.VoiceEntries.length;e<n;++e)for(var r=this.VoiceEntries[e],o=0,s=r.Notes.length;o<s;++o){var a=r.Notes[o];a.Length.lt(t)&&(t=a.Length)}return t}},{key:"calculateMaxNoteLength",value:function(){for(var t=new i.Fraction(0,1),e=0,n=this.VoiceEntries.length;e<n;++e)for(var r=this.VoiceEntries[e],o=0,s=r.Notes.length;o<s;++o){var a=r.Notes[o];if(void 0!==a.NoteTie){var l,c=i.Fraction.createFromFraction(a.Length),h=!1,f=u(a.NoteTie.Notes);try{for(f.s();!(l=f.n()).done;){var d=l.value;d!==a?h&&c.Add(d.Length):h=!0}}catch(p){f.e(p)}finally{f.f()}t.lt(c)&&(t=c)}else t.lt(a.Length)&&(t=a.Length)}return t}},{key:"hasNotes",value:function(){for(var t=0,e=this.VoiceEntries.length;t<e;++t)if(this.VoiceEntries[t].Notes.length>0)return!0;return!1}},{key:"hasTie",value:function(){for(var t=0,e=this.VoiceEntries.length;t<e;++t)if(this.VoiceEntries[t].hasTie())return!0;return!1}},{key:"findLinkedNotes",value:function(t){for(var e=0,n=this.voiceEntries.length;e<n;++e)for(var i=this.voiceEntries[e],r=0,o=i.Notes.length;r<o;++r){var s=i.Notes[r];s.ParentStaffEntry===this&&t.push(s)}}},{key:"ParentStaff",get:function(){return this.parentStaff}},{key:"VerticalContainerParent",get:function(){return this.verticalContainerParent}},{key:"Timestamp",get:function(){if(void 0!==this.VerticalContainerParent)return this.VerticalContainerParent.Timestamp}},{key:"AbsoluteTimestamp",get:function(){if(void 0!==this.VerticalContainerParent)return i.Fraction.plus(this.VerticalContainerParent.ParentMeasure.AbsoluteTimestamp,this.VerticalContainerParent.Timestamp)}},{key:"VoiceEntries",get:function(){return this.voiceEntries},set:function(t){this.voiceEntries=t}},{key:"Link",get:function(){return this.staffEntryLink},set:function(t){this.staffEntryLink=t}},{key:"Instructions",get:function(){return this.instructions},set:function(t){this.instructions=t}},{key:"ChordContainers",get:function(){return this.chordSymbolContainers},set:function(t){this.chordSymbolContainers=t}}]),t}()},function(t,e,n){"use strict";var i,r;Object.defineProperty(e,"__esModule",{value:!0}),e.RepetitionInstructionComparer=function(){function t(){h(this,t)}return d(t,null,[{key:"Compare",value:function(t,e){if(void 0!==t.parentRepetition&&void 0!==e.parentRepetition){if(t.alignment===r.End&&e.alignment===r.End){if(t.parentRepetition.StartIndex<e.parentRepetition.StartIndex)return 1;if(t.parentRepetition.StartIndex>e.parentRepetition.StartIndex)return-1}if(t.alignment===r.Begin&&e.alignment===r.Begin){if(t.parentRepetition.EndIndex<e.parentRepetition.EndIndex)return 1;if(t.parentRepetition.EndIndex>e.parentRepetition.EndIndex)return-1}}return 0}}]),t}(),e.RepetitionInstruction=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.End,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;h(this,t),this.endingIndices=void 0,this.measureIndex=e,void 0!==s&&(this.endingIndices=s.slice()),this.type=n,this.alignment=i,this.parentRepetition=o}return d(t,[{key:"CompareTo",value:function(t){var e=t;if(this.measureIndex>e.measureIndex)return 1;if(this.measureIndex<e.measureIndex)return-1;if(this.alignment===r.Begin){if(e.alignment===r.End)return-1;switch(this.type){case i.Ending:return 1;case i.StartLine:return e.type===i.Ending?-1:1;case i.Coda:case i.Segno:return e.type===i.Coda?1:-1}}else{if(e.alignment===r.Begin)return 1;switch(this.type){case i.Ending:return-1;case i.Fine:case i.ToCoda:return e.type===i.Ending?1:-1;case i.ForwardJump:switch(e.type){case i.Ending:case i.Fine:case i.ToCoda:return 1}return-1;case i.DalSegnoAlFine:case i.DaCapoAlFine:case i.DalSegnoAlCoda:case i.DaCapoAlCoda:case i.DaCapo:case i.DalSegno:case i.BackJumpLine:return 1}}return 0}},{key:"equals",value:function(t){if(this.measureIndex!==t.measureIndex||this.type!==t.type||this.alignment!==t.alignment)return!1;if(this.endingIndices===t.endingIndices)return!0;if(void 0===this.endingIndices||void 0===t.endingIndices||this.endingIndices.length!==t.endingIndices.length)return!1;for(var e=0;e<this.endingIndices.length;e++)if(this.endingIndices[e]!==t.endingIndices[e])return!1;return!0}}]),t}(),function(t){t[t.StartLine=0]="StartLine",t[t.ForwardJump=1]="ForwardJump",t[t.BackJumpLine=2]="BackJumpLine",t[t.Ending=3]="Ending",t[t.DaCapo=4]="DaCapo",t[t.DalSegno=5]="DalSegno",t[t.Fine=6]="Fine",t[t.ToCoda=7]="ToCoda",t[t.DalSegnoAlFine=8]="DalSegnoAlFine",t[t.DaCapoAlFine=9]="DaCapoAlFine",t[t.DalSegnoAlCoda=10]="DalSegnoAlCoda",t[t.DaCapoAlCoda=11]="DaCapoAlCoda",t[t.Coda=12]="Coda",t[t.Segno=13]="Segno",t[t.None=14]="None"}(i=e.RepetitionInstructionEnum||(e.RepetitionInstructionEnum={})),function(t){t[t.Begin=0]="Begin",t[t.End=1]="End"}(r=e.AlignmentType||(e.AlignmentType={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ITextTranslation=function(){function t(){h(this,t)}return d(t,null,[{key:"translateText",value:function(t,e){if(void 0===this.defaultTextTranslation)return e}}]),t}()},function(t,e,n){"use strict";var i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=h;var r=n(91),o=n(48);o.inherits=n(40);var s=n(168),a=n(92);o.inherits(h,s);for(var u=i(a.prototype),l=0;l<u.length;l++){var c=u[l];h.prototype[c]||(h.prototype[c]=a.prototype[c])}function h(t){if(!(this instanceof h))return new h(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r(d,this)}function d(t){t.end()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(42),o=n(7);!function(t){t[t.XML=0]="XML",t[t.AutoColoring=1]="AutoColoring",t[t.CustomColorSet=2]="CustomColorSet"}(e.ColoringModes||(e.ColoringModes={})),function(t){t.allon="allon",t.compact="compact",t.compacttight="compacttight",t.default="default",t.leadsheet="leadsheet",t.preview="preview",t.thumbnail="thumbnail"}(i=e.DrawingParametersEnum||(e.DrawingParametersEnum={})),e.DrawingParameters=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default;h(this,t),this.rules=new r.EngravingRules,this.drawTitle=!0,this.drawSubtitle=!0,this.drawLyricist=!0,this.drawComposer=!0,this.drawCredits=!0,this.drawPartNames=!0,this.fingeringPosition=o.PlacementEnum.Left,this.drawHiddenNotes=!1,this.DrawingParametersEnum=e}return d(t,[{key:"setForAllOn",value:function(){this.drawHighlights=!0,this.drawErrors=!0,this.drawSelectionStartSymbol=!0,this.drawSelectionEndSymbol=!0,this.drawCursors=!0,this.drawActivitySymbols=!0,this.drawScrollIndicator=!0,this.drawComments=!0,this.drawMarkedAreas=!0,this.DrawTitle=!0,this.DrawSubtitle=!0,this.DrawComposer=!0,this.DrawLyricist=!0,this.drawCredits=!0,this.DrawPartNames=!0,this.drawHiddenNotes=!0,this.rules.CompactMode=!1}},{key:"setForDefault",value:function(){this.setForAllOn(),this.drawHiddenNotes=!1}},{key:"setForThumbnail",value:function(){this.drawHighlights=!1,this.drawErrors=!1,this.drawSelectionStartSymbol=!1,this.drawSelectionStartSymbol=!1,this.drawCursors=!1,this.drawActivitySymbols=!1,this.drawScrollIndicator=!1,this.drawComments=!0,this.drawMarkedAreas=!0,this.drawHiddenNotes=!1}},{key:"setForCompactMode",value:function(){this.setForDefault(),this.rules.CompactMode=!0,this.DrawCredits=!1,this.drawHiddenNotes=!1}},{key:"setForCompactTightMode",value:function(){this.rules.CompactMode=!0,this.DrawCredits=!1,this.DrawPartNames=!1,this.drawHiddenNotes=!1}},{key:"setForLeadsheet",value:function(){this.drawHighlights=!1,this.drawErrors=!1,this.drawSelectionStartSymbol=!0,this.drawSelectionEndSymbol=!0,this.drawCursors=!0,this.drawActivitySymbols=!1,this.drawScrollIndicator=!0,this.drawComments=!0,this.drawMarkedAreas=!0}},{key:"DrawingParametersEnum",set:function(t){switch(this.drawingParametersEnum=t,t){case i.allon:this.setForAllOn();break;case i.thumbnail:this.setForThumbnail();break;case i.leadsheet:this.setForLeadsheet();break;case i.compact:this.setForCompactMode();break;case i.compacttight:this.setForCompactTightMode();break;case i.default:default:this.setForDefault()}},get:function(){return this.drawingParametersEnum}},{key:"DrawCredits",get:function(){return this.drawCredits},set:function(t){this.drawCredits=t,this.DrawComposer=t,this.DrawTitle=t,this.DrawSubtitle=t,this.DrawLyricist=t}},{key:"DrawTitle",get:function(){return this.drawTitle},set:function(t){this.drawTitle=t,this.rules.RenderTitle=t,t||(this.DrawSubtitle=!1)}},{key:"DrawSubtitle",get:function(){return this.drawSubtitle},set:function(t){this.drawSubtitle=t,this.rules.RenderSubtitle=t,t&&(this.DrawTitle=!0)}},{key:"DrawComposer",get:function(){return this.drawComposer},set:function(t){this.drawComposer=t,this.rules.RenderComposer=t}},{key:"DrawLyricist",get:function(){return this.drawLyricist},set:function(t){this.drawLyricist=t,this.rules.RenderLyricist=t}},{key:"DrawPartNames",get:function(){return this.drawPartNames},set:function(t){this.drawPartNames=t,this.rules.RenderPartNames=t}},{key:"FingeringPosition",get:function(){return this.fingeringPosition},set:function(t){this.fingeringPosition=t,this.rules.FingeringPosition=t}},{key:"Rules",get:function(){return this.rules},set:function(t){this.rules=t}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.Note=function(){function t(e,n,i,r){h(this,t),this.slurs=[],this.playbackInstrumentId=void 0,this.notehead=void 0,this.printObject=!0,this.voiceEntry=e,this.parentStaffEntry=n,this.length=i,this.pitch=r,this.halfTone=void 0!==r?r.getHalfTone():0}return d(t,[{key:"isRest",value:function(){return void 0===this.Pitch}},{key:"isWholeRest",value:function(){return this.isRest()&&this.Length.RealValue===this.ParentStaffEntry.VerticalContainerParent.ParentMeasure.ActiveTimeSignature.RealValue}},{key:"ToString",value:function(){return void 0!==this.pitch?this.Pitch.ToString()+", length: "+this.length.toString():"rest note, length: "+this.length.toString()}},{key:"getAbsoluteTimestamp",value:function(){return i.Fraction.plus(this.voiceEntry.Timestamp,this.parentStaffEntry.VerticalContainerParent.ParentMeasure.AbsoluteTimestamp)}},{key:"checkForDoubleSlur",value:function(t){for(var e=0,n=this.slurs.length;e<n;++e){var i=this.slurs[e];if(void 0!==i.StartNote&&void 0!==i.EndNote&&void 0!==t.StartNote&&t.StartNote===i.StartNote&&i.EndNote===this)return!0}return!1}},{key:"ParentVoiceEntry",get:function(){return this.voiceEntry},set:function(t){this.voiceEntry=t}},{key:"ParentStaffEntry",get:function(){return this.parentStaffEntry}},{key:"ParentStaff",get:function(){return this.parentStaffEntry.ParentStaff}},{key:"Length",get:function(){return this.length},set:function(t){this.length=t}},{key:"TypeLength",get:function(){return this.typeLength},set:function(t){this.typeLength=t}},{key:"NoteTypeXml",get:function(){return this.noteTypeXml},set:function(t){this.noteTypeXml=t}},{key:"NormalNotes",get:function(){return this.normalNotes},set:function(t){this.normalNotes=t}},{key:"Pitch",get:function(){return this.pitch}},{key:"NoteBeam",get:function(){return this.beam},set:function(t){this.beam=t}},{key:"Notehead",set:function(t){this.notehead=t},get:function(){return this.notehead}},{key:"NoteTuplet",get:function(){return this.tuplet},set:function(t){this.tuplet=t}},{key:"NoteTie",get:function(){return this.tie},set:function(t){this.tie=t}},{key:"NoteSlurs",get:function(){return this.slurs},set:function(t){this.slurs=t}},{key:"PlaybackInstrumentId",get:function(){return this.playbackInstrumentId},set:function(t){this.playbackInstrumentId=t}},{key:"PrintObject",get:function(){return this.printObject},set:function(t){this.printObject=t}},{key:"Arpeggio",get:function(){return this.arpeggio},set:function(t){this.arpeggio=t}},{key:"IsCueNote",get:function(){return this.isCueNote},set:function(t){this.isCueNote=t}},{key:"StemDirectionXml",get:function(){return this.stemDirectionXml},set:function(t){this.stemDirectionXml=t}},{key:"TremoloStrokes",get:function(){return this.tremoloStrokes},set:function(t){this.tremoloStrokes=t}},{key:"StemColorXml",get:function(){return this.stemColorXml},set:function(t){this.stemColorXml=t}},{key:"NoteheadColorXml",get:function(){return this.noteheadColorXml},set:function(t){this.noteheadColorXml=t}},{key:"NoteheadColor",get:function(){return this.noteheadColor},set:function(t){this.noteheadColor=t}},{key:"NoteheadColorCurrentlyRendered",get:function(){return this.noteheadColorCurrentlyRendered},set:function(t){this.noteheadColorCurrentlyRendered=t}}]),t}(),function(t){t[t.Normal=0]="Normal",t[t.Grace=1]="Grace",t[t.Cue=2]="Cue"}(e.Appearance||(e.Appearance={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(2);e.OctaveShift=function(){function t(e,n){h(this,t),this.setOctaveShiftValue(e,n)}return d(t,[{key:"setOctaveShiftValue",value:function(t,e){this.octaveValue=1===e&&"down"===t?i.VA8:1===e&&"up"===t?i.VB8:2===e&&"down"===t?i.MA15:2===e&&"up"===t?i.MB15:i.NONE}},{key:"Type",get:function(){return this.octaveValue},set:function(t){this.octaveValue=t}},{key:"StaffNumber",get:function(){return this.staffNumber},set:function(t){this.staffNumber=t}},{key:"ParentStartMultiExpression",get:function(){return this.startMultiExpression},set:function(t){this.startMultiExpression=t}},{key:"ParentEndMultiExpression",get:function(){return this.endMultiExpression},set:function(t){this.endMultiExpression=t}}],[{key:"getPitchFromOctaveShift",value:function(t,e){var n=t.Octave;switch(e){case i.VA8:n-=1;break;case i.VB8:n+=1;break;case i.MA15:n-=2;break;case i.MB15:n+=2;break;case i.NONE:default:n+=0}return new r.Pitch(t.FundamentalNote,n,t.Accidental)}}]),t}(),function(t){t[t.VA8=0]="VA8",t[t.VB8=1]="VB8",t[t.MA15=2]="MA15",t[t.MB15=3]="MB15",t[t.NONE=4]="NONE"}(i=e.OctaveEnum||(e.OctaveEnum={}))},function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.SingleThin=0]="SingleThin",t[t.DoubleThin=1]="DoubleThin",t[t.ThinBold=2]="ThinBold",t[t.BoldThinDots=3]="BoldThinDots",t[t.DotsThinBold=4]="DotsThinBold",t[t.DotsBoldBoldDots=5]="DotsBoldBoldDots",t[t.None=6]="None",t[t.Dotted=7]="Dotted",t[t.Dashed=8]="Dashed",t[t.Bold=9]="Bold",t[t.BoldThin=10]="BoldThin",t[t.DoubleBold=11]="DoubleBold",t[t.Tick=12]="Tick",t[t.Short=13]="Short"}(i=e.SystemLinesEnum||(e.SystemLinesEnum={})),e.SystemLinesEnumHelper=function(){function t(){h(this,t)}return d(t,null,[{key:"xmlBarlineStyleToSystemLinesEnum",value:function(t){return"regular"===t?i.SingleThin:"dotted"===t?i.Dotted:"dashed"===t?i.Dashed:"heavy"===t?i.Bold:"light-light"===t?i.DoubleThin:"light-heavy"===t?i.ThinBold:"heavy-light"===t?i.BoldThin:"heavy-heavy"===t?i.DoubleBold:"tick"===t?i.Tick:"short"===t?i.Short:"none"===t?i.None:i.SingleThin}}]),t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(7),a=i(0),u=function(t){n(i,t);var e=r(i);function i(t,n,r){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return h(this,i),(o=e.call(this,n)).dynamicType=t,o.label=s,o.staffNumber=r,o.startVolume=-1,o.endVolume=-1,""!==s&&o.setType(),o}return d(i,[{key:"getInterpolatedDynamic",value:function(t){var e,n=this.StartMultiExpression.AbsoluteTimestamp;if(e=void 0!==this.EndMultiExpression?this.EndMultiExpression.AbsoluteTimestamp:a.Fraction.plus(this.startMultiExpression.SourceMeasureParent.AbsoluteTimestamp,this.startMultiExpression.SourceMeasureParent.Duration),t.lt(n))return-1;if(e.lt(t))return-2;var i=a.Fraction.minus(t,n).RealValue/a.Fraction.minus(e,n).RealValue;return Math.max(0,Math.min(99.9,this.startVolume+(this.endVolume-this.startVolume)*i))}},{key:"isWedge",value:function(){return void 0===this.label}},{key:"setType",value:function(){i.isStringInStringList(i.listContinuousDynamicIncreasing,this.label)?this.dynamicType=o.crescendo:i.isStringInStringList(i.listContinuousDynamicDecreasing,this.label)&&(this.dynamicType=o.diminuendo)}},{key:"DynamicType",get:function(){return this.dynamicType},set:function(t){this.dynamicType=t}},{key:"StartMultiExpression",get:function(){return this.startMultiExpression},set:function(t){this.startMultiExpression=t}},{key:"EndMultiExpression",get:function(){return this.endMultiExpression},set:function(t){this.endMultiExpression=t}},{key:"Placement",get:function(){return this.placement},set:function(t){this.placement=t}},{key:"StartVolume",get:function(){return this.startVolume},set:function(t){this.startVolume=t}},{key:"EndVolume",get:function(){return this.endVolume},set:function(t){this.endVolume=t}},{key:"StaffNumber",get:function(){return this.staffNumber},set:function(t){this.staffNumber=t}},{key:"Label",get:function(){return this.label},set:function(t){this.label=t,this.setType()}}],[{key:"isInputStringContinuousDynamic",value:function(t){return void 0!==t&&(i.isStringInStringList(i.listContinuousDynamicIncreasing,t)||i.isStringInStringList(i.listContinuousDynamicDecreasing,t))}}]),i}(s.AbstractExpression);e.ContinuousDynamicExpression=u,u.listContinuousDynamicIncreasing=["crescendo","cresc","cresc.","cres."],u.listContinuousDynamicDecreasing=["decrescendo","decresc","decr.","diminuendo","dim.","dim"],function(t){t[t.crescendo=0]="crescendo",t[t.diminuendo=1]="diminuendo"}(o=e.ContDynamicEnum||(e.ContDynamicEnum={}))},function(t,e,n){"use strict";for(var i=n(3),r=n(26),o=n(63),s=n(12),a=new Array(256),u=0;u<256;u++)a[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;function l(){s.call(this,"utf-8 decode"),this.leftOver=null}function c(){s.call(this,"utf-8 encode")}a[254]=a[254]=1,e.utf8encode=function(t){return r.nodebuffer?o.newBufferFrom(t,"utf-8"):function(t){var e,n,i,o,s,a=t.length,u=0;for(o=0;o<a;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),u+=n<128?1:n<2048?2:n<65536?3:4;for(e=r.uint8array?new Uint8Array(u):new Array(u),s=0,o=0;s<u;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|63&n):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|63&n):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|63&n);return e}(t)},e.utf8decode=function(t){return r.nodebuffer?i.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,n,r,o,s=t.length,u=new Array(2*s);for(n=0,e=0;e<s;)if((r=t[e++])<128)u[n++]=r;else if((o=a[r])>4)u[n++]=65533,e+=o-1;else{for(r&=2===o?31:3===o?15:7;o>1&&e<s;)r=r<<6|63&t[e++],o--;o>1?u[n++]=65533:r<65536?u[n++]=r:(u[n++]=55296|(r-=65536)>>10&1023,u[n++]=56320|1023&r)}return u.length!==n&&(u.subarray?u=u.subarray(0,n):u.length=n),i.applyFromCharCode(u)}(t=i.transformTo(r.uint8array?"uint8array":"array",t))},i.inherits(l,s),l.prototype.processChunk=function(t){var n=i.transformTo(r.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var o=n;(n=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),n.set(o,this.leftOver.length)}else n=this.leftOver.concat(n);this.leftOver=null}var s=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+a[t[n]]>e?n:e}(n),u=n;s!==n.length&&(r.uint8array?(u=n.subarray(0,s),this.leftOver=n.subarray(s,n.length)):(u=n.slice(0,s),this.leftOver=n.slice(s,n.length))),this.push({data:e.utf8decode(u),meta:t.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:e.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},e.Utf8DecodeWorker=l,i.inherits(c,s),c.prototype.processChunk=function(t){this.push({data:e.utf8encode(t.data),meta:t.meta})},e.Utf8EncodeWorker=c},function(t,e){t.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var u,l=[],c=!1,h=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&d())}function d(){if(!c){var t=a(f);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new p(t,e)),1!==l.length||c||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(52),r=n(1),o=n(8),s=n(7),a=n(51),u=n(34),l=function(){function e(){h(this,e),this.noteDistances=[1,1,1.3,1.6,2,2.5,3,4],this.noteDistancesScalingFactors=[1,2,4,8,16,32,64,128],this.durationDistanceDict={},this.durationScalingDistanceDict={},this.samplingUnit=3*e.unit,this.sheetTitleHeight=4,this.sheetSubtitleHeight=2,this.sheetMinimumDistanceBetweenTitleAndSubtitle=1,this.sheetComposerHeight=2,this.sheetAuthorHeight=2,this.compactMode=!1,this.pagePlacementEnum=i.PagePlacementEnum.Down,this.pageHeight=100001,this.pageTopMargin=5,this.pageTopMarginNarrow=0,this.pageBottomMargin=5,this.pageLeftMargin=5,this.pageRightMargin=5,this.titleTopDistance=9,this.titleBottomDistance=1,this.staffDistance=7,this.betweenStaffDistance=5,this.staffHeight=4,this.tabStaffHeight=6.67,this.betweenStaffLinesDistance=e.unit,this.systemLeftMargin=0,this.systemRightMargin=0,this.firstSystemMargin=15,this.systemLabelsRightMargin=2,this.systemComposerDistance=2,this.instrumentLabelTextHeight=2,this.minimumDistanceBetweenSystems=4,this.lastSystemMaxScalingFactor=1.4,this.autoBeamNotes=!1,this.autoBeamOptions={beam_middle_rests_only:!1,beam_rests:!1,maintain_stem_directions:!1},this.beamWidth=e.unit/2,this.beamSpaceWidth=e.unit/3,this.beamForwardLength=1.25*e.unit,this.clefLeftMargin=.5,this.clefRightMargin=.75,this.betweenKeySymbolsDistance=.2,this.keyRightMargin=.75,this.rhythmRightMargin=1.25,this.inStaffClefScalingFactor=.8,this.distanceBetweenNaturalAndSymbolWhenCancelling=.4,this.noteHelperLinesOffset=.25,this.measureLeftMargin=.7,this.measureRightMargin=0,this.distanceBetweenLastInstructionAndRepetitionBarline=1,this.arpeggioDistance=.6,this.staccatoShorteningFactor=2,this.idealStemLength=3,this.stemNoteHeadBorderYOffset=.2,this.stemWidth=.13,this.stemMargin=.2,this.stemMinLength=2.5,this.stemMaxLength=4.5,this.beamSlopeMaxAngle=10,this.stemMinAllowedDistanceBetweenNoteHeadAndBeamLine=1,this.setWantedStemDirectionByXml=!0,this.graceNoteScalingFactor=.6,this.graceNoteXOffset=.2,this.wedgeOpeningLength=1.2,this.wedgeMeasureEndOpeningLength=.75,this.wedgeMeasureBeginOpeningLength=.75,this.wedgePlacementAboveY=-1.5,this.wedgePlacementBelowY=1.5,this.wedgeHorizontalMargin=.6,this.wedgeVerticalMargin=.5,this.distanceOffsetBetweenTwoHorizontallyCrossedWedges=.3,this.wedgeMinLength=2,this.distanceBetweenAdjacentDynamics=.75,this.tempoChangeMeasureValidity=4,this.tempoContinousFactor=.7,this.staccatoScalingFactor=.8,this.betweenDotsDistance=.8,this.ornamentAccidentalScalingFactor=.65,this.chordSymbolTextHeight=2,this.chordSymbolXSpacing=1,this.chordSymbolYOffset=2,this.fingeringLabelFontHeight=1.7,this.measureNumberLabelHeight=1.5*e.unit,this.measureNumberLabelOffset=2,this.tupletsRatioed=!1,this.tupletsBracketed=!1,this.tripletsBracketed=!1,this.tupletNumberLabelHeight=1.5*e.unit,this.tupletNumberYOffset=.5,this.labelMarginBorderFactor=.1,this.tupletVerticalLineLength=.5,this.bezierCurveStepSize=1e3,this.calculateCurveParametersArrays(),this.tieGhostObjectWidth=.75,this.tieYPositionOffsetFactor=.3,this.minimumNeededXspaceForTieGhostObject=1,this.tieHeightMinimum=.28,this.tieHeightMaximum=1.2,this.tieHeightInterpolationK=.0288,this.tieHeightInterpolationD=.136,this.slurNoteHeadYOffset=.5,this.slurStemXOffset=.3,this.slurSlopeMaxAngle=15,this.slurTangentMinAngle=30,this.slurTangentMaxAngle=80,this.slursStartingAtSameStaffEntryYOffset=.8,this.repetitionEndingLabelHeight=2,this.repetitionEndingLabelXOffset=.5,this.repetitionEndingLabelYOffset=.3,this.repetitionEndingLineYLowerOffset=.5,this.repetitionEndingLineYUpperOffset=.3,this.lyricsAlignmentStandard=o.TextAlignmentEnum.LeftBottom,this.lyricsHeight=2,this.lyricsYOffsetToStaffHeight=3,this.verticalBetweenLyricsDistance=.5,this.horizontalBetweenLyricsDistance=.2,this.betweenSyllableMaximumDistance=10,this.betweenSyllableMinimumDistance=.5,this.lyricOverlapAllowedIntoNextMeasure=3.4,this.minimumDistanceBetweenDashes=10,this.instantaneousTempoTextHeight=2.3,this.continuousDynamicTextHeight=2.3,this.moodTextHeight=2.3,this.unknownTextHeight=2,this.continuousTempoTextHeight=2.3,this.dynamicExpressionMaxDistance=2,this.dynamicExpressionSpacer=.5,this.staffLineWidth=.12,this.ledgerLineWidth=.12,this.wedgeLineWidth=.12,this.tupletLineWidth=.12,this.lyricUnderscoreLineWidth=.12,this.systemThinLineWidth=.12,this.systemBoldLineWidth=e.unit/2,this.systemRepetitionEndingLineWidth=.12,this.systemDotWidth=e.unit/5,this.distanceBetweenVerticalSystemLines=.35,this.distanceBetweenDotAndLine=.7,this.octaveShiftLineWidth=.12,this.octaveShiftVerticalLineLength=e.unit,this.graceLineWidth=this.staffLineWidth*this.GraceNoteScalingFactor,this.minimumStaffLineDistance=1,this.minimumCrossedBeamDifferenceMargin=1e-4,this.displacedNoteMargin=.1,this.minNoteDistance=2,this.subMeasureXSpacingThreshold=35,this.measureDynamicsMaxScalingFactor=2.5,this.wholeRestXShiftVexflow=-2.5,this.metronomeMarkXShift=-6,this.metronomeMarkYShift=-.5,this.alignRests=a.AlignRestOption.Never,this.fillEmptyMeasuresWithWholeRest=a.FillEmptyMeasuresWithWholeRests.No,this.arpeggiosGoAcrossVoices=!1,this.renderArpeggios=!0,this.renderSlurs=!0,this.coloringMode=u.ColoringModes.XML,this.coloringEnabled=!0,this.colorStemsLikeNoteheads=!1,this.colorBeams=!0,this.colorFlags=!0,this.defaultColorNotehead="#000000",this.defaultColorRest=this.defaultColorNotehead,this.defaultColorStem=this.defaultColorNotehead,this.defaultColorLabel=this.defaultColorNotehead,this.defaultColorTitle=this.defaultColorNotehead,this.defaultFontFamily="Times New Roman",this.maxMeasureToDrawIndex=Number.MAX_VALUE,this.minMeasureToDrawIndex=0,this.renderComposer=!0,this.renderTitle=!0,this.renderSubtitle=!0,this.renderLyricist=!0,this.renderPartNames=!0,this.renderPartAbbreviations=!0,this.renderFingerings=!0,this.renderMeasureNumbers=!0,this.renderLyrics=!0,this.fingeringPosition=s.PlacementEnum.Left,this.fingeringInsideStafflines=!1,this.newSystemAtXMLNewSystemAttribute=!1,this.newPageAtXMLNewPageAttribute=!1,e.FixStafflineBoundingBox=!1,this.pageFormat=c.UndefinedPageFormat,this.pageBackgroundColor=void 0,this.renderSingleHorizontalStaffline=!1,this.populateDictionaries();try{this.maxInstructionsConstValue=this.ClefLeftMargin+this.ClefRightMargin+this.KeyRightMargin+this.RhythmRightMargin+11}catch(t){r.info("EngravingRules()",t)}}return d(e,[{key:"populateDictionaries",value:function(){for(var t=0;t<this.noteDistances.length;t++)switch(t){case 0:this.durationDistanceDict[.015625]=this.noteDistances[t],this.durationScalingDistanceDict[.015625]=this.noteDistancesScalingFactors[t];break;case 1:this.durationDistanceDict[.03125]=this.noteDistances[t],this.durationScalingDistanceDict[.03125]=this.noteDistancesScalingFactors[t];break;case 2:this.durationDistanceDict[.0625]=this.noteDistances[t],this.durationScalingDistanceDict[.0625]=this.noteDistancesScalingFactors[t];break;case 3:this.durationDistanceDict[.125]=this.noteDistances[t],this.durationScalingDistanceDict[.125]=this.noteDistancesScalingFactors[t];break;case 4:this.durationDistanceDict[.25]=this.noteDistances[t],this.durationScalingDistanceDict[.25]=this.noteDistancesScalingFactors[t];break;case 5:this.durationDistanceDict[.5]=this.noteDistances[t],this.durationScalingDistanceDict[.5]=this.noteDistancesScalingFactors[t];break;case 6:this.durationDistanceDict[1]=this.noteDistances[t],this.durationScalingDistanceDict[1]=this.noteDistancesScalingFactors[t];break;case 7:this.durationDistanceDict[2]=this.noteDistances[t],this.durationScalingDistanceDict[2]=this.noteDistancesScalingFactors[t]}}},{key:"calculateCurveParametersArrays",value:function(){this.tPower3=new Array(this.bezierCurveStepSize),this.oneMinusTPower3=new Array(this.bezierCurveStepSize),this.factorOne=new Array(this.bezierCurveStepSize),this.factorTwo=new Array(this.bezierCurveStepSize);for(var t=0;t<this.bezierCurveStepSize;t++){var e=t/this.bezierCurveStepSize;this.tPower3[t]=Math.pow(e,3),this.oneMinusTPower3[t]=Math.pow(1-e,3),this.factorOne[t]=3*Math.pow(1-e,2)*e,this.factorTwo[t]=3*(1-e)*Math.pow(e,2)}}},{key:"SamplingUnit",get:function(){return this.samplingUnit}},{key:"SheetTitleHeight",get:function(){return this.sheetTitleHeight},set:function(t){this.sheetTitleHeight=t}},{key:"SheetSubtitleHeight",get:function(){return this.sheetSubtitleHeight},set:function(t){this.sheetSubtitleHeight=t}},{key:"SheetMinimumDistanceBetweenTitleAndSubtitle",get:function(){return this.sheetMinimumDistanceBetweenTitleAndSubtitle},set:function(t){this.sheetMinimumDistanceBetweenTitleAndSubtitle=t}},{key:"SheetComposerHeight",get:function(){return this.sheetComposerHeight},set:function(t){this.sheetComposerHeight=t}},{key:"SheetAuthorHeight",get:function(){return this.sheetAuthorHeight},set:function(t){this.sheetAuthorHeight=t}},{key:"PagePlacement",get:function(){return this.pagePlacementEnum},set:function(t){this.pagePlacementEnum=t}},{key:"CompactMode",get:function(){return this.compactMode},set:function(t){this.compactMode=t}},{key:"PageHeight",get:function(){return this.pageHeight},set:function(t){this.pageHeight=t}},{key:"PageTopMargin",get:function(){return this.pageTopMargin},set:function(t){this.pageTopMargin=t}},{key:"PageTopMarginNarrow",get:function(){return this.pageTopMarginNarrow},set:function(t){this.pageTopMarginNarrow=t}},{key:"PageBottomMargin",get:function(){return this.pageBottomMargin},set:function(t){this.pageBottomMargin=t}},{key:"PageLeftMargin",get:function(){return this.pageLeftMargin},set:function(t){this.pageLeftMargin=t}},{key:"PageRightMargin",get:function(){return this.pageRightMargin},set:function(t){this.pageRightMargin=t}},{key:"TitleTopDistance",get:function(){return this.titleTopDistance},set:function(t){this.titleTopDistance=t}},{key:"TitleBottomDistance",get:function(){return this.titleBottomDistance},set:function(t){this.titleBottomDistance=t}},{key:"SystemComposerDistance",get:function(){return this.systemComposerDistance},set:function(t){this.systemComposerDistance=t}},{key:"InstrumentLabelTextHeight",get:function(){return this.instrumentLabelTextHeight},set:function(t){this.instrumentLabelTextHeight=t}},{key:"SystemLeftMargin",get:function(){return this.systemLeftMargin},set:function(t){this.systemLeftMargin=t}},{key:"SystemRightMargin",get:function(){return this.systemRightMargin},set:function(t){this.systemRightMargin=t}},{key:"FirstSystemMargin",get:function(){return this.firstSystemMargin},set:function(t){this.firstSystemMargin=t}},{key:"SystemLabelsRightMargin",get:function(){return this.systemLabelsRightMargin},set:function(t){this.systemLabelsRightMargin=t}},{key:"MinimumDistanceBetweenSystems",get:function(){return this.minimumDistanceBetweenSystems},set:function(t){this.minimumDistanceBetweenSystems=t}},{key:"LastSystemMaxScalingFactor",get:function(){return this.lastSystemMaxScalingFactor},set:function(t){this.lastSystemMaxScalingFactor=t}},{key:"StaffDistance",get:function(){return this.staffDistance},set:function(t){this.staffDistance=t}},{key:"BetweenStaffDistance",get:function(){return this.betweenStaffDistance},set:function(t){this.betweenStaffDistance=t}},{key:"StaffHeight",get:function(){return this.staffHeight},set:function(t){this.staffHeight=t}},{key:"TabStaffHeight",get:function(){return this.tabStaffHeight},set:function(t){this.tabStaffHeight=t}},{key:"BetweenStaffLinesDistance",get:function(){return this.betweenStaffLinesDistance},set:function(t){this.betweenStaffLinesDistance=t}},{key:"AutoBeamNotes",get:function(){return this.autoBeamNotes},set:function(t){this.autoBeamNotes=t}},{key:"AutoBeamOptions",get:function(){return this.autoBeamOptions},set:function(t){this.autoBeamOptions=t}},{key:"BeamWidth",get:function(){return this.beamWidth},set:function(t){this.beamWidth=t}},{key:"BeamSpaceWidth",get:function(){return this.beamSpaceWidth},set:function(t){this.beamSpaceWidth=t}},{key:"BeamForwardLength",get:function(){return this.beamForwardLength},set:function(t){this.beamForwardLength=t}},{key:"BetweenKeySymbolsDistance",get:function(){return this.betweenKeySymbolsDistance},set:function(t){this.betweenKeySymbolsDistance=t}},{key:"ClefLeftMargin",get:function(){return this.clefLeftMargin},set:function(t){this.clefLeftMargin=t}},{key:"ClefRightMargin",get:function(){return this.clefRightMargin},set:function(t){this.clefRightMargin=t}},{key:"KeyRightMargin",get:function(){return this.keyRightMargin},set:function(t){this.keyRightMargin=t}},{key:"RhythmRightMargin",get:function(){return this.rhythmRightMargin},set:function(t){this.rhythmRightMargin=t}},{key:"InStaffClefScalingFactor",get:function(){return this.inStaffClefScalingFactor},set:function(t){this.inStaffClefScalingFactor=t}},{key:"DistanceBetweenNaturalAndSymbolWhenCancelling",get:function(){return this.distanceBetweenNaturalAndSymbolWhenCancelling},set:function(t){this.distanceBetweenNaturalAndSymbolWhenCancelling=t}},{key:"NoteHelperLinesOffset",get:function(){return this.noteHelperLinesOffset},set:function(t){this.noteHelperLinesOffset=t}},{key:"MeasureLeftMargin",get:function(){return this.measureLeftMargin},set:function(t){this.measureLeftMargin=t}},{key:"MeasureRightMargin",get:function(){return this.measureRightMargin},set:function(t){this.measureRightMargin=t}},{key:"DistanceBetweenLastInstructionAndRepetitionBarline",get:function(){return this.distanceBetweenLastInstructionAndRepetitionBarline},set:function(t){this.distanceBetweenLastInstructionAndRepetitionBarline=t}},{key:"ArpeggioDistance",get:function(){return this.arpeggioDistance},set:function(t){this.arpeggioDistance=t}},{key:"StaccatoShorteningFactor",get:function(){return this.staccatoShorteningFactor},set:function(t){this.staccatoShorteningFactor=t}},{key:"IdealStemLength",get:function(){return this.idealStemLength},set:function(t){this.idealStemLength=t}},{key:"StemNoteHeadBorderYOffset",get:function(){return this.stemNoteHeadBorderYOffset},set:function(t){this.stemNoteHeadBorderYOffset=t}},{key:"StemWidth",get:function(){return this.stemWidth},set:function(t){this.stemWidth=t}},{key:"StemMargin",get:function(){return this.stemMargin},set:function(t){this.stemMargin=t}},{key:"StemMinLength",get:function(){return this.stemMinLength},set:function(t){this.stemMinLength=t}},{key:"StemMaxLength",get:function(){return this.stemMaxLength},set:function(t){this.stemMaxLength=t}},{key:"BeamSlopeMaxAngle",get:function(){return this.beamSlopeMaxAngle},set:function(t){this.beamSlopeMaxAngle=t}},{key:"StemMinAllowedDistanceBetweenNoteHeadAndBeamLine",get:function(){return this.stemMinAllowedDistanceBetweenNoteHeadAndBeamLine},set:function(t){this.stemMinAllowedDistanceBetweenNoteHeadAndBeamLine=t}},{key:"SetWantedStemDirectionByXml",get:function(){return this.setWantedStemDirectionByXml},set:function(t){this.setWantedStemDirectionByXml=t}},{key:"GraceNoteScalingFactor",get:function(){return this.graceNoteScalingFactor},set:function(t){this.graceNoteScalingFactor=t}},{key:"GraceNoteXOffset",get:function(){return this.graceNoteXOffset},set:function(t){this.graceNoteXOffset=t}},{key:"WedgeOpeningLength",get:function(){return this.wedgeOpeningLength},set:function(t){this.wedgeOpeningLength=t}},{key:"WedgeMeasureEndOpeningLength",get:function(){return this.wedgeMeasureEndOpeningLength},set:function(t){this.wedgeMeasureEndOpeningLength=t}},{key:"WedgeMeasureBeginOpeningLength",get:function(){return this.wedgeMeasureBeginOpeningLength},set:function(t){this.wedgeMeasureBeginOpeningLength=t}},{key:"WedgePlacementAboveY",get:function(){return this.wedgePlacementAboveY},set:function(t){this.wedgePlacementAboveY=t}},{key:"WedgePlacementBelowY",get:function(){return this.wedgePlacementBelowY},set:function(t){this.wedgePlacementBelowY=t}},{key:"WedgeHorizontalMargin",get:function(){return this.wedgeHorizontalMargin},set:function(t){this.wedgeHorizontalMargin=t}},{key:"WedgeVerticalMargin",get:function(){return this.wedgeVerticalMargin},set:function(t){this.wedgeVerticalMargin=t}},{key:"DistanceOffsetBetweenTwoHorizontallyCrossedWedges",get:function(){return this.distanceOffsetBetweenTwoHorizontallyCrossedWedges},set:function(t){this.distanceOffsetBetweenTwoHorizontallyCrossedWedges=t}},{key:"WedgeMinLength",get:function(){return this.wedgeMinLength},set:function(t){this.wedgeMinLength=t}},{key:"DistanceBetweenAdjacentDynamics",get:function(){return this.distanceBetweenAdjacentDynamics},set:function(t){this.distanceBetweenAdjacentDynamics=t}},{key:"TempoChangeMeasureValidity",get:function(){return this.tempoChangeMeasureValidity},set:function(t){this.tempoChangeMeasureValidity=t}},{key:"TempoContinousFactor",get:function(){return this.tempoContinousFactor},set:function(t){this.tempoContinousFactor=t}},{key:"StaccatoScalingFactor",get:function(){return this.staccatoScalingFactor},set:function(t){this.staccatoScalingFactor=t}},{key:"BetweenDotsDistance",get:function(){return this.betweenDotsDistance},set:function(t){this.betweenDotsDistance=t}},{key:"OrnamentAccidentalScalingFactor",get:function(){return this.ornamentAccidentalScalingFactor},set:function(t){this.ornamentAccidentalScalingFactor=t}},{key:"ChordSymbolTextHeight",get:function(){return this.chordSymbolTextHeight},set:function(t){this.chordSymbolTextHeight=t}},{key:"ChordSymbolXSpacing",get:function(){return this.chordSymbolXSpacing},set:function(t){this.chordSymbolXSpacing=t}},{key:"ChordSymbolYOffset",get:function(){return this.chordSymbolYOffset},set:function(t){this.chordSymbolYOffset=t}},{key:"FingeringLabelFontHeight",get:function(){return this.fingeringLabelFontHeight},set:function(t){this.fingeringLabelFontHeight=t}},{key:"MeasureNumberLabelHeight",get:function(){return this.measureNumberLabelHeight},set:function(t){this.measureNumberLabelHeight=t}},{key:"MeasureNumberLabelOffset",get:function(){return this.measureNumberLabelOffset},set:function(t){this.measureNumberLabelOffset=t}},{key:"TupletsRatioed",get:function(){return this.tupletsRatioed},set:function(t){this.tupletsRatioed=t}},{key:"TupletsBracketed",get:function(){return this.tupletsBracketed},set:function(t){this.tupletsBracketed=t}},{key:"TripletsBracketed",get:function(){return this.tripletsBracketed},set:function(t){this.tripletsBracketed=t}},{key:"TupletNumberLabelHeight",get:function(){return this.tupletNumberLabelHeight},set:function(t){this.tupletNumberLabelHeight=t}},{key:"TupletNumberYOffset",get:function(){return this.tupletNumberYOffset},set:function(t){this.tupletNumberYOffset=t}},{key:"LabelMarginBorderFactor",get:function(){return this.labelMarginBorderFactor},set:function(t){this.labelMarginBorderFactor=t}},{key:"TupletVerticalLineLength",get:function(){return this.tupletVerticalLineLength},set:function(t){this.tupletVerticalLineLength=t}},{key:"RepetitionEndingLabelHeight",get:function(){return this.repetitionEndingLabelHeight},set:function(t){this.repetitionEndingLabelHeight=t}},{key:"RepetitionEndingLabelXOffset",get:function(){return this.repetitionEndingLabelXOffset},set:function(t){this.repetitionEndingLabelXOffset=t}},{key:"RepetitionEndingLabelYOffset",get:function(){return this.repetitionEndingLabelYOffset},set:function(t){this.repetitionEndingLabelYOffset=t}},{key:"RepetitionEndingLineYLowerOffset",get:function(){return this.repetitionEndingLineYLowerOffset},set:function(t){this.repetitionEndingLineYLowerOffset=t}},{key:"RepetitionEndingLineYUpperOffset",get:function(){return this.repetitionEndingLineYUpperOffset},set:function(t){this.repetitionEndingLineYUpperOffset=t}},{key:"LyricsAlignmentStandard",get:function(){return this.lyricsAlignmentStandard},set:function(t){this.lyricsAlignmentStandard=t}},{key:"LyricsHeight",get:function(){return this.lyricsHeight},set:function(t){this.lyricsHeight=t}},{key:"LyricsYOffsetToStaffHeight",get:function(){return this.lyricsYOffsetToStaffHeight},set:function(t){this.lyricsYOffsetToStaffHeight=t}},{key:"VerticalBetweenLyricsDistance",get:function(){return this.verticalBetweenLyricsDistance},set:function(t){this.verticalBetweenLyricsDistance=t}},{key:"HorizontalBetweenLyricsDistance",get:function(){return this.horizontalBetweenLyricsDistance},set:function(t){this.horizontalBetweenLyricsDistance=t}},{key:"BetweenSyllableMaximumDistance",get:function(){return this.betweenSyllableMaximumDistance},set:function(t){this.betweenSyllableMaximumDistance=t}},{key:"BetweenSyllableMinimumDistance",get:function(){return this.betweenSyllableMinimumDistance},set:function(t){this.betweenSyllableMinimumDistance=t}},{key:"LyricOverlapAllowedIntoNextMeasure",get:function(){return this.lyricOverlapAllowedIntoNextMeasure},set:function(t){this.lyricOverlapAllowedIntoNextMeasure=t}},{key:"MinimumDistanceBetweenDashes",get:function(){return this.minimumDistanceBetweenDashes},set:function(t){this.minimumDistanceBetweenDashes=t}},{key:"BezierCurveStepSize",get:function(){return this.bezierCurveStepSize},set:function(t){this.bezierCurveStepSize=t}},{key:"TPow3",get:function(){return this.tPower3},set:function(t){this.tPower3=t}},{key:"OneMinusTPow3",get:function(){return this.oneMinusTPower3},set:function(t){this.oneMinusTPower3=t}},{key:"BezierFactorOne",get:function(){return this.factorOne},set:function(t){this.factorOne=t}},{key:"BezierFactorTwo",get:function(){return this.factorTwo},set:function(t){this.factorTwo=t}},{key:"TieGhostObjectWidth",get:function(){return this.tieGhostObjectWidth},set:function(t){this.tieGhostObjectWidth=t}},{key:"TieYPositionOffsetFactor",get:function(){return this.tieYPositionOffsetFactor},set:function(t){this.tieYPositionOffsetFactor=t}},{key:"MinimumNeededXspaceForTieGhostObject",get:function(){return this.minimumNeededXspaceForTieGhostObject},set:function(t){this.minimumNeededXspaceForTieGhostObject=t}},{key:"TieHeightMinimum",get:function(){return this.tieHeightMinimum},set:function(t){this.tieHeightMinimum=t}},{key:"TieHeightMaximum",get:function(){return this.tieHeightMaximum},set:function(t){this.tieHeightMaximum=t}},{key:"TieHeightInterpolationK",get:function(){return this.tieHeightInterpolationK},set:function(t){this.tieHeightInterpolationK=t}},{key:"TieHeightInterpolationD",get:function(){return this.tieHeightInterpolationD},set:function(t){this.tieHeightInterpolationD=t}},{key:"SlurNoteHeadYOffset",get:function(){return this.slurNoteHeadYOffset},set:function(t){this.slurNoteHeadYOffset=t}},{key:"SlurStemXOffset",get:function(){return this.slurStemXOffset},set:function(t){this.slurStemXOffset=t}},{key:"SlurSlopeMaxAngle",get:function(){return this.slurSlopeMaxAngle},set:function(t){this.slurSlopeMaxAngle=t}},{key:"SlurTangentMinAngle",get:function(){return this.slurTangentMinAngle},set:function(t){this.slurTangentMinAngle=t}},{key:"SlurTangentMaxAngle",get:function(){return this.slurTangentMaxAngle},set:function(t){this.slurTangentMaxAngle=t}},{key:"SlursStartingAtSameStaffEntryYOffset",get:function(){return this.slursStartingAtSameStaffEntryYOffset},set:function(t){this.slursStartingAtSameStaffEntryYOffset=t}},{key:"InstantaneousTempoTextHeight",get:function(){return this.instantaneousTempoTextHeight},set:function(t){this.instantaneousTempoTextHeight=t}},{key:"ContinuousDynamicTextHeight",get:function(){return this.continuousDynamicTextHeight},set:function(t){this.continuousDynamicTextHeight=t}},{key:"MoodTextHeight",get:function(){return this.moodTextHeight},set:function(t){this.moodTextHeight=t}},{key:"ContinuousTempoTextHeight",get:function(){return this.continuousTempoTextHeight},set:function(t){this.continuousTempoTextHeight=t}},{key:"DynamicExpressionMaxDistance",get:function(){return this.dynamicExpressionMaxDistance},set:function(t){this.dynamicExpressionMaxDistance=t}},{key:"DynamicExpressionSpacer",get:function(){return this.dynamicExpressionSpacer},set:function(t){this.dynamicExpressionSpacer=t}},{key:"UnknownTextHeight",get:function(){return this.unknownTextHeight},set:function(t){this.unknownTextHeight=t}},{key:"StaffLineWidth",get:function(){return this.staffLineWidth},set:function(t){this.staffLineWidth=t}},{key:"LedgerLineWidth",get:function(){return this.ledgerLineWidth},set:function(t){this.ledgerLineWidth=t}},{key:"WedgeLineWidth",get:function(){return this.wedgeLineWidth},set:function(t){this.wedgeLineWidth=t}},{key:"TupletLineWidth",get:function(){return this.tupletLineWidth},set:function(t){this.tupletLineWidth=t}},{key:"LyricUnderscoreLineWidth",get:function(){return this.lyricUnderscoreLineWidth},set:function(t){this.lyricUnderscoreLineWidth=t}},{key:"SystemThinLineWidth",get:function(){return this.systemThinLineWidth},set:function(t){this.systemThinLineWidth=t}},{key:"SystemBoldLineWidth",get:function(){return this.systemBoldLineWidth},set:function(t){this.systemBoldLineWidth=t}},{key:"SystemRepetitionEndingLineWidth",get:function(){return this.systemRepetitionEndingLineWidth},set:function(t){this.systemRepetitionEndingLineWidth=t}},{key:"SystemDotWidth",get:function(){return this.systemDotWidth},set:function(t){this.systemDotWidth=t}},{key:"DistanceBetweenVerticalSystemLines",get:function(){return this.distanceBetweenVerticalSystemLines},set:function(t){this.distanceBetweenVerticalSystemLines=t}},{key:"DistanceBetweenDotAndLine",get:function(){return this.distanceBetweenDotAndLine},set:function(t){this.distanceBetweenDotAndLine=t}},{key:"OctaveShiftLineWidth",get:function(){return this.octaveShiftLineWidth},set:function(t){this.octaveShiftLineWidth=t}},{key:"OctaveShiftVerticalLineLength",get:function(){return this.octaveShiftVerticalLineLength},set:function(t){this.octaveShiftVerticalLineLength=t}},{key:"GraceLineWidth",get:function(){return this.graceLineWidth},set:function(t){this.graceLineWidth=t}},{key:"MinimumStaffLineDistance",get:function(){return this.minimumStaffLineDistance},set:function(t){this.minimumStaffLineDistance=t}},{key:"MinimumCrossedBeamDifferenceMargin",get:function(){return this.minimumCrossedBeamDifferenceMargin},set:function(t){this.minimumCrossedBeamDifferenceMargin=t}},{key:"DisplacedNoteMargin",get:function(){return this.displacedNoteMargin},set:function(t){this.displacedNoteMargin=t}},{key:"MinNoteDistance",get:function(){return this.minNoteDistance},set:function(t){this.minNoteDistance=t}},{key:"SubMeasureXSpacingThreshold",get:function(){return this.subMeasureXSpacingThreshold},set:function(t){this.subMeasureXSpacingThreshold=t}},{key:"MeasureDynamicsMaxScalingFactor",get:function(){return this.measureDynamicsMaxScalingFactor},set:function(t){this.measureDynamicsMaxScalingFactor=t}},{key:"WholeRestXShiftVexflow",get:function(){return this.wholeRestXShiftVexflow},set:function(t){this.wholeRestXShiftVexflow=t}},{key:"MetronomeMarkXShift",get:function(){return this.metronomeMarkXShift},set:function(t){this.metronomeMarkXShift=t}},{key:"MetronomeMarkYShift",get:function(){return this.metronomeMarkYShift},set:function(t){this.metronomeMarkYShift=t}},{key:"MaxInstructionsConstValue",get:function(){return this.maxInstructionsConstValue},set:function(t){this.maxInstructionsConstValue=t}},{key:"NoteDistances",get:function(){return this.noteDistances},set:function(t){this.noteDistances=t}},{key:"NoteDistancesScalingFactors",get:function(){return this.noteDistancesScalingFactors},set:function(t){this.noteDistancesScalingFactors=t}},{key:"DurationDistanceDict",get:function(){return this.durationDistanceDict}},{key:"DurationScalingDistanceDict",get:function(){return this.durationScalingDistanceDict}},{key:"AlignRests",get:function(){return this.alignRests},set:function(t){this.alignRests=t}},{key:"FillEmptyMeasuresWithWholeRest",get:function(){return this.fillEmptyMeasuresWithWholeRest},set:function(t){this.fillEmptyMeasuresWithWholeRest=t}},{key:"ArpeggiosGoAcrossVoices",get:function(){return this.arpeggiosGoAcrossVoices},set:function(t){this.arpeggiosGoAcrossVoices=t}},{key:"RenderArpeggios",get:function(){return this.renderArpeggios},set:function(t){this.renderArpeggios=t}},{key:"RenderSlurs",get:function(){return this.renderSlurs},set:function(t){this.renderSlurs=t}},{key:"ColoringMode",get:function(){return this.coloringMode},set:function(t){this.coloringMode=t}},{key:"ColoringEnabled",get:function(){return this.coloringEnabled},set:function(t){this.coloringEnabled=t}},{key:"ColorStemsLikeNoteheads",get:function(){return this.colorStemsLikeNoteheads},set:function(t){this.colorStemsLikeNoteheads=t}},{key:"ColorFlags",get:function(){return this.colorFlags},set:function(t){this.colorFlags=t}},{key:"ColorBeams",get:function(){return this.colorBeams},set:function(t){this.colorBeams=t}},{key:"ColoringSetCurrent",get:function(){return this.coloringSetCustom},set:function(t){this.coloringSetCustom=t}},{key:"DefaultColorNotehead",get:function(){return this.defaultColorNotehead},set:function(t){this.defaultColorNotehead=t}},{key:"DefaultColorRest",get:function(){return this.defaultColorRest},set:function(t){this.defaultColorRest=t}},{key:"DefaultColorStem",get:function(){return this.defaultColorStem},set:function(t){this.defaultColorStem=t}},{key:"DefaultColorLabel",get:function(){return this.defaultColorLabel},set:function(t){this.defaultColorLabel=t}},{key:"DefaultColorTitle",get:function(){return this.defaultColorTitle},set:function(t){this.defaultColorTitle=t}},{key:"DefaultFontFamily",get:function(){return this.defaultFontFamily},set:function(t){this.defaultFontFamily=t}},{key:"MaxMeasureToDrawIndex",get:function(){return this.maxMeasureToDrawIndex},set:function(t){this.maxMeasureToDrawIndex=t}},{key:"MinMeasureToDrawIndex",get:function(){return this.minMeasureToDrawIndex},set:function(t){this.minMeasureToDrawIndex=t}},{key:"RenderComposer",get:function(){return this.renderComposer},set:function(t){this.renderComposer=t}},{key:"RenderTitle",get:function(){return this.renderTitle},set:function(t){this.renderTitle=t}},{key:"RenderSubtitle",get:function(){return this.renderSubtitle},set:function(t){this.renderSubtitle=t}},{key:"RenderLyricist",get:function(){return this.renderLyricist},set:function(t){this.renderLyricist=t}},{key:"RenderPartNames",get:function(){return this.renderPartNames},set:function(t){this.renderPartNames=t}},{key:"RenderPartAbbreviations",get:function(){return this.renderPartAbbreviations},set:function(t){this.renderPartAbbreviations=t}},{key:"RenderFingerings",get:function(){return this.renderFingerings},set:function(t){this.renderFingerings=t}},{key:"RenderMeasureNumbers",get:function(){return this.renderMeasureNumbers},set:function(t){this.renderMeasureNumbers=t}},{key:"RenderLyrics",get:function(){return this.renderLyrics},set:function(t){this.renderLyrics=t}},{key:"FingeringPosition",get:function(){return this.fingeringPosition},set:function(t){this.fingeringPosition=t}},{key:"FingeringInsideStafflines",get:function(){return this.fingeringInsideStafflines},set:function(t){this.fingeringInsideStafflines=t}},{key:"NewSystemAtXMLNewSystemAttribute",get:function(){return this.newSystemAtXMLNewSystemAttribute},set:function(t){this.newSystemAtXMLNewSystemAttribute=t}},{key:"NewPageAtXMLNewPageAttribute",get:function(){return this.newPageAtXMLNewPageAttribute},set:function(t){this.newPageAtXMLNewPageAttribute=t}},{key:"PageFormat",get:function(){return this.pageFormat},set:function(t){this.pageFormat=t}},{key:"PageBackgroundColor",get:function(){return this.pageBackgroundColor},set:function(t){this.pageBackgroundColor=t}},{key:"RenderSingleHorizontalStaffline",get:function(){return this.renderSingleHorizontalStaffline},set:function(t){this.renderSingleHorizontalStaffline=t}}],[{key:"FixStafflineBoundingBox",get:function(){return e.fixStafflineBoundingBox},set:function(t){e.fixStafflineBoundingBox=t}}]),e}();e.EngravingRules=l,l.unit=1;var c=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"noIdStringGiven";h(this,t),this.width=e,this.height=n,this.idString=i}return d(t,[{key:"Equals",value:function(t){return!!t&&t.width===this.width&&t.height===this.height}},{key:"aspectRatio",get:function(){return this.IsUndefined?0:this.width/this.height}},{key:"IsUndefined",get:function(){return void 0===this.width||void 0===this.height||0===this.height||0===this.width}}],[{key:"UndefinedPageFormat",get:function(){return new t(0,0)}}]),t}();e.PageFormat=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(11);function r(t,e,n){for(var r=n||i.defaultEquals,o=t.length,s=0;s<o;s++)if(r(t[s],e))return s;return-1}e.indexOf=r,e.lastIndexOf=function(t,e,n){for(var r=n||i.defaultEquals,o=t.length-1;o>=0;o--)if(r(t[o],e))return o;return-1},e.contains=function(t,e,n){return r(t,e,n)>=0},e.remove=function(t,e,n){var i=r(t,e,n);return!(i<0||(t.splice(i,1),0))},e.frequency=function(t,e,n){for(var r=n||i.defaultEquals,o=t.length,s=0,a=0;a<o;a++)r(t[a],e)&&s++;return s},e.equals=function(t,e,n){var r=n||i.defaultEquals;if(t.length!==e.length)return!1;for(var o=t.length,s=0;s<o;s++)if(!r(t[s],e[s]))return!1;return!0},e.copy=function(t){return t.concat()},e.swap=function(t,e,n){if(e<0||e>=t.length||n<0||n>=t.length)return!1;var i=t[e];return t[e]=t[n],t[n]=i,!0},e.toString=function(t){return"["+t.toString()+"]"},e.forEach=function(t,e){for(var n=0,i=t;n<i.length;n++)if(!1===e(i[n]))return}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.MeasureBegin=0]="MeasureBegin",t[t.MeasureEnd=1]="MeasureEnd"}(e.SystemLinePosition||(e.SystemLinePosition={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(55);e.LinkedVoice=function(t){n(i,t);var e=r(i);function i(t,n,r){var o;return h(this,i),(o=e.call(this,t,n)).master=r,o}return d(i,[{key:"Master",get:function(){return this.master}}]),i}(o.Voice)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.Regular=0]="Regular",t[t.Bold=1]="Bold",t[t.Italic=2]="Italic",t[t.BoldItalic=3]="BoldItalic",t[t.Underlined=4]="Underlined"}(e.FontStyles||(e.FontStyles={}))},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(57)),i(n(197)),i(n(113)),i(n(125)),i(n(4)),i(n(111)),i(n(24)),i(n(121)),i(n(34)),i(n(42)),i(n(126)),i(n(198)),i(n(58)),i(n(127)),i(n(79)),i(n(71)),i(n(25)),i(n(23)),i(n(128)),i(n(129)),i(n(199)),i(n(130)),i(n(52)),i(n(68)),i(n(131)),i(n(6)),i(n(132)),i(n(200)),i(n(133)),i(n(134)),i(n(202)),i(n(135)),i(n(136)),i(n(22)),i(n(120)),i(n(77)),i(n(117)),i(n(110)),i(n(112)),i(n(203)),i(n(204)),i(n(137)),i(n(138)),i(n(66)),i(n(119)),i(n(44)),i(n(37)),i(n(103)),i(n(205))},function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,n(21).Buffer)},function(t,e,n){"use strict";var i;i="undefined"!=typeof Promise?Promise:n(235),t.exports={Promise:i}},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(99)),i(n(100)),i(n(51)),i(n(98))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(34);!function(t){t[t.Never=0]="Never",t[t.Always=1]="Always",t[t.Auto=2]="Auto"}(e.AlignRestOption||(e.AlignRestOption={})),function(t){t[t.No=0]="No",t[t.YesVisible=1]="YesVisible",t[t.YesInvisible=2]="YesInvisible"}(e.FillEmptyMeasuresWithWholeRests||(e.FillEmptyMeasuresWithWholeRests={})),function(t){t[t.SVG=0]="SVG",t[t.Canvas=1]="Canvas"}(i=e.BackendType||(e.BackendType={})),e.OSMDOptions=function(){function t(){h(this,t)}return d(t,null,[{key:"OSMDOptionsStandard",value:function(){return{autoResize:!0,backend:"svg",drawingParameters:r.DrawingParametersEnum.default}}},{key:"BackendTypeFromString",value:function(t){return t&&"canvas"===t.toLowerCase()?i.Canvas:i.SVG}}]),t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(4),a=i(6),u=i(5);e.GraphicalMusicPage=function(t){n(i,t);var e=r(i);function i(t){var n;return h(this,i),(n=e.call(this)).musicSystems=[],n.labels=[],n.parent=t,n.boundingBox=new o.BoundingBox(s(n),void 0),n}return d(i,[{key:"setMusicPageAbsolutePosition",value:function(t,e){return new u.PointF2D(0,0)}},{key:"MusicSystems",get:function(){return this.musicSystems},set:function(t){this.musicSystems=t}},{key:"Labels",get:function(){return this.labels},set:function(t){this.labels=t}},{key:"Parent",get:function(){return this.parent},set:function(t){this.parent=t}},{key:"PageNumber",get:function(){return this.pageNumber},set:function(t){this.pageNumber=t}}]),i}(a.GraphicalObject),function(t){t[t.Down=0]="Down",t[t.Right=1]="Right",t[t.RightDown=2]="RightDown"}(e.PagePlacementEnum||(e.PagePlacementEnum={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractNotationInstruction=function(){function t(e){h(this,t),this.printObject=!0,this.parent=e}return d(t,[{key:"Parent",get:function(){return this.parent},set:function(t){this.parent=t}},{key:"PrintObject",get:function(){return this.printObject},set:function(t){this.printObject=t}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2);e.OrnamentContainer=function(){function t(e){h(this,t),this.accidentalAbove=i.AccidentalEnum.NONE,this.accidentalBelow=i.AccidentalEnum.NONE,this.ornament=e}return d(t,[{key:"GetOrnament",get:function(){return this.ornament}},{key:"AccidentalAbove",get:function(){return this.accidentalAbove},set:function(t){this.accidentalAbove=t}},{key:"AccidentalBelow",get:function(){return this.accidentalBelow},set:function(t){this.accidentalBelow=t}}]),t}(),function(t){t[t.Trill=0]="Trill",t[t.Turn=1]="Turn",t[t.InvertedTurn=2]="InvertedTurn",t[t.DelayedTurn=3]="DelayedTurn",t[t.DelayedInvertedTurn=4]="DelayedInvertedTurn",t[t.Mordent=5]="Mordent",t[t.InvertedMordent=6]="InvertedMordent"}(e.OrnamentEnum||(e.OrnamentEnum={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Voice=function(){function t(e,n){h(this,t),this.voiceEntries=[],this.volume=1,this.parent=e,this.visible=!0,this.audible=!0,this.following=!0,this.voiceId=n}return d(t,[{key:"VoiceEntries",get:function(){return this.voiceEntries}},{key:"Parent",get:function(){return this.parent}},{key:"Visible",get:function(){return this.visible},set:function(t){this.visible=t}},{key:"Audible",get:function(){return this.audible},set:function(t){this.audible=t}},{key:"Following",get:function(){return this.following},set:function(t){this.following=t}},{key:"VoiceId",get:function(){return this.voiceId}},{key:"Volume",get:function(){return this.volume},set:function(t){this.volume=t}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.VerticalSourceStaffEntryContainer=function(){function t(e,n,i){h(this,t),this.staffEntries=[],this.comments=[],this.timestamp=n,this.staffEntries=new Array(i),this.parentMeasure=e}return d(t,[{key:"$get$",value:function(t){return this.staffEntries[t]}},{key:"$set$",value:function(t,e){this.staffEntries[t]=e}},{key:"getAbsoluteTimestamp",value:function(){return i.Fraction.plus(this.timestamp,this.parentMeasure.AbsoluteTimestamp)}},{key:"Timestamp",get:function(){return this.timestamp},set:function(t){this.timestamp=t}},{key:"StaffEntries",get:function(){return this.staffEntries},set:function(t){this.staffEntries=t}},{key:"Comments",get:function(){return this.comments},set:function(t){this.comments=t}},{key:"ParentMeasure",get:function(){return this.parentMeasure},set:function(t){this.parentMeasure=t}}]),t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(6),a=i(4);e.AbstractGraphicalExpression=function(t){n(i,t);var e=r(i);function i(t,n){var r;return h(this,i),(r=e.call(this)).expression=n,r.boundingBox=new a.BoundingBox(s(r),t.PositionAndShape),r.parentStaffLine=t,r.parentStaffLine.AbstractExpressions.push(s(r)),r.rules=t.ParentMusicSystem.rules,r}return d(i,[{key:"Label",get:function(){return this.label}},{key:"ParentStaffLine",get:function(){return this.parentStaffLine}},{key:"SourceExpression",get:function(){return this.expression}},{key:"Placement",get:function(){return this.expression.Placement}}]),i}(o.GraphicalObject)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(23),s=i(38),a=i(5),u=i(57),l=i(7),c=i(1);e.GraphicalContinuousDynamicExpression=function(t){n(i,t);var e=r(i);function i(t,n){var r;return h(this,i),(r=e.call(this,n,t)).lines=[],r.isSplittedPart=!1,r.notToBeRemoved=!1,r}return d(i,[{key:"updateSkyBottomLine",value:function(){var t=this.parentStaffLine.SkyBottomLineCalculator,e=this.IsVerbal?this.label.PositionAndShape.RelativePosition.x+this.label.PositionAndShape.BorderMarginLeft:0,n=this.IsVerbal?this.label.PositionAndShape.RelativePosition.x+this.label.PositionAndShape.BorderMarginRight:0;switch(!this.IsVerbal&&this.lines.length<2&&c.warn("Not enough lines for SkyBottomLine calculation"),this.Placement){case l.PlacementEnum.Above:this.IsVerbal?t.updateSkyLineInRange(e,n,this.label.PositionAndShape.BorderMarginTop+this.label.PositionAndShape.RelativePosition.y):t.updateSkyLineWithWedge(this.lines[0].Start,this.lines[0].End);break;case l.PlacementEnum.Below:this.IsVerbal?t.updateBottomLineInRange(e,n,this.label.PositionAndShape.BorderMarginBottom+this.label.PositionAndShape.RelativePosition.y):t.updateBottomLineWithWedge(this.lines[1].Start,this.lines[1].End);break;default:c.error("Placement for GraphicalContinuousDynamicExpression is unknown")}}},{key:"createCrescendoLines",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rules.WedgeOpeningLength,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.rules.WedgeLineWidth,o=new a.PointF2D(t,n),s=new a.PointF2D(e,n-i/2),u=new a.PointF2D(e,n+i/2);this.addWedgeLines(o,s,u,r)}},{key:"createFirstHalfCrescendoLines",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rules.WedgeMeasureEndOpeningLength,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.rules.WedgeLineWidth,o=new a.PointF2D(t,n),s=new a.PointF2D(e,n-i/2),u=new a.PointF2D(e,n+i/2);this.addWedgeLines(o,s,u,r)}},{key:"createSecondHalfCrescendoLines",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rules.WedgeMeasureBeginOpeningLength,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.rules.WedgeOpeningLength,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.rules.WedgeLineWidth,s=new a.PointF2D(t,n-i/2),u=new a.PointF2D(t,n+i/2),l=new a.PointF2D(e,n-r/2),c=new a.PointF2D(e,n+r/2);this.addDoubleLines(s,l,u,c,o)}},{key:"recalculateCrescendoLines",value:function(t,e,n){var i=Math.abs(this.lines[0].Start.y-this.lines[1].Start.y)>1e-4;this.lines.clear(),i?this.createSecondHalfCrescendoLines(t,e,n):this.isSplittedPart?this.createFirstHalfCrescendoLines(t,e,n):this.createCrescendoLines(t,e,n)}},{key:"createDiminuendoLines",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rules.WedgeOpeningLength,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.rules.WedgeLineWidth,o=new a.PointF2D(t,n-i/2),s=new a.PointF2D(t,n+i/2),u=new a.PointF2D(e,n);this.addWedgeLines(u,o,s,r)}},{key:"createFirstHalfDiminuendoLines",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rules.WedgeOpeningLength,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.rules.WedgeMeasureEndOpeningLength,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.rules.WedgeLineWidth,s=new a.PointF2D(t,n-i/2),u=new a.PointF2D(t,n+i/2),l=new a.PointF2D(e,n-r/2),c=new a.PointF2D(e,n+r/2);this.addDoubleLines(s,l,u,c,o)}},{key:"createSecondHalfDiminuendoLines",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rules.WedgeMeasureBeginOpeningLength,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.rules.WedgeLineWidth,o=new a.PointF2D(t,n-i/2),s=new a.PointF2D(t,n+i/2),u=new a.PointF2D(e,n);this.addWedgeLines(u,o,s,r)}},{key:"recalculateDiminuendoLines",value:function(t,e,n){var i=Math.abs(this.lines[0].End.y-this.lines[1].End.y)>1e-4;this.lines.clear(),i?this.createFirstHalfDiminuendoLines(t,e,n):this.isSplittedPart?this.createSecondHalfDiminuendoLines(t,e,n):this.createDiminuendoLines(t,e,n)}},{key:"calcPsi",value:function(){this.IsVerbal?this.PositionAndShape.calculateBoundingBox():(this.PositionAndShape.RelativePosition=this.lines[0].Start,this.PositionAndShape.BorderMarginTop=this.lines[0].End.y-this.lines[0].Start.y,this.PositionAndShape.BorderMarginBottom=this.lines[1].End.y-this.lines[1].Start.y,this.ContinuousDynamic.DynamicType===s.ContDynamicEnum.crescendo?(this.PositionAndShape.BorderMarginLeft=0,this.PositionAndShape.BorderMarginRight=this.lines[0].End.x-this.lines[0].Start.x):(this.PositionAndShape.BorderMarginLeft=this.lines[0].End.x-this.lines[0].Start.x,this.PositionAndShape.BorderMarginRight=0))}},{key:"cleanUp",value:function(){this.lines.clear()}},{key:"shiftYPosition",value:function(t){this.IsVerbal?(this.PositionAndShape.RelativePosition.y+=t,this.PositionAndShape.calculateBoundingBox()):(this.lines[0].Start.y+=t,this.lines[0].End.y+=t,this.lines[1].End.y+=t)}},{key:"squeeze",value:function(t){this.IsVerbal||Math.abs(this.lines[0].End.x-this.lines[0].Start.x)<Math.abs(t)||(this.ContinuousDynamic.DynamicType===s.ContDynamicEnum.crescendo?t>0?this.lines[0].Start.x+=t:(this.lines[0].End.x+=t,this.lines[1].End.x+=t):t<0?this.lines[0].Start.x+=t:(this.lines[0].End.x+=t,this.lines[1].End.x+=t),this.calcPsi())}},{key:"addWedgeLines",value:function(t,e,n,i){var r=new o.GraphicalLine(t,e,i),s=new o.GraphicalLine(t,n,i);this.lines.push(r),this.lines.push(s)}},{key:"addDoubleLines",value:function(t,e,n,i,r){var s=new o.GraphicalLine(t,e,r),a=new o.GraphicalLine(n,i,r);this.lines.push(s),this.lines.push(a)}},{key:"StartMeasure",get:function(){return this.startMeasure},set:function(t){this.startMeasure=t}},{key:"EndMeasure",get:function(){return this.endMeasure},set:function(t){this.endMeasure=t}},{key:"EndStaffLine",get:function(){return this.endMeasure?this.endMeasure.ParentStaffLine:void 0}},{key:"IsSplittedPart",get:function(){return this.isSplittedPart},set:function(t){this.isSplittedPart=t}},{key:"IsVerbal",get:function(){return void 0!==this.ContinuousDynamic.Label&&this.ContinuousDynamic.Label.length>0}},{key:"NotToBeRemoved",get:function(){return this.notToBeRemoved},set:function(t){this.notToBeRemoved=t}},{key:"Lines",get:function(){return this.lines}},{key:"ContinuousDynamic",get:function(){return this.SourceExpression}}]),i}(u.AbstractGraphicalExpression)},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(122)),i(n(123)),i(n(80)),i(n(45)),i(n(35)),i(n(76)),i(n(124)),i(n(54)),i(n(81)),i(n(30)),i(n(118)),i(n(146)),i(n(89)),i(n(147)),i(n(56)),i(n(55)),i(n(17)),i(n(208)),i(n(35)),i(n(124)),i(n(81)),i(n(30)),i(n(56)),i(n(89))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(7),a=i(206),u=i(13),l=i(1),c=function(t){n(i,t);var e=r(i);function i(t,n,r,s){var a;return h(this,i),(a=e.call(this,r)).dynamicEnum=o[t.toLowerCase()],a.soundDynamic=n,a.staffNumber=s,a}return d(i,[{key:"getDynamicExpressionSymbol",value:function(t){switch(t){case"p":return a.DynamicExpressionSymbolEnum.p;case"f":return a.DynamicExpressionSymbolEnum.f;case"s":return a.DynamicExpressionSymbolEnum.s;case"z":return a.DynamicExpressionSymbolEnum.z;case"m":return a.DynamicExpressionSymbolEnum.m;case"r":return a.DynamicExpressionSymbolEnum.r;default:throw new u.InvalidEnumArgumentException("unknown DynamicExpressionSymbolEnum: "+t)}}},{key:"calculateLength",value:function(){return l.debug("[Andrea] instantaneousDynamicExpression: not implemented: calculateLength!"),0}},{key:"ParentMultiExpression",get:function(){return this.multiExpression},set:function(t){this.multiExpression=t}},{key:"DynEnum",get:function(){return this.dynamicEnum},set:function(t){this.dynamicEnum=t}},{key:"SoundDynamic",get:function(){return this.soundDynamic},set:function(t){this.soundDynamic=t}},{key:"Placement",get:function(){return this.placement},set:function(t){this.placement=t}},{key:"StaffNumber",get:function(){return this.staffNumber},set:function(t){this.staffNumber=t}},{key:"Length",get:function(){return Math.abs(this.length)<1e-4&&(this.length=this.calculateLength()),this.length}},{key:"MidiVolume",get:function(){return 127*i.dynamicToRelativeVolumeDict[this.dynamicEnum]}}],[{key:"isInputStringInstantaneousDynamic",value:function(t){return void 0!==t&&i.isStringInStringList(i.listInstantaneousDynamics,t)}}]),i}(s.AbstractExpression);e.InstantaneousDynamicExpression=c,c.dynamicToRelativeVolumeDict={f:92/127,ff:108/127,fff:124/127,ffff:125/127,fffff:126/127,ffffff:1,fp:.5,fz:.5,mf:76/127,mp:60/127,p:44/127,pp:28/127,ppp:12/127,pppp:10/127,ppppp:8/127,pppppp:6/127,rf:.5,rfz:.5,sf:.5,sff:.5,sffz:.5,sfp:.5,sfpp:.5,sfz:.5},c.listInstantaneousDynamics=["pppppp","ppppp","pppp","ppp","pp","p","ffffff","fffff","ffff","fff","ff","f","mf","mp","sf","sff","sp","spp","fp","rf","rfz","sfz","sffz","fz"],function(t){t[t.pppppp=0]="pppppp",t[t.ppppp=1]="ppppp",t[t.pppp=2]="pppp",t[t.ppp=3]="ppp",t[t.pp=4]="pp",t[t.p=5]="p",t[t.mp=6]="mp",t[t.mf=7]="mf",t[t.f=8]="f",t[t.ff=9]="ff",t[t.fff=10]="fff",t[t.ffff=11]="ffff",t[t.fffff=12]="fffff",t[t.ffffff=13]="ffffff",t[t.sf=14]="sf",t[t.sff=15]="sff",t[t.sfp=16]="sfp",t[t.sfpp=17]="sfpp",t[t.fp=18]="fp",t[t.rf=19]="rf",t[t.rfz=20]="rfz",t[t.sfz=21]="sfz",t[t.sffz=22]="sffz",t[t.fz=23]="fz",t[t.other=24]="other"}(o=e.DynamicEnum||(e.DynamicEnum={}))},function(t,e,n){t.exports=r;var i=n(62).EventEmitter;function r(){i.call(this)}n(40)(r,i),r.Readable=n(225),r.Writable=n(230),r.Duplex=n(231),r.Transform=n(232),r.PassThrough=n(233),r.Stream=r,r.prototype.pipe=function(t,e){var n=this;function r(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",r),t.on("drain",o),t._isStdio||e&&!1===e.end||(n.on("end",a),n.on("close",u));var s=!1;function a(){s||(s=!0,t.end())}function u(){s||(s=!0,"function"==typeof t.destroy&&t.destroy())}function l(t){if(c(),0===i.listenerCount(this,"error"))throw t}function c(){n.removeListener("data",r),t.removeListener("drain",o),n.removeListener("end",a),n.removeListener("close",u),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("error",l),t.on("error",l),n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t}},function(t,e,n){"use strict";var i,r="object"==typeof Reflect?Reflect:null,o=r&&"function"==typeof r.apply?r.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};i=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function l(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function h(t,e,n,i){var r,o,s;if(l(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),void 0===s)s=o[e]=n,++t._eventsCount;else if("function"==typeof s?s=o[e]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(r=c(t))>0&&s.length>r&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,console&&console.warn&&console.warn(a)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=f.bind(i);return r.listener=n,i.wrapFn=r,r}function p(t,e,n){var i=t._events;if(void 0===i)return[];var r=i[e];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):b(r,r.length)}function m(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function b(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=r[t];if(void 0===u)return!1;if("function"==typeof u)o(u,this,e);else{var l=u.length,c=b(u,l);for(n=0;n<l;++n)o(c[n],this,e)}return!0},a.prototype.on=a.prototype.addListener=function(t,e){return h(this,t,e,!1)},a.prototype.prependListener=function(t,e){return h(this,t,e,!0)},a.prototype.once=function(t,e){return l(e),this.on(t,d(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return l(e),this.prependListener(t,d(this,t,e)),this},a.prototype.off=a.prototype.removeListener=function(t,e){var n,i,r,o,s;if(l(e),void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,s||e)}return this},a.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},a.prototype.listeners=function(t){return p(this,t,!0)},a.prototype.rawListeners=function(t){return p(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},a.prototype.listenerCount=m,a.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(t,e,n){"use strict";(function(e){t.exports={isNode:void 0!==e,newBufferFrom:function(t,n){if(e.from&&e.from!==Uint8Array.from)return e.from(t,n);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new e(t,n)},allocBuffer:function(t){if(e.alloc)return e.alloc(t);var n=new e(t);return n.fill(0),n},isBuffer:function(t){return e.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}}).call(this,n(21).Buffer)},function(t,e,n){(function(e,n){var i;i=function(){"use strict";function t(t){return"function"==typeof t}var i=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},r=0,o=void 0,s=void 0,a=function(t,e){p[r]=t,p[r+1]=e,2===(r+=2)&&(s?s(m):S())},u="undefined"!=typeof window?window:void 0,l=u||{},c=l.MutationObserver||l.WebKitMutationObserver,h="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function d(){var t=setTimeout;return function(){return t(m,1)}}var p=new Array(1e3);function m(){for(var t=0;t<r;t+=2)(0,p[t])(p[t+1]),p[t]=void 0,p[t+1]=void 0;r=0}var b,v,y,g,S=void 0;function w(t,e){var n=this,i=new this.constructor(k);void 0===i[x]&&R(i);var r=n._state;if(r){var o=arguments[r-1];a((function(){return N(r,i,o,n._result)}))}else M(n,i,t,e);return i}function _(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(k);return P(e,t),e}h?S=function(){return e.nextTick(m)}:c?(v=0,y=new c(m),g=document.createTextNode(""),y.observe(g,{characterData:!0}),S=function(){g.data=v=++v%2}):f?((b=new MessageChannel).port1.onmessage=m,S=function(){return b.port2.postMessage(0)}):S=void 0===u?function(){try{var t=Function("return this")().require("vertx");return void 0!==(o=t.runOnLoop||t.runOnContext)?function(){o(m)}:d()}catch(t){return d()}}():d();var x=Math.random().toString(36).substring(2);function k(){}function E(e,n,i){n.constructor===e.constructor&&i===w&&n.constructor.resolve===_?function(t,e){1===e._state?L(t,e._result):2===e._state?T(t,e._result):M(e,void 0,(function(e){return P(t,e)}),(function(e){return T(t,e)}))}(e,n):void 0===i?L(e,n):t(i)?function(t,e,n){a((function(t){var i=!1,r=function(t,e,n,i){try{t.call(e,n,i)}catch(t){return t}}(n,e,(function(n){i||(i=!0,e!==n?P(t,n):L(t,n))}),(function(e){i||(i=!0,T(t,e))}));!i&&r&&(i=!0,T(t,r))}),t)}(e,n,i):L(e,n)}function P(t,e){if(t===e)T(t,new TypeError("You cannot resolve a promise with itself"));else if(r=typeof(i=e),null===i||"object"!==r&&"function"!==r)L(t,e);else{var n=void 0;try{n=e.then}catch(e){return void T(t,e)}E(t,e,n)}var i,r}function A(t){t._onerror&&t._onerror(t._result),C(t)}function L(t,e){void 0===t._state&&(t._result=e,t._state=1,0!==t._subscribers.length&&a(C,t))}function T(t,e){void 0===t._state&&(t._state=2,t._result=e,a(A,t))}function M(t,e,n,i){var r=t._subscribers,o=r.length;t._onerror=null,r[o]=e,r[o+1]=n,r[o+2]=i,0===o&&t._state&&a(C,t)}function C(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i=void 0,r=void 0,o=t._result,s=0;s<e.length;s+=3)r=e[s+n],(i=e[s])?N(n,i,r,o):r(o);t._subscribers.length=0}}function N(e,n,i,r){var o=t(i),s=void 0,a=void 0,u=!0;if(o){try{s=i(r)}catch(t){u=!1,a=t}if(n===s)return void T(n,new TypeError("A promises callback cannot return that same promise."))}else s=r;void 0!==n._state||(o&&u?P(n,s):!1===u?T(n,a):1===e?L(n,s):2===e&&T(n,s))}var I=0;function R(t){t[x]=I++,t._state=void 0,t._result=void 0,t._subscribers=[]}var O=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(k),this.promise[x]||R(this.promise),i(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?L(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&L(this.promise,this._result))):T(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;void 0===this._state&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,i=n.resolve;if(i===_){var r=void 0,o=void 0,s=!1;try{r=t.then}catch(t){s=!0,o=t}if(r===w&&void 0!==t._state)this._settledAt(t._state,e,t._result);else if("function"!=typeof r)this._remaining--,this._result[e]=t;else if(n===F){var a=new n(k);s?T(a,o):E(a,t,r),this._willSettleAt(a,e)}else this._willSettleAt(new n((function(e){return e(t)})),e)}else this._willSettleAt(i(t),e)},t.prototype._settledAt=function(t,e,n){var i=this.promise;void 0===i._state&&(this._remaining--,2===t?T(i,n):this._result[e]=n),0===this._remaining&&L(i,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;M(t,void 0,(function(t){return n._settledAt(1,e,t)}),(function(t){return n._settledAt(2,e,t)}))},t}(),F=function(){function e(t){this[x]=I++,this._result=this._state=void 0,this._subscribers=[],k!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e((function(e){P(t,e)}),(function(e){T(t,e)}))}catch(e){T(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then((function(t){return n.resolve(e()).then((function(){return t}))}),(function(t){return n.resolve(e()).then((function(){throw t}))})):this.then(e,e)},e}();return F.prototype.then=w,F.all=function(t){return new O(this,t).promise},F.race=function(t){var e=this;return i(t)?new e((function(n,i){for(var r=t.length,o=0;o<r;o++)e.resolve(t[o]).then(n,i)})):new e((function(t,e){return e(new TypeError("You must pass an array to race."))}))},F.resolve=_,F.reject=function(t){var e=new this(k);return T(e,t),e},F._setScheduler=function(t){s=t},F._setAsap=function(t){a=t},F._asap=a,F.polyfill=function(){var t=void 0;if(void 0!==n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var i=null;try{i=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===i&&!e.cast)return}t.Promise=F},F.Promise=F,F},t.exports=i()}).call(this,n(41),n(28))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(101),r=n(5),o=function(){function t(e,n,i,r){h(this,t),this.x=0,this.y=0,this.width=0,this.height=0,this.x=e,this.y=n,this.width=i,this.height=r}return d(t,[{key:"Location",get:function(){return new r.PointF2D(this.x,this.y)}},{key:"Size",get:function(){return new i.SizeF2D(this.width,this.height)}}],[{key:"createFromLocationAndSize",value:function(e,n){return new t(e.x,e.y,n.width,n.height)}}]),t}();e.RectangleF2D=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(6),a=i(4);e.StaffLineActivitySymbol=function(t){n(i,t);var e=r(i);function i(t){var n;return h(this,i),(n=e.call(this)).parentStaffLine=t,n.boundingBox=new a.BoundingBox(s(n),t.PositionAndShape),n.boundingBox.BorderRight=6,n.boundingBox.BorderBottom=4.5,n.boundingBox.BorderLeft=-1.5,n.boundingBox.BorderTop=-1.5,n}return i}(o.GraphicalObject)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(e){if(h(this,t),this.hasAttributes=!1,void 0===e)throw new Error("IXmlElement: expected Element, got undefined");this.elem=e,this.name=e.nodeName.toLowerCase(),e.hasAttributes()&&(this.hasAttributes=!0,this.firstAttribute=e.attributes[0]),this.hasElements=e.hasChildNodes(),this.value=1===e.childNodes.length&&e.childNodes[0].nodeType===Node.TEXT_NODE?e.childNodes[0].nodeValue:""}return d(t,[{key:"attribute",value:function(t){return this.elem.attributes.getNamedItem(t)}},{key:"attributes",value:function(){if(!this.attrs){for(var t=this.elem.attributes,e=[],n=0;n<t.length;n+=1)e.push(t[n]);this.attrs=e}return this.attrs}},{key:"element",value:function(e){for(var n=this.elem.childNodes,i=0,r=n.length;i<r;i+=1){var o=n[i];if(o.nodeType===Node.ELEMENT_NODE&&o.nodeName.toLowerCase()===e)return new t(o)}}},{key:"elements",value:function(e){var n=this.elem.childNodes,i=[],r=void 0===e;r||(e=e.toLowerCase());for(var o=0;o<n.length;o+=1){var s=n[o];s.nodeType!==Node.ELEMENT_NODE||!r&&s.nodeName.toLowerCase()!==e||i.push(new t(s))}return i}}]),t}();e.IXmlElement=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(103),r=n(23),o=n(5),s=n(9),a=n(15),l=n(0),c=n(4),f=n(1),p=n(29);e.GraphicalMusicSheet=function(){function t(e,n){h(this,t),this.musicPages=[],this.measureList=[],this.verticalGraphicalStaffEntryContainers=[],this.cursors=[],this.leadSheet=!1,this.musicSheet=e,this.numberOfStaves=this.musicSheet.Staves.length,this.calculator=n,this.calculator.initialize(this)}return d(t,[{key:"Initialize",value:function(){this.verticalGraphicalStaffEntryContainers=[],this.musicPages=[],this.measureList=[]}},{key:"reCalculate",value:function(){this.calculator.calculate()}},{key:"prepare",value:function(){this.calculator.prepareGraphicalMusicSheet()}},{key:"EnforceRedrawOfMusicSystems",value:function(){for(var t=0,e=this.musicPages.length;t<e;++t)for(var n=this.musicPages[t],i=0,r=n.MusicSystems.length;i<r;++i)n.MusicSystems[i].needsToBeRedrawn=!0}},{key:"getClickedObject",value:function(t){for(var e=0,n=this.MusicPages.length;e<n;++e)return this.MusicPages[e].PositionAndShape.getClickedObjectOfType(t)}},{key:"findGraphicalStaffEntryFromMeasureList",value:function(t,e,n){for(var i=e;i<this.measureList.length;i++)for(var r=this.measureList[i][t],o=0,s=r.staffEntries.length;o<s;++o){var a=r.staffEntries[o];if(a.sourceStaffEntry===n)return a}}},{key:"findNextGraphicalStaffEntry",value:function(t,e,n){var i=n.parentMeasure,r=i.staffEntries.indexOf(n);if(r<i.staffEntries.length-1)return i.staffEntries[r+1];if(e<this.measureList.length-1){var o=this.measureList[e+1][t];if(o.staffEntries.length>0)return o.staffEntries[0]}}},{key:"getFirstVisibleMeasuresListFromIndices",value:function(t,e){for(var n=[],i=this.measureList[0].length,r=t;r<=e;r++)for(var o=0;o<i;o++)if(this.measureList[r][o].isVisible()){n.push(this.measureList[r][o]);break}return n}},{key:"orderMeasuresByStaffLine",value:function(t){var e=[],n=[];e.push(n);for(var i=0;i<t.length;i++)0===i?n.push(t[0]):(t[i].ParentStaffLine===t[i-1].ParentStaffLine||(-1===e.indexOf(n)&&e.push(n),n=[],e.push(n)),n.push(t[i]));return e}},{key:"initializeActiveClefs",value:function(){var t=[],e=this.musicSheet.getFirstSourceMeasure();if(void 0!==e)for(var n=0;n<e.CompleteNumberOfStaves;n++){var i=new s.ClefInstruction;if(void 0!==e.FirstInstructionsStaffEntries[n])for(var r=0,o=e.FirstInstructionsStaffEntries[n].Instructions.length;r<o;++r){var a=e.FirstInstructionsStaffEntries[n].Instructions[r];a instanceof s.ClefInstruction&&(i=a)}t.push(i)}return t}},{key:"GetMainKey",value:function(){var t=this.musicSheet.getFirstSourceMeasure();if(void 0!==t)for(var e=0;e<t.CompleteNumberOfStaves;e++)for(var n=0,i=t.FirstInstructionsStaffEntries[e].Instructions.length;n<i;++n){var r=t.FirstInstructionsStaffEntries[e].Instructions[n];if(r instanceof a.KeyInstruction)return r}}},{key:"getOrCreateVerticalContainer",value:function(t){if(0===this.verticalGraphicalStaffEntryContainers.length||p.CollectionUtil.getLastElement(this.verticalGraphicalStaffEntryContainers).AbsoluteTimestamp.lt(t)){var e=new i.VerticalGraphicalStaffEntryContainer(this.numberOfStaves,t);return this.verticalGraphicalStaffEntryContainers.push(e),e}for(var n=this.verticalGraphicalStaffEntryContainers.length-1;n>=0;n--){if(this.verticalGraphicalStaffEntryContainers[n].AbsoluteTimestamp.lt(t)){var r=new i.VerticalGraphicalStaffEntryContainer(this.numberOfStaves,t);return this.verticalGraphicalStaffEntryContainers.splice(n+1,0,r),r}if(this.verticalGraphicalStaffEntryContainers[n].AbsoluteTimestamp.Equals(t))return this.verticalGraphicalStaffEntryContainers[n]}}},{key:"GetVerticalContainerFromTimestamp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=p.CollectionUtil.binarySearch(this.verticalGraphicalStaffEntryContainers,new i.VerticalGraphicalStaffEntryContainer(0,t),i.VerticalGraphicalStaffEntryContainer.compareByTimestamp,e);if(n>=0)return this.verticalGraphicalStaffEntryContainers[n]}},{key:"GetInterpolatedIndexInVerticalContainers",value:function(t){var e,n=this.verticalGraphicalStaffEntryContainers,i=0,r=n.length-1,o=void 0,s=void 0;if(t.lte(n[n.length-1].AbsoluteTimestamp)){for(;r-i>1;){var a=Math.floor((r+i)/2);if(n[i].AbsoluteTimestamp.Equals(t)){r=i;break}if(n[r].AbsoluteTimestamp.Equals(t)){i=r;break}if(n[a].AbsoluteTimestamp.Equals(t))return this.verticalGraphicalStaffEntryContainers.indexOf(n[a]);t.lt(n[a].AbsoluteTimestamp)?r=a:i=a}if(i===r)return this.verticalGraphicalStaffEntryContainers.indexOf(n[i]);o=n[i].AbsoluteTimestamp,s=n[r].AbsoluteTimestamp}else o=n[n.length-1].AbsoluteTimestamp,s=l.Fraction.plus(this.getLongestStaffEntryDuration(n.length-1),o),r=n.length;return e=r-(s.RealValue-t.RealValue)/(s.RealValue-o.RealValue),Math.min(e,this.verticalGraphicalStaffEntryContainers.length)}},{key:"getVisibleStavesIndicesFromSourceMeasure",value:function(t){for(var e=[],n=[],i=0,r=t.length;i<r;++i){var o=t[i].ParentStaff.ParentInstrument;-1===e.indexOf(o)&&e.push(o)}for(var s=0,a=e.length;s<a;++s)for(var u=e[s],l=this.musicSheet.getGlobalStaffIndexOfFirstStaff(u),c=0;c<u.Staves.length;c++)n.push(l+c);return n}},{key:"getGraphicalMeasureFromSourceMeasureAndIndex",value:function(t,e){for(var n=0;n<this.measureList.length;n++)if(this.measureList[n][0].parentSourceMeasure===t)return this.measureList[n][e]}},{key:"getLastGraphicalMeasureFromIndex",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.measureList.length-1;return e&&(n=this.musicSheet.Rules.MaxMeasureToDrawIndex),this.measureList[n][t]}},{key:"getMeasureIndex",value:function(t,e,n){for(e=0;e<this.measureList.length;e++)for(var i=0,r=this.measureList[e].length;i<r;++i)if(this.measureList[e][i]===t)return!0;return!1}},{key:"GetNearestNote",value:function(t,e){var n=[],i=new c.BoundingBox;i.BorderLeft=t.x-10,i.BorderTop=t.y-10,i.BorderRight=t.x+10,i.BorderBottom=t.y+10,i.AbsolutePosition=new o.PointF2D(0,0);for(var r=0,s=this.MusicPages.length;r<s;++r){var a=this.MusicPages[r].PositionAndShape.getObjectsInRegion(i);if(void 0!==a)for(var u=0,l=a.length;u<l;++u){var h=a[u];Math.abs(h.PositionAndShape.AbsolutePosition.x-t.x)<e.x&&Math.abs(h.PositionAndShape.AbsolutePosition.y-t.y)<e.y&&n.push(h)}}for(var f=void 0,d=0,p=n.length;d<p;++d){var m=n[d];if(void 0===f)f=m;else{if(void 0===m.parentVoiceEntry.parentStaffEntry.relInMeasureTimestamp)continue;this.CalculateDistance(m.PositionAndShape.AbsolutePosition,t)<this.CalculateDistance(f.PositionAndShape.AbsolutePosition,t)&&(f=m)}}if(void 0!==f)return f}},{key:"GetClickableLabel",value:function(t){var e=new c.BoundingBox;e.BorderLeft=t.x-4,e.BorderTop=t.y-4,e.BorderRight=t.x+4,e.BorderBottom=t.y+4,e.AbsolutePosition=new o.PointF2D(0,0);for(var n=0,i=this.MusicPages.length;n<i;++n){var r=this.MusicPages[n].PositionAndShape.getObjectsInRegion(e);if(1===r.length)for(var s=0,a=r.length;s<a;++s)return r[s]}}},{key:"GetNearestStaffEntry",value:function(t){var e=[],n=new c.BoundingBox(void 0);n.BorderLeft=t.x-10,n.BorderTop=t.y-10,n.BorderRight=t.x+10,n.BorderBottom=t.y+10,n.AbsolutePosition=new o.PointF2D(0,0);for(var i=0,r=this.MusicPages.length;i<r;++i){var s=this.MusicPages[i].PositionAndShape.getObjectsInRegion(n,!1);if(void 0!==s&&0!==s.length)for(var a=0,u=s.length;a<u;++a)e.push(s[a])}for(var l=void 0,h=0,f=e.length;h<f;++h){var d=e[h];if(void 0===l)l=d;else{if(void 0===d.relInMeasureTimestamp)continue;this.CalculateDistance(d.PositionAndShape.AbsolutePosition,t)<this.CalculateDistance(l.PositionAndShape.AbsolutePosition,t)&&(l=d)}}if(void 0!==l)return l}},{key:"GetPossibleCommentAnchor",value:function(t){var e=this.GetNearestStaffEntry(t);if(void 0!==e)return e.sourceStaffEntry}},{key:"getClickedObjectOfType",value:function(t){for(var e=0,n=this.musicPages.length;e<n;++e){var i=this.musicPages[e].PositionAndShape.getClickedObjectOfType(t);if(void 0!==i)return i}}},{key:"tryGetTimestampFromPosition",value:function(t){var e=this.getClickedObjectOfType(t);if(void 0!==e)return e.getAbsoluteTimestamp()}},{key:"tryGetClickableLabel",value:function(t){try{return this.GetClickableLabel(t)}catch(e){f.info("GraphicalMusicSheet.tryGetClickableObject","positionOnMusicSheet: "+t,e)}}},{key:"tryGetTimeStampFromPosition",value:function(t){try{var n=this.GetNearestStaffEntry(t);if(void 0===n)return;return n.getAbsoluteTimestamp()}catch(e){f.info("GraphicalMusicSheet.tryGetTimeStampFromPosition","positionOnMusicSheet: "+t,e)}}},{key:"getStaffEntry",value:function(t){var e=this.VerticalGraphicalStaffEntryContainers[t],n=void 0;try{for(var i=0,r=e.StaffEntries.length;i<r;++i){var o=e.StaffEntries[i];void 0!==o&&o.sourceStaffEntry.ParentStaff.ParentInstrument.Visible&&(void 0===n||void 0!==o.PositionAndShape&&void 0!==n.PositionAndShape&&n.PositionAndShape.RelativePosition.x>o.PositionAndShape.RelativePosition.x)&&(n=o)}}catch(t){f.info("GraphicalMusicSheet.getStaffEntry",t)}return n}},{key:"GetPreviousVisibleContainerIndex",value:function(t){for(var e=t-1;e>=0;e--)for(var n=this.verticalGraphicalStaffEntryContainers[e].StaffEntries,i=0,r=n.length;i<r;++i){var o=n[i];if(void 0!==o&&o.sourceStaffEntry.ParentStaff.ParentInstrument.Visible)return e}return-1}},{key:"GetNextVisibleContainerIndex",value:function(t){for(var e=t+1;e<this.verticalGraphicalStaffEntryContainers.length;++e)for(var n=this.verticalGraphicalStaffEntryContainers[e].StaffEntries,i=0,r=n.length;i<r;++i){var o=n[i];if(void 0!==o&&o.sourceStaffEntry.ParentStaff.ParentInstrument.Visible)return e}return-1}},{key:"findClosestLeftStaffEntry",value:function(t,e){for(var n=void 0,i=Math.floor(t),r=i=Math.min(this.VerticalGraphicalStaffEntryContainers.length-1,i);r>=0;r--)if(void 0!==(n=this.getStaffEntry(r))){if(!e)return n;if(n.sourceStaffEntry.ParentStaff.ParentInstrument.Visible)return n}}},{key:"findClosestRightStaffEntry",value:function(t,e){for(var n=void 0,i=Math.max(0,Math.ceil(t));i<this.VerticalGraphicalStaffEntryContainers.length;i++)if(void 0!==(n=this.getStaffEntry(i))){if(!e)return n;if(n.sourceStaffEntry.ParentStaff.ParentInstrument.Visible)return n}}},{key:"calculateCursorLineAtTimestamp",value:function(t,e){var n=this.calculateXPositionFromTimestamp(t),i=n[0],s=n[1];if(void 0!==s&&0!==s.StaffLines.length){var a=s.PositionAndShape.AbsolutePosition.y,u=p.CollectionUtil.last(s.StaffLines).PositionAndShape.RelativePosition.y+4;return new r.GraphicalLine(new o.PointF2D(i,a),new o.PointF2D(i,a+u),3,e)}}},{key:"calculateXPositionFromTimestamp",value:function(t){var e=void 0,n=this.GetInterpolatedIndexInVerticalContainers(t),i=this.findClosestLeftStaffEntry(n,!0),r=this.findClosestRightStaffEntry(n,!0),o=t.RealValue;if(void 0===i&&void 0===r)return[0,void 0];var s,a;if((s=void 0!==i?i.parentMeasure.ParentStaffLine.ParentMusicSystem:r.parentMeasure.ParentStaffLine.ParentMusicSystem)===(a=void 0!==r?r.parentMeasure.ParentStaffLine.ParentMusicSystem:i.parentMeasure.ParentStaffLine.ParentMusicSystem)){var u,c,h;if(e=s,void 0===i)c=h=r.PositionAndShape.AbsolutePosition.x,u=0;else if(void 0===r){c=i.PositionAndShape.AbsolutePosition.x,h=e.GetRightBorderAbsoluteXPosition();var f=i.parentMeasure.parentSourceMeasure;u=(o-i.getAbsoluteTimestamp().RealValue)/(l.Fraction.plus(f.AbsoluteTimestamp,f.Duration).RealValue-i.getAbsoluteTimestamp().RealValue)}else c=i.PositionAndShape.AbsolutePosition.x,h=r.PositionAndShape.AbsolutePosition.x,u=i===r?0:(o-i.getAbsoluteTimestamp().RealValue)/(r.getAbsoluteTimestamp().RealValue-i.getAbsoluteTimestamp().RealValue);return[c+(u=Math.min(1,Math.max(0,u)))*(h-c),e]}var d,p,m=r.parentMeasure.parentSourceMeasure.AbsoluteTimestamp.RealValue;if(o<m){e=s;var b=i.PositionAndShape.AbsolutePosition.x,v=e.GetRightBorderAbsoluteXPosition();d=(o-i.getAbsoluteTimestamp().RealValue)/(m-i.getAbsoluteTimestamp().RealValue),p=b+(d=Math.min(1,Math.max(0,d)))*(v-b)}else{e=a;var y=r.PositionAndShape.AbsolutePosition.x,g=e.GetLeftBorderAbsoluteXPosition();d=(o-m)/(r.getAbsoluteTimestamp().RealValue-m),p=g+(d=Math.min(1,Math.max(0,d)))*(y-g)}return[p,e]}},{key:"GetNumberOfVisibleInstruments",value:function(){for(var t=0,e=0,n=this.musicSheet.Instruments.length;e<n;++e)!0===this.musicSheet.Instruments[e].Visible&&t++;return t}},{key:"GetNumberOfFollowedInstruments",value:function(){for(var t=0,e=0,n=this.musicSheet.Instruments.length;e<n;++e)!0===this.musicSheet.Instruments[e].Following&&t++;return t}},{key:"GetGraphicalFromSourceStaffEntry",value:function(t){return t.VerticalContainerParent.ParentMeasure.VerticalMeasureList[t.ParentStaff.idInMusicSheet].findGraphicalStaffEntryFromTimestamp(t.Timestamp)}},{key:"CalculateDistance",value:function(t,e){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i}},{key:"getLongestStaffEntryDuration",value:function(t){var e,n=new l.Fraction(0,1),i=u(this.verticalGraphicalStaffEntryContainers[t].StaffEntries);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(void 0!==r){var o=r.findStaffEntryMaxNoteLength();n.lt(o)&&(n=o)}}}catch(s){i.e(s)}finally{i.f()}return n}},{key:"ParentMusicSheet",get:function(){return this.musicSheet}},{key:"GetCalculator",get:function(){return this.calculator}},{key:"MusicPages",get:function(){return this.musicPages},set:function(t){this.musicPages=t}},{key:"MeasureList",get:function(){return this.measureList},set:function(t){this.measureList=t}},{key:"VerticalGraphicalStaffEntryContainers",get:function(){return this.verticalGraphicalStaffEntryContainers},set:function(t){this.verticalGraphicalStaffEntryContainers=t}},{key:"Title",get:function(){return this.title},set:function(t){this.title=t}},{key:"Subtitle",get:function(){return this.subtitle},set:function(t){this.subtitle=t}},{key:"Composer",get:function(){return this.composer},set:function(t){this.composer=t}},{key:"Lyricist",get:function(){return this.lyricist},set:function(t){this.lyricist=t}},{key:"Cursors",get:function(){return this.cursors}},{key:"SelectionStartSymbol",get:function(){return this.selectionStartSymbol}},{key:"SelectionEndSymbol",get:function(){return this.selectionEndSymbol}},{key:"MinAllowedSystemWidth",get:function(){return this.minAllowedSystemWidth},set:function(t){this.minAllowedSystemWidth=t}},{key:"NumberOfStaves",get:function(){return this.numberOfStaves}},{key:"LeadSheet",get:function(){return this.leadSheet},set:function(t){this.leadSheet=t}}],[{key:"transformRelativeToAbsolutePosition",value:function(t){for(var e=0;e<t.MusicPages.length;e++){var n=t.MusicPages[e].setMusicPageAbsolutePosition(e,t.ParentMusicSheet.Rules);t.MusicPages[e].PositionAndShape.calculateAbsolutePositionsRecursive(n.x,n.y)}}}]),t}(),e.SystemImageProperties=function(){return function t(){h(this,t)}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(11),r=n(43),o=function(){function t(){this.firstNode=null,this.lastNode=null,this.nElements=0}return t.prototype.add=function(t,e){if(i.isUndefined(e)&&(e=this.nElements),e<0||e>this.nElements||i.isUndefined(t))return!1;var n=this.createNode(t);if(0===this.nElements||null===this.lastNode)this.firstNode=n,this.lastNode=n;else if(e===this.nElements)this.lastNode.next=n,this.lastNode=n;else if(0===e)n.next=this.firstNode,this.firstNode=n;else{var r=this.nodeAtIndex(e-1);if(null===r)return!1;n.next=r.next,r.next=n}return this.nElements++,!0},t.prototype.first=function(){if(null!==this.firstNode)return this.firstNode.element},t.prototype.last=function(){if(null!==this.lastNode)return this.lastNode.element},t.prototype.elementAtIndex=function(t){var e=this.nodeAtIndex(t);if(null!==e)return e.element},t.prototype.indexOf=function(t,e){var n=e||i.defaultEquals;if(i.isUndefined(t))return-1;for(var r=this.firstNode,o=0;null!==r;){if(n(r.element,t))return o;o++,r=r.next}return-1},t.prototype.contains=function(t,e){return this.indexOf(t,e)>=0},t.prototype.remove=function(t,e){var n=e||i.defaultEquals;if(this.nElements<1||i.isUndefined(t))return!1;for(var r=null,o=this.firstNode;null!==o;){if(n(o.element,t))return null===r?(this.firstNode=o.next,o===this.lastNode&&(this.lastNode=null)):o===this.lastNode?(this.lastNode=r,r.next=o.next,o.next=null):(r.next=o.next,o.next=null),this.nElements--,!0;r=o,o=o.next}return!1},t.prototype.clear=function(){this.firstNode=null,this.lastNode=null,this.nElements=0},t.prototype.equals=function(e,n){var r=n||i.defaultEquals;return e instanceof t&&this.size()===e.size()&&this.equalsAux(this.firstNode,e.firstNode,r)},t.prototype.equalsAux=function(t,e,n){for(;null!==t&&null!==e;){if(!n(t.element,e.element))return!1;t=t.next,e=e.next}return!0},t.prototype.removeElementAtIndex=function(t){if(!(t<0||t>=this.nElements||null===this.firstNode||null===this.lastNode)){var e;if(1===this.nElements)e=this.firstNode.element,this.firstNode=null,this.lastNode=null;else{var n=this.nodeAtIndex(t-1);null===n?(e=this.firstNode.element,this.firstNode=this.firstNode.next):n.next===this.lastNode&&(e=this.lastNode.element,this.lastNode=n),null!==n&&null!==n.next&&(e=n.next.element,n.next=n.next.next)}return this.nElements--,e}},t.prototype.forEach=function(t){for(var e=this.firstNode;null!==e&&!1!==t(e.element);)e=e.next},t.prototype.reverse=function(){for(var t=null,e=this.firstNode,n=null;null!==e;)n=e.next,e.next=t,t=e,e=n;n=this.firstNode,this.firstNode=this.lastNode,this.lastNode=n},t.prototype.toArray=function(){for(var t=[],e=this.firstNode;null!==e;)t.push(e.element),e=e.next;return t},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return this.nElements<=0},t.prototype.toString=function(){return r.toString(this.toArray())},t.prototype.nodeAtIndex=function(t){if(t<0||t>=this.nElements)return null;if(t===this.nElements-1)return this.lastNode;for(var e=this.firstNode,n=0;n<t&&null!==e;n++)e=e.next;return e},t.prototype.createNode=function(t){return{element:t,next:null}},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.TimesNewRoman=0]="TimesNewRoman",t[t.Kokila=1]="Kokila"}(e.Fonts||(e.Fonts={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(57);e.GraphicalInstantaneousTempoExpression=function(t){n(i,t);var e=r(i);function i(t,n){var r;return h(this,i),(r=e.call(this,n.PositionAndShape.Parent.DataObject,t)).label=n,r}return d(i,[{key:"updateSkyBottomLine",value:function(){}},{key:"GraphicalLabel",get:function(){return this.label}}]),i}(o.AbstractGraphicalExpression)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(114),a=i(13),u=i(0),l=function(t){n(i,t);var e=r(i);function i(t,n,r,o,s){var a;return h(this,i),(a=e.call(this,t,n,r,s)).setTempoAndTempoType(o),a}return d(i,[{key:"getAbsoluteTimestamp",value:function(){return u.Fraction.plus(this.ParentMultiTempoExpression.SourceMeasureParent.AbsoluteTimestamp,this.ParentMultiTempoExpression.Timestamp)}},{key:"getAbsoluteFloatTimestamp",value:function(){return u.Fraction.plus(this.ParentMultiTempoExpression.SourceMeasureParent.AbsoluteTimestamp,this.ParentMultiTempoExpression.Timestamp).RealValue}},{key:"setTempoAndTempoType",value:function(t){return this.label?i.isStringInStringList(i.listInstantaneousTempoLarghissimo,this.label)?(0===t&&(t=i.getDefaultValueForTempoType(o.larghissimo)),this.tempoInBpm=t,void(this.tempoEnum=o.larghissimo)):i.isStringInStringList(i.listInstantaneousTempoGrave,this.label)?(0===t&&(t=i.getDefaultValueForTempoType(o.grave)),this.tempoInBpm=t,void(this.tempoEnum=o.grave)):i.isStringInStringList(i.listInstantaneousTempoLento,this.label)?(0===t&&(t=i.getDefaultValueForTempoType(o.lento)),this.tempoInBpm=t,void(this.tempoEnum=o.lento)):i.isStringInStringList(i.listInstantaneousTempoLargo,this.label)?(0===t&&(t=i.getDefaultValueForTempoType(o.largo)),this.tempoInBpm=t,void(this.tempoEnum=o.largo)):i.isStringInStringList(i.listInstantaneousTempoLarghetto,this.label)?(0===t&&(t=i.getDefaultValueForTempoType(o.larghetto)),this.tempoInBpm=t,void(this.tempoEnum=o.larghetto)):i.isStringInStringList(i.listInstantaneousTempoAdagio,this.label)?(0===t&&(t=i.getDefaultValueForTempoType(o.adagio)),this.tempoInBpm=t,void(this.tempoEnum=o.adagio)):i.isStringInStringList(i.listInstantaneousTempoAdagietto,this.label)?(0===t&&(t=i.getDefaultValueForTempoType(o.adagietto)),this.tempoInBpm=t,void(this.tempoEnum=o.adagietto)):i.isStringInStringList(i.listInstantaneousTempoAndanteModerato,this.label)?(0===t&&(t=i.getDefaultValueForTempoType(o.andanteModerato)),this.tempoInBpm=t,void(this.tempoEnum=o.andanteModerato)):i.isStringInStringList(i.listInstantaneousTempoAndante,this.label)?(0===t&&(t=i.getDefaultValueForTempoType(o.andante)),this.tempoInBpm=t,void(this.tempoEnum=o.andante)):i.isStringInStringList(i.listInstantaneousTempoAndantino,this.label)?(0===t&&(t=i.getDefaultValueForTempoType(o.andantino)),this.tempoInBpm=t,void(this.tempoEnum=o.andantino)):i.isStringInStringList(i.listInstantaneousTempoModerato,this.label)?(0===t&&(t=i.getDefaultValueForTempoType(o.moderato)),this.tempoInBpm=t,void(this.tempoEnum=o.moderato)):i.isStringInStringList(i.listInstantaneousTempoAllegretto,this.label)?(0===t&&(t=i.getDefaultValueForTempoType(o.allegretto)),this.tempoInBpm=t,void(this.tempoEnum=o.allegretto)):i.isStringInStringList(i.listInstantaneousTempoAllegroModerato,this.label)?(0===t&&(t=i.getDefaultValueForTempoType(o.allegroModerato)),this.tempoInBpm=t,void(this.tempoEnum=o.allegroModerato)):i.isStringInStringList(i.listInstantaneousTempoAllegro,this.label)?(0===t&&(t=i.getDefaultValueForTempoType(o.allegro)),this.tempoInBpm=t,void(this.tempoEnum=o.allegro)):i.isStringInStringList(i.listInstantaneousTempoVivace,this.label)?(0===t&&(t=i.getDefaultValueForTempoType(o.vivace)),this.tempoInBpm=t,void(this.tempoEnum=o.vivace)):i.isStringInStringList(i.listInstantaneousTempoVivacissimo,this.label)?(0===t&&(t=i.getDefaultValueForTempoType(o.vivacissimo)),this.tempoInBpm=t,void(this.tempoEnum=o.vivacissimo)):i.isStringInStringList(i.listInstantaneousTempoAllegrissimo,this.label)?(0===t&&(t=i.getDefaultValueForTempoType(o.allegrissimo)),this.tempoInBpm=t,void(this.tempoEnum=o.allegrissimo)):i.isStringInStringList(i.listInstantaneousTempoPresto,this.label)?(0===t&&(t=i.getDefaultValueForTempoType(o.presto)),this.tempoInBpm=t,void(this.tempoEnum=o.presto)):i.isStringInStringList(i.listInstantaneousTempoPrestissimo,this.label)?(0===t&&(t=i.getDefaultValueForTempoType(o.prestissimo)),this.tempoInBpm=t,void(this.tempoEnum=o.prestissimo)):i.isStringInStringList(i.listInstantaneousTempoAddons,this.label)?(this.tempoInBpm=0,void(this.tempoEnum=o.addon)):i.isStringInStringList(i.listInstantaneousTempoChangesGeneral,this.label)?(this.tempoInBpm=0,void(this.tempoEnum=o.changes)):void 0:(this.tempoInBpm=t,void(this.tempoEnum=o.metronomeMark))}},{key:"Label",get:function(){return this.label},set:function(t){this.label=t}},{key:"Placement",get:function(){return this.placement},set:function(t){this.placement=t}},{key:"StaffNumber",get:function(){return this.staffNumber},set:function(t){this.staffNumber=t}},{key:"Enum",get:function(){return this.tempoEnum}},{key:"TempoInBpm",get:function(){return this.tempoInBpm},set:function(t){this.tempoInBpm=t}},{key:"ParentMultiTempoExpression",get:function(){return this.parentMultiTempoExpression}}],[{key:"getDefaultValueForTempoType",value:function(t){switch(t){case o.larghissimo:return 20;case o.grave:return 30;case o.lento:return 48;case o.largo:return 52;case o.larghetto:return 63;case o.adagio:return 70;case o.adagietto:return 75;case o.andanteModerato:return 88;case o.andante:return 92;case o.andantino:return 96;case o.moderato:return 106;case o.allegretto:return 112;case o.allegroModerato:return 118;case o.allegro:return 130;case o.vivace:return 140;case o.vivacissimo:return 155;case o.allegrissimo:return 170;case o.presto:return 184;case o.prestissimo:return 200;default:throw new a.ArgumentOutOfRangeException("tempoEnum")}}},{key:"isInputStringInstantaneousTempo",value:function(t){return void 0!==t&&(i.isStringInStringList(i.listInstantaneousTempoLarghissimo,t)||i.isStringInStringList(i.listInstantaneousTempoGrave,t)||i.isStringInStringList(i.listInstantaneousTempoLento,t)||i.isStringInStringList(i.listInstantaneousTempoLargo,t)||i.isStringInStringList(i.listInstantaneousTempoLarghetto,t)||i.isStringInStringList(i.listInstantaneousTempoAdagio,t)||i.isStringInStringList(i.listInstantaneousTempoAdagietto,t)||i.isStringInStringList(i.listInstantaneousTempoAndanteModerato,t)||i.isStringInStringList(i.listInstantaneousTempoAndante,t)||i.isStringInStringList(i.listInstantaneousTempoAndantino,t)||i.isStringInStringList(i.listInstantaneousTempoModerato,t)||i.isStringInStringList(i.listInstantaneousTempoAllegretto,t)||i.isStringInStringList(i.listInstantaneousTempoAllegroModerato,t)||i.isStringInStringList(i.listInstantaneousTempoAllegro,t)||i.isStringInStringList(i.listInstantaneousTempoVivace,t)||i.isStringInStringList(i.listInstantaneousTempoVivacissimo,t)||i.isStringInStringList(i.listInstantaneousTempoAllegrissimo,t)||i.isStringInStringList(i.listInstantaneousTempoPresto,t)||i.isStringInStringList(i.listInstantaneousTempoPrestissimo,t)||i.isStringInStringList(i.listInstantaneousTempoChangesGeneral,t))}}]),i}(s.AbstractTempoExpression);e.InstantaneousTempoExpression=l,l.listInstantaneousTempoLarghissimo=["Larghissimo","Sehr breit","very, very slow"],l.listInstantaneousTempoGrave=["Grave","Schwer","slow and solemn"],l.listInstantaneousTempoLento=["Lento","Lent","Langsam","slowly"],l.listInstantaneousTempoLargo=["Largo","Breit","broadly"],l.listInstantaneousTempoLarghetto=["Larghetto","Etwas breit","rather broadly"],l.listInstantaneousTempoAdagio=["Adagio","Langsam","Ruhig","slow and stately"],l.listInstantaneousTempoAdagietto=["Adagietto","Ziemlich ruhig","Ziemlich langsam","rather slow"],l.listInstantaneousTempoAndanteModerato=["Andante moderato"],l.listInstantaneousTempoAndante=["Andante","Gehend","Schreitend","at a walking pace"],l.listInstantaneousTempoAndantino=["Andantino"],l.listInstantaneousTempoModerato=["Moderato","M\xe4\xdfig","Mod\ufffdr\ufffd","moderately"],l.listInstantaneousTempoAllegretto=["Allegretto","fast"],l.listInstantaneousTempoAllegroModerato=["Allegro moderato"],l.listInstantaneousTempoAllegro=["Allegro","Rapide","Vite","Rasch","Schnell","Fr\ufffdhlich"],l.listInstantaneousTempoVivace=["Vivace","Lebhaft","Lebendig","lively and fast"],l.listInstantaneousTempoVivacissimo=["Vivacissimo","Sehr lebhaft","Sehr lebendig"],l.listInstantaneousTempoAllegrissimo=["Allegrissimo","very fast"],l.listInstantaneousTempoPresto=["Presto","Sehr schnell","Geschwind"],l.listInstantaneousTempoPrestissimo=["Prestissimo","\xe4u\xdferst schnell"],l.listInstantaneousTempoChangesGeneral=["tempo primo","a tempo","tempo i","rubato","doppio movimento"],l.listInstantaneousTempoAddons=["assai","amoroso","cantabile","con brio","con dolore","con espressione","con fuoco","con moto","con spirito","spiritoso","espressivo","giocoso","giusto","grazioso","lesto","lugubre","maestoso","ma non troppo","marcato","molto","morendo","mosso","non tanto","piu","un poco","poco","quasi","risoluto","scherzando","sostenuto","teneramente","tempo giusto","tranquillo","sehr","lieblich","liebevoll","mit Leidenschaft","mit Liebe","amour\xf6s","gesanglich","mit Schwung","mit Feuer","mit Schmerz","mit Ausdruck","mit Bewegung","geistvoll","ausdrucksvoll","freudig","verspielt","angemessen","grazi\xf6s","mit Grazie","flink","beh\xe4nde","traurig","klagend","majest\xe4tisch","aber nicht zu sehr","markant","gem\xe4\xdfigt","viel","sehr","ersterbend","bewegt","nicht zu sehr","mehr","ein wenig","gleichsam","entschlossen","zupackend","heiter","nachdr\xfccklich","getragen","gewichtig","zart","z\xe4rtlich","im angemessenen Zeitma\xdf","ruhig","ein wenig","alla marcia","ad libitum","alla breve"],function(t){t[t.none=0]="none",t[t.larghissimo=1]="larghissimo",t[t.grave=2]="grave",t[t.lento=3]="lento",t[t.largo=4]="largo",t[t.larghetto=5]="larghetto",t[t.adagio=6]="adagio",t[t.adagietto=7]="adagietto",t[t.andanteModerato=8]="andanteModerato",t[t.andante=9]="andante",t[t.andantino=10]="andantino",t[t.moderato=11]="moderato",t[t.allegretto=12]="allegretto",t[t.allegroModerato=13]="allegroModerato",t[t.allegro=14]="allegro",t[t.vivace=15]="vivace",t[t.vivacissimo=16]="vivacissimo",t[t.allegrissimo=17]="allegrissimo",t[t.presto=18]="presto",t[t.prestissimo=19]="prestissimo",t[t.lastRealTempo=20]="lastRealTempo",t[t.addon=21]="addon",t[t.changes=22]="changes",t[t.metronomeMark=23]="metronomeMark"}(o=e.TempoEnum||(e.TempoEnum={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(0),a=function(t){n(i,t);var e=r(i);function i(t,n,r,o){var s;return h(this,i),(s=e.call(this,t,n,r,o)).setTempoType(),s}return d(i,[{key:"getAbsoluteFloatTimestamp",value:function(){return this.ParentMultiTempoExpression.AbsoluteTimestamp.RealValue}},{key:"getInterpolatedTempo",value:function(t){var e=s.Fraction.plus(this.parentMultiTempoExpression.SourceMeasureParent.AbsoluteTimestamp,this.parentMultiTempoExpression.Timestamp);if(t.lt(e))return-1;if(this.absoluteEndTimestamp.lt(t))return-2;var n=s.Fraction.minus(t,e).RealValue/s.Fraction.minus(this.absoluteEndTimestamp,e).RealValue;return Math.max(0,Math.min(250,this.startTempo+(this.endTempo-this.startTempo)*n))}},{key:"setTempoType",value:function(){i.isStringInStringList(i.listContinuousTempoFaster,this.label)?this.tempoType=o.accelerando:i.isStringInStringList(i.listContinuousTempoSlower,this.label)&&(this.tempoType=o.ritardando)}},{key:"TempoType",get:function(){return this.tempoType},set:function(t){this.tempoType=t}},{key:"StartTempo",get:function(){return this.startTempo},set:function(t){this.startTempo=t}},{key:"EndTempo",get:function(){return this.endTempo},set:function(t){this.endTempo=t}},{key:"AbsoluteEndTimestamp",get:function(){return this.absoluteEndTimestamp},set:function(t){this.absoluteEndTimestamp=t}},{key:"AbsoluteTimestamp",get:function(){return this.ParentMultiTempoExpression.AbsoluteTimestamp}}],[{key:"isInputStringContinuousTempo",value:function(t){return void 0!==t&&(i.isStringInStringList(i.listContinuousTempoFaster,t)||i.isStringInStringList(i.listContinuousTempoSlower,t))}},{key:"isIncreasingTempo",value:function(t){return t<=o.piuMosso}},{key:"isDecreasingTempo",value:function(t){return t>=o.allargando&&t<=o.ritenuto}}]),i}(i(114).AbstractTempoExpression);e.ContinuousTempoExpression=a,a.listContinuousTempoFaster=["accelerando","piu mosso","poco piu","stretto"],a.listContinuousTempoSlower=["poco meno","meno mosso","piu lento","calando","allargando","rallentando","ritardando","ritenuto","ritard.","ritard","rit.","rit","riten.","riten"],function(t){t[t.accelerando=0]="accelerando",t[t.stretto=1]="stretto",t[t.stringendo=2]="stringendo",t[t.mosso=3]="mosso",t[t.piuMosso=4]="piuMosso",t[t.allargando=5]="allargando",t[t.calando=6]="calando",t[t.menoMosso=7]="menoMosso",t[t.rallentando=8]="rallentando",t[t.ritardando=9]="ritardando",t[t.ritard=10]="ritard",t[t.rit=11]="rit",t[t.ritenuto=12]="ritenuto",t[t.rubato=13]="rubato",t[t.precipitando=14]="precipitando"}(o=e.ContinuousTempoType||(e.ContinuousTempoType={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(75),s=i(16),a=i(118);e.Instrument=function(t){n(i,t);var e=r(i);function i(t,n,r,o){var a;return h(this,i),(a=e.call(this,void 0,r,o)).transpose=0,a.voices=[],a.staves=[],a.hasLyrics=!1,a.hasChordSymbols=!1,a.lyricVersesNumbers=[],a.subInstruments=[],a.id=t,a.idString=n,a.nameLabel=new s.Label(n),a}return d(i,[{key:"getSubInstrument",value:function(t){for(var e=0,n=this.subInstruments.length;e<n;++e){var i=this.subInstruments[e];if(i.idString===t)return i}}},{key:"SetVoiceAudible",value:function(t,e){for(var n=0,i=this.Voices.length;n<i;++n){var r=this.Voices[n];if(r.VoiceId===t){r.Audible=e;break}}}},{key:"SetVoiceFollowing",value:function(t,e){for(var n=0,i=this.Voices.length;n<i;++n){var r=this.Voices[n];if(r.VoiceId===t){r.Following=e;break}}}},{key:"SetStaffAudible",value:function(t,e){var n=this.staves[t-1];if(n.audible=e,e)for(var i=0,r=n.Voices.length;i<r;++i)n.Voices[i].Audible=!0;else for(var o=0,s=n.Voices.length;o<s;++o){for(var a=n.Voices[o],u=!1,l=0,c=this.Staves.length;l<c;++l){var h=this.Staves[l];if(h.Id!==t&&h.audible)for(var f=0,d=h.Voices.length;f<d;++f)h.Voices[f]===a&&(u=!0)}u||(a.Audible=!1)}}},{key:"SetStaffFollow",value:function(t,e){var n=this.staves[t-1];if(n.following=e,e)for(var i=0,r=n.Voices.length;i<r;++i)n.Voices[i].Following=!0;else for(var o=0,s=n.Voices.length;o<s;++o){for(var a=n.Voices[o],u=!1,l=0,c=this.Staves.length;l<c;++l){var h=this.Staves[l];if(h.Id!==t&&h.following)for(var f=0,d=h.Voices.length;f<d;++f)h.Voices[f]===a&&(u=!0)}u||(a.Following=!1)}}},{key:"areAllVoiceVisible",value:function(){var t,e=u(this.Voices);try{for(e.s();!(t=e.n()).done;){if(!t.value.Visible)return!1}}catch(n){e.e(n)}finally{e.f()}return!0}},{key:"createStaves",value:function(t){for(var e=0;e<t;e++)this.staves.push(new a.Staff(this,e+1))}},{key:"toString",value:function(){return"".concat(this.Name," , id: ").concat(this.id,", idstring: ").concat(this.idString)}},{key:"Voices",get:function(){return this.voices}},{key:"Staves",get:function(){return this.staves}},{key:"NameLabel",get:function(){return this.nameLabel}},{key:"HasLyrics",get:function(){return this.hasLyrics},set:function(t){this.hasLyrics=t}},{key:"HasChordSymbols",get:function(){return this.hasChordSymbols},set:function(t){this.hasChordSymbols=t}},{key:"LyricVersesNumbers",get:function(){return this.lyricVersesNumbers},set:function(t){this.lyricVersesNumbers=t}},{key:"Name",get:function(){return this.nameLabel.text},set:function(t){this.nameLabel.text=t}},{key:"IdString",get:function(){return this.idString}},{key:"Id",get:function(){return this.id}},{key:"MidiInstrumentId",get:function(){return this.subInstruments[0].midiInstrumentID},set:function(t){this.subInstruments[0].midiInstrumentID=t}},{key:"Volume",get:function(){return this.subInstruments[0].volume},set:function(t){for(var e=0,n=this.subInstruments.length;e<n;++e)this.subInstruments[e].volume=t}},{key:"PlaybackTranspose",get:function(){return this.playbackTranspose},set:function(t){this.playbackTranspose=t}},{key:"SubInstruments",get:function(){return this.subInstruments}},{key:"PartAbbreviation",get:function(){return this.partAbbreviation},set:function(t){this.partAbbreviation=t}},{key:"Visible",get:function(){return this.voices.length>0&&this.Voices[0].Visible},set:function(t){for(var e=0,n=this.Voices.length;e<n;++e)this.Voices[e].Visible=t}},{key:"Audible",get:function(){for(var t=!1,e=0,n=this.Voices.length;e<n;++e){var i=this.Voices[e];t=t||i.Audible}return t},set:function(t){for(var e=0,n=this.Voices.length;e<n;++e)this.Voices[e].Audible=t;for(var i=0,r=this.staves.length;i<r;++i)this.staves[i].audible=t}},{key:"Following",get:function(){for(var t=!1,e=0,n=this.Voices.length;e<n;++e){var i=this.Voices[e];t=t||i.Following}return t},set:function(t){for(var e=0,n=this.Voices.length;e<n;++e)this.Voices[e].Following=t;for(var i=0,r=this.staves.length;i<r;++i)this.staves[i].following=t}}]),i}(o.InstrumentalGroup)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InstrumentalGroup=function(){function t(e,n,i){h(this,t),this.instrumentalGroups=[],this.name=e,this.musicSheet=n,this.parent=i}return d(t,[{key:"InstrumentalGroups",get:function(){return this.instrumentalGroups}},{key:"Parent",get:function(){return this.parent}},{key:"Name",get:function(){return this.name},set:function(t){this.name=t}},{key:"GetMusicSheet",get:function(){return this.musicSheet}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(1),o=function(){function t(e,n,i){h(this,t),this.sourceNote=e,this.setShapeFromXml(n,i)}return d(t,[{key:"setShapeFromXml",value:function(e,n){this.shape=t.ShapeTypeXmlToShape(e);var i=n;void 0===i&&(void 0===this.sourceNote?(r.warn("notehead: sourceNote and filledXmlAttribute undefined."),i=!0):i=this.sourceNote.Length.Denominator>2),this.filled=i}},{key:"SourceNote",get:function(){return this.sourceNote}},{key:"Shape",get:function(){return this.shape}},{key:"Filled",get:function(){return this.filled}}],[{key:"ShapeTypeXmlToShape",value:function(t){switch(t.toLowerCase()){case"normal":return i.NORMAL;case"x":return i.X;case"slash":return i.SLASH;case"diamond":return i.DIAMOND;case"square":case"la":return i.SQUARE;case"do":case"triangle":return i.TRIANGLE;case"rectangle":return i.RECTANGLE;case"circle-x":return i.CIRCLEX;default:return r.info("unsupported/unhandled xml notehead '"+t+"'. Using normal notehead."),i.NORMAL}}}]),t}();e.Notehead=o,function(t){t[t.CIRCLEX=0]="CIRCLEX",t[t.DIAMOND=1]="DIAMOND",t[t.NORMAL=2]="NORMAL",t[t.RECTANGLE=3]="RECTANGLE",t[t.SLASH=4]="SLASH",t[t.SQUARE=5]="SQUARE",t[t.TRIANGLE=6]="TRIANGLE",t[t.X=7]="X"}(i=e.NoteHeadShape||(e.NoteHeadShape={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.Unused_first_Symbol=0]="Unused_first_Symbol",t[t.BLACK_HEAD=1]="BLACK_HEAD",t[t.UPWARDS_TAIL=2]="UPWARDS_TAIL",t[t.DOWNWARDS_TAIL=3]="DOWNWARDS_TAIL",t[t.UPWARDS_DOUBLE_TAIL=4]="UPWARDS_DOUBLE_TAIL",t[t.DOWNWARDS_DOUBLE_TAIL=5]="DOWNWARDS_DOUBLE_TAIL",t[t.UPWARDS_TRIPLE_TAIL=6]="UPWARDS_TRIPLE_TAIL",t[t.DOWNWARDS_TRIPLE_TAIL=7]="DOWNWARDS_TRIPLE_TAIL",t[t.UPWARDS_QUAD_TAIL=8]="UPWARDS_QUAD_TAIL",t[t.DOWNWARDS_QUAD_TAIL=9]="DOWNWARDS_QUAD_TAIL",t[t.ROUND_HEAD=10]="ROUND_HEAD",t[t.WHITE_HEAD=11]="WHITE_HEAD",t[t.G_CLEF=12]="G_CLEF",t[t.F_CLEF=13]="F_CLEF",t[t.C_CLEF=14]="C_CLEF",t[t.BREVE=15]="BREVE",t[t.BREVE_REST=16]="BREVE_REST",t[t.COMMON_TIME=17]="COMMON_TIME",t[t.CUT_TIME=18]="CUT_TIME",t[t.WHOLE_REST=19]="WHOLE_REST",t[t.HALF_REST=20]="HALF_REST",t[t.QUARTER_REST=21]="QUARTER_REST",t[t.EIGHTH_REST=22]="EIGHTH_REST",t[t.SIXTEENTH_REST=23]="SIXTEENTH_REST",t[t.THIRTYSECOND_REST=24]="THIRTYSECOND_REST",t[t.SIXTYFOURTH_REST=25]="SIXTYFOURTH_REST",t[t.FLAT=26]="FLAT",t[t.SHARP=27]="SHARP",t[t.NATURAL=28]="NATURAL",t[t.DOUBLE_FLAT=29]="DOUBLE_FLAT",t[t.DOUBLE_SHARP=30]="DOUBLE_SHARP",t[t.ZERO=31]="ZERO",t[t.ONE=32]="ONE",t[t.TWO=33]="TWO",t[t.THREE=34]="THREE",t[t.FOUR=35]="FOUR",t[t.FIVE=36]="FIVE",t[t.SIX=37]="SIX",t[t.SEVEN=38]="SEVEN",t[t.EIGHT=39]="EIGHT",t[t.NINE=40]="NINE",t[t.DOT=41]="DOT",t[t.FERMATA=42]="FERMATA",t[t.INVERTED_FERMATA=43]="INVERTED_FERMATA",t[t.SPICCATO=44]="SPICCATO",t[t.TENUTO=45]="TENUTO",t[t.MARCATO=46]="MARCATO",t[t.MARCATISSIMO=47]="MARCATISSIMO",t[t.INVERTED_MARCATISSIMO=48]="INVERTED_MARCATISSIMO",t[t.P=49]="P",t[t.F=50]="F",t[t.S=51]="S",t[t.Z=52]="Z",t[t.M=53]="M",t[t.R=54]="R",t[t.SEGNO=55]="SEGNO",t[t.CODA=56]="CODA",t[t.DRUM_CLEF=57]="DRUM_CLEF",t[t.G_CLEF_SUB8=58]="G_CLEF_SUB8",t[t.G_CLEF_SUPER8=59]="G_CLEF_SUPER8",t[t.G_CLEF_SUB15=60]="G_CLEF_SUB15",t[t.G_CLEF_SUPER15=61]="G_CLEF_SUPER15",t[t.F_CLEF_SUB8=62]="F_CLEF_SUB8",t[t.F_CLEF_SUPER8=63]="F_CLEF_SUPER8",t[t.F_CLEF_SUB15=64]="F_CLEF_SUB15",t[t.F_CLEF_SUPER15=65]="F_CLEF_SUPER15",t[t.DOWN_BOW=66]="DOWN_BOW",t[t.MORDENT=67]="MORDENT",t[t.INVERTED_MORDENT=68]="INVERTED_MORDENT",t[t.TURN=69]="TURN",t[t.INVERTED_TURN=70]="INVERTED_TURN",t[t.LEFTHAND_PIZZICATO=71]="LEFTHAND_PIZZICATO",t[t.RELEASE_PED=72]="RELEASE_PED",t[t.ENGAGE_PED=73]="ENGAGE_PED",t[t.VA8=74]="VA8",t[t.VB8=75]="VB8",t[t.TRILL=76]="TRILL",t[t.MA15=77]="MA15",t[t.MB15=78]="MB15",t[t.HIGH=79]="HIGH",t[t.PLAY=80]="PLAY",t[t.MIC=81]="MIC",t[t.SNAP_PIZZICATO=82]="SNAP_PIZZICATO",t[t.NATURAL_HARMONIC=83]="NATURAL_HARMONIC",t[t.EditPen=84]="EditPen"}(e.MusicSymbol||(e.MusicSymbol={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(19);e.VexFlowTextMeasurer=function(){function t(e){h(this,t),this.fontSize=20,this.fontSizeStandard=this.fontSize;var n=document.createElement("canvas");this.context=n.getContext("2d"),this.rules=e}return d(t,[{key:"computeTextWidthToHeightRatio",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.fontSize;return this.context.font=i.VexFlowConverter.font(r,n,e,this.rules),this.context.measureText(t).width/r}},{key:"setFontSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.fontSizeStandard;return this.fontSize=t,t}}]),t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(57),s=i(7),a=i(1);e.GraphicalInstantaneousDynamicExpression=function(t){n(i,t);var e=r(i);function i(t,n,r){var o;return h(this,i),(o=e.call(this,n,t)).mInstantaneousDynamicExpression=t,o.mMeasure=r,o}return d(i,[{key:"updateSkyBottomLine",value:function(){var t=this.parentStaffLine.SkyBottomLineCalculator,e=this.PositionAndShape.RelativePosition.x+this.PositionAndShape.BorderMarginLeft,n=this.PositionAndShape.RelativePosition.x+this.PositionAndShape.BorderMarginRight,i=0;switch(this.Placement){case s.PlacementEnum.Above:i=this.PositionAndShape.RelativePosition.y+this.PositionAndShape.BorderMarginTop,t.updateSkyLineInRange(e,n,i);break;case s.PlacementEnum.Below:i=this.PositionAndShape.RelativePosition.y+this.PositionAndShape.BorderMarginBottom,t.updateBottomLineInRange(e,n,i);break;default:a.error("Placement for GraphicalInstantaneousDynamicExpression is unknown")}}}]),i}(o.AbstractGraphicalExpression)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r,o=n(2),s=n(22),a=n(2),u=function(){function t(e,n,i,r,o){h(this,t),this.rootPitch=e,this.chordKind=n,this.keyInstruction=o,this.bassPitch=i,this.degree=r}return d(t,[{key:"RootPitch",get:function(){return this.rootPitch}},{key:"ChordKind",get:function(){return this.chordKind}},{key:"BassPitch",get:function(){return this.bassPitch}},{key:"ChordDegree",get:function(){return this.degree}},{key:"KeyInstruction",get:function(){return this.keyInstruction}}],[{key:"calculateChordText",value:function(e,n){var r=e.RootPitch;void 0!==s.MusicSheetCalculator.transposeCalculator&&(r=s.MusicSheetCalculator.transposeCalculator.transposePitch(e.RootPitch,e.KeyInstruction,n));var u=o.Pitch.getNoteEnumString(r.FundamentalNote);if(r.Accidental!==a.AccidentalEnum.NONE&&(u+=this.getTextForAccidental(r.Accidental)),u+=t.getTextFromChordKindEnum(e.ChordKind),void 0!==e.BassPitch){var l=e.BassPitch;void 0!==s.MusicSheetCalculator.transposeCalculator&&(l=s.MusicSheetCalculator.transposeCalculator.transposePitch(e.BassPitch,e.KeyInstruction,n)),u+="/",u+=o.Pitch.getNoteEnumString(l.FundamentalNote),u+=this.getTextForAccidental(l.Accidental)}if(void 0!==e.ChordDegree){switch(e.ChordDegree.text){case i.add:u+="add";break;case i.alter:u+="alt";break;case i.subtract:u+="sub"}u+=e.ChordDegree.value,e.ChordDegree.alteration!==a.AccidentalEnum.NONE&&(u+=t.getTextForAccidental(e.ChordDegree.alteration))}return u}},{key:"getTextForAccidental",value:function(t){var e="";switch(t){case a.AccidentalEnum.DOUBLEFLAT:e+="bb";break;case a.AccidentalEnum.FLAT:e+="b";break;case a.AccidentalEnum.SHARP:e+="#";break;case a.AccidentalEnum.DOUBLESHARP:e+="x"}return e}},{key:"getTextFromChordKindEnum",value:function(t){var e="";switch(t){case r.major:break;case r.minor:e+="m";break;case r.augmented:e+="aug";break;case r.diminished:e+="dim";break;case r.dominant:e+="7";break;case r.majorseventh:e+="maj7";break;case r.minorseventh:e+="m7";break;case r.diminishedseventh:e+="dim7";break;case r.augmentedseventh:e+="aug7";break;case r.halfdiminished:e+="m7b5";break;case r.majorminor:e+="";break;case r.majorsixth:e+="maj6";break;case r.minorsixth:e+="m6";break;case r.dominantninth:e+="9";break;case r.majorninth:e+="maj9";break;case r.minorninth:e+="m9";break;case r.dominant11th:e+="11";break;case r.major11th:e+="maj11";break;case r.minor11th:e+="m11";break;case r.dominant13th:e+="13";break;case r.major13th:e+="maj13";break;case r.minor13th:e+="m13";break;case r.suspendedsecond:e+="sus2";break;case r.suspendedfourth:e+="sus4"}return e}}]),t}();e.ChordSymbolContainer=u,e.Degree=function(){return function t(e,n,i){h(this,t),this.value=e,this.alteration=n,this.text=i}}(),function(t){t[t.add=0]="add",t[t.alter=1]="alter",t[t.subtract=2]="subtract"}(i=e.ChordDegreeText||(e.ChordDegreeText={})),function(t){t[t.major=0]="major",t[t.minor=1]="minor",t[t.augmented=2]="augmented",t[t.diminished=3]="diminished",t[t.dominant=4]="dominant",t[t.majorseventh=5]="majorseventh",t[t.minorseventh=6]="minorseventh",t[t.diminishedseventh=7]="diminishedseventh",t[t.augmentedseventh=8]="augmentedseventh",t[t.halfdiminished=9]="halfdiminished",t[t.majorminor=10]="majorminor",t[t.majorsixth=11]="majorsixth",t[t.minorsixth=12]="minorsixth",t[t.dominantninth=13]="dominantninth",t[t.majorninth=14]="majorninth",t[t.minorninth=15]="minorninth",t[t.dominant11th=16]="dominant11th",t[t.major11th=17]="major11th",t[t.minor11th=18]="minor11th",t[t.dominant13th=19]="dominant13th",t[t.major13th=20]="major13th",t[t.minor13th=21]="minor13th",t[t.suspendedsecond=22]="suspendedsecond",t[t.suspendedfourth=23]="suspendedfourth",t[t.Neapolitan=24]="Neapolitan",t[t.Italian=25]="Italian",t[t.French=26]="French",t[t.German=27]="German",t[t.pedal=28]="pedal",t[t.power=29]="power",t[t.Tristan=30]="Tristan"}(r=e.ChordSymbolEnum||(e.ChordSymbolEnum={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(56),o=n(30),s=n(31),a=n(17),l=n(15),c=n(47);e.SourceMeasure=function(){function t(e,n){h(this,t),this.printNewSystemXml=!1,this.printNewPageXml=!1,this.staffLinkedExpressions=[],this.tempoExpressions=[],this.verticalSourceStaffEntryContainers=[],this.graphicalMeasureErrors=[],this.firstRepetitionInstructions=[],this.lastRepetitionInstructions=[],this.completeNumberOfStaves=e,this.implicitMeasure=!1,this.breakSystemAfter=!1,this.endsPiece=!1,this.endingBarStyleXml="",this.endingBarStyleEnum=c.SystemLinesEnum.SingleThin,this.firstInstructionsStaffEntries=new Array(e),this.lastInstructionsStaffEntries=new Array(e),this.rules=n,this.TempoInBPM=0;for(var i=0;i<e;i++)this.graphicalMeasureErrors.push(!1),this.staffLinkedExpressions.push([])}return d(t,[{key:"getErrorInMeasure",value:function(t){return this.graphicalMeasureErrors[t]}},{key:"setErrorInGraphicalMeasure",value:function(t,e){this.graphicalMeasureErrors[t]=e}},{key:"getNextMeasure",value:function(t){return t[this.measureListIndex+1]}},{key:"getPreviousMeasure",value:function(t){if(this.measureListIndex>1)return t[this.measureListIndex-1]}},{key:"findOrCreateStaffEntry",value:function(t,e,n){var i,s,a=void 0,l=u(this.verticalSourceStaffEntryContainers);try{for(l.s();!(s=l.n()).done;){var c=s.value;if(c.Timestamp.Equals(t)){i=c;break}}}catch(m){l.e(m)}finally{l.f()}if(void 0!==i)return void 0!==i.StaffEntries[e]?a=i.StaffEntries[e]:(a=new o.SourceStaffEntry(i,n),i.StaffEntries[e]=a),{createdNewContainer:!1,staffEntry:a};if(0===this.verticalSourceStaffEntryContainers.length||this.verticalSourceStaffEntryContainers[this.verticalSourceStaffEntryContainers.length-1].Timestamp.lt(t)){var h=new r.VerticalSourceStaffEntryContainer(this,t.clone(),this.completeNumberOfStaves);this.verticalSourceStaffEntryContainers.push(h),a=new o.SourceStaffEntry(h,n),h.StaffEntries[e]=a}else for(var f=this.verticalSourceStaffEntryContainers.length-1;f>=0;f--){if(this.verticalSourceStaffEntryContainers[f].Timestamp.lt(t)){var d=new r.VerticalSourceStaffEntryContainer(this,t.clone(),this.completeNumberOfStaves);this.verticalSourceStaffEntryContainers.splice(f+1,0,d),a=new o.SourceStaffEntry(d,n),d.StaffEntries[e]=a;break}if(0===f){var p=new r.VerticalSourceStaffEntryContainer(this,t.clone(),this.completeNumberOfStaves);this.verticalSourceStaffEntryContainers.splice(f,0,p),a=new o.SourceStaffEntry(p,n),p.StaffEntries[e]=a;break}}return{createdNewContainer:!0,staffEntry:a}}},{key:"findOrCreateVoiceEntry",value:function(t,e){var n,i=void 0,r=!1,o=u(t.VoiceEntries);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(s.ParentVoice===e){i=s;break}}}catch(l){o.e(l)}finally{o.f()}return void 0===i&&(i=new a.VoiceEntry(t.Timestamp,e,t),t.VoiceEntries.push(i),r=!0),{createdVoiceEntry:r,voiceEntry:i}}},{key:"getPreviousSourceStaffEntryFromIndex",value:function(t,e){for(var n=e-1;n>=0;n--)if(void 0!==this.verticalSourceStaffEntryContainers[n][t])return this.verticalSourceStaffEntryContainers[n][t]}},{key:"getVerticalContainerIndexByTimestamp",value:function(t){for(var e=0,n=this.VerticalSourceStaffEntryContainers.length;e<n;++e)if(this.VerticalSourceStaffEntryContainers[e].Timestamp.Equals(t))return e;return-1}},{key:"getVerticalContainerByTimestamp",value:function(t){for(var e=0,n=this.VerticalSourceStaffEntryContainers.length;e<n;++e){var i=this.VerticalSourceStaffEntryContainers[e];if(i.Timestamp.Equals(t))return i}}},{key:"checkForEmptyVerticalContainer",value:function(t){for(var e=0,n=0;n<this.completeNumberOfStaves;n++)void 0===this.verticalSourceStaffEntryContainers[t][n]&&e++;e===this.completeNumberOfStaves&&this.verticalSourceStaffEntryContainers.splice(t,1)}},{key:"reverseCheck",value:function(t,e){for(var n=new i.Fraction(0,1),r=[],o=0;o<t.Instruments.length;o++){for(var s=new i.Fraction(0,1),a=t.getGlobalStaffIndexOfFirstStaff(t.Instruments[o]),u=0;u<t.Instruments[o].Staves.length;u++){var l=this.getLastSourceStaffEntryForInstrument(a+u);if(void 0!==l&&!l.hasTie())for(var c=this.verticalSourceStaffEntryContainers.indexOf(l.VerticalContainerParent)-1;c>=0;c--){var h=this.verticalSourceStaffEntryContainers[c][a+u];if(void 0!==h&&h.hasTie()&&s.lt(i.Fraction.plus(h.Timestamp,h.calculateMaxNoteLength()))){s=i.Fraction.plus(h.Timestamp,h.calculateMaxNoteLength());break}}}r.push(s)}for(var f=0,d=r.length;f<d;++f){var p=r[f];n.lt(p)&&(n=p)}return i.Fraction.max(n,e)}},{key:"calculateInstrumentsDuration",value:function(t,e){for(var n=[],r=0;r<t.Instruments.length;r++){for(var o=new i.Fraction(0,1),s=t.getGlobalStaffIndexOfFirstStaff(t.Instruments[r]),a=0;a<t.Instruments[r].Staves.length;a++){var u=this.getLastSourceStaffEntryForInstrument(s+a);void 0!==u&&void 0!==u.Timestamp&&o.lt(i.Fraction.plus(u.Timestamp,u.calculateMaxNoteLength()))&&(o=i.Fraction.plus(u.Timestamp,u.calculateMaxNoteLength()))}o.lt(e[r])&&(o=e[r]),n.push(o)}return n}},{key:"getEntriesPerStaff",value:function(t){var e,n=[],i=u(this.VerticalSourceStaffEntryContainers);try{for(i.s();!(e=i.n()).done;){var r=e.value.StaffEntries[t];void 0!==r&&n.push(r)}}catch(o){i.e(o)}finally{i.f()}return n}},{key:"hasBeginInstructions",value:function(){for(var t=0,e=this.FirstInstructionsStaffEntries.length;t<e;t++){var n=this.FirstInstructionsStaffEntries[t];if(void 0!==n&&n.Instructions.length>0)return!0}return!1}},{key:"beginsWithLineRepetition",value:function(){for(var t=0,e=this.FirstRepetitionInstructions.length;t<e;++t){var n=this.FirstRepetitionInstructions[t];if(n.type===s.RepetitionInstructionEnum.StartLine)return!0;if(void 0!==n.parentRepetition&&n===n.parentRepetition.startMarker&&!n.parentRepetition.FromWords)return!0}return!1}},{key:"endsWithLineRepetition",value:function(){for(var t=0,e=this.LastRepetitionInstructions.length;t<e;++t){var n=this.LastRepetitionInstructions[t];if(n.type===s.RepetitionInstructionEnum.BackJumpLine)return!0;var i=n.parentRepetition;if(void 0!==i&&!i.FromWords)for(var r=0,o=i.BackwardJumpInstructions.length;r<o;++r)if(n===i.BackwardJumpInstructions[r])return!0}return!1}},{key:"beginsWithWordRepetition",value:function(){for(var t=0,e=this.FirstRepetitionInstructions.length;t<e;++t){var n=this.FirstRepetitionInstructions[t];if(void 0!==n.parentRepetition&&n===n.parentRepetition.startMarker&&n.parentRepetition.FromWords)return!0}return!1}},{key:"endsWithWordRepetition",value:function(){for(var t=0,e=this.LastRepetitionInstructions.length;t<e;++t){var n=this.LastRepetitionInstructions[t],i=n.parentRepetition;if(void 0!==i&&i.FromWords){for(var r=0,o=i.BackwardJumpInstructions.length;r<o;++r)if(n===i.BackwardJumpInstructions[r])return!0;if(n===i.forwardJumpInstruction)return!0}}return!1}},{key:"beginsRepetitionEnding",value:function(){var t,e=u(this.FirstRepetitionInstructions);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(n.type===s.RepetitionInstructionEnum.Ending&&n.alignment===s.AlignmentType.Begin)return!0}}catch(i){e.e(i)}finally{e.f()}return!1}},{key:"endsRepetitionEnding",value:function(){var t,e=u(this.LastRepetitionInstructions);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(n.type===s.RepetitionInstructionEnum.Ending&&n.alignment===s.AlignmentType.End)return!0}}catch(i){e.e(i)}finally{e.f()}return!1}},{key:"getKeyInstruction",value:function(t){if(void 0!==this.FirstInstructionsStaffEntries[t])for(var e=this.FirstInstructionsStaffEntries[t],n=0,i=e.Instructions.length;n<i;++n){var r=e.Instructions[n];if(r instanceof l.KeyInstruction)return r}}},{key:"getLastSourceStaffEntryForInstrument",value:function(t){for(var e,n=this.verticalSourceStaffEntryContainers.length-1;n>=0&&!(e=this.verticalSourceStaffEntryContainers[n].StaffEntries[t]);n--);return e}},{key:"MeasureNumber",get:function(){return this.measureNumber},set:function(t){this.measureNumber=t}},{key:"AbsoluteTimestamp",get:function(){return this.absoluteTimestamp},set:function(t){this.absoluteTimestamp=t}},{key:"CompleteNumberOfStaves",get:function(){return this.completeNumberOfStaves}},{key:"Duration",get:function(){return this.duration},set:function(t){this.duration=t}},{key:"ActiveTimeSignature",get:function(){return this.activeTimeSignature},set:function(t){this.activeTimeSignature=t}},{key:"ImplicitMeasure",get:function(){return this.implicitMeasure},set:function(t){this.implicitMeasure=t}},{key:"BreakSystemAfter",get:function(){return this.breakSystemAfter},set:function(t){this.breakSystemAfter=t}},{key:"StaffLinkedExpressions",get:function(){return this.staffLinkedExpressions}},{key:"TempoExpressions",get:function(){return this.tempoExpressions}},{key:"VerticalSourceStaffEntryContainers",get:function(){return this.verticalSourceStaffEntryContainers}},{key:"FirstInstructionsStaffEntries",get:function(){return this.firstInstructionsStaffEntries}},{key:"LastInstructionsStaffEntries",get:function(){return this.lastInstructionsStaffEntries}},{key:"FirstRepetitionInstructions",get:function(){return this.firstRepetitionInstructions}},{key:"LastRepetitionInstructions",get:function(){return this.lastRepetitionInstructions}},{key:"Rules",get:function(){return this.rules}},{key:"VerticalMeasureList",get:function(){return this.verticalMeasureList},set:function(t){this.verticalMeasureList=t}},{key:"TempoInBPM",get:function(){return this.tempoInBPM},set:function(t){this.tempoInBPM=t}}]),t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(58),s=i(25),a=i(16),u=i(8),l=i(46);e.VexFlowContinuousDynamicExpression=function(t){n(i,t);var e=r(i);function i(t,n,r){var o;return h(this,i),(o=e.call(this,t,n)).IsVerbal&&(o.label=new s.GraphicalLabel(new a.Label(t.Label),r||o.rules.ContinuousDynamicTextHeight,u.TextAlignmentEnum.LeftCenter,o.rules,o.PositionAndShape),o.label.Label.fontStyle=l.FontStyles.Italic,o.label.setLabelPositionAndShapeBorders(),o.PositionAndShape.calculateBoundingBox()),o}return i}(o.GraphicalContinuousDynamicExpression)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(10),s=i(84),a=i(19),u=i(50),l=i(52);e.CanvasVexFlowBackend=function(t){n(i,t);var e=r(i);function i(t){var n;return h(this,i),(n=e.call(this)).rules=t,n}return d(i,[{key:"getVexflowBackendType",value:function(){return 1}},{key:"getOSMDBackendType",value:function(){return u.BackendType.Canvas}},{key:"initialize",value:function(t){this.canvas=document.createElement("canvas"),this.graphicalMusicPage||(this.graphicalMusicPage=new l.GraphicalMusicPage(void 0),this.graphicalMusicPage.PageNumber=1),this.canvas.id="osmdCanvasVexFlowBackendCanvas"+this.graphicalMusicPage.PageNumber,this.inner=document.createElement("div"),this.inner.style.position="relative",this.canvas.style.zIndex="0",this.inner.appendChild(this.canvas),t.appendChild(this.inner),this.renderer=new o.Flow.Renderer(this.canvas,this.getVexflowBackendType()),this.ctx=this.renderer.getContext()}},{key:"initializeHeadless",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;this.graphicalMusicPage||(this.graphicalMusicPage=new l.GraphicalMusicPage(void 0),this.graphicalMusicPage.PageNumber=1),this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=e,this.renderer=new o.Flow.Renderer(this.canvas,this.getVexflowBackendType()),this.ctx=this.renderer.getContext()}},{key:"getContext",value:function(){return this.ctx}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),void 0!==this.rules.PageBackgroundColor&&(this.ctx.save(),this.ctx.setFillStyle(this.rules.PageBackgroundColor),this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.restore())}},{key:"scale",value:function(t){this.ctx.scale(t,t)}},{key:"translate",value:function(t,e){this.CanvasRenderingCtx.translate(t,e)}},{key:"renderText",value:function(t,e,n,i,r,o,s){var u=this.CanvasRenderingCtx.font;this.CanvasRenderingCtx.save(),this.CanvasRenderingCtx.font=a.VexFlowConverter.font(t,e,n,this.rules),this.CanvasRenderingCtx.fillStyle=s,this.CanvasRenderingCtx.strokeStyle=s,this.CanvasRenderingCtx.fillText(i,o.x,o.y+r),this.CanvasRenderingCtx.restore(),this.CanvasRenderingCtx.font=u}},{key:"renderRectangle",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=this.CanvasRenderingCtx.fillStyle;this.CanvasRenderingCtx.fillStyle=a.VexFlowConverter.style(e),this.CanvasRenderingCtx.globalAlpha=n,this.ctx.fillRect(t.x,t.y,t.width,t.height),this.CanvasRenderingCtx.fillStyle=i,this.CanvasRenderingCtx.globalAlpha=1}},{key:"renderLine",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#FF0000FF",i=this.CanvasRenderingCtx.strokeStyle;this.CanvasRenderingCtx.strokeStyle=n,this.CanvasRenderingCtx.beginPath(),this.CanvasRenderingCtx.moveTo(t.x,t.y),this.CanvasRenderingCtx.lineTo(e.x,e.y),this.CanvasRenderingCtx.stroke(),this.CanvasRenderingCtx.strokeStyle=i}},{key:"renderCurve",value:function(t){this.ctx.beginPath(),this.ctx.moveTo(t[0].x,t[0].y),this.ctx.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y),this.ctx.lineTo(t[7].x,t[7].y),this.ctx.bezierCurveTo(t[6].x,t[6].y,t[5].x,t[5].y,t[4].x,t[4].y),this.ctx.lineTo(t[0].x,t[0].y),this.ctx.closePath(),this.ctx.fill()}},{key:"CanvasRenderingCtx",get:function(){return this.ctx.vexFlowCanvasContext}}]),i}(s.VexFlowBackend)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(10),e.VexFlowBackends=function(){return function t(){h(this,t)}}(),e.VexFlowBackend=function(){function t(){h(this,t)}return d(t,[{key:"getInnerElement",value:function(){return this.inner}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getRenderer",value:function(){return this.renderer}},{key:"removeAllChildrenFromContainer",value:function(t){for(;0!==t.children.length;)t.removeChild(t.children.item(0))}},{key:"removeFromContainer",value:function(t){var e=this.canvas;1===this.getVexflowBackendType()&&(e=this.inner);for(var n=0;n<t.children.length;n++)if(t.children.item(n)===e){t.removeChild(e);break}}},{key:"resize",value:function(t,e){this.renderer.resize(t,e)}}]),t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(10),a=i(6),u=i(4),l=i(20);e.VexFlowInstrumentBracket=function(t){n(i,t);var e=r(i);function i(t,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;h(this,i),(r=e.call(this)).PositionAndShape=new u.BoundingBox(s(r),t.ParentMusicSystem.PositionAndShape);var a=n.Measures[0];return r.addConnector(t.Measures[0].getVFStave(),a.getVFStave(),4,o),r}return d(i,[{key:"draw",value:function(t){this.vexflowConnector.setContext(t).draw();var e=this.vexflowConnector,n=e.top_stave.getYForLine(0),i=e.bottom_stave.getYForLine(e.bottom_stave.getNumLines()-1)+e.thickness;this.PositionAndShape.AbsolutePosition.x=(e.top_stave.getX()-2+e.x_shift)/l.unitInPixels,this.PositionAndShape.AbsolutePosition.y=n/l.unitInPixels,this.PositionAndShape.Size.height=(i-n)/l.unitInPixels,this.PositionAndShape.Size.width=12/l.unitInPixels}},{key:"addConnector",value:function(t,e,n,i){this.vexflowConnector=new o.Flow.StaveConnector(t,e).setType(n).setXShift(-5*i)}}]),i}(a.GraphicalObject)},function(t,i,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s,l=o(10),c=o(130),f=o(37),p=o(9),m=o(19),b=l.Flow.NoteSubGroup,v=o(1),y=o(20),g=o(31),S=o(44),w=o(17),_=o(87),x=o(0),k=o(45),E=o(88),P=o(7),A=o(59);i.VexFlowMeasure=function(t){n(o,t);var i=r(o);function o(t,e,n){var r;return h(this,o),(r=i.call(this,t,e,n)).octaveOffset=3,r.vfVoices={},r.vfTies=[],r.vfRepetitionWords=[],r.connectors=[],r.beams={},r.tuplets={},r.vftuplets={},r.minimumStaffEntriesWidth=-1,n?r.rules=n.ParentMusicSystem.rules:e&&(r.rules=e.Rules),r.resetLayout(),r}return d(o,[{key:"setAbsoluteCoordinates",value:function(t,e){this.stave.setX(t).setY(e)}},{key:"resetLayout",value:function(){this.stave=new l.Flow.Stave(0,0,0,{space_above_staff_ln:0,space_below_staff_ln:0}),this.stave.setBegBarType(7),this.parentSourceMeasure&&this.parentSourceMeasure.endingBarStyleEnum===f.SystemLinesEnum.None&&this.stave.setEndBarType(7),this.updateInstructionWidth()}},{key:"clean",value:function(){this.vfTies.length=0,this.connectors=[],this.resetLayout()}},{key:"getLineWidth",value:function(t){switch(t){case f.SystemLinesEnum.BoldThinDots:case f.SystemLinesEnum.DotsThinBold:case f.SystemLinesEnum.DotsBoldBoldDots:return 10/y.unitInPixels;default:return 0}}},{key:"addClefAtBegin",value:function(t){if(this.octaveOffset=t.OctaveOffset,t.ClefType===p.ClefEnum.TAB)this.stave.addClef("tab",void 0,void 0,void 0);else{var e=m.VexFlowConverter.Clef(t,"default");this.stave.addClef(e.type,e.size,e.annotation,5)}this.updateInstructionWidth()}},{key:"addKeyAtBegin",value:function(t,e,n){this.stave.setKeySignature(m.VexFlowConverter.keySignature(t),m.VexFlowConverter.keySignature(e),void 0),this.updateInstructionWidth()}},{key:"addRhythmAtBegin",value:function(t){var e=m.VexFlowConverter.TimeSignature(t);this.stave.addModifier(e,5),this.updateInstructionWidth()}},{key:"addClefAtEnd",value:function(t){var e=m.VexFlowConverter.Clef(t,"small");this.stave.setEndClef(e.type,e.size,e.annotation),this.updateInstructionWidth()}},{key:"addMeasureLine",value:function(t,e){switch(e){case S.SystemLinePosition.MeasureBegin:switch(t){case f.SystemLinesEnum.BoldThinDots:this.stave.setBegBarType(4)}break;case S.SystemLinePosition.MeasureEnd:switch(t){case f.SystemLinesEnum.DotsBoldBoldDots:this.stave.setEndBarType(6);break;case f.SystemLinesEnum.DotsThinBold:this.stave.setEndBarType(5);break;case f.SystemLinesEnum.DoubleThin:this.stave.setEndBarType(2);break;case f.SystemLinesEnum.ThinBold:this.stave.setEndBarType(3);break;case f.SystemLinesEnum.None:this.stave.setEndBarType(7)}}}},{key:"addMeasureNumber",value:function(){var t=this.MeasureNumber.toString();this.stave.setText(t,s.ABOVE,{justification:1,shift_x:0,shift_y:0})}},{key:"addWordRepetition",value:function(t){var e=void 0,n=6;switch(t.type){case g.RepetitionInstructionEnum.Segno:e=4,n=5;break;case g.RepetitionInstructionEnum.Coda:e=2,n=5;break;case g.RepetitionInstructionEnum.DaCapo:e=6;break;case g.RepetitionInstructionEnum.DalSegno:e=9;break;case g.RepetitionInstructionEnum.Fine:e=12;break;case g.RepetitionInstructionEnum.ToCoda:break;case g.RepetitionInstructionEnum.DaCapoAlFine:e=8;break;case g.RepetitionInstructionEnum.DaCapoAlCoda:e=7;break;case g.RepetitionInstructionEnum.DalSegnoAlFine:e=11;break;case g.RepetitionInstructionEnum.DalSegnoAlCoda:e=10}void 0===e?this.addVolta(t):this.stave.addModifier(new l.Flow.Repetition(e,0,0),n)}},{key:"addVolta",value:function(t){var e=2;if(t.type===g.RepetitionInstructionEnum.Ending){switch(t.alignment){case g.AlignmentType.Begin:e=this.parentSourceMeasure.endsRepetitionEnding()?5:2;break;case g.AlignmentType.End:if(this.parentSourceMeasure.beginsRepetitionEnding())return;e=4}this.stave.setVoltaType(e,t.endingIndices[0],0)}}},{key:"setWidth",value:function(t){e(a(o.prototype),"setWidth",this).call(this,t),this.stave.setWidth(t*y.unitInPixels)}},{key:"layoutSymbols",value:function(){}},{key:"draw",value:function(t){for(var e in this.stave.setContext(t).draw(),this.vfVoices)this.vfVoices.hasOwnProperty(e)&&(t.save(),this.vfVoices[e].draw(t,this.stave),t.restore());for(var n in this.vfbeams)if(this.vfbeams.hasOwnProperty(n)){var i,r=u(this.vfbeams[n]);try{for(r.s();!(i=r.n()).done;){i.value.setContext(t).draw()}}catch(v){r.e(v)}finally{r.f()}}if(this.autoVfBeams){var o,s=u(this.autoVfBeams);try{for(s.s();!(o=s.n()).done;){o.value.setContext(t).draw()}}catch(v){s.e(v)}finally{s.f()}}if(this.autoTupletVfBeams){var a,l=u(this.autoTupletVfBeams);try{for(l.s();!(a=l.n()).done;){a.value.setContext(t).draw()}}catch(v){l.e(v)}finally{l.f()}}for(var c in this.vftuplets)if(this.vftuplets.hasOwnProperty(c)){var h,f=u(this.vftuplets[c]);try{for(f.s();!(h=f.n()).done;){h.value.setContext(t).draw()}}catch(v){f.e(v)}finally{f.f()}}var d,p=u(this.vfTies);try{for(p.s();!(d=p.n()).done;){d.value.setContext(t).draw()}}catch(v){p.e(v)}finally{p.f()}var m,b=u(this.connectors);try{for(b.s();!(m=b.n()).done;){m.value.setContext(t).draw()}}catch(v){b.e(v)}finally{b.f()}}},{key:"format",value:function(){this.formatVoices&&this.formatVoices((this.PositionAndShape.Size.width-this.beginInstructionsWidth-this.endInstructionsWidth)*y.unitInPixels)}},{key:"getVoicesWithinMeasure",value:function(){var t,e=[],n=u(this.staffEntries);try{for(n.s();!(t=n.n()).done;){var i,r=u(t.value.graphicalVoiceEntries);try{for(r.s();!(i=r.n()).done;){var o=i.value;-1===e.indexOf(o.parentVoiceEntry.ParentVoice)&&e.push(o.parentVoiceEntry.ParentVoice)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){n.e(s)}finally{n.f()}return e}},{key:"getGraphicalVoiceEntriesPerVoice",value:function(t){var e,n=[],i=u(this.staffEntries);try{for(i.s();!(e=i.n()).done;){var r,o=u(e.value.graphicalVoiceEntries);try{for(o.s();!(r=o.n()).done;){var s=r.value;s.parentVoiceEntry.ParentVoice===t&&n.push(s)}}catch(a){o.e(a)}finally{o.f()}}}catch(a){i.e(a)}finally{i.f()}return n}},{key:"getRestFilledVexFlowStaveNotesPerVoice",value:function(t){for(var e=void 0,n=this.getGraphicalVoiceEntriesPerVoice(t),i=0,r=n.length;i<r;++i){var o,s=n[i],a=s.notes[0].sourceNote.getAbsoluteTimestamp(),l=new x.Fraction,c=u(s.notes);try{for(c.s();!(o=c.n()).done;){var h=o.value,f=x.Fraction.plus(h.sourceNote.getAbsoluteTimestamp(),h.sourceNote.Length);l.lt(f)&&(l=f)}}catch(A){c.e(A)}finally{c.f()}if(void 0===e){var d=x.Fraction.minus(a,this.parentSourceMeasure.AbsoluteTimestamp);if(d.RealValue>0){v.trace("Ghost Found at start (measure ".concat(this.MeasureNumber,")"));var p=m.VexFlowConverter.GhostNote(d),b=new _.VexFlowVoiceEntry(void 0,void 0);b.vfStaveNote=p,n.splice(0,0,b),i++}}else{var y=x.Fraction.minus(a,e);if(y.RealValue>0){v.trace("Ghost Found in between (measure ".concat(this.MeasureNumber,")"));var g=m.VexFlowConverter.GhostNote(y),S=new _.VexFlowVoiceEntry(void 0,void 0);S.vfStaveNote=g,n.splice(i,0,S),i++}}e=l}var w=x.Fraction.plus(this.parentSourceMeasure.AbsoluteTimestamp,this.parentSourceMeasure.Duration),k=x.Fraction.minus(w,e);if(k.RealValue>0){v.trace("Ghost Found at end (measure ".concat(this.MeasureNumber,")"));var E=m.VexFlowConverter.GhostNote(k),P=new _.VexFlowVoiceEntry(void 0,void 0);P.vfStaveNote=E,n.push(P)}return n}},{key:"handleBeam",value:function(t,e){var n,i=t.sourceNote.ParentVoiceEntry.ParentVoice.VoiceId,r=this.beams[i];void 0===r&&(r=this.beams[i]=[]);var o,s=u(r);try{for(s.s();!(o=s.n()).done;){var a=o.value;a[0]===e&&(n=a)}}catch(c){s.e(c)}finally{s.f()}void 0===n&&(n=[e,[]],r.push(n));var l=t.parentVoiceEntry;n[1].indexOf(l)<0&&n[1].push(l)}},{key:"handleTuplet",value:function(t,e){var n=t.sourceNote.ParentVoiceEntry.ParentVoice.VoiceId;e=t.sourceNote.NoteTuplet;var i,r=this.tuplets[n];void 0===r&&(r=this.tuplets[n]=[]);var o,s=u(r);try{for(s.s();!(o=s.n()).done;){var a=o.value;a[0]===e&&(i=a)}}catch(c){s.e(c)}finally{s.f()}void 0===i&&(i=[e,[]],r.push(i));var l=t.parentVoiceEntry;i[1].indexOf(l)<0&&i[1].push(l)}},{key:"finalizeBeams",value:function(){this.vfbeams={};var t=[];for(var e in this.beams)if(this.beams.hasOwnProperty(e)){var n=this.vfbeams[e];void 0===n&&(n=this.vfbeams[e]=[]);var i,r=u(this.beams[e]);try{for(r.s();!(i=r.n()).done;){var o,s=i.value,a=!1,c=u(s[0].Notes);try{for(c.s();!(o=c.n()).done;){var h=o.value;if(h.Length.RealValue>=new x.Fraction(1,4).RealValue&&(void 0===h.TypeLength||h.TypeLength.RealValue>.125)){a=!0;break}}}catch(N){c.e(N)}finally{c.f()}if(a)v.debug("Beam between note >= quarter, likely tremolo, currently unsupported. continuing.");else{var f,d=[],p=s[0],m=s[1],b=!0,y=u(m);try{for(y.s();!(f=y.n()).done;){var g=f.value;g.parentVoiceEntry.ParentVoice===p.Notes[0].ParentVoiceEntry.ParentVoice&&(b=g.parentVoiceEntry.WantedStemDirection===w.StemDirectionType.Undefined)}}catch(N){y.e(N)}finally{y.f()}var S,_=void 0,k=!1,E=[],P=u(m);try{for(P.s();!(S=P.n()).done;){var A=S.value,L=A.vfStaveNote;void 0!==L&&(d.push(L),t.push(L)),A.parentVoiceEntry.IsGrace&&(k=!0),A.parentVoiceEntry.StemColor&&this.rules.ColoringEnabled&&E.push(A.parentVoiceEntry.StemColor)}}catch(N){P.e(N)}finally{P.f()}if(d.length>1){var T=new l.Flow.Beam(d,b);if(k&&(T.render_options.beam_width=3,T.render_options.partial_beam_length=4),E.length>=2&&this.rules.ColorBeams){_=E[0];var M,C=u(E);try{for(C.s();!(M=C.n()).done;){if(M.value!==_){_=void 0;break}}}catch(N){C.e(N)}finally{C.f()}T.setStyle({fillStyle:_,strokeStyle:_})}n.push(T)}else v.debug("Warning! Beam with no notes!")}}}catch(N){r.e(N)}finally{r.f()}}this.rules.AutoBeamNotes&&this.autoBeamNotes(t)}},{key:"autoBeamNotes",value:function(t){var e,n=[],i=[],r=[];this.autoTupletVfBeams=[];var o=[];this.autoVfBeams=[];var s=this.parentSourceMeasure.ActiveTimeSignature;void 0===s&&(s=this.parentSourceMeasure.Duration);var a,c=u(this.staffEntries);try{for(c.s();!(a=c.n()).done;){var h,f=a.value,d=u(f.graphicalVoiceEntries);try{for(d.s();!(h=d.n()).done;){var p=h.value,m=p.vfStaveNote,b=p.notes[0],v=f.relInMeasureTimestamp.isOnBeat(s),y=i.length>=2,g=b.sourceNote.Length.RealValue-new x.Fraction(1,4).RealValue>-x.Fraction.FloatInaccuracyTolerance,S=p.parentVoiceEntry.IsGrace||g||t.contains(m);if(S||v){if(y){var w,_=u(i);try{for(_.s();!(w=_.n()).done;){var k=w.value;n.push(k)}}catch(X){_.e(X)}finally{_.f()}o.push(n.slice()),n=[]}if(i=[],S)continue}var E=p.notes[0].sourceNote.NoteTuplet;if(E){var P,L=!1,T=u(E.Notes);try{for(T.s();!(P=T.n()).done;){var M,C=u(P.value);try{for(C.s();!(M=C.n()).done;){var N=M.value;if(N.NoteTypeXml>=A.NoteType.QUARTER||N.ParentVoiceEntry.IsGrace||N.isRest()&&!this.rules.AutoBeamOptions.beam_rests){L=!0;break}}}catch(X){C.e(X)}finally{C.f()}if(L)break}}catch(X){T.e(X)}finally{T.f()}void 0===e?e=E:e!==E&&(r.length>1&&this.autoTupletVfBeams.push(new l.Flow.Beam(r,!0)),r=[],e=E),L||r.push(m)}else e=void 0,i.push(m)}}catch(X){d.e(X)}finally{d.f()}}}catch(X){c.e(X)}finally{c.f()}if(r.length>=2&&this.autoTupletVfBeams.push(new l.Flow.Beam(r,!0)),i.length>=2){var I,R=u(i);try{for(R.s();!(I=R.n()).done;){var O=I.value;n.push(O)}}catch(X){R.e(X)}finally{R.f()}o.push(n)}var F=this.rules.AutoBeamOptions,B={beam_middle_only:F.beam_middle_rests_only,beam_rests:F.beam_rests,maintain_stem_directions:F.maintain_stem_directions};if(F.groups&&F.groups.length){var D,j=[],V=u(F.groups);try{for(V.s();!(D=V.n()).done;){var G=D.value;j.push(new l.Flow.Fraction(G[0],G[1]))}}catch(X){V.e(X)}finally{V.f()}B.groups=j}for(var U=0,z=o;U<z.length;U++){var W,H=z[U],q=u(l.Flow.Beam.generateBeams(H,B));try{for(q.s();!(W=q.n()).done;){var Y=W.value;this.autoVfBeams.push(Y)}}catch(X){q.e(X)}finally{q.f()}}}},{key:"finalizeTuplets",value:function(){for(var t in this.vftuplets={},this.tuplets)if(this.tuplets.hasOwnProperty(t)){var e=this.vftuplets[t];void 0===e&&(e=this.vftuplets[t]=[]);var n,i=u(this.tuplets[t]);try{for(i.s();!(n=i.n()).done;){var r,o=n.value,s=[],a=u(o[1]);try{for(a.s();!(r=a.n()).done;){var c=r.value;s.push(c.vfStaveNote)}}catch(f){a.e(f)}finally{a.f()}if(s.length>1){var h=o[0];e.push(new l.Flow.Tuplet(s,{bracketed:h.Bracket||3===h.TupletLabelNumber&&this.rules.TripletsBracketed||3!==h.TupletLabelNumber&&this.rules.TupletsBracketed,notes_occupied:h.Notes[0][0].NormalNotes,num_notes:h.TupletLabelNumber,ratioed:this.rules.TupletsRatioed}))}else v.debug("Warning! Tuplet with no notes! Trying to ignore, but this is a serious problem.")}}catch(f){i.e(f)}finally{i.f()}}}},{key:"layoutStaffEntry",value:function(t){}},{key:"graphicalMeasureCreatedCalculations",value:function(){var t,e,n=[],i=u(this.staffEntries);try{for(i.s();!(e=i.n()).done;){var r=e.value;t=!1,n=[];var o,s=u(r.graphicalVoiceEntries);try{for(s.s();!(o=s.n()).done;){var a=o.value;if(a.parentVoiceEntry.IsGrace)n.push(a),t||(t=a.parentVoiceEntry.GraceSlur);else if(a.vfStaveNote=m.VexFlowConverter.StaveNote(a),n.length>0){for(var c=[],h=0;h<n.length;h++){var f=n[h],d=m.VexFlowConverter.StaveNote(f);f.vfStaveNote=d,c.push(d)}var p=new l.Flow.GraceNoteGroup(c,t);a.vfStaveNote.addModifier(0,p),n=[]}}}catch(O){s.e(O)}finally{s.f()}}}catch(O){i.e(O)}finally{i.f()}if(n.length>0){var y,g=u(n);try{for(g.s();!(y=g.n()).done;){var S=y.value;S.vfStaveNote=m.VexFlowConverter.StaveNote(S),S.parentVoiceEntry.GraceAfterMainNote=!0}}catch(O){g.e(O)}finally{g.f()}}this.finalizeBeams(),this.finalizeTuplets();var w,_=u(this.getVoicesWithinMeasure());try{for(_.s();!(w=_.n()).done;){var x=w.value;if(void 0!==x){var E=!(x instanceof k.LinkedVoice);this.vfVoices[x.VoiceId]=new l.Flow.Voice({beat_value:this.parentSourceMeasure.Duration.Denominator,num_beats:this.parentSourceMeasure.Duration.Numerator,resolution:l.Flow.RESOLUTION}).setMode(2);var P,A=u(this.getRestFilledVexFlowStaveNotesPerVoice(x));try{for(A.s();!(P=A.n()).done;){var L=P.value;if(!L.parentVoiceEntry||!L.parentVoiceEntry.IsGrace||L.parentVoiceEntry.GraceAfterMainNote){var T=L;if(0!==L.notes.length&&L.notes[0]&&L.notes[0].sourceNote.PrintObject){if(E){var M=T.parentStaffEntry;if(M&&void 0!==M.vfClefBefore){var C=new b([M.vfClefBefore]);T.vfStaveNote.getCategory&&"stavenotes"===T.vfStaveNote.getCategory()&&T.vfStaveNote.addModifier(0,C)}}if(L.parentVoiceEntry&&this.rules.RenderFingerings&&this.createFingerings(L),L.parentVoiceEntry&&void 0!==L.parentVoiceEntry.Arpeggio){var N=L.parentVoiceEntry.Arpeggio;if(L.notes&&L.notes.length>1){var I=m.VexFlowConverter.StrokeTypeFromArpeggioType(N.type),R=new l.Flow.Stroke(I,{all_voices:this.rules.ArpeggiosGoAcrossVoices});this.rules.RenderArpeggios&&T.vfStaveNote.addStroke(0,R)}else v.debug("[OSMD] arpeggio in measure ".concat(this.MeasureNumber," could not be drawn.\n                        voice entry had less than two notes, arpeggio is likely between voice entries, not currently supported in Vexflow."))}this.vfVoices[x.VoiceId].addTickable(T.vfStaveNote)}else this.vfVoices[x.VoiceId].addTickable(T.vfStaveNote)}}}catch(O){A.e(O)}finally{A.f()}}}}catch(O){_.e(O)}finally{_.f()}this.createArticulations(),this.createOrnaments(),this.setStemDirectionFromVexFlow()}},{key:"setStemDirectionFromVexFlow",value:function(){var t,e=u(this.staffEntries);try{for(e.s();!(t=e.n()).done;){var n,i=u(t.value.graphicalVoiceEntries);try{for(i.s();!(n=i.n()).done;){var r,o=n.value,s=u(o.notes);try{for(s.s();!(r=s.n()).done;){var a=r.value.vfnote;if(void 0!==a&&void 0!==a[0])switch(a[0].getStemDirection()){case l.Flow.Stem.UP:o.parentVoiceEntry.StemDirection=w.StemDirectionType.Up;break;case l.Flow.Stem.DOWN:o.parentVoiceEntry.StemDirection=w.StemDirectionType.Down}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}}}catch(c){e.e(c)}finally{e.f()}}},{key:"createArticulations",value:function(){for(var t=0,e=this.staffEntries.length;t<e;++t){var n,i=u(this.staffEntries[t].graphicalVoiceEntries);try{for(i.s();!(n=i.n()).done;){var r=n.value;m.VexFlowConverter.generateArticulations(r.vfStaveNote,r.notes[0].sourceNote.ParentVoiceEntry.Articulations)}}catch(o){i.e(o)}finally{i.f()}}}},{key:"createOrnaments",value:function(){for(var t=0,e=this.staffEntries.length;t<e;++t){var n=this.staffEntries[t].graphicalVoiceEntries;for(var i in n)if(n.hasOwnProperty(i)){var r=n[i].vfStaveNote,o=n[i].notes[0].sourceNote.ParentVoiceEntry.OrnamentContainer;void 0!==o&&m.VexFlowConverter.generateOrnaments(r,o)}}}},{key:"createFingerings",value:function(t){var e,n=t,i=t.parentVoiceEntry.TechnicalInstructions,r=0,o=u(i);try{for(o.s();!(e=o.n()).done;){e.value.type===E.TechnicalInstructionType.Fingering&&r++}}catch(S){o.e(S)}finally{o.f()}var s,a=-1,c=u(i);try{for(c.s();!(s=c.n()).done;){var h=s.value;if(h.type===E.TechnicalInstructionType.Fingering){a++;var f=void 0,d=this.rules.FingeringPosition;switch(h.placement!==P.PlacementEnum.NotYetDefined&&(d=h.placement),d){default:case P.PlacementEnum.Left:f=1;break;case P.PlacementEnum.Right:f=2;break;case P.PlacementEnum.Above:f=3;break;case P.PlacementEnum.Below:f=4;break;case P.PlacementEnum.NotYetDefined:var p=t.parentStaffEntry.sourceStaffEntry.ParentStaff;t.notes.length>1||t.parentStaffEntry.graphicalVoiceEntries.length>1?f=1:0===p.idInMusicSheet?(f=3,d=P.PlacementEnum.Above):(f=4,d=P.PlacementEnum.Below)}var m=new l.Flow.FretHandFinger(h.value);if(m.setPosition(f),d===P.PlacementEnum.Above||d===P.PlacementEnum.Below){var b=d===P.PlacementEnum.Above?-1:1,v=d===P.PlacementEnum.Above?a:r-1-a;if(this.rules.FingeringInsideStafflines&&r>1){var y=m.getWidth()/2;m.setOffsetY(b*(v+2.5*r)*y)}else if(!this.rules.FingeringInsideStafflines){var g=new l.Flow.StringNumber(h.value);g.radius=0,g.setPosition(f),g.setOffsetY(b*v*g.getWidth()*2/3),n.vfStaveNote.addModifier(a,g);continue}}"tabnotes"===n.vfStaveNote.getCategory()||n.vfStaveNote.addModifier(a,m)}}}catch(S){c.e(S)}finally{c.f()}}},{key:"lineTo",value:function(t,e){var n=new l.Flow.StaveConnector(t.getVFStave(),this.stave);n.setType(e),this.connectors.push(n)}},{key:"getVFStave",value:function(){return this.stave}},{key:"updateInstructionWidth",value:function(){var t,e=0,n=0,i=u(this.stave.getModifiers());try{for(i.s();!(t=i.n()).done;){var r=t.value;r.getPosition()===s.BEGIN?e+=r.getWidth()+r.getPadding(void 0):r.getPosition()===s.END&&(n+=r.getWidth()+r.getPadding(void 0))}}catch(o){i.e(o)}finally{i.f()}this.beginInstructionsWidth=e/y.unitInPixels,this.endInstructionsWidth=n/y.unitInPixels}}]),o}(c.GraphicalMeasure),function(t){t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT",t[t.ABOVE=3]="ABOVE",t[t.BELOW=4]="BELOW",t[t.BEGIN=5]="BEGIN",t[t.END=6]="END"}(s=i.StavePositionEnum||(i.StavePositionEnum={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(136),s=i(20),a=i(34);e.VexFlowVoiceEntry=function(t){n(i,t);var e=r(i);function i(t,n){return h(this,i),e.call(this,t,n)}return d(i,[{key:"applyBordersFromVexflow",value:function(){var t=this.vfStaveNote;if(t.getNoteHeadBeginX){var e=t.getBoundingBox(),n=t.getNoteHeadBeginX()-e.x;this.PositionAndShape.RelativePosition.y=e.y/s.unitInPixels,this.PositionAndShape.BorderTop=0,this.PositionAndShape.BorderBottom=e.h/s.unitInPixels,this.PositionAndShape.BorderLeft=-(n+t.width/2)/s.unitInPixels,this.PositionAndShape.BorderRight=(e.w-n)/s.unitInPixels}}},{key:"color",value:function(){for(var t,e,n=this.rules.DefaultColorNotehead,i=this.rules.DefaultColorRest,r=this.rules.DefaultColorStem,o=this.vfStaveNote,s=0;s<this.notes.length;s++){var l=this.notes[s];if(t=e=l.sourceNote.NoteheadColor,(this.rules.ColoringMode===a.ColoringModes.AutoColoring||this.rules.ColoringMode===a.ColoringModes.CustomColorSet)&&(t=l.sourceNote.isRest()?this.rules.ColoringSetCurrent.getValue(-1):this.rules.ColoringSetCurrent.getValue(l.sourceNote.Pitch.FundamentalNote)),l.sourceNote.PrintObject?t&&"#000000"!==t||(t=this.rules.DefaultColorNotehead):t="#00000000",!e&&this.rules.ColoringMode===a.ColoringModes.XML&&l.sourceNote.PrintObject&&(!l.sourceNote.isRest()&&n?t=n:l.sourceNote.isRest()&&i&&(t=i)),t&&l.sourceNote.PrintObject)l.sourceNote.NoteheadColorCurrentlyRendered=t;else if(!t)continue;if(this.rules.ColoringEnabled&&l.sourceNote.NoteBeam&&this.rules.ColorBeams){for(var c=l.sourceNote.NoteBeam.Notes,h=!0,f=0;f<c.length;f++)c[f].NoteheadColorCurrentlyRendered!==t&&(h=!1);h&&null!==o.beam&&o.beam.setStyle&&o.beam.setStyle({fillStyle:t,strokeStyle:t})}if(o&&o.note_heads){var d=o.note_heads[s];d&&d.setStyle({fillStyle:t,strokeStyle:t})}}var p=r;this.rules.ColoringEnabled&&((p=this.parentVoiceEntry.StemColor)&&"#000000"!==p||(p=r),this.rules.ColorStemsLikeNoteheads&&t&&(p=t));var m,b=!0,v=u(this.parentVoiceEntry.Notes);try{for(v.s();!(m=v.n()).done;){if(m.value.PrintObject){b=!1;break}}}catch(g){v.e(g)}finally{v.f()}b&&(p="#00000000");var y={fillStyle:p,strokeStyle:p};o&&o.setStemStyle&&(b||(this.parentVoiceEntry.StemColor=p),o.setStemStyle(y),o.flag&&o.setFlagStyle&&this.rules.ColorFlags&&o.setFlagStyle(y))}},{key:"vfStaveNote",set:function(t){this.mVexFlowStaveNote=t},get:function(){return this.mVexFlowStaveNote}}]),i}(o.GraphicalVoiceEntry)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.Fingering=0]="Fingering"}(e.TechnicalInstructionType||(e.TechnicalInstructionType={})),e.TechnicalInstruction=function(){return function t(){h(this,t)}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.Tie=function(){function t(e){h(this,t),this.notes=[],this.AddNote(e)}return d(t,[{key:"AddNote",value:function(t){this.notes.push(t),t.NoteTie=this}},{key:"Notes",get:function(){return this.notes}},{key:"StartNote",get:function(){return this.notes[0]}},{key:"Duration",get:function(){var t,e=new i.Fraction,n=u(this.notes);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Add(r.Length)}}catch(o){n.e(o)}finally{n.f()}return e}},{key:"Pitch",get:function(){return this.StartNote.Pitch}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PartListEntry=function(){function t(e){h(this,t),this.enrolledTimestamps=[],this.visible=!0,this.musicSheet=e}return d(t,[{key:"getFirstSourceMeasure",value:function(){return this.musicSheet.SourceMeasures[this.startIndex]}},{key:"getLastSourceMeasure",value:function(){return this.musicSheet.SourceMeasures[this.endIndex]}},{key:"Visible",get:function(){return this.visible},set:function(t){this.visible=t}}]),t}()},function(t,e,n){"use strict";(function(e){t.exports=!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?function(t,n,i,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,i)}));case 4:return e.nextTick((function(){t.call(null,n,i,r)}));default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick((function(){t.apply(null,o)}))}}:e.nextTick}).call(this,n(41))},function(t,e,n){"use strict";(function(e,i){t.exports=p;var r=n(91),o=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?i:r,s=n(21).Buffer;p.WritableState=d;var a=n(48);a.inherits=n(40);var u,l,c={deprecate:n(228)};function h(){}function f(t,e,n){this.chunk=t,this.encoding=e,this.callback=n,this.next=null}function d(t,e){l=l||n(33),this.objectMode=!!(t=t||{}).objectMode,e instanceof l&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark;this.highWaterMark=i||0===i?i:this.objectMode?16:16384,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.decodeStrings=!(!1===t.decodeStrings),this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,i=n.sync,s=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,i,o){--e.pendingcb,n?r(o,i):o(i),t._writableState.errorEmitted=!0,t.emit("error",i)}(t,n,i,e,s);else{var a=y(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||v(t,n),i?o(b,t,n,a,s):b(t,n,a,s)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new w(this),this.corkedRequestsFree.next=new w(this)}function p(t){if(l=l||n(33),!(this instanceof p||this instanceof l))return new p(t);this._writableState=new d(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),u.call(this)}function m(t,e,n,i,r,o,s){e.writelen=i,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(r,e.onwrite):t._write(r,o,e.onwrite),e.sync=!1}function b(t,e,n,i){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,i(),S(t,e)}function v(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var i=new Array(e.bufferedRequestCount),r=e.corkedRequestsFree;r.entry=n;for(var o=0;n;)i[o]=n,n=n.next,o+=1;m(t,e,!0,e.length,i,"",r.finish),e.pendingcb++,e.lastBufferedRequest=null,e.corkedRequestsFree=r.next,r.next=null}else{for(;n;){var s=n.chunk;if(m(t,e,!1,e.objectMode?1:s.length,s,n.encoding,n.callback),n=n.next,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}function y(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function g(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function S(t,e){var n=y(e);return n&&(0===e.pendingcb?(g(t,e),e.finished=!0,t.emit("finish")):g(t,e)),n}function w(t){var e=this;this.next=null,this.entry=null,this.finish=function(n){var i=e.entry;for(e.entry=null;i;){var r=i.callback;t.pendingcb--,r(n),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}!function(){try{u=n(61)}catch(t){}finally{u||(u=n(62).EventEmitter)}}(),s=n(21).Buffer,a.inherits(p,u),d.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(d.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(t){}}(),p.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},p.prototype.write=function(t,e,n){var i=this._writableState,o=!1;return"function"==typeof e&&(n=e,e=null),s.isBuffer(t)?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=h),i.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),r(e,n)}(this,n):function(t,e,n,i){var o=!0;if(!s.isBuffer(n)&&"string"!=typeof n&&null!=n&&!e.objectMode){var a=new TypeError("Invalid non-string/buffer chunk");t.emit("error",a),r(i,a),o=!1}return o}(this,i,t,n)&&(i.pendingcb++,o=function(t,e,n,i,r){n=function(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=new s(e,n)),e}(e,n,i),s.isBuffer(n)&&(i="buffer");var o=e.objectMode?1:n.length;e.length+=o;var a=e.length<e.highWaterMark;if(a||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest=new f(n,i,r),u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else m(t,e,!1,o,n,i,r);return a}(this,i,t,e,n)),o},p.prototype.cork=function(){this._writableState.corked++},p.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||v(this,t))},p.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);this._writableState.defaultEncoding=t},p.prototype._write=function(t,e,n){n(new Error("not implemented"))},p.prototype._writev=null,p.prototype.end=function(t,e,n){var i=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(t,e,n){e.ending=!0,S(t,e),n&&(e.finished?r(n):t.once("finish",n)),e.ended=!0,t.writable=!1}(this,i,n)}}).call(this,n(41),n(169).setImmediate)},function(t,e,n){"use strict";t.exports=s;var i=n(33),r=n(48);function o(t){this.afterTransform=function(e,n){return function(t,e,n){var i=t._transformState;i.transforming=!1;var r=i.writecb;if(!r)return t.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,null!=n&&t.push(n),r(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function s(t){if(!(this instanceof s))return new s(t);i.call(this,t),this._transformState=new o(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",(function(){"function"==typeof this._flush?this._flush((function(t){a(e,t)})):a(e)}))}function a(t,e){if(e)return t.emit("error",e);var n=t._transformState;if(t._writableState.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}r.inherits=n(40),r.inherits(s,i),s.prototype.push=function(t,e){return this._transformState.needTransform=!1,i.prototype.push.call(this,t,e)},s.prototype._transform=function(t,e,n){throw new Error("not implemented")},s.prototype._write=function(t,e,n){var i=this._transformState;if(i.writecb=n,i.writechunk=t,i.writeencoding=e,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},s.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},function(t,e,n){"use strict";var i=n(49),r=n(175),o=n(176),s=n(177);function a(t,e,n,i,r){this.compressedSize=t,this.uncompressedSize=e,this.crc32=n,this.compression=i,this.compressedContent=r}o=n(176),a.prototype={getContentWorker:function(){var t=new r(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new r(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(t,e,n){return t.pipe(new s).pipe(new o("uncompressedSize")).pipe(e.compressWorker(n)).pipe(new o("compressedSize")).withStreamInfo("compression",e)},t.exports=a},function(t,e,n){"use strict";var i=n(3),r=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=function(t,e){return void 0!==t&&t.length?"string"!==i.getTypeOf(t)?function(t,e,n,i){var o=r,s=0+n;t^=-1;for(var a=0;a<s;a++)t=t>>>8^o[255&(t^e[a])];return-1^t}(0|e,t,t.length):function(t,e,n,i){var o=r,s=0+n;t^=-1;for(var a=0;a<s;a++)t=t>>>8^o[255&(t^e.charCodeAt(a))];return-1^t}(0|e,t,t.length):0}},function(t,e,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(50)),i(n(189)),i(n(264)),i(n(266))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(67),r=n(102),o=n(148),s=n(68),a=n(20),l=n(139),c=n(83),f=n(100),p=n(165),m=n(64),b=n(99),v=n(1),y=n(34),g=n(51),S=n(42),w=n(7),_=n(104),x=n(97),k=n(189),E=n(262),P=n(263),A=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.OSMDOptions.OSMDOptionsStandard();if(h(this,t),this.version="0.7.6-release",this.zoom=1,this.zoomUpdated=!1,"string"==typeof e?this.container=document.getElementById(e):e&&"appendChild"in e&&(this.container=e),!this.container)throw new Error("Please pass a valid div container to OpenSheetMusicDisplay");void 0===n.autoResize&&(n.autoResize=!0),this.backendType=g.BackendType.SVG,this.setOptions(n)}return d(t,[{key:"load",value:function(t){if(this.reset(),"string"==typeof t){var e=t,n=this;if("PK\x03\x04"===e.substr(0,4))return v.debug("[OSMD] This is a zip file, unpack it first: "+e),p.MXLHelper.MXLtoXMLstring(e).then((function(t){return n.load(t)}),(function(t){throw v.debug(t),new Error("OpenSheetMusicDisplay: Invalid MXL file")}));if("\uf7ef\uf7bb\uf7bf"===e.substr(0,3))return v.debug("[OSMD] UTF with BOM detected, truncate first three bytes and pass along: "+e),n.load(e.substr(3));if(e.substr(0,6).includes("<?xml"))v.debug("[OSMD] Finally parsing XML content, length: "+e.length),t=(new DOMParser).parseFromString(e,"application/xml");else{if(e.length<2083)return v.debug("[OSMD] Retrieve the file at the given URL: "+e),b.AJAX.ajax(e).then((function(t){return n.load(t)}),(function(t){throw t}));console.error("[OSMD] osmd.load(string): Could not process string. Missing else branch?")}}if(!t||!t.nodeName)return m.Promise.reject(new Error("OpenSheetMusicDisplay: The document which was provided is invalid"));var r,s=t.childNodes;v.debug("[OSMD] load(), Document url: "+t.URL);for(var a=0,u=s.length;a<u;a+=1){var l=s[a];if(l.nodeType===Node.ELEMENT_NODE&&"score-partwise"===l.nodeName.toLowerCase()){r=l;break}}if(!r)return console.error("Could not parse MusicXML, no valid partwise element found"),m.Promise.reject(new Error("OpenSheetMusicDisplay: Document is not a valid 'partwise' MusicXML"));var c=new i.IXmlElement(r),h=new o.MusicSheetReader(void 0,this.rules);return this.sheet=h.createMusicSheet(c,"Untitled Score"),void 0===this.sheet?m.Promise.reject(new Error("given music sheet was incomplete or could not be loaded.")):(v.info("[OSMD] Loaded sheet ".concat(this.sheet.TitleString," successfully.")),this.needBackendUpdate=!0,this.updateGraphic(),m.Promise.resolve({}))}},{key:"updateGraphic",value:function(){var t=new r.VexFlowMusicSheetCalculator(this.rules);this.graphic=new s.GraphicalMusicSheet(this.sheet,t),this.drawingParameters.drawCursors&&this.cursor&&this.cursor.init(this.sheet.MusicPartManager,this.graphic)}},{key:"render",value:function(){if(!this.graphic)throw new Error("OpenSheetMusicDisplay: Before rendering a music sheet, please load a MusicXML file");this.drawer&&this.drawer.clear();var t=this.container.offsetWidth;this.rules.RenderSingleHorizontalStaffline&&(t=32767),this.sheet.pageWidth=t/this.zoom/10,this.rules.PageFormat&&!this.rules.PageFormat.IsUndefined?(this.rules.PageHeight=this.sheet.pageWidth/this.rules.PageFormat.aspectRatio,v.debug("[OSMD] PageHeight: "+this.rules.PageHeight)):(v.debug("[OSMD] endless/undefined pageformat, id: "+this.rules.PageFormat.idString),this.rules.PageHeight=100001),this.graphic.reCalculate(),this.drawingParameters.drawCursors&&(this.graphic.Cursors.length=0),this.createOrRefreshRenderBackend(),this.needBackendUpdate=!1,this.drawer.setZoom(this.zoom),this.drawer.drawSheet(this.graphic),this.enableOrDisableCursor(this.drawingParameters.drawCursors),this.drawingParameters.drawCursors&&this.cursor&&this.cursor.update(),this.zoomUpdated=!1}},{key:"createOrRefreshRenderBackend",value:function(){this.drawer&&this.drawer.Backends&&(this.drawer.Backends[0]&&this.drawer.Backends[0].removeAllChildrenFromContainer(this.container),this.drawer.Backends.clear()),this.drawingParameters.Rules=this.rules,this.drawer=new a.VexFlowMusicSheetDrawer(this.drawingParameters),this.drawer.drawableBoundingBoxElement=this.DrawBoundingBox,this.drawer.bottomLineVisible=this.drawBottomLine,this.drawer.skyLineVisible=this.drawSkyLine;var t,e=this.container.offsetWidth;this.rules.RenderSingleHorizontalStaffline&&(e=10*this.graphic.MusicPages[0].PositionAndShape.Size.width*this.zoom);var n,i=u(this.graphic.MusicPages);try{for(i.s();!(n=i.n()).done;){var r=n.value,o=this.createBackend(this.backendType,r),s=" exceeds CanvasBackend limit of 32767. Cutting off score.";o.getOSMDBackendType()===g.BackendType.Canvas&&e>32767&&(console.log("[OSMD] Warning: width of "+e+s),e=32767),t=this.rules.PageFormat&&!this.rules.PageFormat.IsUndefined?e/this.rules.PageFormat.aspectRatio:(r.PositionAndShape.Size.height+15)*this.zoom*10,o.getOSMDBackendType()===g.BackendType.Canvas&&t>32767&&(console.log("[OSMD] Warning: height of "+t+s),t=Math.min(t,32767)),o.resize(e,t),o.clear(),this.drawer.Backends.push(o)}}catch(l){i.e(l)}finally{i.f()}}},{key:"IsReadyToRender",value:function(){return void 0!==this.graphic}},{key:"clear",value:function(){this.drawer.clear(),this.reset()}},{key:"setOptions",value:function(e){if(this.rules||(this.rules=new S.EngravingRules),this.drawingParameters||(this.drawingParameters=new y.DrawingParameters,this.drawingParameters.Rules=this.rules),null!=e){e.drawingParameters&&(this.drawingParameters.DrawingParametersEnum=y.DrawingParametersEnum[e.drawingParameters.toLowerCase()],this.drawingParameters.DrawingParametersEnum===y.DrawingParametersEnum.compacttight&&(this.rules.BetweenStaffDistance=2.5,this.rules.StaffDistance=3.5,this.rules.MinimumDistanceBetweenSystems=1,this.rules.PageBottomMargin=1,this.rules.PageLeftMargin=2,this.rules.PageRightMargin=2));var n=!this.drawer||!this.drawer.Backends||this.drawer.Backends.length<1;if(void 0!==e.backend){var i=g.OSMDOptions.BackendTypeFromString(e.backend);n=n||this.backendType!==i,this.backendType=i}this.needBackendUpdate=n,void 0!==e.autoBeam&&(this.rules.AutoBeamNotes=e.autoBeam);var r=e.autoBeamOptions;if(r&&(void 0===r.maintain_stem_directions&&(r.maintain_stem_directions=!1),this.rules.AutoBeamOptions=r,r.groups&&r.groups.length)){var o,s=u(r.groups);try{for(s.s();!(o=s.n()).done;){if(2!==o.value.length)throw new Error("Each fraction in autoBeamOptions.groups must be of length 2, e.g. [3,4] for beaming three fourths")}}catch(a){s.e(a)}finally{s.f()}}void 0!==e.alignRests&&(this.rules.AlignRests=e.alignRests),void 0!==e.coloringMode&&this.setColoringMode(e),void 0!==e.coloringEnabled&&(this.rules.ColoringEnabled=e.coloringEnabled),void 0!==e.colorStemsLikeNoteheads&&(this.rules.ColorStemsLikeNoteheads=e.colorStemsLikeNoteheads),e.disableCursor&&(this.drawingParameters.drawCursors=!1),e.drawHiddenNotes&&(this.drawingParameters.drawHiddenNotes=!0),void 0!==e.drawCredits&&(this.drawingParameters.DrawCredits=e.drawCredits),void 0!==e.drawComposer&&(this.drawingParameters.DrawComposer=e.drawComposer),void 0!==e.drawTitle&&(this.drawingParameters.DrawTitle=e.drawTitle),void 0!==e.drawSubtitle&&(this.drawingParameters.DrawSubtitle=e.drawSubtitle),void 0!==e.drawLyricist&&(this.drawingParameters.DrawLyricist=e.drawLyricist),void 0!==e.drawPartNames&&(this.drawingParameters.DrawPartNames=e.drawPartNames),void 0!==e.drawPartAbbreviations&&(this.rules.RenderPartAbbreviations=e.drawPartAbbreviations),!1===e.drawFingerings&&(this.rules.RenderFingerings=!1),void 0!==e.drawMeasureNumbers&&(this.rules.RenderMeasureNumbers=e.drawMeasureNumbers),void 0!==e.drawLyrics&&(this.rules.RenderLyrics=e.drawLyrics),void 0!==e.drawSlurs&&(this.rules.RenderSlurs=e.drawSlurs),void 0!==e.measureNumberInterval&&(this.rules.MeasureNumberLabelOffset=e.measureNumberInterval),void 0!==e.fingeringPosition&&(this.rules.FingeringPosition=w.AbstractExpression.PlacementEnumFromString(e.fingeringPosition)),void 0!==e.fingeringInsideStafflines&&(this.rules.FingeringInsideStafflines=e.fingeringInsideStafflines),void 0!==e.newSystemFromXML&&(this.rules.NewSystemAtXMLNewSystemAttribute=e.newSystemFromXML),void 0!==e.newPageFromXML&&(this.rules.NewPageAtXMLNewPageAttribute=e.newPageFromXML),void 0!==e.fillEmptyMeasuresWithWholeRest&&(this.rules.FillEmptyMeasuresWithWholeRest=e.fillEmptyMeasuresWithWholeRest),void 0!==e.followCursor&&(this.FollowCursor=e.followCursor),void 0!==e.setWantedStemDirectionByXml&&(this.rules.SetWantedStemDirectionByXml=e.setWantedStemDirectionByXml),e.defaultColorNotehead&&(this.rules.DefaultColorNotehead=e.defaultColorNotehead),e.defaultColorRest&&(this.rules.DefaultColorRest=e.defaultColorRest),e.defaultColorStem&&(this.rules.DefaultColorStem=e.defaultColorStem),e.defaultColorLabel&&(this.rules.DefaultColorLabel=e.defaultColorLabel),e.defaultColorTitle&&(this.rules.DefaultColorTitle=e.defaultColorTitle),e.defaultFontFamily&&(this.rules.DefaultFontFamily=e.defaultFontFamily),e.drawUpToMeasureNumber&&(this.rules.MaxMeasureToDrawIndex=e.drawUpToMeasureNumber-1),e.drawFromMeasureNumber&&(this.rules.MinMeasureToDrawIndex=e.drawFromMeasureNumber-1),e.tupletsRatioed&&(this.rules.TupletsRatioed=!0),e.tupletsBracketed&&(this.rules.TupletsBracketed=!0),e.tripletsBracketed&&(this.rules.TripletsBracketed=!0),e.autoResize?(this.resizeHandlerAttached||this.autoResize(),this.autoResizeEnabled=!0):!1===e.autoResize&&(this.autoResizeEnabled=!1),void 0!==e.pageFormat&&(this.rules.PageFormat=t.StringToPageFormat(e.pageFormat)),void 0!==e.pageBackgroundColor&&(this.rules.PageBackgroundColor=e.pageBackgroundColor),void 0!==e.renderSingleHorizontalStaffline&&(this.rules.RenderSingleHorizontalStaffline=e.renderSingleHorizontalStaffline)}else v.warn("warning: osmd.setOptions() called without an options parameter, has no effect.\nexample usage: osmd.setOptions({drawCredits: false, drawPartNames: false})")}},{key:"setColoringMode",value:function(t){if(t.coloringMode!==y.ColoringModes.XML){var e,n=[x.NoteEnum.C,x.NoteEnum.D,x.NoteEnum.E,x.NoteEnum.F,x.NoteEnum.G,x.NoteEnum.A,x.NoteEnum.B,-1];if(t.coloringMode===y.ColoringModes.CustomColorSet){if(!t.coloringSetCustom||8!==t.coloringSetCustom.length)throw new Error("Invalid amount of colors: With coloringModes.customColorSet, you have to provide a coloringSetCustom parameter with 8 strings (C to B, rest note).");var i,r=u(t.coloringSetCustom);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(!/^\#[0-9a-fA-F]{6}$/.test(o))throw new Error("One of the color strings in options.coloringSetCustom was not a valid HTML Hex color:\n"+o)}}catch(h){r.e(h)}finally{r.f()}e=t.coloringSetCustom}else if(t.coloringMode===y.ColoringModes.AutoColoring){e=[];for(var s=Object.keys(k.AutoColorSet),a=0;a<s.length;a++)e.push(k.AutoColorSet[s[a]])}for(var l=new _.Dictionary,c=0;c<n.length;c++)l.setValue(n[c],e[c]);l.setValue(-1,e[7]),this.rules.ColoringSetCurrent=l,this.rules.ColoringMode=t.coloringMode}else this.rules.ColoringMode=y.ColoringModes.XML}},{key:"setLogLevel",value:function(t){switch(t){case"trace":v.setLevel(v.levels.TRACE);break;case"debug":v.setLevel(v.levels.DEBUG);break;case"info":v.setLevel(v.levels.INFO);break;case"warn":v.setLevel(v.levels.WARN);break;case"error":v.setLevel(v.levels.ERROR);break;default:v.warn("Could not set log level to ".concat(t,". Using warn instead.")),v.setLevel(v.levels.WARN)}}},{key:"getLogLevel",value:function(){return v.getLevel()}},{key:"reset",value:function(){this.drawingParameters.drawCursors&&this.cursor&&this.cursor.hide(),this.sheet=void 0,this.graphic=void 0,this.zoom=1}},{key:"autoResize",value:function(){var t=this;this.handleResize((function(){}),(function(){t.IsReadyToRender()&&t.render()}))}},{key:"handleResize",value:function(t,e){var n,i=void 0,r=this;function o(){r.AutoResizeEnabled&&(n=(new Date).getTime(),i||(t(),n=(new Date).getTime(),i=window.setTimeout(s,200)))}function s(){i=void 0,window.clearTimeout(i),(new Date).getTime()-n<200?i=window.setTimeout(s,200):e()}window.attachEvent?window.attachEvent("onresize",o):window.addEventListener("resize",o),this.resizeHandlerAttached=!0,window.setTimeout(t,0),window.setTimeout(e,1)}},{key:"enableOrDisableCursor",value:function(t){if(this.drawingParameters.drawCursors=t,t)this.cursor=new f.Cursor(this.drawer.Backends[0].getInnerElement(),this),this.sheet&&this.graphic&&this.cursor.init(this.sheet.MusicPartManager,this.graphic);else{if(!this.cursor)return;this.cursor.hide()}}},{key:"createBackend",value:function(t,e){var n;return(n=void 0===t||t===g.BackendType.SVG?new l.SvgVexFlowBackend(this.rules):new c.CanvasVexFlowBackend(this.rules)).graphicalMusicPage=e,n.initialize(this.container),n}},{key:"setPageFormat",value:function(e){var n=t.StringToPageFormat(e);this.needBackendUpdate=!n.Equals(this.rules.PageFormat),this.rules.PageFormat=n}},{key:"setCustomPageFormat",value:function(t,e){if(t>0&&e>0){var n=new S.PageFormat(t,e);this.rules.PageFormat=n}}},{key:"createPdf",value:function(t){if(this.backendType===g.BackendType.SVG){void 0===t&&(t=this.sheet.FullNameString+".pdf");var e=this.drawer.Backends,n=e[0].getSvgElement(),i=210,r=297,o=this.rules.PageFormat;o&&!o.IsUndefined?(i=o.width,r=o.height):r=i*n.clientHeight/n.clientWidth;for(var s=new E(r>i?"p":"l","mm",[i,r]),a=i/n.clientWidth,u=0,l=e.length;u<l;++u)u>0&&s.addPage(),n=e[u].getSvgElement(),P(n,s,{scale:a,xOffset:0,yOffset:0});s.save(t)}else console.log("[OSMD] osmd.createPdf(): Warning: createPDF is only supported for SVG background for now, not for Canvas. Please use osmd.setOptions({backendType: SVG}).")}},{key:"DrawSkyLine",set:function(t){this.drawSkyLine=t,this.drawer&&(this.drawer.skyLineVisible=t,this.render())},get:function(){return this.drawer.skyLineVisible}},{key:"DrawBottomLine",set:function(t){this.drawBottomLine=t,this.drawer&&(this.drawer.bottomLineVisible=t,this.render())},get:function(){return this.drawer.bottomLineVisible}},{key:"DrawBoundingBox",set:function(t){this.drawBoundingBox=t,this.drawer.drawableBoundingBoxElement=t,this.render()},get:function(){return this.drawBoundingBox}},{key:"AutoResizeEnabled",get:function(){return this.autoResizeEnabled},set:function(t){this.autoResizeEnabled=t}},{key:"Zoom",set:function(t){this.zoom=t,this.zoomUpdated=!0,this.graphic.GetCalculator.beamsNeedUpdate=this.zoomUpdated}},{key:"FollowCursor",set:function(t){this.followCursor=t},get:function(){return this.followCursor}},{key:"Sheet",get:function(){return this.sheet}},{key:"Drawer",get:function(){return this.drawer}},{key:"GraphicSheet",get:function(){return this.graphic}},{key:"DrawingParameters",get:function(){return this.drawingParameters}},{key:"EngravingRules",get:function(){return this.rules}},{key:"Version",get:function(){return this.version}}],[{key:"StringToPageFormat",value:function(e){var n=S.PageFormat.UndefinedPageFormat;if(e.match("^[0-9]+x[0-9]+$")){var i=e.split("x"),r=Number.parseInt(i[0],10),o=Number.parseInt(i[1],10);r>0&&r<32768&&o>0&&o<32768&&(n=new S.PageFormat(r,o,"customPageFormat"+e))}return e=(e=(e=e.replace(" ","_")).replace("Landscape","L")).replace("Portrait","P"),t.PageFormatStandards.hasOwnProperty(e)?n=t.PageFormatStandards[e]:n}}]),t}();e.OpenSheetMusicDisplay=A,A.PageFormatStandards={A3_L:new S.PageFormat(420,297,"A3_L"),A3_P:new S.PageFormat(297,420,"A3_P"),A4_L:new S.PageFormat(297,210,"A4_L"),A4_P:new S.PageFormat(210,297,"A4_P"),A5_L:new S.PageFormat(210,148,"A5_L"),A5_P:new S.PageFormat(148,210,"A5_P"),A6_L:new S.PageFormat(148,105,"A6_L"),A6_P:new S.PageFormat(105,148,"A6_P"),Endless:S.PageFormat.UndefinedPageFormat,Letter_L:new S.PageFormat(279.4,215.9,"Letter_L"),Letter_P:new S.PageFormat(215.9,279.4,"Letter_P")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(64);e.AJAX=function(){function t(){h(this,t)}return d(t,null,[{key:"ajax",value:function(t){var e,n=t.indexOf(".mxl")>-1?"text/plain; charset=x-user-defined":"application/xml";if(XMLHttpRequest)e=new XMLHttpRequest;else{if(!ActiveXObject)return i.Promise.reject(new Error("XMLHttp not supported."));e=new ActiveXObject("Microsoft.XMLHTTP")}return new i.Promise((function(i,r){e.onreadystatechange=function(){e.readyState===XMLHttpRequest.DONE&&(200===e.status||0===e.status&&e.responseText?i(e.responseText):r(new Error("Could not retrieve requested URL "+e.status)))},e.ontimeout=function(t){r(new Error("Server request Timeout"))},e.overrideMimeType(n),e.open("GET",t,!0),e.send()}))}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(97);e.Cursor=function(){function t(e,n){h(this,t),this.hidden=!0,this.container=e,this.openSheetMusicDisplay=n,this.rules=this.openSheetMusicDisplay.EngravingRules;var i=document.createElement("img");i.style.position="absolute",i.style.zIndex="-1",this.cursorElement=i,this.container.appendChild(i)}return d(t,[{key:"init",value:function(t,e){this.manager=t,this.reset(),this.graphic=e,this.hidden=!0,this.hide()}},{key:"show",value:function(){this.hidden=!1,this.resetIterator(),this.update()}},{key:"resetIterator",value:function(){if(this.openSheetMusicDisplay.Sheet&&this.openSheetMusicDisplay.Sheet.SourceMeasures){var t=this.openSheetMusicDisplay.Sheet.SourceMeasures.length-1,e=this.rules.MinMeasureToDrawIndex;e=Math.min(e,t);var n=this.rules.MaxMeasureToDrawIndex;if(n=Math.min(n,t),this.openSheetMusicDisplay.Sheet&&this.openSheetMusicDisplay.Sheet.SourceMeasures.length>e&&(this.openSheetMusicDisplay.Sheet.SelectionStart=this.openSheetMusicDisplay.Sheet.SourceMeasures[e].AbsoluteTimestamp),this.openSheetMusicDisplay.Sheet&&this.openSheetMusicDisplay.Sheet.SourceMeasures.length>n){var r=this.openSheetMusicDisplay.Sheet.SourceMeasures[n];this.openSheetMusicDisplay.Sheet.SelectionEnd=i.Fraction.plus(r.AbsoluteTimestamp,r.Duration)}this.iterator=this.manager.getIterator()}else console.log("OSMD.Cursor.resetIterator(): sheet or measures were null/undefined.")}},{key:"getStaffEntryFromVoiceEntry",value:function(t){return this.graphic.findGraphicalStaffEntryFromMeasureList(t.ParentSourceStaffEntry.ParentStaff.idInMusicSheet,t.ParentSourceStaffEntry.VerticalContainerParent.ParentMeasure.measureListIndex,t.ParentSourceStaffEntry)}},{key:"update",value:function(){var t=this;if(!this.hidden){this.graphic.Cursors.length=0;var e=this.iterator,n=e.CurrentVisibleVoiceEntries();if(!e.EndReached&&void 0!==e.CurrentVoiceEntries&&0!==n.length){var i,r,o,s=n.map((function(e){return t.getStaffEntryFromVoiceEntry(e)})).sort((function(t,e){return t.PositionAndShape.AbsolutePosition.x<=e.PositionAndShape.AbsolutePosition.x?-1:1}))[0];i=s.PositionAndShape.AbsolutePosition.x;var a=s.parentMeasure.ParentMusicSystem;r=a.PositionAndShape.AbsolutePosition.y+a.StaffLines[0].PositionAndShape.RelativePosition.y;var u=a.StaffLines[a.StaffLines.length-1];o=a.PositionAndShape.AbsolutePosition.y+u.PositionAndShape.RelativePosition.y+u.StaffHeight-r;var l=this.cursorElement;l.style.top=10*r*this.openSheetMusicDisplay.zoom+"px",l.style.left=10*(i-1.5)*this.openSheetMusicDisplay.zoom+"px",l.height=10*o*this.openSheetMusicDisplay.zoom;var c=30*this.openSheetMusicDisplay.zoom;if(c!==l.width&&(l.width=c,this.updateStyle(c)),this.openSheetMusicDisplay.FollowCursor){var h=this.cursorElement.getBoundingClientRect().top;this.cursorElement.scrollIntoView({behavior:h<1e3?"smooth":"auto",block:"center"})}this.cursorElement.style.display=""}}}},{key:"hide",value:function(){this.cursorElement.style.display="none",this.hidden=!0}},{key:"next",value:function(){this.iterator.moveToNext(),this.update()}},{key:"reset",value:function(){this.resetIterator(),this.update()}},{key:"updateStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#33e02f",n=document.createElement("canvas");n.width=this.cursorElement.width,n.height=1;var i=n.getContext("2d");i.globalAlpha=.5;var r=i.createLinearGradient(0,0,this.cursorElement.width,0);r.addColorStop(0,"white"),r.addColorStop(.2,e),r.addColorStop(.8,e),r.addColorStop(1,"white"),i.fillStyle=r,i.fillRect(0,0,t,1),this.cursorElement.src=n.toDataURL("image/png")}},{key:"VoicesUnderCursor",value:function(t){return this.iterator.CurrentVisibleVoiceEntries(t)}},{key:"NotesUnderCursor",value:function(t){var e=this.VoicesUnderCursor(t),n=[];return e.forEach((function(t){n.push.apply(n,t.Notes)})),n}},{key:"Iterator",get:function(){return this.iterator}},{key:"Hidden",get:function(){return this.hidden}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SizeF2D=function(){return function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;h(this,t),this.width=e,this.height=n}}()},function(t,i,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=o(22),l=o(115),c=o(135),f=o(78),p=o(10),m=o(1),b=o(20),v=o(128),y=o(129),g=o(143),S=o(141),w=o(8),_=o(133),x=o(82),k=o(50);i.VexFlowMusicSheetCalculator=function(i){n(E,i);var o=r(E);function E(t){var e;return h(this,E),(e=o.call(this)).beamsNeedUpdate=!1,e.rules=t,s.MusicSheetCalculator.symbolFactory=new l.VexFlowGraphicalSymbolFactory,s.MusicSheetCalculator.TextMeasurer=new f.VexFlowTextMeasurer(e.rules),e}return d(E,[{key:"clearRecreatedObjects",value:function(){e(a(E.prototype),"clearRecreatedObjects",this).call(this);var t,n=u(this.graphicalMusicSheet.MeasureList);try{for(n.s();!(t=n.n()).done;){var i,r=u(t.value);try{for(r.s();!(i=r.n()).done;){i.value.clean()}}catch(o){r.e(o)}finally{r.f()}}}catch(o){n.e(o)}finally{n.f()}}},{key:"formatMeasures",value:function(){var t,e=u(this.graphicalMusicSheet.MeasureList);try{for(e.s();!(t=e.n()).done;){var n=t.value;n[0].format();var i,r=u(n);try{for(r.s();!(i=r.n()).done;){var o,s=i.value,a=u(s.staffEntries);try{for(a.s();!(o=a.n()).done;){o.value.calculateXPosition()}}catch(l){a.e(l)}finally{a.f()}this.beamsNeedUpdate&&s.finalizeBeams()}}catch(l){r.e(l)}finally{r.f()}}}catch(l){e.e(l)}finally{e.f()}this.beamsNeedUpdate=!1}},{key:"calculateMeasureXLayout",value:function(t){var e,n=[],i=u(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;n.push(r)}}catch(B){i.e(B)}finally{i.f()}t=n;var o,a=[],l=new p.Flow.Formatter,c=u(t);try{for(c.s();!(o=c.n()).done;){var h=o.value.vfVoices,f=[];for(var d in h)h.hasOwnProperty(d)&&(f.push(h[d]),a.push(h[d]));0!==f.length?l.joinVoices(f):m.debug("Found a measure with no voices. Continuing anyway.",h)}}catch(B){c.e(B)}finally{c.f()}var v=200;if(a.length>0){v=l.preCalculateMinTotalWidth(a)/b.unitInPixels+5,s.MusicSheetCalculator.setMeasuresMinStaffEntriesWidth(t,v);var y,g=function(t){l.format(a,t)},S=function(t){l.format(a,t,{align_rests:!0,context:void 0})},w=u(t);try{for(w.s();!(y=w.n()).done;){var _=y.value;if(this.rules.AlignRests===k.AlignRestOption.Never)_.formatVoices=g;else if(this.rules.AlignRests===k.AlignRestOption.Always)_.formatVoices=S;else if(this.rules.AlignRests===k.AlignRestOption.Auto){var x,E=!1,P=u(_.staffEntries);try{for(P.s();!(x=P.n()).done;){var A,L=x.value,T=0,M=0,C=u(L.graphicalVoiceEntries);try{for(C.s();!(A=C.n()).done;){var N=A.value;if(N.parentVoiceEntry.IsGrace||N&&N.notes&&N.notes[0]&&N.notes[0].sourceNote&&N.notes[0].sourceNote.PrintObject&&T++,N&&N.notes&&N.notes[0]&&N.notes[0].sourceNote&&N.notes[0].sourceNote.isRest()&&N.notes[0].sourceNote.PrintObject&&M++,T>1&&M>=1){E=!0;break}}}catch(B){C.e(B)}finally{C.f()}if(E)break}}catch(B){P.e(B)}finally{P.f()}_.formatVoices=E?S:g}_===t[0]&&_.formatVoices(v*b.unitInPixels)}}catch(B){w.e(B)}finally{w.f()}}var I,R=u(t);try{for(R.s();!(I=R.n()).done;){var O,F=u(I.value.staffEntries);try{for(F.s();!(O=F.n()).done;){O.value.calculateXPosition()}}catch(B){F.e(B)}finally{F.f()}}}catch(B){R.e(B)}finally{R.f()}return v}},{key:"calculateMeasureWidthFromLyrics",value:function(t,e){var n,i=1,r=u(t);try{for(r.s();!(n=r.n()).done;)for(var o=n.value,s={},a=0;a<o.staffEntries.length;a++){var l=o.staffEntries[a];if(0!==l.LyricsEntries.length)for(var c=0;c<l.LyricsEntries.length;c++){var h=l.LyricsEntries[c],f=h.GraphicalLabel.Label.textAlignment,d=this.rules.HorizontalBetweenLyricsDistance,p=this.rules.LyricOverlapAllowedIntoNextMeasure;if(h.ParentLyricWord){h.LyricsEntry.SyllableIndex>0&&(d=this.rules.BetweenSyllableMinimumDistance,w.TextAlignment.IsCenterAligned(h.GraphicalLabel.Label.textAlignment)&&(d+=1));var m=h.ParentLyricWord.GetLyricWord.Syllables;m.length>1&&h.LyricsEntry.SyllableIndex<m.length-1&&(void 0===this.dashSpace&&(this.dashSpace=1.5),p-=this.dashSpace)}var b=h.GraphicalLabel.PositionAndShape,v=b.Size.width,y=l.PositionAndShape.RelativePosition.x+b.BorderMarginLeft,g=void 0,S=void 0,_=void 0,x=void 0;s[c]&&(S=y-s[c].lyricsXPosition);var k=e*i;w.TextAlignment.IsCenterAligned(f)?(_=k-y,x=v/2-(p/=4),s[c]&&(g=s[c].labelWidth/2+v/2+d)):w.TextAlignment.IsLeft(f)&&(_=k-y,x=v-p,s[c]&&(g=s[c].labelWidth+d));var E,P=1;s[c]&&(P=g/S,s[c].sourceNoteDuration.Denominator>4&&(P*=1.1)),E=Math.max(x/_,P),i=Math.max(i,E),s[c]={extend:h.LyricsEntry.extend,labelWidth:v,lyricsXPosition:y,measureNumber:o.MeasureNumber,sourceNoteDuration:h.LyricsEntry.Parent.Notes[0].Length,text:h.LyricsEntry.Text}}}}catch(A){r.e(A)}finally{r.f()}return e*i}},{key:"createGraphicalTie",value:function(t,e,n,i,r){return new c.GraphicalTie(t,i,r)}},{key:"updateStaffLineBorders",value:function(t){t.SkyBottomLineCalculator.updateStaffLineBorders()}},{key:"graphicalMeasureCreatedCalculations",value:function(t){t.rules=this.rules,t.graphicalMeasureCreatedCalculations()}},{key:"layoutVoiceEntry",value:function(t,e,n,i){}},{key:"layoutStaffEntry",value:function(t){t.parentMeasure.layoutStaffEntry(t)}},{key:"initGraphicalMeasuresCreation",value:function(){}},{key:"layoutArticulationMarks",value:function(t,e,n){}},{key:"layoutGraphicalTie",value:function(t,e){var n=t.StartNote,i=t.EndNote,r=void 0,o=0;void 0!==n&&void 0!==n.vfnote&&n.vfnote.length>=2&&(r=n.vfnote[0],o=n.vfnote[1]);var s=void 0,a=0;if(void 0!==i&&void 0!==i.vfnote&&i.vfnote.length>=2&&(s=i.vfnote[0],a=i.vfnote[1]),e){if(r){var u=new p.Flow.StaveTie({first_indices:[o],first_note:r});n.parentVoiceEntry.parentStaffEntry.parentMeasure.vfTies.push(u)}if(s){var l=new p.Flow.StaveTie({last_indices:[a],last_note:s});i.parentVoiceEntry.parentStaffEntry.parentMeasure.vfTies.push(l)}}else if(r||s){var c=new p.Flow.StaveTie({first_indices:[o],first_note:r,last_indices:[a],last_note:s});i.parentVoiceEntry.parentStaffEntry.parentMeasure.vfTies.push(c)}}},{key:"calculateDynamicExpressionsForMultiExpression",value:function(t,e,n){if(!(e<this.rules.MinMeasureToDrawIndex||e>this.rules.MaxMeasureToDrawIndex)){var i=this.graphicalMusicSheet.MeasureList[e],r=i[n].ParentStaffLine,o=i[n],s=this.getRelativePositionInStaffLineFromTimestamp(t.AbsoluteTimestamp,n,r,r.isPartOfMultiStaffInstrument()),a=s;if(s.x<=0&&(a.x=o.beginInstructionsWidth+this.rules.RhythmRightMargin),t.InstantaneousDynamic){var u=new S.VexFlowInstantaneousDynamicExpression(t.InstantaneousDynamic,r,o);this.calculateGraphicalInstantaneousDynamicExpression(u,a)}if(t.StartingContinuousDynamic){var l=t.StartingContinuousDynamic,c=new x.VexFlowContinuousDynamicExpression(t.StartingContinuousDynamic,r);if(c.StartMeasure=o,!c.IsVerbal&&l.EndMultiExpression)try{this.calculateGraphicalContinuousDynamic(c,a)}catch(t){}else c.IsVerbal?this.calculateGraphicalVerbalContinuousDynamic(c,a):m.warn("This continuous dynamic is not covered")}}}},{key:"createMetronomeMark",value:function(t){var e=this.graphicalMusicSheet.MeasureList[0][0].getVFStave();e.setTempo({bpm:t.TempoInBpm,dots:t.dotted,duration:"q"},this.rules.MetronomeMarkYShift*b.unitInPixels),e.getModifiers()[e.getModifiers().length-1].setShiftX(this.rules.MetronomeMarkXShift*b.unitInPixels);var n=this.graphicalMusicSheet.MeasureList[0][0].ParentStaffLine.SkyLine;n[0]=Math.min(n[0],-4.5+this.rules.MetronomeMarkYShift)}},{key:"calculateSingleOctaveShift",value:function(t,e,n,i){var r=e.OctaveShiftStart,o=r.ParentStartMultiExpression.Timestamp,s=r.ParentEndMultiExpression.Timestamp,a=this.rules.MinMeasureToDrawIndex,u=this.rules.MaxMeasureToDrawIndex,l=this.graphicalMusicSheet.MeasureList[n][i].ParentStaffLine;void 0===l&&(l=this.graphicalMusicSheet.MeasureList[a][i].ParentStaffLine);var c=void 0;(c=void 0!==r.ParentEndMultiExpression?this.graphicalMusicSheet.getGraphicalMeasureFromSourceMeasureAndIndex(r.ParentEndMultiExpression.SourceMeasureParent,i):this.graphicalMusicSheet.getLastGraphicalMeasureFromIndex(i,!0)).MeasureNumber>u+1&&(c=this.graphicalMusicSheet.getLastGraphicalMeasureFromIndex(i,!0));var h=void 0;if((h=void 0!==r.ParentEndMultiExpression?this.graphicalMusicSheet.getGraphicalMeasureFromSourceMeasureAndIndex(r.ParentStartMultiExpression.SourceMeasureParent,i):this.graphicalMusicSheet.MeasureList[a][i]).MeasureNumber<a+1&&(h=this.graphicalMusicSheet.MeasureList[a][i]),!(h.MeasureNumber<a+1||h.MeasureNumber>u+1||c.MeasureNumber<a+1||c.MeasureNumber>u+1)){var f=c.ParentStaffLine;if(void 0===f&&(f=l),void 0!==c&&void 0!==l&&void 0!==f){var d=new g.VexFlowOctaveShift(r,l.PositionAndShape);void 0===d.getStartNote()&&d.setStartNote(h.staffEntries[0]),void 0===d.getStartNote()&&d.setEndNote(c.staffEntries.last()),l.OctaveShifts.push(d);var p=h.findGraphicalStaffEntryFromTimestamp(o);void 0===p&&(p=h.staffEntries[0]);var b=c.findGraphicalStaffEntryFromTimestamp(s);if(void 0===b&&(b=c.staffEntries[c.staffEntries.length-1]),d.setStartNote(p),f!==l){d.endsOnDifferentStaffLine=!0;var v=l.Measures[l.Measures.length-1];void 0===v&&(v=c),d.setEndNote(v.staffEntries[v.staffEntries.length-1]);var y=new g.VexFlowOctaveShift(r,c.PositionAndShape);f.OctaveShifts.push(y);var S=f.Measures[0];void 0===S&&(S=h),y.setStartNote(S.staffEntries[0]),y.setEndNote(b)}else d.setEndNote(b)}else m.warn("End measure or staffLines for octave shift are undefined! This should not happen!")}}},{key:"calculateWordRepetitionInstruction",value:function(t,e){for(var n=void 0,i=this.graphicalMusicSheet.MeasureList[e],r=0,o=i.length;r<o;++r){var s=i[r];if(void 0!==s.ParentStaffLine&&s.ParentStaff.ParentInstrument.Visible){n=s;break}}void 0!==n&&n.addWordRepetition(t)}},{key:"calculateMoodAndUnknownExpression",value:function(t,e,n){}},{key:"calculateExpressionAlignements",value:function(){var e,n=u(this.musicSystems);try{for(n.s();!(e=n.n()).done;){var i,r=u(e.value.StaffLines);try{for(r.s();!(i=r.n()).done;){var o=i.value;try{o.AlignmentManager.alignDynamicExpressions(),o.AbstractExpressions.forEach((function(t){return t.updateSkyBottomLine()}))}catch(t){}}}catch(s){r.e(s)}finally{r.f()}}}catch(s){n.e(s)}finally{n.f()}}},{key:"handleTiedGraphicalNote",value:function(t,e,n,i,r,o,s,a){}},{key:"handleBeam",value:function(t,e,n){t.parentVoiceEntry.parentStaffEntry.parentMeasure.handleBeam(t,e)}},{key:"handleVoiceEntryLyrics",value:function(t,e,n){var i=this;t.LyricsEntries.forEach((function(t,r){var o=new v.GraphicalLyricEntry(r,e,i.rules.LyricsHeight,i.rules.StaffHeight);if(e.LyricsEntries.push(o),o.GraphicalLabel.setLabelPositionAndShapeBorders(),void 0!==r.Word){var s=r.Word.Syllables.indexOf(r),a=n.indexOf(r.Word);if(-1===a&&(n.push(r.Word),a=n.indexOf(r.Word)),0===i.graphicalLyricWords.length||a>i.graphicalLyricWords.length-1){var u=new y.GraphicalLyricWord(r.Word);o.ParentLyricWord=u,u.GraphicalLyricsEntries[s]=o,i.graphicalLyricWords.push(u)}else{var l=i.graphicalLyricWords[a];o.ParentLyricWord=l,l.GraphicalLyricsEntries[s]=o,l.isFilled()&&(n.splice(a,1),i.graphicalLyricWords.splice(i.graphicalLyricWords.indexOf(l),1))}}}))}},{key:"handleVoiceEntryOrnaments",value:function(t,e,n){}},{key:"handleVoiceEntryArticulations",value:function(t,e,n){}},{key:"handleVoiceEntryTechnicalInstructions",value:function(t,e,n){}},{key:"handleTuplet",value:function(t,e,n){t.parentVoiceEntry.parentStaffEntry.parentMeasure.handleTuplet(t,e)}},{key:"findIndexGraphicalSlurFromSlur",value:function(t,e){for(var n=0;n<t.length;n++)if(t[n].slur===e)return n;return-1}},{key:"calculateSlurs",value:function(){var t,e={},n=u(this.graphicalMusicSheet.MeasureList[0]);try{for(n.s();!(t=n.n()).done;){e[t.value.ParentStaff.idInMusicSheet]=[]}}catch(j){n.e(j)}finally{n.f()}var i,r=u(this.musicSystems);try{for(r.s();!(i=r.n()).done;){var o,s=u(i.value.StaffLines);try{for(s.s();!(o=s.n()).done;){for(var a=o.value,l=e[a.ParentStaff.idInMusicSheet],c=0;c<l.length;c++){var h=new _.GraphicalSlur(l[c].slur);a.addSlurToStaffline(h),l[c]=h}var f,d=u(a.Measures);try{for(d.s();!(f=d.n()).done;){var p,m=u(f.value.staffEntries);try{for(m.s();!(p=m.n()).done;){var b,v=p.value,y=u(v.graphicalVoiceEntries);try{for(y.s();!(b=y.n()).done;){var g,S=u(b.value.notes);try{for(S.s();!(g=S.n()).done;){var w,x=g.value,k=u(x.sourceNote.NoteSlurs);try{for(k.s();!(w=k.n()).done;){var E=w.value;if(void 0!==E.EndNote&&void 0!==E.StartNote){if(E.StartNote===x.sourceNote){if(void 0!==x.sourceNote.NoteTie&&x.parentVoiceEntry.parentStaffEntry.getAbsoluteTimestamp()!==x.sourceNote.NoteTie.StartNote.getAbsoluteTimestamp())break;var P=new _.GraphicalSlur(E);l.push(P),a.addSlurToStaffline(P)}if(E.EndNote===x.sourceNote){var A=this.findIndexGraphicalSlurFromSlur(l,E);if(A>=0){var L=l[A];-1===L.staffEntries.indexOf(v)&&L.staffEntries.push(v),l.splice(A,1)}}}}}catch(j){k.e(j)}finally{k.f()}}}catch(j){S.e(j)}finally{S.f()}}}catch(j){y.e(j)}finally{y.f()}var T,M=u(l);try{for(M.s();!(T=M.n()).done;){var C=T.value;-1===C.staffEntries.indexOf(v)&&C.staffEntries.push(v)}}catch(j){M.e(j)}finally{M.f()}}}catch(j){m.e(j)}finally{m.f()}}}catch(j){d.e(j)}finally{d.f()}}}catch(j){s.e(j)}finally{s.f()}}}catch(j){r.e(j)}finally{r.f()}var N,I=u(this.musicSystems);try{for(I.s();!(N=I.n()).done;){var R,O=u(N.value.StaffLines);try{for(O.s();!(R=O.n()).done;){var F,B=u(R.value.GraphicalSlurs.sort(_.GraphicalSlur.Compare));try{for(B.s();!(F=B.n()).done;){var D=F.value;D.slur.isCrossed()||D.calculateCurve(this.rules)}}catch(j){B.e(j)}finally{B.f()}}}catch(j){O.e(j)}finally{O.f()}}}catch(j){I.e(j)}finally{I.f()}}}]),E}(s.MusicSheetCalculator)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VerticalGraphicalStaffEntryContainer=function(){function t(e,n){h(this,t),this.staffEntries=[],this.absoluteTimestamp=n,this.staffEntries=new Array(e)}return d(t,[{key:"getFirstNonNullStaffEntry",value:function(){for(var t=0,e=this.staffEntries.length;t<e;++t){var n=this.staffEntries[t];if(void 0!==n)return n}}},{key:"Index",get:function(){return this.index},set:function(t){this.index=t}},{key:"AbsoluteTimestamp",get:function(){return this.absoluteTimestamp}},{key:"StaffEntries",get:function(){return this.staffEntries},set:function(t){this.staffEntries=t}}],[{key:"compareByTimestamp",value:function(t,e){var n=t.absoluteTimestamp.RealValue,i=e.absoluteTimestamp.RealValue;return n<i?-1:n>i?1:0}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(43);e.arrays=i;var r=n(190);e.Bag=r.default;var o=n(191);e.BSTree=o.default;var s=n(106);e.BSTreeKV=s.default;var a=n(14);e.Dictionary=a.default;var u=n(108);e.Heap=u.default;var l=n(192);e.LinkedDictionary=l.default;var c=n(69);e.LinkedList=c.default;var h=n(193);e.MultiDictionary=h.default;var f=n(109);e.FactoryDictionary=f.default;var d=n(109);e.DefaultDictionary=d.default;var p=n(107);e.Queue=p.default;var m=n(194);e.PriorityQueue=m.default;var b=n(105);e.Set=b.default;var v=n(195);e.Stack=v.default;var y=n(196);e.MultiRootTree=y.default;var g=n(11);e.util=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(11),r=n(43),o=n(14),s=function(){function t(t){this.dictionary=new o.default(t)}return t.prototype.contains=function(t){return this.dictionary.containsKey(t)},t.prototype.add=function(t){return!this.contains(t)&&!i.isUndefined(t)&&(this.dictionary.setValue(t,t),!0)},t.prototype.intersection=function(t){var e=this;this.forEach((function(n){return t.contains(n)||e.remove(n),!0}))},t.prototype.union=function(t){var e=this;t.forEach((function(t){return e.add(t),!0}))},t.prototype.difference=function(t){var e=this;t.forEach((function(t){return e.remove(t),!0}))},t.prototype.isSubsetOf=function(t){if(this.size()>t.size())return!1;var e=!0;return this.forEach((function(n){return!!t.contains(n)||(e=!1,!1)})),e},t.prototype.remove=function(t){return!!this.contains(t)&&(this.dictionary.remove(t),!0)},t.prototype.forEach=function(t){this.dictionary.forEach((function(e,n){return t(n)}))},t.prototype.toArray=function(){return this.dictionary.values()},t.prototype.isEmpty=function(){return this.dictionary.isEmpty()},t.prototype.size=function(){return this.dictionary.size()},t.prototype.clear=function(){this.dictionary.clear()},t.prototype.toString=function(){return r.toString(this.toArray())},t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(11),r=n(107),o=function(){function t(t){this.root=null,this.compare=t||i.defaultCompare,this.nElements=0}return t.prototype.add=function(t){return!i.isUndefined(t)&&null!==this.insertNode(this.createNode(t))&&(this.nElements++,!0)},t.prototype.clear=function(){this.root=null,this.nElements=0},t.prototype.isEmpty=function(){return 0===this.nElements},t.prototype.size=function(){return this.nElements},t.prototype.contains=function(t){return!i.isUndefined(t)&&null!==this.searchNode(this.root,t)},t.prototype.search=function(t){var e=this.searchNode(this.root,t);if(null!==e)return e.element},t.prototype.remove=function(t){var e=this.searchNode(this.root,t);return null!==e&&(this.removeNode(e),this.nElements--,!0)},t.prototype.inorderTraversal=function(t){this.inorderTraversalAux(this.root,t,{stop:!1})},t.prototype.preorderTraversal=function(t){this.preorderTraversalAux(this.root,t,{stop:!1})},t.prototype.postorderTraversal=function(t){this.postorderTraversalAux(this.root,t,{stop:!1})},t.prototype.levelTraversal=function(t){this.levelTraversalAux(this.root,t)},t.prototype.minimum=function(){if(!this.isEmpty()&&null!==this.root)return this.minimumAux(this.root).element},t.prototype.maximum=function(){if(!this.isEmpty()&&null!==this.root)return this.maximumAux(this.root).element},t.prototype.forEach=function(t){this.inorderTraversal(t)},t.prototype.toArray=function(){var t=[];return this.inorderTraversal((function(e){return t.push(e),!0})),t},t.prototype.height=function(){return this.heightAux(this.root)},t.prototype.searchNode=function(t,e){for(var n=1;null!==t&&0!==n;)(n=this.compare(e,t.element))<0?t=t.leftCh:n>0&&(t=t.rightCh);return t},t.prototype.transplant=function(t,e){null===t.parent?this.root=e:t===t.parent.leftCh?t.parent.leftCh=e:t.parent.rightCh=e,null!==e&&(e.parent=t.parent)},t.prototype.removeNode=function(t){if(null===t.leftCh)this.transplant(t,t.rightCh);else if(null===t.rightCh)this.transplant(t,t.leftCh);else{var e=this.minimumAux(t.rightCh);e.parent!==t&&(this.transplant(e,e.rightCh),e.rightCh=t.rightCh,e.rightCh.parent=e),this.transplant(t,e),e.leftCh=t.leftCh,e.leftCh.parent=e}},t.prototype.inorderTraversalAux=function(t,e,n){null===t||n.stop||(this.inorderTraversalAux(t.leftCh,e,n),n.stop||(n.stop=!1===e(t.element),n.stop||this.inorderTraversalAux(t.rightCh,e,n)))},t.prototype.levelTraversalAux=function(t,e){var n=new r.default;for(null!==t&&n.enqueue(t),t=n.dequeue()||null;null!=t;){if(!1===e(t.element))return;null!==t.leftCh&&n.enqueue(t.leftCh),null!==t.rightCh&&n.enqueue(t.rightCh),t=n.dequeue()||null}},t.prototype.preorderTraversalAux=function(t,e,n){null===t||n.stop||(n.stop=!1===e(t.element),n.stop||(this.preorderTraversalAux(t.leftCh,e,n),n.stop||this.preorderTraversalAux(t.rightCh,e,n)))},t.prototype.postorderTraversalAux=function(t,e,n){null===t||n.stop||(this.postorderTraversalAux(t.leftCh,e,n),n.stop||(this.postorderTraversalAux(t.rightCh,e,n),n.stop||(n.stop=!1===e(t.element))))},t.prototype.minimumAux=function(t){for(;null!=t&&null!==t.leftCh;)t=t.leftCh;return t},t.prototype.maximumAux=function(t){for(;null!=t&&null!==t.rightCh;)t=t.rightCh;return t},t.prototype.heightAux=function(t){return null===t?-1:Math.max(this.heightAux(t.leftCh),this.heightAux(t.rightCh))+1},t.prototype.insertNode=function(t){for(var e=null,n=this.root;null!==n;){var i=this.compare(t.element,n.element);if(0===i)return null;i<0?(e=n,n=n.leftCh):(e=n,n=n.rightCh)}return t.parent=e,null===e?this.root=t:this.compare(t.element,e.element)<0?e.leftCh=t:e.rightCh=t,t},t.prototype.createNode=function(t){return{element:t,leftCh:null,rightCh:null,parent:null}},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(69),r=function(){function t(){this.list=new i.default}return t.prototype.enqueue=function(t){return this.list.add(t)},t.prototype.add=function(t){return this.list.add(t)},t.prototype.dequeue=function(){if(0!==this.list.size()){var t=this.list.first();return this.list.removeElementAtIndex(0),t}},t.prototype.peek=function(){if(0!==this.list.size())return this.list.first()},t.prototype.size=function(){return this.list.size()},t.prototype.contains=function(t,e){return this.list.contains(t,e)},t.prototype.isEmpty=function(){return this.list.size()<=0},t.prototype.clear=function(){this.list.clear()},t.prototype.forEach=function(t){this.list.forEach(t)},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(11),r=n(43),o=function(){function t(t){this.data=[],this.compare=t||i.defaultCompare}return t.prototype.leftChildIndex=function(t){return 2*t+1},t.prototype.rightChildIndex=function(t){return 2*t+2},t.prototype.parentIndex=function(t){return Math.floor((t-1)/2)},t.prototype.minIndex=function(t,e){return e>=this.data.length?t>=this.data.length?-1:t:this.compare(this.data[t],this.data[e])<=0?t:e},t.prototype.siftUp=function(t){for(var e=this.parentIndex(t);t>0&&this.compare(this.data[e],this.data[t])>0;)r.swap(this.data,e,t),e=this.parentIndex(t=e)},t.prototype.siftDown=function(t){for(var e=this.minIndex(this.leftChildIndex(t),this.rightChildIndex(t));e>=0&&this.compare(this.data[t],this.data[e])>0;)r.swap(this.data,e,t),e=this.minIndex(this.leftChildIndex(t=e),this.rightChildIndex(t))},t.prototype.peek=function(){return this.data.length>0?this.data[0]:void 0},t.prototype.add=function(t){return!i.isUndefined(t)&&(this.data.push(t),this.siftUp(this.data.length-1),!0)},t.prototype.removeRoot=function(){if(this.data.length>0){var t=this.data[0];return this.data[0]=this.data[this.data.length-1],this.data.splice(this.data.length-1,1),this.data.length>0&&this.siftDown(0),t}},t.prototype.contains=function(t){var e=i.compareToEquals(this.compare);return r.contains(this.data,t,e)},t.prototype.size=function(){return this.data.length},t.prototype.isEmpty=function(){return this.data.length<=0},t.prototype.clear=function(){this.data.length=0},t.prototype.forEach=function(t){r.forEach(this.data,t)},t}();e.default=o},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(14),s=n(11),a=function(t){function e(e,n){var i=t.call(this,n)||this;return i.defaultFactoryFunction=e,i}return r(e,t),e.prototype.setDefault=function(e,n){var i=t.prototype.getValue.call(this,e);return s.isUndefined(i)?(this.setValue(e,n),n):i},e.prototype.getValue=function(t){return this.setDefault(t,this.defaultFactoryFunction())},e}(o.default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(52),r=n(18),o=n(15),s=n(9),a=n(5),l=n(23),c=n(37),f=n(22),p=n(9),m=n(29),b=n(44);e.MusicSystemBuilder=function(){function t(){h(this,t),this.musicSystems=[],this.globalSystemIndex=0,this.leadSheet=!1}return d(t,[{key:"initialize",value:function(t,e,n){this.leadSheet=t.LeadSheet,this.graphicalMusicSheet=t,this.rules=this.graphicalMusicSheet.ParentMusicSheet.Rules,this.measureList=e,this.numberOfVisibleStaffLines=n,this.activeRhythm=new Array(this.numberOfVisibleStaffLines),this.activeKeys=new Array(this.numberOfVisibleStaffLines),this.activeClefs=new Array(this.numberOfVisibleStaffLines),this.initializeActiveInstructions(this.measureList[0])}},{key:"buildMusicSystems",value:function(){var t=!1,e=this.getFullPageSystemWidth();this.measureListIndex=0,this.currentSystemParams=new v,this.currentSystemParams.currentSystem=this.initMusicSystem();for(var n=0,i=0,r=this.measureList.length;i<r;++i)this.measureList[i].length>0&&n++;for(;this.measureListIndex<n;){for(var o=this.measureList[this.measureListIndex],s=0,a=o.length;s<a;++s)o[s].resetLayout();var u=o[0].parentSourceMeasure,l=u.BreakSystemAfter,c=this.currentSystemParams.IsSystemStartMeasure(),h=u===this.graphicalMusicSheet.ParentMusicSheet.getFirstSourceMeasure(),f=this.rules.MeasureLeftMargin,d=0,p=this.getMeasureStartLine();f+=this.getLineWidth(o[0],p,c),this.leadSheet||(f+=this.addBeginInstructions(o,c,h),d+=this.addEndInstructions(o));for(var m=0,b=0;b<this.numberOfVisibleStaffLines;b++)m=Math.max(m,o[b].minimumStaffEntriesWidth);var y=this.getMeasureEndLine();d+=this.getLineWidth(o[0],y,c);var g=this.rules.MeasureLeftMargin;if(this.measureListIndex+1<this.measureList.length){var S=this.measureList[this.measureListIndex+1];S[0].parentSourceMeasure.hasBeginInstructions()&&(g+=this.addBeginInstructions(S,!1,!1))}var w=f+d+m,_=this.currentSystemParams.currentWidth+w+g<e,x=this.rules.NewPageAtXMLNewPageAttribute&&u.printNewPageXml,k=x||this.rules.NewSystemAtXMLNewSystemAttribute&&u.printNewSystemXml;c||_&&!k?(this.addMeasureToSystem(o,p,y,w,f,m,d),this.updateActiveClefs(u,o),this.measureListIndex++):this.finalizeCurrentAndCreateNewSystem(o,t,x),t=l}return this.finalizeCurrentAndCreateNewSystem(this.measureList[this.measureList.length-1],!0,!1),this.musicSystems}},{key:"calculateSystemYLayout",value:function(){var t,e=u(this.musicSystems);try{for(e.s();!(t=e.n()).done;){var n=t.value;this.optimizeDistanceBetweenStaffLines(n)}}catch(i){e.e(i)}finally{e.f()}this.calculateMusicSystemsRelativePositions()}},{key:"setMeasureWidth",value:function(t,e,n,i){for(var r=0,o=t.length;r<o;++r){var s=t[r];s.setWidth(e),n>0&&(s.beginInstructionsWidth=n),i>0&&(s.endInstructionsWidth=i)}}},{key:"finalizeCurrentAndCreateNewSystem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.currentSystemParams.currentSystem.breaksPage=n,this.adaptRepetitionLineWithIfNeeded(),e||this.checkAndCreateExtraInstructionMeasure(t),this.stretchMusicSystem(e),this.currentSystemParams=new v,this.measureListIndex<this.measureList.length&&(this.currentSystemParams.currentSystem=this.initMusicSystem())}},{key:"adaptRepetitionLineWithIfNeeded",value:function(){var t=this.currentSystemParams.systemMeasures;if(t.length>=1){var e=this.currentSystemParams.currentSystem.GraphicalMeasures[this.currentSystemParams.currentSystem.GraphicalMeasures.length-1],n=t[t.length-1],i=0;n.endLine===c.SystemLinesEnum.DotsBoldBoldDots&&(n.endLine=c.SystemLinesEnum.DotsThinBold,i=e[0].getLineWidth(c.SystemLinesEnum.DotsBoldBoldDots)/2-e[0].getLineWidth(c.SystemLinesEnum.DotsThinBold)),this.currentSystemParams.currentSystemFixWidth-=i;for(var r=0,o=e.length;r<o;++r)e[r].endInstructionsWidth-=i}}},{key:"addMeasureToSystem",value:function(t,e,n,i,r,o,s){this.currentSystemParams.systemMeasures.push({beginLine:e,endLine:n}),this.setMeasureWidth(t,i,r,s),this.addStaveMeasuresToSystem(t),this.currentSystemParams.currentWidth+=i,this.currentSystemParams.currentSystemFixWidth+=r+s,this.currentSystemParams.currentSystemVarWidth+=o,this.currentSystemParams.systemMeasureIndex++}},{key:"initMusicSystem",value:function(){var t=f.MusicSheetCalculator.symbolFactory.createMusicSystem(this.globalSystemIndex++,this.rules);return this.musicSystems.push(t),this.layoutSystemStaves(t),t.createMusicSystemLabel(this.rules.InstrumentLabelTextHeight,this.rules.SystemLabelsRightMargin,this.rules.LabelMarginBorderFactor,1===this.musicSystems.length),t}},{key:"getFullPageSystemWidth",value:function(){return this.graphicalMusicSheet.ParentMusicSheet.pageWidth-this.rules.PageLeftMargin-this.rules.PageRightMargin-this.rules.SystemLeftMargin-this.rules.SystemRightMargin}},{key:"layoutSystemStaves",value:function(t){var e=this.getFullPageSystemWidth(),n=t.PositionAndShape;n.BorderLeft=0,n.BorderRight=e,n.BorderTop=0;for(var i=[],r=this.graphicalMusicSheet.ParentMusicSheet.Instruments,o=0,s=r.length;o<s;++o){var a=r[o];if(0!==a.Voices.length&&a.Visible)for(var u=0,l=a.Staves.length;u<l;++u)i.push(a.Staves[u])}var c=!1;if(this.leadSheet)for(var h=0,f=i.length;h<f;++h)if(i[h].ParentInstrument.LyricVersesNumbers.length>1){c=!0;break}for(var d=0,p=0;p<i.length;p++)if(this.addStaffLineToMusicSystem(t,d,i[p]),d+=this.rules.StaffHeight,p+1<i.length){d+=this.leadSheet&&!c?2.5:i[p].ParentInstrument===i[p+1].ParentInstrument?this.rules.BetweenStaffDistance:this.rules.StaffDistance}n.BorderBottom=d}},{key:"addStaffLineToMusicSystem",value:function(t,e,n){if(void 0!==t){var i=f.MusicSheetCalculator.symbolFactory.createStaffLine(t,n);t.StaffLines.push(i);var r=i.PositionAndShape,o=new a.PointF2D;t!==this.musicSystems[0]||this.rules.CompactMode?(o.x=0,r.BorderRight=t.PositionAndShape.Size.width):(o.x=this.rules.FirstSystemMargin,r.BorderRight=t.PositionAndShape.Size.width-this.rules.FirstSystemMargin),o.y=e,r.RelativePosition=o,r.BorderLeft=0,r.BorderTop=0,r.BorderBottom=this.rules.StaffHeight;for(var s=0;s<5;s++){var u=new a.PointF2D;u.x=0,u.y=s*this.rules.StaffHeight/4;var c=new a.PointF2D;c.x=i.PositionAndShape.Size.width,c.y=s*this.rules.StaffHeight/4,this.leadSheet&&(u.y=c.y=0),i.StaffLines[s]=new l.GraphicalLine(u,c,this.rules.StaffLineWidth)}}}},{key:"initializeActiveInstructions",value:function(t){var e=this.graphicalMusicSheet.ParentMusicSheet.getFirstSourceMeasure();if(void 0!==e){this.visibleStaffIndices=this.graphicalMusicSheet.getVisibleStavesIndicesFromSourceMeasure(t);for(var n=0,i=this.visibleStaffIndices.length;n<i;n++){var r=this.visibleStaffIndices[n],s=this.graphicalMusicSheet.getGraphicalMeasureFromSourceMeasureAndIndex(e,r);this.activeClefs[n]=e.FirstInstructionsStaffEntries[r].Instructions[0];var a=o.KeyInstruction.copy(e.FirstInstructionsStaffEntries[r].Instructions[1]);a=this.transposeKeyInstruction(a,s),this.activeKeys[n]=a,this.activeRhythm[n]=e.FirstInstructionsStaffEntries[r].Instructions[2]}}}},{key:"transposeKeyInstruction",value:function(t,e){return 0!==this.graphicalMusicSheet.ParentMusicSheet.Transpose&&e.ParentStaff.ParentInstrument.MidiInstrumentId!==p.MidiInstrument.Percussion&&void 0!==f.MusicSheetCalculator.transposeCalculator&&f.MusicSheetCalculator.transposeCalculator.transposeKey(t,this.graphicalMusicSheet.ParentMusicSheet.Transpose),t}},{key:"addBeginInstructions",value:function(t,e,n){var i=t.length;if(0===i)return 0;for(var r=0,o=t[0].parentSourceMeasure,s=0;s<i;++s){var a=this.AddInstructionsAtMeasureBegin(o.FirstInstructionsStaffEntries[this.visibleStaffIndices[s]],t[s],s,n,e);r=Math.max(r,a)}return r}},{key:"addEndInstructions",value:function(t){var e=t.length;if(0===e)return 0;for(var n=.5,i=t[0].parentSourceMeasure,r=0;r<e;r++){var o=this.addInstructionsAtMeasureEnd(i.LastInstructionsStaffEntries[this.visibleStaffIndices[r]],t[r]);n=Math.max(n,o)}return n}},{key:"AddInstructionsAtMeasureBegin",value:function(t,e,n,i,a){var u=0,l=void 0,c=void 0,h=void 0;if(void 0!==t)for(var f=0,d=t.Instructions.length;f<d;++f){var p=t.Instructions[f];p instanceof s.ClefInstruction?l=p:p instanceof o.KeyInstruction?c=p:p instanceof r.RhythmInstruction&&(h=p)}a&&(void 0===l&&(l=this.activeClefs[n]),void 0===c&&(c=this.activeKeys[n]),i&&void 0===h&&(h=this.activeRhythm[n]));var m=!1,b=!1,v=!1;return void 0!==l?(e.addClefAtBegin(l),m=!0):l=this.activeClefs[n],void 0!==c&&(c=this.transposeKeyInstruction(c,e),e.addKeyAtBegin(c,a?void 0:this.activeKeys[n],l),b=!0),void 0!==h&&h.PrintObject&&(e.addRhythmAtBegin(h),v=!0),(m||b||v)&&(u+=e.beginInstructionsWidth,v&&(u+=this.rules.RhythmRightMargin)),u}},{key:"addInstructionsAtMeasureEnd",value:function(t,e){if(void 0===t||void 0===t.Instructions||0===t.Instructions.length)return 0;for(var n=0,i=t.Instructions.length;n<i;++n){var r=t.Instructions[n];r instanceof s.ClefInstruction&&e.addClefAtEnd(r)}return this.rules.MeasureRightMargin+e.endInstructionsWidth}},{key:"updateActiveClefs",value:function(t,e){for(var n=0,i=e.length;n<i;n++){var a=this.visibleStaffIndices[n],u=t.FirstInstructionsStaffEntries[a];if(void 0!==u)for(var l=0,c=u.Instructions.length;l<c;++l){var h=u.Instructions[l];h instanceof s.ClefInstruction?this.activeClefs[n]=h:h instanceof o.KeyInstruction?this.activeKeys[n]=h:h instanceof r.RhythmInstruction&&(this.activeRhythm[n]=h)}for(var f=t.getEntriesPerStaff(a),d=0,p=f.length;d<p;++d){var m=f[d];if(void 0!==m.Instructions)for(var b=0,v=m.Instructions.length;b<v;++b){var y=m.Instructions[b];y instanceof s.ClefInstruction&&(this.activeClefs[n]=y)}}var g=t.LastInstructionsStaffEntries[a];if(void 0!==g)for(var S=g.Instructions,w=0,_=S.length;w<_;++w){var x=S[w];x instanceof s.ClefInstruction&&(this.activeClefs[n]=x)}}}},{key:"checkAndCreateExtraInstructionMeasure",value:function(t){for(var e=t[0].parentSourceMeasure.FirstInstructionsStaffEntries,n=[],i=0,s=t.length;i<s;++i)n.push(e[t[i].ParentStaff.idInMusicSheet]);for(var a=0,u=0,l=n.length;u<l;++u){var h=n[u];if(void 0!==h){for(var f=h.Instructions,d=void 0,p=void 0,m=0,b=f.length;m<b;++m){var v=f[m];v instanceof o.KeyInstruction&&v.Key!==this.activeKeys[u].Key&&(d=v),v instanceof r.RhythmInstruction&&v!==this.activeRhythm[u]&&(p=v)}if(void 0!==d||void 0!==p){var y=this.addExtraInstructionMeasure(u,d,p);a=Math.max(a,y)}}}a>0&&(this.currentSystemParams.systemMeasures.push({beginLine:c.SystemLinesEnum.None,endLine:c.SystemLinesEnum.None}),this.currentSystemParams.currentWidth+=a,this.currentSystemParams.currentSystemFixWidth+=a)}},{key:"addExtraInstructionMeasure",value:function(t,e,n){var i=this.currentSystemParams.currentSystem,r=f.MusicSheetCalculator.symbolFactory.createExtraGraphicalMeasure(i.StaffLines[t]);[].push(r),void 0!==e&&r.addKeyAtBegin(e,this.activeKeys[t],this.activeClefs[t]),void 0!==n&&n.PrintObject&&r.addRhythmAtBegin(n),r.PositionAndShape.BorderLeft=0,r.PositionAndShape.BorderTop=0,r.PositionAndShape.BorderBottom=this.rules.StaffHeight;var o=this.rules.MeasureLeftMargin+r.beginInstructionsWidth+this.rules.MeasureRightMargin;return r.PositionAndShape.BorderRight=o,i.StaffLines[t].Measures.push(r),o}},{key:"addStaveMeasuresToSystem",value:function(t){if(void 0!==t[0]){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);for(var i=this.currentSystemParams.currentSystem,r=0;r<this.numberOfVisibleStaffLines;r++){var o=e[r];i.StaffLines[r].Measures.push(o),o.ParentStaffLine=i.StaffLines[r]}i.AddGraphicalMeasures(e)}}},{key:"getMeasureStartLine",value:function(){if(this.thisMeasureBeginsLineRepetition()){var t=this.currentSystemParams.IsSystemStartMeasure(),e=0===this.measureListIndex;if(this.previousMeasureEndsLineRepetition()&&!t)return c.SystemLinesEnum.DotsBoldBoldDots;if(!e)return c.SystemLinesEnum.BoldThinDots}return c.SystemLinesEnum.None}},{key:"getMeasureEndLine",value:function(){var t=void 0;try{t=this.measureList[this.measureListIndex][0].parentSourceMeasure}finally{}return this.nextMeasureBeginsLineRepetition()&&this.thisMeasureEndsLineRepetition()?c.SystemLinesEnum.DotsBoldBoldDots:this.thisMeasureEndsLineRepetition()?c.SystemLinesEnum.DotsThinBold:this.nextMeasureHasKeyInstructionChange()||this.thisMeasureEndsWordRepetition()||this.nextMeasureBeginsWordRepetition()?c.SystemLinesEnum.DoubleThin:t&&void 0!==t.endingBarStyleEnum?t.endingBarStyleEnum:c.SystemLinesEnum.SingleThin}},{key:"getLineWidth",value:function(t,e,n){var i=t.getLineWidth(e);return e===c.SystemLinesEnum.DotsBoldBoldDots&&(i/=2),n&&e===c.SystemLinesEnum.BoldThinDots&&(i+=this.rules.DistanceBetweenLastInstructionAndRepetitionBarline),i}},{key:"previousMeasureEndsLineRepetition",value:function(){if(0===this.measureListIndex)return!1;for(var t=0,e=this.measureList[this.measureListIndex-1].length;t<e;++t)if(this.measureList[this.measureListIndex-1][t].endsWithLineRepetition())return!0;return!1}},{key:"thisMeasureBeginsLineRepetition",value:function(){for(var t=0,e=this.measureList[this.measureListIndex].length;t<e;++t)if(this.measureList[this.measureListIndex][t].beginsWithLineRepetition())return!0;return!1}},{key:"nextMeasureBeginsLineRepetition",value:function(){var t=this.measureListIndex+1;if(t>=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length||!this.measureList[t])return!1;for(var e=0,n=this.measureList[t].length;e<n;++e)if(this.measureList[t][e].beginsWithLineRepetition())return!0;return!1}},{key:"thisMeasureEndsLineRepetition",value:function(){for(var t=0,e=this.measureList[this.measureListIndex].length;t<e;++t)if(this.measureList[this.measureListIndex][t].endsWithLineRepetition())return!0;return!1}},{key:"nextMeasureBeginsWordRepetition",value:function(){var t=this.measureListIndex+1;if(t>=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length||t>this.measureList.length-1)return!1;for(var e=0,n=this.measureList[t].length;e<n;++e)if(this.measureList[t][e].beginsWithWordRepetition())return!0;return!1}},{key:"thisMeasureEndsWordRepetition",value:function(){for(var t=0,e=this.measureList[this.measureListIndex].length;t<e;++t)if(this.measureList[this.measureListIndex][t].endsWithWordRepetition())return!0;return!1}},{key:"nextMeasureHasKeyInstructionChange",value:function(){return void 0!==this.getNextMeasureKeyInstruction()}},{key:"getNextMeasureKeyInstruction",value:function(){if(this.measureListIndex<this.measureList.length-1)for(var t=0;t<this.measureList[this.measureListIndex].length;t++){var e=this.measureList[this.measureListIndex+1][t].parentSourceMeasure;if(void 0===e)return;return e.getKeyInstruction(this.visibleStaffIndices[t])}}},{key:"calculateXScalingFactor",value:function(t,e){return Math.abs(e-0)<1e-5||Math.abs(t-0)<1e-5?1:(this.currentSystemParams.currentSystem.StaffLines[0].PositionAndShape.Size.width-t)/e}},{key:"stretchMusicSystem",value:function(t){var e=this.calculateXScalingFactor(this.currentSystemParams.currentSystemFixWidth,this.currentSystemParams.currentSystemVarWidth);t&&(e=Math.min(e,this.rules.LastSystemMaxScalingFactor));for(var n=this.currentSystemParams.currentSystem,i=0,r=n.StaffLines.length;i<r;++i)for(var o=n.StaffLines[i],s=0,a=0;a<o.Measures.length;a++){var u=o.Measures[a];if(u.setPositionInStaffline(s),u.setWidth(u.beginInstructionsWidth+u.minimumStaffEntriesWidth*e+u.endInstructionsWidth),a<this.currentSystemParams.systemMeasures.length){var l=this.currentSystemParams.systemMeasures[a].beginLine,h=u.getLineWidth(c.SystemLinesEnum.BoldThinDots);switch(l){case c.SystemLinesEnum.BoldThinDots:var f=s;0===a&&(f=s+u.beginInstructionsWidth-h),n.createVerticalLineForMeasure(f,h,l,b.SystemLinePosition.MeasureBegin,a,u)}}if(u.staffEntriesScaleFactor=e,u.layoutSymbols(),!(a+1<this.currentSystemParams.systemMeasures.length&&this.currentSystemParams.systemMeasures[a+1].beginLine===c.SystemLinesEnum.BoldThinDots)){var d=c.SystemLinesEnum.SingleThin;a<this.currentSystemParams.systemMeasures.length&&(d=this.currentSystemParams.systemMeasures[a].endLine);var p=u.getLineWidth(d),m=u.PositionAndShape.RelativePosition.x+u.PositionAndShape.BorderRight-p;d===c.SystemLinesEnum.DotsBoldBoldDots&&(m-=p/2),n.createVerticalLineForMeasure(m,p,d,b.SystemLinePosition.MeasureEnd,a,u)}s=u.PositionAndShape.RelativePosition.x+u.PositionAndShape.BorderRight}t&&this.decreaseMusicSystemBorders()}},{key:"decreaseMusicSystemBorders",value:function(){for(var t=this.currentSystemParams.currentSystem,e=m.CollectionUtil.last(t.StaffLines[0].Measures).PositionAndShape,n=e.RelativePosition.x+e.Size.width,i=0,r=t.StaffLines.length;i<r;++i){var o=t.StaffLines[i];o.PositionAndShape.BorderRight=n;for(var s=0,u=o.StaffLines.length;s<u;++s){var l=o.StaffLines[s];l.End=new a.PointF2D(n,l.End.y)}}t.PositionAndShape.BorderRight=n+this.currentSystemParams.maxLabelLength+this.rules.SystemLabelsRightMargin}},{key:"optimizeDistanceBetweenStaffLines",value:function(t){if(!t.checkStaffEntriesForStaffEntryLink())for(var e=0;e<t.StaffLines.length-1;e++){var n=t.StaffLines[e].SkyBottomLineCalculator.getBottomLineMax();if(Math.abs(n)>this.rules.MinimumStaffLineDistance){var i=Math.abs(n)+this.rules.MinimumStaffLineDistance-this.rules.StaffHeight;this.updateStaffLinesRelativePosition(t,e+1,i)}}var r=t.StaffLines[0];t.PositionAndShape.BorderTop=r.PositionAndShape.RelativePosition.y+r.PositionAndShape.BorderTop;var o=t.StaffLines[t.StaffLines.length-1];t.PositionAndShape.BorderBottom=o.PositionAndShape.RelativePosition.y+o.PositionAndShape.BorderBottom}},{key:"updateStaffLinesRelativePosition",value:function(t,e,n){for(var i=e;i<t.StaffLines.length;i++)t.StaffLines[i].PositionAndShape.RelativePosition.y+=n;t.PositionAndShape.BorderBottom+=n}},{key:"createMusicPage",value:function(){var t=new i.GraphicalMusicPage(this.graphicalMusicSheet);return this.graphicalMusicSheet.MusicPages.push(t),t.PageNumber=this.graphicalMusicSheet.MusicPages.length,t.PositionAndShape.BorderLeft=0,t.PositionAndShape.BorderRight=this.graphicalMusicSheet.ParentMusicSheet.pageWidth,t.PositionAndShape.BorderTop=0,t.PositionAndShape.BorderBottom=this.rules.PageHeight,t.PositionAndShape.RelativePosition=new a.PointF2D(0,0),t}},{key:"addSystemToPage",value:function(t,e){t.MusicSystems.push(e),e.Parent=t}},{key:"calculateMusicSystemsRelativePositions",value:function(){for(var t=this.createMusicPage(),e=0,n=this.musicSystems[0],i=0,r=0;r<this.musicSystems.length;r++)if(n=this.musicSystems[r],0===t.MusicSystems.length){this.addSystemToPage(t,n),e=this.rules.CompactMode?this.rules.PageTopMarginNarrow:this.rules.PageTopMargin,1===this.graphicalMusicSheet.MusicPages.length&&this.rules.RenderTitle&&(e+=this.rules.TitleTopDistance+this.rules.SheetTitleHeight+this.rules.TitleBottomDistance),e+=-n.PositionAndShape.BorderTop;var o=new a.PointF2D(this.rules.PageLeftMargin+this.rules.SystemLeftMargin,e);n.PositionAndShape.RelativePosition=o,(e+=n.PositionAndShape.BorderBottom)>this.rules.PageHeight-this.rules.PageBottomMargin&&(++i<=4&&console.log("warning: could not fit a single system on page "+t.PageNumber+" and measure number ".concat(n.GraphicalMeasures[0][0].MeasureNumber,'.\n                            The PageFormat may be too small for this sheet."\n                            Will not give further warnings for all pages, only total.')))}else{var s=this.musicSystems[r-1],u=s.StaffLines[s.StaffLines.length-1].PositionAndShape,l=n.StaffLines[0].PositionAndShape.RelativePosition.y+u.BorderTop-(u.RelativePosition.y+u.BorderBottom),c=(l=Math.max(this.rules.MinimumDistanceBetweenSystems,l))-n.PositionAndShape.BorderTop+n.PositionAndShape.BorderBottom;if(this.rules.NewPageAtXMLNewPageAttribute&&s.breaksPage||!(e+c<this.rules.PageHeight-this.rules.PageBottomMargin)){t=this.createMusicPage(),r-=1;continue}this.addSystemToPage(t,n);var h=new a.PointF2D(this.rules.PageLeftMargin+this.rules.SystemLeftMargin,e+l-n.PositionAndShape.BorderTop);n.PositionAndShape.RelativePosition=h,e+=c}i>0&&console.log("total amount of pages that couldn't fit a single music system: ".concat(i," of ").concat(t.PageNumber))}}]),t}();var v=function(){function t(){h(this,t),this.systemMeasures=[],this.systemMeasureIndex=0,this.currentWidth=0,this.currentSystemFixWidth=0,this.currentSystemVarWidth=0,this.maxLabelLength=0}return d(t,[{key:"IsSystemStartMeasure",value:function(){return 0===this.systemMeasureIndex}}]),t}();e.SystemBuildParameters=v,e.MeasureBuildParameters=function(){return function t(){h(this,t)}}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(6);e.Clickable=function(t){n(i,t);var e=r(i);function i(){return h(this,i),e.apply(this,arguments)}return i}(o.GraphicalObject)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OctaveShiftParams=function(){return function t(e,n,i){h(this,t),this.getOpenOctaveShift=e,this.getAbsoluteStartTimestamp=n,this.getAbsoluteEndTimestamp=i}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),r=n(15),o=n(2),s=n(14),a=n(22);e.AccidentalCalculator=function(){function t(){h(this,t),this.keySignatureNoteAlterationsDict=new s.default,this.currentAlterationsComparedToKeyInstructionList=[],this.currentInMeasureNoteAlterationsDict=new s.default}return d(t,[{key:"doCalculationsAtEndOfMeasure",value:function(){this.currentInMeasureNoteAlterationsDict.clear();var t,e=u(this.keySignatureNoteAlterationsDict.keys());try{for(e.s();!(t=e.n()).done;){var n=t.value;this.currentInMeasureNoteAlterationsDict.setValue(n,this.keySignatureNoteAlterationsDict.getValue(n))}}catch(i){e.e(i)}finally{e.f()}}},{key:"checkAccidental",value:function(t,e){if(void 0!==e){var n=e.FundamentalNote+12*e.Octave,r=this.currentAlterationsComparedToKeyInstructionList.indexOf(n)>=0;this.currentInMeasureNoteAlterationsDict.containsKey(n)?(r&&this.currentAlterationsComparedToKeyInstructionList.splice(this.currentAlterationsComparedToKeyInstructionList.indexOf(n),1),this.currentInMeasureNoteAlterationsDict.getValue(n)!==e.AccidentalHalfTones&&(this.keySignatureNoteAlterationsDict.containsKey(n)&&this.keySignatureNoteAlterationsDict.getValue(n)!==e.AccidentalHalfTones?(this.currentAlterationsComparedToKeyInstructionList.push(n),this.currentInMeasureNoteAlterationsDict.setValue(n,e.AccidentalHalfTones)):this.currentInMeasureNoteAlterationsDict.remove(n),a.MusicSheetCalculator.symbolFactory.addGraphicalAccidental(t,e))):e.Accidental!==i.AccidentalEnum.NONE&&e.Accidental!==i.AccidentalEnum.NATURAL?(r||this.currentAlterationsComparedToKeyInstructionList.push(n),this.currentInMeasureNoteAlterationsDict.setValue(n,e.AccidentalHalfTones),a.MusicSheetCalculator.symbolFactory.addGraphicalAccidental(t,e)):r&&(this.currentAlterationsComparedToKeyInstructionList.splice(this.currentAlterationsComparedToKeyInstructionList.indexOf(n),1),a.MusicSheetCalculator.symbolFactory.addGraphicalAccidental(t,e))}}},{key:"reactOnKeyInstructionChange",value:function(){var t,e=r.KeyInstruction.getNoteEnumList(this.activeKeyInstruction);t=this.activeKeyInstruction.Key>0?i.AccidentalEnum.SHARP:i.AccidentalEnum.FLAT,this.keySignatureNoteAlterationsDict.clear(),this.currentAlterationsComparedToKeyInstructionList.length=0;for(var n=-9;n<9;n++)for(var s=0;s<e.length;s++)this.keySignatureNoteAlterationsDict.setValue(e[s]+12*n,o.Pitch.HalfTonesFromAccidental(t));this.doCalculationsAtEndOfMeasure()}},{key:"ActiveKeyInstruction",get:function(){return this.activeKeyInstruction},set:function(t){this.activeKeyInstruction=t,this.reactOnKeyInstructionChange()}}]),t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){n(i,t);var e=r(i);function i(t,n,r,o){var s;return h(this,i),(s=e.call(this,n)).label=t,s.staffNumber=r,s.parentMultiTempoExpression=o,s}return d(i,[{key:"Label",get:function(){return this.label},set:function(t){this.label=t}},{key:"Placement",get:function(){return this.placement},set:function(t){this.placement=t}},{key:"StaffNumber",get:function(){return this.staffNumber},set:function(t){this.staffNumber=t}},{key:"ParentMultiTempoExpression",get:function(){return this.parentMultiTempoExpression}}],[{key:"isStringInStringList",value:function(t,e){var n,r=u(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(i.stringContainsSeparatedWord(e.toLowerCase().trim(),o.toLowerCase().trim()))return!0}}catch(s){r.e(s)}finally{r.f()}return!1}},{key:"stringContainsSeparatedWord",value:function(t,e){return t===e||-1!==t.indexOf(" "+e)||-1!==t.indexOf(e+" ")}}]),i}(i(7).AbstractExpression);e.AbstractTempoExpression=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),r=n(116),o=n(86),s=n(144),a=n(36),l=n(140),c=n(126),f=n(87),p=n(19),m=n(209),b=n(145);e.VexFlowGraphicalSymbolFactory=function(){function t(){h(this,t)}return d(t,[{key:"createMusicSystem",value:function(t,e){return new r.VexFlowMusicSystem(t,e)}},{key:"createStaffLine",value:function(t,e){return new b.VexFlowStaffLine(t,e)}},{key:"createGraphicalMeasure",value:function(t,e){return new o.VexFlowMeasure(e,t,void 0)}},{key:"createTabStaffMeasure",value:function(t,e){return new m.VexFlowTabMeasure(e,t)}},{key:"createExtraGraphicalMeasure",value:function(t){return new o.VexFlowMeasure(t.ParentStaff,void 0,t)}},{key:"createStaffEntry",value:function(t,e){return new s.VexFlowStaffEntry(e,t,void 0)}},{key:"createVoiceEntry",value:function(t,e){return new f.VexFlowVoiceEntry(t,e)}},{key:"createNote",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.OctaveEnum.NONE,r=arguments.length>4?arguments[4]:void 0;return new l.VexFlowGraphicalNote(t,e,n,i,r)}},{key:"createGraceNote",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.OctaveEnum.NONE;return new l.VexFlowGraphicalNote(t,e,n,i)}},{key:"addGraphicalAccidental",value:function(t,e){t.setPitch(e)}},{key:"addFermataAtTiedEndNote",value:function(t,e){}},{key:"createInStaffClef",value:function(t,e){var n=t,r=p.VexFlowConverter.Clef(e,"small");n.vfClefBefore=new i.Flow.ClefNote(r.type,r.size,r.annotation)}},{key:"createChordSymbols",value:function(t,e,n){var i,r=e.parentMeasure.parentSourceMeasure.Rules,o=0,s=r.ChordSymbolXSpacing,a=u(t.ChordContainers);try{for(a.s();!(i=a.n()).done;){var l=i.value,h=new c.GraphicalChordSymbolContainer(l,e.PositionAndShape,r.ChordSymbolTextHeight,n,e.parentMeasure.parentSourceMeasure.Rules),f=h.GetGraphicalLabel;f.PositionAndShape.RelativePosition.y-=r.ChordSymbolYOffset,f.PositionAndShape.RelativePosition.x+=o,f.setLabelPositionAndShapeBorders(),h.PositionAndShape.calculateBoundingBox(),e.graphicalChordContainers.push(h),o+=f.PositionAndShape.Size.width+s}}catch(d){a.e(d)}finally{a.f()}}},{key:"createGraphicalTechnicalInstruction",value:function(t,e){}}]),t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(117),s=i(119),a=i(19),u=i(85),l=i(142);e.VexFlowMusicSystem=function(t){n(i,t);var e=r(i);function i(t,n){var r;return h(this,i),(r=e.call(this,t)).rules=n,r}return d(i,[{key:"calculateBorders",value:function(t){if(0!==this.staffLines.length){var e=this.calcBracketsWidth();this.boundingBox.BorderLeft=-e,this.boundingBox.BorderMarginLeft=-e,this.boundingBox.XBordersHaveBeenSet=!0;var n=this.staffLines[0].SkyBottomLineCalculator.getSkyLineMin();this.boundingBox.BorderTop=n,this.boundingBox.BorderMarginTop=n;var i=this.staffLines[this.staffLines.length-1],r=i.SkyBottomLineCalculator.getBottomLineMax()+i.PositionAndShape.RelativePosition.y;this.boundingBox.BorderBottom=r,this.boundingBox.BorderMarginBottom=r,this.boundingBox.XBordersHaveBeenSet=!0,this.boundingBox.YBordersHaveBeenSet=!0}}},{key:"createSystemLine",value:function(t,e,n,i,r,o,u){return o.addMeasureLine(n,i),u&&(u.lineTo(o,a.VexFlowConverter.line(n,i)),u.addMeasureLine(n,i)),new s.SystemLine(n,i,this,o,u)}},{key:"createInstrumentBracket",value:function(t,e){var n=new l.VexFlowInstrumentBrace(t,e);this.InstrumentBrackets.push(n)}},{key:"createGroupBracket",value:function(t,e,n){var i=t,r=e;if(0===n){var o=new u.VexFlowInstrumentBracket(i,r,n);this.GroupBrackets.push(o)}else{var s=new l.VexFlowInstrumentBrace(i,r,n);this.GroupBrackets.push(s)}}}]),i}(o.MusicSystem)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(74),a=i(4),l=i(0),c=i(8),f=i(25),p=i(6),m=i(5),b=i(37),v=i(14),y=i(44),g=i(16);e.MusicSystem=function(t){n(i,t);var e=r(i);function i(t){var n;return h(this,i),(n=e.call(this)).needsToBeRedrawn=!0,n.staffLines=[],n.graphicalMeasures=[],n.labels=new v.default,n.measureNumberLabels=[],n.objectsToRedraw=[],n.instrumentBrackets=[],n.groupBrackets=[],n.graphicalMarkedAreas=[],n.graphicalComments=[],n.systemLines=[],n.breaksPage=!1,n.id=t,n.boundingBox=new a.BoundingBox(s(n)),n.maxLabelLength=0,n}return d(i,[{key:"createSystemLeftLine",value:function(t,e,n){var i=-t/2;n&&(i=this.maxLabelLength+e-t/2);var r=void 0;this.staffLines.length>1&&(r=this.staffLines[this.staffLines.length-1].Measures[0]);var o=this.createSystemLine(i,t,b.SystemLinesEnum.SingleThin,y.SystemLinePosition.MeasureBegin,this,this.staffLines[0].Measures[0],r);this.SystemLines.push(o),o.PositionAndShape.RelativePosition=new m.PointF2D(i,0),o.PositionAndShape.BorderLeft=0,o.PositionAndShape.BorderRight=t,o.PositionAndShape.BorderTop=0,o.PositionAndShape.BorderBottom=this.boundingBox.Size.height,this.createLinesForSystemLine(o)}},{key:"createVerticalLineForMeasure",value:function(t,e,n,i,r,o){var s=o.ParentStaffLine,a=new m.PointF2D(s.PositionAndShape.RelativePosition.x,s.PositionAndShape.RelativePosition.y),u=s.ParentStaff.ParentInstrument.Staves;if(s.ParentStaff===u[0]){var l=void 0;u.length>1&&(l=this.getBottomStaffLine(s).Measures[r]);var c=this.createSystemLine(t,e,n,i,this,o,l);c.PositionAndShape.RelativePosition=new m.PointF2D(a.x+t,0),c.PositionAndShape.BorderLeft=0,c.PositionAndShape.BorderRight=e,this.SystemLines.push(c)}}},{key:"setYPositionsToVerticalLineObjectsAndCreateLines",value:function(t){}},{key:"calculateBorders",value:function(t){}},{key:"alignBeginInstructions",value:function(){}},{key:"GetLeftBorderAbsoluteXPosition",value:function(){return this.StaffLines[0].PositionAndShape.AbsolutePosition.x+this.StaffLines[0].Measures[0].beginInstructionsWidth}},{key:"GetRightBorderAbsoluteXPosition",value:function(){return this.StaffLines[0].PositionAndShape.AbsolutePosition.x+this.StaffLines[0].StaffLines[0].End.x}},{key:"AddGraphicalMeasures",value:function(t){for(var e=0,n=t.length;e<n;++e)t[e].ParentMusicSystem=this;this.graphicalMeasures.push(t)}},{key:"GetSystemsFirstTimeStamp",value:function(){return this.graphicalMeasures[0][0].parentSourceMeasure.AbsoluteTimestamp}},{key:"GetSystemsLastTimeStamp",value:function(){var t=this.graphicalMeasures[this.graphicalMeasures.length-1][0].parentSourceMeasure;return l.Fraction.plus(t.AbsoluteTimestamp,t.Duration)}},{key:"createInstrumentBrackets",value:function(t,e){for(var n=0,i=t.length;n<i;++n){var r=t[n];if(r.Staves.length>1){for(var o=void 0,s=void 0,a=0,u=this.staffLines.length;a<u;++a){var l=this.staffLines[a];l.ParentStaff===r.Staves[0]&&(o=l),l.ParentStaff===r.Staves[r.Staves.length-1]&&(s=l)}void 0!==o&&void 0!==s&&this.createInstrumentBracket(o,s)}}}},{key:"createGroupBrackets",value:function(t,e,n){for(var i=0,r=t.length;i<r;++i){var o=t[i];if(!(o.InstrumentalGroups.length<1)){var s=this.findFirstVisibleInstrumentInInstrumentalGroup(o),a=this.findLastVisibleInstrumentInInstrumentalGroup(o);if(void 0!==s&&void 0!==a){for(var u=void 0,l=void 0,c=0,h=this.staffLines.length;c<h;++c){var f=this.staffLines[c];f.ParentStaff===s.Staves[0]&&(u=f),f.ParentStaff===a.Staves[0]&&(l=f)}void 0!==u&&void 0!==l&&this.createGroupBracket(u,l,n),o.InstrumentalGroups.length<1||this.createGroupBrackets(o.InstrumentalGroups,e,n+1)}}}}},{key:"createMusicSystemLabel",value:function(t,e,n){for(var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=0,o=this.staffLines.length;r<o;++r){var s=this.staffLines[r].ParentStaff.ParentInstrument,a=void 0;if(i)a=s.NameLabel,this.rules.RenderPartNames||(a=new g.Label("",s.NameLabel.textAlignment,s.NameLabel.font),e=0);else{if(!this.rules.RenderPartAbbreviations||1===this.staffLines.length||!s.PartAbbreviation||""===s.PartAbbreviation)return;a=new g.Label(s.PartAbbreviation,s.NameLabel.textAlignment,s.NameLabel.font)}var u=new f.GraphicalLabel(a,t,c.TextAlignmentEnum.LeftCenter,this.rules,this.boundingBox);u.setLabelPositionAndShapeBorders(),this.labels.setValue(s,u)}this.maxLabelLength=0;for(var l=this.labels.values(),h=0,d=l.length;h<d;++h){var p=l[h];p.PositionAndShape.Size.width>this.maxLabelLength&&(this.maxLabelLength=p.PositionAndShape.Size.width)}this.updateMusicSystemStaffLineXPosition(e)}},{key:"setMusicSystemLabelsYPosition",value:function(){var t=this;this.labels.forEach((function(e,n){for(var i=0,r=0,o=0;o<t.staffLines.length;o++)if(t.staffLines[o].ParentStaff.ParentInstrument===e){for(var s=o;s<t.staffLines.length;s++){var a=t.staffLines[s];if(a.ParentStaff.ParentInstrument!==e)break;i+=a.PositionAndShape.RelativePosition.y,r++}break}r>0&&(n.PositionAndShape.RelativePosition=new m.PointF2D(0,i/r+2))}))}},{key:"checkStaffEntriesForStaffEntryLink",value:function(){for(var t=!1,e=!1,n=0;n<this.staffLines.length-1;n++){for(var i=0,r=this.staffLines[n].Measures.length;i<r;++i)for(var o=this.staffLines[n].Measures[i],s=0,a=o.staffEntries.length;s<a;++s)void 0!==o.staffEntries[s].sourceStaffEntry.Link&&(t=!0);for(var u=0,l=this.staffLines[n+1].Measures.length;u<l;++u)for(var c=this.staffLines[n+1].Measures[u],h=0,f=c.staffEntries.length;h<f;++h)void 0!==c.staffEntries[h].sourceStaffEntry.Link&&(e=!0)}return!(!t||!e)}},{key:"getBottomStaffLine",value:function(t){var e,n=t.ParentStaff.ParentInstrument.Staves,i=n[n.length-1],r=u(t.ParentMusicSystem.staffLines);try{for(r.s();!(e=r.n()).done;){var o=e.value;if(o.ParentStaff===i)return o}}catch(s){r.e(s)}finally{r.f()}}},{key:"createSystemLine",value:function(t,e,n,i,r,o,s){throw new Error("not implemented")}},{key:"createLinesForSystemLine",value:function(t){}},{key:"calcBracketsWidth",value:function(){for(var t=0,e=0,n=this.GroupBrackets.length;e<n;++e)t=Math.max(t,this.GroupBrackets[e].PositionAndShape.Size.width);for(var i=0,r=this.InstrumentBrackets.length;i<r;++i)t=Math.max(t,this.InstrumentBrackets[i].PositionAndShape.Size.width);return t}},{key:"createInstrumentBracket",value:function(t,e){}},{key:"createGroupBracket",value:function(t,e,n){}},{key:"findFirstVisibleInstrumentInInstrumentalGroup",value:function(t){for(var e=0,n=t.InstrumentalGroups.length;e<n;++e){var i=t.InstrumentalGroups[e];if(!(i instanceof o.Instrument))return this.findFirstVisibleInstrumentInInstrumentalGroup(i);if(!0===i.Visible)return i}}},{key:"findLastVisibleInstrumentInInstrumentalGroup",value:function(t){for(var e,n=t.InstrumentalGroups.length-1;n>=0;n--){if(!((e=t.InstrumentalGroups[n])instanceof o.Instrument))return this.findLastVisibleInstrumentInInstrumentalGroup(e);if(!0===e.Visible)return e}}},{key:"updateMusicSystemStaffLineXPosition",value:function(t){for(var e=0,n=this.StaffLines.length;e<n;++e){var i=this.StaffLines[e],r=i.PositionAndShape.RelativePosition;r.x=this.maxLabelLength+t,i.PositionAndShape.RelativePosition=r,i.PositionAndShape.BorderRight=this.boundingBox.Size.width-this.maxLabelLength-t;for(var o=0;o<i.StaffLines.length;o++){var s=new m.PointF2D(i.PositionAndShape.Size.width,i.StaffLines[o].End.y);i.StaffLines[o].End=s}}}},{key:"Parent",get:function(){return this.parent},set:function(t){if(void 0!==this.parent){var e=this.parent.MusicSystems.indexOf(this,0);e>-1&&this.parent.MusicSystems.splice(e,1)}this.parent=t,this.boundingBox.Parent=t.PositionAndShape}},{key:"NextSystem",get:function(){var t=this.Parent.MusicSystems.indexOf(this);return t!==this.Parent.MusicSystems.length?this.Parent.MusicSystems[t+1]:void 0}},{key:"StaffLines",get:function(){return this.staffLines}},{key:"GraphicalMeasures",get:function(){return this.graphicalMeasures}},{key:"MeasureNumberLabels",get:function(){return this.measureNumberLabels}},{key:"Labels",get:function(){return this.labels.values()}},{key:"ObjectsToRedraw",get:function(){return this.objectsToRedraw}},{key:"InstrumentBrackets",get:function(){return this.instrumentBrackets}},{key:"GroupBrackets",get:function(){return this.groupBrackets}},{key:"GraphicalMarkedAreas",get:function(){return this.graphicalMarkedAreas}},{key:"GraphicalComments",get:function(){return this.graphicalComments}},{key:"SystemLines",get:function(){return this.systemLines}},{key:"Id",get:function(){return this.id}}]),i}(p.GraphicalObject)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Staff=function(){function t(e,n){h(this,t),this.isTab=!1,this.voices=[],this.volume=1,this.parentInstrument=e,this.id=n,this.audible=!0,this.following=!0}return d(t,[{key:"ParentInstrument",get:function(){return this.parentInstrument},set:function(t){this.parentInstrument=t}},{key:"Voices",get:function(){return this.voices}},{key:"Id",get:function(){return this.id}},{key:"Volume",get:function(){return this.volume},set:function(t){this.volume=t}}]),t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(37),a=i(4),u=i(6);e.SystemLine=function(t){n(i,t);var e=r(i);function i(t,n,r,o,u){var l;return h(this,i),(l=e.call(this)).lineType=t,l.linePosition=n,l.parentMusicSystem=r,l.topMeasure=o,l.bottomMeasure=u,l.parentTopStaffLine=o.ParentStaffLine,l.boundingBox=new a.BoundingBox(s(l),r.PositionAndShape),l}return d(i,null,[{key:"getObjectWidthForLineType",value:function(t,e){switch(e){case o.SystemLinesEnum.SingleThin:return t.SystemThinLineWidth;case o.SystemLinesEnum.DoubleThin:return 2*t.SystemThinLineWidth+t.DistanceBetweenVerticalSystemLines;case o.SystemLinesEnum.ThinBold:return t.SystemThinLineWidth+t.SystemBoldLineWidth+t.DistanceBetweenVerticalSystemLines;case o.SystemLinesEnum.BoldThinDots:case o.SystemLinesEnum.DotsThinBold:return t.SystemThinLineWidth+t.SystemBoldLineWidth+t.DistanceBetweenVerticalSystemLines+t.SystemDotWidth+t.DistanceBetweenDotAndLine;case o.SystemLinesEnum.DotsBoldBoldDots:return 2*t.SystemBoldLineWidth+2*t.SystemDotWidth+2*t.DistanceBetweenDotAndLine+t.DistanceBetweenVerticalSystemLines;default:return 0}}}]),i}(u.GraphicalObject)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),r=n(24),o=n(23),s=n(65),a=n(5),l=n(25),c=n(16),f=n(8),p=n(13),m=n(77),b=n(121);e.MusicSheetDrawer=function(){function t(e,n){h(this,t),this.drawableBoundingBoxElement=!1,this.skyLineVisible=!1,this.bottomLineVisible=!1,this.phonicScoreMode=b.PhonicScoreModes.Manual,this.textMeasurer=e,this.splitScreenLineColor=-1,this.drawingParameters=n}return d(t,[{key:"drawSheet",value:function(t){if(this.graphicalMusicSheet=t,this.rules=t.ParentMusicSheet.Rules,this.drawSplitScreenLine(),this.drawingParameters.drawCursors){var e,n=u(t.Cursors);try{for(n.s();!(e=n.n()).done;){var o=e.value,s=new i.BoundingBox(o);s.AbsolutePosition=o.Start,s.BorderBottom=o.End.y-o.Start.y,s.BorderRight=o.Width/2,s.BorderLeft=-o.Width/2,this.isVisible(s)&&this.drawLineAsVerticalRectangle(o,r.GraphicalLayers.Cursor)}}catch(h){n.e(h)}finally{n.f()}}this.drawingParameters.drawScrollIndicator&&this.drawScrollIndicator();var a,l=u(this.graphicalMusicSheet.MusicPages);try{for(l.s();!(a=l.n()).done;){var c=a.value;this.drawPage(c)}}catch(h){l.e(h)}finally{l.f()}}},{key:"drawLineAsHorizontalRectangle",value:function(t,e){var n=new s.RectangleF2D(t.Start.x,t.End.y-t.Width/2,t.End.x-t.Start.x,t.Width);n=this.applyScreenTransformationForRect(n),this.renderRectangle(n,e,t.styleId)}},{key:"drawLineAsVerticalRectangle",value:function(t,e){var n=t.Start,i=t.Width,r=new s.RectangleF2D(n.x-i/2,n.y,i,t.End.y-n.y);r=this.applyScreenTransformationForRect(r),this.renderRectangle(r,e,t.styleId)}},{key:"drawLineAsHorizontalRectangleWithOffset",value:function(t,e,n){var i=new a.PointF2D(t.Start.x+e.x,t.Start.y+e.y),r=new a.PointF2D(t.End.x+e.x,t.End.y+e.y),o=t.Width,u=new s.RectangleF2D(i.x,r.y-o/2,r.x-i.x,o);u=this.applyScreenTransformationForRect(u),this.renderRectangle(u,n,t.styleId)}},{key:"drawLineAsVerticalRectangleWithOffset",value:function(t,e,n){var i=new a.PointF2D(t.Start.x+e.x,t.Start.y+e.y),r=new a.PointF2D(t.End.x+e.x,t.End.y+e.y),o=new s.RectangleF2D(i.x,i.y,t.Width,r.y-i.y);o=this.applyScreenTransformationForRect(o),this.renderRectangle(o,n,t.styleId)}},{key:"drawRectangle",value:function(t,e){var n=t.PositionAndShape,i=new s.RectangleF2D(n.AbsolutePosition.x,n.AbsolutePosition.y,n.BorderRight,n.BorderBottom);i=this.applyScreenTransformationForRect(i),this.renderRectangle(i,e,t.style)}},{key:"calculatePixelDistance",value:function(t){throw new Error("not implemented")}},{key:"drawLabel",value:function(t,e){if(this.isVisible(t.PositionAndShape)){var n=t.Label;if(""!==n.text.trim()){var i=this.applyScreenTransformation(t.PositionAndShape.AbsolutePosition),r=this.calculatePixelDistance(n.fontHeight),o=r*this.textMeasurer.computeTextWidthToHeightRatio(n.text,n.font,n.fontStyle),s=Math.ceil(o),a=Math.ceil(1.2*r);switch(n.textAlignment){case f.TextAlignmentEnum.LeftTop:break;case f.TextAlignmentEnum.LeftCenter:i.y-=a/2;break;case f.TextAlignmentEnum.LeftBottom:i.y-=a;break;case f.TextAlignmentEnum.CenterTop:i.x-=s/2;break;case f.TextAlignmentEnum.CenterCenter:i.x-=s/2,i.y-=a/2;break;case f.TextAlignmentEnum.CenterBottom:i.x-=s/2,i.y-=a;break;case f.TextAlignmentEnum.RightTop:i.x-=s;break;case f.TextAlignmentEnum.RightCenter:i.x-=s,i.y-=a/2;break;case f.TextAlignmentEnum.RightBottom:i.x-=s,i.y-=a;break;default:throw new p.ArgumentOutOfRangeException("")}this.renderLabel(t,e,s,a,r,i)}}}},{key:"applyScreenTransformation",value:function(t){throw new Error("not implemented")}},{key:"applyScreenTransformations",value:function(t){var e,n=[],i=u(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;n.push(this.applyScreenTransformation(r))}}catch(o){i.e(o)}finally{i.f()}return n}},{key:"applyScreenTransformationForRect",value:function(t){throw new Error("not implemented")}},{key:"drawSplitScreenLine",value:function(){}},{key:"renderRectangle",value:function(t,e,n){throw new Error("not implemented")}},{key:"drawScrollIndicator",value:function(){}},{key:"drawSelectionStartSymbol",value:function(t){}},{key:"drawSelectionEndSymbol",value:function(t){}},{key:"renderLabel",value:function(t,e,n,i,r,o){throw new Error("not implemented")}},{key:"renderSystemToScreen",value:function(t,e,n){}},{key:"drawMeasure",value:function(t){throw new Error("not implemented")}},{key:"drawSkyLine",value:function(t){}},{key:"drawBottomLine",value:function(t){}},{key:"drawInstrumentBrace",value:function(t,e){}},{key:"drawGroupBracket",value:function(t,e){}},{key:"isVisible",value:function(t){return!0}},{key:"drawMusicSystem",value:function(t){var e=this.getSystemAbsBoundingRect(t),n=this.getSytemBoundingBoxInPixels(e);this.drawMusicSystemComponents(t,n,e)}},{key:"getSytemBoundingBoxInPixels",value:function(t){var e=this.applyScreenTransformationForRect(t);return e.x=Math.round(e.x),e.y=Math.round(e.y),e}},{key:"getSystemAbsBoundingRect",value:function(t){var e=t.PositionAndShape.BoundingRectangle;return new s.RectangleF2D(t.PositionAndShape.AbsolutePosition.x+t.PositionAndShape.BorderLeft-1,t.PositionAndShape.AbsolutePosition.y+t.PositionAndShape.BorderTop-1,e.width+6,e.height+2)}},{key:"drawMusicSystemComponents",value:function(t,e,n){var i=this.graphicalMusicSheet.SelectionStartSymbol,o=this.graphicalMusicSheet.SelectionEndSymbol;this.drawingParameters.drawSelectionStartSymbol&&void 0!==i&&this.isVisible(i.PositionAndShape)&&this.drawSelectionStartSymbol(i),this.drawingParameters.drawSelectionEndSymbol&&void 0!==o&&this.isVisible(o.PositionAndShape)&&this.drawSelectionEndSymbol(o);var s,a=u(t.StaffLines);try{for(a.s();!(s=a.n()).done;){var l=s.value;this.drawStaffLine(l),this.rules.RenderLyrics&&(l.LyricsDashes.length>0&&this.drawDashes(l.LyricsDashes),l.LyricLines.length>0&&this.drawLyricLines(l.LyricLines,l))}}catch(L){a.e(L)}finally{a.f()}var c,h=u(t.SystemLines);try{for(h.s();!(c=h.n()).done;){var f=c.value;this.drawSystemLineObject(f)}}catch(L){h.e(L)}finally{h.f()}if(t.Parent===t.Parent.Parent.MusicPages[0]){var d,p=u(t.Labels);try{for(p.s();!(d=p.n()).done;){var m=d.value;this.drawLabel(m,r.GraphicalLayers.Notes)}}catch(L){p.e(L)}finally{p.f()}}var b,v=u(t.InstrumentBrackets);try{for(v.s();!(b=v.n()).done;){var y=b.value;this.drawInstrumentBrace(y,t)}}catch(L){v.e(L)}finally{v.f()}var g,S=u(t.GroupBrackets);try{for(S.s();!(g=S.n()).done;){var w=g.value;this.drawGroupBracket(w,t)}}catch(L){S.e(L)}finally{S.f()}if(!this.leadSheet){var _,x=u(t.MeasureNumberLabels);try{for(x.s();!(_=x.n()).done;){var k=_.value;this.drawLabel(k,r.GraphicalLayers.Notes)}}catch(L){x.e(L)}finally{x.f()}}var E,P=u(t.StaffLines);try{for(P.s();!(E=P.n()).done;){var A=E.value;this.drawStaffLineSymbols(A)}}catch(L){P.e(L)}finally{P.f()}this.drawingParameters.drawMarkedAreas&&this.drawMarkedAreas(t),this.drawingParameters.drawComments&&this.drawComment(t)}},{key:"activateSystemRendering",value:function(t,e,n,i){return!0}},{key:"drawSystemLineObject",value:function(t){}},{key:"drawStaffLine",value:function(t){var e,n=u(t.Measures);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.drawMeasure(i)}}catch(r){n.e(r)}finally{n.f()}this.rules.RenderLyrics&&t.LyricsDashes.length>0&&this.drawDashes(t.LyricsDashes),this.drawOctaveShifts(t),this.drawExpressions(t),this.skyLineVisible&&this.drawSkyLine(t),this.bottomLineVisible&&this.drawBottomLine(t)}},{key:"drawLyricLines",value:function(t,e){var n=this;e.LyricLines.forEach((function(t){t.Start.y+=e.PositionAndShape.AbsolutePosition.y,t.End.y+=e.PositionAndShape.AbsolutePosition.y,t.Start.x+=e.PositionAndShape.AbsolutePosition.x,t.End.x+=e.PositionAndShape.AbsolutePosition.x,n.drawGraphicalLine(t,n.rules.LyricUnderscoreLineWidth)}))}},{key:"drawExpressions",value:function(t){}},{key:"drawGraphicalLine",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"black";this.drawLine(t.Start,t.End,n,e)}},{key:"drawLine",value:function(t,e){}},{key:"drawDashes",value:function(t){var e=this;t.forEach((function(t){return e.drawLabel(t,r.GraphicalLayers.Notes)}))}},{key:"drawOctaveShifts",value:function(t){}},{key:"drawStaffLines",value:function(t){if(void 0!==t.StaffLines)for(var e=t.PositionAndShape.AbsolutePosition,n=0;n<5;n++)this.drawLineAsHorizontalRectangleWithOffset(t.StaffLines[n],e,r.GraphicalLayers.Notes)}},{key:"drawInstantaneousDynamic",value:function(t){throw new Error("not implemented")}},{key:"drawContinuousDynamic",value:function(t){throw new Error("not implemented")}},{key:"drawSymbol",value:function(t,e,n){arguments.length>4&&void 0!==arguments[4]||r.GraphicalLayers.Notes}},{key:"drawPage",value:function(t){if(this.isVisible(t.PositionAndShape)){var e,n=u(t.MusicSystems);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.isVisible(i.PositionAndShape)&&this.drawMusicSystem(i)}}catch(l){n.e(l)}finally{n.f()}if(t===t.Parent.MusicPages[0]){var o,s=u(t.Labels);try{for(s.s();!(o=s.n()).done;){var a=o.value;this.drawLabel(a,r.GraphicalLayers.Notes)}}catch(l){s.e(l)}finally{s.f()}}this.drawableBoundingBoxElement&&this.drawBoundingBoxes(t.PositionAndShape,0,this.drawableBoundingBoxElement)}}},{key:"drawBoundingBoxes",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all",u=t.DataObject.constructor.name;if(u===i||"all"===i){var h=new s.RectangleF2D(t.AbsolutePosition.x+t.BorderMarginLeft,t.AbsolutePosition.y+t.BorderMarginTop,t.BorderMarginRight-t.BorderMarginLeft,t.BorderMarginBottom-t.BorderMarginTop);this.drawLineAsHorizontalRectangle(new o.GraphicalLine(new a.PointF2D(t.AbsolutePosition.x-1,t.AbsolutePosition.y),new a.PointF2D(t.AbsolutePosition.x+1,t.AbsolutePosition.y),.1,r.OutlineAndFillStyleEnum.BaseWritingColor),n-1),this.drawLineAsVerticalRectangle(new o.GraphicalLine(new a.PointF2D(t.AbsolutePosition.x,t.AbsolutePosition.y-1),new a.PointF2D(t.AbsolutePosition.x,t.AbsolutePosition.y+1),.1,r.OutlineAndFillStyleEnum.BaseWritingColor),n-1),h=this.applyScreenTransformationForRect(h),this.renderRectangle(h,r.GraphicalLayers.Background,n,.5),this.renderLabel(new l.GraphicalLabel(new c.Label(u),.8,f.TextAlignmentEnum.CenterCenter,this.rules),n,h.width,h.height,h.height,new a.PointF2D(h.x,h.y+12))}n++,t.ChildElements.forEach((function(t){return e.drawBoundingBoxes(t,n,i)}))}},{key:"drawMarkedAreas",value:function(t){var e,n=u(t.GraphicalMarkedAreas);try{for(n.s();!(e=n.n()).done;){var i=e.value;void 0!==i&&(void 0!==i.systemRectangle&&this.drawRectangle(i.systemRectangle,r.GraphicalLayers.Background),void 0!==i.settings&&this.drawLabel(i.settings,r.GraphicalLayers.Comment),void 0!==i.labelRectangle&&this.drawRectangle(i.labelRectangle,r.GraphicalLayers.Background),void 0!==i.label&&this.drawLabel(i.label,r.GraphicalLayers.Comment))}}catch(o){n.e(o)}finally{n.f()}}},{key:"drawComment",value:function(t){var e,n=u(t.GraphicalComments);try{for(n.s();!(e=n.n()).done;){var i=e.value;void 0!==i&&(void 0!==i.settings&&this.drawLabel(i.settings,r.GraphicalLayers.Comment),void 0!==i.label&&this.drawLabel(i.label,r.GraphicalLayers.Comment))}}catch(o){n.e(o)}finally{n.f()}}},{key:"drawStaffLineSymbols",value:function(t){var e=t.PositionAndShape.AbsolutePosition.x,n=t.PositionAndShape.AbsolutePosition.y+2,i=t.PositionAndShape.BorderRight;t.ParentStaff.ParentInstrument.highlight&&this.drawingParameters.drawHighlights&&this.drawLineAsHorizontalRectangle(new o.GraphicalLine(new a.PointF2D(e,n),new a.PointF2D(e+i,n),4,r.OutlineAndFillStyleEnum.Highlighted),r.GraphicalLayers.Highlight);var s=b.MusicSymbolDrawingStyle.Disabled,l=m.MusicSymbol.PLAY,c=this.drawingParameters.drawActivitySymbols;switch(this.phonicScoreMode){case b.PhonicScoreModes.Midi:l=m.MusicSymbol.PLAY,this.midiPlaybackAvailable&&t.ParentStaff.audible&&(s=b.MusicSymbolDrawingStyle.PlaybackSymbols);break;case b.PhonicScoreModes.Following:l=m.MusicSymbol.MIC,t.ParentStaff.following&&(s=b.MusicSymbolDrawingStyle.FollowSymbols);break;default:c=!1}if(c){var h=new a.PointF2D(e+i+2,n);this.drawSymbol(l,s,h)}if(this.drawingParameters.drawErrors){var f,d=u(t.Measures);try{for(d.s();!(f=d.n()).done;){var p=f.value,v=p.PositionAndShape,y=v.AbsolutePosition.x,g=v.AbsolutePosition.y+2;p.hasError&&this.graphicalMusicSheet.ParentMusicSheet.DrawErroneousMeasures&&this.drawLineAsHorizontalRectangle(new o.GraphicalLine(new a.PointF2D(y,g),new a.PointF2D(y+v.BorderRight,g),4,r.OutlineAndFillStyleEnum.ErrorUnderlay),r.GraphicalLayers.MeasureError)}}catch(S){d.e(S)}finally{d.f()}}}},{key:"Mode",set:function(t){this.phonicScoreMode=t}},{key:"leadSheet",get:function(){return this.graphicalMusicSheet.LeadSheet},set:function(t){this.graphicalMusicSheet.LeadSheet=t}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.All=0]="All",t[t.NoOverlays=1]="NoOverlays",t[t.Leadsheet=2]="Leadsheet"}(e.DrawingMode||(e.DrawingMode={})),function(t){t[t.Normal=0]="Normal",t[t.Disabled=1]="Disabled",t[t.Selected=2]="Selected",t[t.Clickable=3]="Clickable",t[t.PlaybackSymbols=4]="PlaybackSymbols",t[t.FollowSymbols=5]="FollowSymbols",t[t.QFeedbackNotFound=6]="QFeedbackNotFound",t[t.QFeedbackOk=7]="QFeedbackOk",t[t.QFeedbackPerfect=8]="QFeedbackPerfect",t[t.Debug1=9]="Debug1",t[t.Debug2=10]="Debug2",t[t.Debug3=11]="Debug3"}(e.MusicSymbolDrawingStyle||(e.MusicSymbolDrawingStyle={})),function(t){t[t.Following=0]="Following",t[t.Midi=1]="Midi",t[t.Manual=2]="Manual"}(e.PhonicScoreModes||(e.PhonicScoreModes={}))},function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.Arpeggio=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.ARPEGGIO_DIRECTIONLESS;h(this,t),this.parentVoiceEntry=e,this.type=n,this.notes=[]}return d(t,[{key:"addNote",value:function(t){this.notes.push(t),t.Arpeggio=this}}]),t}(),function(t){t[t.BRUSH_DOWN=1]="BRUSH_DOWN",t[t.BRUSH_UP=2]="BRUSH_UP",t[t.ROLL_DOWN=3]="ROLL_DOWN",t[t.ROLL_UP=4]="ROLL_UP",t[t.RASQUEDO_DOWN=5]="RASQUEDO_DOWN",t[t.RASQUEDO_UP=6]="RASQUEDO_UP",t[t.ARPEGGIO_DIRECTIONLESS=7]="ARPEGGIO_DIRECTIONLESS"}(i=e.ArpeggioType||(e.ArpeggioType={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Beam=function(){function t(){h(this,t),this.notes=[],this.extendedNoteList=[]}return d(t,[{key:"addNoteToBeam",value:function(t){void 0!==t&&(t.NoteBeam=this,this.notes.push(t),this.extendedNoteList.push(t))}},{key:"Notes",get:function(){return this.notes},set:function(t){this.notes=t}},{key:"ExtendedNoteList",get:function(){return this.extendedNoteList},set:function(t){this.extendedNoteList=t}}]),t}(),function(t){t[t.BeamNone=-1]="BeamNone",t[t.BeamBegin=0]="BeamBegin",t[t.BeamContinue=1]="BeamContinue",t[t.BeamEnd=2]="BeamEnd",t[t.BeamForward=3]="BeamForward",t[t.BeamBackward=4]="BeamBackward"}(e.BeamEnum||(e.BeamEnum={}))},function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.UNDEFINED=0]="UNDEFINED",t[t._1024th=1]="_1024th",t[t._512th=2]="_512th",t[t._256th=3]="_256th",t[t._128th=4]="_128th",t[t._64th=5]="_64th",t[t._16th=6]="_16th",t[t.EIGTH=7]="EIGTH",t[t.QUARTER=8]="QUARTER",t[t.HALF=9]="HALF",t[t.WHOLE=10]="WHOLE",t[t.BREVE=11]="BREVE",t[t.LONG=12]="LONG",t[t.MAXIMA=13]="MAXIMA"}(i=e.NoteType||(e.NoteType={}));var r=function(){function t(){h(this,t)}return d(t,null,[{key:"NoteTypeToString",value:function(t){return this.NoteTypeXmlValues[t]}},{key:"StringToNoteType",value:function(t){var e=this.NoteTypeXmlValues.indexOf(t);return-1!==e?e:i.UNDEFINED}}]),t}();e.NoteTypeHandler=r,r.NoteTypeXmlValues=["","1024th","512th","256th","128th","64th","32th","16th","eigth","quarter","half","whole","breve","long","maxima"]},function(e,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=i(82),o=i(5);n.AlignmentManager=function(){function e(t){h(this,e),this.parentStaffline=t,this.rules=this.parentStaffline.ParentMusicSystem.rules}return d(e,[{key:"alignDynamicExpressions",value:function(){for(var e=[],n=new Array,i=0;i<this.parentStaffline.AbstractExpressions.length-1;i++){var o=this.parentStaffline.AbstractExpressions[i],s=this.parentStaffline.AbstractExpressions[i+1];o.Placement===s.Placement&&(this.getDistance(o.PositionAndShape,s.PositionAndShape).x<this.rules.DynamicExpressionMaxDistance?(-1===n.indexOf(o)&&n.push(o),n.push(s)):(e.push(n),n=new Array))}e.push(n);for(var a=0,u=e;a<u.length;a++){var l=u[a];if(l.length>0)for(var c=l.map((function(t){return t.PositionAndShape.Center.y})),h=Math.max.apply(Math,t(c)),f=0;f<l.length;f++){var d=l[f],p=c[f]-h;if(d instanceof r.VexFlowContinuousDynamicExpression?d.shiftYPosition(-p):d.PositionAndShape.RelativePosition.y-=.8*p,d.PositionAndShape.calculateBoundingBox(),d.squeeze){var m=f<l.length-1?l[f+1]:void 0,b=f>0?l[f-1]:void 0;if(m){var v=this.getOverlap(d.PositionAndShape,m.PositionAndShape);d.squeeze(-(v.x+this.rules.DynamicExpressionSpacer))}if(b){var y=this.getOverlap(b.PositionAndShape,d.PositionAndShape);d.squeeze(y.x+this.rules.DynamicExpressionSpacer)}}}}}},{key:"getDistance",value:function(t,e){return new o.PointF2D(e.RelativePosition.x+e.BorderMarginLeft-(t.RelativePosition.x+t.BorderMarginRight),e.RelativePosition.y+e.BorderMarginTop-(e.RelativePosition.y+t.BorderMarginBottom))}},{key:"getOverlap",value:function(t,e){return new o.PointF2D(t.RelativePosition.x+t.BorderMarginRight-(e.RelativePosition.x+e.BorderMarginLeft),t.RelativePosition.y+t.BorderMarginBottom-(e.RelativePosition.y+e.BorderMarginTop))}}]),e}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(8),a=i(16),u=i(25),l=i(80),c=i(4),f=i(6),p=i(5);e.GraphicalChordSymbolContainer=function(t){n(i,t);var e=r(i);function i(t,n,r,o,a){var u;return h(this,i),(u=e.call(this)).chordSymbolContainer=t,u.boundingBox=new c.BoundingBox(s(u),n),u.calculateLabel(r,o),u.rules=a,u}return d(i,[{key:"calculateLabel",value:function(t,e){var n=l.ChordSymbolContainer.calculateChordText(this.chordSymbolContainer,e);this.graphicalLabel=new u.GraphicalLabel(new a.Label(n),t,o.TextAlignmentEnum.CenterBottom,this.rules,this.boundingBox),this.graphicalLabel.PositionAndShape.RelativePosition=new p.PointF2D(0,0)}},{key:"GetChordSymbolContainer",get:function(){return this.chordSymbolContainer}},{key:"GetGraphicalLabel",get:function(){return this.graphicalLabel}}]),i}(f.GraphicalObject)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),r=function(){function t(){h(this,t),t.tPow3=new Array(t.bezierCurveStepSize),t.oneMinusTPow3=new Array(t.bezierCurveStepSize),t.bezierFactorOne=new Array(t.bezierCurveStepSize),t.bezierFactorTwo=new Array(t.bezierCurveStepSize);for(var e=0;e<t.bezierCurveStepSize;e++){var n=e/t.bezierCurveStepSize;t.tPow3[e]=Math.pow(n,3),t.oneMinusTPow3[e]=Math.pow(1-n,3),t.bezierFactorOne[e]=3*Math.pow(1-n,2)*n,t.bezierFactorTwo[e]=3*(1-n)*Math.pow(n,2)}}return d(t,[{key:"calculateCurvePointAtIndex",value:function(e){var n=Math.round(e);return n<0||n>=t.bezierCurveStepSize?new i.PointF2D:new i.PointF2D(t.oneMinusTPow3[n]*this.bezierStartPt.x+t.bezierFactorOne[n]*this.bezierStartControlPt.x+t.bezierFactorTwo[n]*this.bezierEndControlPt.x+t.tPow3[n]*this.bezierEndPt.x,t.oneMinusTPow3[n]*this.bezierStartPt.y+t.bezierFactorOne[n]*this.bezierStartControlPt.y+t.bezierFactorTwo[n]*this.bezierEndControlPt.y+t.tPow3[n]*this.bezierEndPt.y)}}]),t}();e.GraphicalCurve=r,r.bezierCurveStepSize=1e3},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(25),r=n(16),o=n(5),s=n(8);e.GraphicalLyricEntry=function(){function t(e,n,a,u){h(this,t),this.lyricsEntry=e,this.graphicalStaffEntry=n;var l=n.parentMeasure.parentSourceMeasure.Rules.LyricsAlignmentStandard;this.graphicalLabel=new i.GraphicalLabel(new r.Label(e.Text),a,l,this.graphicalStaffEntry.parentMeasure.parentSourceMeasure.Rules,n.PositionAndShape),this.graphicalLabel.PositionAndShape.RelativePosition=new o.PointF2D(0,u),l===s.TextAlignmentEnum.LeftBottom&&(this.graphicalLabel.PositionAndShape.RelativePosition.x-=1)}return d(t,[{key:"LyricsEntry",get:function(){return this.lyricsEntry}},{key:"ParentLyricWord",get:function(){return this.graphicalLyricWord},set:function(t){this.graphicalLyricWord=t}},{key:"GraphicalLabel",get:function(){return this.graphicalLabel},set:function(t){this.graphicalLabel=t}},{key:"StaffEntryParent",get:function(){return this.graphicalStaffEntry},set:function(t){this.graphicalStaffEntry=t}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GraphicalLyricWord=function(){function t(e){h(this,t),this.graphicalLyricsEntries=[],this.lyricWord=e,this.initialize()}return d(t,[{key:"isFilled",value:function(){for(var t=0;t<this.graphicalLyricsEntries.length;t++)if(void 0===this.graphicalLyricsEntries[t])return!1;return!0}},{key:"initialize",value:function(){for(var t=0;t<this.lyricWord.Syllables.length;t++)this.graphicalLyricsEntries.push(void 0)}},{key:"GetLyricWord",get:function(){return this.lyricWord}},{key:"GraphicalLyricsEntries",get:function(){return this.graphicalLyricsEntries},set:function(t){this.graphicalLyricsEntries=t}}]),t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(6),a=i(0),l=i(4),c=i(5);e.GraphicalMeasure=function(t){n(i,t);var e=r(i);function i(t,n,r){var o;return h(this,i),(o=e.call(this)).measureNumber=-1,o.parentStaff=t,o.parentSourceMeasure=n,o.parentStaffLine=r,void 0!==r?(o.parentStaff=r.ParentStaff,o.PositionAndShape=new l.BoundingBox(s(o),r.PositionAndShape)):o.PositionAndShape=new l.BoundingBox(s(o)),o.PositionAndShape.BorderBottom=4,void 0!==o.parentSourceMeasure&&(o.measureNumber=o.parentSourceMeasure.MeasureNumber),o.staffEntries=[],o}return d(i,[{key:"resetLayout",value:function(){throw new Error("not implemented")}},{key:"getLineWidth",value:function(t){throw new Error("not implemented")}},{key:"addClefAtBegin",value:function(t){throw new Error("not implemented")}},{key:"addKeyAtBegin",value:function(t,e,n){throw new Error("not implemented")}},{key:"addRhythmAtBegin",value:function(t){throw new Error("not implemented")}},{key:"addClefAtEnd",value:function(t){throw new Error("not implemented")}},{key:"setPositionInStaffline",value:function(t){this.PositionAndShape.RelativePosition=new c.PointF2D(t,0)}},{key:"setWidth",value:function(t){this.PositionAndShape.BorderRight=t}},{key:"layoutSymbols",value:function(){throw new Error("not implemented")}},{key:"findGraphicalStaffEntryFromTimestamp",value:function(t){for(var e=0,n=this.staffEntries.length;e<n;++e){var i=this.staffEntries[e];if(i.relInMeasureTimestamp.Equals(t))return i}}},{key:"findGraphicalStaffEntryFromVerticalContainerTimestamp",value:function(t){for(var e=0,n=this.staffEntries.length;e<n;++e){var i=this.staffEntries[e];if(i.sourceStaffEntry.VerticalContainerParent.getAbsoluteTimestamp().Equals(t))return i}}},{key:"hasSameDurationWithSourceMeasureParent",value:function(){for(var t=new a.Fraction(0,1),e=0,n=this.staffEntries.length;e<n;++e)t.Add(this.staffEntries[e].findStaffEntryMinNoteLength());return t.Equals(this.parentSourceMeasure.Duration)}},{key:"hasMultipleVoices",value:function(){if(0===this.staffEntries.length)return!1;for(var t=[],e=0,n=this.staffEntries.length;e<n;++e)for(var i=this.staffEntries[e],r=0,o=i.sourceStaffEntry.VoiceEntries.length;r<o;++r){var s=i.sourceStaffEntry.VoiceEntries[r];t.indexOf(s.ParentVoice)<0&&t.push(s.ParentVoice)}return t.length>1}},{key:"isVisible",value:function(){return this.ParentStaff.ParentInstrument.Visible}},{key:"getGraphicalMeasureDurationFromStaffEntries",value:function(){for(var t=new a.Fraction(0,1),e=[],n=0,i=this.staffEntries.length;n<i;++n)for(var r=this.staffEntries[n],o=0,s=r.sourceStaffEntry.VoiceEntries.length;o<s;++o){var l=r.sourceStaffEntry.VoiceEntries[o];e.indexOf(l.ParentVoice)<0&&e.push(l.ParentVoice)}for(var c=0,h=e.length;c<h;++c){var f,d=e[c],p=new a.Fraction(0,1),m=u(this.staffEntries);try{for(m.s();!(f=m.n()).done;){var b,v=u(f.value.graphicalVoiceEntries);try{for(v.s();!(b=v.n()).done;){var y=b.value;y.parentVoiceEntry.ParentVoice===d&&y.notes.length>0&&p.Add(y.notes[0].graphicalNoteLength)}}catch(g){v.e(g)}finally{v.f()}}}catch(g){m.e(g)}finally{m.f()}t.lt(p)&&(t=a.Fraction.createFromFraction(p))}return t}},{key:"addGraphicalStaffEntry",value:function(t){this.staffEntries.push(t)}},{key:"addGraphicalStaffEntryAtTimestamp",value:function(t){if(void 0!==t)if(0===this.staffEntries.length||this.staffEntries[this.staffEntries.length-1].relInMeasureTimestamp.lt(t.relInMeasureTimestamp))this.staffEntries.push(t);else for(var e=this.staffEntries.length-1;e>=0;e--){if(this.staffEntries[e].relInMeasureTimestamp.lt(t.relInMeasureTimestamp)){this.staffEntries.splice(e+1,0,t);break}0===e&&this.staffEntries.splice(e,0,t)}}},{key:"beginsWithLineRepetition",value:function(){var t=this.parentSourceMeasure;return void 0!==t&&t.beginsWithLineRepetition()}},{key:"endsWithLineRepetition",value:function(){var t=this.parentSourceMeasure;return void 0!==t&&t.endsWithLineRepetition()}},{key:"beginsWithWordRepetition",value:function(){var t=this.parentSourceMeasure;return void 0!==t&&t.beginsWithWordRepetition()}},{key:"endsWithWordRepetition",value:function(){var t=this.parentSourceMeasure;return void 0!==t&&t.endsWithWordRepetition()}},{key:"ParentStaff",get:function(){return this.parentStaff}},{key:"ParentMusicSystem",get:function(){return this.parentMusicSystem},set:function(t){this.parentMusicSystem=t}},{key:"MeasureNumber",get:function(){return this.measureNumber}},{key:"FirstInstructionStaffEntry",get:function(){return this.firstInstructionStaffEntry},set:function(t){this.firstInstructionStaffEntry=t}},{key:"LastInstructionStaffEntry",get:function(){return this.lastInstructionStaffEntry},set:function(t){this.lastInstructionStaffEntry=t}},{key:"ParentStaffLine",get:function(){return this.parentStaffLine},set:function(t){this.parentStaffLine=t,void 0!==this.parentStaffLine&&(this.PositionAndShape.Parent=this.parentStaffLine.PositionAndShape)}}]),i}(o.GraphicalObject)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(6),a=i(22),u=i(4);e.GraphicalNote=function(t){n(i,t);var e=r(i);function i(t,n,r){var o;return h(this,i),(o=e.call(this)).sourceNote=t,o.parentVoiceEntry=n,o.PositionAndShape=new u.BoundingBox(s(o),n.PositionAndShape),o.graphicalNoteLength=void 0!==r?r:t.Length,o.numberOfDots=o.calculateNumberOfNeededDots(o.graphicalNoteLength),o}return d(i,[{key:"Transpose",value:function(t,e,n,i){var r=this.sourceNote.Pitch;return void 0!==a.MusicSheetCalculator.transposeCalculator&&(r=a.MusicSheetCalculator.transposeCalculator.transposePitch(this.sourceNote.Pitch,t,n)),r}},{key:"calculateNumberOfNeededDots",value:function(t){var e=1,n=2,i=t.GetExpandedNumerator();if(void 0===this.sourceNote||void 0===this.sourceNote.NoteTuplet)for(;n<i;)e++,n=Math.pow(2,e);return Math.min(3,e-1)}},{key:"ParentMusicPage",get:function(){return this.parentVoiceEntry.parentStaffEntry.parentMeasure.ParentMusicSystem.Parent}}]),i}(o.GraphicalObject)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(6),a=i(36),u=i(4),l=i(77),c=i(13);e.GraphicalOctaveShift=function(t){n(i,t);var e=r(i);function i(t,n){var r;return h(this,i),(r=e.call(this)).getOctaveShift=t,r.setSymbol(),r.PositionAndShape=new u.BoundingBox(s(r),n),r}return d(i,[{key:"setSymbol",value:function(){switch(this.getOctaveShift.Type){case a.OctaveEnum.VA8:this.octaveSymbol=l.MusicSymbol.VA8;break;case a.OctaveEnum.VB8:this.octaveSymbol=l.MusicSymbol.VB8;break;case a.OctaveEnum.MA15:this.octaveSymbol=l.MusicSymbol.MA15;break;case a.OctaveEnum.MB15:this.octaveSymbol=l.MusicSymbol.MB15;break;default:throw new c.ArgumentOutOfRangeException("")}}}]),i}(o.GraphicalObject)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(5),s=i(127),a=i(7),u=i(201),l=i(45),c=i(0),f=i(17),p=function(t){n(i,t);var e=r(i);function i(t){var n;return h(this,i),(n=e.call(this)).staffEntries=[],n.slur=t,n}return d(i,[{key:"calculateCurve",value:function(t){var e=this.staffEntries[0],n=this.staffEntries[this.staffEntries.length-1],i=e.findGraphicalNoteFromNote(this.slur.StartNote);void 0===i&&this.graceStart&&(i=e.findGraphicalNoteFromGraceNote(this.slur.StartNote)),void 0===i&&(i=e.findEndTieGraphicalNoteFromNoteWithStartingSlur(this.slur.StartNote,this.slur));var r=n.findGraphicalNoteFromNote(this.slur.EndNote);void 0===r&&this.graceEnd&&(r=n.findGraphicalNoteFromGraceNote(this.slur.EndNote));var s=e.parentMeasure.ParentStaffLine,l=s.SkyBottomLineCalculator;this.calculatePlacement(l,s);var c,h,f,d=this.calculateStartAndEnd(i,r,s,t,l),p=d.startX,m=d.endX,b=d.startY,v=d.endY,y=t.SlurTangentMinAngle,g=t.SlurTangentMaxAngle;if(this.placement===a.PlacementEnum.Above){b-=t.SlurNoteHeadYOffset,v-=t.SlurNoteHeadYOffset,c=new o.PointF2D(p,b),h=new o.PointF2D(m,v);var S=new o.PointF2D(this.staffEntries[0].parentMeasure.PositionAndShape.RelativePosition.x+this.staffEntries[0].PositionAndShape.RelativePosition.x,b);void 0!==i?S.x+=this.staffEntries[0].PositionAndShape.BorderRight:S.x=this.staffEntries[0].parentMeasure.beginInstructionsWidth,this.graceStart&&(S.x+=n.PositionAndShape.RelativePosition.x);var w=new o.PointF2D(this.staffEntries[this.staffEntries.length-1].parentMeasure.PositionAndShape.RelativePosition.x+this.staffEntries[this.staffEntries.length-1].PositionAndShape.RelativePosition.x,v);if(void 0!==r?w.x+=this.staffEntries[this.staffEntries.length-1].PositionAndShape.BorderLeft:w.x=this.staffEntries[this.staffEntries.length-1].parentMeasure.PositionAndShape.RelativePosition.x+this.staffEntries[this.staffEntries.length-1].parentMeasure.PositionAndShape.Size.width,this.graceEnd&&(w.x+=n.staffEntryParent.PositionAndShape.RelativePosition.x),0===(f=this.calculateTopPoints(S,w,s,l)).length){var _=new o.PointF2D((w.x-S.x)/2+S.x,(w.y-S.y)/2+S.y);f.push(_)}var x,k,E=Math.atan((v-b)/(m-p)),P=new o.PointF2D(0,0),A=new o.PointF2D(m-p,-(v-b));k=(x=u.Matrix2D.getRotationMatrix(E)).getTransposeMatrix(),A=x.vectorMultiplication(A);var L=this.calculateTranslatedAndRotatedPointListAbove(f,p,b,x),T=this.calculateMaxLeftSlope(L,P,A),M=this.calculateMaxRightSlope(L,P,A),C=P.y-P.x*T,N=A.y-A.x*M,I=new o.PointF2D,R=!1;Math.abs(Math.abs(T)-Math.abs(M))<1e-4?(I.x=A.x/2,I.y=0,R=!0):(I.x=(N-C)/(T-M),I.y=T*I.x+C);var O=y,F=-y;R||this.calculateAngles(O,F,T,M,g);var B=this.calculateControlPoints(A.x,O,F,L),D=B.leftControlPoint,j=B.rightControlPoint;(D=k.vectorMultiplication(D)).x+=p,D.y=-D.y+b,(j=k.vectorMultiplication(j)).x+=p,j.y=-j.y+b,this.bezierStartPt=c,this.bezierStartControlPt=D,this.bezierEndControlPt=j,this.bezierEndPt=h;for(var V=s.SkyLine.length,G=l.getLeftIndexForPointX(this.bezierStartPt.x,V),U=l.getLeftIndexForPointX(this.bezierEndPt.x,V),z=this.bezierEndPt.x-this.bezierStartPt.x,W=l.SamplingUnit,H=G;H<U;H++){var q=this.calculateCurvePointAtIndex(Math.abs(H/W-this.bezierStartPt.x)/z),Y=l.getLeftIndexForPointX(q.x,V);Y>=G&&(s.SkyLine[Y]=Math.min(s.SkyLine[Y],q.y)),++Y<V&&(s.SkyLine[Y]=Math.min(s.SkyLine[Y],q.y))}}else{b+=t.SlurNoteHeadYOffset,v+=t.SlurNoteHeadYOffset,c=new o.PointF2D(p,b),h=new o.PointF2D(m,v);var X=new o.PointF2D(this.staffEntries[0].parentMeasure.PositionAndShape.RelativePosition.x+this.staffEntries[0].PositionAndShape.RelativePosition.x,b);void 0!==i?X.x+=this.staffEntries[0].PositionAndShape.BorderRight:X.x=this.staffEntries[0].parentMeasure.beginInstructionsWidth,this.graceStart&&(X.x+=n.PositionAndShape.RelativePosition.x);var K=new o.PointF2D(this.staffEntries[this.staffEntries.length-1].parentMeasure.PositionAndShape.RelativePosition.x+this.staffEntries[this.staffEntries.length-1].PositionAndShape.RelativePosition.x,v);if(void 0!==r?K.x+=this.staffEntries[this.staffEntries.length-1].PositionAndShape.BorderLeft:K.x=this.staffEntries[this.staffEntries.length-1].parentMeasure.PositionAndShape.RelativePosition.x+this.staffEntries[this.staffEntries.length-1].parentMeasure.PositionAndShape.Size.width,this.graceEnd&&(K.x+=n.staffEntryParent.PositionAndShape.RelativePosition.x),0===(f=this.calculateBottomPoints(X,K,s,l)).length){var J=new o.PointF2D((K.x-X.x)/2+X.x,(K.y-X.y)/2+X.y);f.push(J)}var Z,Q,$=Math.atan((v-b)/(m-p)),tt=new o.PointF2D(0,0),et=new o.PointF2D(m-p,v-b);Q=(Z=u.Matrix2D.getRotationMatrix(-$)).getTransposeMatrix(),et=Z.vectorMultiplication(et);var nt=this.calculateTranslatedAndRotatedPointListBelow(f,p,b,Z),it=this.calculateMaxLeftSlope(nt,tt,et),rt=this.calculateMaxRightSlope(nt,tt,et),ot=tt.y-tt.x*it,st=et.y-et.x*rt,at=new o.PointF2D,ut=!1;Math.abs(Math.abs(it)-Math.abs(rt))<1e-4?(at.x=et.x/2,at.y=0,ut=!0):(at.x=(st-ot)/(it-rt),at.y=it*at.x+ot);var lt=y,ct=-y;ut||this.calculateAngles(lt,ct,it,rt,g);var ht=this.calculateControlPoints(et.x,lt,ct,nt),ft=ht.leftControlPoint,dt=ht.rightControlPoint;(ft=Q.vectorMultiplication(ft)).x+=p,ft.y+=b,(dt=Q.vectorMultiplication(dt)).x+=p,dt.y+=b,this.bezierStartPt=c,this.bezierStartControlPt=ft,this.bezierEndControlPt=dt,this.bezierEndPt=h;for(var pt=s.BottomLine.length,mt=l.getLeftIndexForPointX(this.bezierStartPt.x,pt),bt=l.getLeftIndexForPointX(this.bezierEndPt.x,pt),vt=this.bezierEndPt.x-this.bezierStartPt.x,yt=l.SamplingUnit,gt=mt;gt<bt;gt++){var St=this.calculateCurvePointAtIndex(Math.abs(gt/yt-this.bezierStartPt.x)/vt),wt=l.getLeftIndexForPointX(St.x,pt);wt>=mt&&(s.BottomLine[wt]=Math.max(s.BottomLine[wt],St.y)),++wt<pt&&(s.BottomLine[wt]=Math.max(s.BottomLine[wt],St.y))}}}},{key:"calculateStartAndEnd",value:function(t,e,n,i,r){var o=0,s=0,u=0,l=0;if(void 0!==t){o=t.PositionAndShape.RelativePosition.x+t.parentVoiceEntry.parentStaffEntry.PositionAndShape.RelativePosition.x+t.parentVoiceEntry.parentStaffEntry.parentMeasure.PositionAndShape.RelativePosition.x,this.graceStart&&(o+=t.parentVoiceEntry.parentStaffEntry.staffEntryParent.PositionAndShape.RelativePosition.x);var c=t.parentVoiceEntry;s=this.placement===a.PlacementEnum.Above?c.PositionAndShape.RelativePosition.y+c.PositionAndShape.BorderTop:c.PositionAndShape.RelativePosition.y+c.PositionAndShape.BorderBottom,c.parentVoiceEntry.StemDirection===f.StemDirectionType.Down&&this.placement===a.PlacementEnum.Below&&(o-=.5),c.parentVoiceEntry.StemDirection===f.StemDirectionType.Up&&this.placement===a.PlacementEnum.Above&&(o+=.5)}else o=n.Measures[0].beginInstructionsWidth;if(void 0!==e){u=e.PositionAndShape.RelativePosition.x+e.parentVoiceEntry.parentStaffEntry.PositionAndShape.RelativePosition.x+e.parentVoiceEntry.parentStaffEntry.parentMeasure.PositionAndShape.RelativePosition.x,this.graceEnd&&(u+=e.parentVoiceEntry.parentStaffEntry.staffEntryParent.PositionAndShape.RelativePosition.x);var h=e.parentVoiceEntry;l=this.placement===a.PlacementEnum.Above?h.PositionAndShape.RelativePosition.y+h.PositionAndShape.BorderTop:h.PositionAndShape.RelativePosition.y+h.PositionAndShape.BorderBottom,h.parentVoiceEntry.StemDirection===f.StemDirectionType.Down&&this.placement===a.PlacementEnum.Below&&(u-=.5),h.parentVoiceEntry.StemDirection===f.StemDirectionType.Up&&this.placement===a.PlacementEnum.Above&&(u+=.5)}else u=n.PositionAndShape.Size.width;return void 0===t&&void 0===e&&(s=0,l=0),void 0===t&&(s=l),void 0===e&&(l=s),this.slur.startNoteHasMoreStartingSlurs()&&this.slur.isSlurLonger()&&(this.placement===a.PlacementEnum.Above?s-=i.SlursStartingAtSameStaffEntryYOffset:s+=i.SlursStartingAtSameStaffEntryYOffset),this.slur.endNoteHasMoreEndingSlurs()&&this.slur.isSlurLonger()&&(this.placement===a.PlacementEnum.Above?l-=i.SlursStartingAtSameStaffEntryYOffset:l+=i.SlursStartingAtSameStaffEntryYOffset),{startX:o,startY:s,endX:u,endY:l}}},{key:"calculatePlacement",value:function(t,e){for(var n=0,i=this.staffEntries.length;n<i;++n)if(this.staffEntries[n].parentMeasure.hasMultipleVoices())return void(this.placement=this.slur.StartNote.ParentVoiceEntry.ParentVoice instanceof l.LinkedVoice||this.slur.EndNote.ParentVoiceEntry.ParentVoice instanceof l.LinkedVoice?a.PlacementEnum.Below:a.PlacementEnum.Above);for(var r=0,o=this.staffEntries.length;r<o;++r)if(this.staffEntries[r].LyricsEntries.length>0)return void(this.placement=a.PlacementEnum.Above);var s=this.staffEntries[0],u=this.staffEntries[this.staffEntries.length-1],c=s.PositionAndShape.BorderLeft+s.PositionAndShape.RelativePosition.x+s.parentMeasure.PositionAndShape.RelativePosition.x,h=u.PositionAndShape.BorderRight+u.PositionAndShape.RelativePosition.x+u.parentMeasure.PositionAndShape.RelativePosition.x;this.graceStart&&(c+=u.PositionAndShape.RelativePosition.x),this.graceEnd&&(h+=u.staffEntryParent.PositionAndShape.RelativePosition.x);var f=t.getSkyLineMinInRange(c,h),d=t.getBottomLineMaxInRange(c,h);f=Math.min(s.PositionAndShape.BorderTop,u.PositionAndShape.BorderTop)-f,d-=Math.max(s.PositionAndShape.BorderBottom,u.PositionAndShape.BorderBottom),this.placement=Math.abs(d)>Math.abs(f)?a.PlacementEnum.Above:a.PlacementEnum.Below}},{key:"calculateTopPoints",value:function(t,e,n,i){var r=[],s=i.getRightIndexForPointX(t.x,n.SkyLine.length),a=i.getLeftIndexForPointX(e.x,n.SkyLine.length);s<0&&(s=0),a>=n.SkyLine.length&&(a=n.SkyLine.length-1);for(var u=s;u<a;u++){var l=new o.PointF2D((.5+u)/i.SamplingUnit,n.SkyLine[u]);r.push(l)}return r}},{key:"calculateBottomPoints",value:function(t,e,n,i){var r=[],s=i.getRightIndexForPointX(t.x,n.BottomLine.length),a=i.getLeftIndexForPointX(e.x,n.BottomLine.length);s<0&&(s=0),a>=n.BottomLine.length&&(a=n.BottomLine.length-1);for(var u=s;u<a;u++){var l=new o.PointF2D((.5+u)/i.SamplingUnit,n.BottomLine[u]);r.push(l)}return r}},{key:"calculateMaxLeftSlope",value:function(t,e,n){for(var i=-Number.MAX_VALUE,r=e.x,o=e.y,s=0;s<t.length;s++)Math.abs(t[s].y-Number.MAX_VALUE)<1e-4||Math.abs(t[s].y- -Number.MAX_VALUE)<1e-4||(i=Math.max(i,(t[s].y-o)/(t[s].x-r)));return i=Math.max(i,Math.abs(n.y-o)/(n.x-r))}},{key:"calculateMaxRightSlope",value:function(t,e,n){for(var i=Number.MAX_VALUE,r=n.x,o=n.y,s=0;s<t.length;s++)Math.abs(t[s].y-Number.MAX_VALUE)<1e-4||Math.abs(t[s].y- -Number.MAX_VALUE)<1e-4||(i=Math.min(i,(o-t[s].y)/(r-t[s].x)));return i=Math.min(i,(o-e.y)/(r-e.x))}},{key:"getPointListMaxY",value:function(t){for(var e=-Number.MAX_VALUE,n=0,i=t.length;n<i;++n){var r=t[n];Math.abs(r.y- -Number.MAX_VALUE)<1e-4||Math.abs(r.y-Number.MAX_VALUE)<1e-4||(e=Math.max(e,r.y))}return e}},{key:"calculateTranslatedAndRotatedPointListAbove",value:function(t,e,n,i){for(var r=[],s=0;s<t.length;s++)if(!(Math.abs(t[s].y-Number.MAX_VALUE)<1e-4||Math.abs(t[s].y- -Number.MAX_VALUE)<1e-4)){var a=new o.PointF2D(t[s].x-e,-(t[s].y-n));a=i.vectorMultiplication(a),r.push(a)}return r}},{key:"calculateTranslatedAndRotatedPointListBelow",value:function(t,e,n,i){for(var r=[],s=0;s<t.length;s++)if(!(Math.abs(t[s].y-Number.MAX_VALUE)<1e-4||Math.abs(t[s].y- -Number.MAX_VALUE)<1e-4)){var a=new o.PointF2D(t[s].x-e,t[s].y-n);a=i.vectorMultiplication(a),r.push(a)}return r}},{key:"calculateHeightWidthRatio",value:function(t,e){return 0===e.length?0:Math.max(0,this.getPointListMaxY(e))/t}},{key:"calculateControlPoints",value:function(t,e,n,r){var s=this.calculateHeightWidthRatio(t,r),a=t*(i.k*s+i.d),u=new o.PointF2D;u.x=a*Math.cos(e*i.degreesToRadiansFactor),u.y=a*Math.sin(e*i.degreesToRadiansFactor);var l=new o.PointF2D;return l.x=t-a*Math.cos(n*i.degreesToRadiansFactor),l.y=-a*Math.sin(n*i.degreesToRadiansFactor),{leftControlPoint:u,rightControlPoint:l}}},{key:"calculateAngles",value:function(t,e,n,r,o){var s=Math.atan(n)/i.degreesToRadiansFactor;n>0?s+=20:s-=20;var a=Math.atan(r)/i.degreesToRadiansFactor;r<0?a-=20:a+=20,t=Math.min(Math.max(t,s),o),e=Math.max(Math.min(e,a),-o)}}],[{key:"Compare",value:function(t,e){if(t.staffEntries.length<1)return-1;if(e.staffEntries.length<1)return 1;var n=c.Fraction.minus(t.staffEntries[t.staffEntries.length-1].getAbsoluteTimestamp(),t.staffEntries[0].getAbsoluteTimestamp()),i=c.Fraction.minus(e.staffEntries[e.staffEntries.length-1].getAbsoluteTimestamp(),e.staffEntries[0].getAbsoluteTimestamp());return n.RealValue>i.RealValue?1:i.RealValue>n.RealValue?-1:0}}]),i}(s.GraphicalCurve);e.GraphicalSlur=p,p.degreesToRadiansFactor=Math.PI/180,p.k=.9,p.d=.2},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(4),a=i(0),l=i(6),c=i(29),f=i(22);e.GraphicalStaffEntry=function(t){n(i,t);var e=r(i);function i(t,n,r){var a;return h(this,i),(a=e.call(this)).graphicalChordContainers=[],a.tabStaffEntry=void 0,a.graphicalInstructions=[],a.graphicalTies=[],a.lyricsEntries=[],a.parentMeasure=t,a.graphicalVoiceEntries=[],a.sourceStaffEntry=n,void 0!==r?(a.staffEntryParent=r,a.parentVerticalContainer=r.parentVerticalContainer,a.PositionAndShape=new o.BoundingBox(s(a),r.PositionAndShape)):a.PositionAndShape=new o.BoundingBox(s(a),t.PositionAndShape),void 0!==n&&(a.relInMeasureTimestamp=n.Timestamp),a}return d(i,[{key:"getAbsoluteTimestamp",value:function(){var t=this.parentMeasure.parentSourceMeasure.AbsoluteTimestamp.clone();return void 0!==this.relInMeasureTimestamp&&t.Add(this.relInMeasureTimestamp),t}},{key:"findEndTieGraphicalNoteFromNote",value:function(t){var e,n=u(this.graphicalVoiceEntries);try{for(n.s();!(e=n.n()).done;){var i,r=u(e.value.notes);try{for(r.s();!(i=r.n()).done;){var o=i.value,s=o.sourceNote;if(!s.isRest()&&s.Pitch.FundamentalNote===t.Pitch.FundamentalNote&&s.Pitch.Octave===t.Pitch.Octave&&s.getAbsoluteTimestamp().Equals(t.getAbsoluteTimestamp()))return o}}catch(a){r.e(a)}finally{r.f()}}}catch(a){n.e(a)}finally{n.f()}}},{key:"findEndTieGraphicalNoteFromNoteWithStartingSlur",value:function(t,e){if(void 0!==t){var n,i=u(this.graphicalVoiceEntries);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.parentVoiceEntry===t.ParentVoiceEntry){var o,s=u(r.notes);try{for(s.s();!(o=s.n()).done;){var a=o.value,l=a.sourceNote;if(void 0!==l.NoteTie&&-1!==l.NoteSlurs.indexOf(e))return a}}catch(c){s.e(c)}finally{s.f()}}}}catch(c){i.e(c)}finally{i.f()}}}},{key:"findGraphicalNoteFromGraceNote",value:function(t){if(void 0!==t){var e,n=u(this.graphicalVoiceEntries);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.parentVoiceEntry===t.ParentVoiceEntry){var r,o=u(i.notes);try{for(o.s();!(r=o.n()).done;){var s=r.value;if(s.sourceNote===t)return s}}catch(a){o.e(a)}finally{o.f()}}}}catch(a){n.e(a)}finally{n.f()}}}},{key:"findGraphicalNoteFromNote",value:function(t){if(void 0!==t){var e,n=u(this.graphicalVoiceEntries);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.parentVoiceEntry===t.ParentVoiceEntry){var r,o=u(i.notes);try{for(o.s();!(r=o.n()).done;){var s=r.value;if(s.sourceNote===t&&this.getAbsoluteTimestamp().Equals(t.getAbsoluteTimestamp()))return s}}catch(a){o.e(a)}finally{o.f()}}}}catch(a){n.e(a)}finally{n.f()}}}},{key:"getGraphicalNoteDurationFromVoice",value:function(t){var e,n=u(this.graphicalVoiceEntries);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.parentVoiceEntry.ParentVoice===t)return i.notes[0].graphicalNoteLength}}catch(r){n.e(r)}finally{n.f()}return new a.Fraction(0,1)}},{key:"findVoiceEntryGraphicalNotes",value:function(t){var e,n=u(this.graphicalVoiceEntries);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.parentVoiceEntry===t)return i.notes}}catch(r){n.e(r)}finally{n.f()}}},{key:"isVoiceEntryPartOfLinkedVoiceEntry",value:function(t){if(void 0!==this.sourceStaffEntry.Link)for(var e=0,n=this.sourceStaffEntry.Link.LinkStaffEntries.length;e<n;++e){var i=this.sourceStaffEntry.Link.LinkStaffEntries[e];if(-1!==i.VoiceEntries.indexOf(t)&&i!==this.sourceStaffEntry)return!0}return!1}},{key:"findStaffEntryMinNoteLength",value:function(){var t,e=new a.Fraction(Number.MAX_VALUE,1),n=u(this.graphicalVoiceEntries);try{for(n.s();!(t=n.n()).done;){var i,r=u(t.value.notes);try{for(r.s();!(i=r.n()).done;){var o=i.value.graphicalNoteLength;o.lt(e)&&o.GetExpandedNumerator()>0&&(e=o)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){n.e(s)}finally{n.f()}return e}},{key:"findStaffEntryMaxNoteLength",value:function(){var t,e=new a.Fraction(0,1),n=u(this.graphicalVoiceEntries);try{for(n.s();!(t=n.n()).done;){var i,r=u(t.value.notes);try{for(r.s();!(i=r.n()).done;){var o=i.value.graphicalNoteLength;e.lt(o)&&o.GetExpandedNumerator()>0&&(e=o)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){n.e(s)}finally{n.f()}return e}},{key:"findOrCreateGraphicalVoiceEntry",value:function(t){var e,n=u(this.graphicalVoiceEntries);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.parentVoiceEntry===t)return i}}catch(o){n.e(o)}finally{n.f()}var r=f.MusicSheetCalculator.symbolFactory.createVoiceEntry(t,this);return this.graphicalVoiceEntries.push(r),r}},{key:"findOrCreateGraphicalVoiceEntryFromGraphicalNote",value:function(t){var e,n=u(this.graphicalVoiceEntries);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i===t.parentVoiceEntry)return i}}catch(o){n.e(o)}finally{n.f()}var r=f.MusicSheetCalculator.symbolFactory.createVoiceEntry(t.sourceNote.ParentVoiceEntry,this);return this.graphicalVoiceEntries.push(r),r}},{key:"addGraphicalNoteToListAtCorrectYPosition",value:function(t,e){var n=t.notes;if(0===n.length||e.PositionAndShape.RelativePosition.y<c.CollectionUtil.last(n).PositionAndShape.RelativePosition.y)n.push(e);else for(var i=n.length-1;i>=0;i--){if(n[i].PositionAndShape.RelativePosition.y>e.PositionAndShape.RelativePosition.y){n.splice(i+1,0,e);break}if(0===i){n.splice(0,0,e);break}}}},{key:"hasOnlyRests",value:function(){var t,e=u(this.graphicalVoiceEntries);try{for(e.s();!(t=e.n()).done;){var n,i=u(t.value.notes);try{for(i.s();!(n=i.n()).done;){if(!n.value.sourceNote.isRest())return!1}}catch(r){i.e(r)}finally{i.f()}}}catch(r){e.e(r)}finally{e.f()}return!0}},{key:"GraphicalInstructions",get:function(){return this.graphicalInstructions}},{key:"GraphicalTies",get:function(){return this.graphicalTies}},{key:"LyricsEntries",get:function(){return this.lyricsEntries},set:function(t){this.lyricsEntries=t}}]),i}(l.GraphicalObject)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GraphicalTie=function(){function t(e,n,i){h(this,t),this.tie=e,this.startNote=n,this.endNote=i}return d(t,[{key:"GetTie",get:function(){return this.tie}},{key:"StartNote",get:function(){return this.startNote},set:function(t){this.startNote=t}},{key:"EndNote",get:function(){return this.endNote},set:function(t){this.endNote=t}}]),t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(6),a=i(4),u=i(47);e.GraphicalVoiceEntry=function(t){n(i,t);var e=r(i);function i(t,n){var r;return h(this,i),(r=e.call(this)).parentVoiceEntry=t,r.parentStaffEntry=n,r.PositionAndShape=new a.BoundingBox(s(r),n?n.PositionAndShape:void 0,!0),r.notes=[],r.rules=n?n.parentMeasure.parentSourceMeasure.Rules:new u.EngravingRules,r}return d(i,[{key:"sort",value:function(){this.notes.sort((function(t,e){return e.sourceNote.Pitch.getHalfTone()-t.sourceNote.Pitch.getHalfTone()}))}},{key:"color",value:function(){}}]),i}(o.GraphicalObject)},function(e,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),i(5);var r=i(83),o=i(20),s=i(1);n.SkyBottomLineCalculator=function(){function e(t){h(this,e),this.mStaffLineParent=t,this.mRules=t.ParentMusicSystem.rules}return d(e,[{key:"calculateLines",value:function(){var e=this,n=Math.max(Math.ceil(this.StaffLineParent.PositionAndShape.Size.width*this.SamplingUnit),1);this.mSkyLine=[],this.mBottomLine=[];var i,a=new r.CanvasVexFlowBackend(this.StaffLineParent.ParentMusicSystem.rules),l=u(this.StaffLineParent.Measures);try{for(l.s();!(i=l.n()).done;){var c,h,f=i.value;f.PositionAndShape.calculateAbsolutePositionsRecursive(0,0);var d=f.getVFStave();a.initializeHeadless(d.getWidth());var p=a.getContext(),m=a.getCanvas(),b=m.width,v=m.height;d.setY(d.y+100);var y=d.getWidth();d.setWidth(b),f.format(),d.setWidth(y),f.draw(p);for(var g=p.getImageData(0,0,b,v),S=Math.max(Math.ceil(f.PositionAndShape.Size.width*this.mRules.SamplingUnit),1),w=new Array(S),_=new Array(S),x=0;x<b;x++){for(var k=0;k<v;k++)if(g.data[k*b*4+4*x+3]>0){w[x]=k;break}for(var E=v;E>0;E--)if(g.data[E*b*4+4*x+3]>0){_[x]=E;break}}(c=this.mSkyLine).push.apply(c,w),(h=this.mBottomLine).push.apply(h,_),a.clear()}}catch(N){l.e(N)}finally{l.f()}for(var P=this.mSkyLine.length/n,A=[],L=[],T=0;T<this.mSkyLine.length&&A.length!==n;T+=P){var M=Math.min(this.mSkyLine.length,T+P),C=this.mSkyLine.slice(T,M+1);A.push(Math.min.apply(Math,t(C))),C=this.mBottomLine.slice(T,M+1),L.push(Math.max.apply(Math,t(C)))}this.mSkyLine=A,this.mBottomLine=L,this.mSkyLine.length!==n&&s.debug("SkyLine calculation was not correct (".concat(this.mSkyLine.length," instead of ").concat(n,")")),this.mSkyLine=this.mSkyLine.map((function(n){return(n-Math.max.apply(Math,t(e.mSkyLine)))/o.unitInPixels})),this.mBottomLine=this.mBottomLine.map((function(n){return(n-Math.min.apply(Math,t(e.mBottomLine)))/o.unitInPixels+e.StaffLineParent.StaffHeight}))}},{key:"drawPixel",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#FF0000FF",i=e.getContext(),r=i.fillStyle;i.fillStyle=n,i.fillRect(t.x,t.y,2,2),i.fillStyle=r}},{key:"updateSkyLineWithWedge",value:function(t,e){var n=Math.floor(t.x*this.SamplingUnit),i=Math.ceil(e.x*this.SamplingUnit),r=(e.y-t.y)/(e.x-t.x);i-n<=1&&(i++,r=0),n<0&&(n=0),n>=this.BottomLine.length&&(n=this.BottomLine.length-1),i<0&&(i=0),i>=this.BottomLine.length&&(i=this.BottomLine.length),this.SkyLine[n]=t.y;for(var o=n+1;o<Math.min(i,this.SkyLine.length);o++)this.SkyLine[o]=this.SkyLine[o-1]+r/this.SamplingUnit}},{key:"updateBottomLineWithWedge",value:function(t,e){var n=Math.floor(t.x*this.SamplingUnit),i=Math.ceil(e.x*this.SamplingUnit),r=(e.y-t.y)/(e.x-t.x);i-n<=1&&(i++,r=0),n<0&&(n=0),n>=this.BottomLine.length&&(n=this.BottomLine.length-1),i<0&&(i=0),i>=this.BottomLine.length&&(i=this.BottomLine.length),this.BottomLine[n]=t.y;for(var o=n+1;o<i;o++)this.BottomLine[o]=this.BottomLine[o-1]+r/this.SamplingUnit}},{key:"updateSkyLineInRange",value:function(t,e,n){this.updateInRange(this.mSkyLine,t,e,n)}},{key:"updateBottomLineInRange",value:function(t,e,n){this.updateInRange(this.BottomLine,t,e,n)}},{key:"resetSkyLineInRange",value:function(t,e){this.updateInRange(this.SkyLine,t,e)}},{key:"resetBottomLineInRange",value:function(t,e){this.setInRange(this.BottomLine,t,e)}},{key:"setSkyLineWithValue",value:function(t){this.SkyLine.forEach((function(e){return t}))}},{key:"setBottomLineWithValue",value:function(t){this.BottomLine.forEach((function(e){return t}))}},{key:"getLeftIndexForPointX",value:function(t,e){var n=Math.floor(t*this.SamplingUnit);return n<0?0:n>=e?e-1:n}},{key:"getRightIndexForPointX",value:function(t,e){var n=Math.ceil(t*this.SamplingUnit);return n<0?0:n>=e?e-1:n}},{key:"updateStaffLineBorders",value:function(){this.mStaffLineParent.PositionAndShape.BorderTop=this.getSkyLineMin(),this.mStaffLineParent.PositionAndShape.BorderMarginTop=this.getSkyLineMin(),this.mStaffLineParent.PositionAndShape.BorderBottom=this.getBottomLineMax(),this.mStaffLineParent.PositionAndShape.BorderMarginBottom=this.getBottomLineMax()}},{key:"getSkyLineMin",value:function(){return Math.min.apply(Math,t(this.SkyLine.filter((function(t){return!isNaN(t)}))))}},{key:"getSkyLineMinAtPoint",value:function(t){var e=Math.round(t*this.SamplingUnit);return this.mSkyLine[e]}},{key:"getSkyLineMinInRange",value:function(t,e){return this.getMinInRange(this.SkyLine,t,e)}},{key:"getBottomLineMax",value:function(){return Math.max.apply(Math,t(this.BottomLine.filter((function(t){return!isNaN(t)}))))}},{key:"getBottomLineMaxAtPoint",value:function(t){var e=Math.round(t*this.SamplingUnit);return this.mBottomLine[e]}},{key:"getBottomLineMaxInRange",value:function(t,e){return this.getMaxInRange(this.BottomLine,t,e)}},{key:"getBottomLineMaxInBoundingBox",value:function(t){var e=Math.floor(t.AbsolutePosition.x+t.BorderLeft),n=Math.ceil(t.AbsolutePosition.x+t.BorderRight);return this.getMaxInRange(this.mBottomLine,e,n)}},{key:"updateWithBoundingBoxRecursivly",value:function(t){if(t.ChildElements&&t.ChildElements.length>0)this.updateWithBoundingBoxRecursivly(t);else{var e=t.BorderTop+t.AbsolutePosition.y,n=t.BorderBottom+t.AbsolutePosition.y;if(e<0){var i=Math.floor(t.AbsolutePosition.x+t.BorderLeft),r=Math.ceil(t.AbsolutePosition.x+t.BorderRight);this.updateInRange(this.mSkyLine,i,r,e)}else if(n>this.StaffLineParent.StaffHeight){var o=Math.floor(t.AbsolutePosition.x+t.BorderLeft),s=Math.ceil(t.AbsolutePosition.x+t.BorderRight);this.updateInRange(this.mBottomLine,o,s,n)}}}},{key:"updateInRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(e=Math.floor(e*this.SamplingUnit),(n=Math.ceil(n*this.SamplingUnit))<e)throw new Error("start index of line is greater then the end index");e<0&&(e=0),n>t.length&&(n=t.length);for(var r=e;r<n;r++)t[r]=Math.abs(i)>Math.abs(t[r])?i:t[r]}},{key:"setInRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(e=Math.floor(e*this.SamplingUnit),(n=Math.ceil(n*this.SamplingUnit))<e)throw new Error("start index of line is greater then the end index");e<0&&(e=0),n>t.length&&(n=t.length);for(var r=e;r<n;r++)t[r]=i}},{key:"getMinInRange",value:function(e,n,i){return n=Math.floor(n*this.SamplingUnit),i=Math.ceil(i*this.SamplingUnit),void 0===e?Number.MAX_VALUE:(n<0&&(n=0),n>=e.length&&(n=e.length-1),i<0&&(i=0),i>=e.length&&(i=e.length),n>=0&&i<=e.length?Math.min.apply(Math,t(e.slice(n,i+1))):void 0)}},{key:"getMaxInRange",value:function(e,n,i){return n=Math.floor(n*this.SamplingUnit),i=Math.ceil(i*this.SamplingUnit),void 0===e?Number.MIN_VALUE:(n<0&&(n=0),n>=e.length&&(n=e.length-1),i<0&&(i=0),i>=e.length&&(i=e.length),n>=0&&i<=e.length?Math.max.apply(Math,t(e.slice(n,i+1))):void 0)}},{key:"SamplingUnit",get:function(){return this.mRules.SamplingUnit}},{key:"StaffLineParent",get:function(){return this.mStaffLineParent}},{key:"SkyLine",get:function(){return this.mSkyLine}},{key:"BottomLine",get:function(){return this.mBottomLine}}]),e}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(4),a=i(6),u=i(66),l=i(5),c=i(137);e.StaffLine=function(t){n(i,t);var e=r(i);function i(t,n){var r;return h(this,i),(r=e.call(this)).measures=[],r.staffLines=new Array(5),r.octaveShifts=[],r.lyricLines=[],r.lyricsDashes=[],r.abstractExpressions=[],r.graphicalSlurs=[],r.parentMusicSystem=t,r.parentStaff=n,r.boundingBox=new o.BoundingBox(s(r),t.PositionAndShape),r.skyBottomLine=new c.SkyBottomLineCalculator(s(r)),r.staffHeight=r.parentMusicSystem.rules.StaffHeight,r.parentStaff.isTab&&(r.staffHeight=r.parentMusicSystem.rules.TabStaffHeight),r}return d(i,[{key:"addSlurToStaffline",value:function(t){this.graphicalSlurs.push(t)}},{key:"addActivitySymbolClickArea",value:function(){var t=new u.StaffLineActivitySymbol(this),e=this.PositionAndShape;t.PositionAndShape.RelativePosition=new l.PointF2D(e.RelativePosition.x+e.BorderRight+.5,e.RelativePosition.y+.5),t.PositionAndShape.Parent=this.parentMusicSystem.PositionAndShape}},{key:"isPartOfMultiStaffInstrument",value:function(){return this.parentStaff.ParentInstrument.Staves.length>1}},{key:"findClosestStaffEntry",value:function(t){for(var e=void 0,n=0,i=this.Measures.length;n<i;++n)for(var r=this.Measures[n],o=0,s=r.staffEntries.length;o<s;++o){var a=r.staffEntries[o];Math.abs(a.PositionAndShape.RelativePosition.x-t+r.PositionAndShape.RelativePosition.x)<5&&(e=a)}return e}},{key:"Measures",get:function(){return this.measures},set:function(t){this.measures=t}},{key:"StaffLines",get:function(){return this.staffLines},set:function(t){this.staffLines=t}},{key:"NextStaffLine",get:function(){var t=this.parentMusicSystem.StaffLines.indexOf(this);return t!==this.parentMusicSystem.StaffLines.length?this.parentMusicSystem.StaffLines[t+1]:void 0}},{key:"LyricLines",get:function(){return this.lyricLines},set:function(t){this.lyricLines=t}},{key:"AbstractExpressions",get:function(){return this.abstractExpressions},set:function(t){this.abstractExpressions=t}},{key:"LyricsDashes",get:function(){return this.lyricsDashes},set:function(t){this.lyricsDashes=t}},{key:"ParentMusicSystem",get:function(){return this.parentMusicSystem},set:function(t){this.parentMusicSystem=t}},{key:"ParentStaff",get:function(){return this.parentStaff},set:function(t){this.parentStaff=t}},{key:"SkyBottomLineCalculator",get:function(){return this.skyBottomLine}},{key:"SkyLine",get:function(){return this.skyBottomLine.SkyLine}},{key:"BottomLine",get:function(){return this.skyBottomLine.BottomLine}},{key:"OctaveShifts",get:function(){return this.octaveShifts},set:function(t){this.octaveShifts=t}},{key:"StaffHeight",get:function(){return this.staffHeight}},{key:"GraphicalSlurs",get:function(){return this.graphicalSlurs}}]),i}(a.GraphicalObject)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(10),s=i(84),a=i(19),u=i(50);e.SvgVexFlowBackend=function(t){n(i,t);var e=r(i);function i(t){var n;return h(this,i),(n=e.call(this)).rules=t,n}return d(i,[{key:"getVexflowBackendType",value:function(){return 3}},{key:"getOSMDBackendType",value:function(){return u.BackendType.SVG}},{key:"initialize",value:function(t){this.canvas=document.createElement("div"),this.inner=this.canvas,this.inner.style.position="relative",this.canvas.style.zIndex="0",t.appendChild(this.inner),this.renderer=new o.Flow.Renderer(this.canvas,this.getVexflowBackendType()),this.ctx=this.renderer.getContext()}},{key:"getContext",value:function(){return this.ctx}},{key:"getSvgElement",value:function(){return this.ctx.svg}},{key:"clear",value:function(){if(this.ctx){for(var t=this.ctx.svg;t.lastChild;)t.removeChild(t.lastChild);void 0!==this.rules.PageBackgroundColor&&(this.ctx.save(),this.ctx.setFillStyle(this.rules.PageBackgroundColor),this.ctx.fillRect(0,0,this.canvas.offsetWidth,this.canvas.offsetHeight),this.ctx.restore())}}},{key:"scale",value:function(t){this.ctx.scale(t,t)}},{key:"translate",value:function(t,e){}},{key:"renderText",value:function(t,e,n,i,r,o,s){this.ctx.save(),s&&(this.ctx.attributes.fill=s,this.ctx.attributes.stroke=s),this.ctx.setFont(this.rules.DefaultFontFamily,t,a.VexFlowConverter.fontStyle(e)),this.ctx.attributes["font-size"]=t+"px",this.ctx.state["font-size"]=t+"px",this.ctx.fillText(i,o.x,o.y+r),this.ctx.restore()}},{key:"renderRectangle",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.ctx.save(),this.ctx.attributes.fill=a.VexFlowConverter.style(e),this.ctx.attributes["fill-opacity"]=n,this.ctx.fillRect(t.x,t.y,t.width,t.height),this.ctx.restore(),this.ctx.attributes["fill-opacity"]=1}},{key:"renderLine",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#FF0000FF",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y),this.ctx.lineTo(e.x,e.y),this.ctx.attributes.stroke=n,this.ctx.lineWidth=i,this.ctx.stroke(),this.ctx.restore()}},{key:"renderCurve",value:function(t){this.ctx.beginPath(),this.ctx.moveTo(t[0].x,t[0].y),this.ctx.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y),this.ctx.lineTo(t[7].x,t[7].y),this.ctx.bezierCurveTo(t[6].x,t[6].y,t[5].x,t[5].y,t[4].x,t[4].y),this.ctx.lineTo(t[0].x,t[0].y),this.ctx.closePath(),this.ctx.fill()}}]),i}(s.VexFlowBackend)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(10),u=i(131),l=i(19),c=i(2),f=i(36);e.VexFlowGraphicalNote=function(t){n(i,t);var e=r(i);function i(t,n,r){var a,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:f.OctaveEnum.NONE,c=arguments.length>4?arguments[4]:void 0;if(h(this,i),(a=e.call(this,t,n,c)).clef=r,a.octaveShift=u,t.Pitch){var d=f.OctaveShift.getPitchFromOctaveShift(t.Pitch,u);a.vfpitch=l.VexFlowConverter.pitch(s(a),d),a.vfpitch[1]=void 0}return o(a)}return d(i,[{key:"setPitch",value:function(t){if(this.vfnote){var e=c.Pitch.accidentalVexflow(t.Accidental);e&&(alert(e),this.vfnote[0].addAccidental(this.vfnote[1],new a.Flow.Accidental(e)))}else{var n=f.OctaveShift.getPitchFromOctaveShift(t,this.octaveShift);this.vfpitch=l.VexFlowConverter.pitch(this,n)}}},{key:"setIndex",value:function(t,e){this.vfnote=[t,e]}},{key:"Clef",value:function(){return this.clef}},{key:"getSVGId",value:function(){return this.vfnote[0].getAttribute("id")}},{key:"getSVGGElement",value:function(){return this.vfnote[0].getAttribute("el")}}]),i}(u.GraphicalNote)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(79),s=i(60),a=i(25),u=i(16),l=i(8),c=i(46);e.VexFlowInstantaneousDynamicExpression=function(t){n(i,t);var e=r(i);function i(t,n,r){var o;return h(this,i),(o=e.call(this,t,n,r)).label=new a.GraphicalLabel(new u.Label(o.Expression),o.rules.ContinuousDynamicTextHeight,l.TextAlignmentEnum.CenterCenter,o.rules,o.PositionAndShape),o.label.Label.fontStyle=c.FontStyles.BoldItalic,o.label.setLabelPositionAndShapeBorders(),o.PositionAndShape.calculateBoundingBox(),o}return d(i,[{key:"InstantaneousDynamic",get:function(){return this.mInstantaneousDynamicExpression}},{key:"Expression",get:function(){return s.DynamicEnum[this.mInstantaneousDynamicExpression.DynEnum]}}]),i}(o.GraphicalInstantaneousDynamicExpression)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i(10);var o=i(85);e.VexFlowInstrumentBrace=function(t){n(i,t);var e=r(i);function i(t,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return h(this,i),(r=e.call(this,t,n,o)).vexflowConnector.setType(3),r}return i}(o.VexFlowInstrumentBracket)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(10),s=i(132),a=i(36),u=i(1);e.VexFlowOctaveShift=function(t){n(i,t);var e=r(i);function i(t,n){var r;switch(h(this,i),r=e.call(this,t,n),t.Type){case a.OctaveEnum.VA8:r.position=1,r.supscript="va",r.text="8";break;case a.OctaveEnum.MA15:r.position=1,r.supscript="ma",r.text="15";break;case a.OctaveEnum.VB8:r.position=-1,r.supscript="vb",r.text="8";break;case a.OctaveEnum.MB15:r.position=-1,r.supscript="mb",r.text="15";break;default:u.error("Unknown or NONE octaveshift. This should not be called!")}return r}return d(i,[{key:"setStartNote",value:function(t){this.startNote=t.graphicalVoiceEntries[0].vfStaveNote}},{key:"setEndNote",value:function(t){this.endNote=t.graphicalVoiceEntries[0].vfStaveNote}},{key:"getStartNote",value:function(){return this.startNote}},{key:"getEndNote",value:function(){return this.endNote}},{key:"getTextBracket",value:function(){return new o.Flow.TextBracket({position:this.position,start:this.startNote,stop:this.endNote,superscript:this.supscript,text:this.text})}}]),i}(s.GraphicalOctaveShift)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(134),s=i(20);e.VexFlowStaffEntry=function(t){n(i,t);var e=r(i);function i(t,n,r){return h(this,i),e.call(this,t,n,r)}return d(i,[{key:"calculateXPosition",value:function(){var t,e=this.parentMeasure.getVFStave(),n=0,i=u(this.graphicalVoiceEntries);try{for(i.s();!(t=i.n()).done;){var r=t.value;if(r.vfStaveNote){if(r.vfStaveNote.setStave(e),!r.vfStaveNote.preFormatted)continue;r.applyBordersFromVexflow(),this.PositionAndShape.RelativePosition.x=this.parentMeasure.ParentStaff.isTab?(r.vfStaveNote.getAbsoluteX()+r.vfStaveNote.glyph.getWidth())/s.unitInPixels:r.vfStaveNote.getBoundingBox().getX()/s.unitInPixels;var o=r.notes[0].sourceNote;o.isRest()&&o.Length.RealValue===this.parentMeasure.parentSourceMeasure.ActiveTimeSignature.RealValue&&(this.PositionAndShape.RelativePosition.x+=this.parentMeasure.parentSourceMeasure.Rules.WholeRestXShiftVexflow-.1,r.PositionAndShape.BorderLeft=-.7,r.PositionAndShape.BorderRight=.7),r.PositionAndShape.BorderLeft<n&&(n=r.PositionAndShape.BorderLeft)}}}catch(a){i.e(a)}finally{i.f()}this.PositionAndShape.RelativePosition.x-=n,this.PositionAndShape.calculateBoundingBox()}}]),i}(o.GraphicalStaffEntry)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(138),a=i(125);e.VexFlowStaffLine=function(t){n(i,t);var e=r(i);function i(t,n){var r;return h(this,i),(r=e.call(this,t,n)).slursInVFStaffLine=[],r.alignmentManager=new a.AlignmentManager(s(r)),r}return d(i,[{key:"addVFSlurToVFStaffline",value:function(t){this.slursInVFStaffLine.push(t)}},{key:"SlursInVFStaffLine",get:function(){return this.slursInVFStaffLine}},{key:"AlignmentManager",get:function(){return this.alignmentManager}}]),i}(o.StaffLine)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StaffEntryLink=function(){function t(e){h(this,t),this.linkStaffEntries=[],this.voiceEntry=e}return d(t,[{key:"GetVoiceEntry",get:function(){return this.voiceEntry}},{key:"LinkStaffEntries",get:function(){return this.linkStaffEntries},set:function(t){this.linkStaffEntries=t}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tuplet=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];h(this,t),this.notes=[],this.fractions=[],this.tupletLabelNumber=e,this.bracket=n}return d(t,[{key:"getNoteIndex",value:function(t){for(var e=this.notes.length-1;e>=0;e--)for(var n=0;n<this.notes[e].length;n++)if(t===this.notes[e][n])return e;return 0}},{key:"TupletLabelNumber",get:function(){return this.tupletLabelNumber},set:function(t){this.tupletLabelNumber=t}},{key:"Notes",get:function(){return this.notes},set:function(t){this.notes=t}},{key:"Fractions",get:function(){return this.fractions},set:function(t){this.fractions=t}},{key:"Bracket",get:function(){return this.bracket},set:function(t){this.bracket=t}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(149),r=n(81),o=n(0),s=n(152),a=n(74),l=n(32),c=n(13),f=n(1),p=n(18),m=n(18),b=n(30),v=n(75),y=n(161),g=n(9),S=n(16),w=n(162),_=n(47),x=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _.EngravingRules;h(this,t),this.completeNumberOfStaves=0,this.afterSheetReadingModules=void 0===e?[]:e,this.repetitionInstructionReader=w.MusicSymbolModuleFactory.createRepetitionInstructionReader(),this.repetitionCalculator=w.MusicSymbolModuleFactory.createRepetitionCalculator(),this.rules=n}return d(t,[{key:"createMusicSheet",value:function(t,e){try{return this._createMusicSheet(t,e)}catch(t){return void f.error("MusicSheetReader.CreateMusicSheet",t)}}},{key:"_removeFromArray",value:function(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},{key:"trimString",value:function(t){return t.replace(/^\s+|\s+$/g,"")}},{key:"_lastElement",value:function(t){return t[t.length-1]}},{key:"_createMusicSheet",value:function(e,n){var s=[],a=0;if(this.musicSheet=new i.MusicSheet,this.musicSheet.Path=n,this.musicSheet.Rules=this.rules,void 0===e)throw new c.MusicSheetReadingException("Undefined root element");this.pushSheetLabels(e,n);var h=e.element("part-list");if(void 0===h)throw new c.MusicSheetReadingException("Undefined partListNode");var f=e.elements("part"),d=h.elements();this.initializeReading(d,f,s);var p=!0;this.currentFraction=new o.Fraction(0,1);var m=!1,b=e.element("identification");for(void 0!==b&&(b=b.element("encoding")),void 0!==b&&(b=b.element("software")),void 0!==b&&"Guitar Pro 5"===b.value&&(m=!0);p;){void 0!==this.currentMeasure&&this.currentMeasure.endsPiece&&(a=0),this.currentMeasure=new r.SourceMeasure(this.completeNumberOfStaves,this.musicSheet.Rules);var v,y=u(s);try{for(y.s();!(v=y.n()).done;){var g=v.value;try{p=p&&g.readNextXmlMeasure(this.currentMeasure,this.currentFraction,m)}catch(e){var S=l.ITextTranslation.translateText("ReaderErrorMessages/InstrumentError","Error while reading instruments.");throw new c.MusicSheetReadingException(S,e)}}}catch(x){y.e(x)}finally{y.f()}p&&(this.musicSheet.addMeasure(this.currentMeasure),this.checkIfRhythmInstructionsAreSetAndEqual(s),this.checkSourceMeasureForNullEntries(),a=this.setSourceMeasureDuration(s,a),t.doCalculationsAfterDurationHasBeenSet(s),this.currentMeasure.AbsoluteTimestamp=this.currentFraction.clone(),this.musicSheet.SheetErrors.finalizeMeasure(this.currentMeasure.MeasureNumber),this.currentFraction.Add(this.currentMeasure.Duration),this.previousMeasure=this.currentMeasure)}void 0!==this.repetitionInstructionReader&&(this.repetitionInstructionReader.removeRedundantInstructions(),void 0!==this.repetitionCalculator&&this.repetitionCalculator.calculateRepetitions(this.musicSheet,this.repetitionInstructionReader.repetitionInstructions)),this.musicSheet.checkForInstrumentWithNoVoice(),this.musicSheet.fillStaffList();for(var w=0,_=this.afterSheetReadingModules.length;w<_;++w)this.afterSheetReadingModules[w].calculate(this.musicSheet);return this.musicSheet.DefaultStartTempoInBpm=this.musicSheet.SourceMeasures[0].TempoInBPM,this.musicSheet.userStartTempoInBPM=this.musicSheet.userStartTempoInBPM||this.musicSheet.DefaultStartTempoInBpm,this.musicSheet}},{key:"initializeReading",value:function(t,e,n){var i=this.createInstrumentGroups(t);this.completeNumberOfStaves=this.getCompleteNumberOfStavesFromXml(e),0!==e.length&&(this.repetitionInstructionReader.MusicSheet=this.musicSheet,this.currentFraction=new o.Fraction(0,1),this.currentMeasure=void 0,this.previousMeasure=void 0);var r,a=0,c=u(e);try{for(c.s();!(r=c.n()).done;){var h=r.value,f=h.attribute("id");if(f){var d=i[f.value],p=h.elements("measure"),m=1;try{m=this.getInstrumentNumberOfStavesFromXml(h)}catch(t){var b=l.ITextTranslation.translateText("ReaderErrorMessages/InstrumentStavesNumberError","Invalid number of staves at instrument: ");this.musicSheet.SheetErrors.push(b+d.Name);continue}d.createStaves(m),n.push(new s.InstrumentReader(this.repetitionInstructionReader,p,d)),void 0!==this.repetitionInstructionReader&&(this.repetitionInstructionReader.xmlMeasureList[a]=p),a++}}}catch(v){c.e(v)}finally{c.f()}}},{key:"checkIfRhythmInstructionsAreSetAndEqual",value:function(t){for(var e=[],n=0;n<this.completeNumberOfStaves;n++)if(void 0!==this.currentMeasure.FirstInstructionsStaffEntries[n]){var i=this.currentMeasure.FirstInstructionsStaffEntries[n].Instructions[this.currentMeasure.FirstInstructionsStaffEntries[n].Instructions.length-1];i instanceof p.RhythmInstruction&&e.push(i)}for(var r=0,s=-1,a=0,u=e.length;a<u;++a){var l=e[a];if(l.Rhythm.RealValue>r){if(this.areRhythmInstructionsMixed(e)&&l.SymbolEnum!==m.RhythmSymbolEnum.NONE)continue;r=l.Rhythm.RealValue,s=e.indexOf(l)}}if(e.length>0&&e.length<this.completeNumberOfStaves){for(var c=e[s].clone(),h=0;h<this.completeNumberOfStaves;h++)void 0===this.currentMeasure.FirstInstructionsStaffEntries[h]||this._lastElement(this.currentMeasure.FirstInstructionsStaffEntries[h].Instructions)instanceof p.RhythmInstruction||(this.currentMeasure.FirstInstructionsStaffEntries[h].removeAllInstructionsOfTypeRhythmInstruction(),this.currentMeasure.FirstInstructionsStaffEntries[h].Instructions.push(c.clone())),void 0===this.currentMeasure.FirstInstructionsStaffEntries[h]&&(this.currentMeasure.FirstInstructionsStaffEntries[h]=new b.SourceStaffEntry(void 0,void 0),this.currentMeasure.FirstInstructionsStaffEntries[h].Instructions.push(c.clone()));for(var f=0,d=t.length;f<d;++f)t[f].ActiveRhythm=c}if(0===e.length&&this.currentMeasure===this.musicSheet.SourceMeasures[0]){for(var v=new p.RhythmInstruction(new o.Fraction(4,4,0,!1),m.RhythmSymbolEnum.NONE),y=0;y<this.completeNumberOfStaves;y++)void 0===this.currentMeasure.FirstInstructionsStaffEntries[y]?this.currentMeasure.FirstInstructionsStaffEntries[y]=new b.SourceStaffEntry(void 0,void 0):this.currentMeasure.FirstInstructionsStaffEntries[y].removeAllInstructionsOfTypeRhythmInstruction(),this.currentMeasure.FirstInstructionsStaffEntries[y].Instructions.push(v);for(var g=0,S=t.length;g<S;++g)t[g].ActiveRhythm=v}for(var w=0,_=e.length;w<_;++w){var x=e[w];if(x.Rhythm.RealValue<r&&this._lastElement(this.currentMeasure.FirstInstructionsStaffEntries[e.indexOf(x)].Instructions)instanceof p.RhythmInstruction){var k=this.currentMeasure.FirstInstructionsStaffEntries[e.indexOf(x)].Instructions;k[k.length-1]=e[s].clone()}Math.abs(x.Rhythm.RealValue-r)<1e-6&&x.SymbolEnum!==m.RhythmSymbolEnum.NONE&&this.areRhythmInstructionsMixed(e)&&(x.SymbolEnum=m.RhythmSymbolEnum.NONE)}}},{key:"areRhythmInstructionsMixed",value:function(t){for(var e=1;e<t.length;e++)if(Math.abs(t[e].Rhythm.RealValue-t[0].Rhythm.RealValue)<1e-6&&t[e].SymbolEnum!==t[0].SymbolEnum)return!0;return!1}},{key:"setSourceMeasureDuration",value:function(t,e){var n,i=new o.Fraction(0,1),r=[],s=u(t);try{for(s.s();!(n=s.n()).done;){var a=n.value;r.push(a.MaxTieNoteFraction);var c=a.ActiveRhythm.Rhythm;i.lt(c)&&(i=new o.Fraction(c.Numerator,c.Denominator,0,!1))}}catch(w){s.e(w)}finally{s.f()}var h,f=this.currentMeasure.calculateInstrumentsDuration(this.musicSheet,r),d=new o.Fraction(0,1),p=u(f);try{for(p.s();!(h=p.n()).done;){var m=h.value;d.lt(m)&&(d=m)}}catch(w){p.e(w)}finally{p.f()}o.Fraction.Equal(d,i)?this.checkFractionsForEquivalence(d,i):d.lt(i)&&(d=this.currentMeasure.reverseCheck(this.musicSheet,d),this.checkFractionsForEquivalence(d,i)),this.currentMeasure.ImplicitMeasure=this.checkIfMeasureIsImplicit(d,i),this.currentMeasure.ImplicitMeasure||e++,this.currentMeasure.Duration=d,this.currentMeasure.ActiveTimeSignature=i,this.currentMeasure.MeasureNumber=e;for(var b=0;b<f.length;b++){var v=f[b];if(this.currentMeasure.ImplicitMeasure&&v!==d||!o.Fraction.Equal(v,i)&&!this.allInstrumentsHaveSameDuration(f,d))for(var y=this.musicSheet.getGlobalStaffIndexOfFirstStaff(this.musicSheet.Instruments[b]),g=0;g<this.musicSheet.Instruments[b].Staves.length;g++)if(!this.graphicalMeasureIsEmpty(y+g)){this.currentMeasure.setErrorInGraphicalMeasure(y+g,!0);var S=l.ITextTranslation.translateText("ReaderErrorMessages/MissingNotesError","Given Notes don't correspond to measure duration.");this.musicSheet.SheetErrors.pushMeasureError(S)}}return e}},{key:"checkFractionsForEquivalence",value:function(t,e){e.Denominator>t.Denominator&&t.expand(e.Denominator/t.Denominator)}},{key:"checkIfMeasureIsImplicit",value:function(t,e){return!(void 0!==this.previousMeasure||!t.lt(e))||void 0!==this.previousMeasure&&o.Fraction.plus(this.previousMeasure.Duration,t).Equals(e)}},{key:"allInstrumentsHaveSameDuration",value:function(t,e){for(var n=0,i=0,r=t.length;i<r;++i)t[i].Equals(e)&&n++;return n===t.length&&e!==new o.Fraction(0,1)}},{key:"graphicalMeasureIsEmpty",value:function(t){for(var e=0,n=0;n<this.currentMeasure.VerticalSourceStaffEntryContainers.length;n++)void 0===this.currentMeasure.VerticalSourceStaffEntryContainers[n].StaffEntries[t]&&e++;return e===this.currentMeasure.VerticalSourceStaffEntryContainers.length}},{key:"checkSourceMeasureForNullEntries",value:function(){for(var t=this.currentMeasure.VerticalSourceStaffEntryContainers.length-1;t>=0;t--)for(var e=this.currentMeasure.VerticalSourceStaffEntryContainers[t].StaffEntries.length-1;e>=0;e--){var n=this.currentMeasure.VerticalSourceStaffEntryContainers[t].StaffEntries[e];if(void 0!==n)for(var i=n.VoiceEntries.length-1;i>=0;i--){var r=n.VoiceEntries[i];0===r.Notes.length&&(this._removeFromArray(r.ParentVoice.VoiceEntries,r),this._removeFromArray(n.VoiceEntries,r))}void 0!==n&&0===n.VoiceEntries.length&&(this.currentMeasure.VerticalSourceStaffEntryContainers[t].StaffEntries[e]=void 0)}for(var o=this.currentMeasure.VerticalSourceStaffEntryContainers.length-1;o>=0;o--){for(var s=0,a=0,u=this.currentMeasure.VerticalSourceStaffEntryContainers[o].StaffEntries.length;a<u;++a)void 0===this.currentMeasure.VerticalSourceStaffEntryContainers[o].StaffEntries[a]&&s++;s===this.currentMeasure.VerticalSourceStaffEntryContainers[o].StaffEntries.length&&this._removeFromArray(this.currentMeasure.VerticalSourceStaffEntryContainers,this.currentMeasure.VerticalSourceStaffEntryContainers[o])}}},{key:"pushSheetLabels",value:function(t,e){this.readComposer(t),this.readTitle(t);try{void 0!==this.musicSheet.Title&&void 0!==this.musicSheet.Composer||this.readTitleAndComposerFromCredits(t)}catch(t){f.info("MusicSheetReader.pushSheetLabels","readTitleAndComposerFromCredits",t)}try{if(void 0===this.musicSheet.Title){var n=Math.max(0,e.lastIndexOf("/"),e.lastIndexOf("\\")),i=e.substr(n).split(".",1);this.musicSheet.Title=new S.Label(i[0])}}catch(t){f.info("MusicSheetReader.pushSheetLabels","read title from file name",t)}}},{key:"presentAttrsWithValue",value:function(t,e){var n,i=u(t.attributes());try{for(i.s();!(n=i.n()).done;){if(n.value.value===e)return!0}}catch(r){i.e(r)}finally{i.f()}return!1}},{key:"readComposer",value:function(t){var e=t.element("identification");if(void 0!==e)for(var n=e.elements("creator"),i=0,r=n.length;i<r;++i){var o=n[i];if(o.hasAttributes){if(this.presentAttrsWithValue(o,"composer")){this.musicSheet.Composer=new S.Label(this.trimString(o.value));continue}(this.presentAttrsWithValue(o,"lyricist")||this.presentAttrsWithValue(o,"poet"))&&(this.musicSheet.Lyricist=new S.Label(this.trimString(o.value)))}}}},{key:"readTitleAndComposerFromCredits",value:function(t){var e=this.computeSystemYCoordinates(t);if(0!==e){for(var n=1,i=void 0,r=0,o=void 0,s=void 0,a=t.elements("credit"),u=0,l=a.length;u<l;++u){var c=a[u];if(!c.attribute("page"))return;if("1"===c.attribute("page").value){var h=void 0;if(void 0!==c){if(!(h=c.element("credit-words")).attribute("justify"))break;var f=h.attribute("justify").value,d=h.attribute("default-y").value,p=parseFloat(d);if(p>e){if(void 0===this.musicSheet.Title){var m=h.attribute("font-size").value,b=parseFloat(m);n<b&&(n=b,i=h.value)}if(void 0===this.musicSheet.Subtitle&&"right"!==f&&"left"!==f&&r<p&&(r=p,s?(o=s,s=h.value):s=h.value),void 0===this.musicSheet.Composer||void 0===this.musicSheet.Lyricist)switch(f){case"right":this.musicSheet.Composer=new S.Label(this.trimString(h.value));break;case"left":this.musicSheet.Lyricist=new S.Label(this.trimString(h.value))}}}}}void 0===this.musicSheet.Title&&i&&(this.musicSheet.Title=new S.Label(this.trimString(i))),void 0===this.musicSheet.Subtitle&&o&&(this.musicSheet.Subtitle=new S.Label(this.trimString(o)))}}},{key:"computeSystemYCoordinates",value:function(t){if(void 0===t.element("defaults"))return 0;var e=0,n=0;try{var i=t.element("defaults").element("page-layout").element("page-height").value;e=parseFloat(i)}catch(t){return f.info("MusicSheetReader.computeSystemYCoordinates(): couldn't find page height, not reading title/composer."),0}for(var r=!1,o=t.elements("part"),s=0,a=o.length;s<a;++s){for(var u=o[s].elements("measure"),l=0,c=u.length;l<c;++l){var h=u[l];if(void 0!==h.element("print")){for(var d=h.element("print").elements("system-layout"),p=0,m=d.length;p<m;++p){var b=d[p];if(void 0!==b.element("top-system-distance")){var v=b.element("top-system-distance").value;n=parseFloat(v),r=!0;break}}break}}if(r)break}if(void 0!==t.element("defaults").element("system-layout")&&void 0!==t.element("defaults").element("system-layout").element("top-system-distance")){var y=t.element("defaults").element("system-layout").element("top-system-distance").value;n=parseFloat(y)}return 0===n?0:e-n}},{key:"readTitle",value:function(t){var e=t.element("work"),n=void 0;void 0!==e&&(void 0!==(n=e.element("work-title"))&&n.value&&(this.musicSheet.Title=new S.Label(this.trimString(n.value))));var i=t.element("movement-title"),r="";if(void 0!==i&&(void 0===this.musicSheet.Title?this.musicSheet.Title=new S.Label(this.trimString(i.value)):r=this.trimString(i.value)),void 0!==e){var o=e.element("work-number");if(void 0!==o){var s=o.value;s&&(r=r?s:r+", "+s)}}r&&(this.musicSheet.Subtitle=new S.Label(r))}},{key:"createInstrumentGroups",value:function(t){var e,n=0,i={};try{for(var r=t,o=0,s=r.length;o<s;++o){var u=r[o];if("score-part"===u.name){var h=u.attribute("id").value,d=new a.Instrument(n,h,this.musicSheet,e);n++;for(var p=u.elements(),m=0,b=p.length;m<b;++m){var S=p[m];try{if("part-name"===S.name)d.Name=S.value;else if("part-abbreviation"===S.name)d.PartAbbreviation=S.value;else if("score-instrument"===S.name){var w=new y.SubInstrument(d);w.idString=S.firstAttribute.value,d.SubInstruments.push(w);var _=S.element("instrument-name");void 0!==_&&(w.name=_.value,w.setMidiInstrument(_.value))}else if("midi-instrument"===S.name){for(var x=d.getSubInstrument(S.firstAttribute.value),k=0,E=d.SubInstruments.length;k<E;++k){var P=d.SubInstruments[k];if(P.idString===S.value){x=P;break}}for(var A=S.elements(),L=0,T=A.length;L<T;++L){var M=A[L];try{if("midi-channel"===M.name)10===parseInt(M.value,10)&&(d.MidiInstrumentId=g.MidiInstrument.Percussion);else if("midi-program"===M.name)d.SubInstruments.length>0&&d.MidiInstrumentId!==g.MidiInstrument.Percussion&&(x.midiInstrumentID=Math.max(0,parseInt(M.value,10)-1));else if("midi-unpitched"===M.name)x.fixedKey=Math.max(0,parseInt(M.value,10));else if("volume"===M.name)try{var C=parseFloat(M.value);x.volume=C/127}catch(t){f.debug("ExpressionReader.readExpressionParameters","read volume",t)}else if("pan"===M.name)try{var N=parseFloat(M.value);x.pan=N/64}catch(t){f.debug("ExpressionReader.readExpressionParameters","read pan",t)}}catch(t){f.info("MusicSheetReader.createInstrumentGroups midi settings: ",t)}}}}catch(t){f.info("MusicSheetReader.createInstrumentGroups: ",t)}}if(0===d.SubInstruments.length){var I=new y.SubInstrument(d);d.SubInstruments.push(I)}i[h]=d,void 0!==e?(e.InstrumentalGroups.push(d),this.musicSheet.Instruments.push(d)):(this.musicSheet.InstrumentalGroups.push(d),this.musicSheet.Instruments.push(d))}else if("part-group"===u.name&&"start"===u.attribute("type").value){var R=new v.InstrumentalGroup("group",this.musicSheet,e);void 0!==e?e.InstrumentalGroups.push(R):this.musicSheet.InstrumentalGroups.push(R),e=R}else if("part-group"===u.name&&"stop"===u.attribute("type").value&&void 0!==e){if(1===e.InstrumentalGroups.length){var O=e.InstrumentalGroups[0];void 0!==e.Parent?(e.Parent.InstrumentalGroups.push(O),this._removeFromArray(e.Parent.InstrumentalGroups,e)):(this.musicSheet.InstrumentalGroups.push(O),this._removeFromArray(this.musicSheet.InstrumentalGroups,e))}e=e.Parent}}}catch(t){var F=l.ITextTranslation.translateText("ReaderErrorMessages/InstrumentError","Error while reading Instruments");throw new c.MusicSheetReadingException(F,t)}for(var B=0,D=this.musicSheet.Instruments.length;B<D;++B){var j=this.musicSheet.Instruments[B];j.Name||(j.Name="Instr. "+j.IdString)}return i}},{key:"getCompleteNumberOfStavesFromXml",value:function(t){var e,n=0,i=u(t);try{for(i.s();!(e=i.n()).done;){var r=e.value.elements("measure");if(r.length>0){var o=r[0];if(void 0!==o){var s=o.element("attributes");void 0!==s&&(s=s.element("staves")),void 0===s?n++:n+=parseInt(s.value,10)}}}}catch(h){i.e(h)}finally{i.f()}if(isNaN(n)||n<=0){var a=l.ITextTranslation.translateText("ReaderErrorMessages/StaffError","Invalid number of staves.");throw new c.MusicSheetReadingException(a)}return n}},{key:"getInstrumentNumberOfStavesFromXml",value:function(t){var e=0,n=t.element("measure");if(void 0!==n){var i=n.element("attributes"),r=void 0;void 0!==i&&(r=i.element("staves")),e=void 0===i||void 0===r?1:parseInt(r.value,10)}if(isNaN(e)||e<=0){var o=l.ITextTranslation.translateText("ReaderErrorMessages/StaffError","Invalid number of Staves.");throw new c.MusicSheetReadingException(o)}return e}},{key:"CompleteNumberOfStaves",get:function(){return this.completeNumberOfStaves}}],[{key:"doCalculationsAfterDurationHasBeenSet",value:function(t){var e,n=u(t);try{for(n.s();!(e=n.n()).done;){e.value.doCalculationsAfterDurationHasBeenSet()}}catch(i){n.e(i)}finally{n.f()}}}]),t}();e.MusicSheetReader=x},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(210),o=n(150),s=n(55),a=n(213),l=n(42),c=n(24),f=n(1),p=function t(){h(this,t)};e.PlaybackSettings=p;var m=function(){function e(){h(this,e),this.idString="random idString, not initialized",this.sourceMeasures=[],this.repetitions=[],this.dynListStaves=[],this.timestampSortedDynamicExpressionsList=[],this.timestampSortedTempoExpressionsList=[],this.instrumentalGroups=[],this.instruments=[],this.musicPartManager=void 0,this.musicSheetErrors=new a.MusicSheetErrors,this.staves=[],this.transpose=0,this.defaultStartTempoInBpm=0,this.drawErroneousMeasures=!1,this.hasBeenOpenedForTheFirstTime=!1,this.currentEnrolledPosition=new i.Fraction(0,1),this.playbackSettings=new p,this.playbackSettings.rhythm=new i.Fraction(4,4,0,!1),this.userStartTempoInBPM=100,this.pageWidth=120,this.MusicPartManager=new r.MusicPartManager(this),this.hasBPMInfo=!1}return d(e,[{key:"InitializeStartTempoInBPM",value:function(t){this.userStartTempoInBPM=t}},{key:"addMeasure",value:function(t){this.sourceMeasures.push(t),t.measureListIndex=this.sourceMeasures.length-1}},{key:"checkForInstrumentWithNoVoice",value:function(){for(var t=0,e=this.instruments.length;t<e;++t){var n=this.instruments[t];if(0===n.Voices.length){var i=new s.Voice(n,1);n.Voices.push(i)}}}},{key:"getStaffFromIndex",value:function(t){return this.staves[t]}},{key:"fillStaffList",value:function(){for(var t=0,e=0,n=this.instruments.length;e<n;++e)for(var i=this.instruments[e],r=0,o=i.Staves.length;r<o;++r){var s=i.Staves[r];s.idInMusicSheet=t,this.staves.push(s),t++}}},{key:"getCompleteNumberOfStaves",value:function(){for(var t=0,e=0,n=this.instruments.length;e<n;++e)t+=this.instruments[e].Staves.length;return t}},{key:"getListOfMeasuresFromIndeces",value:function(t,e){for(var n=[],i=t;i<=e;i++)n.push(this.sourceMeasures[i]);return n}},{key:"getNextSourceMeasure",value:function(t){var e=this.sourceMeasures.indexOf(t);return e===this.sourceMeasures.length-1?t:this.sourceMeasures[e+1]}},{key:"getFirstSourceMeasure",value:function(){return this.sourceMeasures[0]}},{key:"getLastSourceMeasure",value:function(){return this.sourceMeasures[this.sourceMeasures.length-1]}},{key:"resetAllNoteStates",value:function(){for(var t=this.MusicPartManager.getIterator();!t.EndReached&&void 0!==t.CurrentVoiceEntries;){for(var e=0,n=t.CurrentVoiceEntries.length;e<n;++e)for(var i=t.CurrentVoiceEntries[e],r=0,o=i.Notes.length;r<o;++r)i.Notes[r].state=c.NoteState.Normal;t.moveToNext()}}},{key:"getMusicSheetInstrumentIndex",value:function(t){return this.Instruments.indexOf(t)}},{key:"getGlobalStaffIndexOfFirstStaff",value:function(t){for(var e=this.getMusicSheetInstrumentIndex(t),n=0,i=0;i<e;i++)n+=this.Instruments[i].Staves.length;return n}},{key:"setRepetitionNewUserNumberOfRepetitions",value:function(t,e){for(var n=0,i=0;i<this.repetitions.length;i++)if(this.repetitions[i]instanceof o.Repetition){if(t===n){this.repetitions[i].UserNumberOfRepetitions=e;break}n++}}},{key:"getRepetitionByIndex",value:function(t){for(var e=0,n=0;n<this.repetitions.length;n++)if(this.repetitions[n]instanceof o.Repetition){if(t===e)return this.repetitions[n];e++}}},{key:"CompareTo",value:function(t){return this.Title.text.localeCompare(t.Title.text)}},{key:"getEnrolledSelectionStartTimeStampWorkaround",value:function(){var t=this.MusicPartManager.getIterator(this.SelectionStart);return i.Fraction.createFromFraction(t.CurrentEnrolledTimestamp)}},{key:"getSourceMeasureFromTimeStamp",value:function(t){for(var e=0,n=this.sourceMeasures.length;e<n;++e)for(var i=this.sourceMeasures[e],r=0,o=i.VerticalSourceStaffEntryContainers.length;r<o;++r)if(t.Equals(i.VerticalSourceStaffEntryContainers[r].getAbsoluteTimestamp()))return i;return this.findSourceMeasureFromTimeStamp(t)}},{key:"findSourceMeasureFromTimeStamp",value:function(t){var e,n=u(this.sourceMeasures);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.AbsoluteTimestamp.lte(t)&&t.lt(i.Fraction.plus(r.AbsoluteTimestamp,r.Duration)))return r}}catch(o){n.e(o)}finally{n.f()}}},{key:"getVisibleInstruments",value:function(){for(var t=[],e=0,n=this.Instruments.length;e<n;++e){var i=this.Instruments[e];i.Voices.length>0&&i.Voices[0].Visible&&t.push(i)}return t}},{key:"SourceMeasures",get:function(){return this.sourceMeasures},set:function(t){this.sourceMeasures=t}},{key:"Repetitions",get:function(){return this.repetitions},set:function(t){this.repetitions=t}},{key:"DynListStaves",get:function(){return this.dynListStaves}},{key:"TimestampSortedTempoExpressionsList",get:function(){return this.timestampSortedTempoExpressionsList}},{key:"TimestampSortedDynamicExpressionsList",get:function(){return this.timestampSortedDynamicExpressionsList}},{key:"InstrumentalGroups",get:function(){return this.instrumentalGroups}},{key:"Parts",get:function(){return this.instruments}},{key:"Instruments",get:function(){return this.instruments}},{key:"SheetPlaybackSetting",get:function(){return this.playbackSettings},set:function(t){this.playbackSettings=t}},{key:"DrawErroneousMeasures",get:function(){return this.drawErroneousMeasures},set:function(t){this.drawErroneousMeasures=t}},{key:"HasBeenOpenedForTheFirstTime",get:function(){return this.hasBeenOpenedForTheFirstTime},set:function(t){this.hasBeenOpenedForTheFirstTime=t}},{key:"DefaultStartTempoInBpm",get:function(){return this.defaultStartTempoInBpm},set:function(t){this.defaultStartTempoInBpm=t,this.InitializeStartTempoInBPM(t)}},{key:"Path",get:function(){return this.path},set:function(t){this.path=t}},{key:"Staves",get:function(){return this.staves}},{key:"TitleString",get:function(){return void 0!==this.title?this.title.text:""}},{key:"SubtitleString",get:function(){return void 0!==this.subtitle?this.subtitle.text:""}},{key:"ComposerString",get:function(){return void 0!==this.composer?this.composer.text:""}},{key:"LyricistString",get:function(){return void 0!==this.lyricist?this.lyricist.text:""}},{key:"Title",get:function(){return this.title},set:function(t){this.title=t}},{key:"Subtitle",get:function(){return this.subtitle},set:function(t){this.subtitle=t}},{key:"Composer",get:function(){return this.composer},set:function(t){this.composer=t}},{key:"Lyricist",get:function(){return this.lyricist},set:function(t){this.lyricist=t}},{key:"Rules",get:function(){return this.rules||(f.debug("warning: sheet.Rules was undefined. Creating new EngravingRules."),this.rules=new l.EngravingRules),this.rules},set:function(t){this.rules=t}},{key:"SheetErrors",get:function(){return this.musicSheetErrors}},{key:"SelectionStart",get:function(){return this.selectionStart},set:function(t){this.selectionStart=t.clone(),this.currentEnrolledPosition=t.clone()}},{key:"SelectionEnd",get:function(){return this.selectionEnd},set:function(t){this.selectionEnd=t}},{key:"HasBPMInfo",set:function(t){this.hasBPMInfo=t},get:function(){return this.hasBPMInfo}},{key:"MusicPartManager",get:function(){return this.musicPartManager},set:function(t){this.musicPartManager=t}},{key:"Errors",get:function(){return this.musicSheetErrors.measureErrors}},{key:"FirstMeasureNumber",get:function(){try{return this.getFirstSourceMeasure().MeasureNumber}catch(t){return f.info("MusicSheet.FirstMeasureNumber: ",t),0}}},{key:"LastMeasureNumber",get:function(){try{return this.getLastSourceMeasure().MeasureNumber}catch(t){return f.info("MusicSheet.LastMeasureNumber: ",t),0}}},{key:"CurrentEnrolledPosition",get:function(){return this.currentEnrolledPosition.clone()},set:function(t){this.currentEnrolledPosition=t.clone()}},{key:"Transpose",get:function(){return this.transpose},set:function(t){this.transpose=t}},{key:"FullNameString",get:function(){return this.ComposerString+" "+this.TitleString}},{key:"IdString",get:function(){return this.idString},set:function(t){this.idString=t}},{key:"SheetEndTimestamp",get:function(){var t=this.getLastSourceMeasure();return i.Fraction.plus(t.AbsoluteTimestamp,t.Duration)}}],[{key:"getIndexFromStaff",value:function(t){return t.idInMusicSheet}}]),e}();e.MusicSheet=m,m.defaultTitle="[no title given]"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(151),s=i(0),a=i(90),l=i(1);e.Repetition=function(t){n(i,t);var e=r(i);function i(t,n){var r;return h(this,i),(r=e.call(this,t)).backwardJumpInstructions=[],r.endingParts=[],r.endingIndexDict={},r.userNumberOfRepetitions=0,r.visibles=[],r.fromWords=!1,r.repetitonIterationOrder=[],r.numberOfEndings=1,r.musicSheet2=t,r.virtualOverallRepetition=n,r}return d(i,[{key:"getForwardJumpTargetForIteration",value:function(t){var e=this.repetitonIterationOrder[t-1];return void 0!==this.endingIndexDict[e]?this.endingIndexDict[e].part.StartIndex:-1}},{key:"getBackwardJumpTarget",value:function(){return this.startMarker.measureIndex}},{key:"SetEndingStartIndex",value:function(t,e){var n=new c(new o.SourceMusicPart(this.musicSheet2,e,e));this.endingParts.push(n);var i,r=u(t);try{for(r.s();!(i=r.n()).done;){var s=i.value;try{this.endingIndexDict[s]=n,n.endingIndices.push(s),this.numberOfEndings<s&&(this.numberOfEndings=s)}catch(t){l.error("Repetition: Exception.",t)}}}catch(a){r.e(a)}finally{r.f()}}},{key:"setEndingEndIndex",value:function(t,e){void 0!==this.endingIndexDict[t]&&this.endingIndexDict[t].part.setEndIndex(e)}},{key:"checkRepetitionForMultipleLyricVerses",value:function(){for(var t=0,e=this.EndIndex,n=this.StartIndex;n<=e;n++)for(var i=this.musicSheet2.SourceMeasures[n],r=0;r<i.CompleteNumberOfStaves;r++){var o,s=u(i.VerticalSourceStaffEntryContainers[r].StaffEntries);try{for(s.s();!(o=s.n()).done;){var a=o.value;if(void 0!==a){var l,c=0,h=u(a.VoiceEntries);try{for(h.s();!(l=h.n()).done;){var f=l.value;c+=Object.keys(f.LyricsEntries).length}}catch(d){h.e(d)}finally{h.f()}t=Math.max(t,c)}}}catch(d){s.e(d)}finally{s.f()}}return t}},{key:"BackwardJumpInstructions",get:function(){return this.backwardJumpInstructions}},{key:"EndingIndexDict",get:function(){return this.endingIndexDict}},{key:"EndingParts",get:function(){return this.endingParts}},{key:"Visibles",get:function(){return this.visibles},set:function(t){this.visibles=t}},{key:"DefaultNumberOfRepetitions",get:function(){var t=2;return this.virtualOverallRepetition&&(t=1),Math.max(t,Object.keys(this.endingIndexDict).length,this.checkRepetitionForMultipleLyricVerses())}},{key:"UserNumberOfRepetitions",get:function(){return this.userNumberOfRepetitions},set:function(t){this.userNumberOfRepetitions=t,this.repetitonIterationOrder=[];for(var e=this.userNumberOfRepetitions-this.NumberOfEndings,n=1;n<=this.userNumberOfRepetitions;n++)this.repetitonIterationOrder.push(n<=e?1:n-e)}},{key:"NumberOfEndings",get:function(){return this.numberOfEndings}},{key:"FromWords",get:function(){return this.fromWords},set:function(t){this.fromWords=t}},{key:"AbsoluteTimestamp",get:function(){return s.Fraction.createFromFraction(this.musicSheet2.SourceMeasures[this.startMarker.measureIndex].AbsoluteTimestamp)}},{key:"StartIndex",get:function(){return this.startMarker.measureIndex}},{key:"EndIndex",get:function(){if(0===this.BackwardJumpInstructions.length)return this.StartIndex;var t=this.backwardJumpInstructions[this.backwardJumpInstructions.length-1].measureIndex;return void 0!==this.endingIndexDict[this.NumberOfEndings]&&(t=Math.max(this.endingIndexDict[this.NumberOfEndings].part.EndIndex,t)),t}},{key:"FirstSourceMeasureNumber",get:function(){return this.getFirstSourceMeasure().MeasureNumber}},{key:"LastSourceMeasureNumber",get:function(){return this.getLastSourceMeasure().MeasureNumber}}]),i}(a.PartListEntry);var c=function(){function t(e){h(this,t),this.endingIndices=[],this.part=e}return d(t,[{key:"ToString",value:function(){return this.endingIndices.join(", ")}}]),t}();e.RepetitionEndingPart=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(90),s=i(0);e.SourceMusicPart=function(t){n(i,t);var e=r(i);function i(t,n,r){var o;return h(this,i),(o=e.call(this,t)).musicSheet=t,o.startIndex=n,o.endIndex=r,o}return d(i,[{key:"setStartIndex",value:function(t){this.startIndex=t}},{key:"setEndIndex",value:function(t){this.endIndex=t}},{key:"MeasuresCount",get:function(){return this.endIndex-this.startIndex+1}},{key:"StartIndex",get:function(){return this.startIndex}},{key:"EndIndex",get:function(){return this.endIndex}},{key:"ParentRepetition",get:function(){return this.parentRepetition},set:function(t){this.parentRepetition=t}},{key:"AbsoluteTimestamp",get:function(){return s.Fraction.createFromFraction(this.musicSheet.SourceMeasures[this.startIndex].AbsoluteTimestamp)}}]),i}(o.PartListEntry)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(153),r=n(30),o=n(9),s=n(15),a=n(18),l=n(0),c=n(32),f=n(13),p=n(9),m=n(18),b=n(15),v=n(1),y=n(9),g=n(156),S=n(157),w=n(160),_=n(17),x=n(59),k=n(47);e.InstrumentReader=function(){function t(e,n,i){h(this,t),this.voiceGeneratorsDict={},this.staffMainVoiceGeneratorDict={},this.divisions=0,this.currentClefNumber=1,this.currentXmlMeasureIndex=0,this.activeKeyHasBeenInitialized=!1,this.abstractInstructions=[],this.openChordSymbolContainers=[],this.repetitionInstructionReader=e,this.xmlMeasureList=n,this.musicSheet=i.GetMusicSheet,this.instrument=i,this.activeClefs=new Array(i.Staves.length),this.activeClefsHaveBeenInitialized=new Array(i.Staves.length);for(var r=0;r<i.Staves.length;r++)this.activeClefsHaveBeenInitialized[r]=!1;this.createExpressionGenerators(i.Staves.length),this.slurReader=new w.SlurReader(this.musicSheet)}return d(t,[{key:"readNextXmlMeasure",value:function(t,e,n){var i;if(this.currentXmlMeasureIndex>=this.xmlMeasureList.length)return!1;this.currentMeasure=t,this.inSourceMeasureInstrumentIndex=this.musicSheet.getGlobalStaffIndexOfFirstStaff(this.instrument),void 0!==this.repetitionInstructionReader&&this.repetitionInstructionReader.prepareReadingMeasure(t,this.currentXmlMeasureIndex);var r=new l.Fraction(0,1),o=new l.Fraction(0,1),s=!1;this.maxTieNoteFraction=new l.Fraction(0,1);var a=!1;try{var h,d=u(this.xmlMeasureList[this.currentXmlMeasureIndex].elements());try{for(d.s();!(h=d.n()).done;){var p=h.value;if("print"===p.name){var m=p.attribute("new-system");"yes"===(null==m?void 0:m.value)&&(t.printNewSystemXml=!0);var b=p.attribute("new-page");"yes"===(null==b?void 0:b.value)&&(t.printNewPageXml=!0)}else if("note"===p.name){var y=!0;p.hasAttributes&&p.attribute("print-object")&&"no"===p.attribute("print-object").value&&(y=!1);var S=1;this.instrument.Staves.length>1&&void 0!==p.element("staff")&&(S=parseInt(p.element("staff").value,10),isNaN(S)&&(v.debug("InstrumentReader.readNextXmlMeasure.get staff number"),S=1)),this.currentStaff=this.instrument.Staves[S-1];var w=void 0!==p.element("chord");if(void 0!==p.element("voice")){var E=parseInt(p.element("voice").value,10);this.currentVoiceGenerator=this.getOrCreateVoiceGenerator(E,S-1)}else w&&void 0!==this.currentVoiceGenerator||(this.currentVoiceGenerator=this.getOrCreateVoiceGenerator(1,S-1));var P=0,A=new l.Fraction(0,1),L=2,T=void 0,M=!1;if(void 0!==p.element("duration")){if(P=parseInt(p.element("duration").value,10),isNaN(P)){var C=c.ITextTranslation.translateText("ReaderErrorMessages/NoteDurationError","Invalid Note Duration.");this.musicSheet.SheetErrors.pushMeasureError(C),v.debug("InstrumentReader.readNextXmlMeasure",C);continue}if(A=new l.Fraction(P,4*this.divisions),0===P?A=this.getNoteDurationFromTypeNode(p):T=this.getNoteDurationFromTypeNode(p),void 0!==p.element("time-modification")){A=this.getNoteDurationForTuplet(p);var N=p.element("time-modification");void 0!==N&&void 0!==N.element("normal-notes")&&(L=parseInt(N.element("normal-notes").value,10)),M=!0}}var I=void 0!==p.element("rest"),R=p.element("notations"),O=void 0!==p.element("grace")||0===P||w&&a,F=!1,B=!1;if(O){var D=p.element("grace");D&&D.attributes()&&D.attribute("slash")&&"yes"===D.attribute("slash").value&&(F=!0),A=this.getNoteDurationFromTypeNode(p);var j=p.element("notations");void 0!==j&&void 0!==j.element("slur")&&(B=!0)}var V=!1;void 0!==p.element("cue")&&(V=!0);var G=p.element("type"),U=x.NoteType.UNDEFINED;if(void 0!==G){var z=G.attribute("size");null!=z&&"cue"===z.value&&(V=!0),U=x.NoteTypeHandler.StringToNoteType(G.value)}var W=void 0,H=_.StemDirectionType.Undefined,q=p.element("stem");if(void 0!==q){switch(q.value){case"down":H=_.StemDirectionType.Down;break;case"up":H=_.StemDirectionType.Up;break;case"double":H=_.StemDirectionType.Double;break;case"none":H=_.StemDirectionType.None;break;default:H=_.StemDirectionType.Undefined}var Y=q.attribute("color");Y&&(W=this.parseXmlColor(Y.value))}var X=void 0,K=0;if(void 0!==R){var J=R.element("ornaments");if(void 0!==J){var Z=J.element("tremolo");if(void 0!==Z){var Q=Z.attribute("type");if(Q&&"single"===Q.value){var $=parseInt(Z.value,10);$>0&&(K=$)}}}}var tt=p.element("notehead");if(tt){var et=tt.attribute("color");et&&(X=this.parseXmlColor(et.value))}var nt=void 0,it=p.attribute("color");it&&(nt=this.parseXmlColor(it.value),void 0===X&&(X=nt),void 0===W&&(W=nt));var rt=r.clone();w&&(rt=o.clone()),this.currentStaffEntry=this.currentMeasure.findOrCreateStaffEntry(rt,this.inSourceMeasureInstrumentIndex+S-1,this.currentStaff).staffEntry,(!this.currentVoiceGenerator.hasVoiceEntry()||!w&&!O&&!a||O&&!a||O&&!w||!O&&a)&&this.currentVoiceGenerator.createVoiceEntry(rt,this.currentStaffEntry,!I&&!O,O,F,B),O||w||(o=r.clone(),r.Add(A)),w&&void 0!==this.currentStaffEntry&&this.currentStaffEntry.ParentStaff!==this.currentStaff&&(this.currentStaffEntry=this.currentVoiceGenerator.checkForStaffEntryLink(this.inSourceMeasureInstrumentIndex+S-1,this.currentStaff,this.currentStaffEntry,this.currentMeasure));var ot=void 0!==this.currentStaffEntry&&void 0!==this.currentStaffEntry.Timestamp&&this.currentStaffEntry.Timestamp.Equals(new l.Fraction(0,1))&&!this.currentStaffEntry.hasNotes();if(this.saveAbstractInstructionList(this.instrument.Staves.length,ot),0!==this.openChordSymbolContainers.length&&(this.currentStaffEntry.ChordContainers=this.openChordSymbolContainers,this.openChordSymbolContainers=[]),M||O||(A=new l.Fraction(P,4*this.divisions)),this.currentVoiceGenerator.read(p,A,T,U,L,I,this.currentStaffEntry,this.currentMeasure,e,this.maxTieNoteFraction,w,n,y,V,H,K,W,X),void 0!==R&&void 0!==R.element("dynamics")){var st=this.expressionReaders[this.readExpressionStaffNumber(p)-1];void 0!==st&&(st.readExpressionParameters(p,this.instrument,this.divisions,r,o,this.currentMeasure.MeasureNumber,!1),st.read(p,this.currentMeasure,o))}a=O}else if("attributes"===p.name){var at=p.element("divisions");if(void 0!==at&&(this.divisions=parseInt(at.value,10),isNaN(this.divisions))){var ut=c.ITextTranslation.translateText("ReaderErrorMessages/DivisionError","Invalid divisions value at Instrument: ");if(v.debug("InstrumentReader.readNextXmlMeasure",ut),this.divisions=this.readDivisionsFromNotes(),!(this.divisions>0))throw s=!0,new f.MusicSheetReadingException(ut+this.instrument.Name);this.musicSheet.SheetErrors.push(ut+this.instrument.Name)}if(void 0===p.element("divisions")&&0===this.divisions&&0===this.currentXmlMeasureIndex){var lt=c.ITextTranslation.translateText("ReaderErrorMessages/DivisionError","Invalid divisions value at Instrument: ");if(this.divisions=this.readDivisionsFromNotes(),!(this.divisions>0))throw s=!0,new f.MusicSheetReadingException(lt+this.instrument.Name);this.musicSheet.SheetErrors.push(lt+this.instrument.Name)}this.addAbstractInstruction(p,n),r.Equals(new l.Fraction(0,1))&&this.isAttributesNodeAtBeginOfMeasure(this.xmlMeasureList[this.currentXmlMeasureIndex],p)&&this.saveAbstractInstructionList(this.instrument.Staves.length,!0),this.isAttributesNodeAtEndOfMeasure(this.xmlMeasureList[this.currentXmlMeasureIndex],p)&&this.saveClefInstructionAtEndOfMeasure()}else if("forward"===p.name){var ct=parseInt(p.element("duration").value,10);r.Add(new l.Fraction(ct,4*this.divisions))}else if("backup"===p.name){var ht=parseInt(p.element("duration").value,10);r.Sub(new l.Fraction(ht,4*this.divisions)),r.IsNegative()&&(r=new l.Fraction(0,1)),o.Sub(new l.Fraction(ht,4*this.divisions)),o.IsNegative()&&(o=new l.Fraction(0,1))}else if("direction"===p.name){var ft=p.element("direction-type"),dt=Math.min(1,r.RealValue);void 0!==this.activeRhythm&&void 0!==this.activeRhythm.Rhythm&&(dt/=this.activeRhythm.Rhythm.RealValue);var pt=!1;if(void 0!==this.repetitionInstructionReader&&(pt=this.repetitionInstructionReader.handleRepetitionInstructionsFromWordsOrSymbols(ft,dt)),!pt){var mt=this.expressionReaders[0],bt=this.readExpressionStaffNumber(p)-1;bt<this.expressionReaders.length&&(mt=this.expressionReaders[bt]),void 0!==mt&&(void 0!==ft.element("octave-shift")&&(mt.readExpressionParameters(p,this.instrument,this.divisions,r,o,this.currentMeasure.MeasureNumber,!0),mt.addOctaveShift(p,this.currentMeasure,o.clone())),mt.readExpressionParameters(p,this.instrument,this.divisions,r,o,this.currentMeasure.MeasureNumber,!1),mt.read(p,this.currentMeasure,r))}}else if("barline"===p.name){if(void 0!==this.repetitionInstructionReader){this.repetitionInstructionReader.handleLineRepetitionInstructions(p,false)}var vt=p.attribute("location");if(vt&&"right"===vt.value){var yt=null===(i=p.element("bar-style"))||void 0===i?void 0:i.value;yt&&(this.currentMeasure.endingBarStyleXml=yt,this.currentMeasure.endingBarStyleEnum=k.SystemLinesEnumHelper.xmlBarlineStyleToSystemLinesEnum(yt))}}else"sound"===p.name||"harmony"===p.name&&this.openChordSymbolContainers.push(g.ChordSymbolReader.readChordSymbol(p,this.musicSheet,this.activeKey))}}catch(kt){d.e(kt)}finally{d.f()}for(var gt in this.voiceGeneratorsDict)this.voiceGeneratorsDict.hasOwnProperty(gt)&&this.voiceGeneratorsDict[gt].checkForOpenBeam();if(this.currentXmlMeasureIndex===this.xmlMeasureList.length-1){for(var St=0;St<this.instrument.Staves.length;St++)this.activeClefsHaveBeenInitialized[St]||this.createDefaultClefInstruction(this.musicSheet.getGlobalStaffIndexOfFirstStaff(this.instrument)+St);this.activeKeyHasBeenInitialized||this.createDefaultKeyInstruction();for(var wt=0;wt<this.expressionReaders.length;wt++){var _t=this.expressionReaders[wt];void 0!==_t&&_t.checkForOpenExpressions(this.currentMeasure,r)}}this.musicSheet.HasBPMInfo?0===t.TempoInBPM&&(this.currentMeasure.TempoInBPM=this.previousMeasure.TempoInBPM):this.currentMeasure.TempoInBPM=120}catch(t){if(s)throw new f.MusicSheetReadingException(t.Message);var xt=c.ITextTranslation.translateText("ReaderErrorMessages/MeasureError","Error while reading Measure.");this.musicSheet.SheetErrors.pushMeasureError(xt),v.debug("InstrumentReader.readNextXmlMeasure",xt,t)}return this.previousMeasure=this.currentMeasure,this.currentXmlMeasureIndex+=1,!0}},{key:"parseXmlColor",value:function(t){if(t)return 7===t.length?t:9===t.length?"#"+t.substr(3):void 0}},{key:"doCalculationsAfterDurationHasBeenSet",value:function(){for(var t in this.voiceGeneratorsDict)this.voiceGeneratorsDict.hasOwnProperty(t)&&this.voiceGeneratorsDict[t].checkOpenTies()}},{key:"getOrCreateVoiceGenerator",value:function(t,e){var n=this.instrument.Staves[e],r=this.voiceGeneratorsDict[t];if(void 0!==r)-1===n.Voices.indexOf(r.GetVoice)&&n.Voices.push(r.GetVoice);else{var o=this.staffMainVoiceGeneratorDict[e];void 0!==o?(r=new i.VoiceGenerator(this.instrument,t,this.slurReader,o.GetVoice),n.Voices.push(r.GetVoice),this.voiceGeneratorsDict[t]=r):(r=new i.VoiceGenerator(this.instrument,t,this.slurReader),n.Voices.push(r.GetVoice),this.voiceGeneratorsDict[t]=r,this.staffMainVoiceGeneratorDict[e]=r)}return r}},{key:"createExpressionGenerators",value:function(t){this.expressionReaders=new Array(t);for(var e=0;e<t;e++)this.expressionReaders[e]=new S.ExpressionReader(this.musicSheet,this.instrument,e+1)}},{key:"createDefaultClefInstruction",value:function(t){var e;e=this.musicSheet.SourceMeasures.length>0?this.musicSheet.SourceMeasures[0]:this.currentMeasure;var n,i=new o.ClefInstruction(p.ClefEnum.G,0,2);void 0===e.FirstInstructionsStaffEntries[t]?(n=new r.SourceStaffEntry(void 0,void 0),e.FirstInstructionsStaffEntries[t]=n):(n=e.FirstInstructionsStaffEntries[t]).removeFirstInstructionOfTypeClefInstruction(),i.Parent=n,n.Instructions.splice(0,0,i)}},{key:"createDefaultKeyInstruction",value:function(){var t;t=this.musicSheet.SourceMeasures.length>0?this.musicSheet.SourceMeasures[0]:this.currentMeasure;for(var e=new s.KeyInstruction(void 0,0,b.KeyEnum.major),n=this.inSourceMeasureInstrumentIndex;n<this.inSourceMeasureInstrumentIndex+this.instrument.Staves.length;n++)if(void 0===t.FirstInstructionsStaffEntries[n]){var i=new r.SourceStaffEntry(void 0,void 0);t.FirstInstructionsStaffEntries[n]=i,e.Parent=i,i.Instructions.push(e)}else{var a=t.FirstInstructionsStaffEntries[n];e.Parent=a,a.removeFirstInstructionOfTypeKeyInstruction(),a.Instructions.splice(a.Instructions[0]instanceof o.ClefInstruction?1:0,0,e)}}},{key:"isAttributesNodeAtBeginOfMeasure",value:function(t,e){var n=t.elements(),i=n.indexOf(e);if(i>0&&"backup"===n[i-1].name)return!0;for(var r=-1,o=0;o<n.length;o++)if("note"===n[o].name){r=o;break}return i<r&&r>0||r<0}},{key:"isAttributesNodeAtEndOfMeasure",value:function(t,e){for(var n=t.elements().slice(),i=0,r=0;r<n.length;r++)if(n[r]===e){i=r;break}for(var o=0,s=i;s<n.length;s++)if("note"===n[s].name){o=s;break}return i>o}},{key:"getNoteDurationFromTypeNode",value:function(t){var e=t.element("type");return void 0!==e?this.currentVoiceGenerator.getNoteDurationFromType(e.value):new l.Fraction(0,4*this.divisions)}},{key:"addAbstractInstruction",value:function(t,e){if(void 0===t.element("divisions")||1!==t.elements().length){var n=t.element("transpose");if(void 0!==n){var i=n.element("chromatic");void 0!==i&&(this.instrument.PlaybackTranspose=parseInt(i.value,10))}var r,u=t.elements("clef");if(u.length>0)for(var h=0,f=u.length;h<f;++h){var d=u[h],g=p.ClefEnum.G,S=2,w=1,_=0,x=d.element("line");if(void 0!==x)try{S=parseInt(x.value,10)}catch(t){r=c.ITextTranslation.translateText("ReaderErrorMessages/ClefLineError","Invalid clef line given -> using default clef line."),this.musicSheet.SheetErrors.pushMeasureError(r),S=2,v.debug("InstrumentReader.addAbstractInstruction",r,t)}var k=d.element("sign");if(void 0!==k)try{g=p.ClefEnum[k.value],o.ClefInstruction.isSupportedClef(g)||(r=c.ITextTranslation.translateText("ReaderErrorMessages/ClefError","Unsupported clef found -> using default clef."),this.musicSheet.SheetErrors.pushMeasureError(r),g=p.ClefEnum.G,S=2),g===p.ClefEnum.TAB&&(_=-1)}catch(t){r=c.ITextTranslation.translateText("ReaderErrorMessages/ClefError","Invalid clef found -> using default clef."),this.musicSheet.SheetErrors.pushMeasureError(r),g=p.ClefEnum.G,S=2,v.debug("InstrumentReader.addAbstractInstruction",r,t)}var E=d.element("clef-octave-change");if(void 0!==E)try{_=parseInt(E.value,10)}catch(t){r=c.ITextTranslation.translateText("ReaderErrorMessages/ClefOctaveError","Invalid clef octave found -> using default clef octave."),this.musicSheet.SheetErrors.pushMeasureError(r),_=0}if(d.hasAttributes&&"number"===d.attributes()[0].name)try{(w=parseInt(d.attributes()[0].value,10))>this.currentClefNumber&&(w=this.currentClefNumber),this.currentClefNumber=w+1}catch(t){r=c.ITextTranslation.translateText("ReaderErrorMessages/ClefError","Invalid clef found -> using default clef."),this.musicSheet.SheetErrors.pushMeasureError(r),w=1,this.currentClefNumber=w+1}var P=new o.ClefInstruction(g,_,S);this.abstractInstructions.push([w,P])}if(void 0!==t.element("key")&&this.instrument.MidiInstrumentId!==y.MidiInstrument.Percussion){var A=0,L=t.element("key").element("fifths");if(void 0!==L)try{A=parseInt(L.value,10)}catch(t){r=c.ITextTranslation.translateText("ReaderErrorMessages/KeyError","Invalid key found -> set to default."),this.musicSheet.SheetErrors.pushMeasureError(r),A=0,v.debug("InstrumentReader.addAbstractInstruction",r,t)}var T=b.KeyEnum.none,M=t.element("key");if(void 0!==M&&(M=M.element("mode")),void 0!==M)try{T=b.KeyEnum[M.value]}catch(t){r=c.ITextTranslation.translateText("ReaderErrorMessages/KeyError","Invalid key found -> set to default."),this.musicSheet.SheetErrors.pushMeasureError(r),T=b.KeyEnum.major,v.debug("InstrumentReader.addAbstractInstruction",r,t)}var C=new s.KeyInstruction(void 0,A,T);this.abstractInstructions.push([1,C])}if(void 0!==t.element("time")){var N=t.element("time"),I=m.RhythmSymbolEnum.NONE,R=!0;if(void 0!==N&&N.hasAttributes){var O=N.attribute("symbol");O&&("common"===O.value?I=m.RhythmSymbolEnum.COMMON:"cut"===O.value&&(I=m.RhythmSymbolEnum.CUT));var F=N.attribute("print-object");F&&"no"===F.value&&(R=!1)}for(var B=0,D=0,j=void 0!==N&&void 0!==N.element("senza-misura"),V=t.elements("time"),G=[],U=[],z=0,W=V.length;z<W;++z){var H=V[z];G.push.apply(G,H.elements("beats")),U.push.apply(U,H.elements("beat-type"))}if(j)this.abstractInstructions.push([1,new a.RhythmInstruction(new l.Fraction(4,4,0,!1),m.RhythmSymbolEnum.NONE)]);else{try{if(void 0!==G&&G.length>0&&void 0!==U&&G.length===U.length){for(var q=G.length,Y=new Array(q),X=0,K=0;K<q;K++){var J,Z=G[K].value,Q=0;if(-1!==Z.indexOf("+"))for(var $=Z.split("+"),tt=0,et=$.length;tt<et;++tt)Q+=parseInt($[tt],10);else Q=parseInt(Z,10);J=parseInt(U[K].value,10),X=Math.max(X,J),Y[K]=new l.Fraction(Q,J,0,!1)}for(var nt=0;nt<q;nt++)B+=Y[nt].Denominator===X?Y[nt].Numerator:X/Y[nt].Denominator*Y[nt].Numerator;D=X}else B=parseInt(t.element("time").element("beats").value,10),D=parseInt(t.element("time").element("beat-type").value,10)}catch(t){r=c.ITextTranslation.translateText("ReaderErrorMessages/RhythmError","Invalid rhythm found -> set to default."),this.musicSheet.SheetErrors.pushMeasureError(r),B=4,D=4,v.debug("InstrumentReader.addAbstractInstruction",r,t)}var it=new a.RhythmInstruction(new l.Fraction(B,D,0,!1),I);it.PrintObject=R,this.abstractInstructions.push([1,it])}}}}},{key:"saveAbstractInstructionList",value:function(t,e){for(var n=this.abstractInstructions.length-1;n>=0;n--){var i=this.abstractInstructions[n],u=i[0],l=i[1];if(l instanceof o.ClefInstruction){var c=l;if(0===this.currentXmlMeasureIndex||u<=this.activeClefs.length&&c!==this.activeClefs[u-1])if(e||void 0===this.currentStaffEntry||this.currentStaffEntry.hasNotes()||u-1!==this.instrument.Staves.indexOf(this.currentStaffEntry.ParentStaff)){if(e){var h=void 0;if(void 0!==this.currentMeasure){var f=c,d=this.inSourceMeasureInstrumentIndex+u-1,p=this.currentMeasure.FirstInstructionsStaffEntries[d];if(0===this.currentXmlMeasureIndex)if(void 0===p)h=new r.SourceStaffEntry(void 0,void 0),this.currentMeasure.FirstInstructionsStaffEntries[d]=h,f.Parent=h,h.Instructions.push(f),this.activeClefsHaveBeenInitialized[u-1]=!0;else if(void 0===this.currentMeasure.FirstInstructionsStaffEntries[d]||p.Instructions[0]instanceof o.ClefInstruction){var m=new r.SourceStaffEntry(void 0,void 0);this.currentMeasure.LastInstructionsStaffEntries[d]=m,f.Parent=m,m.Instructions.push(f)}else h=p,f.Parent=h,h.removeFirstInstructionOfTypeClefInstruction(),h.Instructions.splice(0,0,f),this.activeClefsHaveBeenInitialized[u-1]=!0;else if(this.activeClefsHaveBeenInitialized[u-1]){var b=new r.SourceStaffEntry(void 0,void 0);this.previousMeasure.LastInstructionsStaffEntries[d]=b,f.Parent=b,b.Instructions.push(f)}else{var v=this.musicSheet.SourceMeasures[0];void 0===v.FirstInstructionsStaffEntries[d]?h=new r.SourceStaffEntry(void 0,void 0):(h=v.FirstInstructionsStaffEntries[d]).removeFirstInstructionOfTypeClefInstruction(),f.Parent=h,h.Instructions.splice(0,0,f),this.activeClefsHaveBeenInitialized[u-1]=!0}this.activeClefs[u-1]=c,this.abstractInstructions.splice(n,1)}}}else{var y=c;y.Parent=this.currentStaffEntry,this.currentStaffEntry.removeFirstInstructionOfTypeClefInstruction(),this.currentStaffEntry.Instructions.push(y),this.activeClefs[u-1]=c,this.abstractInstructions.splice(n,1)}else u<=this.activeClefs.length&&c===this.activeClefs[u-1]&&this.abstractInstructions.splice(n,1)}if(l instanceof s.KeyInstruction){var g=l;if(void 0===this.activeKey||this.activeKey.Key!==g.Key){var S=void 0;if(this.activeKey=g,this.abstractInstructions.splice(n,1),this.activeKeyHasBeenInitialized?S=this.currentMeasure:(this.activeKeyHasBeenInitialized=!0,S=this.currentXmlMeasureIndex>0?this.musicSheet.SourceMeasures[0]:this.currentMeasure),void 0!==S)for(var w=this.inSourceMeasureInstrumentIndex;w<this.inSourceMeasureInstrumentIndex+t;w++){var _=g;if(void 0===S.FirstInstructionsStaffEntries[w]){var x=new r.SourceStaffEntry(void 0,void 0);S.FirstInstructionsStaffEntries[w]=x,_.Parent=x,x.Instructions.push(_)}else{var k=S.FirstInstructionsStaffEntries[w];_.Parent=k,k.removeFirstInstructionOfTypeKeyInstruction(),0===k.Instructions.length?k.Instructions.push(_):k.Instructions.splice(k.Instructions[0]instanceof o.ClefInstruction?1:0,0,_)}}}else this.abstractInstructions.splice(n,1)}if(l instanceof a.RhythmInstruction){var E=l;if(void 0===this.activeRhythm||this.activeRhythm!==E){if(this.activeRhythm=E,this.abstractInstructions.splice(n,1),void 0!==this.currentMeasure)for(var P=this.inSourceMeasureInstrumentIndex;P<this.inSourceMeasureInstrumentIndex+t;P++){var A=E,L=void 0;void 0===this.currentMeasure.FirstInstructionsStaffEntries[P]?(L=new r.SourceStaffEntry(void 0,void 0),this.currentMeasure.FirstInstructionsStaffEntries[P]=L):(L=this.currentMeasure.FirstInstructionsStaffEntries[P]).removeFirstInstructionOfTypeRhythmInstruction(),A.Parent=L,L.Instructions.push(A)}}else this.abstractInstructions.splice(n,1)}}}},{key:"saveClefInstructionAtEndOfMeasure",value:function(){for(var t=this.abstractInstructions.length-1;t>=0;t--){var e=this.abstractInstructions[t][0],n=this.abstractInstructions[t][1];if(n instanceof o.ClefInstruction){var i=n;if(void 0===this.activeClefs[e-1]||i.ClefType!==this.activeClefs[e-1].ClefType||i.ClefType===this.activeClefs[e-1].ClefType&&i.Line!==this.activeClefs[e-1].Line){var s=new r.SourceStaffEntry(void 0,void 0);this.currentMeasure.LastInstructionsStaffEntries[this.inSourceMeasureInstrumentIndex+e-1]=s;var a=i;a.Parent=s,s.Instructions.push(a),this.activeClefs[e-1]=i,this.abstractInstructions.splice(t,1)}}}}},{key:"getNoteDurationForTuplet",value:function(t){var e=new l.Fraction(0,1),n=this.getNoteDurationFromTypeNode(t);if(void 0!==t.element("time-modification")){var i=t.element("time-modification");if(void 0!==i&&void 0!==i.element("actual-notes")&&void 0!==i.element("normal-notes")){var r=i.element("actual-notes"),o=i.element("normal-notes");if(void 0!==r&&void 0!==o){var s=parseInt(r.value,10),a=parseInt(o.value,10);e=new l.Fraction(a*n.Numerator,s*n.Denominator)}}}return e}},{key:"readExpressionStaffNumber",value:function(t){var e=1;if(void 0!==t.element("staff")){var n=t.element("staff");if(void 0!==n)try{e=parseInt(n.value,10)}catch(t){var i=c.ITextTranslation.translateText("ReaderErrorMessages/ExpressionStaffError","Invalid Expression staff number -> set to default.");this.musicSheet.SheetErrors.pushMeasureError(i),e=1,v.debug("InstrumentReader.readExpressionStaffNumber",i,t)}}return e}},{key:"readDivisionsFromNotes",value:function(){for(var t=0,e=this.currentXmlMeasureIndex,n=!1;!n;){for(var i=this.xmlMeasureList[e].elements(),r=0,o=i.length;r<o;++r){var s=i[r];if("note"===s.name&&void 0===s.element("time-modification")){var a=s.element("duration"),u=s.element("type");if(void 0!==a&&void 0!==u){var l=u.value,h=0;try{h=parseInt(a.value,10)}catch(t){v.debug("InstrumentReader.readDivisionsFromNotes",t);continue}switch(l){case"1024th":t=h/4*1024;break;case"512th":t=h/4*512;break;case"256th":t=h/4*256;break;case"128th":t=h/4*128;break;case"64th":t=h/4*64;break;case"32nd":t=h/4*32;break;case"16th":t=h/4*16;break;case"eighth":t=h/4*8;break;case"quarter":t=h/4*4;break;case"half":t=h/4*2;break;case"whole":t=h/4;break;case"breve":t=h/4/2;break;case"long":t=h/4/4;break;case"maxima":t=h/4/8}}}if(t>0){n=!0;break}}if(0===t&&++e===this.xmlMeasureList.length){var d=c.ITextTranslation.translateText("ReaderErrorMEssages/DivisionsError","Invalid divisions value at Instrument: ");throw new f.MusicSheetReadingException(d+this.instrument.Name)}}return t}},{key:"ActiveKey",get:function(){return this.activeKey}},{key:"MaxTieNoteFraction",get:function(){return this.maxTieNoteFraction}},{key:"ActiveRhythm",get:function(){return this.activeRhythm},set:function(t){this.activeRhythm=t}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(45),r=n(55),o=n(17),s=n(35),a=n(30),l=n(123),c=n(89),f=n(147),p=n(0),m=n(32),b=n(154),v=n(13),y=n(2),g=n(2),S=n(146),w=n(1),_=n(2),x=n(29),k=n(155),E=n(76),P=n(122),A=n(216);e.VoiceGenerator=function(){function t(e,n,o,s){h(this,t),this.lastBeamTag="",this.openTieDict={},this.currentOctaveShift=0,this.tupletDict={},this.openTupletNumber=0,this.musicSheet=e.GetMusicSheet,this.slurReader=o,this.voice=void 0!==s?new i.LinkedVoice(e,n,s):new r.Voice(e,n),e.Voices.push(this.voice),this.lyricsReader=new b.LyricsReader(this.musicSheet),this.articulationReader=new k.ArticulationReader}return d(t,[{key:"createVoiceEntry",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.currentVoiceEntry=new o.VoiceEntry(t.clone(),this.voice,e,i,r,s),n&&this.voice.VoiceEntries.push(this.currentVoiceEntry),-1===e.VoiceEntries.indexOf(this.currentVoiceEntry)&&e.VoiceEntries.push(this.currentVoiceEntry)}},{key:"read",value:function(t,e,n,i,r,o,s,a,l,c,h,f,d,b,v,y,g,S){this.currentStaffEntry=s,this.currentMeasure=a;try{this.currentNote=o?this.addRestNote(e,i,d,b,S):this.addSingleNote(t,e,i,n,r,h,f,d,b,v,y,g,S);var w=t.elements("lyric");void 0!==this.lyricsReader&&void 0!==w&&(this.lyricsReader.addLyricEntry(w,this.currentVoiceEntry),this.voice.Parent.HasLyrics=!0);var _=!1,x=t.element("notations");if(void 0!==x){void 0!==this.articulationReader&&this.readArticulations(x,this.currentVoiceEntry);var k=x.elements("slur");void 0!==this.slurReader&&k.length>0&&!this.currentNote.ParentVoiceEntry.IsGrace&&this.slurReader.addSlur(k,this.currentNote);var E=x.elements("tuplet");E.length>0&&(this.openTupletNumber=this.addTuplet(t,E),_=!0);var A=x.element("arpeggiate");if(void 0!==A&&!this.currentVoiceEntry.IsGrace){var L;if(void 0!==this.currentVoiceEntry.Arpeggio)L=this.currentVoiceEntry.Arpeggio;else{var T,M=!1,C=u(this.currentStaffEntry.VoiceEntries);try{for(C.s();!(T=C.n()).done;){var N=T.value;if(void 0!==N.Arpeggio){M=!0,L=N.Arpeggio;break}}}catch(V){C.e(V)}finally{C.f()}if(!M){var I=P.ArpeggioType.ARPEGGIO_DIRECTIONLESS,R=A.attribute("direction");if(null!==R)switch(R.value){case"up":I=P.ArpeggioType.ROLL_UP;break;case"down":I=P.ArpeggioType.ROLL_DOWN;break;default:I=P.ArpeggioType.ARPEGGIO_DIRECTIONLESS}L=new P.Arpeggio(this.currentVoiceEntry,I),this.currentVoiceEntry.Arpeggio=L}}L.addNote(this.currentNote)}var O=x.elements("tied");O.length>0&&this.addTie(O,l,c);var F=this.openTieDict;for(var B in F)if(F.hasOwnProperty(B)){var D=F[B];p.Fraction.plus(D.StartNote.ParentStaffEntry.Timestamp,D.Duration).lt(this.currentStaffEntry.Timestamp)&&delete F[B]}}void 0===t.element("time-modification")||_||this.handleTimeModificationNode(t)}catch(t){var j=m.ITextTranslation.translateText("ReaderErrorMessages/NoteError","Ignored erroneous Note.");this.musicSheet.SheetErrors.pushMeasureError(j)}return this.currentNote}},{key:"checkForStaffEntryLink",value:function(t,e,n,i){var r=new S.StaffEntryLink(this.currentVoiceEntry);r.LinkStaffEntries.push(n),n.Link=r;var o=this.currentVoiceEntry.Timestamp.clone(),s=i.getVerticalContainerByTimestamp(o);return void 0===(n=s.StaffEntries[t])&&(n=new a.SourceStaffEntry(s,e),s.StaffEntries[t]=n),n.VoiceEntries.push(this.currentVoiceEntry),r.LinkStaffEntries.push(n),n.Link=r,n}},{key:"checkForOpenBeam",value:function(){void 0!==this.openBeam&&void 0!==this.currentNote&&this.handleOpenBeam()}},{key:"checkOpenTies",value:function(){var t=this.openTieDict;for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];p.Fraction.plus(n.StartNote.ParentStaffEntry.Timestamp,n.Duration).lt(n.StartNote.ParentStaffEntry.VerticalContainerParent.ParentMeasure.Duration)&&delete t[e]}}},{key:"hasVoiceEntry",value:function(){return void 0!==this.currentVoiceEntry}},{key:"getNoteDurationFromType",value:function(t){switch(t){case"1024th":return new p.Fraction(1,1024);case"512th":return new p.Fraction(1,512);case"256th":return new p.Fraction(1,256);case"128th":return new p.Fraction(1,128);case"64th":return new p.Fraction(1,64);case"32th":case"32nd":return new p.Fraction(1,32);case"16th":return new p.Fraction(1,16);case"eighth":return new p.Fraction(1,8);case"quarter":return new p.Fraction(1,4);case"half":return new p.Fraction(1,2);case"whole":return new p.Fraction(1,1);case"breve":return new p.Fraction(2,1);case"long":return new p.Fraction(4,1);case"maxima":return new p.Fraction(8,1);default:var e=m.ITextTranslation.translateText("ReaderErrorMessages/NoteDurationError","Invalid note duration.");throw new v.MusicSheetReadingException(e)}}},{key:"readArticulations",value:function(t,e){var n=t.element("articulations");void 0!==n&&this.articulationReader.addArticulationExpression(n,e);var i=t.element("fermata");void 0!==i&&this.articulationReader.addFermata(i,e);var r=t.element("technical");void 0!==r&&this.articulationReader.addTechnicalArticulations(r,e);var o=t.element("ornaments");void 0!==o&&this.articulationReader.addOrnament(o,e)}},{key:"addSingleNote",value:function(t,e,n,i,r,o,a,u,l,c,h,f,d){for(var b=0,S=y.AccidentalEnum.NONE,x=g.NoteEnum.C,k=0,P=void 0,L=void 0,T=void 0,M=t.elements(),C=0,N=M.length;C<N;++C){var I=M[C];try{if("pitch"===I.name)for(var R=I.elements(),O=0,F=R.length;O<F;++O){var B=R[O];L=void 0,T=void 0;try{if("step"===B.name){if(void 0===(x=g.NoteEnum[B.value])){var D=m.ITextTranslation.translateText("ReaderErrorMessages/NotePitchError","Invalid pitch while reading note.");throw this.musicSheet.SheetErrors.pushMeasureError(D),new v.MusicSheetReadingException(D,void 0)}}else if("alter"===B.name){if(b=parseFloat(B.value),isNaN(b)){var j=m.ITextTranslation.translateText("ReaderErrorMessages/NoteAlterationError","Invalid alteration while reading note.");throw this.musicSheet.SheetErrors.pushMeasureError(j),new v.MusicSheetReadingException(j,void 0)}S=_.Pitch.AccidentalFromHalfTones(b)}else if("octave"===B.name&&(k=parseInt(B.value,10),isNaN(k))){var V=m.ITextTranslation.translateText("ReaderErrorMessages/NoteOctaveError","Invalid octave value while reading note.");throw this.musicSheet.SheetErrors.pushMeasureError(V),new v.MusicSheetReadingException(V,void 0)}}catch(t){w.info("VoiceGenerator.addSingleNote read Step: ",t.message)}}else if("accidental"===I.name)"natural"===I.value&&(S=y.AccidentalEnum.NATURAL);else if("unpitched"===I.name){var G=I.element("display-step");void 0!==G&&(x=g.NoteEnum[G.value.toUpperCase()]);var U=I.element("display-octave");void 0!==U&&(k=parseInt(U.value,10),a&&(k+=1))}else"instrument"===I.name?void 0!==I.firstAttribute&&(P=I.firstAttribute.value):"notehead"===I.name&&(L=I.value,null!==I.attribute("filled")&&(T="yes"===I.attribute("filled").value))}catch(t){w.info("VoiceGenerator.addSingleNote: ",t)}}k-=_.Pitch.OctaveXmlDifference;var z=new _.Pitch(x,k,S),W=p.Fraction.createFromFraction(e),H=void 0,q=-1,Y=-1,X=t.element("notations");if(void 0!==X){var K=X.element("technical");if(void 0!==K){var J=K.element("string");void 0!==J&&(q=parseInt(J.value,10));var Z=K.element("fret");void 0!==Z&&(Y=parseInt(Z.value,10))}}return(H=q<0||Y<0?new s.Note(this.currentVoiceEntry,this.currentStaffEntry,W,z):new A.TabNote(this.currentVoiceEntry,this.currentStaffEntry,W,z,q,Y)).TypeLength=i,H.NoteTypeXml=n,H.NormalNotes=r,H.PrintObject=u,H.IsCueNote=l,H.StemDirectionXml=c,H.TremoloStrokes=h,(void 0!==L&&"normal"!==L||void 0!==T)&&(H.Notehead=new E.Notehead(H,L,T)),H.NoteheadColorXml=d,H.NoteheadColor=d,H.PlaybackInstrumentId=P,this.currentVoiceEntry.Notes.push(H),this.currentVoiceEntry.StemDirectionXml=c,f&&(this.currentVoiceEntry.StemColorXml=f,this.currentVoiceEntry.StemColor=f,H.StemColorXml=f),t.elements("beam")&&!o&&this.createBeam(t,H),H}},{key:"addRestNote",value:function(t,e,n,i,r){var o=p.Fraction.createFromFraction(t),a=new s.Note(this.currentVoiceEntry,this.currentStaffEntry,o,void 0);return a.NoteTypeXml=e,a.PrintObject=n,a.IsCueNote=i,a.NoteheadColorXml=r,a.NoteheadColor=r,this.currentVoiceEntry.Notes.push(a),void 0!==this.openBeam&&this.openBeam.ExtendedNoteList.push(a),a}},{key:"createBeam",value:function(t,e){try{var n=t.element("beam"),i=void 0;if(void 0!==n&&n.hasAttributes&&(i=n.attribute("number")),void 0!==i){var r=parseInt(i.value,10),o=t.elements("beam"),s=o[0].value;1===r&&void 0!==o&&("begin"===s&&this.lastBeamTag!==s&&(void 0!==this.openBeam&&this.handleOpenBeam(),this.openBeam=new l.Beam),this.lastBeamTag=s);var a=!1;if(void 0===this.openBeam)return;for(var u=0,c=this.openBeam.Notes.length;u<c;++u)this.currentVoiceEntry===this.openBeam.Notes[u].ParentVoiceEntry&&(a=!0);a||(this.openBeam.addNoteToBeam(e),"end"===s&&1===r&&(this.openBeam=void 0))}}catch(t){var h=m.ITextTranslation.translateText("ReaderErrorMessages/BeamError","Error while reading beam.");throw this.musicSheet.SheetErrors.pushMeasureError(h),new v.MusicSheetReadingException("",t)}}},{key:"handleOpenBeam",value:function(){if(1===this.openBeam.Notes.length)return this.openBeam.Notes[0].NoteBeam=void 0,void(this.openBeam=void 0);if(this.currentNote===x.CollectionUtil.last(this.openBeam.Notes))this.openBeam=void 0;else{var t=x.CollectionUtil.last(this.openBeam.Notes).ParentStaffEntry,e=this.currentMeasure.getVerticalContainerIndexByTimestamp(t.Timestamp),n=t.VerticalContainerParent.StaffEntries.indexOf(t);if(e<this.currentMeasure.VerticalSourceStaffEntryContainers.length-1){var i=this.currentMeasure.VerticalSourceStaffEntryContainers[e+1].StaffEntries[n];if(void 0!==i)for(var r=0,o=i.VoiceEntries.length;r<o;++r){var s=i.VoiceEntries[r];if(s.ParentVoice===this.voice){var a=s.Notes[0];a.Length.lte(new p.Fraction(1,8))?(this.openBeam.addNoteToBeam(a),this.openBeam=void 0):this.openBeam=void 0}}}else this.openBeam=void 0}}},{key:"addTuplet",value:function(t,e){var n=!1;if(void 0!==e&&e.length>1){var i=t.element("time-modification");void 0!==i&&(i=i.element("actual-notes"));for(var r=e,o=0,s=r.length;o<s;++o){var a=r[o];if(void 0!==a&&a.attributes()){var u=a.attribute("bracket");u&&"yes"===u.value&&(n=!0);var l=a.attribute("type");if(l&&"start"===l.value){var c=1;a.attribute("number")&&(c=parseInt(a.attribute("number").value,10));var h=0;if(void 0!==i&&(h=parseInt(i.value,10),isNaN(h))){var d=m.ITextTranslation.translateText("ReaderErrorMessages/TupletNoteDurationError","Invalid tuplet note duration.");throw this.musicSheet.SheetErrors.pushMeasureError(d),new v.MusicSheetReadingException(d,void 0)}var p=new f.Tuplet(h,n);void 0!==this.tupletDict[c]&&(delete this.tupletDict[c],0===Object.keys(this.tupletDict).length?this.openTupletNumber=0:Object.keys(this.tupletDict).length>1&&this.openTupletNumber--),this.tupletDict[c]=p;var b=[];b.push(this.currentNote),p.Notes.push(b),p.Fractions.push(this.getTupletNoteDurationFromType(t)),this.currentNote.NoteTuplet=p,this.openTupletNumber=c}else if("stop"===l.value){var y=1;a.attribute("number")&&(y=parseInt(a.attribute("number").value,10));var g=this.tupletDict[y];if(void 0!==g){var S=[];S.push(this.currentNote),g.Notes.push(S),g.Fractions.push(this.getTupletNoteDurationFromType(t)),this.currentNote.NoteTuplet=g,delete this.tupletDict[y],0===Object.keys(this.tupletDict).length?this.openTupletNumber=0:Object.keys(this.tupletDict).length>1&&this.openTupletNumber--}}}}}else if(void 0!==e[0]){var w=e[0];if(w.hasAttributes){var _=w.attribute("type").value,x=1;w.attribute("number")&&(x=parseInt(w.attribute("number").value,10));var k=isNaN(x),E=w.attribute("bracket");if(E&&"yes"===E.value&&(n=!0),"start"===_){var P=0,A=t.element("time-modification");if(void 0!==A&&(A=A.element("actual-notes")),void 0!==A&&(P=parseInt(A.value,10),isNaN(P))){var L=m.ITextTranslation.translateText("ReaderErrorMessages/TupletNoteDurationError","Invalid tuplet note duration.");throw this.musicSheet.SheetErrors.pushMeasureError(L),new v.MusicSheetReadingException(L)}k&&(this.openTupletNumber++,x=this.openTupletNumber);var T=this.tupletDict[x];void 0===T&&(T=this.tupletDict[x]=new f.Tuplet(P,n));var M=[];M.push(this.currentNote),T.Notes.push(M),T.Fractions.push(this.getTupletNoteDurationFromType(t)),this.currentNote.NoteTuplet=T,this.openTupletNumber=x}else if("stop"===_){k&&(x=this.openTupletNumber);var C=this.tupletDict[this.openTupletNumber];if(void 0!==C){var N=[];N.push(this.currentNote),C.Notes.push(N),C.Fractions.push(this.getTupletNoteDurationFromType(t)),this.currentNote.NoteTuplet=C,0===Object.keys(this.tupletDict).length?this.openTupletNumber=0:Object.keys(this.tupletDict).length>1&&this.openTupletNumber--,delete this.tupletDict[x]}}}}return this.openTupletNumber}},{key:"handleTimeModificationNode",value:function(t){if(void 0!==this.tupletDict[this.openTupletNumber])try{var e,n=this.tupletDict[this.openTupletNumber],i=x.CollectionUtil.last(n.Notes);i[0].ParentVoiceEntry.Timestamp.Equals(this.currentVoiceEntry.Timestamp)?e=i:(e=[],n.Notes.push(e),n.Fractions.push(this.getTupletNoteDurationFromType(t))),e.push(this.currentNote),this.currentNote.NoteTuplet=n}catch(t){var r=m.ITextTranslation.translateText("ReaderErrorMessages/TupletNumberError","Invalid tuplet number.");throw this.musicSheet.SheetErrors.pushMeasureError(r),t}else if(this.currentVoiceEntry.Notes.length>0){var o=this.currentVoiceEntry.Notes[0];if(void 0!==o.NoteTuplet){var s=o.NoteTuplet;x.CollectionUtil.last(s.Notes).push(this.currentNote),this.currentNote.NoteTuplet=s}}}},{key:"addTie",value:function(t,e,n){if(void 0!==t)if(1===t.length){var i=t[0];if(void 0!==i&&i.attributes()){var r=i.attribute("type").value;try{if("start"===r){var o=this.findCurrentNoteInTieDict(this.currentNote);o<0&&delete this.openTieDict[o];var s=this.getNextAvailableNumberForTie(),a=new c.Tie(this.currentNote);this.openTieDict[s]=a}else if("stop"===r){var u=this.findCurrentNoteInTieDict(this.currentNote),l=this.openTieDict[u];void 0!==l&&(l.AddNote(this.currentNote),n.lt(p.Fraction.plus(this.currentStaffEntry.Timestamp,this.currentNote.Length))&&(n=p.Fraction.plus(this.currentStaffEntry.Timestamp,this.currentNote.Length)),delete this.openTieDict[u])}}catch(t){var h=m.ITextTranslation.translateText("ReaderErrorMessages/TieError","Error while reading tie.");this.musicSheet.SheetErrors.pushMeasureError(h)}}}else if(2===t.length){var f=this.findCurrentNoteInTieDict(this.currentNote);f>=0&&(this.openTieDict[f].AddNote(this.currentNote),n.lt(p.Fraction.plus(this.currentStaffEntry.Timestamp,this.currentNote.Length))&&(n=p.Fraction.plus(this.currentStaffEntry.Timestamp,this.currentNote.Length)))}}},{key:"getNextAvailableNumberForTie",value:function(){var t=Object.keys(this.openTieDict);if(0===t.length)return 1;t.sort((function(t,e){return+t-+e}));for(var e=0;e<t.length;e++)if(""+(e+1)!==t[e])return e+1;return+t[t.length-1]+1}},{key:"findCurrentNoteInTieDict",value:function(t){var e=this.openTieDict;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(i.Pitch.FundamentalNote===t.Pitch.FundamentalNote&&i.Pitch.Octave===t.Pitch.Octave)return+n}return-1}},{key:"getTupletNoteDurationFromType",value:function(t){if(void 0!==t.element("type")){var e=t.element("type");if(void 0!==e){var n=e.value;try{return this.getNoteDurationFromType(n)}catch(t){var i=m.ITextTranslation.translateText("ReaderErrorMessages/NoteDurationError","Invalid note duration.");throw this.musicSheet.SheetErrors.pushMeasureError(i),new v.MusicSheetReadingException("",t)}}}}},{key:"GetVoice",get:function(){return this.voice}},{key:"OctaveShift",get:function(){return this.currentOctaveShift},set:function(t){this.currentOctaveShift=t}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(214),r=n(215),o=n(32);e.LyricsReader=function(){function t(e){h(this,t),this.openLyricWords={},this.musicSheet=e}return d(t,[{key:"addLyricEntry",value:function(t,e){if(void 0!==t){for(var n=t,s=0,a=n.length;s<a;++s){var u=n[s];try{var l="single";if(void 0!==u.element("text")){var c=u.element("text");if(void 0!==u.element("syllabic")&&(l=u.element("syllabic").value),void 0!==c){var h=c.value;if(void 0!==u.element("elision")&&"-"===h){for(var f=u.elements(),d=0,p=0;p<f.length;p++)if("elision"===f[p].name){d=p;break}var m=void 0,b=void 0;if(d>0)for(var v=d;v<f.length;v++){var y=f[v];"text"===y.name&&(m=y),"syllabic"===y.name&&(b=y)}void 0!==m&&void 0!==b&&(c=m,l="middle")}var g=1,S=!1;if(void 0!==u.attributes()&&void 0!==u.attribute("number")){try{g=parseInt(u.attribute("number").value,10)}catch(t){S=!0}if(S=S||isNaN(g))try{var w=u.attribute("number").value.toLowerCase().split("verse");w.length>1&&(g=parseInt(w[1],10))}catch(t){var _=o.ITextTranslation.translateText("ReaderErrorMessages/LyricVerseNumberError","Invalid lyric verse number");this.musicSheet.SheetErrors.pushMeasureError(_);continue}}var x=void 0;"single"===l||"end"===l?(void 0!==this.openLyricWords[g]?(this.currentLyricWord=this.openLyricWords[g],x=new r.LyricsEntry(h,g,this.currentLyricWord,e,this.currentLyricWord.Syllables.length),this.currentLyricWord.Syllables.push(x),delete this.openLyricWords[g],this.currentLyricWord=void 0):x=new r.LyricsEntry(h,g,void 0,e),x.extend=void 0!==u.element("extend")):"begin"===l?(void 0!==this.openLyricWords[g]&&(delete this.openLyricWords[g],this.currentLyricWord=void 0),this.currentLyricWord=new i.LyricWord,this.openLyricWords[g]=this.currentLyricWord,x=new r.LyricsEntry(h,g,this.currentLyricWord,e,0),this.currentLyricWord.Syllables.push(x)):"middle"===l&&(void 0!==this.openLyricWords[g]?(this.currentLyricWord=this.openLyricWords[g],x=new r.LyricsEntry(h,g,this.currentLyricWord,e,this.currentLyricWord.Syllables.length),this.currentLyricWord.Syllables.push(x)):x=new r.LyricsEntry(h,g,void 0,e)),void 0!==x&&(void 0!==!e.LyricsEntries[g]&&e.LyricsEntries.setValue(g,x),void 0!==!e.ParentVoice.Parent.LyricVersesNumbers[g]&&e.ParentVoice.Parent.LyricVersesNumbers.push(g))}}}catch(t){var k=o.ITextTranslation.translateText("ReaderErrorMessages/LyricError","Error while reading lyric entry.");this.musicSheet.SheetErrors.pushMeasureError(k);continue}}e.ParentVoice.Parent.LyricVersesNumbers=e.ParentVoice.Parent.LyricVersesNumbers.filter((function(t,e,n){return n.indexOf(t)===e}))}}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(17),r=n(1),o=n(88),s=n(54),a=n(7),u=n(2);e.ArticulationReader=function(){function t(){h(this,t)}return d(t,[{key:"getAccEnumFromString",value:function(t){switch(t){case"sharp":return u.AccidentalEnum.SHARP;case"flat":return u.AccidentalEnum.FLAT;case"natural":return u.AccidentalEnum.NATURAL;case"double-sharp":case"sharp-sharp":return u.AccidentalEnum.DOUBLESHARP;case"double-flat":case"flat-flat":return u.AccidentalEnum.DOUBLEFLAT;case"quarter-sharp":return u.AccidentalEnum.QUARTERTONESHARP;case"quarter-flat":return u.AccidentalEnum.QUARTERTONEFLAT;case"triple-sharp":return u.AccidentalEnum.TRIPLESHARP;case"triple-flat":return u.AccidentalEnum.TRIPLEFLAT;default:return u.AccidentalEnum.NONE}}},{key:"addArticulationExpression",value:function(t,e){if(void 0!==t&&t.elements().length>0)for(var n=t.elements(),o=0,s=n.length;o<s;++o){var a=n[o].name;try{a.replace("-","");var u=i.ArticulationEnum[a];i.VoiceEntry.isSupportedArticulation(u)&&("staccato"===a&&e.Articulations.length>0&&e.Articulations[0]!==i.ArticulationEnum.staccato&&e.Articulations.splice(0,0,u),-1===e.Articulations.indexOf(u)&&e.Articulations.push(u))}catch(t){return void r.debug("addArticulationExpression","Invalid note articulation.",t)}}}},{key:"addFermata",value:function(t,e){var n=i.ArticulationEnum.fermata;t.attributes().length>0&&void 0!==t.attribute("type")&&"inverted"===t.attribute("type").value&&(n=i.ArticulationEnum.invertedfermata),e.Articulations.push(n)}},{key:"addTechnicalArticulations",value:function(t,e){var n={"down-bow":i.ArticulationEnum.downbow,"open-string":i.ArticulationEnum.naturalharmonic,"snap-pizzicato":i.ArticulationEnum.snappizzicato,stopped:i.ArticulationEnum.lefthandpizzicato,"up-bow":i.ArticulationEnum.upbow};for(var r in n)if(n.hasOwnProperty(r)){var s=n[r];void 0!==t.element(r)&&-1===e.Articulations.indexOf(s)&&e.Articulations.push(s)}var u=t.element("fingering");if(void 0!==u){var l=new o.TechnicalInstruction;l.type=o.TechnicalInstructionType.Fingering,l.value=u.value,l.placement=a.PlacementEnum.NotYetDefined;var c=u.attribute("placement");if(null!=c)switch(c.value){case"above":l.placement=a.PlacementEnum.Above;break;case"below":l.placement=a.PlacementEnum.Below;break;case"left":l.placement=a.PlacementEnum.Left;break;case"right":l.placement=a.PlacementEnum.Right;break;default:l.placement=a.PlacementEnum.NotYetDefined}e.TechnicalInstructions.push(l)}}},{key:"addOrnament",value:function(t,e){if(void 0!==t){var n=void 0,i={"delayed-inverted-turn":s.OrnamentEnum.DelayedInvertedTurn,"delayed-turn":s.OrnamentEnum.DelayedTurn,"inverted-mordent":s.OrnamentEnum.InvertedMordent,"inverted-turn":s.OrnamentEnum.InvertedTurn,mordent:s.OrnamentEnum.Mordent,"trill-mark":s.OrnamentEnum.Trill,turn:s.OrnamentEnum.Turn};for(var r in i)i.hasOwnProperty(r)&&void 0!==t.element(r)&&(n=new s.OrnamentContainer(i[r]));if(void 0!==n){var o=t.elements("accidental-mark");if(void 0!==o)for(var l=a.PlacementEnum.Below,c=u.AccidentalEnum.NONE,h=o,f=0,d=h.length;f<d;++f){var p=h[f],m=p.value;c=this.getAccEnumFromString(m);var b=p.attribute("placement");p.hasAttributes&&void 0!==b&&("above"===(m=b.value)?l=a.PlacementEnum.Above:"below"===m&&(l=a.PlacementEnum.Below)),l===a.PlacementEnum.Above?n.AccidentalAbove=c:l===a.PlacementEnum.Below&&(n.AccidentalBelow=c)}e.OrnamentContainer=n}}}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(80),r=n(2),o=n(32),s=n(1);e.ChordSymbolReader=function(){function t(){h(this,t)}return d(t,null,[{key:"readChordSymbol",value:function(t,e,n){var a=t.element("root"),u=t.element("kind");if(void 0!==a&&void 0!==u){var l=a.element("root-step"),c=a.element("root-alter");if(void 0!==l){var h;try{h=r.NoteEnum[l.value.trim()]}catch(t){var f=o.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol");return e.SheetErrors.pushMeasureError(f),void s.debug("InstrumentReader.readChordSymbol",f,t)}var d=r.AccidentalEnum.NONE;if(void 0!==c)try{d=r.Pitch.AccidentalFromHalfTones(parseInt(c.value,void 0))}catch(t){var p=o.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol");e.SheetErrors.pushMeasureError(p),s.debug("InstrumentReader.readChordSymbol",p,t)}var m,b=new r.Pitch(h,1,d),v=u.value.trim().replace("-","");try{m=i.ChordSymbolEnum[v]}catch(t){var y=o.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol");return e.SheetErrors.pushMeasureError(y),void s.debug("InstrumentReader.readChordSymbol",y,t)}var g=void 0,S=t.element("bass");if(void 0!==S){var w=S.element("bass-step"),_=S.element("bass-alter"),x=r.NoteEnum.C;if(void 0!==w)try{x=r.NoteEnum[w.value.trim()]}catch(t){var k=o.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol");return e.SheetErrors.pushMeasureError(k),void s.debug("InstrumentReader.readChordSymbol",k,t)}var E=r.AccidentalEnum.NONE;if(void 0!==_)try{E=r.Pitch.AccidentalFromHalfTones(parseInt(_.value,void 0))}catch(t){var P=o.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol");e.SheetErrors.pushMeasureError(P),s.debug("InstrumentReader.readChordSymbol",P,t)}g=new r.Pitch(x,1,E)}var A=void 0,L=t.element("degree");if(void 0!==L){var T,M,C,N=L.element("degree-value"),I=L.element("degree-alter"),R=L.element("degree-type");if(void 0===N||void 0===I||void 0===R)return;try{T=parseInt(N.value.trim(),void 0)}catch(t){var O=o.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol");return e.SheetErrors.pushMeasureError(O),void s.debug("InstrumentReader.readChordSymbol",O,t)}try{M=r.Pitch.AccidentalFromHalfTones(parseInt(I.value,void 0))}catch(t){var F=o.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol");return e.SheetErrors.pushMeasureError(F),void s.debug("InstrumentReader.readChordSymbol",F,t)}try{C=i.ChordDegreeText[R.value.trim().toLowerCase()]}catch(t){var B=o.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol");return e.SheetErrors.pushMeasureError(B),void s.debug("InstrumentReader.readChordSymbol",B,t)}A=new i.Degree(T,M,C)}return new i.ChordSymbolContainer(b,m,g,A,n)}}}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(217),o=n(38),s=n(73),a=n(60),l=n(36),c=n(218),f=n(72),p=n(158),m=n(159),b=n(7),v=n(8),y=n(32),g=n(1);e.ExpressionReader=function(){function t(e,n,i){h(this,t),this.musicSheet=e,this.staffNumber=i,this.globalStaffIndex=e.getGlobalStaffIndexOfFirstStaff(n)+(i-1),this.initialize()}return d(t,[{key:"readExpressionParameters",value:function(t,e,n,r,o,s,a){this.initialize();var u=t.element("offset");if(void 0!==u&&!a)try{this.offsetDivisions=parseInt(u.value,10)}catch(t){var l="ReaderErrorMessages/ExpressionOffsetError, Invalid expression offset -> set to default.";g.debug("ExpressionReader.readExpressionParameters",l,t),this.musicSheet.SheetErrors.pushMeasureError(l),this.offsetDivisions=0}this.directionTimestamp=i.Fraction.createFromFraction(r);var c=new i.Fraction(Math.abs(this.offsetDivisions),4*n);this.offsetDivisions>0?r.RealValue>0?(c=i.Fraction.multiply(i.Fraction.minus(r,o),c),this.directionTimestamp=i.Fraction.plus(c,r)):this.directionTimestamp=i.Fraction.createFromFraction(c):this.offsetDivisions<0&&(r.RealValue>0?(c=i.Fraction.multiply(i.Fraction.minus(r,o),c),this.directionTimestamp=i.Fraction.minus(r,c)):this.directionTimestamp=i.Fraction.createFromFraction(c));var h=t.attribute("placement");if(null!=h)try{var f=h.value;"below"===f?this.placement=b.PlacementEnum.Below:"above"===f&&(this.placement=b.PlacementEnum.Above)}catch(t){var d=y.ITextTranslation.translateText("ReaderErrorMessages/ExpressionPlacementError","Invalid expression placement -> set to default.");g.debug("ExpressionReader.readExpressionParameters",d,t),this.musicSheet.SheetErrors.pushMeasureError(d),this.placement=b.PlacementEnum.Below}if(this.placement===b.PlacementEnum.NotYetDefined)try{var p=t.element("direction-type");if(void 0!==p){var m=p.element("dynamics");if(void 0!==m){var v=m.attribute("default-y");null!=v&&this.readExpressionPlacement(v,"read dynamics y pos")}var S=p.element("wedge");if(void 0!==S){var w=S.attribute("default-y");null!=w&&this.readExpressionPlacement(w,"read wedge y pos")}var _=p.element("words");if(void 0!==_){var x=_.attribute("default-y");null!=x&&this.readExpressionPlacement(x,"read words y pos")}}}catch(t){var k=y.ITextTranslation.translateText("ReaderErrorMessages/ExpressionPlacementError","Invalid expression placement -> set to default.");g.debug("ExpressionReader.readExpressionParameters",k,t),this.musicSheet.SheetErrors.pushMeasureError(k),this.placement=b.PlacementEnum.Below}this.placement===b.PlacementEnum.NotYetDefined&&(this.placement=e.Staves.length>1?b.PlacementEnum.Below:e.HasLyrics?b.PlacementEnum.Above:b.PlacementEnum.Below)}},{key:"read",value:function(t,e,n){var r=!1,o=!1,s=t.element("sound");if(void 0!==s){var a=s.attribute("tempo"),u=s.attribute("dynamics");if(a){var l=a.value.match(/\d+/);this.soundTempo=void 0!==l?parseInt(l[0],10):100,e.TempoInBPM=this.soundTempo,this.musicSheet.HasBPMInfo=!0,r=!0}if(u){var c=u.value.match(/\d+/);this.soundDynamic=void 0!==c?parseInt(c[0],10):100,o=!0}}var h=t.element("direction-type");if(void 0!==h){var d=h.element("metronome");if(void 0===d)if(void 0===(d=h.element("dynamics")))if(void 0===(d=h.element("words")))void 0===(d=h.element("wedge"))||this.interpretWedge(d,e,n,e.MeasureNumber);else if(r){this.createNewTempoExpressionIfNeeded(e),this.currentMultiTempoExpression.CombinedExpressionsText=d.value;var p=new f.InstantaneousTempoExpression(d.value,this.placement,this.staffNumber,this.soundTempo,this.currentMultiTempoExpression);this.currentMultiTempoExpression.addExpression(p,"")}else o||this.interpretWords(d,e,n);else{var m=void 0!==t.element("notations");this.interpretInstantaneousDynamics(d,e,n,m)}else{var b=d.element("beat-unit"),v=void 0!==d.element("beat-unit-dot"),y=d.element("per-minute");if(void 0!==b&&void 0!==y){d.hasAttributes&&void 0!==d.attribute("default-x")&&(this.directionTimestamp=i.Fraction.createFromFraction(n));var g=parseInt(y.value,10);this.createNewTempoExpressionIfNeeded(e);var S=new f.InstantaneousTempoExpression(void 0,this.placement,this.staffNumber,g,this.currentMultiTempoExpression,!0);this.soundTempo=g,e.TempoInBPM=this.soundTempo,this.musicSheet.HasBPMInfo=!0,S.dotted=v,S.beatUnit=b.value,this.currentMultiTempoExpression.addExpression(S,""),this.currentMultiTempoExpression.CombinedExpressionsText="test"}}}}},{key:"checkForOpenExpressions",value:function(t,e){void 0!==this.openContinuousDynamicExpression&&(this.createNewMultiExpressionIfNeeded(t,e),this.closeOpenContinuousDynamic()),void 0!==this.openContinuousTempoExpression&&this.closeOpenContinuousTempo(i.Fraction.plus(t.AbsoluteTimestamp,e))}},{key:"addOctaveShift",value:function(t,e,n){var i=1,r=t.element("staff");if(void 0!==r)try{i=parseInt(r.value,10)}catch(t){var o=y.ITextTranslation.translateText("ReaderErrorMessages/OctaveShiftStaffError","Invalid octave shift staff number -> set to default");this.musicSheet.SheetErrors.pushMeasureError(o),i=1,g.debug("ExpressionReader.addOctaveShift",o,t)}var s=t.element("direction-type");if(void 0!==s){var a=s.element("octave-shift");if(void 0!==a&&a.hasAttributes)try{if(void 0!==a.attribute("size")){var u=parseInt(a.attribute("size").value,10),c=0;if(8===u?c=1:15===u&&(c=2),void 0!==a.attribute("type")){var h=a.attribute("type").value;if("up"===h||"down"===h){var f=new l.OctaveShift(h,c);f.StaffNumber=i,this.createNewMultiExpressionIfNeeded(e),this.getMultiExpression.OctaveShiftStart=f,f.ParentStartMultiExpression=this.getMultiExpression,this.openOctaveShift=f}else"stop"===h&&void 0!==this.openOctaveShift&&(this.createNewMultiExpressionIfNeeded(e,n),this.getMultiExpression.OctaveShiftEnd=this.openOctaveShift,this.openOctaveShift.ParentEndMultiExpression=this.getMultiExpression,this.openOctaveShift=void 0)}}}catch(t){var d=y.ITextTranslation.translateText("ReaderErrorMessages/OctaveShiftError","Error while reading octave shift.");this.musicSheet.SheetErrors.pushMeasureError(d),g.debug("ExpressionReader.addOctaveShift",d,t)}}}},{key:"initialize",value:function(){this.placement=b.PlacementEnum.NotYetDefined,this.soundTempo=0,this.soundDynamic=0,this.offsetDivisions=0}},{key:"readExpressionPlacement",value:function(t,e){try{var n=parseInt(t.value,10);n<0?this.placement=b.PlacementEnum.Below:n>0&&(this.placement=b.PlacementEnum.Above)}catch(t){g.debug("ExpressionReader.readExpressionParameters",e,t)}}},{key:"interpretInstantaneousDynamics",value:function(t,e,n,r){if(t.hasElements){t.hasAttributes&&void 0!==t.attribute("default-x")&&(this.directionTimestamp=i.Fraction.createFromFraction(n));var o=t.elements()[0].name;if("other-dynamics"===o&&(o=t.elements()[0].value),void 0!==o){var s;try{s=a.DynamicEnum[o]}catch(t){var u=y.ITextTranslation.translateText("ReaderErrorMessages/DynamicError","Error while reading dynamic.");return void this.musicSheet.SheetErrors.pushMeasureError(u)}if(void 0===this.activeInstantaneousDynamic||void 0!==this.activeInstantaneousDynamic&&this.activeInstantaneousDynamic.DynEnum!==s){r?this.createNewMultiExpressionIfNeeded(e,i.Fraction.createFromFraction(n)):this.createNewMultiExpressionIfNeeded(e),void 0!==this.openContinuousDynamicExpression&&this.openContinuousDynamicExpression.StartMultiExpression!==this.getMultiExpression&&this.closeOpenContinuousDynamic();var l=new a.InstantaneousDynamicExpression(o,this.soundDynamic,this.placement,this.staffNumber);this.getMultiExpression.addExpression(l,""),this.initialize(),void 0!==this.activeInstantaneousDynamic?this.activeInstantaneousDynamic.DynEnum=l.DynEnum:this.activeInstantaneousDynamic=new a.InstantaneousDynamicExpression(o,0,b.PlacementEnum.NotYetDefined,1)}}}}},{key:"interpretWords",value:function(t,e,n){var r=t.value;if(r.length>0){if(t.hasAttributes&&void 0!==t.attribute("default-x")&&(this.directionTimestamp=i.Fraction.createFromFraction(n)),this.checkIfWordsNodeIsRepetitionInstruction(r))return;this.fillMultiOrTempoExpression(r,e),this.initialize()}}},{key:"interpretWedge",value:function(t,e,n,r){void 0!==t&&t.hasAttributes&&void 0!==t.attribute("default-x")&&(this.directionTimestamp=i.Fraction.createFromFraction(n)),this.createNewMultiExpressionIfNeeded(e),this.addWedge(t,r),this.initialize()}},{key:"createNewMultiExpressionIfNeeded",value:function(t,e){void 0===e&&(e=this.directionTimestamp),(void 0===this.getMultiExpression||void 0!==this.getMultiExpression&&(this.getMultiExpression.SourceMeasureParent!==t||this.getMultiExpression.SourceMeasureParent===t&&this.getMultiExpression.Timestamp!==e))&&(this.getMultiExpression=new c.MultiExpression(t,i.Fraction.createFromFraction(e)),t.StaffLinkedExpressions[this.globalStaffIndex].push(this.getMultiExpression))}},{key:"createNewTempoExpressionIfNeeded",value:function(t){void 0!==this.currentMultiTempoExpression&&this.currentMultiTempoExpression.SourceMeasureParent===t&&this.currentMultiTempoExpression.Timestamp===this.directionTimestamp||(this.currentMultiTempoExpression=new r.MultiTempoExpression(t,i.Fraction.createFromFraction(this.directionTimestamp)),t.TempoExpressions.push(this.currentMultiTempoExpression))}},{key:"addWedge",value:function(t,e){if(void 0!==t&&t.hasAttributes){var n=t.attribute("type").value.toLowerCase();try{if("crescendo"===n||"diminuendo"===n){var i=new o.ContinuousDynamicExpression(o.ContDynamicEnum[n],this.placement,this.staffNumber);void 0!==this.openContinuousDynamicExpression&&this.closeOpenContinuousDynamic(),this.openContinuousDynamicExpression=i,this.getMultiExpression.StartingContinuousDynamic=i,i.StartMultiExpression=this.getMultiExpression,void 0!==this.activeInstantaneousDynamic&&this.activeInstantaneousDynamic.StaffNumber===i.StaffNumber&&(this.activeInstantaneousDynamic=void 0)}else"stop"===n&&void 0!==this.openContinuousDynamicExpression&&this.closeOpenContinuousDynamic()}catch(t){var r="ReaderErrorMessages/WedgeError, Error while reading Crescendo / Diminuendo.";this.musicSheet.SheetErrors.pushMeasureError(r),g.debug("ExpressionReader.addWedge",r,t)}}}},{key:"fillMultiOrTempoExpression",value:function(t,e){if(void 0!==t){var n,i=u(t.trim().split(/([\s,\r\n]and[\s,\r\n]|[\s,\r\n]und[\s,\r\n]|[\s,\r\n]e[\s,\r\n]|[\s,\r\n])+/g));try{for(i.s();!(n=i.n()).done;){var r=n.value;this.createExpressionFromString("",r,e,t)}}catch(o){i.e(o)}finally{i.f()}}}},{key:"createExpressionFromString",value:function(t,e,n,i){if(f.InstantaneousTempoExpression.isInputStringInstantaneousTempo(e)||s.ContinuousTempoExpression.isInputStringContinuousTempo(e)){if(n.TempoExpressions.length>0)for(var r=0,u=n.TempoExpressions.length;r<u;++r){var l=n.TempoExpressions[r];if(l.Timestamp===this.directionTimestamp&&void 0!==l.InstantaneousTempo&&-1!==l.InstantaneousTempo.Label.indexOf(e))return!1}if(this.createNewTempoExpressionIfNeeded(n),this.currentMultiTempoExpression.CombinedExpressionsText=i,f.InstantaneousTempoExpression.isInputStringInstantaneousTempo(e)){var c=new f.InstantaneousTempoExpression(e,this.placement,this.staffNumber,this.soundTempo,this.currentMultiTempoExpression);return this.currentMultiTempoExpression.addExpression(c,t),!0}if(s.ContinuousTempoExpression.isInputStringContinuousTempo(e)){var h=new s.ContinuousTempoExpression(e,this.placement,this.staffNumber,this.currentMultiTempoExpression);return this.currentMultiTempoExpression.addExpression(h,t),!0}}if(a.InstantaneousDynamicExpression.isInputStringInstantaneousDynamic(e)||o.ContinuousDynamicExpression.isInputStringContinuousDynamic(e)){if(this.createNewMultiExpressionIfNeeded(n),a.InstantaneousDynamicExpression.isInputStringInstantaneousDynamic(e)){void 0!==this.openContinuousDynamicExpression&&void 0===this.openContinuousDynamicExpression.EndMultiExpression&&this.closeOpenContinuousDynamic();var d=new a.InstantaneousDynamicExpression(e,this.soundDynamic,this.placement,this.staffNumber);return this.getMultiExpression.addExpression(d,t),!0}if(o.ContinuousDynamicExpression.isInputStringContinuousDynamic(e)){var b=new o.ContinuousDynamicExpression(void 0,this.placement,this.staffNumber,e);return void 0!==this.openContinuousDynamicExpression&&void 0===this.openContinuousDynamicExpression.EndMultiExpression&&this.closeOpenContinuousDynamic(),void 0!==this.activeInstantaneousDynamic&&this.activeInstantaneousDynamic.StaffNumber===b.StaffNumber&&(this.activeInstantaneousDynamic=void 0),this.openContinuousDynamicExpression=b,b.StartMultiExpression=this.getMultiExpression,this.getMultiExpression.addExpression(b,t),!0}}if(p.MoodExpression.isInputStringMood(e)){this.createNewMultiExpressionIfNeeded(n);var y=new p.MoodExpression(e,this.placement,this.staffNumber);return this.getMultiExpression.addExpression(y,t),!0}if(this.createNewMultiExpressionIfNeeded(n),n.TempoExpressions.length>0)for(var g=0,S=n.TempoExpressions.length;g<S;++g){var w=n.TempoExpressions[g];if(w.Timestamp===this.directionTimestamp&&void 0!==w.InstantaneousTempo&&w.EntriesList.length>0&&!this.hasDigit(e)&&this.globalStaffIndex>0){if(w.EntriesList[0].label.indexOf(e)>=0)return!1;break}}var _=v.TextAlignmentEnum.CenterBottom;this.musicSheet.Rules.CompactMode&&(_=v.TextAlignmentEnum.LeftBottom);var x=new m.UnknownExpression(e,this.placement,_,this.staffNumber);return this.getMultiExpression.addExpression(x,t),!1}},{key:"closeOpenContinuousDynamic",value:function(){this.openContinuousDynamicExpression.EndMultiExpression=this.getMultiExpression,this.getMultiExpression.EndingContinuousDynamic=this.openContinuousDynamicExpression,this.openContinuousDynamicExpression=void 0}},{key:"closeOpenContinuousTempo",value:function(t){this.openContinuousTempoExpression.AbsoluteEndTimestamp=t,this.openContinuousTempoExpression=void 0}},{key:"checkIfWordsNodeIsRepetitionInstruction",value:function(t){return"coda"===(t=t.trim().toLowerCase())||"tocoda"===t||"to coda"===t||"fine"===t||"d.c."===t||"dacapo"===t||"da capo"===t||"d.s."===t||"dalsegno"===t||"dal segno"===t||"d.c. al fine"===t||"d.s. al fine"===t||"d.c. al coda"===t||"d.s. al coda"===t}},{key:"hasDigit",value:function(t){return/\d/.test(t)}}]),t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,s=function(t){n(i,t);var e=r(i);function i(t,n,r){var o;return h(this,i),(o=e.call(this,n)).label=t,o.staffNumber=r,o.setMoodType(),o}return d(i,[{key:"setMoodType",value:function(){i.isStringInStringList(i.listMoodAffettuoso,this.label)?this.moodType=o.Affettuoso:i.isStringInStringList(i.listMoodAgitato,this.label)?this.moodType=o.Agitato:i.isStringInStringList(i.listMoodAnimato,this.label)?this.moodType=o.Animato:i.isStringInStringList(i.listMoodAppassionato,this.label)?this.moodType=o.Appassionato:i.isStringInStringList(i.listMoodBrillante,this.label)?this.moodType=o.Brillante:i.isStringInStringList(i.listMoodCantabile,this.label)?this.moodType=o.Cantabile:i.isStringInStringList(i.listMoodDolce,this.label)?this.moodType=o.Dolce:i.isStringInStringList(i.listMoodEnergico,this.label)?this.moodType=o.Energico:i.isStringInStringList(i.listMoodEroico,this.label)?this.moodType=o.Eroico:i.isStringInStringList(i.listMoodEspressivo,this.label)?this.moodType=o.Espressivo:i.isStringInStringList(i.listMoodFurioso,this.label)?this.moodType=o.Furioso:i.isStringInStringList(i.listMoodGiocoso,this.label)?this.moodType=o.Giocoso:i.isStringInStringList(i.listMoodGioioso,this.label)?this.moodType=o.Gioioso:i.isStringInStringList(i.listMoodGrandioso,this.label)?this.moodType=o.Grandioso:i.isStringInStringList(i.listMoodGrazioso,this.label)?this.moodType=o.Grazioso:i.isStringInStringList(i.listMoodLacrimoso,this.label)?this.moodType=o.Lacrimoso:i.isStringInStringList(i.listMoodLeggiero,this.label)?this.moodType=o.Leggiero:i.isStringInStringList(i.listMoodMaestoso,this.label)?this.moodType=o.Maestoso:i.isStringInStringList(i.listMoodMalinconico,this.label)?this.moodType=o.Malinconico:i.isStringInStringList(i.listMoodMarcato,this.label)?this.moodType=o.Marcato:i.isStringInStringList(i.listMoodMarziale,this.label)?this.moodType=o.Marziale:i.isStringInStringList(i.listMoodMesto,this.label)?this.moodType=o.Mesto:i.isStringInStringList(i.listMoodMorendo,this.label)?this.moodType=o.Morendo:i.isStringInStringList(i.listMoodNobilmente,this.label)?this.moodType=o.Nobilmente:i.isStringInStringList(i.listMoodPatetico,this.label)?this.moodType=o.Patetico:i.isStringInStringList(i.listMoodPesante,this.label)?this.moodType=o.Pesante:i.isStringInStringList(i.listMoodSaltando,this.label)?this.moodType=o.Saltando:i.isStringInStringList(i.listMoodSautille,this.label)?this.moodType=o.Sautille:i.isStringInStringList(i.listMoodScherzando,this.label)?this.moodType=o.Scherzando:i.isStringInStringList(i.listMoodSostenuto,this.label)?this.moodType=o.Sostenuto:i.isStringInStringList(i.listMoodSpiccato,this.label)?this.moodType=o.Spiccato:i.isStringInStringList(i.listMoodTenerezza,this.label)?this.moodType=o.Tenerezza:i.isStringInStringList(i.listMoodTranquillamente,this.label)?this.moodType=o.Tranquillamente:i.isStringInStringList(i.listMoodTrionfante,this.label)&&(this.moodType=o.Trionfante)}},{key:"Label",get:function(){return this.label},set:function(t){this.label=t}},{key:"Mood",get:function(){return this.moodType},set:function(t){this.moodType=t}},{key:"StaffNumber",get:function(){return this.staffNumber},set:function(t){this.staffNumber=t}},{key:"Placement",get:function(){return this.placement},set:function(t){this.placement=t}}],[{key:"isInputStringMood",value:function(t){return void 0!==t&&(i.isStringInStringList(i.listMoodAffettuoso,t)||i.isStringInStringList(i.listMoodAgitato,t)||i.isStringInStringList(i.listMoodAnimato,t)||i.isStringInStringList(i.listMoodAppassionato,t)||i.isStringInStringList(i.listMoodBrillante,t)||i.isStringInStringList(i.listMoodCantabile,t)||i.isStringInStringList(i.listMoodDolce,t)||i.isStringInStringList(i.listMoodEnergico,t)||i.isStringInStringList(i.listMoodEroico,t)||i.isStringInStringList(i.listMoodEspressivo,t)||i.isStringInStringList(i.listMoodFurioso,t)||i.isStringInStringList(i.listMoodGiocoso,t)||i.isStringInStringList(i.listMoodGioioso,t)||i.isStringInStringList(i.listMoodGrandioso,t)||i.isStringInStringList(i.listMoodGrazioso,t)||i.isStringInStringList(i.listMoodLacrimoso,t)||i.isStringInStringList(i.listMoodLeggiero,t)||i.isStringInStringList(i.listMoodMaestoso,t)||i.isStringInStringList(i.listMoodMalinconico,t)||i.isStringInStringList(i.listMoodMarcato,t)||i.isStringInStringList(i.listMoodMarziale,t)||i.isStringInStringList(i.listMoodMesto,t)||i.isStringInStringList(i.listMoodMorendo,t)||i.isStringInStringList(i.listMoodNobilmente,t)||i.isStringInStringList(i.listMoodPatetico,t)||i.isStringInStringList(i.listMoodPesante,t)||i.isStringInStringList(i.listMoodSaltando,t)||i.isStringInStringList(i.listMoodSautille,t)||i.isStringInStringList(i.listMoodScherzando,t)||i.isStringInStringList(i.listMoodSostenuto,t)||i.isStringInStringList(i.listMoodSpiccato,t)||i.isStringInStringList(i.listMoodTenerezza,t)||i.isStringInStringList(i.listMoodTranquillamente,t)||i.isStringInStringList(i.listMoodTrionfante,t))}}]),i}(i(7).AbstractExpression);e.MoodExpression=s,s.listMoodAffettuoso=["affettuoso"],s.listMoodAgitato=["agitato"],s.listMoodAppassionato=["appassionato"],s.listMoodAnimato=["animato","lively"],s.listMoodBrillante=["brillante"],s.listMoodCantabile=["cantabile"],s.listMoodDolce=["dolce"],s.listMoodEnergico=["energico"],s.listMoodEroico=["eroico"],s.listMoodEspressivo=["espressivo"],s.listMoodFurioso=["furioso"],s.listMoodGiocoso=["giocoso"],s.listMoodGioioso=["gioioso"],s.listMoodLacrimoso=["lacrimoso"],s.listMoodGrandioso=["grandioso"],s.listMoodGrazioso=["grazioso"],s.listMoodLeggiero=["leggiero"],s.listMoodMaestoso=["maestoso"],s.listMoodMalinconico=["malinconico"],s.listMoodMarcato=["marcato"],s.listMoodMarziale=["marziale"],s.listMoodMesto=["mesto"],s.listMoodMorendo=["morendo"],s.listMoodNobilmente=["nobilmente"],s.listMoodPatetico=["patetico"],s.listMoodPesante=["pesante"],s.listMoodSautille=["sautille"],s.listMoodSaltando=["saltando"],s.listMoodScherzando=["scherzando"],s.listMoodSostenuto=["sostenuto"],s.listMoodSpiccato=["spiccato"],s.listMoodTenerezza=["tenerezza"],s.listMoodTranquillamente=["tranquillamente"],s.listMoodTrionfante=["trionfante"],function(t){t[t.Affettuoso=0]="Affettuoso",t[t.Agitato=1]="Agitato",t[t.Appassionato=2]="Appassionato",t[t.Animato=3]="Animato",t[t.Brillante=4]="Brillante",t[t.Cantabile=5]="Cantabile",t[t.Dolce=6]="Dolce",t[t.Energico=7]="Energico",t[t.Eroico=8]="Eroico",t[t.Espressivo=9]="Espressivo",t[t.Furioso=10]="Furioso",t[t.Giocoso=11]="Giocoso",t[t.Gioioso=12]="Gioioso",t[t.Lacrimoso=13]="Lacrimoso",t[t.Grandioso=14]="Grandioso",t[t.Grazioso=15]="Grazioso",t[t.Leggiero=16]="Leggiero",t[t.Maestoso=17]="Maestoso",t[t.Malinconico=18]="Malinconico",t[t.Marcato=19]="Marcato",t[t.Marziale=20]="Marziale",t[t.Mesto=21]="Mesto",t[t.Morendo=22]="Morendo",t[t.Nobilmente=23]="Nobilmente",t[t.Patetico=24]="Patetico",t[t.Pesante=25]="Pesante",t[t.Sautille=26]="Sautille",t[t.Saltando=27]="Saltando",t[t.Scherzando=28]="Scherzando",t[t.Sostenuto=29]="Sostenuto",t[t.Spiccato=30]="Spiccato",t[t.Tenerezza=31]="Tenerezza",t[t.Tranquillamente=32]="Tranquillamente",t[t.Trionfante=33]="Trionfante",t[t.Vivace=34]="Vivace"}(o=e.MoodEnum||(e.MoodEnum={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(7),s=i(8);e.UnknownExpression=function(t){n(i,t);var e=r(i);function i(t,n,r,o){var a;return h(this,i),(a=e.call(this,n)).label=t,a.staffNumber=o,void 0===r&&(r=s.TextAlignmentEnum.LeftBottom),a.textAlignment=r,a}return d(i,[{key:"Label",get:function(){return this.label}},{key:"Placement",get:function(){return this.placement},set:function(t){this.placement=t}},{key:"StaffNumber",get:function(){return this.staffNumber},set:function(t){this.staffNumber=t}},{key:"TextAlignment",get:function(){return this.textAlignment}}]),i}(o.AbstractExpression)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(219),r=n(1),o=n(32);e.SlurReader=function(){function t(e){h(this,t),this.openSlurDict={},this.musicSheet=e}return d(t,[{key:"addSlur",value:function(t,e){try{if(void 0!==t){var n,s=u(t);try{for(s.s();!(n=s.n()).done;){var a=n.value;if(a.attributes().length>0){var l=a.attribute("type").value,c=1;try{void 0!==a.attribute("number")&&(c=parseInt(a.attribute("number").value,10))}catch(t){r.debug("VoiceGenerator.addSlur number: ",t)}if("start"===l){var h=this.openSlurDict[c];void 0===h&&(h=new i.Slur,this.openSlurDict[c]=h),h.StartNote=e}else if("stop"===l){var f=this.openSlurDict[c];void 0!==f&&(f.EndNote=e,e.checkForDoubleSlur(f)||(e.NoteSlurs.push(f),f.StartNote.NoteSlurs.push(f)),delete this.openSlurDict[c])}}}}catch(p){s.e(p)}finally{s.f()}}}catch(t){var d=o.ITextTranslation.translateText("ReaderErrorMessages/SlurError","Error while reading slur.");this.musicSheet.SheetErrors.pushMeasureError(d)}}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),r=n(1),o=function(){function t(e){h(this,t),this.parentInstrument=e,this.fixedKey=-1,this.name=this.parseMidiInstrument(this.parentInstrument.Name),this.midiInstrumentID=t.midiInstrument[this.name],this.volume=1}return d(t,[{key:"setMidiInstrument",value:function(e){this.midiInstrumentID=t.midiInstrument[this.parseMidiInstrument(e)]}},{key:"parseMidiInstrument",value:function(e){try{if(e){var n=e.toLowerCase().trim();for(var i in t.midiInstrument)if(-1!==n.indexOf(i))return i}if(this.parentInstrument.Name){var o=this.parentInstrument.Name.toLowerCase().trim();for(var s in t.midiInstrument)if(-1!==o.indexOf(s))return s}}catch(e){r.error("Error parsing MIDI Instrument. Default to Grand Piano.")}return"unnamed"}},{key:"ParentInstrument",get:function(){return this.parentInstrument}}],[{key:"isPianoInstrument",value:function(t){return t===i.MidiInstrument.Acoustic_Grand_Piano||t===i.MidiInstrument.Bright_Acoustic_Piano||t===i.MidiInstrument.Electric_Grand_Piano||t===i.MidiInstrument.Electric_Piano_1||t===i.MidiInstrument.Electric_Piano_2}}]),t}();e.SubInstrument=o,o.midiInstrument={alt:i.MidiInstrument.Synth_Voice,alto:i.MidiInstrument.Synth_Voice,banjo:i.MidiInstrument.Banjo,bariton:i.MidiInstrument.Synth_Voice,baritone:i.MidiInstrument.Synth_Voice,bass:i.MidiInstrument.Synth_Voice,"blockfl\xf6te":i.MidiInstrument.Recorder,brass:i.MidiInstrument.Trombone,bratsche:i.MidiInstrument.Viola,cello:i.MidiInstrument.Cello,clarinet:i.MidiInstrument.Clarinet,contrabass:i.MidiInstrument.Contrabass,drums:i.MidiInstrument.Percussion,flute:i.MidiInstrument.Flute,"fl\xf6te":i.MidiInstrument.Flute,frenchhorn:i.MidiInstrument.French_Horn,gitarre:i.MidiInstrument.Acoustic_Guitar_nylon,guitar:i.MidiInstrument.Acoustic_Guitar_nylon,harfe:i.MidiInstrument.Orchestral_Harp,harp:i.MidiInstrument.Orchestral_Harp,klarinette:i.MidiInstrument.Clarinet,klavier:i.MidiInstrument.Acoustic_Grand_Piano,kontrabass:i.MidiInstrument.Contrabass,oboe:i.MidiInstrument.Oboe,organ:i.MidiInstrument.Church_Organ,orgel:i.MidiInstrument.Church_Organ,orgue:i.MidiInstrument.Church_Organ,percussion:i.MidiInstrument.Percussion,piano:i.MidiInstrument.Acoustic_Grand_Piano,piccolo:i.MidiInstrument.Piccolo,posaune:i.MidiInstrument.Trombone,recorder:i.MidiInstrument.Recorder,sax:i.MidiInstrument.Tenor_Sax,schlagwerk:i.MidiInstrument.Percussion,schlagzeug:i.MidiInstrument.Percussion,sopran:i.MidiInstrument.Synth_Voice,steeldrum:i.MidiInstrument.Steel_Drums,streicher:i.MidiInstrument.String_Ensemble_1,strings:i.MidiInstrument.String_Ensemble_1,tenor:i.MidiInstrument.Synth_Voice,tpt:i.MidiInstrument.Trumpet,trombone:i.MidiInstrument.Trombone,trompete:i.MidiInstrument.Trumpet,trumpet:i.MidiInstrument.Trumpet,tuba:i.MidiInstrument.Tuba,unnamed:i.MidiInstrument.Acoustic_Grand_Piano,viola:i.MidiInstrument.Viola,violin:i.MidiInstrument.Violin,"violon-c":i.MidiInstrument.Cello,"violon.":i.MidiInstrument.Violin,voice:i.MidiInstrument.Synth_Voice,woodblock:i.MidiInstrument.Woodblock}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(163),r=n(164);e.MusicSymbolModuleFactory=function(){function t(){h(this,t)}return d(t,null,[{key:"createRepetitionInstructionReader",value:function(){return new i.RepetitionInstructionReader}},{key:"createRepetitionCalculator",value:function(){return new r.RepetitionCalculator}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(31),r=n(31),o=n(220);e.RepetitionInstructionReader=function(){function t(){h(this,t)}return d(t,[{key:"prepareReadingMeasure",value:function(t,e){this.currentMeasureIndex=e}},{key:"handleLineRepetitionInstructions",value:function(t,e){if(t.elements().length>0){var n,r=!1,o="",s="",a=[],u=t.element("bar-style");void 0!==u&&u.value,n=t.attributes().length>0&&void 0!==t.attribute("location")?t.attribute("location").value:"right";for(var l=t.elements(),c=0,h=l.length;c<h;++c){var f=l[c];if("repeat"===f.name&&f.hasAttributes)r=!0,o=f.attribute("direction").value;else if("ending"===f.name&&f.hasAttributes&&void 0!==f.attribute("type")&&void 0!==f.attribute("number")){s=f.attribute("type").value;for(var d=f.attribute("number").value.split("[,+]"),p=0,m=d.length;p<m;++p){var b=d[p],v=b.match("[0-9]");if(-1!==b.search("-")&&2===v.length)for(var y=parseInt(v[0],10),g=parseInt(v[1],10),S=y;S<=g;S++)a.push(S);else for(var w=0,_=v.length;w<_;++w)a.push(parseInt(v[w],10))}}}if(r||a.length>0)if("left"===n){if("start"===s){var x=new i.RepetitionInstruction(this.currentMeasureIndex,i.RepetitionInstructionEnum.Ending,i.AlignmentType.Begin,void 0,a);this.addInstruction(this.repetitionInstructions,x)}if("forward"===o){var k=new i.RepetitionInstruction(this.currentMeasureIndex,i.RepetitionInstructionEnum.StartLine);this.addInstruction(this.repetitionInstructions,k)}}else{if("stop"===s){var E=new i.RepetitionInstruction(this.currentMeasureIndex,i.RepetitionInstructionEnum.Ending,i.AlignmentType.End,void 0,a);this.addInstruction(this.repetitionInstructions,E)}if("backward"===o){var P=new i.RepetitionInstruction(this.currentMeasureIndex,i.RepetitionInstructionEnum.BackJumpLine);this.addInstruction(this.repetitionInstructions,P)}}}}},{key:"handleRepetitionInstructionsFromWordsOrSymbols",value:function(t,e){var n=t.element("words");if(void 0!==n){var r="d\\s?\\.s\\.",s=n.value.trim().toLowerCase();if(o.StringUtil.StringContainsSeparatedWord(s,r+" al fine")){var a=this.currentMeasureIndex;e<.5&&this.currentMeasureIndex<this.xmlMeasureList[0].length-1&&a--;var u=new i.RepetitionInstruction(a,i.RepetitionInstructionEnum.DalSegnoAlFine);return this.addInstruction(this.repetitionInstructions,u),!0}var l="d\\.\\s?c\\.";if(o.StringUtil.StringContainsSeparatedWord(s,l+" al coda")){var c=this.currentMeasureIndex;e<.5&&c--;var h=new i.RepetitionInstruction(c,i.RepetitionInstructionEnum.DalSegnoAlCoda);return this.addInstruction(this.repetitionInstructions,h),!0}if(o.StringUtil.StringContainsSeparatedWord(s,l+" al fine")){var f=this.currentMeasureIndex;e<.5&&this.currentMeasureIndex<this.xmlMeasureList[0].length-1&&f--;var d=new i.RepetitionInstruction(f,i.RepetitionInstructionEnum.DaCapoAlFine);return this.addInstruction(this.repetitionInstructions,d),!0}if(o.StringUtil.StringContainsSeparatedWord(s,l+" al coda")){var p=this.currentMeasureIndex;e<.5&&p--;var m=new i.RepetitionInstruction(p,i.RepetitionInstructionEnum.DaCapoAlCoda);return this.addInstruction(this.repetitionInstructions,m),!0}if(o.StringUtil.StringContainsSeparatedWord(s,l)||o.StringUtil.StringContainsSeparatedWord(s,"da\\s?capo")){var b=this.currentMeasureIndex;e<.5&&this.currentMeasureIndex<this.xmlMeasureList[0].length-1&&b--;var v=new i.RepetitionInstruction(b,i.RepetitionInstructionEnum.DaCapo);return this.addInstruction(this.repetitionInstructions,v),!0}if(o.StringUtil.StringContainsSeparatedWord(s,r)||o.StringUtil.StringContainsSeparatedWord(s,"dal\\s?segno")){var y=this.currentMeasureIndex;e<.5&&this.currentMeasureIndex<this.xmlMeasureList[0].length-1&&y--;var g=new i.RepetitionInstruction(y,i.RepetitionInstructionEnum.DalSegno);return this.addInstruction(this.repetitionInstructions,g),!0}if(o.StringUtil.StringContainsSeparatedWord(s,"to\\s?coda")||o.StringUtil.StringContainsSeparatedWord(s,"a (la )?coda")){var S=this.currentMeasureIndex;e<.5&&S--;var w=new i.RepetitionInstruction(S,i.RepetitionInstructionEnum.ToCoda);return this.addInstruction(this.repetitionInstructions,w),!0}if(o.StringUtil.StringContainsSeparatedWord(s,"fine")){var _=this.currentMeasureIndex;e<.5&&_--;var x=new i.RepetitionInstruction(_,i.RepetitionInstructionEnum.Fine);return this.addInstruction(this.repetitionInstructions,x),!0}if(o.StringUtil.StringContainsSeparatedWord(s,"coda")){var k=this.currentMeasureIndex;e>.5&&k++;var E=new i.RepetitionInstruction(k,i.RepetitionInstructionEnum.Coda);return this.addInstruction(this.repetitionInstructions,E),!0}if(o.StringUtil.StringContainsSeparatedWord(s,"segno")){var P=this.currentMeasureIndex;e>.5&&P++;var A=new i.RepetitionInstruction(P,i.RepetitionInstructionEnum.Segno);return this.addInstruction(this.repetitionInstructions,A),!0}}else{if(void 0!==t.element("segno")){var L=this.currentMeasureIndex;e>.5&&L++;var T=new i.RepetitionInstruction(L,i.RepetitionInstructionEnum.Segno);return this.addInstruction(this.repetitionInstructions,T),!0}if(void 0!==t.element("coda")){var M=this.currentMeasureIndex;e>.5&&M++;var C=new i.RepetitionInstruction(M,i.RepetitionInstructionEnum.Coda);return this.addInstruction(this.repetitionInstructions,C),!0}}return!1}},{key:"removeRedundantInstructions",value:function(){for(var t=0,e=0,n=0,o=0,s=0;s<this.repetitionInstructions.length;s++){var a=this.repetitionInstructions[s];switch(a.type){case i.RepetitionInstructionEnum.Coda:n>0&&this.findInstructionInPreviousMeasure(s,a.measureIndex,i.RepetitionInstructionEnum.ToCoda)&&(a.type=i.RepetitionInstructionEnum.None),0===e&&0===n&&(a.type=i.RepetitionInstructionEnum.ToCoda,a.alignment=i.AlignmentType.End,a.measureIndex--);break;case i.RepetitionInstructionEnum.Segno:if(t-o>0){for(var u=!1,l=0,c=this.repetitionInstructions.length;l<c;++l){var h=this.repetitionInstructions[l];if(a.measureIndex-h.measureIndex==1)switch(h.type){case i.RepetitionInstructionEnum.BackJumpLine:h.type=n-e>0?i.RepetitionInstructionEnum.DalSegnoAlCoda:i.RepetitionInstructionEnum.DalSegno,a.type=i.RepetitionInstructionEnum.None,u=!0;break;case i.RepetitionInstructionEnum.DalSegno:case i.RepetitionInstructionEnum.DalSegnoAlFine:case i.RepetitionInstructionEnum.DalSegnoAlCoda:a.type=i.RepetitionInstructionEnum.None,u=!0}if(u)break}if(u)break;a.type=n-e>0?i.RepetitionInstructionEnum.DalSegnoAlCoda:i.RepetitionInstructionEnum.DalSegno,a.alignment=i.AlignmentType.End,a.measureIndex--}}if(this.backwardSearchForPreviousIdenticalInstruction(s,a)||a.type===i.RepetitionInstructionEnum.None)this.repetitionInstructions.splice(s,1),s--;else switch(a.type){case i.RepetitionInstructionEnum.Fine:break;case i.RepetitionInstructionEnum.ToCoda:n++;break;case i.RepetitionInstructionEnum.Coda:e++;break;case i.RepetitionInstructionEnum.Segno:t++;break;case i.RepetitionInstructionEnum.DalSegnoAlFine:case i.RepetitionInstructionEnum.DalSegnoAlCoda:o++}}this.repetitionInstructions.sort(r.RepetitionInstructionComparer.Compare)}},{key:"findInstructionInPreviousMeasure",value:function(t,e,n){for(var i=t-1;i>=0;i--){var r=this.repetitionInstructions[i];if(e-r.measureIndex==1&&r.type===n)return!0}return!1}},{key:"backwardSearchForPreviousIdenticalInstruction",value:function(t,e){for(var n=t-1;n>=0;n--)if(this.repetitionInstructions[n].equals(e))return!0;return!1}},{key:"addInstruction",value:function(t,e){for(var n=!0,i=0,r=t.length;i<r;++i)if(e.equals(t[i])){n=!1;break}n&&t.push(e)}},{key:"MusicSheet",set:function(t){this.musicSheet=t,this.xmlMeasureList=new Array(this.musicSheet.Instruments.length),this.repetitionInstructions=[]}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(31),r=n(31),o=n(13);e.RepetitionCalculator=function(){function t(){h(this,t),this.repetitionInstructions=[]}return d(t,[{key:"calculateRepetitions",value:function(t,e){this.musicSheet=t,this.repetitionInstructions=e;for(var n=this.musicSheet.SourceMeasures,i=0,o=this.repetitionInstructions.length;i<o;++i){var s=this.repetitionInstructions[i];this.currentMeasureIndex=s.measureIndex,this.currentMeasure=n[this.currentMeasureIndex],this.handleRepetitionInstructions(s)}for(var a=0,u=this.musicSheet.SourceMeasures.length;a<u;++a){var l=this.musicSheet.SourceMeasures[a];l.FirstRepetitionInstructions.length>1&&l.FirstRepetitionInstructions.sort(r.RepetitionInstructionComparer.Compare),l.LastRepetitionInstructions.length>1&&l.LastRepetitionInstructions.sort(r.RepetitionInstructionComparer.Compare)}}},{key:"handleRepetitionInstructions",value:function(t){if(!this.currentMeasure)return!1;switch(t.type){case i.RepetitionInstructionEnum.StartLine:this.currentMeasure.FirstRepetitionInstructions.push(t);break;case i.RepetitionInstructionEnum.BackJumpLine:this.currentMeasure.LastRepetitionInstructions.push(t);break;case i.RepetitionInstructionEnum.Ending:if(t.alignment===i.AlignmentType.Begin)this.currentMeasure.FirstRepetitionInstructions.push(t);else for(var e=0,n=t.endingIndices.length;e<n;++e)this.currentMeasure.LastRepetitionInstructions.push(t);break;case i.RepetitionInstructionEnum.Segno:this.currentMeasure.FirstRepetitionInstructions.push(t);break;case i.RepetitionInstructionEnum.Fine:case i.RepetitionInstructionEnum.ToCoda:case i.RepetitionInstructionEnum.Coda:case i.RepetitionInstructionEnum.DaCapo:case i.RepetitionInstructionEnum.DalSegno:case i.RepetitionInstructionEnum.DalSegnoAlFine:case i.RepetitionInstructionEnum.DaCapoAlFine:case i.RepetitionInstructionEnum.DalSegnoAlCoda:case i.RepetitionInstructionEnum.DaCapoAlCoda:this.currentMeasure.LastRepetitionInstructions.push(t);break;case i.RepetitionInstructionEnum.None:break;default:throw new o.ArgumentOutOfRangeException("currentRepetitionInstruction")}return!0}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(67),r=n(64),o=n(221);e.MXLHelper=function(){function t(){h(this,t)}return d(t,null,[{key:"MXLtoIXmlElement",value:function(t){var e=new o;return e.loadAsync(t).then((function(t){return e.file("META-INF/container.xml").async("string")}),(function(t){throw t})).then((function(t){var n=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("rootfile")[0].getAttribute("full-path");return e.file(n).async("string")}),(function(t){throw t})).then((function(t){var e=(new DOMParser).parseFromString(t,"text/xml"),n=new i.IXmlElement(e.documentElement);return r.Promise.resolve(n)}),(function(t){throw t})).then((function(t){return t}),(function(t){throw new Error("extractSheetFromMxl: "+t.message)}))}},{key:"MXLtoXMLstring",value:function(t){var e=new o;return e.loadAsync(t).then((function(t){return e.file("META-INF/container.xml").async("string")}),(function(t){throw t})).then((function(t){var n=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("rootfile")[0].getAttribute("full-path");return e.file(n).async("string")}),(function(t){throw t}))}}]),t}()},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){t.exports=n(61)},function(t,e,n){"use strict";(function(e){t.exports=p;var i=n(91),r=n(166),o=n(21).Buffer;p.ReadableState=d,n(62);var s,a=function(t,e){return t.listeners(e).length};!function(){try{s=n(61)}catch(t){}finally{s||(s=n(62).EventEmitter)}}(),o=n(21).Buffer;var u=n(48);u.inherits=n(40);var l,c,h=n(226),f=void 0;function d(t,e){c=c||n(33),this.objectMode=!!(t=t||{}).objectMode,e instanceof c&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark;this.highWaterMark=i||0===i?i:this.objectMode?16:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(l||(l=n(170).StringDecoder),this.decoder=new l(t.encoding),this.encoding=t.encoding)}function p(t){if(c=c||n(33),!(this instanceof p))return new p(t);this._readableState=new d(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),s.call(this)}function m(t,e,n,r,s){var a=function(t,e){var n=null;return o.isBuffer(e)||"string"==typeof e||null==e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(e,n);if(a)t.emit("error",a);else if(null===n)e.reading=!1,function(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,v(t)}}(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!s){var u=new Error("stream.push() after EOF");t.emit("error",u)}else if(e.endEmitted&&s)u=new Error("stream.unshift() after end event"),t.emit("error",u);else{var l;!e.decoder||s||r||(n=e.decoder.write(n),l=!e.objectMode&&0===n.length),s||(e.reading=!1),l||(e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,s?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&v(t))),function(t,e){e.readingMore||(e.readingMore=!0,i(g,t,e))}(t,e)}else s||(e.reading=!1);return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(e)}function b(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:null===t||isNaN(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:t<=0?0:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=8388608?t=8388608:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function v(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(f("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i(y,t):y(t))}function y(t){f("emit readable"),t.emit("readable"),_(t)}function g(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(f("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function S(t){f("readable nexttick read 0"),t.read(0)}function w(t,e){e.reading||(f("resume read 0"),t.read(0)),e.resumeScheduled=!1,t.emit("resume"),_(t),e.flowing&&!e.reading&&t.read(0)}function _(t){var e=t._readableState;if(f("flow",e.flowing),e.flowing)do{var n=t.read()}while(null!==n&&e.flowing)}function x(t,e){var n,i=e.buffer,r=e.length,s=!!e.decoder;if(0===i.length)return null;if(0===r)n=null;else if(e.objectMode)n=i.shift();else if(!t||t>=r)n=s?i.join(""):1===i.length?i[0]:o.concat(i,r),i.length=0;else if(t<i[0].length)n=(c=i[0]).slice(0,t),i[0]=c.slice(t);else if(t===i[0].length)n=i.shift();else{n=s?"":new o(t);for(var a=0,u=0,l=i.length;u<l&&a<t;u++){var c=i[0],h=Math.min(t-a,c.length);s?n+=c.slice(0,h):c.copy(n,a,0,h),h<c.length?i[0]=c.slice(h):i.shift(),a+=h}}return n}function k(t){var e=t._readableState;if(e.length>0)throw new Error("endReadable called on non-empty stream");e.endEmitted||(e.ended=!0,i(E,e,t))}function E(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}f=h&&h.debuglog?h.debuglog("stream"):function(){},u.inherits(p,s),p.prototype.push=function(t,e){var n=this._readableState;return n.objectMode||"string"!=typeof t||(e=e||n.defaultEncoding)!==n.encoding&&(t=new o(t,e),e=""),m(this,n,t,e,!1)},p.prototype.unshift=function(t){return m(this,this._readableState,t,"",!0)},p.prototype.isPaused=function(){return!1===this._readableState.flowing},p.prototype.setEncoding=function(t){return l||(l=n(170).StringDecoder),this._readableState.decoder=new l(t),this._readableState.encoding=t,this},p.prototype.read=function(t){f("read",t);var e=this._readableState,n=t;if(("number"!=typeof t||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return f("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?k(this):v(this),null;if(0===(t=b(t,e))&&e.ended)return 0===e.length&&k(this),null;var i,r=e.needReadable;return f("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&f("length less than watermark",r=!0),(e.ended||e.reading)&&f("reading or ended",r=!1),r&&(f("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),r&&!e.reading&&(t=b(n,e)),null===(i=t>0?x(t,e):null)&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),n!==t&&e.ended&&0===e.length&&k(this),null!==i&&this.emit("data",i),i},p.prototype._read=function(t){this.emit("error",new Error("not implemented"))},p.prototype.pipe=function(t,n){var o=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=t;break;case 1:s.pipes=[s.pipes,t];break;default:s.pipes.push(t)}s.pipesCount+=1,f("pipe count=%d opts=%j",s.pipesCount,n);var u=n&&!1===n.end||t===e.stdout||t===e.stderr?p:c;function l(t){f("onunpipe"),t===o&&p()}function c(){f("onend"),t.end()}s.endEmitted?i(u):o.once("end",u),t.on("unpipe",l);var h=function(t){return function(){var e=t._readableState;f("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(t,"data")&&(e.flowing=!0,_(t))}}(o);t.on("drain",h);var d=!1;function p(){f("cleanup"),t.removeListener("close",v),t.removeListener("finish",y),t.removeListener("drain",h),t.removeListener("error",b),t.removeListener("unpipe",l),o.removeListener("end",c),o.removeListener("end",p),o.removeListener("data",m),d=!0,!s.awaitDrain||t._writableState&&!t._writableState.needDrain||h()}function m(e){f("ondata"),!1===t.write(e)&&(1!==s.pipesCount||s.pipes[0]!==t||1!==o.listenerCount("data")||d||(f("false write response, pause",o._readableState.awaitDrain),o._readableState.awaitDrain++),o.pause())}function b(e){f("onerror",e),g(),t.removeListener("error",b),0===a(t,"error")&&t.emit("error",e)}function v(){t.removeListener("finish",y),g()}function y(){f("onfinish"),t.removeListener("close",v),g()}function g(){f("unpipe"),o.unpipe(t)}return o.on("data",m),t._events&&t._events.error?r(t._events.error)?t._events.error.unshift(b):t._events.error=[b,t._events.error]:t.on("error",b),t.once("close",v),t.once("finish",y),t.emit("pipe",o),s.flowing||(f("pipe resume"),o.resume()),t},p.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this)),this;if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var r=0;r<i;r++)n[r].emit("unpipe",this);return this}var o=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}(e.pipes,t);return-1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this)),this},p.prototype.addListener=p.prototype.on=function(t,e){var n=s.prototype.on.call(this,t,e);if("data"===t&&!1!==this._readableState.flowing&&this.resume(),"readable"===t&&!this._readableState.endEmitted){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&v(this):i(S,this))}return n},p.prototype.resume=function(){var t=this._readableState;return t.flowing||(f("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i(w,t,e))}(this,t)),this},p.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},p.prototype.wrap=function(t){var e=this._readableState,n=!1,i=this;for(var r in t.on("end",(function(){if(f("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&i.push(t)}i.push(null)})),t.on("data",(function(r){f("wrapped data"),e.decoder&&(r=e.decoder.write(r)),e.objectMode&&null==r||(e.objectMode||r&&r.length)&&(i.push(r)||(n=!0,t.pause()))})),t)void 0===this[r]&&"function"==typeof t[r]&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));return function(t,e){for(var n=0,i=t.length;n<i;n++)e(t[n])}(["error","close","destroy","pause","resume"],(function(e){t.on(e,i.emit.bind(i,e))})),i._read=function(e){f("wrapped _read",e),n&&(n=!1,t.resume())},i},p._fromList=x}).call(this,n(41))},function(t,e,n){(function(t){var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(r.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new o(r.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(227),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(28))},function(t,e,n){"use strict";var i=n(229).Buffer,r=i.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(i.isEncoding===r||!r(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=l,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=c,this.end=h,e=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"\ufffd";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"\ufffd";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"\ufffd"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):e}function c(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\ufffd":e},o.prototype.text=function(t,e){var n=function(t,e,n){var i=e.length-1;if(i<n)return 0;var r=s(e[i]);return r>=0?(r>0&&(t.lastNeed=r-1),r):--i<n||-2===r?0:(r=s(e[i]))>=0?(r>0&&(t.lastNeed=r-2),r):--i<n||-2===r?0:(r=s(e[i]))>=0?(r>0&&(2===r?r=0:t.lastNeed=r-3),r):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var i=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";t.exports=o;var i=n(93),r=n(48);function o(t){if(!(this instanceof o))return new o(t);i.call(this,t)}r.inherits=n(40),r.inherits(o,i),o.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){"use strict";var i=n(3),r=n(26),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.encode=function(t){for(var e,n,r,s,a,u,l=[],c=0,h=t.length,f=h,d="string"!==i.getTypeOf(t);c<t.length;)f=h-c,d?(e=t[c++],n=c<h?t[c++]:0,r=c<h?t[c++]:0):(e=t.charCodeAt(c++),n=c<h?t.charCodeAt(c++):0,r=c<h?t.charCodeAt(c++):0),s=(3&e)<<4|n>>4,a=f>1?(15&n)<<2|r>>6:64,u=f>2?63&r:64,l.push(o.charAt(e>>2)+o.charAt(s)+o.charAt(a)+o.charAt(u));return l.join("")},e.decode=function(t){var e,n,i,s,a,u,l=0,c=0;if("data:"===t.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var h,f=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===o.charAt(64)&&f--,t.charAt(t.length-2)===o.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(h=r.uint8array?new Uint8Array(0|f):new Array(0|f);l<t.length;)e=o.indexOf(t.charAt(l++))<<2|(s=o.indexOf(t.charAt(l++)))>>4,n=(15&s)<<4|(a=o.indexOf(t.charAt(l++)))>>2,i=(3&a)<<6|(u=o.indexOf(t.charAt(l++))),h[c++]=e,64!==a&&(h[c++]=n),64!==u&&(h[c++]=i);return h}},function(t,e,n){"use strict";(function(e){var i=n(3),r=n(237),o=n(12),s=n(172),a=n(26),u=n(49),l=null;if(a.nodestream)try{l=n(238)}catch(t){}function c(t,e,n){var s=e;switch(e){case"blob":case"arraybuffer":s="uint8array";break;case"base64":s="string"}try{this._internalType=s,this._outputType=e,this._mimeType=n,i.checkSupport(s),this._worker=t.pipe(new r(s)),t.lock()}catch(t){this._worker=new o("error"),this._worker.error(t)}}c.prototype={accumulate:function(t){return function(t,n){return new u.Promise((function(r,o){var a=[],u=t._internalType,l=t._outputType,c=t._mimeType;t.on("data",(function(t,e){a.push(t),n&&n(e)})).on("error",(function(t){a=[],o(t)})).on("end",(function(){try{var t=function(t,e,n){switch(t){case"blob":return i.newBlob(i.transformTo("arraybuffer",e),n);case"base64":return s.encode(e);default:return i.transformTo(t,e)}}(l,function(t,n){var i,r=0,o=null,s=0;for(i=0;i<n.length;i++)s+=n[i].length;switch(t){case"string":return n.join("");case"array":return Array.prototype.concat.apply([],n);case"uint8array":for(o=new Uint8Array(s),i=0;i<n.length;i++)o.set(n[i],r),r+=n[i].length;return o;case"nodebuffer":return e.concat(n);default:throw new Error("concat : unsupported type '"+t+"'")}}(u,a),c);r(t)}catch(t){o(t)}a=[]})).resume()}))}(this,t)},on:function(t,e){var n=this;return this._worker.on(t,"data"===t?function(t){e.call(n,t.data,t.meta)}:function(){i.delay(e,arguments,n)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},t)}},t.exports=c}).call(this,n(21).Buffer)},function(t,e,n){"use strict";e.base64=!1,e.binary=!1,e.dir=!1,e.createFolders=!0,e.date=null,e.compression=null,e.compressionOptions=null,e.comment=null,e.unixPermissions=null,e.dosPermissions=null},function(t,e,n){"use strict";var i=n(3),r=n(12);function o(t){r.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=i.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}i.inherits(o,r),o.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=o},function(t,e,n){"use strict";var i=n(3),r=n(12);function o(t){r.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}i.inherits(o,r),o.prototype.processChunk=function(t){t&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+t.data.length),r.prototype.processChunk.call(this,t)},t.exports=o},function(t,e,n){"use strict";var i=n(12),r=n(95);function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n(3).inherits(o,i),o.prototype.processChunk=function(t){this.streamInfo.crc32=r(t.data,this.streamInfo.crc32||0),this.push(t)},t.exports=o},function(t,e,n){"use strict";var i=n(12);e.STORE={magic:"\0\0",compressWorker:function(t){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},e.DEFLATE=n(241)},function(t,e,n){"use strict";t.exports=function(t,e,n,i){for(var r=65535&t|0,o=t>>>16&65535|0,s=0;0!==n;){n-=s=n>2e3?2e3:n;do{o=o+(r=r+e[i++]|0)|0}while(--s);r%=65521,o%=65521}return r|o<<16|0}},function(t,e,n){"use strict";var i=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=function(t,e,n,r){var o=i,s=r+n;t^=-1;for(var a=r;a<s;a++)t=t>>>8^o[255&(t^e[a])];return-1^t}},function(t,e,n){"use strict";var i=n(27),r=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var s=new i.Buf8(256),a=0;a<256;a++)s[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;function u(t,e){if(e<65534&&(t.subarray&&o||!t.subarray&&r))return String.fromCharCode.apply(null,i.shrinkBuf(t,e));for(var n="",s=0;s<e;s++)n+=String.fromCharCode(t[s]);return n}s[254]=s[254]=1,e.string2buf=function(t){var e,n,r,o,s,a=t.length,u=0;for(o=0;o<a;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),u+=n<128?1:n<2048?2:n<65536?3:4;for(e=new i.Buf8(u),s=0,o=0;s<u;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|63&n):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|63&n):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|63&n);return e},e.buf2binstring=function(t){return u(t,t.length)},e.binstring2buf=function(t){for(var e=new i.Buf8(t.length),n=0,r=e.length;n<r;n++)e[n]=t.charCodeAt(n);return e},e.buf2string=function(t,e){var n,i,r,o,a=e||t.length,l=new Array(2*a);for(i=0,n=0;n<a;)if((r=t[n++])<128)l[i++]=r;else if((o=s[r])>4)l[i++]=65533,n+=o-1;else{for(r&=2===o?31:3===o?15:7;o>1&&n<a;)r=r<<6|63&t[n++],o--;o>1?l[i++]=65533:r<65536?l[i++]=r:(l[i++]=55296|(r-=65536)>>10&1023,l[i++]=56320|1023&r)}return u(l,i)},e.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+s[t[n]]>e?n:e}},function(t,e,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,n){"use strict";e.LOCAL_FILE_HEADER="PK\x03\x04",e.CENTRAL_FILE_HEADER="PK\x01\x02",e.CENTRAL_DIRECTORY_END="PK\x05\x06",e.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",e.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",e.DATA_DESCRIPTOR="PK\x07\b"},function(t,e,n){"use strict";var i=n(3),r=n(26),o=n(186),s=n(255),a=n(256),u=n(188);t.exports=function(t){var e=i.getTypeOf(t);return i.checkSupport(e),"string"!==e||r.uint8array?"nodebuffer"===e?new a(t):r.uint8array?new u(i.transformTo("uint8array",t)):new o(i.transformTo("array",t)):new s(t)}},function(t,e,n){"use strict";var i=n(187);function r(t){i.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}n(3).inherits(r,i),r.prototype.byteAt=function(t){return this.data[this.zero+t]},r.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),n=t.charCodeAt(1),i=t.charCodeAt(2),r=t.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===e&&this.data[o+1]===n&&this.data[o+2]===i&&this.data[o+3]===r)return o-this.zero;return-1},r.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1),i=t.charCodeAt(2),r=t.charCodeAt(3),o=this.readData(4);return e===o[0]&&n===o[1]&&i===o[2]&&r===o[3]},r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},t.exports=r},function(t,e,n){"use strict";var i=n(3);function r(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},readString:function(t){return i.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},t.exports=r},function(t,e,n){"use strict";var i=n(186);function r(t){i.call(this,t)}n(3).inherits(r,i),r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},t.exports=r},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(13)),i(n(74)),i(n(75)),i(n(16)),i(n(149)),i(n(161)),i(n(59)),i(n(258)),i(n(260)),i(n(47))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(11),r=n(14),o=n(105),s=function(){function t(t){this.toStrF=t||i.defaultToString,this.dictionary=new r.default(this.toStrF),this.nElements=0}return t.prototype.add=function(t,e){return void 0===e&&(e=1),!(i.isUndefined(t)||e<=0||(this.contains(t)?this.dictionary.getValue(t).copies+=e:this.dictionary.setValue(t,{value:t,copies:e}),this.nElements+=e,0))},t.prototype.count=function(t){return this.contains(t)?this.dictionary.getValue(t).copies:0},t.prototype.contains=function(t){return this.dictionary.containsKey(t)},t.prototype.remove=function(t,e){if(void 0===e&&(e=1),i.isUndefined(t)||e<=0)return!1;if(this.contains(t)){var n=this.dictionary.getValue(t);return this.nElements-=e>n.copies?n.copies:e,n.copies-=e,n.copies<=0&&this.dictionary.remove(t),!0}return!1},t.prototype.toArray=function(){for(var t=[],e=0,n=this.dictionary.values();e<n.length;e++)for(var i=n[e],r=i.value,o=i.copies,s=0;s<o;s++)t.push(r);return t},t.prototype.toSet=function(){for(var t=new o.default(this.toStrF),e=0,n=this.dictionary.values();e<n.length;e++)t.add(n[e].value);return t},t.prototype.forEach=function(t){this.dictionary.forEach((function(e,n){for(var i=n.value,r=n.copies,o=0;o<r;o++)if(!1===t(i))return!1;return!0}))},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return 0===this.nElements},t.prototype.clear=function(){this.nElements=0,this.dictionary.clear()},t}();e.default=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(n(106).default);e.default=o},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(14),s=n(11),a=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},t}(),u=function(){function t(){this.key=null,this.value=null}return t.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},t}(),l=function(t){function e(e){var n=t.call(this,e)||this;return n.head=new u,n.tail=new u,n.head.next=n.tail,n.tail.prev=n.head,n}return r(e,t),e.prototype.appendToTail=function(t){var e=this.tail.prev;e.next=t,t.prev=e,t.next=this.tail,this.tail.prev=t},e.prototype.getLinkedDictionaryPair=function(t){if(!s.isUndefined(t)){var e="$"+this.toStr(t);return this.table[e]}},e.prototype.getValue=function(t){var e=this.getLinkedDictionaryPair(t);if(!s.isUndefined(e))return e.value},e.prototype.remove=function(e){var n=this.getLinkedDictionaryPair(e);if(!s.isUndefined(n))return t.prototype.remove.call(this,e),n.unlink(),n.value},e.prototype.clear=function(){t.prototype.clear.call(this),this.head.next=this.tail,this.tail.prev=this.head},e.prototype.replace=function(t,e){var n="$"+this.toStr(e.key);e.next=t.next,e.prev=t.prev,this.remove(t.key),e.prev.next=e,e.next.prev=e,this.table[n]=e,++this.nElements},e.prototype.setValue=function(t,e){if(!s.isUndefined(t)&&!s.isUndefined(e)){var n=this.getLinkedDictionaryPair(t),i=new a(t,e),r="$"+this.toStr(t);return s.isUndefined(n)?(this.appendToTail(i),this.table[r]=i,void++this.nElements):(this.replace(n,i),n.value)}},e.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(e)})),t},e.prototype.values=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),t},e.prototype.forEach=function(t){for(var e=this.head.next;e.next;){if(!1===t(e.key,e.value))return;e=e.next}},e}(o.default);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(11),r=n(14),o=n(43),s=function(){function t(t,e,n){void 0===n&&(n=!1),this.dict=new r.default(t),this.equalsF=e||i.defaultEquals,this.allowDuplicate=n}return t.prototype.getValue=function(t){var e=this.dict.getValue(t);return i.isUndefined(e)?[]:o.copy(e)},t.prototype.setValue=function(t,e){if(i.isUndefined(t)||i.isUndefined(e))return!1;var n=this.dict.getValue(t);return i.isUndefined(n)?(this.dict.setValue(t,[e]),!0):!(!this.allowDuplicate&&o.contains(n,e,this.equalsF)||(n.push(e),0))},t.prototype.remove=function(t,e){if(i.isUndefined(e)){var n=this.dict.remove(t);return!i.isUndefined(n)}var r=this.dict.getValue(t);return!(i.isUndefined(r)||!o.remove(r,e,this.equalsF)||(0===r.length&&this.dict.remove(t),0))},t.prototype.keys=function(){return this.dict.keys()},t.prototype.values=function(){for(var t=[],e=0,n=this.dict.values();e<n.length;e++)for(var i=0,r=n[e];i<r.length;i++)t.push(r[i]);return t},t.prototype.containsKey=function(t){return this.dict.containsKey(t)},t.prototype.clear=function(){this.dict.clear()},t.prototype.size=function(){return this.dict.size()},t.prototype.isEmpty=function(){return this.dict.isEmpty()},t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(11),r=n(108),o=function(){function t(t){this.heap=new r.default(i.reverseCompareFunction(t))}return t.prototype.enqueue=function(t){return this.heap.add(t)},t.prototype.add=function(t){return this.heap.add(t)},t.prototype.dequeue=function(){if(0!==this.heap.size()){var t=this.heap.peek();return this.heap.removeRoot(),t}},t.prototype.peek=function(){return this.heap.peek()},t.prototype.contains=function(t){return this.heap.contains(t)},t.prototype.isEmpty=function(){return this.heap.isEmpty()},t.prototype.size=function(){return this.heap.size()},t.prototype.clear=function(){this.heap.clear()},t.prototype.forEach=function(t){this.heap.forEach(t)},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(69),r=function(){function t(){this.list=new i.default}return t.prototype.push=function(t){return this.list.add(t,0)},t.prototype.add=function(t){return this.list.add(t,0)},t.prototype.pop=function(){return this.list.removeElementAtIndex(0)},t.prototype.peek=function(){return this.list.first()},t.prototype.size=function(){return this.list.size()},t.prototype.contains=function(t,e){return this.list.contains(t,e)},t.prototype.isEmpty=function(){return this.list.isEmpty()},t.prototype.clear=function(){this.list.clear()},t.prototype.forEach=function(t){this.list.forEach(t)},t}();e.default=r},function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER",t[t.INSIDE_AT_END=2]="INSIDE_AT_END",t[t.INSIDE_AT_START=3]="INSIDE_AT_START"}(i||(i={}));var r=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.rootIds=t,this.nodes=e,this.initRootIds(),this.initNodes()}return t.prototype.initRootIds=function(){for(var t=0,e=this.rootIds;t<e.length;t++)this.createEmptyNodeIfNotExist(e[t])},t.prototype.initNodes=function(){for(var t in this.nodes)if(this.nodes.hasOwnProperty(t))for(var e=0,n=this.nodes[t];e<n.length;e++)this.createEmptyNodeIfNotExist(n[e])},t.prototype.createEmptyNodeIfNotExist=function(t){this.nodes[t]||(this.nodes[t]=[])},t.prototype.getRootIds=function(){return this.rootIds.slice()},t.prototype.getNodes=function(){var t={};for(var e in this.nodes)this.nodes.hasOwnProperty(e)&&(t[e]=this.nodes[e].slice());return t},t.prototype.getObject=function(){return{rootIds:this.getRootIds(),nodes:this.getNodes()}},t.prototype.toObject=function(){return this.getObject()},t.prototype.flatten=function(){for(var t=this,e=[],n=0;n<this.rootIds.length;n++){var i=this.rootIds[n];e.push({id:i,level:0,hasParent:!1,childrenCount:0}),u(i,this.nodes,e,0)}for(var r=0,o=e;r<o.length;r++){var s=o[r];s.childrenCount=a(s.id)}return e;function a(e){return t.nodes[e]?t.nodes[e].length:0}function u(t,e,n,i){if(void 0===i&&(i=0),t&&e&&n&&e[t]){i++;for(var r=e[t],o=0;o<r.length;o++){var s=r[o];n.push({id:s,level:i,hasParent:!0}),u(s,e,n,i)}i--}}},t.prototype.moveIdBeforeId=function(t,e){return this.moveId(t,e,i.BEFORE)},t.prototype.moveIdAfterId=function(t,e){return this.moveId(t,e,i.AFTER)},t.prototype.moveIdIntoId=function(t,e,n){return void 0===n&&(n=!0),this.moveId(t,e,n?i.INSIDE_AT_START:i.INSIDE_AT_END)},t.prototype.swapRootIdWithRootId=function(t,e){var n=this.findRootId(t),i=this.findRootId(e);this.swapRootPositionWithRootPosition(n,i)},t.prototype.swapRootPositionWithRootPosition=function(t,e){var n=this.rootIds[e];this.rootIds[e]=this.rootIds[t],this.rootIds[t]=n},t.prototype.deleteId=function(t){this.rootDeleteId(t),this.nodeAndSubNodesDelete(t),this.nodeRefrencesDelete(t)},t.prototype.insertIdBeforeId=function(t,e){var n=this.findRootId(t);for(var i in n>-1&&this.insertIdIntoRoot(e,n),this.nodes)if(this.nodes.hasOwnProperty(i)){var r=this.findNodeId(i,t);r>-1&&this.insertIdIntoNode(i,e,r)}},t.prototype.insertIdAfterId=function(t,e){var n=this.findRootId(t);for(var i in n>-1&&this.insertIdIntoRoot(e,n+1),this.nodes)if(this.nodes.hasOwnProperty(i)){var r=this.findNodeId(i,t);r>-1&&this.insertIdIntoNode(i,e,r+1)}},t.prototype.insertIdIntoId=function(t,e){this.nodeInsertAtEnd(t,e),this.nodes[e]=[]},t.prototype.insertIdIntoRoot=function(t,e){void 0===e?this.rootInsertAtEnd(t):this.rootIds.splice(e<0?e+this.rootIds.length+1:e,0,t),this.nodes[t]=this.nodes[t]||[]},t.prototype.insertIdIntoNode=function(t,e,n){this.nodes[t]=this.nodes[t]||[],this.nodes[e]=this.nodes[e]||[],void 0===n?this.nodeInsertAtEnd(t,e):this.nodes[t].splice(n<0?n+this.nodes[t].length+1:n,0,e)},t.prototype.moveId=function(t,e,n){var r=t,o=this.findRootId(r);for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){this.findNodeId(s,e);break}var a=e,u=this.findRootId(a);for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){this.findNodeId(s,e);break}if(o>-1){if(u>-1)switch(this.rootDelete(o),u>o&&u--,n){case i.BEFORE:this.insertIdIntoRoot(r,u);break;case i.AFTER:this.insertIdIntoRoot(r,u+1);break;case i.INSIDE_AT_START:this.nodeInsertAtStart(a,r);break;case i.INSIDE_AT_END:this.nodeInsertAtEnd(a,r)}else for(var s in this.rootDelete(o),this.nodes)if(this.nodes.hasOwnProperty(s)&&(l=this.findNodeId(s,a))>-1){switch(n){case i.BEFORE:this.insertIdIntoNode(s,r,l);break;case i.AFTER:this.insertIdIntoNode(s,r,l+1);break;case i.INSIDE_AT_START:this.nodeInsertAtStart(a,r);break;case i.INSIDE_AT_END:this.nodeInsertAtEnd(a,r)}break}}else if(u>-1){for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)&&(l=this.findNodeId(s,r))>-1){this.nodeDeleteAtIndex(s,l);break}switch(n){case i.BEFORE:this.insertIdIntoRoot(r,u);break;case i.AFTER:this.insertIdIntoRoot(r,u+1);break;case i.INSIDE_AT_START:this.nodeInsertAtStart(a,r);break;case i.INSIDE_AT_END:this.nodeInsertAtEnd(a,r)}}else{for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)&&(l=this.findNodeId(s,r))>-1){this.nodeDeleteAtIndex(s,l);break}for(var s in this.nodes){var l;if(this.nodes.hasOwnProperty(s)&&(l=this.findNodeId(s,a))>-1){switch(n){case i.BEFORE:this.insertIdIntoNode(s,r,l);break;case i.AFTER:this.insertIdIntoNode(s,r,l+1);break;case i.INSIDE_AT_START:this.nodeInsertAtStart(a,r);break;case i.INSIDE_AT_END:this.nodeInsertAtEnd(a,r)}break}}}},t.prototype.swapArrayElements=function(t,e,n){var i=t[e];return t[e]=t[n],t[n]=i,t},t.prototype.rootDeleteId=function(t){var e=this.findRootId(t);e>-1&&this.rootDelete(e)},t.prototype.nodeAndSubNodesDelete=function(t){for(var e=[],n=0;n<this.nodes[t].length;n++)this.nodeAndSubNodesDelete(this.nodes[t][n]),e.push(t);for(this.nodeDelete(t),n=0;n<e.length;n++)this.nodeDelete(e[n])},t.prototype.nodeRefrencesDelete=function(t){for(var e in this.nodes)if(this.nodes.hasOwnProperty(e))for(var n=0;n<this.nodes[e].length;n++)this.nodes[e][n]===t&&this.nodeDeleteAtIndex(e,n)},t.prototype.nodeDelete=function(t){delete this.nodes[t]},t.prototype.findRootId=function(t){return this.rootIds.indexOf(t)},t.prototype.findNodeId=function(t,e){return this.nodes[t].indexOf(e)},t.prototype.findNode=function(t){return this.nodes[t]},t.prototype.nodeInsertAtStart=function(t,e){this.nodes[t].unshift(e)},t.prototype.nodeInsertAtEnd=function(t,e){this.nodes[t].push(e)},t.prototype.rootDelete=function(t){this.rootIds.splice(t,1)},t.prototype.nodeDeleteAtIndex=function(t,e){this.nodes[t].splice(e,1)},t.prototype.rootInsertAtStart=function(t){this.rootIds.unshift(t)},t.prototype.rootInsertAtEnd=function(t){this.rootIds.push(t)},t}();e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(6);e.AbstractGraphicalInstruction=function(t){n(i,t);var e=r(i);function i(t){var n;return h(this,i),(n=e.call(this)).parent=t,n}return d(i,[{key:"Parent",get:function(){return this.parent},set:function(t){this.parent=t}}]),i}(o.GraphicalObject)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GraphicalComment=function(){return function t(e,n){h(this,t),this.label=e,this.settings=n}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GraphicalMarkedArea=function(){return function t(e,n,i,r){h(this,t),this.systemRectangle=e,this.labelRectangle=n,this.label=i,this.settings=r}}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(4),s=i(6);e.GraphicalRectangle=function(t){n(i,t);var e=r(i);function i(t,n,r,s){var a;return h(this,i),(a=e.call(this)).boundingBox=new o.BoundingBox(r),a.boundingBox.RelativePosition=t,a.boundingBox.BorderRight=n.x-t.x,a.boundingBox.BorderBottom=n.y-t.y,a.style=s,a}return i}(s.GraphicalObject)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),r=function(){function t(){h(this,t),this.matrix=[];for(var e=0;e<2;e++){this.matrix[e]=[];for(var n=0;n<2;n++)this.matrix[e][n]=0}}return d(t,[{key:"scalarMultiplication",value:function(t){for(var e=0;e<2;e++)for(var n=0;n<2;n++)this.matrix[e][n]*=t}},{key:"getTransposeMatrix",value:function(){for(var e=new t,n=0;n<2;n++)for(var i=0;i<2;i++)e.matrix[n][i]=this.matrix[i][n];return e}},{key:"vectorMultiplication",value:function(t){var e=new i.PointF2D;return e.x=t.x*this.matrix[0][0]+t.y*this.matrix[0][1],e.y=t.x*this.matrix[1][0]+t.y*this.matrix[1][1],e}}],[{key:"getRotationMatrix",value:function(e){var n=new t,i=Math.cos(e),r=Math.sin(e);return n.matrix[0][0]=i,n.matrix[0][1]=-r,n.matrix[1][0]=r,n.matrix[1][1]=i,n}}]),t}();e.Matrix2D=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GraphicalStaffEntryLink=function(){function t(e){h(this,t),this.graphicalLinkedStaffEntries=[],this.staffEntryLink=e,this.initialize()}return d(t,[{key:"isFilled",value:function(){for(var t=0;t<this.graphicalLinkedStaffEntries.length;t++)if(void 0===this.graphicalLinkedStaffEntries[t])return!1;return!0}},{key:"getLinkedStaffEntriesGraphicalNotes",value:function(t){if(-1!==this.graphicalLinkedStaffEntries.indexOf(t)){for(var e=[],n=0,i=this.graphicalLinkedStaffEntries.length;n<i;++n){var r,o=u(this.graphicalLinkedStaffEntries[n].graphicalVoiceEntries);try{for(o.s();!(r=o.n()).done;){var s,a=u(r.value.notes);try{for(a.s();!(s=a.n()).done;){var l=s.value;void 0!==l.sourceNote.ParentStaffEntry.Link&&l.sourceNote.ParentVoiceEntry===this.staffEntryLink.GetVoiceEntry&&e.push(l)}}catch(c){a.e(c)}finally{a.f()}}}catch(c){o.e(c)}finally{o.f()}}return e}}},{key:"initialize",value:function(){for(var t=0,e=this.staffEntryLink.LinkStaffEntries.length;t<e;++t)this.graphicalLinkedStaffEntries.push(void 0)}},{key:"GetStaffEntryLink",get:function(){return this.staffEntryLink}},{key:"GraphicalLinkedStaffEntries",get:function(){return this.graphicalLinkedStaffEntries},set:function(t){this.graphicalLinkedStaffEntries=t}}]),t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(6),a=i(24),u=i(5),l=i(4),c=i(23),f=i(29);e.SelectionEndSymbol=function(t){n(i,t);var e=r(i);function i(t,n){var r;h(this,i),r=e.call(this);var o=n,d=t.PositionAndShape.AbsolutePosition.y,p=f.CollectionUtil.last(t.StaffLines).PositionAndShape.RelativePosition.y+4;r.verticalLine=new c.GraphicalLine(new u.PointF2D(o,d),new u.PointF2D(o,d+p),.4,a.OutlineAndFillStyleEnum.SelectionSymbol);for(var m=0,b=t.StaffLines.length;m<b;++m){var v=new u.PointF2D(o,d+t.StaffLines[m].PositionAndShape.RelativePosition.y),y=new Array(3);v.y-=.2,y[0].x=v.x-3,y[0].y=v.y+1.2,y[1].x=v.x-2,y[1].y=v.y+.4,y[2].x=v.x-2,y[2].y=v.y+2,r.arrows.push(y);var g=new Array(8);v.x-=.1,v.y+=.3;g[0].x=v.x-2,g[0].y=v.y+1.5-.2,g[1].x=v.x-1,g[1].y=v.y+1.5-.2,g[2].x=v.x-1,g[2].y=v.y+2.5,g[3].x=v.x-2,g[3].y=v.y+2.5,g[4].x=g[0].x,g[4].y=g[0].y-.8,g[5].x=g[4].x+.8+1,g[5].y=g[4].y,g[6].x=g[5].x,g[6].y=g[3].y+.8,g[7].x=g[3].x,g[7].y=g[6].y,r.arrowlines.push(g)}return r.boundingBox=new l.BoundingBox(s(r)),r.boundingBox.AbsolutePosition=new u.PointF2D(o,d),r.boundingBox.BorderLeft=-.4,r.boundingBox.BorderRight=4,r.boundingBox.BorderBottom=p,r}return i}(o.GraphicalObject)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(5),a=i(24),u=i(23),l=i(6),c=i(4),f=i(29);e.SelectionStartSymbol=function(t){n(i,t);var e=r(i);function i(t,n){var r;h(this,i),r=e.call(this);var l=n,d=t.PositionAndShape.AbsolutePosition.y,p=f.CollectionUtil.last(t.StaffLines).PositionAndShape.RelativePosition.y+4;r.verticalLine=new u.GraphicalLine(new o.PointF2D(l,d),new o.PointF2D(l,d+p),.4,a.OutlineAndFillStyleEnum.SelectionSymbol);for(var m=0,b=t.StaffLines.length;m<b;++m){var v=new o.PointF2D(l,d+t.StaffLines[m].PositionAndShape.RelativePosition.y),y=new Array(7);y[0].x=v.x+4,y[0].y=v.y+2,y[1].x=v.x+2.5,y[1].y=v.y+.5,y[2].x=v.x+2.5,y[2].y=v.y+1.3,y[3].x=v.x+1,y[3].y=v.y+1.3,y[4].x=v.x+1,y[4].y=v.y+2.7,y[5].x=v.x+2.5,y[5].y=v.y+2.7,y[6].x=v.x+2.5,y[6].y=v.y+3.5,r.arrows.push(y)}return r.boundingBox=new c.BoundingBox(s(r)),r.boundingBox.AbsolutePosition=new o.PointF2D(l,d),r.boundingBox.BorderLeft=-.4,r.boundingBox.BorderRight=4,r.boundingBox.BorderBottom=p,r}return i}(l.GraphicalObject)},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(83)),i(n(139)),i(n(84)),i(n(82)),i(n(19)),i(n(140)),i(n(115)),i(n(141)),i(n(142)),i(n(85)),i(n(86)),i(n(102)),i(n(20)),i(n(116)),i(n(143)),i(n(207)),i(n(144)),i(n(145)),i(n(78)),i(n(87))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.p=0]="p",t[t.f=1]="f",t[t.s=2]="s",t[t.z=3]="z",t[t.m=4]="m",t[t.r=5]="r"}(e.DynamicExpressionSymbolEnum||(e.DynamicExpressionSymbolEnum={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(10);!function(t){t[t.NEAR_HEAD=1]="NEAR_HEAD",t[t.NEAR_TOP=2]="NEAR_TOP"}(i=e.CurvePositionEnum||(e.CurvePositionEnum={}));var o=function(){function t(e){h(this,t),this.vfStartNote=void 0,this.vfEndNote=void 0,this.parentSlur=e}return d(t,[{key:"curve_Options",value:function(){return{cps:[{x:0,y:10},{x:0,y:10}],invert:!1,position:i.NEAR_TOP,position_end:i.NEAR_TOP,spacing:2,thickness:2,x_shift:0,y_shift:10}}},{key:"createVexFlowCurve",value:function(){this.vfCurve=new r.Flow.Curve(this.vfStartNote,this.vfEndNote,void 0)}},{key:"vfSlur",get:function(){return this.parentSlur}}],[{key:"createFromVexflowSlur",value:function(e){return new t(e.parentSlur)}}]),t}();e.VexFlowSlur=o},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(53)),i(n(9)),i(n(15)),i(n(31)),i(n(18)),i(n(88))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(10),s=i(86),a=i(19),l=i(1);e.VexFlowTabMeasure=function(t){n(i,t);var e=r(i);function i(t,n,r){return h(this,i),e.call(this,t,n,r)}return d(i,[{key:"resetLayout",value:function(){this.stave=new o.Flow.TabStave(0,0,0,{space_above_staff_ln:0,space_below_staff_ln:0}),this.updateInstructionWidth()}},{key:"graphicalMeasureCreatedCalculations",value:function(){for(var t=0,e=this.staffEntries.length;t<e;++t){var n,i=u(this.staffEntries[t].graphicalVoiceEntries);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.vfStaveNote=r.notes[0].sourceNote.isRest()?a.VexFlowConverter.GhostNote(r.notes[0].sourceNote.Length):a.VexFlowConverter.CreateTabNote(r)}}catch(g){i.e(g)}finally{i.f()}}this.finalizeTuplets();var s,c=u(this.getVoicesWithinMeasure());try{for(c.s();!(s=c.n()).done;){var h=s.value;if(void 0!==h){this.vfVoices[h.VoiceId]=new o.Flow.Voice({beat_value:this.parentSourceMeasure.Duration.Denominator,num_beats:this.parentSourceMeasure.Duration.Numerator,resolution:o.Flow.RESOLUTION}).setMode(2);var f,d=u(this.getRestFilledVexFlowStaveNotesPerVoice(h));try{for(d.s();!(f=d.n()).done;){var p=f.value;if(!p.parentVoiceEntry||!p.parentVoiceEntry.IsGrace||p.parentVoiceEntry.GraceAfterMainNote){var m=p;if(0!==p.notes.length&&p.notes[0]&&p.notes[0].sourceNote.PrintObject){if(p.parentVoiceEntry&&this.rules.RenderFingerings&&this.createFingerings(p),p.parentVoiceEntry&&void 0!==p.parentVoiceEntry.Arpeggio){var b=p.parentVoiceEntry.Arpeggio;if(p.notes&&p.notes.length>1){var v=a.VexFlowConverter.StrokeTypeFromArpeggioType(b.type),y=new o.Flow.Stroke(v,{all_voices:this.rules.ArpeggiosGoAcrossVoices});this.rules.RenderArpeggios&&m.vfStaveNote.addStroke(0,y)}else l.debug("[OSMD] arpeggio in measure ".concat(this.MeasureNumber," could not be drawn.\n                        voice entry had less than two notes, arpeggio is likely between voice entries, not currently supported in Vexflow."))}this.vfVoices[h.VoiceId].addTickable(m.vfStaveNote)}else this.vfVoices[h.VoiceId].addTickable(m.vfStaveNote)}}}catch(g){d.e(g)}finally{d.f()}}}}catch(g){c.e(g)}finally{c.f()}}}]),i}(s.VexFlowMeasure)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(211);e.MusicPartManager=function(){function t(e){h(this,t),this.musicSheet=e}return d(t,[{key:"reInit",value:function(){this.init()}},{key:"init",value:function(){this.parts=this.musicSheet.Repetitions.slice(),this.sheetStart=this.musicSheet.SelectionStart=new i.Fraction(0,1),this.sheetEnd=this.musicSheet.SelectionEnd=this.musicSheet.SheetEndTimestamp,this.calcMapping()}},{key:"getCurrentRepetitionTimestampTransform",value:function(t){for(var e=void 0,n=this.timestamps.length-1;n>=0;n--)if(e=this.timestamps[n],t.gte(e.$from))return e;return this.timestamps[0]}},{key:"absoluteEnrolledToSheetTimestamp",value:function(t){if(0===this.timestamps.length)return t;var e=this.getCurrentRepetitionTimestampTransform(t);return i.Fraction.plus(t,i.Fraction.minus(e.to,e.$from))}},{key:"getIterator",value:function(t){return void 0===t?new r.MusicPartManagerIterator(this,this.musicSheet.SelectionStart,this.musicSheet.SelectionEnd):new r.MusicPartManagerIterator(this,t,void 0)}},{key:"setSelectionStart",value:function(t){this.musicSheet.SelectionStart=t,this.musicSheet.SelectionEnd=void 0}},{key:"setSelectionRange",value:function(t,e){this.musicSheet.SelectionStart=void 0===t?this.sheetStart:t,this.musicSheet.SelectionEnd=void 0===e?this.sheetEnd:e}},{key:"calcMapping",value:function(){var t=[],e=this.getIterator(),n=e.CurrentRepetition,i=new o(e.CurrentEnrolledTimestamp.clone(),e.CurrentSourceTimestamp.clone(),void 0,0);for(t.push(i);!e.EndReached;){if(e.JumpOccurred||n!==e.CurrentRepetition){if(n=e.CurrentRepetition,e.backJumpOccurred){var r=e.JumpResponsibleRepetition;i.nextBackJump=e.CurrentEnrolledTimestamp,i.curRepetition=r,i.curRepetitionIteration=e.CurrentJumpResponsibleRepetitionIterationBeforeJump;for(var s=this.timestamps.length-2;s>=0&&!t[s].to.lt(r.AbsoluteTimestamp)&&void 0===t[s].curRepetition;s--)t[s].nextBackJump=i.nextBackJump,t[s].curRepetition=r,t[s].curRepetitionIteration=i.curRepetitionIteration}i=new o(e.CurrentEnrolledTimestamp.clone(),e.CurrentSourceTimestamp.clone(),void 0,0),t.push(i)}e.moveToNext()}this.timestamps=t}},{key:"Parts",get:function(){return this.parts}},{key:"MusicSheet",get:function(){return this.musicSheet}}]),t}();var o=function t(e,n,i,r){h(this,t),this.$from=e,this.to=n,this.curRepetition=i,this.curRepetitionIteration=r,this.nextBackJump=void 0,this.nextForwardJump=void 0};e.TimestampTransform=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(212),o=n(18),s=n(38),a=n(1),l=function(){function t(e,n,o){h(this,t),this.currentMeasureIndex=0,this.currentPartIndex=0,this.currentVoiceEntryIndex=-1,this.currentDynamicEntryIndex=0,this.currentTempoEntryIndex=0,this.currentDynamicChangingExpressions=[],this.currentRepetition=void 0,this.endReached=!1,this.frontReached=!1,this.currentTimeStamp=new i.Fraction(0,1),this.currentEnrolledMeasureTimestamp=new i.Fraction(0,1),this.currentVerticalContainerInMeasureTimestamp=new i.Fraction(0,1),this.jumpResponsibleRepetition=void 0,this.activeDynamicExpressions=[];try{this.frontReached=!0,this.manager=e,this.currentVoiceEntries=void 0,this.frontReached=!1;var s,l=u(e.MusicSheet.Repetitions);try{for(l.s();!(s=l.n()).done;){var c=s.value;this.setRepetitionIterationCount(c,1)}}catch(d){l.e(d)}finally{l.f()}if(this.activeDynamicExpressions=new Array(e.MusicSheet.getCompleteNumberOfStaves()),this.currentMeasure=this.manager.MusicSheet.SourceMeasures[0],void 0===n)return;do{this.moveToNext()}while((void 0===this.currentVoiceEntries||this.currentTimeStamp.lt(n))&&!this.endReached);for(var f=0;f<this.activeDynamicExpressions.length;f++)void 0!==this.activeDynamicExpressions[f]&&this.currentDynamicChangingExpressions.push(new r.DynamicsContainer(this.activeDynamicExpressions[f],f));this.currentTempoChangingExpression=this.activeTempoExpression}catch(e){a.info("MusicPartManagerIterator: "+e)}}return d(t,[{key:"clone",value:function(){var e=new t(this.manager);return e.currentVoiceEntryIndex=this.currentVoiceEntryIndex,e.currentMappingPart=this.currentMappingPart,e.currentPartIndex=this.currentPartIndex,e.currentVoiceEntries=this.currentVoiceEntries,e.endReached=this.endReached,e.frontReached=this.frontReached,e}},{key:"CurrentVisibleVoiceEntries",value:function(t){var e=[];if(void 0===this.currentVoiceEntries)return e;if(void 0!==t){var n,i=u(this.currentVoiceEntries);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.ParentVoice.Parent.IdString===t.IdString)return this.getVisibleEntries(r,e),e}}catch(l){i.e(l)}finally{i.f()}}else{var o,s=u(this.currentVoiceEntries);try{for(s.s();!(o=s.n()).done;){var a=o.value;this.getVisibleEntries(a,e)}}catch(l){s.e(l)}finally{s.f()}}return e}},{key:"CurrentAudibleVoiceEntries",value:function(t){var e=[];if(void 0===this.currentVoiceEntries)return e;if(void 0!==t){var n,i=u(this.currentVoiceEntries);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.ParentVoice.Parent.IdString===t.IdString)return this.getAudibleEntries(r,e),e}}catch(l){i.e(l)}finally{i.f()}}else{var o,s=u(this.currentVoiceEntries);try{for(s.s();!(o=s.n()).done;){var a=o.value;this.getAudibleEntries(a,e)}}catch(l){s.e(l)}finally{s.f()}}return e}},{key:"getCurrentDynamicChangingExpressions",value:function(){return this.currentDynamicChangingExpressions}},{key:"CurrentScoreFollowingVoiceEntries",value:function(t){var e=[];if(void 0===this.currentVoiceEntries)return e;if(void 0!==t){var n,i=u(this.currentVoiceEntries);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.ParentVoice.Parent.IdString===t.IdString)return this.getScoreFollowingEntries(r,e),e}}catch(l){i.e(l)}finally{i.f()}}else{var o,s=u(this.currentVoiceEntries);try{for(s.s();!(o=s.n()).done;){var a=o.value;this.getScoreFollowingEntries(a,e)}}catch(l){s.e(l)}finally{s.f()}}return e}},{key:"moveToNext",value:function(){this.forwardJumpOccurred=this.backJumpOccurred=!1,this.endReached||(void 0!==this.currentVoiceEntries&&(this.currentVoiceEntries=[]),this.recursiveMove(),void 0===this.currentMeasure&&(this.currentTimeStamp=new i.Fraction(99999,1)))}},{key:"moveToNextVisibleVoiceEntry",value:function(t){for(;!this.endReached;)if(this.moveToNext(),this.checkEntries(t))return}},{key:"resetRepetitionIterationCount",value:function(t){return this.setRepetitionIterationCount(t,1),1}},{key:"incrementRepetitionIterationCount",value:function(t){return-1===this.repetitionIterationCountDictKeys.indexOf(t)?this.setRepetitionIterationCount(t,1):this.setRepetitionIterationCount(t,this.getRepetitionIterationCount(t)+1)}},{key:"setRepetitionIterationCount",value:function(t,e){var n=this.repetitionIterationCountDictKeys.indexOf(t);return-1===n?(this.repetitionIterationCountDictKeys.push(t),this.repetitionIterationCountDictValues.push(e)):this.repetitionIterationCountDictValues[n]=e,e}},{key:"getRepetitionIterationCount",value:function(t){var e=this.repetitionIterationCountDictKeys.indexOf(t);if(-1!==e)return this.repetitionIterationCountDictValues[e]}},{key:"handleRepetitionsAtMeasureBegin",value:function(){for(var t=0,e=this.currentMeasure.FirstRepetitionInstructions.length;t<e;++t){var n=this.currentMeasure.FirstRepetitionInstructions[t];if(void 0!==n.parentRepetition){var i=n.parentRepetition;this.currentRepetition=i,i.StartIndex===this.currentMeasureIndex&&void 0!==this.JumpResponsibleRepetition&&i!==this.JumpResponsibleRepetition&&i.StartIndex>=this.JumpResponsibleRepetition.StartIndex&&i.EndIndex<=this.JumpResponsibleRepetition.EndIndex&&this.resetRepetitionIterationCount(i)}}}},{key:"handleRepetitionsAtMeasureEnd",value:function(){for(var t=0,e=this.currentMeasure.LastRepetitionInstructions.length;t<e;++t){var n=this.currentMeasure.LastRepetitionInstructions[t],i=n.parentRepetition;if(void 0!==i){if(i.BackwardJumpInstructions.indexOf(n)>-1&&this.getRepetitionIterationCount(i)<i.UserNumberOfRepetitions)return this.doBackJump(i),void(this.backJumpOccurred=!0);if(n===i.forwardJumpInstruction){void 0!==this.JumpResponsibleRepetition&&i!==this.JumpResponsibleRepetition&&i.StartIndex>=this.JumpResponsibleRepetition.StartIndex&&i.EndIndex<=this.JumpResponsibleRepetition.EndIndex&&this.resetRepetitionIterationCount(i);var r=i.getForwardJumpTargetForIteration(this.getRepetitionIterationCount(i));if(r>=0)return this.currentMeasureIndex=r,this.currentMeasure=this.manager.MusicSheet.SourceMeasures[this.currentMeasureIndex],this.currentVoiceEntryIndex=-1,this.jumpResponsibleRepetition=i,void(this.forwardJumpOccurred=!0);-2===r&&(this.endReached=!0)}}}this.currentMeasureIndex++,void 0!==this.JumpResponsibleRepetition&&this.currentMeasureIndex>this.JumpResponsibleRepetition.EndIndex&&(this.jumpResponsibleRepetition=void 0)}},{key:"doBackJump",value:function(t){this.currentMeasureIndex=t.getBackwardJumpTarget(),this.currentMeasure=this.manager.MusicSheet.SourceMeasures[this.currentMeasureIndex],this.currentVoiceEntryIndex=-1,this.incrementRepetitionIterationCount(t),this.jumpResponsibleRepetition=t}},{key:"activateCurrentRhythmInstructions",value:function(){if(void 0!==this.currentMeasure&&this.currentMeasure.FirstInstructionsStaffEntries.length>0&&void 0!==this.currentMeasure.FirstInstructionsStaffEntries[0])for(var t=this.currentMeasure.FirstInstructionsStaffEntries[0].Instructions,e=0,n=t.length;e<n;++e){var i=t[e];i instanceof o.RhythmInstruction&&(this.manager.MusicSheet.SheetPlaybackSetting.rhythm=i.Rhythm)}}},{key:"activateCurrentDynamicOrTempoInstructions",value:function(){for(var t=this.manager.MusicSheet.TimestampSortedDynamicExpressionsList;this.currentDynamicEntryIndex>0&&(this.currentDynamicEntryIndex>=t.length||this.CurrentSourceTimestamp.lte(t[this.currentDynamicEntryIndex].parMultiExpression().AbsoluteTimestamp));)this.currentDynamicEntryIndex--;for(;this.currentDynamicEntryIndex<t.length&&t[this.currentDynamicEntryIndex].parMultiExpression().AbsoluteTimestamp.lt(this.CurrentSourceTimestamp);)this.currentDynamicEntryIndex++;for(;this.currentDynamicEntryIndex<t.length&&t[this.currentDynamicEntryIndex].parMultiExpression().AbsoluteTimestamp.Equals(this.CurrentSourceTimestamp);){var e=t[this.currentDynamicEntryIndex],n=e.staffNumber;this.CurrentSourceTimestamp.Equals(e.parMultiExpression().AbsoluteTimestamp)&&(void 0!==e.continuousDynamicExpression?this.activeDynamicExpressions[n]=e.continuousDynamicExpression:void 0!==e.instantaneousDynamicExpression&&(this.activeDynamicExpressions[n]=e.instantaneousDynamicExpression)),this.currentDynamicEntryIndex++}this.currentDynamicChangingExpressions=[];for(var i=0;i<this.activeDynamicExpressions.length;i++)if(void 0!==this.activeDynamicExpressions[i]){var o=void 0,a=void 0;if(this.activeDynamicExpressions[i]instanceof s.ContinuousDynamicExpression){var u=this.activeDynamicExpressions[i];o=u.StartMultiExpression.AbsoluteTimestamp,a=u.EndMultiExpression.AbsoluteTimestamp,o.lte(this.CurrentSourceTimestamp)&&this.CurrentSourceTimestamp.lte(a)&&this.currentDynamicChangingExpressions.push(new r.DynamicsContainer(u,i))}else{var l=this.activeDynamicExpressions[i];this.CurrentSourceTimestamp.Equals(l.ParentMultiExpression.AbsoluteTimestamp)&&this.currentDynamicChangingExpressions.push(new r.DynamicsContainer(l,i))}}for(var c=this.manager.MusicSheet.TimestampSortedTempoExpressionsList;this.currentTempoEntryIndex>0&&(this.currentTempoEntryIndex>=c.length||this.CurrentSourceTimestamp.lte(c[this.currentTempoEntryIndex].AbsoluteTimestamp));)this.currentTempoEntryIndex--;for(;this.currentTempoEntryIndex<c.length&&c[this.currentTempoEntryIndex].AbsoluteTimestamp.lt(this.CurrentSourceTimestamp);)this.currentTempoEntryIndex++;for(;this.currentTempoEntryIndex<c.length&&c[this.currentTempoEntryIndex].AbsoluteTimestamp.Equals(this.CurrentSourceTimestamp);)this.activeTempoExpression=c[this.currentTempoEntryIndex],this.currentTempoEntryIndex++;if(this.currentTempoChangingExpression=void 0,void 0!==this.activeTempoExpression){var h=this.activeTempoExpression.AbsoluteTimestamp;void 0!==this.activeTempoExpression.ContinuousTempo&&(h=this.activeTempoExpression.ContinuousTempo.AbsoluteEndTimestamp),(this.activeTempoExpression.AbsoluteTimestamp.lte(this.CurrentSourceTimestamp)||this.CurrentSourceTimestamp.lte(h))&&(this.currentTempoChangingExpression=this.activeTempoExpression)}}},{key:"recursiveMove",value:function(){if(this.currentVoiceEntryIndex++,0===this.currentVoiceEntryIndex&&(this.handleRepetitionsAtMeasureBegin(),this.activateCurrentRhythmInstructions()),this.currentVoiceEntryIndex>=0&&this.currentVoiceEntryIndex<this.currentMeasure.VerticalSourceStaffEntryContainers.length){var t=this.currentMeasure.VerticalSourceStaffEntryContainers[this.currentVoiceEntryIndex];this.currentVoiceEntries=this.getVoiceEntries(t),this.currentVerticalContainerInMeasureTimestamp=t.Timestamp,this.currentTimeStamp=i.Fraction.plus(this.currentMeasure.AbsoluteTimestamp,this.currentVerticalContainerInMeasureTimestamp);var e=this.manager.MusicSheet.SelectionEnd;return e&&this.currentTimeStamp.gte(e)&&(this.endReached=!0),void this.activateCurrentDynamicOrTempoInstructions()}if(this.currentEnrolledMeasureTimestamp.Add(this.currentMeasure.Duration),this.handleRepetitionsAtMeasureEnd(),this.currentMeasureIndex>=0&&this.currentMeasureIndex<this.manager.MusicSheet.SourceMeasures.length)return this.currentMeasure=this.manager.MusicSheet.SourceMeasures[this.currentMeasureIndex],this.currentTimeStamp=i.Fraction.plus(this.currentMeasure.AbsoluteTimestamp,this.currentVerticalContainerInMeasureTimestamp),this.currentVoiceEntryIndex=-1,void this.recursiveMove();this.currentVerticalContainerInMeasureTimestamp=new i.Fraction,this.currentMeasure=void 0,this.currentVoiceEntries=void 0,this.endReached=!0}},{key:"checkEntries",value:function(t){var e=this.CurrentVisibleVoiceEntries();if(e.length>0){if(!t)return!0;for(var n=0,i=e.length;n<i;++n)if(void 0!==e[n].Notes[0].Pitch)return!0}return!1}},{key:"getVisibleEntries",value:function(t,e){t.ParentVoice.Visible&&e.push(t)}},{key:"getAudibleEntries",value:function(t,e){t.ParentVoice.Audible&&e.push(t)}},{key:"getScoreFollowingEntries",value:function(t,e){t.ParentVoice.Following&&t.ParentVoice.Parent.Following&&e.push(t)}},{key:"getVoiceEntries",value:function(t){var e,n=[],i=u(t.StaffEntries);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(void 0!==r){var o,s=u(r.VoiceEntries);try{for(s.s();!(o=s.n()).done;){var a=o.value;n.push(a)}}catch(l){s.e(l)}finally{s.f()}}}}catch(l){i.e(l)}finally{i.f()}return n}},{key:"EndReached",get:function(){return this.endReached}},{key:"FrontReached",get:function(){return this.frontReached}},{key:"CurrentMeasure",get:function(){return this.currentMeasure}},{key:"CurrentRepetition",get:function(){return this.currentRepetition}},{key:"CurrentRepetitionIteration",get:function(){return void 0!==this.CurrentRepetition?this.getRepetitionIterationCount(this.CurrentRepetition):0}},{key:"CurrentJumpResponsibleRepetitionIterationBeforeJump",get:function(){return void 0!==this.jumpResponsibleRepetition?this.getRepetitionIterationCount(this.jumpResponsibleRepetition)-1:0}},{key:"CurrentVoiceEntries",get:function(){return this.currentVoiceEntries}},{key:"CurrentMeasureIndex",get:function(){return this.currentMeasureIndex}},{key:"CurrentEnrolledTimestamp",get:function(){return i.Fraction.plus(this.currentEnrolledMeasureTimestamp,this.currentVerticalContainerInMeasureTimestamp)}},{key:"CurrentSourceTimestamp",get:function(){return this.currentTimeStamp}},{key:"JumpOccurred",get:function(){return this.backJumpOccurred||this.forwardJumpOccurred}},{key:"ActiveTempoExpression",get:function(){return this.activeTempoExpression}},{key:"ActiveDynamicExpressions",get:function(){return this.activeDynamicExpressions}},{key:"CurrentTempoChangingExpression",get:function(){return this.currentTempoChangingExpression}},{key:"JumpResponsibleRepetition",get:function(){return this.jumpResponsibleRepetition}}]),t}();e.MusicPartManagerIterator=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(38),r=n(60);e.DynamicsContainer=function(){function t(e,n){h(this,t),e instanceof i.ContinuousDynamicExpression?this.continuousDynamicExpression=e:e instanceof r.InstantaneousDynamicExpression&&(this.instantaneousDynamicExpression=e),this.staffNumber=n}return d(t,[{key:"parMultiExpression",value:function(){return void 0!==this.continuousDynamicExpression?this.continuousDynamicExpression.StartMultiExpression:void 0!==this.instantaneousDynamicExpression?this.instantaneousDynamicExpression.ParentMultiExpression:void 0}},{key:"CompareTo",value:function(t){return this.parMultiExpression().AbsoluteTimestamp.CompareTo(t.parMultiExpression().AbsoluteTimestamp)}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MusicSheetErrors=function(){function t(){h(this,t),this.measureErrors={},this.errors=[],this.tempErrors=[]}return d(t,[{key:"finalizeMeasure",value:function(t){var e=this.measureErrors[t];void 0===e&&(e=[]),this.measureErrors[t]=e.concat(this.tempErrors),this.tempErrors=[]}},{key:"pushMeasureError",value:function(t){this.tempErrors.push(t)}},{key:"push",value:function(t){this.errors.push(t)}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LyricWord=function(){function t(){h(this,t),this.syllables=[]}return d(t,[{key:"containsVoiceEntry",value:function(t){for(var e=0,n=this.Syllables.length;e<n;++e)if(this.Syllables[e].Parent===t)return!0;return!1}},{key:"findLyricEntryInVoiceEntry",value:function(t){for(var e=0,n=this.Syllables.length;e<n;++e){var i=this.Syllables[e];if(i.Parent===t)return i}}},{key:"Syllables",get:function(){return this.syllables}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LyricsEntry=function(){function t(e,n,i,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;h(this,t),this.text=e,this.word=i,this.parent=r,this.verseNumber=n,o>=0&&(this.syllableIndex=o)}return d(t,[{key:"Text",get:function(){return this.text},set:function(t){this.text=t}},{key:"Word",get:function(){return this.word}},{key:"Parent",get:function(){return this.parent},set:function(t){this.parent=t}},{key:"VerseNumber",get:function(){return this.verseNumber}},{key:"SyllableIndex",get:function(){return this.syllableIndex}}]),t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(35);e.TabNote=function(t){n(i,t);var e=r(i);function i(t,n,r,o,s,a){var u;return h(this,i),(u=e.call(this,t,n,r,o)).stringNumber=s,u.fretNumber=a,u}return d(i,[{key:"StringNumber",get:function(){return this.stringNumber}},{key:"FretNumber",get:function(){return this.fretNumber}}]),i}(o.Note)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(72),o=n(7),s=n(46),a=n(73);e.MultiTempoExpression=function(){function t(e,n){h(this,t),this.expressions=[],this.sourceMeasure=e,this.timestamp=n}return d(t,[{key:"getPlacementOfFirstEntry",value:function(){var t=o.PlacementEnum.Above;return this.expressions.length>0&&(this.expressions[0].Expression instanceof r.InstantaneousTempoExpression||this.expressions[0].Expression instanceof a.ContinuousTempoExpression)&&(t=this.expressions[0].Expression.Placement),t}},{key:"getFontstyleOfFirstEntry",value:function(){var t=s.FontStyles.Regular;return this.expressions[0].Expression instanceof r.InstantaneousTempoExpression?t=s.FontStyles.Bold:this.expressions[0].Expression instanceof a.ContinuousTempoExpression&&(t=s.FontStyles.Italic),t}},{key:"addExpression",value:function(t,e){t instanceof r.InstantaneousTempoExpression?this.instantaneousTempo=t:t instanceof a.ContinuousTempoExpression&&(this.continuousTempo=t);var n=new u;n.prefix=e,n.Expression=t,n.label=t.Label,this.expressions.push(n)}},{key:"CompareTo",value:function(t){return this.Timestamp.RealValue>t.Timestamp.RealValue?1:this.Timestamp.RealValue<t.Timestamp.RealValue?-1:0}},{key:"Timestamp",get:function(){return this.timestamp}},{key:"AbsoluteTimestamp",get:function(){return i.Fraction.plus(this.sourceMeasure.AbsoluteTimestamp,this.timestamp)}},{key:"SourceMeasureParent",get:function(){return this.sourceMeasure},set:function(t){this.sourceMeasure=t}},{key:"InstantaneousTempo",get:function(){return this.instantaneousTempo}},{key:"ContinuousTempo",get:function(){return this.continuousTempo}},{key:"EntriesList",get:function(){return this.expressions}},{key:"CombinedExpressionsText",get:function(){return this.combinedExpressionsText},set:function(t){this.combinedExpressionsText=t}}]),t}();var u=function(){function t(){h(this,t)}return d(t,[{key:"Expression",get:function(){return this.expression},set:function(t){this.expression=t}}]),t}();e.TempoExpressionEntry=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(60),o=n(38),s=n(158),a=n(159),u=n(7);e.MultiExpression=function(){function t(e,n){h(this,t),this.unknownList=[],this.moodList=[],this.expressions=[],this.sourceMeasure=e,this.timestamp=n}return d(t,[{key:"getPlacementOfFirstEntry",value:function(){var t=u.PlacementEnum.Above;return this.expressions.length>0&&(this.expressions[0].expression instanceof r.InstantaneousDynamicExpression||this.expressions[0].expression instanceof o.ContinuousDynamicExpression||this.expressions[0].expression instanceof s.MoodExpression||this.expressions[0].expression instanceof a.UnknownExpression)&&(t=this.expressions[0].expression.Placement),t}},{key:"addExpression",value:function(t,e){t instanceof r.InstantaneousDynamicExpression?(void 0!==this.instantaneousDynamic&&this.removeExpressionFromEntryList(this.InstantaneousDynamic),this.instantaneousDynamic=t,this.instantaneousDynamic.ParentMultiExpression=this):t instanceof o.ContinuousDynamicExpression?this.startingContinuousDynamic=t:t instanceof s.MoodExpression?this.moodList.push(t):t instanceof a.UnknownExpression&&this.unknownList.push(t),this.addExpressionToEntryList(t,e)}},{key:"CompareTo",value:function(t){return this.Timestamp.RealValue>t.Timestamp.RealValue?1:this.Timestamp.RealValue<t.Timestamp.RealValue?-1:0}},{key:"addExpressionToEntryList",value:function(t,e){var n=new l;n.prefix=e,n.expression=t,n.label=t instanceof o.ContinuousDynamicExpression||t instanceof s.MoodExpression||t instanceof a.UnknownExpression?t.Label:"",this.expressions.push(n)}},{key:"removeExpressionFromEntryList",value:function(t){for(var e=0,n=this.expressions.length;e<n;++e)if(this.expressions[e].expression===t){this.expressions.splice(e,1);break}}},{key:"SourceMeasureParent",get:function(){return this.sourceMeasure},set:function(t){this.sourceMeasure=t}},{key:"StaffNumber",get:function(){return this.staffNumber},set:function(t){this.staffNumber=t}},{key:"Timestamp",get:function(){return this.timestamp},set:function(t){this.timestamp=t}},{key:"AbsoluteTimestamp",get:function(){return i.Fraction.plus(this.timestamp,this.sourceMeasure.AbsoluteTimestamp)}},{key:"InstantaneousDynamic",get:function(){return this.instantaneousDynamic},set:function(t){this.instantaneousDynamic=t}},{key:"EndingContinuousDynamic",get:function(){return this.endingContinuousDynamic},set:function(t){this.endingContinuousDynamic=t}},{key:"StartingContinuousDynamic",get:function(){return this.startingContinuousDynamic},set:function(t){this.startingContinuousDynamic=t}},{key:"MoodList",get:function(){return this.moodList}},{key:"UnknownList",get:function(){return this.unknownList}},{key:"EntriesList",get:function(){return this.expressions}},{key:"OctaveShiftStart",get:function(){return this.octaveShiftStart},set:function(t){this.octaveShiftStart=t}},{key:"OctaveShiftEnd",get:function(){return this.octaveShiftEnd},set:function(t){this.octaveShiftEnd=t}},{key:"CombinedExpressionsText",get:function(){return this.combinedExpressionsText},set:function(t){this.combinedExpressionsText=t}}]),t}();var l=function t(){h(this,t)};e.MultiExpressionEntry=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.Slur=function(){function t(){h(this,t)}return d(t,[{key:"startNoteHasMoreStartingSlurs",value:function(){if(void 0===this.startNote)return!1;for(var t=0,e=this.startNote.NoteSlurs.length;t<e;++t){var n=this.startNote.NoteSlurs[t];if(n!==this&&n.StartNote===this.startNote)return!0}return!1}},{key:"endNoteHasMoreEndingSlurs",value:function(){if(void 0===this.endNote)return!1;for(var t=0,e=this.endNote.NoteSlurs.length;t<e;++t){var n=this.endNote.NoteSlurs[t];if(n!==this&&n.EndNote===this.endNote)return!0}return!1}},{key:"isCrossed",value:function(){return this.startNote.ParentStaffEntry.ParentStaff!==this.endNote.ParentStaffEntry.ParentStaff}},{key:"isSlurLonger",value:function(){if(void 0===this.endNote||void 0===this.startNote)return!1;for(var t=i.Fraction.minus(this.endNote.getAbsoluteTimestamp(),this.startNote.getAbsoluteTimestamp()),e=0,n=this.startNote.NoteSlurs.length;e<n;++e){var r=this.startNote.NoteSlurs[e];if(r!==this&&void 0!==r.EndNote&&void 0!==r.StartNote&&-1===i.Fraction.minus(r.EndNote.getAbsoluteTimestamp(),r.StartNote.getAbsoluteTimestamp()).CompareTo(t))return!0}for(var o=0,s=this.endNote.NoteSlurs.length;o<s;++o){var a=this.endNote.NoteSlurs[o];if(a!==this&&void 0!==a.EndNote&&void 0!==a.StartNote&&i.Fraction.minus(a.EndNote.getAbsoluteTimestamp(),a.StartNote.getAbsoluteTimestamp()).CompareTo(t))return!0}return!1}},{key:"StartNote",get:function(){return this.startNote},set:function(t){this.startNote=t}},{key:"EndNote",get:function(){return this.endNote},set:function(t){this.endNote=t}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringUtil=function(){function t(){h(this,t)}return d(t,null,[{key:"StringContainsSeparatedWord",value:function(t,e){return!!new RegExp("( |^)"+e+"([ .]|$)").test(t)}}]),t}()},function(t,e,n){"use strict";function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var t=new i;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}(i.prototype=n(222)).loadAsync=n(253),i.support=n(26),i.defaults=n(174),i.version="3.2.0",i.loadAsync=function(t,e){return(new i).loadAsync(t,e)},i.external=n(49),t.exports=i},function(t,e,n){"use strict";var i=n(39),r=n(3),o=n(12),s=n(173),a=n(174),u=n(94),l=n(239),c=n(240),h=n(63),f=n(252),d=function(t,e,n){var i,s,c=r.getTypeOf(e),d=r.extend(n||{},a);d.date=d.date||new Date,null!==d.compression&&(d.compression=d.compression.toUpperCase()),"string"==typeof d.unixPermissions&&(d.unixPermissions=parseInt(d.unixPermissions,8)),d.unixPermissions&&16384&d.unixPermissions&&(d.dir=!0),d.dosPermissions&&16&d.dosPermissions&&(d.dir=!0),d.dir&&(t=m(t)),d.createFolders&&(i=p(t))&&b.call(this,i,!0),n&&void 0!==n.binary||(d.binary=!("string"===c&&!1===d.binary&&!1===d.base64)),(e instanceof u&&0===e.uncompressedSize||d.dir||!e||0===e.length)&&(d.base64=!1,d.binary=!0,e="",d.compression="STORE",c="string"),s=e instanceof u||e instanceof o?e:h.isNode&&h.isStream(e)?new f(t,e):r.prepareContent(t,e,d.binary,d.optimizedBinaryString,d.base64);var v=new l(t,s,d);this.files[t]=v},p=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},m=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},b=function(t,e){return e=void 0!==e?e:a.createFolders,t=m(t),this.files[t]||d.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function v(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,n,i;for(e in this.files)this.files.hasOwnProperty(e)&&(i=this.files[e],(n=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(n,i))},filter:function(t){var e=[];return this.forEach((function(n,i){t(n,i)&&e.push(i)})),e},file:function(t,e,n){if(1===arguments.length){if(v(t)){var i=t;return this.filter((function(t,e){return!e.dir&&i.test(t)}))}var r=this.files[this.root+t];return r&&!r.dir?r:null}return d.call(this,t=this.root+t,e,n),this},folder:function(t){if(!t)return this;if(v(t))return this.filter((function(e,n){return n.dir&&t.test(e)}));var e=b.call(this,this.root+t),n=this.clone();return n.root=e.name,n},remove:function(t){var e=this.files[t=this.root+t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var n=this.filter((function(e,n){return n.name.slice(0,t.length)===t})),i=0;i<n.length;i++)delete this.files[n[i].name];return this},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,n={};try{if((n=r.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");r.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS"),e=c.generateWorker(this,n,n.comment||this.comment||"")}catch(t){(e=new o("error")).error(t)}return new s(e,n.type||"string",n.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};t.exports=y},function(t,e,n){"use strict";e.byteLength=function(t){var e=l(t),n=e[1];return 3*(e[0]+n)/4-n},e.toByteArray=function(t){var e,n,i=l(t),s=i[0],a=i[1],u=new o(function(t,e,n){return 3*(e+n)/4-n}(0,s,a)),c=0,h=a>0?s-4:s;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],u[c++]=e>>16&255,u[c++]=e>>8&255,u[c++]=255&e;return 2===a&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,u[c++]=255&e),1===a&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,u[c++]=e>>8&255,u[c++]=255&e),u},e.fromByteArray=function(t){for(var e,n=t.length,r=n%3,o=[],s=0,a=n-r;s<a;s+=16383)o.push(c(t,s,s+16383>a?a:s+16383));return 1===r?o.push(i[(e=t[n-1])>>2]+i[e<<4&63]+"=="):2===r&&o.push(i[(e=(t[n-2]<<8)+t[n-1])>>10]+i[e>>4&63]+i[e<<2&63]+"="),o.join("")};for(var i=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)i[a]=s[a],r[s.charCodeAt(a)]=a;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var r,o=[],s=e;s<n;s+=3)o.push(i[(r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]))>>18&63]+i[r>>12&63]+i[r>>6&63]+i[63&r]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,i,r){var o,s,a=8*r-i-1,u=(1<<a)-1,l=u>>1,c=-7,h=n?r-1:0,f=n?-1:1,d=t[e+h];for(h+=f,o=d&(1<<-c)-1,d>>=-c,c+=a;c>0;o=256*o+t[e+h],h+=f,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=i;c>0;s=256*s+t[e+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,i),o-=l}return(d?-1:1)*s*Math.pow(2,o-i)},e.write=function(t,e,n,i,r,o){var s,a,u,l=8*o-r-1,c=(1<<l)-1,h=c>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:o-1,p=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*u-1)*Math.pow(2,r),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),s=0));r>=8;t[n+d]=255&a,d+=p,a/=256,r-=8);for(s=s<<r|a,l+=r;l>0;t[n+d]=255&s,d+=p,s/=256,l-=8);t[n+d-p]|=128*m}},function(t,e,n){var i=function(){try{return n(61)}catch(t){}}();(e=t.exports=n(168)).Stream=i||e,e.Readable=e,e.Writable=n(92),e.Duplex=n(33),e.Transform=n(93),e.PassThrough=n(171)},function(t,e){},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var i,r,o,s,a,u=1,l={},c=!1,h=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?i=function(t){e.nextTick((function(){p(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?(s="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&p(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),i=function(e){t.postMessage(s+e,"*")}):t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},i=function(t){o.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(r=h.documentElement,i=function(t){var e=h.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):i=function(t){setTimeout(p,0,t)},f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];return l[u]={callback:t,args:e},i(u),u++},f.clearImmediate=d}function d(t){delete l[t]}function p(t){if(c)setTimeout(p,0,t);else{var e=l[t];if(e){c=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{d(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(28),n(41))},function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var i=!1;return function(){if(!i){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),i=!0}return t.apply(this,arguments)}}}).call(this,n(28))},function(t,e,n){var i=n(21),r=i.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return r(t,e,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=i:(o(i,e),e.Buffer=s),s.prototype=Object.create(r.prototype),o(r,s),s.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return r(t,e,n)},s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=r(t);return void 0!==e?"string"==typeof n?i.fill(e,n):i.fill(e):i.fill(0),i},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i.SlowBuffer(t)}},function(t,e,n){t.exports=n(92)},function(t,e,n){t.exports=n(33)},function(t,e,n){t.exports=n(93)},function(t,e,n){t.exports=n(171)},function(t,e,n){"use strict";(function(e){t.exports="function"==typeof e?e:function(){var t=[].slice.apply(arguments);t.splice(1,0,0),setTimeout.apply(null,t)}}).call(this,n(169).setImmediate)},function(t,e,n){"use strict";var i=n(236);function r(){}var o={},s=["REJECTED"],a=["FULFILLED"],u=["PENDING"];function l(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,t!==r&&d(this,t)}function c(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(t,e,n){i((function(){var i;try{i=e(n)}catch(e){return o.reject(t,e)}i===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,i)}))}function f(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function d(t,e){var n=!1;function i(e){n||(n=!0,o.reject(t,e))}function r(e){n||(n=!0,o.resolve(t,e))}var s=p((function(){e(r,i)}));"error"===s.status&&i(s.value)}function p(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}t.exports=l,l.prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){throw n}))}))},l.prototype.catch=function(t){return this.then(null,t)},l.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===s)return this;var n=new this.constructor(r);return this.state!==u?h(n,this.state===a?t:e,this.outcome):this.queue.push(new c(n,t,e)),n},c.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},c.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},c.prototype.callRejected=function(t){o.reject(this.promise,t)},c.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},o.resolve=function(t,e){var n=p(f,e);if("error"===n.status)return o.reject(t,n.value);var i=n.value;if(i)d(t,i);else{t.state=a,t.outcome=e;for(var r=-1,s=t.queue.length;++r<s;)t.queue[r].callFulfilled(e)}return t},o.reject=function(t,e){t.state=s,t.outcome=e;for(var n=-1,i=t.queue.length;++n<i;)t.queue[n].callRejected(e);return t},l.resolve=function(t){return t instanceof this?t:o.resolve(new this(r),t)},l.reject=function(t){var e=new this(r);return o.reject(e,t)},l.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,u=-1,l=new this(r);++u<n;)c(t[u],u);return l;function c(t,r){e.resolve(t).then((function(t){s[r]=t,++a!==n||i||(i=!0,o.resolve(l,s))}),(function(t){i||(i=!0,o.reject(l,t))}))}},l.race=function(t){if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var e=t.length,n=!1;if(!e)return this.resolve([]);for(var i=-1,s=new this(r);++i<e;)this.resolve(t[i]).then((function(t){n||(n=!0,o.resolve(s,t))}),(function(t){n||(n=!0,o.reject(s,t))}));return s}},function(t,e,n){"use strict";(function(e){var n,i,r=e.MutationObserver||e.WebKitMutationObserver;if(r){var o=0,s=new r(c),a=e.document.createTextNode("");s.observe(a,{characterData:!0}),n=function(){a.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){c(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(c,0)};else{var u=new e.MessageChannel;u.port1.onmessage=c,n=function(){u.port2.postMessage(0)}}var l=[];function c(){var t,e;i=!0;for(var n=l.length;n;){for(e=l,l=[],t=-1;++t<n;)e[t]();n=l.length}i=!1}t.exports=function(t){1!==l.push(t)||i||n()}}).call(this,n(28))},function(t,e,n){"use strict";var i=n(12),r=n(3);function o(t){i.call(this,"ConvertWorker to "+t),this.destType=t}r.inherits(o,i),o.prototype.processChunk=function(t){this.push({data:r.transformTo(this.destType,t.data),meta:t.meta})},t.exports=o},function(t,e,n){"use strict";var i=n(167).Readable;function r(t,e,n){i.call(this,e),this._helper=t;var r=this;t.on("data",(function(t,e){r.push(t)||r._helper.pause(),n&&n(e)})).on("error",(function(t){r.emit("error",t)})).on("end",(function(){r.push(null)}))}n(3).inherits(r,i),r.prototype._read=function(){this._helper.resume()},t.exports=r},function(t,e,n){"use strict";var i=n(173),r=n(175),o=n(39),s=n(94),a=n(12),u=function(t,e,n){this.name=t,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=e,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}};u.prototype={internalStream:function(t){var e=null,n="string";try{if(!t)throw new Error("No output type specified.");var r="string"===(n=t.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),e=this._decompressWorker();var s=!this._dataBinary;s&&!r&&(e=e.pipe(new o.Utf8EncodeWorker)),!s&&r&&(e=e.pipe(new o.Utf8DecodeWorker))}catch(t){(e=new a("error")).error(t)}return new i(e,n,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof s&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new o.Utf8EncodeWorker)),s.createWorkerFrom(n,t,e)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof a?this._data:new r(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<l.length;h++)u.prototype[l[h]]=c;t.exports=u},function(t,e,n){"use strict";var i=n(178),r=n(251);e.generateWorker=function(t,e,n){var o=new r(e.streamFiles,n,e.platform,e.encodeFileName),s=0;try{t.forEach((function(t,n){s++;var r=function(t,e){var n=t||e,r=i[n];if(!r)throw new Error(n+" is not a valid compression method !");return r}(n.options.compression,e.compression),a=n.dir,u=n.date;n._compressWorker(r,n.options.compressionOptions||e.compressionOptions||{}).withStreamInfo("file",{name:t,dir:a,date:u,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(o)})),o.entriesCount=s}catch(t){o.error(t)}return o}},function(t,e,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,r=n(242),o=n(3),s=n(12),a=i?"uint8array":"array";function u(t,e){s.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}e.magic="\b\0",o.inherits(u,s),u.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(a,t.data),!1)},u.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},e.compressWorker=function(t){return new u("Deflate",t)},e.uncompressWorker=function(){return new u("Inflate",{})}},function(t,e,n){"use strict";var i={};(0,n(27).assign)(i,n(243),n(246),n(183)),t.exports=i},function(t,e,n){"use strict";var i=n(244),r=n(27),o=n(181),s=n(96),a=n(182),u=Object.prototype.toString;function l(t){if(!(this instanceof l))return new l(t);this.options=r.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var n=i.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==n)throw new Error(s[n]);if(e.header&&i.deflateSetHeader(this.strm,e.header),e.dictionary){var c;if(c="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(n=i.deflateSetDictionary(this.strm,c)))throw new Error(s[n]);this._dict_set=!0}}function c(t,e){var n=new l(e);if(n.push(t,!0),n.err)throw n.msg||s[n.err];return n.result}l.prototype.push=function(t,e){var n,s,a=this.strm,l=this.options.chunkSize;if(this.ended)return!1;s=e===~~e?e:!0===e?4:0,a.input="string"==typeof t?o.string2buf(t):"[object ArrayBuffer]"===u.call(t)?new Uint8Array(t):t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new r.Buf8(l),a.next_out=0,a.avail_out=l),1!==(n=i.deflate(a,s))&&0!==n)return this.onEnd(n),this.ended=!0,!1;0!==a.avail_out&&(0!==a.avail_in||4!==s&&2!==s)||this.onData("string"===this.options.to?o.buf2binstring(r.shrinkBuf(a.output,a.next_out)):r.shrinkBuf(a.output,a.next_out))}while((a.avail_in>0||0===a.avail_out)&&1!==n);return 4===s?(n=i.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==s||(this.onEnd(0),a.avail_out=0,!0)},l.prototype.onData=function(t){this.chunks.push(t)},l.prototype.onEnd=function(t){0===t&&(this.result="string"===this.options.to?this.chunks.join(""):r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=l,e.deflate=c,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,c(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,c(t,e)}},function(t,e,n){"use strict";var i,r=n(27),o=n(245),s=n(179),a=n(180),u=n(96);function l(t,e){return t.msg=u[e],e}function c(t){return(t<<1)-(t>4?9:0)}function h(t){for(var e=t.length;--e>=0;)t[e]=0}function f(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(r.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function d(t,e){o._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,f(t.strm)}function p(t,e){t.pending_buf[t.pending++]=e}function m(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function b(t,e){var n,i,r=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,u=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,l=t.window,c=t.w_mask,h=t.prev,f=t.strstart+258,d=l[o+s-1],p=l[o+s];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do{if(l[(n=e)+s]===p&&l[n+s-1]===d&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do{}while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&o<f);if(i=258-(f-o),o=f-258,i>s){if(t.match_start=e,s=i,i>=a)break;d=l[o+s-1],p=l[o+s]}}}while((e=h[e&c])>u&&0!=--r);return s<=t.lookahead?s:t.lookahead}function v(t){var e,n,i,o,u,l,c,h,f,d,p=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=p+(p-262)){r.arraySet(t.window,t.window,p,p,0),t.match_start-=p,t.strstart-=p,t.block_start-=p,e=n=t.hash_size;do{i=t.head[--e],t.head[e]=i>=p?i-p:0}while(--n);e=n=p;do{i=t.prev[--e],t.prev[e]=i>=p?i-p:0}while(--n);o+=p}if(0===t.strm.avail_in)break;if(c=t.window,h=t.strstart+t.lookahead,d=void 0,(d=(l=t.strm).avail_in)>(f=o)&&(d=f),n=0===d?0:(l.avail_in-=d,r.arraySet(c,l.input,l.next_in,d,h),1===l.state.wrap?l.adler=s(l.adler,c,d,h):2===l.state.wrap&&(l.adler=a(l.adler,c,d,h)),l.next_in+=d,l.total_in+=d,d),t.lookahead+=n,t.lookahead+t.insert>=3)for(t.ins_h=t.window[u=t.strstart-t.insert],t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+3-1])&t.hash_mask,t.prev[u&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=u,u++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)}function y(t,e){for(var n,i;;){if(t.lookahead<262){if(v(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-262&&(t.match_length=b(t,n)),t.match_length>=3)if(i=o._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}function g(t,e){for(var n,i,r;;){if(t.lookahead<262){if(v(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-262&&(t.match_length=b(t,n),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,i=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,i&&(d(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((i=o._tr_tally(t,0,t.window[t.strstart-1]))&&d(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}function S(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}function w(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(1146),this.dyn_dtree=new r.Buf16(122),this.bl_tree=new r.Buf16(78),h(this.dyn_ltree),h(this.dyn_dtree),h(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(16),this.heap=new r.Buf16(573),h(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(573),h(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function _(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=0,o._tr_init(e),0):l(t,-2)}function x(t){var e,n=_(t);return 0===n&&((e=t.state).window_size=2*e.w_size,h(e.head),e.max_lazy_match=i[e.level].max_lazy,e.good_match=i[e.level].good_length,e.nice_match=i[e.level].nice_length,e.max_chain_length=i[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),n}function k(t,e,n,i,o,s){if(!t)return-2;var a=1;if(-1===e&&(e=6),i<0?(a=0,i=-i):i>15&&(a=2,i-=16),o<1||o>9||8!==n||i<8||i>15||e<0||e>9||s<0||s>4)return l(t,-2);8===i&&(i=9);var u=new w;return t.state=u,u.strm=t,u.wrap=a,u.gzhead=null,u.w_bits=i,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=new r.Buf8(2*u.w_size),u.head=new r.Buf16(u.hash_size),u.prev=new r.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new r.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=s,u.method=n,x(t)}i=[new S(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(v(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,d(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(d(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&d(t,!1),1)})),new S(4,4,8,4,y),new S(4,5,16,8,y),new S(4,6,32,32,y),new S(4,4,16,16,g),new S(8,16,32,32,g),new S(8,16,128,128,g),new S(8,32,128,256,g),new S(32,128,258,1024,g),new S(32,258,258,4096,g)],e.deflateInit=function(t,e){return k(t,e,8,15,8,0)},e.deflateInit2=k,e.deflateReset=x,e.deflateResetKeep=_,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?-2:(t.state.gzhead=e,0):-2},e.deflate=function(t,e){var n,r,s,u;if(!t||!t.state||e>5||e<0)return t?l(t,-2):-2;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||666===r.status&&4!==e)return l(t,0===t.avail_out?-5:-2);if(r.strm=t,n=r.last_flush,r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,p(r,31),p(r,139),p(r,8),r.gzhead?(p(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),p(r,255&r.gzhead.time),p(r,r.gzhead.time>>8&255),p(r,r.gzhead.time>>16&255),p(r,r.gzhead.time>>24&255),p(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),p(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(p(r,255&r.gzhead.extra.length),p(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=a(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(p(r,0),p(r,0),p(r,0),p(r,0),p(r,0),p(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),p(r,3),r.status=113);else{var b=8+(r.w_bits-8<<4)<<8;b|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(b|=32),b+=31-b%31,r.status=113,m(r,b),0!==r.strstart&&(m(r,t.adler>>>16),m(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(s=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),f(t),s=r.pending,r.pending!==r.pending_buf_size));)p(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),f(t),s=r.pending,r.pending===r.pending_buf_size)){u=1;break}u=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,p(r,u)}while(0!==u);r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),0===u&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),f(t),s=r.pending,r.pending===r.pending_buf_size)){u=1;break}u=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,p(r,u)}while(0!==u);r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),0===u&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&f(t),r.pending+2<=r.pending_buf_size&&(p(r,255&t.adler),p(r,t.adler>>8&255),t.adler=0,r.status=113)):r.status=113),0!==r.pending){if(f(t),0===t.avail_out)return r.last_flush=-1,0}else if(0===t.avail_in&&c(e)<=c(n)&&4!==e)return l(t,-5);if(666===r.status&&0!==t.avail_in)return l(t,-5);if(0!==t.avail_in||0!==r.lookahead||0!==e&&666!==r.status){var y=2===r.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(v(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}(r,e):3===r.strategy?function(t,e){for(var n,i,r,s,a=t.window;;){if(t.lookahead<=258){if(v(t),t.lookahead<=258&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(i=a[r=t.strstart-1])===a[++r]&&i===a[++r]&&i===a[++r]){s=t.strstart+258;do{}while(i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&r<s);t.match_length=258-(s-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=o._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}(r,e):i[r.level].func(r,e);if(3!==y&&4!==y||(r.status=666),1===y||3===y)return 0===t.avail_out&&(r.last_flush=-1),0;if(2===y&&(1===e?o._tr_align(r):5!==e&&(o._tr_stored_block(r,0,0,!1),3===e&&(h(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),f(t),0===t.avail_out))return r.last_flush=-1,0}return 4!==e?0:r.wrap<=0?1:(2===r.wrap?(p(r,255&t.adler),p(r,t.adler>>8&255),p(r,t.adler>>16&255),p(r,t.adler>>24&255),p(r,255&t.total_in),p(r,t.total_in>>8&255),p(r,t.total_in>>16&255),p(r,t.total_in>>24&255)):(m(r,t.adler>>>16),m(r,65535&t.adler)),f(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?0:1)},e.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?l(t,-2):(t.state=null,113===e?l(t,-3):0):-2},e.deflateSetDictionary=function(t,e){var n,i,o,a,u,l,c,f,d=e.length;if(!t||!t.state)return-2;if(2===(a=(n=t.state).wrap)||1===a&&42!==n.status||n.lookahead)return-2;for(1===a&&(t.adler=s(t.adler,e,d,0)),n.wrap=0,d>=n.w_size&&(0===a&&(h(n.head),n.strstart=0,n.block_start=0,n.insert=0),f=new r.Buf8(n.w_size),r.arraySet(f,e,d-n.w_size,n.w_size,0),e=f,d=n.w_size),u=t.avail_in,l=t.next_in,c=t.input,t.avail_in=d,t.next_in=0,t.input=e,v(n);n.lookahead>=3;){i=n.strstart,o=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+3-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++}while(--o);n.strstart=i,n.lookahead=2,v(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=l,t.input=c,t.avail_in=u,n.wrap=a,0},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,n){"use strict";var i=n(27);function r(t){for(var e=t.length;--e>=0;)t[e]=0}var o=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],s=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],u=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],l=new Array(576);r(l);var c=new Array(60);r(c);var h=new Array(512);r(h);var f=new Array(256);r(f);var d=new Array(29);r(d);var p,m,b,v=new Array(30);function y(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}function g(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function S(t){return t<256?h[t]:h[256+(t>>>7)]}function w(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function _(t,e,n){t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,w(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function x(t,e,n){_(t,n[2*e],n[2*e+1])}function k(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function E(t,e,n){var i,r,o=new Array(16),s=0;for(i=1;i<=15;i++)o[i]=s=s+n[i-1]<<1;for(r=0;r<=e;r++){var a=t[2*r+1];0!==a&&(t[2*r]=k(o[a]++,a))}}function P(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function A(t){t.bi_valid>8?w(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function L(t,e,n,i){var r=2*e,o=2*n;return t[r]<t[o]||t[r]===t[o]&&i[e]<=i[n]}function T(t,e,n){for(var i=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&L(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!L(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i}function M(t,e,n){var i,r,a,u,l=0;if(0!==t.last_lit)do{i=t.pending_buf[t.d_buf+2*l]<<8|t.pending_buf[t.d_buf+2*l+1],r=t.pending_buf[t.l_buf+l],l++,0===i?x(t,r,e):(x(t,(a=f[r])+256+1,e),0!==(u=o[a])&&_(t,r-=d[a],u),x(t,a=S(--i),n),0!==(u=s[a])&&_(t,i-=v[a],u))}while(l<t.last_lit);x(t,256,e)}function C(t,e){var n,i,r,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,u=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<u;n++)0!==o[2*n]?(t.heap[++t.heap_len]=l=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(r=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[r]=0,t.opt_len--,a&&(t.static_len-=s[2*r+1]);for(e.max_code=l,n=t.heap_len>>1;n>=1;n--)T(t,o,n);r=u;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],T(t,o,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,o[2*r]=o[2*n]+o[2*i],t.depth[r]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,o[2*n+1]=o[2*i+1]=r,t.heap[1]=r++,T(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,i,r,o,s,a,u=e.dyn_tree,l=e.max_code,c=e.stat_desc.static_tree,h=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,p=e.stat_desc.max_length,m=0;for(o=0;o<=15;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)(o=u[2*u[2*(i=t.heap[n])+1]+1]+1)>p&&(o=p,m++),u[2*i+1]=o,i>l||(t.bl_count[o]++,s=0,i>=d&&(s=f[i-d]),t.opt_len+=(a=u[2*i])*(o+s),h&&(t.static_len+=a*(c[2*i+1]+s)));if(0!==m){do{for(o=p-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[p]--,m-=2}while(m>0);for(o=p;0!==o;o--)for(i=t.bl_count[o];0!==i;)(r=t.heap[--n])>l||(u[2*r+1]!==o&&(t.opt_len+=(o-u[2*r+1])*u[2*r],u[2*r+1]=o),i--)}}(t,e),E(o,l,t.bl_count)}function N(t,e,n){var i,r,o=-1,s=e[1],a=0,u=7,l=4;for(0===s&&(u=138,l=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)r=s,s=e[2*(i+1)+1],++a<u&&r===s||(a<l?t.bl_tree[2*r]+=a:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,o=r,0===s?(u=138,l=3):r===s?(u=6,l=3):(u=7,l=4))}function I(t,e,n){var i,r,o=-1,s=e[1],a=0,u=7,l=4;for(0===s&&(u=138,l=3),i=0;i<=n;i++)if(r=s,s=e[2*(i+1)+1],!(++a<u&&r===s)){if(a<l)do{x(t,r,t.bl_tree)}while(0!=--a);else 0!==r?(r!==o&&(x(t,r,t.bl_tree),a--),x(t,16,t.bl_tree),_(t,a-3,2)):a<=10?(x(t,17,t.bl_tree),_(t,a-3,3)):(x(t,18,t.bl_tree),_(t,a-11,7));a=0,o=r,0===s?(u=138,l=3):r===s?(u=6,l=3):(u=7,l=4)}}r(v);var R=!1;function O(t,e,n,r){_(t,0+(r?1:0),3),function(t,e,n,r){A(t),w(t,n),w(t,~n),i.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n)}e._tr_init=function(t){R||(function(){var t,e,n,i,r,u=new Array(16);for(n=0,i=0;i<28;i++)for(d[i]=n,t=0;t<1<<o[i];t++)f[n++]=i;for(f[n-1]=i,r=0,i=0;i<16;i++)for(v[i]=r,t=0;t<1<<s[i];t++)h[r++]=i;for(r>>=7;i<30;i++)for(v[i]=r<<7,t=0;t<1<<s[i]-7;t++)h[256+r++]=i;for(e=0;e<=15;e++)u[e]=0;for(t=0;t<=143;)l[2*t+1]=8,t++,u[8]++;for(;t<=255;)l[2*t+1]=9,t++,u[9]++;for(;t<=279;)l[2*t+1]=7,t++,u[7]++;for(;t<=287;)l[2*t+1]=8,t++,u[8]++;for(E(l,287,u),t=0;t<30;t++)c[2*t+1]=5,c[2*t]=k(t,5);p=new y(l,o,257,286,15),m=new y(c,s,0,30,15),b=new y(new Array(0),a,0,19,7)}(),R=!0),t.l_desc=new g(t.dyn_ltree,p),t.d_desc=new g(t.dyn_dtree,m),t.bl_desc=new g(t.bl_tree,b),t.bi_buf=0,t.bi_valid=0,P(t)},e._tr_stored_block=O,e._tr_flush_block=function(t,e,n,i){var r,o,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),C(t,t.l_desc),C(t,t.d_desc),s=function(t){var e;for(N(t,t.dyn_ltree,t.l_desc.max_code),N(t,t.dyn_dtree,t.d_desc.max_code),C(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*u[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),(o=t.static_len+3+7>>>3)<=(r=t.opt_len+3+7>>>3)&&(r=o)):r=o=n+5,n+4<=r&&-1!==e?O(t,e,n,i):4===t.strategy||o===r?(_(t,2+(i?1:0),3),M(t,l,c)):(_(t,4+(i?1:0),3),function(t,e,n,i){var r;for(_(t,e-257,5),_(t,n-1,5),_(t,i-4,4),r=0;r<i;r++)_(t,t.bl_tree[2*u[r]+1],3);I(t,t.dyn_ltree,e-1),I(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),M(t,t.dyn_ltree,t.dyn_dtree)),P(t),i&&A(t)},e._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(f[n]+256+1)]++,t.dyn_dtree[2*S(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){_(t,2,3),x(t,256,l),function(t){16===t.bi_valid?(w(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,n){"use strict";var i=n(247),r=n(27),o=n(181),s=n(183),a=n(96),u=n(182),l=n(250),c=Object.prototype.toString;function h(t){if(!(this instanceof h))return new h(t);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=i.inflateInit2(this.strm,e.windowBits);if(n!==s.Z_OK)throw new Error(a[n]);if(this.header=new l,i.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=o.string2buf(e.dictionary):"[object ArrayBuffer]"===c.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=i.inflateSetDictionary(this.strm,e.dictionary))!==s.Z_OK))throw new Error(a[n])}function f(t,e){var n=new h(e);if(n.push(t,!0),n.err)throw n.msg||a[n.err];return n.result}h.prototype.push=function(t,e){var n,a,u,l,h,f=this.strm,d=this.options.chunkSize,p=this.options.dictionary,m=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?s.Z_FINISH:s.Z_NO_FLUSH,f.input="string"==typeof t?o.binstring2buf(t):"[object ArrayBuffer]"===c.call(t)?new Uint8Array(t):t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new r.Buf8(d),f.next_out=0,f.avail_out=d),(n=i.inflate(f,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&p&&(n=i.inflateSetDictionary(this.strm,p)),n===s.Z_BUF_ERROR&&!0===m&&(n=s.Z_OK,m=!1),n!==s.Z_STREAM_END&&n!==s.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&n!==s.Z_STREAM_END&&(0!==f.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(u=o.utf8border(f.output,f.next_out),l=f.next_out-u,h=o.buf2string(f.output,u),f.next_out=l,f.avail_out=d-l,l&&r.arraySet(f.output,f.output,u,l,0),this.onData(h)):this.onData(r.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(m=!0)}while((f.avail_in>0||0===f.avail_out)&&n!==s.Z_STREAM_END);return n===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(n=i.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),f.avail_out=0,!0)},h.prototype.onData=function(t){this.chunks.push(t)},h.prototype.onEnd=function(t){t===s.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=h,e.inflate=f,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},e.ungzip=f},function(t,e,n){"use strict";var i=n(27),r=n(179),o=n(180),s=n(248),a=n(249);function u(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function l(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function c(t){var e;return t&&t.state?(t.total_in=t.total_out=(e=t.state).total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new i.Buf32(852),e.distcode=e.distdyn=new i.Buf32(592),e.sane=1,e.back=-1,0):-2}function h(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,c(t)):-2}function f(t,e){var n,i;return t&&t.state?(i=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?-2:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,h(t))):-2}function d(t,e){var n,i;return t?(i=new l,t.state=i,i.window=null,0!==(n=f(t,e))&&(t.state=null),n):-2}var p,m,b=!0;function v(t){if(b){var e;for(p=new i.Buf32(512),m=new i.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(1,t.lens,0,288,p,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(2,t.lens,0,32,m,0,t.work,{bits:5}),b=!1}t.lencode=p,t.lenbits=9,t.distcode=m,t.distbits=5}function y(t,e,n,r){var o,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new i.Buf8(s.wsize)),r>=s.wsize?(i.arraySet(s.window,e,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((o=s.wsize-s.wnext)>r&&(o=r),i.arraySet(s.window,e,n-r,o,s.wnext),(r-=o)?(i.arraySet(s.window,e,n-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}e.inflateReset=h,e.inflateReset2=f,e.inflateResetKeep=c,e.inflateInit=function(t){return d(t,15)},e.inflateInit2=d,e.inflate=function(t,e){var n,l,c,h,f,d,p,m,b,g,S,w,_,x,k,E,P,A,L,T,M,C,N,I,R=0,O=new i.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return-2;12===(n=t.state).mode&&(n.mode=13),f=t.next_out,c=t.output,h=t.next_in,l=t.input,m=n.hold,b=n.bits,g=d=t.avail_in,S=p=t.avail_out,C=0;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;b<16;){if(0===d)break t;d--,m+=l[h++]<<b,b+=8}if(2&n.wrap&&35615===m){n.check=0,O[0]=255&m,O[1]=m>>>8&255,n.check=o(n.check,O,2,0),m=0,b=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&m)<<8)+(m>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!=(15&m)){t.msg="unknown compression method",n.mode=30;break}if(b-=4,M=8+(15&(m>>>=4)),0===n.wbits)n.wbits=M;else if(M>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<M,t.adler=n.check=1,n.mode=512&m?10:12,m=0,b=0;break;case 2:for(;b<16;){if(0===d)break t;d--,m+=l[h++]<<b,b+=8}if(n.flags=m,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=m>>8&1),512&n.flags&&(O[0]=255&m,O[1]=m>>>8&255,n.check=o(n.check,O,2,0)),m=0,b=0,n.mode=3;case 3:for(;b<32;){if(0===d)break t;d--,m+=l[h++]<<b,b+=8}n.head&&(n.head.time=m),512&n.flags&&(O[0]=255&m,O[1]=m>>>8&255,O[2]=m>>>16&255,O[3]=m>>>24&255,n.check=o(n.check,O,4,0)),m=0,b=0,n.mode=4;case 4:for(;b<16;){if(0===d)break t;d--,m+=l[h++]<<b,b+=8}n.head&&(n.head.xflags=255&m,n.head.os=m>>8),512&n.flags&&(O[0]=255&m,O[1]=m>>>8&255,n.check=o(n.check,O,2,0)),m=0,b=0,n.mode=5;case 5:if(1024&n.flags){for(;b<16;){if(0===d)break t;d--,m+=l[h++]<<b,b+=8}n.length=m,n.head&&(n.head.extra_len=m),512&n.flags&&(O[0]=255&m,O[1]=m>>>8&255,n.check=o(n.check,O,2,0)),m=0,b=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((w=n.length)>d&&(w=d),w&&(n.head&&(M=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),i.arraySet(n.head.extra,l,h,w,M)),512&n.flags&&(n.check=o(n.check,l,w,h)),d-=w,h+=w,n.length-=w),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===d)break t;w=0;do{M=l[h+w++],n.head&&M&&n.length<65536&&(n.head.name+=String.fromCharCode(M))}while(M&&w<d);if(512&n.flags&&(n.check=o(n.check,l,w,h)),d-=w,h+=w,M)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===d)break t;w=0;do{M=l[h+w++],n.head&&M&&n.length<65536&&(n.head.comment+=String.fromCharCode(M))}while(M&&w<d);if(512&n.flags&&(n.check=o(n.check,l,w,h)),d-=w,h+=w,M)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;b<16;){if(0===d)break t;d--,m+=l[h++]<<b,b+=8}if(m!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}m=0,b=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;b<32;){if(0===d)break t;d--,m+=l[h++]<<b,b+=8}t.adler=n.check=u(m),m=0,b=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=f,t.avail_out=p,t.next_in=h,t.avail_in=d,n.hold=m,n.bits=b,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){m>>>=7&b,b-=7&b,n.mode=27;break}for(;b<3;){if(0===d)break t;d--,m+=l[h++]<<b,b+=8}switch(n.last=1&m,b-=1,3&(m>>>=1)){case 0:n.mode=14;break;case 1:if(v(n),n.mode=20,6===e){m>>>=2,b-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}m>>>=2,b-=2;break;case 14:for(m>>>=7&b,b-=7&b;b<32;){if(0===d)break t;d--,m+=l[h++]<<b,b+=8}if((65535&m)!=(m>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&m,m=0,b=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(w=n.length){if(w>d&&(w=d),w>p&&(w=p),0===w)break t;i.arraySet(c,l,h,w,f),d-=w,h+=w,p-=w,f+=w,n.length-=w;break}n.mode=12;break;case 17:for(;b<14;){if(0===d)break t;d--,m+=l[h++]<<b,b+=8}if(n.nlen=257+(31&m),b-=5,n.ndist=1+(31&(m>>>=5)),b-=5,n.ncode=4+(15&(m>>>=5)),m>>>=4,b-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;b<3;){if(0===d)break t;d--,m+=l[h++]<<b,b+=8}n.lens[F[n.have++]]=7&m,m>>>=3,b-=3}for(;n.have<19;)n.lens[F[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,C=a(0,n.lens,0,19,n.lencode,0,n.work,N={bits:n.lenbits}),n.lenbits=N.bits,C){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;E=(R=n.lencode[m&(1<<n.lenbits)-1])>>>16&255,P=65535&R,!((k=R>>>24)<=b);){if(0===d)break t;d--,m+=l[h++]<<b,b+=8}if(P<16)m>>>=k,b-=k,n.lens[n.have++]=P;else{if(16===P){for(I=k+2;b<I;){if(0===d)break t;d--,m+=l[h++]<<b,b+=8}if(m>>>=k,b-=k,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}M=n.lens[n.have-1],w=3+(3&m),m>>>=2,b-=2}else if(17===P){for(I=k+3;b<I;){if(0===d)break t;d--,m+=l[h++]<<b,b+=8}b-=k,M=0,w=3+(7&(m>>>=k)),m>>>=3,b-=3}else{for(I=k+7;b<I;){if(0===d)break t;d--,m+=l[h++]<<b,b+=8}b-=k,M=0,w=11+(127&(m>>>=k)),m>>>=7,b-=7}if(n.have+w>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;w--;)n.lens[n.have++]=M}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,C=a(1,n.lens,0,n.nlen,n.lencode,0,n.work,N={bits:n.lenbits}),n.lenbits=N.bits,C){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,C=a(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,N={bits:n.distbits}),n.distbits=N.bits,C){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(d>=6&&p>=258){t.next_out=f,t.avail_out=p,t.next_in=h,t.avail_in=d,n.hold=m,n.bits=b,s(t,S),f=t.next_out,c=t.output,p=t.avail_out,h=t.next_in,l=t.input,d=t.avail_in,m=n.hold,b=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;E=(R=n.lencode[m&(1<<n.lenbits)-1])>>>16&255,P=65535&R,!((k=R>>>24)<=b);){if(0===d)break t;d--,m+=l[h++]<<b,b+=8}if(E&&0==(240&E)){for(A=k,L=E,T=P;E=(R=n.lencode[T+((m&(1<<A+L)-1)>>A)])>>>16&255,P=65535&R,!(A+(k=R>>>24)<=b);){if(0===d)break t;d--,m+=l[h++]<<b,b+=8}m>>>=A,b-=A,n.back+=A}if(m>>>=k,b-=k,n.back+=k,n.length=P,0===E){n.mode=26;break}if(32&E){n.back=-1,n.mode=12;break}if(64&E){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&E,n.mode=22;case 22:if(n.extra){for(I=n.extra;b<I;){if(0===d)break t;d--,m+=l[h++]<<b,b+=8}n.length+=m&(1<<n.extra)-1,m>>>=n.extra,b-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;E=(R=n.distcode[m&(1<<n.distbits)-1])>>>16&255,P=65535&R,!((k=R>>>24)<=b);){if(0===d)break t;d--,m+=l[h++]<<b,b+=8}if(0==(240&E)){for(A=k,L=E,T=P;E=(R=n.distcode[T+((m&(1<<A+L)-1)>>A)])>>>16&255,P=65535&R,!(A+(k=R>>>24)<=b);){if(0===d)break t;d--,m+=l[h++]<<b,b+=8}m>>>=A,b-=A,n.back+=A}if(m>>>=k,b-=k,n.back+=k,64&E){t.msg="invalid distance code",n.mode=30;break}n.offset=P,n.extra=15&E,n.mode=24;case 24:if(n.extra){for(I=n.extra;b<I;){if(0===d)break t;d--,m+=l[h++]<<b,b+=8}n.offset+=m&(1<<n.extra)-1,m>>>=n.extra,b-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===p)break t;if(n.offset>(w=S-p)){if((w=n.offset-w)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}_=w>n.wnext?n.wsize-(w-=n.wnext):n.wnext-w,w>n.length&&(w=n.length),x=n.window}else x=c,_=f-n.offset,w=n.length;w>p&&(w=p),p-=w,n.length-=w;do{c[f++]=x[_++]}while(--w);0===n.length&&(n.mode=21);break;case 26:if(0===p)break t;c[f++]=n.length,p--,n.mode=21;break;case 27:if(n.wrap){for(;b<32;){if(0===d)break t;d--,m|=l[h++]<<b,b+=8}if(t.total_out+=S-=p,n.total+=S,S&&(t.adler=n.check=n.flags?o(n.check,c,S,f-S):r(n.check,c,S,f-S)),S=p,(n.flags?m:u(m))!==n.check){t.msg="incorrect data check",n.mode=30;break}m=0,b=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;b<32;){if(0===d)break t;d--,m+=l[h++]<<b,b+=8}if(m!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}m=0,b=0}n.mode=29;case 29:C=1;break t;case 30:C=-3;break t;case 31:return-4;case 32:default:return-2}return t.next_out=f,t.avail_out=p,t.next_in=h,t.avail_in=d,n.hold=m,n.bits=b,(n.wsize||S!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&y(t,t.output,t.next_out,S-t.avail_out)?(n.mode=31,-4):(S-=t.avail_out,t.total_in+=g-=t.avail_in,t.total_out+=S,n.total+=S,n.wrap&&S&&(t.adler=n.check=n.flags?o(n.check,c,S,t.next_out-S):r(n.check,c,S,t.next_out-S)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===g&&0===S||4===e)&&0===C&&(C=-5),C)},e.inflateEnd=function(t){if(!t||!t.state)return-2;var e=t.state;return e.window&&(e.window=null),t.state=null,0},e.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?-2:(n.head=e,e.done=!1,0):-2},e.inflateSetDictionary=function(t,e){var n,i=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?-2:11===n.mode&&r(1,e,i,0)!==n.check?-3:y(t,e,i,i)?(n.mode=31,-4):(n.havedict=1,0):-2},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,n){"use strict";t.exports=function(t,e){var n,i,r,o,s,a,u,l,c,h,f,d,p,m,b,v,y,g,S,w,_,x,k,E,P;E=t.input,r=(i=t.next_in)+(t.avail_in-5),P=t.output,s=(o=t.next_out)-(e-t.avail_out),a=o+(t.avail_out-257),u=(n=t.state).dmax,l=n.wsize,c=n.whave,h=n.wnext,f=n.window,d=n.hold,p=n.bits,m=n.lencode,b=n.distcode,v=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;t:do{p<15&&(d+=E[i++]<<p,d+=E[i++]<<(p+=8),p+=8),g=m[d&v];e:for(;;){if(d>>>=S=g>>>24,p-=S,0==(S=g>>>16&255))P[o++]=65535&g;else{if(!(16&S)){if(0==(64&S)){g=m[(65535&g)+(d&(1<<S)-1)];continue e}if(32&S){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}w=65535&g,(S&=15)&&(p<S&&(d+=E[i++]<<p,p+=8),w+=d&(1<<S)-1,d>>>=S,p-=S),p<15&&(d+=E[i++]<<p,d+=E[i++]<<(p+=8),p+=8),g=b[d&y];n:for(;;){if(d>>>=S=g>>>24,p-=S,!(16&(S=g>>>16&255))){if(0==(64&S)){g=b[(65535&g)+(d&(1<<S)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(_=65535&g,p<(S&=15)&&(d+=E[i++]<<p,(p+=8)<S&&(d+=E[i++]<<p,p+=8)),(_+=d&(1<<S)-1)>u){t.msg="invalid distance too far back",n.mode=30;break t}if(d>>>=S,p-=S,_>(S=o-s)){if((S=_-S)>c&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(x=0,k=f,0===h){if(x+=l-S,S<w){w-=S;do{P[o++]=f[x++]}while(--S);x=o-_,k=P}}else if(h<S){if(x+=l+h-S,(S-=h)<w){w-=S;do{P[o++]=f[x++]}while(--S);if(x=0,h<w){w-=S=h;do{P[o++]=f[x++]}while(--S);x=o-_,k=P}}}else if(x+=h-S,S<w){w-=S;do{P[o++]=f[x++]}while(--S);x=o-_,k=P}for(;w>2;)P[o++]=k[x++],P[o++]=k[x++],P[o++]=k[x++],w-=3;w&&(P[o++]=k[x++],w>1&&(P[o++]=k[x++]))}else{x=o-_;do{P[o++]=P[x++],P[o++]=P[x++],P[o++]=P[x++],w-=3}while(w>2);w&&(P[o++]=P[x++],w>1&&(P[o++]=P[x++]))}break}}break}}while(i<r&&o<a);i-=w=p>>3,d&=(1<<(p-=w<<3))-1,t.next_in=i,t.next_out=o,t.avail_in=i<r?r-i+5:5-(i-r),t.avail_out=o<a?a-o+257:257-(o-a),n.hold=d,n.bits=p}},function(t,e,n){"use strict";var i=n(27),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,n,u,l,c,h,f){var d,p,m,b,v,y,g,S,w,_=f.bits,x=0,k=0,E=0,P=0,A=0,L=0,T=0,M=0,C=0,N=0,I=null,R=0,O=new i.Buf16(16),F=new i.Buf16(16),B=null,D=0;for(x=0;x<=15;x++)O[x]=0;for(k=0;k<u;k++)O[e[n+k]]++;for(A=_,P=15;P>=1&&0===O[P];P--);if(A>P&&(A=P),0===P)return l[c++]=20971520,l[c++]=20971520,f.bits=1,0;for(E=1;E<P&&0===O[E];E++);for(A<E&&(A=E),M=1,x=1;x<=15;x++)if(M<<=1,(M-=O[x])<0)return-1;if(M>0&&(0===t||1!==P))return-1;for(F[1]=0,x=1;x<15;x++)F[x+1]=F[x]+O[x];for(k=0;k<u;k++)0!==e[n+k]&&(h[F[e[n+k]]++]=k);if(0===t?(I=B=h,y=19):1===t?(I=r,R-=257,B=o,D-=257,y=256):(I=s,B=a,y=-1),N=0,k=0,x=E,v=c,L=A,T=0,m=-1,b=(C=1<<A)-1,1===t&&C>852||2===t&&C>592)return 1;for(;;){g=x-T,h[k]<y?(S=0,w=h[k]):h[k]>y?(S=B[D+h[k]],w=I[R+h[k]]):(S=96,w=0),d=1<<x-T,E=p=1<<L;do{l[v+(N>>T)+(p-=d)]=g<<24|S<<16|w|0}while(0!==p);for(d=1<<x-1;N&d;)d>>=1;if(0!==d?(N&=d-1,N+=d):N=0,k++,0==--O[x]){if(x===P)break;x=e[n+h[k]]}if(x>A&&(N&b)!==m){for(0===T&&(T=A),v+=E,M=1<<(L=x-T);L+T<P&&!((M-=O[L+T])<=0);)L++,M<<=1;if(C+=1<<L,1===t&&C>852||2===t&&C>592)return 1;l[m=N&b]=A<<24|L<<16|v-c|0}}return 0!==N&&(l[v+N]=x-T<<24|64<<16|0),f.bits=A,0}},function(t,e,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(t,e,n){"use strict";var i=n(3),r=n(12),o=n(39),s=n(95),a=n(184),u=function(t,e){var n,i="";for(n=0;n<e;n++)i+=String.fromCharCode(255&t),t>>>=8;return i},l=function(t,e,n,r,l,c){var h,f,d=t.file,p=t.compression,m=c!==o.utf8encode,b=i.transformTo("string",c(d.name)),v=i.transformTo("string",o.utf8encode(d.name)),y=d.comment,g=i.transformTo("string",c(y)),S=i.transformTo("string",o.utf8encode(y)),w=v.length!==d.name.length,_=S.length!==y.length,x="",k="",E="",P=d.dir,A=d.date,L={crc32:0,compressedSize:0,uncompressedSize:0};e&&!n||(L.crc32=t.crc32,L.compressedSize=t.compressedSize,L.uncompressedSize=t.uncompressedSize);var T=0;e&&(T|=8),m||!w&&!_||(T|=2048);var M,C,N=0,I=0;P&&(N|=16),"UNIX"===l?(I=798,N|=(C=M=d.unixPermissions,M||(C=P?16893:33204),(65535&C)<<16)):(I=20,N|=63&(d.dosPermissions||0)),h=A.getUTCHours(),h<<=6,h|=A.getUTCMinutes(),h<<=5,h|=A.getUTCSeconds()/2,f=A.getUTCFullYear()-1980,f<<=4,f|=A.getUTCMonth()+1,f<<=5,f|=A.getUTCDate(),w&&(k=u(1,1)+u(s(b),4)+v,x+="up"+u(k.length,2)+k),_&&(E=u(1,1)+u(s(g),4)+S,x+="uc"+u(E.length,2)+E);var R="";return R+="\n\0",R+=u(T,2),R+=p.magic,R+=u(h,2),R+=u(f,2),R+=u(L.crc32,4),R+=u(L.compressedSize,4),R+=u(L.uncompressedSize,4),R+=u(b.length,2),R+=u(x.length,2),{fileRecord:a.LOCAL_FILE_HEADER+R+b+x,dirRecord:a.CENTRAL_FILE_HEADER+u(I,2)+R+u(g.length,2)+"\0\0\0\0"+u(N,4)+u(r,4)+b+x+g}},c=function(t){return a.DATA_DESCRIPTOR+u(t.crc32,4)+u(t.compressedSize,4)+u(t.uncompressedSize,4)};function h(t,e,n,i){r.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=n,this.encodeFileName=i,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(h,r),h.prototype.push=function(t){var e=t.meta.percent||0,n=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,r.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:n?(e+100*(n-i-1))/n:100}}))},h.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var n=l(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,n=l(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),e)this.push({data:c(t),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var n=function(t,e,n,r,o){var s=i.transformTo("string",o(r));return a.CENTRAL_DIRECTORY_END+"\0\0\0\0"+u(t,2)+u(t,2)+u(e,4)+u(n,4)+u(s.length,2)+s}(this.dirRecords.length,this.bytesWritten-t,t,this.zipComment,this.encodeFileName);this.push({data:n,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},h.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(t){var e=this._sources;if(!r.prototype.error.call(this,t))return!1;for(var n=0;n<e.length;n++)try{e[n].error(t)}catch(t){}return!0},h.prototype.lock=function(){r.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},t.exports=h},function(t,e,n){"use strict";var i=n(3),r=n(12);function o(t,e){r.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}i.inherits(o,r),o.prototype._bindStream=function(t){var e=this;this._stream=t,t.pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},o.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=o},function(t,e,n){"use strict";var i=n(3),r=n(49),o=n(39),s=(i=n(3),n(254)),a=n(177),u=n(63);function l(t){return new r.Promise((function(e,n){var i=t.decompressed.getContentWorker().pipe(new a);i.on("error",(function(t){n(t)})).on("end",(function(){i.streamInfo.crc32!==t.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}t.exports=function(t,e){var n=this;return e=i.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(t)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var n=new s(e);return n.load(t),n})).then((function(t){var n=[r.Promise.resolve(t)],i=t.files;if(e.checkCRC32)for(var o=0;o<i.length;o++)n.push(l(i[o]));return r.Promise.all(n)})).then((function(t){for(var i=t.shift(),r=i.files,o=0;o<r.length;o++){var s=r[o];n.file(s.fileNameStr,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:e.createFolders})}return i.zipComment.length&&(n.comment=i.zipComment),n}))}},function(t,e,n){"use strict";var i=n(185),r=n(3),o=n(184),s=n(257),a=(n(39),n(26));function u(t){this.files=[],this.loadOptions=t}u.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(e)+", expected "+r.pretty(t)+")")}},isSignature:function(t,e){var n=this.reader.index;this.reader.setIndex(t);var i=this.reader.readString(4)===e;return this.reader.setIndex(n),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=r.transformTo(a.uint8array?"uint8array":"array",t);this.zipComment=this.loadOptions.decodeFileName(e)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,n,i=this.zip64EndOfCentralSize-44;0<i;)t=this.reader.readInt(2),e=this.reader.readInt(4),n=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)this.reader.setIndex((e=this.files[t]).localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(t=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var i=e-n;if(i>0)this.isSignature(e,o.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(t){this.reader=i(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=u},function(t,e,n){"use strict";var i=n(187);function r(t){i.call(this,t)}n(3).inherits(r,i),r.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},r.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},r.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},t.exports=r},function(t,e,n){"use strict";var i=n(188);function r(t){i.call(this,t)}n(3).inherits(r,i),r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},t.exports=r},function(t,e,n){"use strict";var i=n(185),r=n(3),o=n(94),s=n(95),a=n(39),u=n(178),l=n(26);function c(t,e){this.options=t,this.loadOptions=e}c.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,n;if(t.skip(22),this.fileNameLength=t.readInt(2),n=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in u)if(u.hasOwnProperty(e)&&u[e].magic===t)return u[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===t&&(this.dosPermissions=63&this.externalFileAttributes),3===t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=i(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,n,i,r=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index<r;)e=t.readInt(2),n=t.readInt(2),i=t.readData(n),this.extraFields[e]={id:e,length:n,value:i}},handleUTF8:function(){var t=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var n=r.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var o=r.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=i(t.value);return 1!==e.readInt(1)||s(this.fileName)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=i(t.value);return 1!==e.readInt(1)||s(this.fileComment)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null}},t.exports=c},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(259)),i(n(90)),i(n(150)),i(n(151))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MappingSourceMusicPart=function(){function t(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];h(this,t),this.repetitionRun=-1,this.sourceMusicPart=e,this.parentPartListEntry=i,this.startTimestamp=n.clone(),this.repetitionRun=r,this.parentRepetition=i,this.isEnding=o}return d(t,[{key:"CompareTo",value:function(t){return void 0!==t?this.startTimestamp.CompareTo(t.startTimestamp):1}},{key:"IsRepetition",get:function(){return void 0!==this.parentRepetition}},{key:"IsEnding",get:function(){return this.isEnding}},{key:"IsLastRepetitionRun",get:function(){return this.IsRepetition&&this.repetitionRun+1===this.parentRepetition.UserNumberOfRepetitions}},{key:"RepetitionRun",get:function(){return this.repetitionRun}},{key:"ParentPartListEntry",get:function(){return this.parentPartListEntry}},{key:"SourceMusicPart",get:function(){return this.sourceMusicPart}},{key:"StartTimestamp",get:function(){return this.startTimestamp}}]),t}()},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(152)),i(n(148)),i(n(162)),i(n(153)),i(n(261))},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(155)),i(n(156)),i(n(157)),i(n(154)),i(n(164)),i(n(163)),i(n(160))},function(t,e,n){(function(i){var r,o,s;r=function(){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){if("object"!==a(t.console)){t.console={};for(var e,n,i=t.console,r=function(){},o=["memory"],s="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");e=o.pop();)i[e]||(i[e]={});for(;n=s.pop();)i[n]||(i[n]=r)}var u,l,c,h,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function d(){}void 0===t.btoa&&(t.btoa=function(t){var e,n,i,r,o,s=0,a=0,u="",l=[];if(!t)return t;for(;e=(o=t.charCodeAt(s++)<<16|t.charCodeAt(s++)<<8|t.charCodeAt(s++))>>18&63,n=o>>12&63,i=o>>6&63,r=63&o,l[a++]=f.charAt(e)+f.charAt(n)+f.charAt(i)+f.charAt(r),s<t.length;);u=l.join("");var c=t.length%3;return(c?u.slice(0,c-3):u)+"===".slice(c||3)}),void 0===t.atob&&(t.atob=function(t){var e,n,i,r,o,s,a=0,u=0,l=[];if(!t)return t;for(t+="";e=(s=f.indexOf(t.charAt(a++))<<18|f.indexOf(t.charAt(a++))<<12|(r=f.indexOf(t.charAt(a++)))<<6|(o=f.indexOf(t.charAt(a++))))>>16&255,n=s>>8&255,i=255&s,l[u++]=64==r?String.fromCharCode(e):64==o?String.fromCharCode(e,n):String.fromCharCode(e,n,i),a<t.length;);return l.join("")}),Array.prototype.map||(Array.prototype.map=function(t){if(null==this||"function"!=typeof t)throw new TypeError;for(var e=Object(this),n=e.length>>>0,i=new Array(n),r=1<arguments.length?arguments[1]:void 0,o=0;o<n;o++)o in e&&(i[o]=t.call(r,e[o],o,e));return i}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Array.prototype.reduce||Object.defineProperty(Array.prototype,"reduce",{value:function(t){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var e,n=Object(this),i=n.length>>>0,r=0;if(2<=arguments.length)e=arguments[1];else{for(;r<i&&!(r in n);)r++;if(i<=r)throw new TypeError("Reduce of empty array with no initial value");e=n[r++]}for(;r<i;)r in n&&(e=t(e,n[r],r,n)),r++;return e}}),Uint8Array.prototype.reduce||Object.defineProperty(Uint8Array.prototype,"reduce",{value:function(t){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var e,n=Object(this),i=n.length>>>0,r=0;if(2<=arguments.length)e=arguments[1];else{for(;r<i&&!(r in n);)r++;if(i<=r)throw new TypeError("Reduce of empty array with no initial value");e=n[r++]}for(;r<i;)r in n&&(e=t(e,n[r],r,n)),r++;return e}}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){if(null==this||"function"!=typeof t)throw new TypeError;for(var n=Object(this),i=n.length>>>0,r=0;r<i;r++)r in n&&t.call(e,n[r],r,n)}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var o=e[r];if(t.call(i,o,r,e))return o;r++}},configurable:!0,writable:!0}),"function"!=typeof Object.create&&(Object.create=function(t,e){if(t!==Object(t)&&null!==t)throw TypeError("Argument must be an object, or null");d.prototype=t||{},void 0!==e&&Object.defineProperties(d.prototype,e);var n=new d;return(d.prototype=null)===t&&(n.__proto__=null),n}),Object.keys||(Object.keys=(u=Object.prototype.hasOwnProperty,l=!{toString:null}.propertyIsEnumerable("toString"),h=(c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(t){if("object"!==a(t)&&("function"!=typeof t||null===t))throw new TypeError;var e,n,i=[];for(e in t)u.call(t,e)&&i.push(e);if(l)for(n=0;n<h;n++)u.call(t,c[n])&&i.push(c[n]);return i})),Object.values||(Object.values=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&t.propertyIsEnumerable(n)&&e.push(t[n]);return e}),"function"!=typeof Object.assign&&(Object.assign=function(t){var e=arguments;if(null==t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var n=1;n<arguments.length;n++){var i=e[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/g,"")}),String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/\s+$/g,"")}),Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||void 0!==i&&i||Function('return typeof this === "object" && this.content')()||Function("return this")());var u,l,c,h,f,d,p,m,b,v,y,g,S,w,_,x,k,E,P,A,L,T,M,C,N,I,R,O,F,B,D,j,V,G,U,z,W,H,q,Y,X,K=(u="undefined"!=typeof self&&self||"undefined"!=typeof window&&window||void 0!==i&&i||Function('return typeof this === "object" && this.content')()||Function("return this")(),Z.API={events:[]},Z.version="2.1.1",void 0!==(s=(function(){return Z}).call(e,n,e,t))&&(t.exports=s),Z);function J(t){if("object"!==a(t))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,i){if(i=i||!1,"string"!=typeof t||"function"!=typeof n||"boolean"!=typeof i)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var r=Math.random().toString(35);return e[t][r]=[n,!!i],r},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],0===Object.keys(e[n]).length&&delete e[n],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),r=[];for(var o in e[n]){var s=e[n][o];try{s[0].apply(t,i)}catch(n){u.console&&console.error("jsPDF PubSub Error",n.message,n)}s[1]&&r.push(o)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Z(t){var e,n="string"==typeof arguments[0]?arguments[0]:"p",i=arguments[1],r=arguments[2],o=arguments[3],s=[],l=1,c=16,h="S";"object"===a(t=t||{})&&(n=t.orientation,i=t.unit||i,r=t.format||r,o=t.compress||t.compressPdf||o,l="number"==typeof t.userUnit?Math.abs(t.userUnit):1,void 0!==t.precision&&(e=t.precision),void 0!==t.floatPrecision&&(c=t.floatPrecision),h=t.defaultPathOperation||"S"),s=t.filters||(!0===o?["FlateEncode"]:s),i=i||"mm",n=(""+(n||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,d={},p={internal:{},__private__:{}};p.__private__.PubSub=J;var m="1.3",b=p.__private__.getPdfVersion=function(){return m};p.__private__.setPdfVersion=function(t){m=t};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return v};var y=p.__private__.getPageFormat=function(t){return v[t]};r=r||"a4";var g="compat",S="advanced",w=g;function _(){this.saveGraphicsState(),$(new It(pt,0,0,-pt,0,un()*pt).toString()+" cm"),this.setFontSize(this.getFontSize()/pt),h="n",w=S}function x(){this.restoreGraphicsState(),h="S",w=g}function k(t){if(w!==S)throw new Error(t+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")}p.advancedAPI=function(t){var e=w===g;return e&&_.call(this),"function"!=typeof t||(t(this),e&&x.call(this)),this},p.compatAPI=function(t){var e=w===S;return e&&x.call(this),"function"!=typeof t||(t(this),e&&_.call(this)),this},p.isAdvancedAPI=function(){return w===S};var E,P=p.roundToPrecision=p.__private__.roundToPrecision=function(t,n){var i=e||n;if(isNaN(t)||isNaN(i))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return t.toFixed(i).replace(/0+$/,"")};function A(t){return M(function(t){return w===g?un()-t:w===S?t:void 0}(t))}E=p.hpf=p.__private__.hpf="number"==typeof c?function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return P(t,c)}:"smart"===c?function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return P(t,-1<t&&t<1?16:5)}:function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return P(t,16)};var L=p.f2=p.__private__.f2=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.f2");return P(t,2)},T=p.__private__.f3=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.f3");return P(t,3)},M=p.scale=p.__private__.scale=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.scale");return w===g?t*pt:w===S?t:void 0};p.__private__.setPrecision=p.setPrecision=function(t){"number"==typeof parseInt(t,10)&&(e=parseInt(t,10))};var C,N="00000000000000000000000000000000",I=p.__private__.getFileId=function(){return N},R=p.__private__.setFileId=function(t){return N=void 0!==t&&/^[a-fA-F0-9]{32}$/.test(t)?t.toUpperCase():N.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join("")};p.setFileId=function(t){return R(t),this},p.getFileId=function(){return I()};var O=p.__private__.convertDateToPDFDate=function(t){var e=t.getTimezoneOffset(),n=e<0?"+":"-",i=Math.floor(Math.abs(e/60)),r=Math.abs(e%60),o=[n,V(i),"'",V(r),"'"].join("");return["D:",t.getFullYear(),V(t.getMonth()+1),V(t.getDate()),V(t.getHours()),V(t.getMinutes()),V(t.getSeconds()),o].join("")},F=p.__private__.convertPDFDateToDate=function(t){var e=parseInt(t.substr(2,4),10),n=parseInt(t.substr(6,2),10)-1,i=parseInt(t.substr(8,2),10),r=parseInt(t.substr(10,2),10),o=parseInt(t.substr(12,2),10),s=parseInt(t.substr(14,2),10);return new Date(e,n,i,r,o,s,0)},B=p.__private__.setCreationDate=function(t){var e;if(void 0===t&&(t=new Date),t instanceof Date)e=O(t);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(t))throw new Error("Invalid argument passed to jsPDF.setCreationDate");e=t}return C=e},D=p.__private__.getCreationDate=function(t){var e=C;return"jsDate"===t&&(e=F(C)),e};p.setCreationDate=function(t){return B(t),this},p.getCreationDate=function(t){return D(t)};var j,V=p.__private__.padd2=function(t){return("0"+parseInt(t)).slice(-2)},G=p.__private__.padd2Hex=function(t){return("00"+(t=t.toString())).substr(t.length)},U=0,z=[],W=[],H=0,q=[],Y=[],X=!1,K=W;function Q(t){X||(K=t)}p.__private__.setCustomOutputDestination=function(t){X=!0,K=t},p.__private__.resetCustomOutputDestination=function(){X=!1,K=W};var $=p.__private__.out=function(t){return t=t.toString(),H+=t.length+1,K.push(t),K},tt=p.__private__.write=function(t){return $(1===arguments.length?t.toString():Array.prototype.join.call(arguments," "))},et=p.__private__.getArrayBuffer=function(t){for(var e=t.length,n=new ArrayBuffer(e),i=new Uint8Array(n);e--;)i[e]=t.charCodeAt(e);return n},nt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return nt};var it=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(t){return it=w===S?t/pt:t,this};var rt,ot=p.__private__.getFontSize=p.getFontSize=function(){return w===g?it:it*pt},st=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(t){return st=t,this},p.__private__.getR2L=p.getR2L=function(){return st};var at,ut=p.__private__.setZoomMode=function(t){if(/^\d*\.?\d*%$/.test(t))rt=t;else if(isNaN(t)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(t))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+t+'" is not recognized.');rt=t}else rt=parseInt(t,10)};p.__private__.getZoomMode=function(){return rt};var lt,ct=p.__private__.setPageMode=function(t){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(t))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+t+'" is not recognized.');at=t};p.__private__.getPageMode=function(){return at};var ht=p.__private__.setLayoutMode=function(t){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(t))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+t+'" is not recognized.');lt=t};p.__private__.getLayoutMode=function(){return lt},p.__private__.setDisplayMode=p.setDisplayMode=function(t,e,n){return ut(t),ht(e),ct(n),this};var ft={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(t){if(-1===Object.keys(ft).indexOf(t))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ft[t]},p.__private__.getDocumentProperties=function(){return ft},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(t){for(var e in ft)ft.hasOwnProperty(e)&&t[e]&&(ft[e]=t[e]);return this},p.__private__.setDocumentProperty=function(t,e){if(-1===Object.keys(ft).indexOf(t))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ft[t]=e};var dt,pt,mt,bt,vt,yt={},gt={},St=[],wt={},_t={},xt={},kt={},Et=null,Pt=0,At=[],Lt=new J(p),Tt=t.hotfixes||[],Mt={},Ct={},Nt=[],It=function(t,e,n,i,r,o){var s=[];return Object.defineProperty(this,"sx",{get:function(){return s[0]},set:function(t){s[0]=t}}),Object.defineProperty(this,"shy",{get:function(){return s[1]},set:function(t){s[1]=t}}),Object.defineProperty(this,"shx",{get:function(){return s[2]},set:function(t){s[2]=t}}),Object.defineProperty(this,"sy",{get:function(){return s[3]},set:function(t){s[3]=t}}),Object.defineProperty(this,"tx",{get:function(){return s[4]},set:function(t){s[4]=t}}),Object.defineProperty(this,"ty",{get:function(){return s[5]},set:function(t){s[5]=t}}),Object.defineProperty(this,"a",{get:function(){return s[0]},set:function(t){s[0]=t}}),Object.defineProperty(this,"b",{get:function(){return s[1]},set:function(t){s[1]=t}}),Object.defineProperty(this,"c",{get:function(){return s[2]},set:function(t){s[2]=t}}),Object.defineProperty(this,"d",{get:function(){return s[3]},set:function(t){s[3]=t}}),Object.defineProperty(this,"e",{get:function(){return s[4]},set:function(t){s[4]=t}}),Object.defineProperty(this,"f",{get:function(){return s[5]},set:function(t){s[5]=t}}),Object.defineProperty(this,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(this,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(this,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(this,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),this.sx=isNaN(t)?1:t,this.shy=isNaN(e)?0:e,this.shx=isNaN(n)?0:n,this.sy=isNaN(i)?1:i,this.tx=isNaN(r)?0:r,this.ty=isNaN(o)?0:o,this};It.prototype.join=function(t){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(t)},It.prototype.multiply=function(t){return new It(t.sx*this.sx+t.shy*this.shx,t.sx*this.shy+t.shy*this.sy,t.shx*this.sx+t.sy*this.shx,t.shx*this.shy+t.sy*this.sy,t.tx*this.sx+t.ty*this.shx+this.tx,t.tx*this.shy+t.ty*this.sy+this.ty)},It.prototype.decompose=function(){var t=this.sx,e=this.shy,n=this.shx,i=this.sy,r=this.tx,o=this.ty,s=Math.sqrt(t*t+e*e),a=(t/=s)*n+(e/=s)*i;n-=t*a,i-=e*a;var u=Math.sqrt(n*n+i*i);return a/=u,t*(i/=u)<e*(n/=u)&&(t=-t,e=-e,a=-a,s=-s),{scale:new It(s,0,0,u,0,0),translate:new It(1,0,0,1,r,o),rotate:new It(t,e,-e,t,0,0),skew:new It(1,0,a,1,0,0)}},It.prototype.toString=function(t){return this.join(" ")},It.prototype.inversed=function(){var t=this.sx,e=this.shy,n=this.shx,i=this.sy,r=this.tx,o=this.ty,s=1/(t*i-e*n),a=i*s,u=-e*s,l=-n*s,c=t*s;return new It(a,u,l,c,-a*r-l*o,-u*r-c*o)},It.prototype.applyToPoint=function(t){return new en(t.x*this.sx+t.y*this.shx+this.tx,t.x*this.shy+t.y*this.sy+this.ty)},It.prototype.applyToRectangle=function(t){var e=this.applyToPoint(t),n=this.applyToPoint(new en(t.x+t.w,t.y+t.h));return new nn(e.x,e.y,n.x-e.x,n.y-e.y)},It.prototype.clone=function(){return new It(this.sx,this.shy,this.shx,this.sy,this.tx,this.ty)},p.Matrix=It;var Rt=p.matrixMult=function(t,e){return e.multiply(t)},Ot=new It(1,0,0,1,0,0);function Ft(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Bt(t,e){if(!_t[t]){var n=(e instanceof p.ShadingPattern?"Sh":"P")+(Object.keys(wt).length+1).toString(10);e.id=n,_t[t]=n,wt[n]=e,Lt.publish("addPattern",e)}}function Dt(t){t.objectNumber=Jt();var e=[];e.push({key:"Type",value:"/XObject"}),e.push({key:"Subtype",value:"/Form"}),e.push({key:"BBox",value:"["+[E(t.x),E(t.y),E(t.x+t.width),E(t.y+t.height)].join(" ")+"]"}),e.push({key:"Matrix",value:"["+t.matrix.toString()+"]"});var n=t.pages[1].join("\n");oe({data:n,additionalKeyValues:e}),$("endobj")}function jt(t,e){e||(e=21);var n=Jt(),i=function(t,e){var n,i=[],r=1/(e-1);for(n=0;n<1;n+=r)i.push(n);i.push(1),0!=t[0].offset&&t.unshift({offset:0,color:t[0].color}),1!=t[t.length-1].offset&&t.push({offset:1,color:t[t.length-1].color});for(var o="",s=0,a=0;a<i.length;a++){for(n=i[a];n>t[s+1].offset;)s++;var u=t[s].offset,l=(n-u)/(t[s+1].offset-u),c=t[s].color,h=t[s+1].color;o+=G(Math.round((1-l)*c[0]+l*h[0]).toString(16))+G(Math.round((1-l)*c[1]+l*h[1]).toString(16))+G(Math.round((1-l)*c[2]+l*h[2]).toString(16))}return o.trim()}(t.colors,e),r=[];r.push({key:"FunctionType",value:"0"}),r.push({key:"Domain",value:"[0.0 1.0]"}),r.push({key:"Size",value:"["+e+"]"}),r.push({key:"BitsPerSample",value:"8"}),r.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),r.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),oe({data:i,additionalKeyValues:r,alreadyAppliedFilters:["/ASCIIHexDecode"]}),$("endobj"),t.objectNumber=Jt(),$("<< /ShadingType "+t.type),$("/ColorSpace /DeviceRGB");var o="/Coords ["+E(parseFloat(t.coords[0]))+" "+E(parseFloat(t.coords[1]))+" ";o+=2===t.type?E(parseFloat(t.coords[2]))+" "+E(parseFloat(t.coords[3])):E(parseFloat(t.coords[2]))+" "+E(parseFloat(t.coords[3]))+" "+E(parseFloat(t.coords[4]))+" "+E(parseFloat(t.coords[5])),$(o+="]"),t.matrix&&$("/Matrix ["+t.matrix.toString()+"]"),$("/Function "+n+" 0 R"),$("/Extend [true true]"),$(">>"),$("endobj")}function Vt(t,e){var n=Zt(),i=Jt();e.push({resourcesOid:n,objectOid:i}),t.objectNumber=i;var r=[];r.push({key:"Type",value:"/Pattern"}),r.push({key:"PatternType",value:"1"}),r.push({key:"PaintType",value:"1"}),r.push({key:"TilingType",value:"1"}),r.push({key:"BBox",value:"["+t.boundingBox.map(E).join(" ")+"]"}),r.push({key:"XStep",value:E(t.xStep)}),r.push({key:"YStep",value:E(t.yStep)}),r.push({key:"Resources",value:n+" 0 R"}),t.matrix&&r.push({key:"Matrix",value:"["+t.matrix.toString()+"]"}),oe({data:t.stream,additionalKeyValues:r}),$("endobj")}function Gt(t){for(var e in t.objectNumber=Jt(),$("<<"),t)switch(e){case"opacity":$("/ca "+L(t[e]));break;case"stroke-opacity":$("/CA "+L(t[e]))}$(">>"),$("endobj")}function Ut(t){Qt(t.resourcesOid,!0),$("<<"),$("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var t in $("/Font <<"),yt)!yt.hasOwnProperty(t)||(!1===f||!0===f&&d.hasOwnProperty(t))&&$("/"+t+" "+yt[t].objectNumber+" 0 R");$(">>")}(),function(){if(0<Object.keys(wt).length){for(var t in $("/Shading <<"),wt)wt.hasOwnProperty(t)&&wt[t]instanceof p.ShadingPattern&&0<=wt[t].objectNumber&&$("/"+t+" "+wt[t].objectNumber+" 0 R");Lt.publish("putShadingPatternDict"),$(">>")}}(),function(t){if(0<Object.keys(wt).length){for(var e in $("/Pattern <<"),wt)wt.hasOwnProperty(e)&&wt[e]instanceof p.TilingPattern&&0<=wt[e].objectNumber&&wt[e].objectNumber<t&&$("/"+e+" "+wt[e].objectNumber+" 0 R");Lt.publish("putTilingPatternDict"),$(">>")}}(t.objectOid),function(){if(0<Object.keys(xt).length){var t;for(t in $("/ExtGState <<"),xt)xt.hasOwnProperty(t)&&0<=xt[t].objectNumber&&$("/"+t+" "+xt[t].objectNumber+" 0 R");Lt.publish("putGStateDict"),$(">>")}}(),function(){for(var t in $("/XObject <<"),Mt)Mt.hasOwnProperty(t)&&0<=Mt[t].objectNumber&&$("/"+t+" "+Mt[t].objectNumber+" 0 R");Lt.publish("putXobjectDict"),$(">>")}(),$(">>"),$("endobj")}function zt(){var t=[];!function(){for(var t in yt)!yt.hasOwnProperty(t)||(!1===f||!0===f&&d.hasOwnProperty(t))&&(Lt.publish("putFont",{font:n=yt[t],out:$,newObject:Jt,putStream:oe,pdfEscapeWithNeededParanthesis:e}),!0!==n.isAlreadyPutted&&(n.objectNumber=Jt(),$("<<"),$("/Type /Font"),$("/BaseFont /"+e(n.postScriptName)),$("/Subtype /Type1"),"string"==typeof n.encoding&&$("/Encoding /"+n.encoding),$("/FirstChar 32"),$("/LastChar 255"),$(">>"),$("endobj")));function e(t,e){return-1!==t.indexOf(" ")?"("+ue(t,e)+")":ue(t,e)}var n}(),function(){var t;for(t in xt)xt.hasOwnProperty(t)&&Gt(xt[t])}(),function(){for(var t in Mt)Mt.hasOwnProperty(t)&&Dt(Mt[t])}(),function(t){var e;for(e in wt)wt.hasOwnProperty(e)&&(wt[e]instanceof p.ShadingPattern?jt(wt[e]):wt[e]instanceof p.TilingPattern&&Vt(wt[e],t))}(t),Lt.publish("putResources"),t.forEach(Ut),Ut({resourcesOid:ee,objectOid:Number.MAX_SAFE_INTEGER}),Lt.publish("postPutResources")}function Wt(t){gt[t.fontName]=gt[t.fontName]||{},gt[t.fontName][t.fontStyle]=t.id}function Ht(t,e,n,i,r){var o={id:"F"+(Object.keys(yt).length+1).toString(10),postScriptName:t,fontName:e,fontStyle:n,encoding:i,isStandardFont:r||!1,metadata:{}};return Lt.publish("addFont",{font:o,instance:this}),yt[o.id]=o,Wt(o),o.id}function qt(t,e){var i,o,s;switch(n=e||n,"string"==typeof t&&(i=y(t.toLowerCase()),Array.isArray(i)&&(o=i[0],s=i[1])),Array.isArray(t)&&(o=t[0]*pt,s=t[1]*pt),isNaN(o)&&(o=r[0],s=r[1]),(14400<o||14400<s)&&(console.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),o=Math.min(14400,o),s=Math.min(14400,s)),r=[o,s],n.substr(0,1)){case"l":o<s&&(r=[s,o]);break;case"p":s<o&&(r=[s,o])}le(r),Be(Fe),$(He),0!==Ze&&$(Ze+" J"),0!==Qe&&$(Qe+" j"),Lt.publish("addPage",{pageNumber:Pt})}function Yt(t,e,n){var i,r=void 0;return n=n||{},e=void 0!==e?e:yt[dt].fontStyle,i=(t=void 0!==t?t:yt[dt].fontName).toLowerCase(),void 0!==gt[i]&&void 0!==gt[i][e]?r=gt[i][e]:void 0!==gt[t]&&void 0!==gt[t][e]?r=gt[t][e]:!1===n.disableWarning&&console.warn("Unable to look up font label for font '"+t+"', '"+e+"'. Refer to getFontList() for available fonts."),r||n.noFallback||null==(r=gt.times[e])&&(r=gt.times.normal),r}function Xt(t){return!0===Array.isArray(Tt)&&-1<Tt.indexOf(t)}p.unitMatrix=p.identityMatrix=Ot,p.ShadingPattern=function(t,e,n,i,r){k("ShadingPattern"),this.type="axial"===t?2:3,this.coords=e,this.colors=n,Ft.call(this,i,r)},p.TilingPattern=function(t,e,n,i,r){k("TilingPattern"),this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,Ft.call(this,i,r)},p.TilingPattern.prototype={createClone:function(t,e,n,i,r){var o=new p.TilingPattern(e||this.boundingBox,n||this.xStep,i||this.yStep,this.gState,r||this.matrix);return o.stream=this.stream,Bt(t+"$$"+this.cloneIndex+++"$$",o),o}},p.addShadingPattern=function(t,e){return k("addShadingPattern()"),Bt(t,e),this},p.beginTilingPattern=function(t){k("beginTilingPattern()"),rn(t.boundingBox[0],t.boundingBox[1],t.boundingBox[2]-t.boundingBox[0],t.boundingBox[3]-t.boundingBox[1],t.matrix)},p.endTilingPattern=function(t,e){k("endTilingPattern()"),e.stream=Y[j].join("\n"),Bt(t,e),Lt.publish("endTilingPattern",e),Nt.pop().restore()};var Kt,Jt=p.__private__.newObject=function(){var t=Zt();return Qt(t,!0),t},Zt=p.__private__.newObjectDeferred=function(){return z[++U]=function(){return H},U},Qt=function(t,e){return e="boolean"==typeof e&&e,z[t]=H,e&&$(t+" 0 obj"),t},$t=p.__private__.newAdditionalObject=function(){var t={objId:Zt(),content:""};return q.push(t),t},te=Zt(),ee=Zt(),ne=p.__private__.decodeColorString=function(t){var e=t.split(" ");if(2!==e.length||"g"!==e[1]&&"G"!==e[1])5!==e.length||"k"!==e[4]&&"K"!==e[4]||(e=[(1-e[0])*(1-e[3]),(1-e[1])*(1-e[3]),(1-e[2])*(1-e[3]),"r"]);else{var n=parseFloat(e[0]);e=[n,n,n,"r"]}for(var i="#",r=0;r<3;r++)i+=("0"+Math.floor(255*parseFloat(e[r])).toString(16)).slice(-2);return i},ie=p.__private__.encodeColorString=function(t){var e;"string"==typeof t&&(t={ch1:t});var n=t.ch1,i=t.ch2,r=t.ch3,o=t.ch4,s="draw"===t.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var u=new RGBColor(n);if(u.ok)n=u.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var l=parseInt(n.substr(1),16);n=l>>16&255,i=l>>8&255,r=255&l}if(void 0===i||void 0===o&&n===i&&i===r)if("string"==typeof n)e=n+" "+s[0];else switch(t.precision){case 2:e=L(n/255)+" "+s[0];break;case 3:default:e=T(n/255)+" "+s[0]}else if(void 0===o||"object"===a(o)){if(o&&!isNaN(o.a)&&0===o.a)return["1.","1.","1.",s[1]].join(" ");if("string"==typeof n)e=[n,i,r,s[1]].join(" ");else switch(t.precision){case 2:e=[L(n/255),L(i/255),L(r/255),s[1]].join(" ");break;default:case 3:e=[T(n/255),T(i/255),T(r/255),s[1]].join(" ")}}else if("string"==typeof n)e=[n,i,r,o,s[2]].join(" ");else switch(t.precision){case 2:e=[L(n),L(i),L(r),L(o),s[2]].join(" ");break;case 3:default:e=[T(n),T(i),T(r),T(o),s[2]].join(" ")}return e},re=p.__private__.getFilters=function(){return s},oe=p.__private__.putStream=function(t){var e=(t=t||{}).data||"",n=t.filters||re(),i=t.alreadyAppliedFilters||[],r=t.addLength1||!1,o=e.length,s={};!0===n&&(n=["FlateEncode"]);var a=t.additionalKeyValues||[],u=(s=void 0!==Z.API.processDataByFilters?Z.API.processDataByFilters(e,n):{data:e,reverseChain:[]}).reverseChain+(Array.isArray(i)?i.join(" "):i.toString());if(0!==s.data.length&&(a.push({key:"Length",value:s.data.length}),!0===r&&a.push({key:"Length1",value:o})),0!=u.length)if(u.split("/").length-1==1)a.push({key:"Filter",value:u});else{a.push({key:"Filter",value:"["+u+"]"});for(var l=0;l<a.length;l+=1)if("DecodeParms"===a[l].key){for(var c=[],h=0;h<s.reverseChain.split("/").length-1;h+=1)c.push("null");c.push(a[l].value),a[l].value="["+c.join(" ")+"]"}}$("<<");for(var f=0;f<a.length;f++)$("/"+a[f].key+" "+a[f].value);$(">>"),0!==s.data.length&&($("stream"),$(s.data),$("endstream"))},se=p.__private__.putPage=function(t){var e=t.number,n=t.data,i=t.objId,r=t.contentsObjId;Qt(i,!0),$("<</Type /Page"),$("/Parent "+t.rootDictionaryObjId+" 0 R"),$("/Resources "+t.resourceDictionaryObjId+" 0 R"),$("/MediaBox ["+parseFloat(E(t.mediaBox.bottomLeftX))+" "+parseFloat(E(t.mediaBox.bottomLeftY))+" "+E(t.mediaBox.topRightX)+" "+E(t.mediaBox.topRightY)+"]"),null!==t.cropBox&&$("/CropBox ["+E(t.cropBox.bottomLeftX)+" "+E(t.cropBox.bottomLeftY)+" "+E(t.cropBox.topRightX)+" "+E(t.cropBox.topRightY)+"]"),null!==t.bleedBox&&$("/BleedBox ["+E(t.bleedBox.bottomLeftX)+" "+E(t.bleedBox.bottomLeftY)+" "+E(t.bleedBox.topRightX)+" "+E(t.bleedBox.topRightY)+"]"),null!==t.trimBox&&$("/TrimBox ["+E(t.trimBox.bottomLeftX)+" "+E(t.trimBox.bottomLeftY)+" "+E(t.trimBox.topRightX)+" "+E(t.trimBox.topRightY)+"]"),null!==t.artBox&&$("/ArtBox ["+E(t.artBox.bottomLeftX)+" "+E(t.artBox.bottomLeftY)+" "+E(t.artBox.topRightX)+" "+E(t.artBox.topRightY)+"]"),"number"==typeof t.userUnit&&1!==t.userUnit&&$("/UserUnit "+t.userUnit),Lt.publish("putPage",{objId:i,pageContext:At[e],pageNumber:e,page:n}),$("/Contents "+r+" 0 R"),$(">>"),$("endobj");var o=n.join("\n");return w===S&&(o+="\nQ"),Qt(r,!0),oe({data:o,filters:re()}),$("endobj"),i},ae=p.__private__.putPages=function(){var t,e,n=[];for(t=1;t<=Pt;t++)At[t].objId=Zt(),At[t].contentsObjId=Zt();for(t=1;t<=Pt;t++)n.push(se({number:t,data:Y[t],objId:At[t].objId,contentsObjId:At[t].contentsObjId,mediaBox:At[t].mediaBox,cropBox:At[t].cropBox,bleedBox:At[t].bleedBox,trimBox:At[t].trimBox,artBox:At[t].artBox,userUnit:At[t].userUnit,rootDictionaryObjId:te,resourceDictionaryObjId:ee}));Qt(te,!0),$("<</Type /Pages");var i="/Kids [";for(e=0;e<Pt;e++)i+=n[e]+" 0 R ";$(i+"]"),$("/Count "+Pt),$(">>"),$("endobj"),Lt.publish("postPutPages")},ue=p.__private__.pdfEscape=p.pdfEscape=function(t,e){return function(t,e){var n,i,r,o,s,a,u,l,c;if(r=(e=e||{}).sourceEncoding||"Unicode",s=e.outputEncoding,(e.autoencode||s)&&yt[dt].metadata&&yt[dt].metadata[r]&&yt[dt].metadata[r].encoding&&(o=yt[dt].metadata[r].encoding,!s&&yt[dt].encoding&&(s=yt[dt].encoding),!s&&o.codePages&&(s=o.codePages[0]),"string"==typeof s&&(s=o[s]),s)){for(u=!1,a=[],n=0,i=t.length;n<i;n++)(l=s[t.charCodeAt(n)])?a.push(String.fromCharCode(l)):a.push(t[n]),a[n].charCodeAt(0)>>8&&(u=!0);t=a.join("")}for(n=t.length;void 0===u&&0!==n;)t.charCodeAt(n-1)>>8&&(u=!0),n--;if(!u)return t;for(a=e.noBOM?[]:[254,255],n=0,i=t.length;n<i;n++){if((c=(l=t.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+t+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");a.push(c),a.push(l-(c<<8))}return String.fromCharCode.apply(void 0,a)}(t,e).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},le=p.__private__.beginPage=function(t){Y[++Pt]=[],At[Pt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(t[0]),topRightY:Number(t[1])}},ce(Pt),Q(Y[j])},ce=function(t){0<t&&t<=Pt&&(j=t)},he=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Y.length-1},fe=p.__private__.putInfo=function(){for(var t in Jt(),$("<<"),$("/Producer (jsPDF "+Z.version+")"),ft)ft.hasOwnProperty(t)&&ft[t]&&$("/"+t.substr(0,1).toUpperCase()+t.substr(1)+" ("+ue(ft[t])+")");$("/CreationDate ("+C+")"),$(">>"),$("endobj")},de=p.__private__.putCatalog=function(t){var e=(t=t||{}).rootDictionaryObjId||te;switch(Jt(),$("<<"),$("/Type /Catalog"),$("/Pages "+e+" 0 R"),rt||(rt="fullwidth"),rt){case"fullwidth":$("/OpenAction [3 0 R /FitH null]");break;case"fullheight":$("/OpenAction [3 0 R /FitV null]");break;case"fullpage":$("/OpenAction [3 0 R /Fit]");break;case"original":$("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+rt;"%"===n.substr(n.length-1)&&(rt=parseInt(rt)/100),"number"==typeof rt&&$("/OpenAction [3 0 R /XYZ null null "+L(rt)+"]")}switch(lt||(lt="continuous"),lt){case"continuous":$("/PageLayout /OneColumn");break;case"single":$("/PageLayout /SinglePage");break;case"two":case"twoleft":$("/PageLayout /TwoColumnLeft");break;case"tworight":$("/PageLayout /TwoColumnRight")}at&&$("/PageMode /"+at),Lt.publish("putCatalog"),$(">>"),$("endobj")},pe=p.__private__.putTrailer=function(){$("trailer"),$("<<"),$("/Size "+(U+1)),$("/Root "+U+" 0 R"),$("/Info "+(U-1)+" 0 R"),$("/ID [ <"+N+"> <"+N+"> ]"),$(">>")},me=p.__private__.putHeader=function(){$("%PDF-"+m),$("%\xba\xdf\xac\xe0")},be=p.__private__.putXRef=function(){var t="0000000000";$("xref"),$("0 "+(U+1)),$("0000000000 65535 f");for(var e=1;e<=U;e++)$("function"==typeof z[e]?(t+z[e]()).slice(-10)+" 00000 n":void 0!==z[e]?(t+z[e]).slice(-10)+" 00000 n":"0000000000 00000 n")},ve=p.__private__.buildDocument=function(){H=U=0,W=[],z=[],q=[],te=Zt(),ee=Zt(),Q(W),Lt.publish("buildDocument"),me(),ae(),function(){Lt.publish("putAdditionalObjects");for(var t=0;t<q.length;t++){var e=q[t];Qt(e.objId,!0),$(e.content),$("endobj")}Lt.publish("postPutAdditionalObjects")}(),zt(),fe(),de();var t=H;return be(),pe(),$("startxref"),$(""+t),$("%%EOF"),Q(Y[j]),W.join("\n")},ye=p.__private__.getBlob=function(t){return new Blob([et(t)],{type:"application/pdf"})},ge=p.output=p.__private__.output=((Kt=function(t,e){switch("string"==typeof(e=e||{})?e={filename:e}:e.filename=e.filename||"generated.pdf",t){case void 0:return ve();case"save":p.save(e.filename);break;case"arraybuffer":return et(ve());case"blob":return ye(ve());case"bloburi":case"bloburl":if(void 0!==u.URL&&"function"==typeof u.URL.createObjectURL)return u.URL&&u.URL.createObjectURL(ye(ve()))||void 0;console.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",i=ve();try{n=btoa(i)}catch(t){n=btoa(unescape(encodeURIComponent(i)))}return"data:application/pdf;filename="+e.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"!==Object.prototype.toString.call(u))throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");var r='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+(e.pdfObjectUrl||"https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js")+'"><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(e)+");<\/script></body></html>",o=u.open();return null!==o&&o.document.write(r),o;case"pdfjsnewwindow":if("[object Window]"!==Object.prototype.toString.call(u))throw new Error("The option pdfjsnewwindow just works in a browser-environment.");var s='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(e.pdfJsUrl||"examples/PDF.js/web/viewer.html")+'?file=" width="500px" height="400px" /></body></html>',a=u.open();if(null!==a){a.document.write(s);var l=this;a.document.documentElement.querySelector("#pdfViewer").onload=function(){a.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(l.output("bloburl"))}}return a;case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(u))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var c='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",e)+'"></iframe></body></html>',h=u.open();if(null!==h&&h.document.write(c),h||"undefined"==typeof safari)return h;break;case"datauri":case"dataurl":return u.document.location.href=this.output("datauristring",e);default:return null}}).foo=function(){try{return Kt.apply(this,arguments)}catch(n){var t=n.stack||"";~t.indexOf(" at ")&&(t=t.split(" at ")[1]);var e="Error in function "+t.split("\n")[0].split("<")[0]+": "+n.message;if(!u.console)throw new Error(e);u.console.error(e,n),u.alert&&alert(e)}},(Kt.foo.bar=Kt).foo);switch(i){case"pt":pt=1;break;case"mm":pt=72/25.4;break;case"cm":pt=72/2.54;break;case"in":pt=72;break;case"px":pt=1==Xt("px_scaling")?.75:96/72;break;case"pc":case"em":pt=12;break;case"ex":pt=6;break;default:throw new Error("Invalid unit: "+i)}B(),R();var Se=p.__private__.getPageInfo=p.getPageInfo=function(t){if(isNaN(t)||t%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:At[t].objId,pageNumber:t,pageContext:At[t]}},we=p.__private__.getPageInfoByObjId=function(t){if(isNaN(t)||t%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var e in At)if(At[e].objId===t)break;return Se(e)},_e=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:At[j].objId,pageNumber:j,pageContext:At[j]}};p.addPage=function(){return qt.apply(this,arguments),this},p.setPage=function(){return ce.apply(this,arguments),Q.call(this,Y[j]),this},p.insertPage=function(t){return this.addPage(),this.movePage(j,t),this},p.movePage=function(t,e){var n,i;if(e<t){n=Y[t],i=At[t];for(var r=t;e<r;r--)Y[r]=Y[r-1],At[r]=At[r-1];Y[e]=n,At[e]=i,this.setPage(e)}else if(t<e){n=Y[t],i=At[t];for(var o=t;o<e;o++)Y[o]=Y[o+1],At[o]=At[o+1];Y[e]=n,At[e]=i,this.setPage(e)}return this},p.deletePage=function(){return(function(t){0<t&&t<=Pt&&(Y.splice(t,1),At.splice(t,1),--Pt<j&&(j=Pt),this.setPage(j))}).apply(this,arguments),this},p.__private__.text=p.text=function(t,e,n,i,r){var o,s,u,l,c,h,f,p,m=(i=i||{}).scope||this;if("number"==typeof t&&"number"==typeof e&&("string"==typeof n||Array.isArray(n))){var b=n;n=e,e=t,t=b}if(arguments[3]instanceof It==0?(u=r,l=arguments[5],"object"===a(f=arguments[3])&&null!==f||("string"==typeof u&&(l=u,u=null),"string"==typeof f&&(l=f,f=null),"number"==typeof f&&(u=f,f=null),i={flags:f,angle:u,align:l})):(k("The transform parameter of text() with a Matrix value"),p=r),isNaN(e)||isNaN(n)||null==t)throw new Error("Invalid arguments passed to jsPDF.text");if(0===t.length)return m;var v,y="",g="number"==typeof i.lineHeightFactor?i.lineHeightFactor:Oe,_=m.internal.scaleFactor;function x(t){for(var e,n=t.concat(),i=[],r=n.length;r--;)"string"==typeof(e=n.shift())?i.push(e):Array.isArray(t)&&(1===e.length||void 0===e[1]&&void 0===e[2])?i.push(e[0]):i.push([e[0],e[1],e[2]]);return i}function P(t,e){var n;if("string"==typeof t)n=e(t)[0];else if(Array.isArray(t)){for(var i,r,o=t.concat(),s=[],a=o.length;a--;)"string"==typeof(i=o.shift())?s.push(e(i)[0]):Array.isArray(i)&&"string"==typeof i[0]&&(r=e(i[0],i[1],i[2]),s.push([r[0],r[1],r[2]]));n=s}return n}var A=!1,L=!0;if("string"==typeof t)A=!0;else if(Array.isArray(t)){var T=t.concat();s=[];for(var C,N=T.length;N--;)("string"!=typeof(C=T.shift())||Array.isArray(C)&&"string"!=typeof C[0])&&(L=!1);A=L}if(!1===A)throw new Error('Type of text must be string or Array. "'+t+'" is not recognized.');"string"==typeof t&&(t=t.match(/[\r?\n]/)?t.split(/\r\n|\r|\n/g):[t]);var I=it/m.internal.scaleFactor,R=I*(Oe-1);switch(i.baseline){case"bottom":n-=R;break;case"top":n+=I-R;break;case"hanging":n+=I-2*R;break;case"middle":n+=I/2-R}if(0<(h=i.maxWidth||0)&&("string"==typeof t?t=m.splitTextToSize(t,h):"[object Array]"===Object.prototype.toString.call(t)&&(t=m.splitTextToSize(t.join(" "),h))),Lt.publish("preProcessText",o={text:t,x:e,y:n,options:i,mutex:{pdfEscape:ue,activeFontKey:dt,fonts:yt,activeFontSize:it}}),t=o.text,u=(i=o.options).angle,p instanceof It==0&&u&&"number"==typeof u){u*=Math.PI/180,0===i.rotationDirection&&(u=-u),w===S&&(u=-u);var O=Math.cos(u),F=Math.sin(u);p=new It(O,F,-F,O,0,0)}else u&&u instanceof It&&(p=u);w!==S||p||(p=Ot),void 0!==(c=i.charSpace||Ke)&&(y+=E(M(c))+" Tc\n",this.setCharSpace(this.getCharSpace()||0));var B=-1,D=void 0!==i.renderingMode?i.renderingMode:i.stroke,j=m.internal.getCurrentPageInfo().pageContext;switch(D){case 0:case!1:case"fill":B=0;break;case 1:case!0:case"stroke":B=1;break;case 2:case"fillThenStroke":B=2;break;case 3:case"invisible":B=3;break;case 4:case"fillAndAddForClipping":B=4;break;case 5:case"strokeAndAddPathForClipping":B=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":B=6;break;case 7:case"addToPathForClipping":B=7}-1!==B?y+=B+" Tr\n":-1!==(void 0!==j.usedRenderingMode?j.usedRenderingMode:-1)&&(y+="0 Tr\n"),-1!==B&&(j.usedRenderingMode=B),l=i.align||"left";var V,G=it*g,U=m.internal.pageSize.getWidth(),z=yt[dt];c=i.charSpace||Ke,h=i.maxWidth||0,f={};var W=[];if("[object Array]"===Object.prototype.toString.call(t)){var H;s=x(t),"left"!==l&&(V=s.map((function(t){return m.getStringUnitWidth(t,{font:z,charSpace:c,fontSize:it,doKerning:!1})*it/_})));var q,Y=0;if("right"===l){e-=V[0],t=[],N=s.length;for(var X=0;X<N;X++)H=0===X?(q=Ge(e),Ue(n)):(q=M(Y-V[X]),-G),t.push([s[X],q,H]),Y=V[X]}else if("center"===l){e-=V[0]/2,t=[],N=s.length;for(var K=0;K<N;K++)H=0===K?(q=Ge(e),Ue(n)):(q=M((Y-V[K])/2),-G),t.push([s[K],q,H]),Y=V[K]}else if("left"===l){t=[],N=s.length;for(var J=0;J<N;J++)t.push(s[J])}else{if("justify"!==l)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');t=[],N=s.length,h=0!==h?h:U;for(var Z=0;Z<N;Z++)H=0===Z?Ue(n):-G,q=0===Z?Ge(e):0,Z<N-1&&W.push(E(M((h-V[Z])/(s[Z].split(" ").length-1)))),t.push([s[Z],q,H])}}!0===("boolean"==typeof i.R2L?i.R2L:st)&&(t=P(t,(function(t,e,n){return[t.split("").reverse().join(""),e,n]}))),Lt.publish("postProcessText",o={text:t,x:e,y:n,options:i,mutex:{pdfEscape:ue,activeFontKey:dt,fonts:yt,activeFontSize:it}}),t=o.text,v=o.mutex.isHex||!1;var Q=yt[dt].encoding;"WinAnsiEncoding"!==Q&&"StandardEncoding"!==Q||(t=P(t,(function(t,e,n){return[function(t){return t=t.split("\t").join(Array(i.TabLen||9).join(" ")),ue(t,f)}(t),e,n]}))),s=x(t),t=[];for(var tt,et,nt,rt=Array.isArray(s[0])?1:0,ot="",at=function(t,e,n){return n instanceof It?(n="number"==typeof i.angle?Rt(n,new It(1,0,0,1,t,e)):Rt(new It(1,0,0,1,t,e),n),w===S&&(n=Rt(new It(1,0,0,-1,0,0),n)),n.join(" ")+" Tm\n"):E(t)+" "+E(e)+" Td\n"},ut=0;ut<s.length;ut++){switch(ot="",rt){case 1:nt=(v?"<":"(")+s[ut][0]+(v?">":")"),tt=parseFloat(s[ut][1]),et=parseFloat(s[ut][2]);break;case 0:nt=(v?"<":"(")+s[ut]+(v?">":")"),tt=Ge(e),et=Ue(n)}void 0!==W&&void 0!==W[ut]&&(ot=W[ut]+" Tw\n"),0===ut?t.push(ot+at(tt,et,p)+nt):0==rt?t.push(ot+nt):1==rt&&t.push(ot+at(tt,et,p)+nt)}t=t.join(0==rt?" Tj\nT* ":" Tj\n"),t+=" Tj\n";var lt="BT\n/";return lt+=dt+" "+it+" Tf\n",lt+=E(it*g)+" TL\n",lt+=Ye+"\n",lt+=y,lt+=t,$(lt+="ET"),d[dt]=!0,m},p.__private__.lstext=p.lstext=function(t,e,n,i){return this.text(t,e,n,{charSpace:i})};var xe=p.__private__.clip=p.clip=function(t){return $("evenodd"===t?"W*":"W"),this};p.clipEvenOdd=function(){return xe("evenodd")},p.__private__.clip_fixed=p.clip_fixed=function(t){return p.clip(t)},p.__private__.discardPath=p.discardPath=function(){return $("n"),this};var ke=p.__private__.isValidStyle=function(t){var e=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(t)&&(e=!0),e};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(t){return ke(t)&&(h=t),this};var Ee=p.__private__.getStyle=p.getStyle=function(t){var e=h;switch(t){case"D":case"S":e="S";break;case"F":e="f";break;case"FD":case"DF":e="B";break;case"f":case"f*":case"B":case"B*":e=t}return e},Pe=p.close=function(){return $("h"),this};function Ae(t,e,n){null===t||w===S&&void 0===t||(t=Ee(t),e?(n||(n={matrix:Ot}),n instanceof It&&(n={matrix:n}),n.key=e,n||(n=Ot),Te(n,t)):$(t))}p.stroke=function(){return $("S"),this},p.fill=function(t){return Le("f",t),this},p.fillEvenOdd=function(t){return Le("f*",t),this},p.fillStroke=function(t){return Le("B",t),this},p.fillStrokeEvenOdd=function(t){return Le("B*",t),this};var Le=function(t,e){"object"===a(e)?Te(e,t):$(t)},Te=function(t,e){var n=_t[t.key],i=wt[n];if(i instanceof p.ShadingPattern)$("q"),$(Me(e)),i.gState&&p.setGState(i.gState),$(t.matrix.toString()+" cm"),$("/"+n+" sh"),$("Q");else if(i instanceof p.TilingPattern){var r=new It(1,0,0,-1,0,un());t.matrix&&(r=r.multiply(t.matrix||Ot),n=i.createClone(t.key,t.boundingBox,t.xStep,t.yStep,r).id),$("q"),$("/Pattern cs"),$("/"+n+" scn"),i.gState&&p.setGState(i.gState),$(e),$("Q")}},Me=function(t){switch(t){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ce=p.moveTo=function(t,e){return $(E(M(t))+" "+E(A(e))+" m"),this},Ne=p.lineTo=function(t,e){return $(E(M(t))+" "+E(A(e))+" l"),this},Ie=p.curveTo=function(t,e,n,i,r,o){return $([E(M(t)),E(A(e)),E(M(n)),E(A(i)),E(M(r)),E(A(o)),"c"].join(" ")),this};p.__private__.line=p.line=function(t,e,n,i,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||!ke(r))throw new Error("Invalid arguments passed to jsPDF.line");return w===g?this.lines([[n-t,i-e]],t,e,[1,1],r||"S"):this.lines([[n-t,i-e]],t,e,[1,1]).stroke()},p.__private__.lines=p.lines=function(t,e,n,i,r,o,s,a){var u,l,c,h,f,d,p,m;if("number"==typeof t&&(m=n,n=e,e=t,t=m),i=i||[1,1],o=o||!1,isNaN(e)||isNaN(n)||!Array.isArray(t)||!Array.isArray(i)||!ke(r)||"boolean"!=typeof o)throw new Error("Invalid arguments passed to jsPDF.lines");for(Ce(e,n),u=i[0],l=i[1],h=t.length,d=e,p=n,c=0;c<h;c++)2===(f=t[c]).length?Ne(d=f[0]*u+d,p=f[1]*l+p):Ie(f[0]*u+d,f[1]*l+p,f[2]*u+d,f[3]*l+p,d=f[4]*u+d,p=f[5]*l+p);return o&&Pe(),Ae(r,s,a),this},p.path=function(t,e,n,i){for(var r=0;r<t.length;r++){var o=t[r],s=o.c;switch(o.op){case"m":Ce(s[0],s[1]);break;case"l":Ne(s[0],s[1]);break;case"c":Ie.apply(this,s);break;case"h":Pe()}}return Ae(e,n,i),this},p.__private__.rect=p.rect=function(t,e,n,i,r,o,s){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||!ke(r))throw new Error("Invalid arguments passed to jsPDF.rect");return w===g&&(i=-i),$([E(M(t)),E(A(e)),E(M(n)),E(M(i)),"re"].join(" ")),Ae(r,o,s),this},p.__private__.triangle=p.triangle=function(t,e,n,i,r,o,s,a,u){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||isNaN(r)||isNaN(o)||!ke(s))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-t,i-e],[r-n,o-i],[t-r,e-o]],t,e,[1,1],s,!0,a,u),this},p.__private__.roundedRect=p.roundedRect=function(t,e,n,i,r,o,s,a,u){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||isNaN(r)||isNaN(o)||!ke(s))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var l=4/3*(Math.SQRT2-1);return r=Math.min(r,.5*n),o=Math.min(o,.5*i),this.lines([[n-2*r,0],[r*l,0,r,o-o*l,r,o],[0,i-2*o],[0,o*l,-r*l,o,-r,o],[2*r-n,0],[-r*l,0,-r,-o*l,-r,-o],[0,2*o-i],[0,-o*l,r*l,-o,r,-o]],t+r,e,[1,1],s,!0,a,u),this},p.__private__.ellipse=p.ellipse=function(t,e,n,i,r,o,s){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||!ke(r))throw new Error("Invalid arguments passed to jsPDF.ellipse");var a=4/3*(Math.SQRT2-1)*n,u=4/3*(Math.SQRT2-1)*i;return Ce(t+n,e),Ie(t+n,e-u,t+a,e-i,t,e-i),Ie(t-a,e-i,t-n,e-u,t-n,e),Ie(t-n,e+u,t-a,e+i,t,e+i),Ie(t+a,e+i,t+n,e+u,t+n,e),Ae(r,o,s),this},p.__private__.circle=p.circle=function(t,e,n,i,r,o){if(isNaN(t)||isNaN(e)||isNaN(n)||!ke(i))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(t,e,n,n,i,r,o)},p.setFont=function(t,e){return dt=Yt(t,e,{disableWarning:!1}),this};var Re=p.__private__.getFont=p.getFont=function(){return yt[Yt.apply(p,arguments)]};p.setFontStyle=p.setFontType=function(t){return dt=Yt(void 0,t),this},p.__private__.getFontList=p.getFontList=function(){var t,e,n={};for(t in gt)if(gt.hasOwnProperty(t))for(e in n[t]=[],gt[t])gt[t].hasOwnProperty(e)&&n[t].push(e);return n},p.addFont=function(t,e,n,i){return Ht.call(this,t,e,n,i=i||"Identity-H")};var Oe,Fe=t.lineWidth||.200025,Be=p.__private__.setLineWidth=p.setLineWidth=function(t){return $(E(M(t))+" w"),this};p.__private__.setLineDash=Z.API.setLineDash=Z.API.setLineDashPattern=function(t,e){if(t=t||[],e=e||0,isNaN(e)||!Array.isArray(t))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return t=t.map((function(t){return E(M(t))})).join(" "),e=E(M(e)),$("["+t+"] "+e+" d"),this};var De=p.__private__.getLineHeight=p.getLineHeight=function(){return it*Oe};p.__private__.getLineHeight=p.getLineHeight=function(){return it*Oe};var je=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(t){return"number"==typeof(t=t||1.15)&&(Oe=t),this},Ve=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Oe};je(t.lineHeight);var Ge=p.__private__.getHorizontalCoordinate=function(t){return M(t)},Ue=p.__private__.getVerticalCoordinate=function(t){return w===S?t:At[j].mediaBox.topRightY-At[j].mediaBox.bottomLeftY-M(t)},ze=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(t){return E(Ge(t))},We=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(t){return E(Ue(t))},He=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return ne(He)},p.__private__.setStrokeColor=p.setDrawColor=function(t,e,n,i){return He=ie({ch1:t,ch2:e,ch3:n,ch4:i,pdfColorType:"draw",precision:2}),$(He),this};var qe=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return ne(qe)},p.__private__.setFillColor=p.setFillColor=function(t,e,n,i){return qe=ie({ch1:t,ch2:e,ch3:n,ch4:i,pdfColorType:"fill",precision:2}),$(qe),this};var Ye=t.textColor||"0 g",Xe=p.__private__.getTextColor=p.getTextColor=function(){return ne(Ye)};p.__private__.setTextColor=p.setTextColor=function(t,e,n,i){return Ye=ie({ch1:t,ch2:e,ch3:n,ch4:i,pdfColorType:"text",precision:3}),this};var Ke=t.charSpace,Je=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Ke||0)};p.__private__.setCharSpace=p.setCharSpace=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ke=t,this};var Ze=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(t){var e=p.CapJoinStyles[t];if(void 0===e)throw new Error("Line cap style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $((Ze=e)+" J"),this};var Qe=0;p.__private__.setLineJoin=p.setLineJoin=function(t){var e=p.CapJoinStyles[t];if(void 0===e)throw new Error("Line join style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $((Qe=e)+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(t){if(t=t||0,isNaN(t))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return $(E(M(t))+" M"),this},p.GState=function(t){var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&0<=e.indexOf(n)&&(this[n]=t[n]);this.id="",this.objectNumber=-1},p.GState.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||a(t)!==a(this))return!1;var i=0;for(e in this)if(!(0<=n.indexOf(e))){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e))return!1;if(this[e]!==t[e])return!1;i++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&i--;return 0===i},p.setGState=function(t){(t="string"==typeof t?xt[kt[t]]:$e(null,t)).equals(Et)||($("/"+t.id+" gs"),Et=t)};var $e=function(t,e){if(!t||!kt[t]){var n=!1;for(var i in xt)if(xt.hasOwnProperty(i)&&xt[i].equals(e)){n=!0;break}if(n)e=xt[i];else{var r="GS"+(Object.keys(xt).length+1).toString(10);(xt[r]=e).id=r}return t&&(kt[t]=e.id),Lt.publish("addGState",e),e}};function tn(){this.page=Pt,this.currentPage=j,this.pages=Y.slice(0),this.pagesContext=At.slice(0),this.x=mt,this.y=bt,this.matrix=vt,this.width=sn(j),this.height=un(j),this.outputDestination=K,this.id="",this.objectNumber=-1}p.addGState=function(t,e){return $e(t,e),this},p.saveGraphicsState=function(){return $("q"),St.push({key:dt,size:it,color:Ye}),this},p.restoreGraphicsState=function(){$("Q");var t=St.pop();return dt=t.key,it=t.size,Ye=t.color,Et=null,this},p.setCurrentTransformationMatrix=function(t){return $(t.toString()+" cm"),this},p.comment=function(t){return $("#"+t),this};var en=function(t,e){var n=t||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(t){isNaN(t)||(n=parseFloat(t))}});var i=e||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return i},set:function(t){isNaN(t)||(i=parseFloat(t))}});var r="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return r},set:function(t){r=t.toString()}}),this},nn=function(t,e,n,i){en.call(this,t,e),this.type="rect";var r=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return r},set:function(t){isNaN(t)||(r=parseFloat(t))}});var o=i||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return o},set:function(t){isNaN(t)||(o=parseFloat(t))}}),this};tn.prototype.restore=function(){Pt=this.page,At=this.pagesContext,Y=this.pages,mt=this.x,bt=this.y,vt=this.matrix,an(j=this.currentPage,this.width),ln(j,this.height),K=this.outputDestination};var rn=function(t,e,n,i,r){Nt.push(new tn),Pt=j=0,Y=[],mt=t,bt=e,vt=r,le([n,i])};for(var on in p.beginFormObject=function(t,e,n,i,r){return rn(t,e,n,i,r),this},p.endFormObject=function(t){return function(t){if(!Ct[t]){var e=new tn,n="Xo"+(Object.keys(Mt).length+1).toString(10);e.id=n,Ct[t]=n,Mt[n]=e,Lt.publish("addFormObject",e),Nt.pop().restore()}}(t),this},p.doFormObject=function(t,e){var n=Mt[Ct[t]];return $("q"),$(e.toString()+" cm"),$("/"+n.id+" Do"),$("Q"),this},p.getFormObject=function(t){var e=Mt[Ct[t]];return{x:e.x,y:e.y,width:e.width,height:e.height,matrix:e.matrix}},p.save=function(t,e){if(t=t||"generated.pdf",(e=e||{}).returnPromise=e.returnPromise||!1,!1!==e.returnPromise)return new Promise((function(e,n){try{var i=saveAs(ye(ve()),t);"function"!=typeof saveAs.unload||u.setTimeout&&setTimeout(saveAs.unload,911),e(i)}catch(e){n(e.message)}}));saveAs(ye(ve()),t),"function"!=typeof saveAs.unload||u.setTimeout&&setTimeout(saveAs.unload,911)},Z.API)Z.API.hasOwnProperty(on)&&("events"===on&&Z.API.events.length?function(t,e){var n,i;for(i=e.length-1;-1!==i;i--)t.subscribe.apply(t,[e[i][0]].concat("function"==typeof(n=e[i][1])?[n]:n))}(Lt,Z.API.events):p[on]=Z.API[on]);var sn=p.getPageWidth=function(t){return(At[t=t||j].mediaBox.topRightX-At[t].mediaBox.bottomLeftX)/pt},an=p.setPageWidth=function(t,e){At[t].mediaBox.topRightX=e*pt+At[t].mediaBox.bottomLeftX},un=p.getPageHeight=function(t){return(At[t=t||j].mediaBox.topRightY-At[t].mediaBox.bottomLeftY)/pt},ln=p.setPageHeight=function(t,e){At[t].mediaBox.topRightY=e*pt+At[t].mediaBox.bottomLeftY};return p.internal={pdfEscape:ue,getStyle:Ee,getFont:Re,getFontSize:ot,getCharSpace:Je,getTextColor:Xe,getLineHeight:De,getLineHeightFactor:Ve,write:tt,getHorizontalCoordinate:Ge,getVerticalCoordinate:Ue,getCoordinateString:ze,getVerticalCoordinateString:We,collections:{},newObject:Jt,newAdditionalObject:$t,newObjectDeferred:Zt,newObjectDeferredBegin:Qt,getFilters:re,putStream:oe,events:Lt,scaleFactor:pt,pageSize:{getWidth:function(){return sn(j)},setWidth:function(t){an(j,t)},getHeight:function(){return un(j)},setHeight:function(t){ln(j,t)}},output:ge,getNumberOfPages:he,pages:Y,out:$,f2:L,f3:T,getPageInfo:Se,getPageInfoByObjId:we,getCurrentPageInfo:_e,getPDFVersion:b,Point:en,Rectangle:nn,Matrix:It,hasHotfix:Xt},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return sn(j)},set:function(t){an(j,t)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return un(j)},set:function(t){ln(j,t)},enumerable:!0,configurable:!0}),function(t){for(var e=0,n=nt.length;e<n;e++){var i=Ht(t[e][0],t[e][1],t[e][2],nt[e][3],!0);!1===f&&(d[i]=!0);var r=t[e][0].split("-");Wt({id:i,fontName:r[0],fontStyle:r[1]||""})}Lt.publish("addFonts",{fonts:yt,dictionary:gt})}(nt),dt="F1",qt(r,n),Lt.publish("initialized"),p}function Q(t){if(void 0!==t&&""!=t)return!0}function $(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(e){t=e}});var e=150;Object.defineProperty(this,"width",{get:function(){return e},set:function(t){e=isNaN(t)||!1===Number.isInteger(t)||t<0?150:t,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=e+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(t){n=isNaN(t)||!1===Number.isInteger(t)||t<0?300:t,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(t){i=t}});var r={};Object.defineProperty(this,"style",{get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"parentNode",{})}function tt(t){var e,n,i,r,o,s,a,u,l,c;for(/[^\x00-\xFF]/.test(t),n=[],i=0,r=(t+=e="\0\0\0\0".slice(t.length%4||4)).length;i<r;i+=4)0!==(o=(t.charCodeAt(i)<<24)+(t.charCodeAt(i+1)<<16)+(t.charCodeAt(i+2)<<8)+t.charCodeAt(i+3))?(s=(o=((o=((o=((o=(o-(c=o%85))/85)-(l=o%85))/85)-(u=o%85))/85)-(a=o%85))/85)%85,n.push(33+s,33+a,33+u,33+l,33+c)):n.push(122);return function(t,n){for(var i=e.length;0<i;i--)t.pop()}(n),String.fromCharCode.apply(String,n)+"~>"}function et(t){var e,n,i,r,o,s=String,a="length",u="charCodeAt",l="slice",c="replace";for(t[l](-2),t=t[l](0,-2)[c](/\s/g,"")[c]("z","!!!!!"),i=[],r=0,o=(t+=e="uuuuu"[l](t[a]%5||5))[a];r<o;r+=5)n=52200625*(t[u](r)-33)+614125*(t[u](r+1)-33)+7225*(t[u](r+2)-33)+85*(t[u](r+3)-33)+(t[u](r+4)-33),i.push(255&n>>24,255&n>>16,255&n>>8,255&n);return function(t,n){for(var i=e[a];0<i;i--)t.pop()}(i),s.fromCharCode.apply(s,i)}function nt(t){var e=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(t=t.replace(/\s/g,"")).indexOf(">")&&(t=t.substr(0,t.indexOf(">"))),t.length%2&&(t+="0"),!1===e.test(t))return"";for(var n="",i=0;i<t.length;i+=2)n+=String.fromCharCode("0x"+(t[i]+t[i+1]));return n}function it(t){for(var e,n,i=[],r=t.length;r--;)i[r]=t.charCodeAt(r);return e=h.adler32cs.from(t),t=function(t,e){var n=new Uint8Array(t.byteLength+e.byteLength);return n.set(new Uint8Array(t),0),n.set(new Uint8Array(e),t.byteLength),n}(t=(n=new Deflater(6)).append(new Uint8Array(i)),n.flush()),(i=new Uint8Array(t.byteLength+6)).set(new Uint8Array([120,156])),i.set(t,2),i.set(new Uint8Array([255&e,e>>8&255,e>>16&255,e>>24&255]),t.byteLength+2),i.reduce((function(t,e){return t+String.fromCharCode(e)}),"")}function rt(t,e,n,i){var r=5,o=E;switch(i){case g.image_compression.FAST:r=3,o=k;break;case g.image_compression.MEDIUM:r=6,o=P;break;case g.image_compression.SLOW:r=9,o=A}t=x(t,e,n,o);var s=new Uint8Array(_(r)),a=K.API.adler32cs.fromBuffer(t.buffer),u=new Deflater(r),l=u.append(t),c=u.flush(),h=s.length+l.length+c.length,f=new Uint8Array(h+4);return f.set(s),f.set(l,s.length),f.set(c,s.length+l.length),f[h++]=a>>>24&255,f[h++]=a>>>16&255,f[h++]=a>>>8&255,f[h++]=255&a,g.__addimage__.arrayBufferToBinaryString(f)}function ot(t){var e=Array.apply([],t);return e.unshift(0),e}function st(t,e,n,i){for(var r=[],o=0,s=t.length,a=0;o!==s&&a+e[o]<n;)a+=e[o],o++;r.push(t.slice(0,o));var u=o;for(a=0;o!==s;)a+e[o]>i&&(r.push(t.slice(u,o)),a=0,u=o),a+=e[o],o++;return u!==o&&r.push(t.slice(u,o)),r}function at(t,e,n){n||(n={});var i,r,o,s,a,u,l=[],c=[l],h=n.textIndent||0,f=0,d=0,p=t.split(" "),m=O.apply(this,[" ",n])[0];if(u=-1===n.lineIndent?p[0].length+2:n.lineIndent||0){var b=Array(u).join(" "),v=[];p.map((function(t){1<(t=t.split(/\s*\n/)).length?v=v.concat(t.map((function(t,e){return(e&&t.length?"\n":"")+t}))):v.push(t[0])})),p=v,u=F.apply(this,[b,n])}for(o=0,s=p.length;o<s;o++){var y=0;if(i=p[o],u&&"\n"==i[0]&&(i=i.substr(1),y=1),e<h+f+(d=(r=O.apply(this,[i,n])).reduce((function(t,e){return t+e}),0))||y){if(e<d){for(a=st.apply(this,[i,r,e-(h+f),e]),l.push(a.shift()),l=[a.pop()];a.length;)c.push([a.shift()]);d=r.slice(i.length-(l[0]?l[0].length:0)).reduce((function(t,e){return t+e}),0)}else l=[i];c.push(l),h=d+u,f=m}else l.push(i),h+=f+d,f=m}return c.map(u?function(t,e){return(e?b:"")+t.join(" ")}:function(t){return t.join(" ")})}function ut(t){for(var e=t.length,n=new Uint8Array(e),i=0;i<e;i++)n[i]=t.charCodeAt(i);return n}function lt(){var t='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',e=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(t)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),r=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),o=unescape(encodeURIComponent("</x:xmpmeta>")),s=n.length+i.length+r.length+e.length+o.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+s+" >>"),this.internal.write("stream"),this.internal.write(e+n+i+r+o),this.internal.write("endstream"),this.internal.write("endobj")}function ct(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")}function ht(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0}function ft(t){var e=0;if(71!==t[e++]||73!==t[e++]||70!==t[e++]||56!==t[e++]||56!=(t[e++]+1&253)||97!==t[e++])throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,i=t[e++]|t[e++]<<8,r=t[e++];e++,e++;var o=null,s=null;r>>7&&(o=e,e+=3*(s=1<<1+(7&r)));var a=!0,u=[],l=0,c=null,h=0,f=null;for(this.width=n,this.height=i;a&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(11!==t[e]||78==t[e+1]&&69==t[e+2]&&84==t[e+3]&&83==t[e+4]&&67==t[e+5]&&65==t[e+6]&&80==t[e+7]&&69==t[e+8]&&50==t[e+9]&&46==t[e+10]&&48==t[e+11]&&3==t[e+12]&&1==t[e+13]&&0==t[e+16])e+=14,f=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!(0<=(k=t[e++])))throw Error("Invalid block size");if(0===k)break;e+=k}break;case 249:if(4!==t[e++]||0!==t[e+4])throw new Error("Invalid graphics extension block.");var d=t[e++];l=t[e++]|t[e++]<<8,c=t[e++],0==(1&d)&&(c=null),h=d>>2&7,e++;break;case 254:for(;;){if(!(0<=(k=t[e++])))throw Error("Invalid block size");if(0===k)break;e+=k}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var p=t[e++]|t[e++]<<8,m=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,y=t[e++],g=y>>6&1,S=o,w=s,_=!1;y>>7&&(_=!0,S=e,e+=3*(w=1<<1+(7&y)));var x=e;for(e++;;){var k;if(!(0<=(k=t[e++])))throw Error("Invalid block size");if(0===k)break;e+=k}u.push({x:p,y:m,width:b,height:v,has_local_palette:_,palette_offset:S,palette_size:w,data_offset:x,data_length:e-x,transparent_index:c,interlaced:!!g,delay:l,disposal:h});break;case 59:a=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return f},this.frameInfo=function(t){if(t<0||t>=u.length)throw new Error("Frame index out of range.");return u[t]},this.decodeAndBlitFrameBGRA=function(e,i){var r=this.frameInfo(e),o=r.width*r.height,s=new Uint8Array(o);dt(t,r.data_offset,s,o);var a=r.palette_offset,u=r.transparent_index;null===u&&(u=256);var l=r.width,c=n-l,h=l,f=4*(r.y*n+r.x),d=4*((r.y+r.height)*n+r.x),p=f,m=4*c;!0===r.interlaced&&(m+=4*n*7);for(var b=8,v=0,y=s.length;v<y;++v){var g=s[v];if(0===h&&(h=l,d<=(p+=m)&&(m=4*c+4*n*(b-1),p=f+(l+c)*(b<<1),b>>=1)),g===u)p+=4;else{var S=t[a+3*g],w=t[a+3*g+1];i[p++]=t[a+3*g+2],i[p++]=w,i[p++]=S,i[p++]=255}--h}},this.decodeAndBlitFrameRGBA=function(e,i){var r=this.frameInfo(e),o=r.width*r.height,s=new Uint8Array(o);dt(t,r.data_offset,s,o);var a=r.palette_offset,u=r.transparent_index;null===u&&(u=256);var l=r.width,c=n-l,h=l,f=4*(r.y*n+r.x),d=4*((r.y+r.height)*n+r.x),p=f,m=4*c;!0===r.interlaced&&(m+=4*n*7);for(var b=8,v=0,y=s.length;v<y;++v){var g=s[v];if(0===h&&(h=l,d<=(p+=m)&&(m=4*c+4*n*(b-1),p=f+(l+c)*(b<<1),b>>=1)),g===u)p+=4;else{var S=t[a+3*g+1],w=t[a+3*g+2];i[p++]=t[a+3*g],i[p++]=S,i[p++]=w,i[p++]=255}--h}}}function dt(t,e,n,i){for(var r=t[e++],o=1<<r,s=1+o,a=1+s,u=r+1,l=(1<<u)-1,c=0,h=0,f=0,d=t[e++],p=new Int32Array(4096),m=null;;){for(;c<16&&0!==d;)h|=t[e++]<<c,c+=8,1===d?d=t[e++]:--d;if(c<u)break;var b=h&l;if(h>>=u,c-=u,b!=o){if(b==s)break;for(var v=b<a?b:m,y=0,g=v;o<g;)g=p[g]>>8,++y;var S=g;if(i<f+y+(v!==b?1:0))return void console.log("Warning, gif stream longer than expected.");n[f++]=S;var w=f+=y;for(v!==b&&(n[f++]=S),g=v;y--;)n[--w]=255&(g=p[g]),g>>=8;null!==m&&a<4096&&(p[a++]=m<<8|S,l+1<=a&&u<12&&(++u,l=l<<1|1)),m=b}else a=1+s,l=(1<<(u=r+1))-1,m=null}return f!==i&&console.log("Warning, gif stream shorter than expected."),n}!function(t,e){function n(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")}function i(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")}function r(t){return t.toFixed(2)}function o(t){return t.toFixed(5)}var s,u=t.API,l=1;function c(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}function h(t){return t*l}function f(t){return t/l}function d(t){var e=new O,n=K.internal.getHeight(t)||0,i=K.internal.getWidth(t)||0;return e.BBox=[0,0,Number(r(i)),Number(r(n))],e}function p(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=P(t,t.V||t.DV),i=s.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(s.__private__.encodeColorString(t.color)),e.push("/"+i+" "+r(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=new d(t);return o.stream=e.join("\n"),o}}function m(){s.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=s.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];n.objId=void 0,n.hasAnnotation&&T.call(s,n)}}function b(){if(void 0===s.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");s.internal.write("/AcroForm "+s.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}function v(){s.internal.events.unsubscribe(s.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete s.internal.acroformPlugin.acroFormDictionaryRoot._eventID,s.internal.acroformPlugin.printedOut=!0}function y(t){var e=!t;for(var n in t||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),t=t||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(t.hasOwnProperty(n)){var i=t[n],r=[],o=i.Rect;if(i.Rect&&(i.Rect=E.call(this,i.Rect)),s.internal.newObjectDeferredBegin(i.objId,!0),i.DA=K.createDefaultAppearanceStream(i),"object"===a(i)&&"function"==typeof i.getKeyValueListForStream&&(r=i.getKeyValueListForStream()),i.Rect=o,i.hasAppearanceStream&&!i.appearanceStreamContent){var u=p.call(this,i);r.push({key:"AP",value:"<</N "+u+">>"}),s.internal.acroformPlugin.xForms.push(u)}if(i.appearanceStreamContent){var l="";for(var c in i.appearanceStreamContent)if(i.appearanceStreamContent.hasOwnProperty(c)){var h=i.appearanceStreamContent[c];if(l+="/"+c+" ",l+="<<",1<=Object.keys(h).length||Array.isArray(h)){for(var n in h)if(h.hasOwnProperty(n)){var f=h[n];"function"==typeof f&&(f=f.call(this,i)),l+="/"+n+" "+f+" ",0<=s.internal.acroformPlugin.xForms.indexOf(f)||s.internal.acroformPlugin.xForms.push(f)}}else"function"==typeof(f=h)&&(f=f.call(this,i)),l+="/"+n+" "+f,0<=s.internal.acroformPlugin.xForms.indexOf(f)||s.internal.acroformPlugin.xForms.push(f);l+=">>"}r.push({key:"AP",value:"<<\n"+l+">>"})}s.internal.putStream({additionalKeyValues:r}),s.internal.out("endobj")}e&&M.call(this,s.internal.acroformPlugin.xForms)}u.__acroform__={};var g=u.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},S=u.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},w=u.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(t&1<<e)?0:1},_=u.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return w(t,e-1)},x=u.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return g(t,e-1)},k=u.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return S(t,e-1)},E=u.__acroform__.calculateCoordinates=function(t){var e=this.internal.getHorizontalCoordinate,n=this.internal.getVerticalCoordinate,i=t[0],o=t[1],s=t[2],a=t[3],u={};return u.lowerLeft_X=e(i)||0,u.lowerLeft_Y=n(o+a)||0,u.upperRight_X=e(i+s)||0,u.upperRight_Y=n(o)||0,[Number(r(u.lowerLeft_X)),Number(r(u.lowerLeft_Y)),Number(r(u.upperRight_X)),Number(r(u.upperRight_Y))]},P=function(t,e){var i=0===t.fontSize?t.maxFontSize:t.fontSize,o={text:"",fontSize:""},s=(e=")"==(e="("==e.substr(0,1)?e.substr(1):e).substr(e.length-1)?e.substr(0,e.length-1):e).split(" "),a=i,u=K.internal.getHeight(t)||0;u=u<0?-u:u;var l=K.internal.getWidth(t)||0;function c(e,n,i){return e+1<s.length&&A(n+" "+s[e+1],t,i).width<=l-4}l=l<0?-l:l,a++;t:for(;0<a;){e="";var h,f,d=A("3",t,--a).height,p=t.multiline?u-a:(u-d)/2,m=p+=2,b=0,v=0;if(a<=0){e="(...) Tj\n",e+="% Width of Text: "+A(e,t,a=12).width+", FieldWidth:"+l+"\n";break}var y="",g=0;for(var S in s)if(s.hasOwnProperty(S)){y=" "==(y+=s[S]+" ").substr(y.length-1)?y.substr(0,y.length-1):y;var w=parseInt(S),_=c(w,y,a),x=S>=s.length-1;if(_&&!x){y+=" ";continue}if(_||x){if(x)v=w;else if(t.multiline&&u<(d+2)*(g+2)+2)continue t}else{if(!t.multiline)continue t;if(u<(d+2)*(g+2)+2)continue t;v=w}for(var k="",E=b;E<=v;E++)k+=s[E]+" ";switch(k=" "==k.substr(k.length-1)?k.substr(0,k.length-1):k,f=A(k,t,a).width,t.textAlign){case"right":h=l-f-2;break;case"center":h=(l-f)/2;break;case"left":default:h=2}e+=r(h)+" "+r(m)+" Td\n",e+="("+n(k)+") Tj\n",e+=-r(h)+" 0 Td\n",m=-(a+2),f=0,b=v+1,g++,y=""}break}return o.text=e,o.fontSize=a,o},A=function(t,e,n){var i=s.internal.getFont(e.fontName,e.fontStyle),r=s.getStringUnitWidth(t,{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:s.getStringUnitWidth("3",{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:r}},L={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},T=function(t){var e={type:"reference",object:t};void 0===s.internal.getPageInfo(t.page).pageContext.annotations.find((function(t){return t.type===e.type&&t.object===e.object}))&&s.internal.getPageInfo(t.page).pageContext.annotations.push(e)},M=function(t){for(var e in t)if(t.hasOwnProperty(e)){var n=e,i=t[e];s.internal.newObjectDeferredBegin(i&&i.objId,!0),"object"===a(i)&&"function"==typeof i.putStream&&i.putStream(),delete t[n]}},C=function(){if(void 0!==this.internal&&(void 0===this.internal.acroformPlugin||!1===this.internal.acroformPlugin.isInitialized)){if(s=this,B.FieldNum=0,this.internal.acroformPlugin=JSON.parse(JSON.stringify(L)),this.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");l=s.internal.scaleFactor,s.internal.acroformPlugin.acroFormDictionaryRoot=new F,s.internal.acroformPlugin.acroFormDictionaryRoot._eventID=s.internal.events.subscribe("postPutResources",v),s.internal.events.subscribe("buildDocument",m),s.internal.events.subscribe("putCatalog",b),s.internal.events.subscribe("postPutPages",y),s.internal.acroformPlugin.isInitialized=!0}},N=u.__acroform__.arrayToPdfArray=function(t){if(Array.isArray(t)){for(var e="[",i=0;i<t.length;i++)switch(0!==i&&(e+=" "),a(t[i])){case"boolean":case"number":case"object":e+=t[i].toString();break;case"string":"/"!==t[i].substr(0,1)?e+="("+n(t[i].toString())+")":e+=t[i].toString()}return e+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")};function I(t){return(t=t||"").toString(),"("+n(t)+")"}function R(){var t;Object.defineProperty(this,"objId",{configurable:!0,get:function(){return t||(t=s.internal.newObjectDeferred()),t},set:function(e){t=e}})}R.prototype.toString=function(){return this.objId+" 0 R"},R.prototype.putStream=function(){var t=this.getKeyValueListForStream();s.internal.putStream({data:this.stream,additionalKeyValues:t}),s.internal.out("endobj")},R.prototype.getKeyValueListForStream=function(){return function(t){var e=[],n=Object.getOwnPropertyNames(t).filter((function(t){return"content"!=t&&"appearanceStreamContent"!=t&&"_"!=t.substring(0,1)}));for(var i in n)if(!1===Object.getOwnPropertyDescriptor(t,n[i]).configurable){var r=n[i],o=t[r];o&&(Array.isArray(o)?e.push({key:r,value:N(o)}):o instanceof R?e.push({key:r,value:o.objId+" 0 R"}):"function"!=typeof o&&e.push({key:r,value:o}))}return e}(this)};var O=function(){R.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writeable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writeable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writeable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,writeable:!0,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writeable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){t=e.trim()},get:function(){return t||null}})};c(O,R);var F=function(){R.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return 0<e.length?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t)return"("+t+")"},set:function(e){t=e}})};c(F,R);var B=function t(){R.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){if(isNaN(t))throw new Error('Invalid value "'+t+'" for attribute F supplied.');e=t}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(_(e,3))},set:function(t){this.F=!0===Boolean(t)?x(e,3):k(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){if(isNaN(t))throw new Error('Invalid value "'+t+'" for attribute Ff supplied.');r=t}});var o=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==o.length)return o},set:function(t){o=void 0!==t?t:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[0])?0:f(o[0])},set:function(t){o[0]=h(t)}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[1])?0:f(o[1])},set:function(t){o[1]=h(t)}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[2])?0:f(o[2])},set:function(t){o[2]=h(t)}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[3])?0:f(o[3])},set:function(t){o[3]=h(t)}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(t){switch(t){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=t;break;default:throw new Error('Invalid value "'+t+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof H)return;a="FieldObject"+t.FieldNum++}return"("+n(a)+")"},set:function(t){a=t.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(t){a=t}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(t){u=t}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(t){l=t}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f(c)},set:function(t){c=h(t)}});var d=50;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f(d)},set:function(t){d=h(t)}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(t){p=t}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof H||this instanceof Y))return I(m)},set:function(t){t=t.toString(),m=t}});var b=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof U==0?I(b):b},set:function(t){t=t.toString(),b=this instanceof U==0?"("===t.substr(0,1)?i(t.substr(1,t.length-2)):i(t):t}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof U==1?i(b.substr(1,b.length-1)):b},set:function(t){t=t.toString(),b=this instanceof U==1?"/"+t:t}});var v=null;Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof U==0?I(v):v},set:function(t){t=t.toString(),v=this instanceof U==0?"("===t.substr(0,1)?i(t.substr(1,t.length-2)):i(t):t}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof U==1?i(v.substr(1,v.length-1)):v},set:function(t){t=t.toString(),v=this instanceof U==1?"/"+t:t}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,writeable:!0,get:function(){return g},set:function(t){t=Boolean(t),g=t}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writeable:!0,get:function(){if(y)return y},set:function(t){y=t}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(_(this.Ff,1))},set:function(t){this.Ff=!0===Boolean(t)?x(this.Ff,1):k(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(_(this.Ff,2))},set:function(t){this.Ff=!0===Boolean(t)?x(this.Ff,2):k(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(_(this.Ff,3))},set:function(t){this.Ff=!0===Boolean(t)?x(this.Ff,3):k(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==S)return S},set:function(t){if(-1===[0,1,2].indexOf(t))throw new Error('Invalid value "'+t+'" for attribute Q supplied.');S=t}}),Object.defineProperty(this,"textAlign",{get:function(){var t;switch(S){case 0:default:t="left";break;case 1:t="center";break;case 2:t="right"}return t},configurable:!0,enumerable:!0,set:function(t){switch(t){case"right":case 2:S=2;break;case"center":case 1:S=1;break;case"left":case 0:default:S=0}}})};function D(){B.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){t=e}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return N(e)},set:function(t){e=function(t){var e=[];return"string"==typeof t&&(e=function(t,e,n){n||(n=1);for(var i,r=[];i=e.exec(t);)r.push(i[n]);return r}(t,/\((.*?)\)/g)),e}(t)}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();-1!==e.indexOf(t)&&(e.splice(e.indexOf(t),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(_(this.Ff,18))},set:function(t){this.Ff=!0===Boolean(t)?x(this.Ff,18):k(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(_(this.Ff,19))},set:function(t){!0===this.combo&&(this.Ff=!0===Boolean(t)?x(this.Ff,19):k(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(_(this.Ff,20))},set:function(t){!0===Boolean(t)?(this.Ff=x(this.Ff,20),e.sort()):this.Ff=k(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(_(this.Ff,22))},set:function(t){this.Ff=!0===Boolean(t)?x(this.Ff,22):k(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(_(this.Ff,23))},set:function(t){this.Ff=!0===Boolean(t)?x(this.Ff,23):k(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(_(this.Ff,27))},set:function(t){this.Ff=!0===Boolean(t)?x(this.Ff,27):k(this.Ff,27)}}),this.hasAppearanceStream=!1}function j(){D.call(this),this.fontName="helvetica",this.combo=!1}function V(){j.call(this),this.combo=!0}function G(){V.call(this),this.edit=!0}c(B,R),c(D,B),c(j,D),c(V,j),c(G,V);var U=function(){B.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(_(this.Ff,15))},set:function(t){this.Ff=!0===Boolean(t)?x(this.Ff,15):k(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(_(this.Ff,16))},set:function(t){this.Ff=!0===Boolean(t)?x(this.Ff,16):k(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(_(this.Ff,17))},set:function(t){this.Ff=!0===Boolean(t)?x(this.Ff,17):k(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(_(this.Ff,26))},set:function(t){this.Ff=!0===Boolean(t)?x(this.Ff,26):k(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){if(0!==Object.keys(e).length){var t,n=[];for(t in n.push("<<"),e)n.push("/"+t+" ("+e[t]+")");return n.push(">>"),n.join("\n")}},set:function(t){"object"===a(t)&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){"string"==typeof t&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(e){t="/"+e}})};function z(){U.call(this),this.pushButton=!0}function W(){U.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=void 0!==e?e:[]}})}c(U,B),c(z,U),c(W,U);var H=function(){var t,e;B.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(t){e=t}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t,e=[];for(t in e.push("<<"),i)e.push("/"+t+" ("+i[t]+")");return e.push(">>"),e.join("\n")},set:function(t){"object"===a(t)&&(i=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(t){"string"==typeof t&&(i.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=K.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};function q(){U.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=K.CheckBox.createAppearanceStream()}c(H,B),W.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},W.prototype.createOption=function(t){var e=new H;return e.Parent=this,e.optionName=t,this.Kids.push(e),J.call(this,e),e},c(q,U);var Y=function(){B.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(_(this.Ff,13))},set:function(t){this.Ff=!0===Boolean(t)?x(this.Ff,13):k(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(_(this.Ff,21))},set:function(t){this.Ff=!0===Boolean(t)?x(this.Ff,21):k(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(_(this.Ff,23))},set:function(t){this.Ff=!0===Boolean(t)?x(this.Ff,23):k(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(_(this.Ff,24))},set:function(t){this.Ff=!0===Boolean(t)?x(this.Ff,24):k(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(_(this.Ff,25))},set:function(t){this.Ff=!0===Boolean(t)?x(this.Ff,25):k(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(_(this.Ff,26))},set:function(t){this.Ff=!0===Boolean(t)?x(this.Ff,26):k(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};function X(){Y.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(_(this.Ff,14))},set:function(t){this.Ff=!0===Boolean(t)?x(this.Ff,14):k(this.Ff,14)}}),this.password=!0}c(Y,B),c(X,Y);var K={CheckBox:{createAppearanceStream:function(){return{N:{On:K.CheckBox.YesNormal},D:{On:K.CheckBox.YesPushDown,Off:K.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=new d(t),n=[],i=s.internal.getFont(t.fontName,t.fontStyle).id,o=s.__private__.encodeColorString(t.color),a=P(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+r(K.internal.getWidth(t))+" "+r(K.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+i+" "+r(a.fontSize)+" Tf "+o),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join("\n"),e},YesNormal:function(t){var e=new d(t),n=s.internal.getFont(t.fontName,t.fontStyle).id,i=s.__private__.encodeColorString(t.color),o=[],a=K.internal.getHeight(t),u=K.internal.getWidth(t),l=P(t,t.caption);return o.push("1 g"),o.push("0 0 "+r(u)+" "+r(a)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+r(u-1)+" "+r(a-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+n+" "+r(l.fontSize)+" Tf "+i),o.push(l.text),o.push("ET"),o.push("Q"),e.stream=o.join("\n"),e},OffPushDown:function(t){var e=new d(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+r(K.internal.getWidth(t))+" "+r(K.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join("\n"),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:K.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=K.RadioButton.Circle.YesNormal,e.D[t]=K.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=new d(t),n=[],i=K.internal.getWidth(t)<=K.internal.getHeight(t)?K.internal.getWidth(t)/4:K.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var r=Number((i*K.internal.Bezier_C).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+o(K.internal.getWidth(t)/2)+" "+o(K.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+r+" "+r+" "+i+" 0 "+i+" c"),n.push("-"+r+" "+i+" -"+i+" "+r+" -"+i+" 0 c"),n.push("-"+i+" -"+r+" -"+r+" -"+i+" 0 -"+i+" c"),n.push(r+" -"+i+" "+i+" -"+r+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e},YesPushDown:function(t){var e=new d(t),n=[],i=K.internal.getWidth(t)<=K.internal.getHeight(t)?K.internal.getWidth(t)/4:K.internal.getHeight(t)/4,r=(i=Number((.9*i).toFixed(5)),Number((2*i).toFixed(5))),s=Number((r*K.internal.Bezier_C).toFixed(5)),a=Number((i*K.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+o(K.internal.getWidth(t)/2)+" "+o(K.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+o(K.internal.getWidth(t)/2)+" "+o(K.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e},OffPushDown:function(t){var e=new d(t),n=[],i=K.internal.getWidth(t)<=K.internal.getHeight(t)?K.internal.getWidth(t)/4:K.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),s=Number((r*K.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+o(K.internal.getWidth(t)/2)+" "+o(K.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:K.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=K.RadioButton.Cross.YesNormal,e.D[t]=K.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=new d(t),n=[],i=K.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+r(K.internal.getWidth(t)-2)+" "+r(K.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(r(i.x1.x)+" "+r(i.x1.y)+" m"),n.push(r(i.x2.x)+" "+r(i.x2.y)+" l"),n.push(r(i.x4.x)+" "+r(i.x4.y)+" m"),n.push(r(i.x3.x)+" "+r(i.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join("\n"),e},YesPushDown:function(t){var e=new d(t),n=K.internal.calculateCross(t),i=[];return i.push("0.749023 g"),i.push("0 0 "+r(K.internal.getWidth(t))+" "+r(K.internal.getHeight(t))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+r(K.internal.getWidth(t)-2)+" "+r(K.internal.getHeight(t)-2)+" re"),i.push("W"),i.push("n"),i.push(r(n.x1.x)+" "+r(n.x1.y)+" m"),i.push(r(n.x2.x)+" "+r(n.x2.y)+" l"),i.push(r(n.x4.x)+" "+r(n.x4.y)+" m"),i.push(r(n.x3.x)+" "+r(n.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join("\n"),e},OffPushDown:function(t){var e=new d(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+r(K.internal.getWidth(t))+" "+r(K.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join("\n"),e}}},createDefaultAppearanceStream:function(t){var e=s.internal.getFont(t.fontName,t.fontStyle).id,n=s.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};K.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=K.internal.getWidth(t),n=K.internal.getHeight(t),i=Math.min(e,n);return{x1:{x:(e-i)/2,y:(n-i)/2+i},x2:{x:(e-i)/2+i,y:(n-i)/2},x3:{x:(e-i)/2,y:(n-i)/2},x4:{x:(e-i)/2+i,y:(n-i)/2+i}}}},K.internal.getWidth=function(t){var e=0;return"object"===a(t)&&(e=h(t.Rect[2])),e},K.internal.getHeight=function(t){var e=0;return"object"===a(t)&&(e=h(t.Rect[3])),e};var J=u.addField=function(t){if(C.call(this),!(t instanceof B))throw new Error("Invalid argument passed to jsPDF.addField.");return(function(t){s.internal.acroformPlugin.printedOut&&(s.internal.acroformPlugin.printedOut=!1,s.internal.acroformPlugin.acroFormDictionaryRoot=null),s.internal.acroformPlugin.acroFormDictionaryRoot||C.call(s),s.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t)}).call(this,t),t.page=s.internal.getCurrentPageInfo().pageNumber,this};u.addButton=function(t){if(t instanceof U==0)throw new Error("Invalid argument passed to jsPDF.addButton.");return J.call(this,t)},u.addTextField=function(t){if(t instanceof Y==0)throw new Error("Invalid argument passed to jsPDF.addTextField.");return J.call(this,t)},u.addChoiceField=function(t){if(t instanceof D==0)throw new Error("Invalid argument passed to jsPDF.addChoiceField.");return J.call(this,t)},"object"==a(e)&&void 0===e.ChoiceField&&void 0===e.ListBox&&void 0===e.ComboBox&&void 0===e.EditBox&&void 0===e.Button&&void 0===e.PushButton&&void 0===e.RadioButton&&void 0===e.CheckBox&&void 0===e.TextField&&void 0===e.PasswordField?(e.ChoiceField=D,e.ListBox=j,e.ComboBox=V,e.EditBox=G,e.Button=U,e.PushButton=z,e.RadioButton=W,e.CheckBox=q,e.TextField=Y,e.PasswordField=X,e.AcroForm={Appearance:K}):console.warn("AcroForm-Classes are not populated into global-namespace, because the class-Names exist already. This avoids conflicts with the already used framework."),u.AcroFormChoiceField=D,u.AcroFormListBox=j,u.AcroFormComboBox=V,u.AcroFormEditBox=G,u.AcroFormButton=U,u.AcroFormPushButton=z,u.AcroFormRadioButton=W,u.AcroFormCheckBox=q,u.AcroFormTextField=Y,u.AcroFormPasswordField=X,u.AcroFormAppearance=K,u.AcroForm={ChoiceField:D,ListBox:j,ComboBox:V,EditBox:G,Button:U,PushButton:z,RadioButton:W,CheckBox:q,TextField:Y,PasswordField:X,Appearance:K},t.AcroForm={ChoiceField:D,ListBox:j,ComboBox:V,EditBox:G,Button:U,PushButton:z,RadioButton:W,CheckBox:q,TextField:Y,PasswordField:X,Appearance:K}}(K,"undefined"!=typeof window&&window||void 0!==i&&i),function(t){var e="addImage_";function n(t){for(var e=this.internal.write,i=this.internal.putStream,r=(0,this.internal.getFilters)();-1!==r.indexOf("FlateEncode");)r.splice(r.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var o=[];if(o.push({key:"Type",value:"/XObject"}),o.push({key:"Subtype",value:"/Image"}),o.push({key:"Width",value:t.width}),o.push({key:"Height",value:t.height}),t.colorSpace===p.INDEXED?o.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(o.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===p.DEVICE_CMYK&&o.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),o.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&o.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)){for(var s="",a=0,u=t.transparency.length;a<u;a++)s+=t.transparency[a]+" "+t.transparency[a]+" ";o.push({key:"Mask",value:"["+s+"]"})}if(void 0!==t.sMask&&o.push({key:"SMask",value:t.objectId+1+" 0 R"}),i({data:t.data,additionalKeyValues:o,alreadyAppliedFilters:void 0!==t.filter?["/"+t.filter]:void 0}),e("endobj"),"sMask"in t&&void 0!==t.sMask){var l={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:t.bitsPerComponent,decodeParameters:"/Predictor "+t.predictor+" /Colors 1 /BitsPerComponent "+t.bitsPerComponent+" /Columns "+t.width,data:t.sMask};"filter"in t&&(l.filter=t.filter),n.call(this,l)}t.colorSpace===p.INDEXED&&(this.internal.newObject(),i({data:_(new Uint8Array(t.palette))}),e("endobj"))}function i(){var t=this.internal.collections[e+"images"];for(var i in t)n.call(this,t[i])}function r(){var t,n=this.internal.collections[e+"images"],i=this.internal.write;for(var r in n)i("/I"+(t=n[r]).index,t.objectId,"0","R")}function o(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",r))}function s(e){return"function"==typeof t["process"+e.toUpperCase()]}function u(t){return"object"===a(t)&&1===t.nodeType}function l(e,n){if("IMG"===e.nodeName&&e.hasAttribute("src")){var i=""+e.getAttribute("src");if(0===i.indexOf("data:image/"))return atob(unescape(i).split("base64,").pop());var r=t.loadFile(i,!0);if(void 0!==r)return r}if("CANVAS"===e.nodeName){var o;switch(n){case"PNG":o="image/png";break;case"WEBP":o="image/webp";break;case"JPEG":case"JPG":default:o="image/jpeg"}return atob(e.toDataURL(o,1).split("base64,").pop())}}function c(t,n,i,r,s,a){var u=(function(t,e,n){return t||e||(e=t=-96),t<0&&(t=-1*n.width*72/t/this.internal.scaleFactor),e<0&&(e=-1*n.height*72/e/this.internal.scaleFactor),0===t&&(t=e*n.width/n.height),0===e&&(e=t*n.height/n.width),[t,e]}).call(this,i,r,s),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,h=(function(){var t=this.internal.collections[e+"images"];return o.call(this),t}).call(this);if(i=u[0],r=u[1],h[s.index]=s,a){a*=Math.PI/180;var f=Math.cos(a),d=Math.sin(a),p=function(t){return t.toFixed(4)},m=[p(f),p(d),p(-1*d),p(f),0,0,"cm"]}this.internal.write("q"),a?(this.internal.write([1,"0","0",1,l(t),c(n+r),"cm"].join(" ")),this.internal.write(m.join(" ")),this.internal.write([l(i),"0","0",l(r),"0","0","cm"].join(" "))):this.internal.write([l(i),"0","0",l(r),l(t),c(n+r),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+s.index+" Do"),this.internal.write("Q")}t.__addimage__={};var h="UNKNOWN",f={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},d=t.__addimage__.getImageFileTypeByImageData=function(t,e){var n,i;e=e||h;var r,o,s,a=h;if(S(t))for(s in f)for(r=f[s],n=0;n<r.length;n+=1){for(o=!0,i=0;i<r[n].length;i+=1)if(void 0!==r[n][i]&&r[n][i]!==t[i]){o=!1;break}if(!0===o){a=s;break}}else for(s in f)for(r=f[s],n=0;n<r.length;n+=1){for(o=!0,i=0;i<r[n].length;i+=1)if(void 0!==r[n][i]&&r[n][i]!==t.charCodeAt(i)){o=!1;break}if(!0===o){a=s;break}}return a===h&&e!==h&&(a=e),a},p=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var m=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=t.__addimage__.sHashCode=function(t){var e,n,i=0;if("string"==typeof t)for(n=t.length,e=0;e<n;e++)i=(i<<5)-i+t.charCodeAt(e),i|=0;else if(S(t))for(n=t.byteLength/2,e=0;e<n;e++)i=(i<<5)-i+t[e],i|=0;return i},v=t.__addimage__.validateStringAsBase64=function(t){(t=t||"").toString().trim();var e=!0;return 0===t.length&&(e=!1),t.length%4!=0&&(e=!1),!1===/^[A-Za-z0-9+/]+$/.test(t.substr(0,t.length-2))&&(e=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(t.substr(-2))&&(e=!1),e},y=t.__addimage__.extractImageFromDataUrl=function(t){var e=(t=t||"").split("base64,"),n=null;if(2===e.length){var i=/^data:(\w*\/\w*);*(charset=[\w=-]*)*;*$/.exec(e[0]);Array.isArray(i)&&(n={mimeType:i[1],charset:i[2],data:e[1]})}return n},g=t.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};t.__addimage__.isArrayBuffer=function(t){return g()&&t instanceof ArrayBuffer};var S=t.__addimage__.isArrayBufferView=function(t){return g()&&"undefined"!=typeof Uint32Array&&(t instanceof Int8Array||t instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)},w=t.__addimage__.binaryStringToUint8Array=function(t){for(var e=t.length,n=new Uint8Array(e),i=0;i<e;i++)n[i]=t.charCodeAt(i);return n},_=t.__addimage__.arrayBufferToBinaryString=function(t){try{return atob(btoa(String.fromCharCode.apply(null,t)))}catch(e){if("undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.reduce)return new Uint8Array(t).reduce((function(t,e){return t.push(String.fromCharCode(e)),t}),[]).join("")}};t.addImage=function(){var t,e,n,i,r,s,l,f,d;if(d="number"==typeof arguments[1]?(e=h,n=arguments[1],i=arguments[2],r=arguments[3],s=arguments[4],l=arguments[5],f=arguments[6],arguments[7]):(e=arguments[1],n=arguments[2],i=arguments[3],r=arguments[4],s=arguments[5],l=arguments[6],f=arguments[7],arguments[8]),"object"===a(t=arguments[0])&&!u(t)&&"imageData"in t){var p=t;t=p.imageData,e=p.format||e||h,n=p.x||n||0,i=p.y||i||0,r=p.w||p.width||r,s=p.h||p.height||s,l=p.alias||l,f=p.compression||f,d=p.rotation||p.angle||d}var m=this.internal.getFilters();if(void 0===f&&-1!==m.indexOf("FlateEncode")&&(f="SLOW"),isNaN(n)||isNaN(i))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var b=x.call(this,t,e,l,f);return c.call(this,n,i,r,s,b,d),this};var x=function(n,i,r,o){var a,c;if("string"==typeof n&&d(n)===h){n=unescape(n);var f=k(n,!1);(""!==f||void 0!==(f=t.loadFile(n,!0)))&&(n=f)}if(u(n)&&(n=l(n,i)),!s(i=d(n,i)))throw new Error("addImage does not support files of type '"+i+"', please ensure that a plugin for '"+i+"' support is added.");if(function(t){return null==t||0===t.length}(r)&&(r=function(t){return"string"==typeof t||S(t)?b(t):null}(n)),(a=(function(t){var n=this.internal.collections[e+"images"];if(n)for(var i in n)if(t===n[i].alias)return n[i]}).call(this,r))||(g()&&(n instanceof Uint8Array||(n=w(c=n))),a=this["process"+i.toUpperCase()](n,(function(){return Object.keys(this.internal.collections[e+"images"]).length}).call(this),r,function(e){return e&&"string"==typeof e&&(e=e.toUpperCase()),e in t.image_compression?e:m.NONE}(o),c)),!a)throw new Error("An unknown error occurred whilst processing the image.");return a},k=t.__addimage__.convertBase64ToBinaryString=function(t,e){var n;e="boolean"!=typeof e||e;var i,r="";if("string"==typeof t){i=null!==(n=y(t))?n.data:t;try{r=atob(i)}catch(t){if(e)throw v(i)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+t.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return r};t.getImageProperties=function(e){var n,i,r="";if(u(e)&&(e=l(e)),"string"==typeof e&&d(e)===h&&(""===(r=k(e,!1))&&(r=t.loadFile(e)||""),e=r),!s(i=d(e)))throw new Error("addImage does not support files of type '"+i+"', please ensure that a plugin for '"+i+"' support is added.");if(!g()||e instanceof Uint8Array||(e=w(e)),!(n=this["process"+i.toUpperCase()](e)))throw new Error("An unknown error occurred whilst processing the image");return n.fileType=i,n}}(K.API),l=K.API,K.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),l.events.push(["putPage",function(t){for(var e,n,i,r=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,s=this.internal.getPageInfoByObjId(t.objId),a=t.pageContext.annotations,u=!1,l=0;l<a.length&&!u;l++)switch((e=a[l]).type){case"link":(Q(e.options.url)||Q(e.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(0!=u){this.internal.write("/Annots [");for(var c=0;c<a.length;c++)switch((e=a[c]).type){case"reference":this.internal.write(" "+e.object.objId+" 0 R ");break;case"text":var h=this.internal.newAdditionalObject(),f=this.internal.newAdditionalObject(),d=e.title||"Note";i="<</Type /Annot /Subtype /Text "+(n="/Rect ["+r(e.bounds.x)+" "+o(e.bounds.y+e.bounds.h)+" "+r(e.bounds.x+e.bounds.w)+" "+o(e.bounds.y)+"] ")+"/Contents ("+e.contents+")",i+=" /Popup "+f.objId+" 0 R",i+=" /P "+s.objId+" 0 R",h.content=i+=" /T ("+d+") >>";var p=h.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+r(e.bounds.x+30)+" "+o(e.bounds.y+e.bounds.h)+" "+r(e.bounds.x+e.bounds.w+30)+" "+o(e.bounds.y)+"] ")+" /Parent "+p,e.open&&(i+=" /Open true"),f.content=i+=" >>",this.internal.write(h.objId,"0 R",f.objId,"0 R");break;case"freetext":i="<</Type /Annot /Subtype /FreeText "+(n="/Rect ["+r(e.bounds.x)+" "+o(e.bounds.y)+" "+r(e.bounds.x+e.bounds.w)+" "+o(e.bounds.y+e.bounds.h)+"] ")+"/Contents ("+e.contents+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+(e.color||"#000000")+")",i+=" /Border [0 0 0]",this.internal.write(i+=" >>");break;case"link":if(e.options.name){var m=this.annotations._nameMap[e.options.name];e.options.pageNumber=m.page,e.options.top=m.y}else e.options.top||(e.options.top=0);if(n="/Rect ["+r(e.x)+" "+o(e.y)+" "+r(e.x+e.w)+" "+o(e.y+e.h)+"] ",i="",e.options.url)i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+e.options.url+") >>";else if(e.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(e.options.pageNumber).objId+" 0 R",e.options.magFactor=e.options.magFactor||"XYZ",e.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+e.options.top+"]";break;case"FitV":e.options.left=e.options.left||0,i+=" /FitV "+e.options.left+"]";break;case"XYZ":default:var b=o(e.options.top);e.options.left=e.options.left||0,void 0===e.options.zoom&&(e.options.zoom=0),i+=" /XYZ "+e.options.left+" "+b+" "+e.options.zoom+"]"}""!=i&&this.internal.write(i+=" >>")}this.internal.write("]")}}]),l.createAnnotation=function(t){var e=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":e.pageContext.annotations.push(t)}},l.link=function(t,e,n,i,r){this.internal.getCurrentPageInfo().pageContext.annotations.push({x:t,y:e,w:n,h:i,options:r,type:"link"})},l.textWithLink=function(t,e,n,i){var r=this.getTextWidth(t),o=this.internal.getLineHeight()/this.internal.scaleFactor;return this.text(t,e,n,i),this.link(e,(n+=.2*o)-o,r,o,i),r},l.getTextWidth=function(t){var e=this.internal.getFontSize();return this.getStringUnitWidth(t)*e/this.internal.scaleFactor},function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(t){return void 0!==e[t.charCodeAt(0)]},s=t.__arabicParser__.isArabicLetter=function(t){return"string"==typeof t&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(t)},a=t.__arabicParser__.isArabicEndLetter=function(t){return s(t)&&o(t)&&e[t.charCodeAt(0)].length<=2},u=t.__arabicParser__.isArabicAlfLetter=function(t){return s(t)&&0<=r.indexOf(t.charCodeAt(0))};t.__arabicParser__.arabicLetterHasIsolatedForm=function(t){return s(t)&&o(t)&&1<=e[t.charCodeAt(0)].length};var l=t.__arabicParser__.arabicLetterHasFinalForm=function(t){return s(t)&&o(t)&&2<=e[t.charCodeAt(0)].length};t.__arabicParser__.arabicLetterHasInitialForm=function(t){return s(t)&&o(t)&&3<=e[t.charCodeAt(0)].length};var c=t.__arabicParser__.arabicLetterHasMedialForm=function(t){return s(t)&&o(t)&&4==e[t.charCodeAt(0)].length},h=t.__arabicParser__.resolveLigatures=function(t){var e=0,i=n,r="",o=0;for(e=0;e<t.length;e+=1)void 0!==i[t.charCodeAt(e)]?(o++,"number"==typeof(i=i[t.charCodeAt(e)])&&(r+=String.fromCharCode(i),i=n,o=0),e===t.length-1&&(i=n,r+=t.charAt(e-(o-1)),e-=o-1,o=0)):(i=n,r+=t.charAt(e-o),e-=o,o=0);return r};function f(t){var n=0,i=0,r=0,o="",a="",u="",l=(t=t||"").split("\\s+"),c=[];for(n=0;n<l.length;n+=1){for(c.push(""),i=0;i<l[n].length;i+=1)a=l[n][i-1],u=l[n][i+1],s(o=l[n][i])?(r=d(o,a,u),c[n]+=-1!==r?String.fromCharCode(e[o.charCodeAt(0)][r]):o):c[n]+=o;c[n]=h(c[n])}return c.join(" ")}t.__arabicParser__.isArabicDiacritic=function(t){return void 0!==t&&void 0!==i[t.charCodeAt(0)]};var d=t.__arabicParser__.getCorrectForm=function(t,e,n){return s(t)?!1===o(t)?-1:!l(t)||!s(e)&&!s(n)||!s(n)&&a(e)||a(t)&&!s(e)||a(t)&&u(e)||a(t)&&a(e)?0:c(t)&&s(e)&&!a(e)&&s(n)&&l(n)?3:a(t)||!s(n)?1:2:-1},p=t.__arabicParser__.processArabic=t.processArabic=function(){var t,e="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(e)){var i=0;for(n=[],i=0;i<e.length;i+=1)Array.isArray(e[i])?n.push([f(e[i][0]),e[i][1],e[i][2]]):n.push([f(e[i])]);t=n}else t=f(e);return"string"==typeof arguments[0]?t:(arguments[0].text=t,arguments[0])};t.events.push(["preProcessText",p])}(K.API),K.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+e+" 0 R")}))}return this},c=K.API,$.prototype.getContext=function(t,e){var n;if("2d"!==(t=t||"2d"))return null;for(n in e)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=e[n]);return(this.pdf.context2d._canvas=this).pdf.context2d},$.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},c.events.push(["initialized",function(){this.canvas=new $,this.canvas.pdf=this}]),function(t){function e(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},n),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))}var n={left:0,top:0,bottom:0,right:0},i=!1,r=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var t=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var e=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(t){n=t}});var i=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return i},set:function(t){i=t}});var r=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return r},set:function(t){r=t}});var o=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return o},set:function(t){o=t}});var s=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return s},set:function(t){s=t}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(t){return e.call(this),this.internal.__cell__.headerFunction="function"==typeof t?t:void 0,this},t.getTextDimensions=function(t,n){e.call(this);var i=(n=n||{}).fontSize||this.getFontSize(),r=n.font||this.getFont(),o=n.scaleFactor||this.internal.scaleFactor,s=0,a=0,u=0;if(!Array.isArray(t)&&"string"!=typeof t)throw new Error("getTextDimensions expects text-parameter to be of type String or an Array of Strings.");t=Array.isArray(t)?t:[t];for(var l=0;l<t.length;l++)s<(u=this.getStringUnitWidth(t[l],{font:r})*i)&&(s=u),0!==s&&(a=t.length);return{w:s/=o,h:Math.max((a*i*this.getLineHeightFactor()-i*(this.getLineHeightFactor()-1))/o,0)}},t.cellAddPage=function(){e.call(this),this.addPage();var t=this.internal.__cell__.margins||n;return this.internal.__cell__.lastCell=new o(t.left,t.top,void 0,void 0),this.internal.__cell__.pages+=1,this},t.cellInitialize=function(){e.call(this),r.call(this)};var s=t.cell=function(){var t;t=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),e.call(this);var r=this.internal.__cell__.lastCell,s=this.internal.__cell__.padding,a=this.internal.__cell__.margins||n,u=this.internal.__cell__.tableHeaderRow,l=this.internal.__cell__.printHeaders;return void 0!==r.lineNumber&&(r.lineNumber===t.lineNumber?(t.x=(r.x||0)+(r.width||0),t.y=r.y||0):r.y+r.height+t.height+a.bottom>this.getPageHeight()?(this.cellAddPage(),t.y=a.top,l&&u&&(this.printHeaderRow(t.lineNumber,!0),t.y+=u[0].height)):t.y=r.y+r.height||t.y),void 0!==t.text[0]&&(this.rect(t.x,t.y,t.width,t.height,!0===i?"FD":void 0),"right"===t.align?this.text(t.text,t.x+t.width-s,t.y+s,{align:"right",baseline:"top"}):"center"===t.align?this.text(t.text,t.x+t.width/2,t.y+s,{align:"center",baseline:"top",maxWidth:t.width-s-s}):this.text(t.text,t.x+s,t.y+s,{align:"left",baseline:"top",maxWidth:t.width-s-s})),this.internal.__cell__.lastCell=t,this};t.table=function(t,i,l,c,h){if(e.call(this),!l)throw new Error("No data for PDF table.");var f,d,p,m,b=[],v=[],y=[],g={},S={},w=[],_=[],x=(h=h||{}).autoSize||!1,k=!1!==h.printHeaders,E=h.css&&void 0!==h.css["font-size"]?16*h.css["font-size"]:h.fontSize||12,P=h.margins||Object.assign({width:this.getPageWidth()},n),A="number"==typeof h.padding?h.padding:3,L=h.headerBackgroundColor||"#c8c8c8";if(r.call(this),this.internal.__cell__.printHeaders=k,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=E,this.internal.__cell__.padding=A,this.internal.__cell__.headerBackgroundColor=L,this.setFontSize(E),null==c)y=(v=b=Object.keys(l[0])).map((function(){return"left"}));else if(Array.isArray(c)&&"object"===a(c[0]))for(b=c.map((function(t){return t.name})),v=c.map((function(t){return t.prompt||t.name||""})),y=b.map((function(t){return t.align||"left"})),f=0;f<c.length;f+=1)S[c[f].name]=c[f].width*(19.049976/25.4);else Array.isArray(c)&&"string"==typeof c[0]&&(y=(v=b=c).map((function(){return"left"})));if(x)for(f=0;f<b.length;f+=1){for(g[m=b[f]]=l.map((function(t){return t[m]})),this.setFontStyle("bold"),w.push(this.getTextDimensions(v[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),d=g[m],this.setFontStyle("normal"),p=0;p<d.length;p+=1)w.push(this.getTextDimensions(d[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);S[m]=Math.max.apply(null,w)+A+A,w=[]}if(k){var T={};for(f=0;f<b.length;f+=1)T[b[f]]={},T[b[f]].text=v[f],T[b[f]].align=y[f];var M=u.call(this,T,S);_=b.map((function(e){return new o(t,i,S[e],M,T[e].text,void 0,T[e].align)})),this.setTableHeaderRow(_),this.printHeaderRow(1,!1)}var C=c.reduce((function(t,e){return t[e.name]=e.align,t}),{});for(f=0;f<l.length;f+=1){var N=u.call(this,l[f],S);for(p=0;p<b.length;p+=1)s.call(this,new o(t,i,S[b[p]],N,l[f][b[p]],f+2,C[b[p]]))}return this.internal.__cell__.table_x=t,this.internal.__cell__.table_y=i,this};var u=function(t,e){var n=this.internal.__cell__.padding,i=this.internal.__cell__.table_font_size,r=this.internal.scaleFactor;return Object.keys(t).map((function(t){return"object"===a(t)?t.text:t})).map((function(t){return this.splitTextToSize(t,e[t]-n-n)}),this).map((function(t){return this.getLineHeightFactor()*t.length*i/r+n+n}),this).reduce((function(t,e){return Math.max(t,e)}),0)};t.setTableHeaderRow=function(t){e.call(this),this.internal.__cell__.tableHeaderRow=t},t.printHeaderRow=function(t,n){if(e.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var r;if(i=!0,"function"==typeof this.internal.__cell__.headerFunction){var a=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(a[0],a[1],a[2],a[3],void 0,-1)}this.setFontStyle("bold");for(var u=[],l=0;l<this.internal.__cell__.tableHeaderRow.length;l+=1)r=this.internal.__cell__.tableHeaderRow[l].clone(),n&&(r.y=this.internal.__cell__.margins.top||0,u.push(r)),r.lineNumber=t,this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,r);0<u.length&&this.setTableHeaderRow(u),this.setFontStyle("normal"),i=!1}}(K.API),function(t){function e(t){return this.isStrokeTransparent=(t=t||{}).isStrokeTransparent||!1,this.strokeOpacity=t.strokeOpacity||1,this.strokeStyle=t.strokeStyle||"#000000",this.fillStyle=t.fillStyle||"#000000",this.isFillTransparent=t.isFillTransparent||!1,this.fillOpacity=t.fillOpacity||1,this.font=t.font||"10px sans-serif",this.textBaseline=t.textBaseline||"alphabetic",this.textAlign=t.textAlign||"left",this.lineWidth=t.lineWidth||1,this.lineJoin=t.lineJoin||"miter",this.lineCap=t.lineCap||"butt",this.path=t.path||[],this.transform=void 0!==t.transform?t.transform.clone():new c,this.globalCompositeOperation=t.globalCompositeOperation||"normal",this.globalAlpha=t.globalAlpha||1,this.clip_path=t.clip_path||[],this.currentPoint=t.currentPoint||new u,this.miterLimit=t.miterLimit||10,this.lastPoint=t.lastPoint||new u,this.ignoreClearRect="boolean"!=typeof t.ignoreClearRect||t.ignoreClearRect,this}var n,i,r,o,s,u,l,c,h;t.events.push(["initialized",function(){this.context2d=new f(this),n=this.internal.f2,i=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,u=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,h=new e}]);var f=function(t){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var n=t;Object.defineProperty(this,"pdf",{get:function(){return n}});var i=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return i},set:function(t){i=Boolean(t)}});var r=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return r},set:function(t){r=Boolean(t)}});var o=0;Object.defineProperty(this,"posX",{get:function(){return o},set:function(t){isNaN(t)||(o=t)}});var s=0;Object.defineProperty(this,"posY",{get:function(){return s},set:function(t){isNaN(t)||(s=t)}});var a=!1;Object.defineProperty(this,"autoPaging",{get:function(){return a},set:function(t){a=Boolean(t)}});var u=0;Object.defineProperty(this,"lastBreak",{get:function(){return u},set:function(t){u=t}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(t){l=t}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(t){t instanceof e&&(h=t)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(t){h.path=t}});var c=[];Object.defineProperty(this,"ctxStack",{get:function(){return c},set:function(t){c=t}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(t){var e;e=d(t),this.ctx.fillStyle=e.style,this.ctx.isFillTransparent=0===e.a,this.ctx.fillOpacity=e.a,this.pdf.setFillColor(e.r,e.g,e.b,{a:e.a}),this.pdf.setTextColor(e.r,e.g,e.b,{a:e.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(t){var e=d(t);this.ctx.strokeStyle=e.style,this.ctx.isStrokeTransparent=0===e.a,this.ctx.strokeOpacity=e.a,0===e.a?this.pdf.setDrawColor(255,255,255):this.pdf.setDrawColor(e.r,e.g,e.b)}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(t){-1!==["butt","round","square"].indexOf(t)&&(this.ctx.lineCap=t,this.pdf.setLineCap(t))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(t){isNaN(t)||(this.ctx.lineWidth=t,this.pdf.setLineWidth(t))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(t){-1!==["bevel","round","miter"].indexOf(t)&&(this.ctx.lineJoin=t,this.pdf.setLineJoin(t))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(t){isNaN(t)||(this.ctx.miterLimit=t,this.pdf.setMiterLimit(t))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(t){this.ctx.textBaseline=t}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(t){-1!==["right","end","center","left","start"].indexOf(t)&&(this.ctx.textAlign=t)}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(t){var e;if(this.ctx.font=t,null!==(e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(t))){var n=e[1],i=e[3],r=e[4],o=e[6],s=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(r)[2];r="px"===s?Math.floor(parseFloat(r)):"em"===s?Math.floor(parseFloat(r)*this.pdf.getFontSize()):Math.floor(parseFloat(r)),this.pdf.setFontSize(r);var a="";("bold"===i||700<=parseInt(i,10)||"bold"===n)&&(a="bold"),"italic"===n&&(a+="italic"),0===a.length&&(a="normal");for(var u="",l=o.toLowerCase().replace(/"|'/g,"").split(/\s*,\s*/),c={arial:"Helvetica",verdana:"Helvetica",helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",courier:"Courier",times:"Times",cursive:"Times",fantasy:"Times",serif:"Times"},h=0;h<l.length;h++){if(void 0!==this.pdf.internal.getFont(l[h],a,{noFallback:!0,disableWarning:!0})){u=l[h];break}if("bolditalic"===a&&void 0!==this.pdf.internal.getFont(l[h],"bold",{noFallback:!0,disableWarning:!0}))u=l[h],a="bold";else if(void 0!==this.pdf.internal.getFont(l[h],"normal",{noFallback:!0,disableWarning:!0})){u=l[h],a="normal";break}}if(""===u)for(var f=0;f<l.length;f++)if(c[l[f]]){u=c[l[f]];break}this.pdf.setFont(u=""===u?"Times":u,a)}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(t){this.ctx.globalCompositeOperation=t}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(t){this.ctx.globalAlpha=t}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(t){this.ctx.ignoreClearRect=Boolean(t)}})};f.prototype.fill=function(){g.call(this,"fill",!1)},f.prototype.stroke=function(){g.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(t,e){if(isNaN(t)||isNaN(e))throw console.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new u(t,e));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new u(t,e)},f.prototype.closePath=function(){var t=new u(0,0),e=0;for(e=this.path.length-1;-1!==e;e--)if("begin"===this.path[e].type&&"object"===a(this.path[e+1])&&"number"==typeof this.path[e+1].x){t=new u(this.path[e+1].x,this.path[e+1].y),this.path.push({type:"lt",x:t.x,y:t.y});break}"object"===a(this.path[e+2])&&"number"==typeof this.path[e+2].x&&this.path.push(JSON.parse(JSON.stringify(this.path[e+2]))),this.path.push({type:"close"}),this.ctx.lastPoint=new u(t.x,t.y)},f.prototype.lineTo=function(t,e){if(isNaN(t)||isNaN(e))throw console.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new u(t,e));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new u(n.x,n.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),g.call(this,null,!0)},f.prototype.quadraticCurveTo=function(t,e,n,i){if(isNaN(n)||isNaN(i)||isNaN(t)||isNaN(e))throw console.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var r=this.ctx.transform.applyToPoint(new u(n,i)),o=this.ctx.transform.applyToPoint(new u(t,e));this.path.push({type:"qct",x1:o.x,y1:o.y,x:r.x,y:r.y}),this.ctx.lastPoint=new u(r.x,r.y)},f.prototype.bezierCurveTo=function(t,e,n,i,r,o){if(isNaN(r)||isNaN(o)||isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i))throw console.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var s=this.ctx.transform.applyToPoint(new u(r,o)),a=this.ctx.transform.applyToPoint(new u(t,e)),l=this.ctx.transform.applyToPoint(new u(n,i));this.path.push({type:"bct",x1:a.x,y1:a.y,x2:l.x,y2:l.y,x:s.x,y:s.y}),this.ctx.lastPoint=new u(s.x,s.y)},f.prototype.arc=function(t,e,n,i,r,o){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||isNaN(r))throw console.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(o=Boolean(o),!this.ctx.transform.isIdentity){var s=this.ctx.transform.applyToPoint(new u(t,e));t=s.x,e=s.y;var a=this.ctx.transform.applyToPoint(new u(0,n)),l=this.ctx.transform.applyToPoint(new u(0,0));n=Math.sqrt(Math.pow(a.x-l.x,2)+Math.pow(a.y-l.y,2))}Math.abs(r-i)>=2*Math.PI&&(i=0,r=2*Math.PI),this.path.push({type:"arc",x:t,y:e,radius:n,startAngle:i,endAngle:r,counterclockwise:o})},f.prototype.arcTo=function(t,e,n,i,r){throw new Error("arcTo not implemented.")},f.prototype.rect=function(t,e,n,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i))throw console.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(t,e),this.lineTo(t+n,e),this.lineTo(t+n,e+i),this.lineTo(t,e+i),this.lineTo(t,e),this.lineTo(t+n,e),this.lineTo(t,e)},f.prototype.fillRect=function(t,e,n,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i))throw console.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var r={};"butt"!==this.lineCap&&(r.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(r.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(t,e,n,i),this.fill(),r.hasOwnProperty("lineCap")&&(this.lineCap=r.lineCap),r.hasOwnProperty("lineJoin")&&(this.lineJoin=r.lineJoin)}},f.prototype.strokeRect=function(t,e,n,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i))throw console.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(t,e,n,i),this.stroke())},f.prototype.clearRect=function(t,e,n,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i))throw console.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(t,e,n,i))},f.prototype.save=function(t){t="boolean"!=typeof t||t;for(var n=this.pdf.internal.getCurrentPageInfo().pageNumber,i=0;i<this.pdf.internal.getNumberOfPages();i++)this.pdf.setPage(i+1),this.pdf.internal.out("q");if(this.pdf.setPage(n),t){this.ctx.fontSize=this.pdf.internal.getFontSize();var r=new e(this.ctx);this.ctxStack.push(this.ctx),this.ctx=r}},f.prototype.restore=function(t){t="boolean"!=typeof t||t;for(var e=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(e),t&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var d=function(t){var e,n,i,r;if(!0===t.isCanvasGradient&&(t=t.getColor()),!t)return{r:0,g:0,b:0,a:0,style:t};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(t))r=i=n=e=0;else{var o=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(t);if(null!==o)e=parseInt(o[1]),n=parseInt(o[2]),i=parseInt(o[3]),r=1;else if(null!==(o=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(t)))e=parseInt(o[1]),n=parseInt(o[2]),i=parseInt(o[3]),r=parseFloat(o[4]);else{if(r=1,"string"==typeof t&&"#"!==t.charAt(0)){var s=new RGBColor(t);t=s.ok?s.toHex():"#000000"}4===t.length?(e=t.substring(1,2),e+=e,n=t.substring(2,3),n+=n,i=t.substring(3,4),i+=i):(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7)),e=parseInt(e,16),n=parseInt(n,16),i=parseInt(i,16)}}return{r:e,g:n,b:i,a:r,style:t}},p=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},m=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};f.prototype.fillText=function(t,e,n,i){if(isNaN(e)||isNaN(n)||"string"!=typeof t)throw console.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(i=isNaN(i)?void 0:i,!p.call(this)){n=w.call(this,n);var r=N(this.ctx.transform.rotation);P.call(this,{text:t,x:e,y:n,scale:this.ctx.transform.scaleX,angle:r,align:this.textAlign,maxWidth:i})}},f.prototype.strokeText=function(t,e,n,i){if(isNaN(e)||isNaN(n)||"string"!=typeof t)throw console.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){i=isNaN(i)?void 0:i,n=w.call(this,n);var r=N(this.ctx.transform.rotation);P.call(this,{text:t,x:e,y:n,scale:this.ctx.transform.scaleX,renderingMode:"stroke",angle:r,align:this.textAlign,maxWidth:i})}},f.prototype.measureText=function(t){if("string"!=typeof t)throw console.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var e=this.pdf,n=this.pdf.internal.scaleFactor,i=e.internal.getFontSize(),r=e.getStringUnitWidth(t)*i/e.internal.scaleFactor;return new function(t){var e=(t=t||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return e}}),this}({width:r*=Math.round(96*n/72*1e4)/1e4})},f.prototype.scale=function(t,e){if(isNaN(t)||isNaN(e))throw console.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new c(t,0,0,e,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},f.prototype.rotate=function(t){if(isNaN(t))throw console.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var e=new c(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0);this.ctx.transform=this.ctx.transform.multiply(e)},f.prototype.translate=function(t,e){if(isNaN(t)||isNaN(e))throw console.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new c(1,0,0,1,t,e);this.ctx.transform=this.ctx.transform.multiply(n)},f.prototype.transform=function(t,e,n,i,r,o){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||isNaN(r)||isNaN(o))throw console.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var s=new c(t,e,n,i,r,o);this.ctx.transform=this.ctx.transform.multiply(s)},f.prototype.setTransform=function(t,e,n,i,r,o){t=isNaN(t)?1:t,e=isNaN(e)?0:e,n=isNaN(n)?0:n,i=isNaN(i)?1:i,r=isNaN(r)?0:r,o=isNaN(o)?0:o,this.ctx.transform=new c(t,e,n,i,r,o)},f.prototype.drawImage=function(t,e,n,i,r,o,s,a,u){var h=this.pdf.getImageProperties(t),f=1,d=1,p=1,m=1;void 0!==i&&void 0!==a&&(p=a/i,m=u/r,f=h.width/i*a/i,d=h.height/r*u/r),void 0===o&&(o=e,s=n,n=e=0),void 0!==i&&void 0===a&&(a=i,u=r),void 0===i&&void 0===a&&(a=h.width,u=h.height);for(var v,g=this.ctx.transform.decompose(),w=N(g.rotate.shx),_=new c,x=(_=(_=(_=_.multiply(g.translate)).multiply(g.skew)).multiply(g.scale)).applyToRectangle(new l(o-e*p,s-n*m,i*f,r*d)),k=b.call(this,x),E=[],P=0;P<k.length;P+=1)-1===E.indexOf(k[P])&&E.push(k[P]);if(E.sort(),this.autoPaging)for(var A=E[E.length-1],L=E[0];L<A+1;L++){if(this.pdf.setPage(L),0!==this.ctx.clip_path.length){var T=this.path;v=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(v,this.posX,-1*this.pdf.internal.pageSize.height*(L-1)+this.posY),S.call(this,"fill",!0),this.path=T}var M=JSON.parse(JSON.stringify(x));M=y([M],this.posX,-1*this.pdf.internal.pageSize.height*(L-1)+this.posY)[0],this.pdf.addImage(t,"JPEG",M.x,M.y,M.w,M.h,null,null,w)}else this.pdf.addImage(t,"JPEG",x.x,x.y,x.w,x.h,null,null,w)};var b=function(t,e,n){var i=[];switch(e=e||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height,t.type){default:case"mt":case"lt":i.push(Math.floor((t.y+this.posY)/n)+1);break;case"arc":i.push(Math.floor((t.y+this.posY-t.radius)/n)+1),i.push(Math.floor((t.y+this.posY+t.radius)/n)+1);break;case"qct":var r=I(this.ctx.lastPoint.x,this.ctx.lastPoint.y,t.x1,t.y1,t.x,t.y);i.push(Math.floor(r.y/n)+1),i.push(Math.floor((r.y+r.h)/n)+1);break;case"bct":var o=R(this.ctx.lastPoint.x,this.ctx.lastPoint.y,t.x1,t.y1,t.x2,t.y2,t.x,t.y);i.push(Math.floor(o.y/n)+1),i.push(Math.floor((o.y+o.h)/n)+1);break;case"rect":i.push(Math.floor((t.y+this.posY)/n)+1),i.push(Math.floor((t.y+t.h+this.posY)/n)+1)}for(var s=0;s<i.length;s+=1)for(;this.pdf.internal.getNumberOfPages()<i[s];)v.call(this);return i},v=function(){var t=this.fillStyle,e=this.strokeStyle,n=this.font,i=this.lineCap,r=this.lineWidth,o=this.lineJoin;this.pdf.addPage(),this.fillStyle=t,this.strokeStyle=e,this.font=n,this.lineCap=i,this.lineWidth=r,this.lineJoin=o},y=function(t,e,n){for(var i=0;i<t.length;i++)switch(t[i].type){case"bct":t[i].x2+=e,t[i].y2+=n;case"qct":t[i].x1+=e,t[i].y1+=n;case"mt":case"lt":case"arc":default:t[i].x+=e,t[i].y+=n}return t},g=function(t,e){for(var n,i,r=this.fillStyle,o=this.strokeStyle,s=this.lineCap,a=this.lineWidth,u=this.lineJoin,l=JSON.parse(JSON.stringify(this.path)),c=JSON.parse(JSON.stringify(this.path)),h=[],f=0;f<c.length;f++)if(void 0!==c[f].x)for(var d=b.call(this,c[f]),p=0;p<d.length;p+=1)-1===h.indexOf(d[p])&&h.push(d[p]);for(var m=0;m<h.length;m++)for(;this.pdf.internal.getNumberOfPages()<h[m];)v.call(this);if(h.sort(),this.autoPaging)for(var g=h[h.length-1],w=h[0];w<g+1;w++){if(this.pdf.setPage(w),this.fillStyle=r,this.strokeStyle=o,this.lineCap=s,this.lineWidth=a,this.lineJoin=u,0!==this.ctx.clip_path.length){var _=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(n,this.posX,-1*this.pdf.internal.pageSize.height*(w-1)+this.posY),S.call(this,t,!0),this.path=_}i=JSON.parse(JSON.stringify(l)),this.path=y(i,this.posX,-1*this.pdf.internal.pageSize.height*(w-1)+this.posY),!1!==e&&0!==w||S.call(this,t,e)}else S.call(this,t,e);this.path=l},S=function(t,e){if(("stroke"!==t||e||!m.call(this))&&("stroke"===t||e||!p.call(this))){for(var n,i,r=[],o=this.path,s=0;s<o.length;s++){var a=o[s];switch(a.type){case"begin":r.push({begin:!0});break;case"close":r.push({close:!0});break;case"mt":r.push({start:a,deltas:[],abs:[]});break;case"lt":var u=r.length;if(!isNaN(o[s-1].x)&&(n=[a.x-o[s-1].x,a.y-o[s-1].y],0<u))for(;0<=u;u--)if(!0!==r[u-1].close&&!0!==r[u-1].begin){r[u-1].deltas.push(n),r[u-1].abs.push(a);break}break;case"bct":r[r.length-1].deltas.push(n=[a.x1-o[s-1].x,a.y1-o[s-1].y,a.x2-o[s-1].x,a.y2-o[s-1].y,a.x-o[s-1].x,a.y-o[s-1].y]);break;case"qct":r[r.length-1].deltas.push(n=[o[s-1].x+2/3*(a.x1-o[s-1].x)-o[s-1].x,o[s-1].y+2/3*(a.y1-o[s-1].y)-o[s-1].y,a.x+2/3*(a.x1-a.x)-o[s-1].x,a.y+2/3*(a.y1-a.y)-o[s-1].y,a.x-o[s-1].x,a.y-o[s-1].y]);break;case"arc":r.push({deltas:[],abs:[],arc:!0}),Array.isArray(r[r.length-1].abs)&&r[r.length-1].abs.push(a)}}i=e?null:"stroke"===t?"stroke":"fill";for(var l=0;l<r.length;l++){if(r[l].arc){for(var c=r[l].abs,h=0;h<c.length;h++){var f=c[h];"arc"===f.type?_.call(this,f.x,f.y,f.radius,f.startAngle,f.endAngle,f.counterclockwise,void 0,e):A.call(this,f.x,f.y)}x.call(this,i),this.pdf.internal.out("h")}r[l].arc||!0===r[l].close||!0===r[l].begin||L.call(this,r[l].deltas,r[l].start.x,r[l].start.y)}i&&x.call(this,i),e&&k.call(this)}},w=function(t){var e=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=e*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return t-n;case"top":return t+e-n;case"hanging":return t+e-2*n;case"middle":return t+e/2-n;case"ideographic":return t;case"alphabetic":default:return t}};f.prototype.createLinearGradient=function(){function t(){}return t.colorStops=[],t.addColorStop=function(t,e){this.colorStops.push([t,e])},t.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},t.isCanvasGradient=!0,t},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var _=function(t,e,n,i,r,o,s,a){for(var u=M.call(this,n,i,r,o),l=0;l<u.length;l++){var c=u[l];0===l&&E.call(this,c.x1+t,c.y1+e),T.call(this,t,e,c.x2,c.y2,c.x3,c.y3,c.x4,c.y4)}a?k.call(this):x.call(this,s)},x=function(t){switch(t){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},k=function(){this.pdf.clip(),this.pdf.discardPath()},E=function(t,e){this.pdf.internal.out(i(t)+" "+r(e)+" m")},P=function(t){var e;switch(t.align){case"right":case"end":e="right";break;case"center":e="center";break;case"left":case"start":default:e="left"}var n=this.ctx.transform.applyToPoint(new u(t.x,t.y)),i=this.ctx.transform.decompose(),r=new c;r=(r=(r=r.multiply(i.translate)).multiply(i.skew)).multiply(i.scale);for(var o,s,a=this.pdf.getTextDimensions(t.text),h=this.ctx.transform.applyToRectangle(new l(t.x,t.y,a.w,a.h)),f=r.applyToRectangle(new l(t.x,t.y-a.h,a.w,a.h)),d=b.call(this,f),p=[],m=0;m<d.length;m+=1)-1===p.indexOf(d[m])&&p.push(d[m]);if(p.sort(),!0===this.autoPaging)for(var v=p[p.length-1],g=p[0];g<v+1;g++){if(this.pdf.setPage(g),0!==this.ctx.clip_path.length){var w=this.path;o=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(o,this.posX,-1*this.pdf.internal.pageSize.height*(g-1)+this.posY),S.call(this,"fill",!0),this.path=w}var _=JSON.parse(JSON.stringify(h));_=y([_],this.posX,-1*this.pdf.internal.pageSize.height*(g-1)+this.posY)[0],.01<=t.scale&&(s=this.pdf.internal.getFontSize(),this.pdf.setFontSize(s*t.scale)),this.pdf.text(t.text,_.x,_.y,{angle:t.angle,align:e,renderingMode:t.renderingMode,maxWidth:t.maxWidth}),.01<=t.scale&&this.pdf.setFontSize(s)}else.01<=t.scale&&(s=this.pdf.internal.getFontSize(),this.pdf.setFontSize(s*t.scale)),this.pdf.text(t.text,n.x+this.posX,n.y+this.posY,{angle:t.angle,align:e,renderingMode:t.renderingMode,maxWidth:t.maxWidth}),.01<=t.scale&&this.pdf.setFontSize(s)},A=function(t,e,n,o){o=o||0,this.pdf.internal.out(i(t+(n=n||0))+" "+r(e+o)+" l")},L=function(t,e,n){return this.pdf.lines(t,e,n,null,null)},T=function(t,e,i,r,a,u,l,c){this.pdf.internal.out([n(o(i+t)),n(s(r+e)),n(o(a+t)),n(s(u+e)),n(o(l+t)),n(s(c+e)),"c"].join(" "))},M=function(t,e,n,i){for(var r=2*Math.PI,o=Math.PI/2;n<e;)e-=r;var s=Math.abs(n-e);s<r&&i&&(s=r-s);for(var a=[],u=i?-1:1,l=e;1e-5<s;){var c=l+u*Math.min(s,o);a.push(C.call(this,t,l,c)),s-=Math.abs(c-l),l=c}return a},C=function(t,e,n){var i=(n-e)/2,r=t*Math.cos(i),o=t*Math.sin(i),s=r,a=-o,u=s*s+a*a,l=u+s*r+a*o,c=4/3*(Math.sqrt(2*u*l)-l)/(s*o-a*r),h=s-c*a,f=a+c*s,d=h,p=-f,m=i+e,b=Math.cos(m),v=Math.sin(m);return{x1:t*Math.cos(e),y1:t*Math.sin(e),x2:h*b-f*v,y2:h*v+f*b,x3:d*b-p*v,y3:d*v+p*b,x4:t*Math.cos(n),y4:t*Math.sin(n)}},N=function(t){return 180*t/Math.PI},I=function(t,e,n,i,r,o){var s=t+.5*(n-t),a=e+.5*(i-e),u=r+.5*(n-r),c=o+.5*(i-o),h=Math.min(t,r,s,u),f=Math.max(t,r,s,u),d=Math.min(e,o,a,c),p=Math.max(e,o,a,c);return new l(h,d,f-h,p-d)},R=function(t,e,n,i,r,o,s,a){var u,c,h,f,d,p,m,b,v,y,g,S,w,_,x=n-t,k=i-e,E=r-n,P=o-i,A=s-r,L=a-o;for(c=0;c<41;c++)v=(m=(h=t+(u=c/40)*x)+u*((d=n+u*E)-h))+u*(d+u*(r+u*A-d)-m),y=(b=(f=e+u*k)+u*((p=i+u*P)-f))+u*(p+u*(o+u*L-p)-b),_=0==c?(w=g=v,S=y):(g=Math.min(g,v),S=Math.min(S,y),w=Math.max(w,v),Math.max(_,y));return new l(Math.round(g),Math.round(S),Math.round(w-g),Math.round(_-S))}}(K.API),(h=K.API).processDataByFilters=function(t,e){var n=0,i=t||"",r=[];for("string"==typeof(e=e||[])&&(e=[e]),n=0;n<e.length;n+=1)switch(e[n]){case"ASCII85Decode":case"/ASCII85Decode":i=et(i),r.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":i=tt(i),r.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":i=nt(i),r.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":i=i.split("").map((function(t){return("0"+t.charCodeAt().toString(16)).slice(-2)})).join("")+">",r.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":i=it(i),r.push("/FlateDecode");break;default:throw new Error('The filter: "'+e[n]+'" is not implemented')}return{data:i,reverseChain:r.reverse().join(" ")}},(f=K.API).loadFile=function(t,e,n){e=!1!==e,n="function"==typeof n?n:function(){};var i=void 0;try{i=function(t,e,n){function i(t){var e=t.length,n=[],i=String.fromCharCode;for(o=0;o<e;o+=1)n.push(i(255&t.charCodeAt(o)));return n.join("")}var r=new XMLHttpRequest,o=0;if(r.open("GET",t,!e),r.overrideMimeType("text/plain; charset=x-user-defined"),!1===e&&(r.onload=function(){n(200===r.status?i(this.responseText):void 0)}),r.send(null),e&&200===r.status)return i(r.responseText)}(t,e,n)}catch(t){}return i},f.loadImageFile=f.loadFile,function(t,e){if("undefined"!=typeof Promise){var n=function(t){var e=a(t);return"undefined"===e?"undefined":"string"===e||t instanceof String?"string":"number"===e||t instanceof Number?"number":"function"===e||t instanceof Function?"function":t&&t.constructor===Array?"array":t&&1===t.nodeType?"element":"object"===e?"object":"unknown"},i=function(t,e){var n=document.createElement(t);if(e.className&&(n.className=e.className),e.innerHTML){n.innerHTML=e.innerHTML;for(var i=n.getElementsByTagName("script"),r=i.length;0<r--;)i[r].parentNode.removeChild(i[r])}for(var o in e.style)n.style[o]=e.style[o];return n},r=function t(e){var n=Object.assign(t.convert(Promise.resolve()),JSON.parse(JSON.stringify(t.template))),i=t.convert(Promise.resolve(),n);return(i=i.setProgress(1,t,1,[t])).set(e)};((r.prototype=Object.create(Promise.prototype)).constructor=r).convert=function(t,e){return t.__proto__=e||r.prototype,t},r.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{}}},r.prototype.from=function(t,e){return this.then((function(){switch(e=e||function(t){switch(n(t)){case"string":return"string";case"element":return"canvas"===t.nodeName.toLowerCase?"canvas":"element";default:return"unknown"}}(t)){case"string":return this.set({src:i("div",{innerHTML:t})});case"element":return this.set({src:t});case"canvas":return this.set({canvas:t});case"img":return this.set({img:t});default:return this.error("Unknown source type.")}}))},r.prototype.to=function(t){switch(t){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},r.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var t={position:"relative",display:"inline-block",width:Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:"white"},e=function t(e,n){for(var i=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),r=e.firstChild;r;r=r.nextSibling)!0!==n&&1===r.nodeType&&"SCRIPT"===r.nodeName||i.appendChild(t(r,n));return 1===e.nodeType&&("CANVAS"===e.nodeName?(i.width=e.width,i.height=e.height,i.getContext("2d").drawImage(e,0,0)):"TEXTAREA"!==e.nodeName&&"SELECT"!==e.nodeName||(i.value=e.value),i.addEventListener("load",(function(){i.scrollTop=e.scrollTop,i.scrollLeft=e.scrollLeft}),!0)),i}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===e.tagName&&(t.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:t}),this.prop.container.appendChild(e),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},r.prototype.toCanvas=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then((function(){var t=Object.assign({},this.opt.html2canvas);if(delete t.onrendered,this.isHtml2CanvasLoaded())return html2canvas(this.prop.container,t)})).then((function(t){(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)}))},r.prototype.toContext2d=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then((function(){var t=this.opt.jsPDF,e=Object.assign({async:!0,allowTaint:!0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete e.onrendered,t.context2d.autoPaging=!0,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,e.windowHeight=e.windowHeight||0,e.windowHeight=0==e.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):e.windowHeight,this.isHtml2CanvasLoaded())return html2canvas(this.prop.container,e)})).then((function(t){(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)}))},r.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var t=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=t}))},r.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},r.prototype.output=function(t,e,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(t,e):this.outputPdf(t,e)},r.prototype.outputPdf=function(t,e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(t,e)}))},r.prototype.outputImg=function(t){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(t){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+t+'" is not supported.'}}))},r.prototype.isHtml2CanvasLoaded=function(){var t=void 0!==e.html2canvas;if(!t)throw new Error("html2canvas not loaded.");return t},r.prototype.save=function(t){if(this.isHtml2CanvasLoaded())return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(t?{filename:t}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},r.prototype.doCallback=function(){if(this.isHtml2CanvasLoaded())return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},r.prototype.set=function(t){if("object"!==n(t))return this;var e=Object.keys(t||{}).map((function(e){if(e in r.template.prop)return function(){this.prop[e]=t[e]};switch(e){case"margin":return this.setMargin.bind(this,t.margin);case"jsPDF":return function(){return this.opt.jsPDF=t.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,t.pageSize);default:return function(){this.opt[e]=t[e]}}}),this);return this.then((function(){return this.thenList(e)}))},r.prototype.get=function(t,e){return this.then((function(){var n=t in r.template.prop?this.prop[t]:this.opt[t];return e?e(n):n}))},r.prototype.setMargin=function(t){return this.then((function(){switch(n(t)){case"number":t=[t,t,t,t];case"array":if(2===t.length&&(t=[t[0],t[1],t[0],t[1]]),4===t.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=t})).then(this.setPageSize)},r.prototype.setPageSize=function(t){function e(t,e){return Math.floor(t*e/72*96)}return this.then((function(){(t=t||K.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(t.inner={width:t.width-this.opt.margin[1]-this.opt.margin[3],height:t.height-this.opt.margin[0]-this.opt.margin[2]},t.inner.px={width:e(t.inner.width,t.k),height:e(t.inner.height,t.k)},t.inner.ratio=t.inner.height/t.inner.width),this.prop.pageSize=t}))},r.prototype.setProgress=function(t,e,n,i){return null!=t&&(this.progress.val=t),null!=e&&(this.progress.state=e),null!=n&&(this.progress.n=n),null!=i&&(this.progress.stack=i),this.progress.ratio=this.progress.val/this.progress.state,this},r.prototype.updateProgress=function(t,e,n,i){return this.setProgress(t?this.progress.val+t:null,e||null,n?this.progress.n+n:null,i?this.progress.stack.concat(i):null)},r.prototype.then=function(t,e){var n=this;return this.thenCore(t,e,(function(t,e){return n.updateProgress(null,null,1,[t]),Promise.prototype.then.call(this,(function(e){return n.updateProgress(null,t),e})).then(t,e).then((function(t){return n.updateProgress(1),t}))}))},r.prototype.thenCore=function(t,e,n){n=n||Promise.prototype.then;var i=this;t&&(t=t.bind(i)),e&&(e=e.bind(i));var o=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?i:r.convert(Object.assign({},i),Promise.prototype),s=n.call(o,t,e);return r.convert(s,i.__proto__)},r.prototype.thenExternal=function(t,e){return Promise.prototype.then.call(this,t,e)},r.prototype.thenList=function(t){var e=this;return t.forEach((function(t){e=e.thenCore(t)})),e},r.prototype.catch=function(t){t&&(t=t.bind(this));var e=Promise.prototype.catch.call(this,t);return r.convert(e,this)},r.prototype.catchExternal=function(t){return Promise.prototype.catch.call(this,t)},r.prototype.error=function(t){return this.then((function(){throw new Error(t)}))},r.prototype.using=r.prototype.set,r.prototype.saveAs=r.prototype.save,r.prototype.export=r.prototype.output,r.prototype.run=r.prototype.then,K.getPageSize=function(t,e,n){if("object"===a(t)){var i=t;t=i.orientation,e=i.unit||e,n=i.format||n}e=e||"mm",n=n||"a4",t=(""+(t||"P")).toLowerCase();var r,o=(""+n).toLowerCase(),s={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(e){case"pt":r=1;break;case"mm":r=72/25.4;break;case"cm":r=72/2.54;break;case"in":r=72;break;case"px":r=.75;break;case"pc":case"em":r=12;break;case"ex":r=6;break;default:throw"Invalid unit: "+e}var u,l=0,c=0;if(s.hasOwnProperty(o))l=s[o][1]/r,c=s[o][0]/r;else try{l=n[1],c=n[0]}catch(t){throw new Error("Invalid format: "+n)}if("p"===t||"portrait"===t)t="p",l<c&&(u=c,c=l,l=u);else{if("l"!==t&&"landscape"!==t)throw"Invalid orientation: "+t;t="l",c<l&&(u=c,c=l,l=u)}return{width:c,height:l,unit:e,k:r,orientation:t}},t.html=function(t,e){(e=e||{}).callback=e.callback||function(){},e.html2canvas=e.html2canvas||{},e.html2canvas.canvas=e.html2canvas.canvas||this.canvas,e.jsPDF=e.jsPDF||this;var n=new r(e);return e.worker?n:n.from(t).doCallback()}}else console.warn("Promise not found. html-Plugin will not work")}(K.API,"undefined"!=typeof window&&window||void 0!==i&&i),K.API.addJS=function(t){return m=t,this.internal.events.subscribe("postPutResources",(function(){d=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(d+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),p=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+m+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){void 0!==d&&void 0!==p&&this.internal.out("/Names <</JavaScript "+d+" 0 R>>")})),this},(b=K.API).events.push(["postPutResources",function(){var t=this,e=/^(\d+) 0 obj$/;if(0<this.outline.root.children.length)for(var n=t.outline.render().split(/\r\n/),i=0;i<n.length;i++){var r=n[i],o=e.exec(r);null!=o&&t.internal.newObjectDeferredBegin(o[1],!1),t.internal.write(r)}if(this.outline.createNamedDestinations){var s=this.internal.pages.length,a=[];for(i=0;i<s;i++){var u=t.internal.newObject();a.push(u);var l=t.internal.getPageInfo(i+1);t.internal.write("<< /D["+l.objId+" 0 R /XYZ null null null]>> endobj")}var c=t.internal.newObject();for(t.internal.write("<< /Names [ "),i=0;i<a.length;i++)t.internal.write("(page_"+(i+1)+")"+a[i]+" 0 R");t.internal.write(" ] >>","endobj"),v=t.internal.newObject(),t.internal.write("<< /Dests "+c+" 0 R"),t.internal.write(">>","endobj")}}]),b.events.push(["putCatalog",function(){0<this.outline.root.children.length&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+v+" 0 R"))}]),b.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(t,e,n){var i={title:e,options:n,children:[]};return null==t&&(t=this.root),t.children.push(i),i},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(e){e.id=t.internal.newObjectDeferred();for(var n=0;n<e.children.length;n++)this.genIds_r(e.children[n])},t.outline.renderRoot=function(t){this.objStart(t),this.line("/Type /Outlines"),0<t.children.length&&(this.line("/First "+this.makeRef(t.children[0])),this.line("/Last "+this.makeRef(t.children[t.children.length-1]))),this.line("/Count "+this.count_r({count:0},t)),this.objEnd()},t.outline.renderItems=function(e){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<e.children.length;i++){var r=e.children[i];this.objStart(r),this.line("/Title "+this.makeString(r.title)),this.line("/Parent "+this.makeRef(e)),0<i&&this.line("/Prev "+this.makeRef(e.children[i-1])),i<e.children.length-1&&this.line("/Next "+this.makeRef(e.children[i+1])),0<r.children.length&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1])));var o=this.count=this.count_r({count:0},r);if(0<o&&this.line("/Count "+o),r.options&&r.options.pageNumber){var s=t.internal.getPageInfo(r.options.pageNumber);this.line("/Dest ["+s.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var a=0;a<e.children.length;a++)this.renderItems(e.children[a])},t.outline.line=function(t){this.ctx.val+=t+"\r\n"},t.outline.makeRef=function(t){return t.id+" 0 R"},t.outline.makeString=function(e){return"("+t.internal.pdfEscape(e)+")"},t.outline.objStart=function(t){this.ctx.val+="\r\n"+t.id+" 0 obj\r\n<<\r\n"},t.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},t.outline.count_r=function(t,e){for(var n=0;n<e.children.length;n++)t.count++,this.count_r(t,e.children[n]);return t.count}}]),y=[192,193,194,195,196,197,198,199],K.API.processJPEG=function(t,e,n,i,r,o){var s,a=this.decode.DCT_DECODE,u=null;if("string"==typeof t||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=this.__addimage__.isArrayBuffer(t=r||t)?new Uint8Array(t):t,(s=function(t){for(var e,n=256*t.charCodeAt(4)+t.charCodeAt(5),i=t.length,r={width:0,height:0,numcomponents:1},o=4;o<i;o+=2){if(-1!==y.indexOf(t.charCodeAt((o+=n)+1))){e=256*t.charCodeAt(o+5)+t.charCodeAt(o+6),r={width:256*t.charCodeAt(o+7)+t.charCodeAt(o+8),height:e,numcomponents:t.charCodeAt(o+9)};break}n=256*t.charCodeAt(o+2)+t.charCodeAt(o+3)}return r}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}u={data:t,width:s.width,height:s.height,colorSpace:o,bitsPerComponent:8,filter:a,index:e,alias:n}}return u},g=K.API,S="undefined"!=typeof self&&self||"undefined"!=typeof window&&window||void 0!==i&&i||Function('return typeof this === "object" && this.content')()||Function("return this")(),w=function(){return"function"==typeof Deflater},_=function(t){var e=30720;return e|=Math.min(3,(t-1&255)>>1)<<6,e|=0,[120,255&(e+=31-e%31)]},x=function(t,e,n,i){for(var r,o,s,a=t.length/e,u=new Uint8Array(t.length+a),l=T(),c=0;c<a;c+=1){if(r=t.subarray(s=c*e,s+e),i)u.set(i(r,n,o),s+c);else{for(var h,f=l.length,d=[];h<f;h+=1)d[h]=l[h](r,n,o);var p=M(d.concat());u.set(d[p],s+c)}o=r}return u},k=function(t,e){var n=[],i=t.length;n[0]=1;for(var r=0;r<i;r+=1)n[r+1]=t[r]-(t[r-e]||0)+256&255;return n},E=function(t,e,n){var i=[],r=t.length;i[0]=2;for(var o=0;o<r;o+=1)i[o+1]=t[o]-(n&&n[o]||0)+256&255;return i},P=function(t,e,n){var i=[],r=t.length;i[0]=3;for(var o=0;o<r;o+=1)i[o+1]=t[o]+256-((t[o-e]||0)+(n&&n[o]||0)>>>1)&255;return i},A=function(t,e,n){var i,r=[],o=t.length;r[0]=4;for(var s=0;s<o;s+=1)i=L(t[s-e]||0,n&&n[s]||0,n&&n[s-e]||0),r[s+1]=t[s]-i+256&255;return r},L=function(t,e,n){if(t===e&&e===n)return t;var i=Math.abs(e-n),r=Math.abs(t-n),o=Math.abs(t+e-n-n);return i<=r&&i<=o?t:r<=o?e:n},T=function(){return[ot,k,E,P,A]},M=function(t){var e=t.map((function(t){return t.reduce((function(t,e){return t+Math.abs(e)}),0)}));return e.indexOf(Math.min.apply(null,e))},g.processPNG=function(t,e,n,i){var r,o,s,a,u,l,c,h,f,d,p,m,b,v,y,_=this.decode.FLATE_DECODE,x="";if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){if("function"!=typeof S.PNG||"function"!=typeof S.FlateStream)throw new Error("PNG support requires png.js and zlib.js");if(t=(s=new PNG(t)).imgData,o=s.bits,r=s.colorSpace,u=s.colors,-1!==[4,6].indexOf(s.colorType)){if(8===s.bits){f=(h=32==s.pixelBitlength?new Uint32Array(s.decodePixels().buffer):16==s.pixelBitlength?new Uint16Array(s.decodePixels().buffer):new Uint8Array(s.decodePixels().buffer)).length,p=new Uint8Array(f*s.colors),d=new Uint8Array(f);var k,E=s.pixelBitlength-s.bits;for(y=v=0;v<f;v++){for(b=h[v],k=0;k<E;)p[y++]=b>>>k&255,k+=s.bits;d[v]=b>>>k&255}}if(16===s.bits){f=(h=new Uint32Array(s.decodePixels().buffer)).length,p=new Uint8Array(f*(32/s.pixelBitlength)*s.colors),d=new Uint8Array(f*(32/s.pixelBitlength)),m=1<s.colors;for(var P=y=v=0;v<f;)b=h[v++],p[y++]=b>>>0&255,m&&(p[y++]=b>>>16&255,b=h[v++],p[y++]=b>>>0&255),d[P++]=b>>>16&255;o=8}!function(t){return t!==g.image_compression.NONE&&w()}(i)?(t=p,c=d,_=void 0):(t=rt(p,s.width*s.colors,s.colors,i),c=rt(d,s.width,1,i))}if(3===s.colorType&&(r=this.color_spaces.INDEXED,l=s.palette,s.transparency.indexed)){var A=s.transparency.indexed,L=0;for(v=0,f=A.length;v<f;++v)L+=A[v];if((L/=255)==f-1&&-1!==A.indexOf(0))a=[A.indexOf(0)];else if(L!==f){for(h=s.decodePixels(),d=new Uint8Array(h.length),v=0,f=h.length;v<f;v++)d[v]=A[h[v]];c=rt(d,s.width,1)}}var T=function(t){var e;switch(t){case g.image_compression.FAST:e=11;break;case g.image_compression.MEDIUM:e=13;break;case g.image_compression.SLOW:e=14;break;default:e=12}return e}(i);return _===this.decode.FLATE_DECODE&&(x="/Predictor "+T+" "),x+="/Colors "+u+" /BitsPerComponent "+o+" /Columns "+s.width,(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(c&&this.__addimage__.isArrayBuffer(c)||this.__addimage__.isArrayBufferView(c))&&(c=this.__addimage__.arrayBufferToBinaryString(c)),{alias:n,data:t,index:e,filter:_,decodeParameters:x,transparency:a,palette:l,sMask:c,predictor:T,width:s.width,height:s.height,bitsPerComponent:o,colorSpace:r}}},(C=K.API).processGIF89A=function(t,e,n,i){var r=new ft(t),o=r.width,s=r.height,a=[];r.decodeAndBlitFrameRGBA(0,a);var u={data:a,width:o,height:s},l=new pt(100).encode(u,100);return C.processJPEG.call(this,l,e,n,i)},C.processGIF87A=C.processGIF89A,(N=K.API).processBMP=function(t,e,n,i){var r=new mt(t,!1),o=r.width,s=r.height,a={data:r.getData(),width:o,height:s},u=new pt(100).encode(a,100);return N.processJPEG.call(this,u,e,n,i)},(I=K.API).processWEBP=function(t,e,n,i){var r=new bt(t,!1),o=r.width,s=r.height,a={data:r.getData(),width:o,height:s},u=new pt(100).encode(a,100);return I.processJPEG.call(this,u,e,n,i)},K.API.setLanguage=function(t){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"FYRO Macedonian",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]&&(this.internal.languageSettings.languageCode=t,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},O=(R=K.API).getCharWidthsArray=function(t,e){var n,i,r=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),u=e.widths?e.widths:r.metadata.Unicode.widths,l=u.fof?u.fof:1,c=e.kerning?e.kerning:r.metadata.Unicode.kerning,h=c.fof?c.fof:1,f=!1!==e.doKerning,d=0,p=t.length,m=0,b=u[0]||l,v=[];for(n=0;n<p;n++)i=t.charCodeAt(n),"function"==typeof r.metadata.widthOfString?v.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(i))+s*(1e3/o)||0)/1e3):(f&&"object"===a(c[i])&&!isNaN(parseInt(c[i][m],10))&&(d=c[i][m]/h),v.push((u[i]||b)/l+d)),m=i;return v},F=R.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),i=e.font||this.internal.getFont(),r=e.charSpace||this.internal.getCharSpace();return R.processArabic&&(t=R.processArabic(t)),"function"==typeof i.metadata.widthOfString?i.metadata.widthOfString(t,n,r)/n:O.apply(this,arguments).reduce((function(t,e){return t+e}),0)},R.splitTextToSize=function(t,e,n){var i,r=(n=n||{}).fontSize||this.internal.getFontSize(),o=(function(t){if(t.widths&&t.kerning)return{widths:t.widths,kerning:t.kerning};var e=this.internal.getFont(t.fontName,t.fontStyle),n="Unicode";return e.metadata[n]?{widths:e.metadata[n].widths||{0:1},kerning:e.metadata[n].kerning||{}}:{font:e.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);i=Array.isArray(t)?t:t.split(/\r?\n/);var s=1*this.internal.scaleFactor*e/r;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/r:0,o.lineIndent=n.lineIndent;var a,u,l=[];for(a=0,u=i.length;a<u;a++)l=l.concat(at.apply(this,[i[a],s,o]));return l},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",n="klmnopqrstuvwxyz",i={},r={},o=0;o<n.length;o++)i[n[o]]=e[o],r[e[o]]=n[o];function s(t){return"0x"+parseInt(t,10).toString(16)}var u=t.__fontmetrics__.compress=function(t){var e,n,i,o=["{"];for(var l in t){if(e=t[l],n=isNaN(parseInt(l,10))?"'"+l+"'":(n=s(l=parseInt(l,10)).slice(2)).slice(0,-1)+r[n.slice(-1)],"number"==typeof e)i=(e<0?(i=s(e).slice(3),"-"):(i=s(e).slice(2),""))+i.slice(0,-1)+r[i.slice(-1)];else{if("object"!==a(e))throw new Error("Don't know what to do with value type "+a(e)+".");i=u(e)}o.push(n+i)}return o.push("}"),o.join("")},l=t.__fontmetrics__.uncompress=function(t){if("string"!=typeof t)throw new Error("Invalid argument passed to uncompress.");for(var e,n,r,o,s={},a=1,u=s,l=[],c="",h="",f=t.length-1,d=1;d<f;d+=1)"'"==(o=t[d])?e=e?void(r=e.join("")):[]:e?e.push(o):"{"==o?(l.push([u,r]),u={},r=void 0):"}"==o?((n=l.pop())[0][n[1]]=u,r=void 0,u=n[0]):"-"==o?a=-1:void 0===r?i.hasOwnProperty(o)?(c+=i[o],r=parseInt(c,16)*a,a=1,c=""):c+=o:i.hasOwnProperty(o)?(h+=i[o],u[r]=parseInt(h,16)*a,a=1,r=void 0,h=""):h+=o;return s},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},f={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(t){var e=t.font,n=f.Unicode[e.postScriptName];n&&(e.metadata.Unicode={},e.metadata.Unicode.widths=n.widths,e.metadata.Unicode.kerning=n.kerning);var i=h.Unicode[e.postScriptName];i&&(e.metadata.Unicode.encoding=i,e.encoding=i.codePages[0])}])}(K.API),(B=K).API.events.push(["addFont",function(t){var e=void 0,n=t.font,i=t.instance;if(void 0!==i){if("string"!=typeof(e=!1===i.existsFileInVFS(n.postScriptName)?i.loadFile(n.postScriptName):i.getFileFromVFS(n.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");!function(t,e){e=/^\x00\x01\x00\x00/.test(e)?ut(e):ut(atob(e)),t.metadata=B.API.TTFFont.open(e),t.metadata.Unicode=t.metadata.Unicode||{encoding:{},kerning:{},widths:[]},t.metadata.glyIdsUsed=[0]}(n,e)}else if(!1===n.isStandardFont)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').")}]),(D=K.API).addSvg=function(t,e,n,i,r){if(void 0===e||void 0===n)throw new Error("addSVG needs values for 'x' and 'y'");function o(t){for(var e=parseFloat(t[1]),n=parseFloat(t[2]),i=[],r=3,o=t.length;r<o;)"c"===t[r]?(i.push([parseFloat(t[r+1]),parseFloat(t[r+2]),parseFloat(t[r+3]),parseFloat(t[r+4]),parseFloat(t[r+5]),parseFloat(t[r+6])]),r+=7):"l"===t[r]?(i.push([parseFloat(t[r+1]),parseFloat(t[r+2])]),r+=3):r+=1;return[e,n,i]}var s,a,u,l,c,h,f,d,p=(s=t,(u=((d=(f=document).createElement("iframe"),l=".jsPDF_sillysvg_iframe {display:none;position:absolute;}",(h=(c=f).createElement("style")).type="text/css",h.styleSheet?h.styleSheet.cssText=l:h.appendChild(c.createTextNode(l)),c.getElementsByTagName("head")[0].appendChild(h),d.name="childframe",d.setAttribute("width",0),d.setAttribute("height",0),d.setAttribute("frameborder","0"),d.setAttribute("scrolling","no"),d.setAttribute("seamless","seamless"),d.setAttribute("class","jsPDF_sillysvg_iframe"),f.body.appendChild(d),a=d).contentWindow||a.contentDocument).document).write(s),u.close(),u.getElementsByTagName("svg")[0]),m=[1,1],b=parseFloat(p.getAttribute("width")),v=parseFloat(p.getAttribute("height"));b&&v&&(i&&r?m=[i/b,r/v]:i?m=[i/b,i/b]:r&&(m=[r/v,r/v]));var y,g,S,w,_=p.childNodes;for(y=0,g=_.length;y<g;y++)(S=_[y]).tagName&&"PATH"===S.tagName.toUpperCase()&&((w=o(S.getAttribute("d").split(-1===S.getAttribute("d").indexOf(",")?" ":",")))[0]=w[0]*m[0]+e,w[1]=w[1]*m[1]+n,this.lines.call(this,w[2],w[0],w[1],m));return this},D.addSVG=D.addSvg,D.addSvgAsImage=function(t,e,n,i,r,o,s,a){if(isNaN(e)||isNaN(n))throw console.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(r))throw console.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=r;var l=u.getContext("2d");return l.fillStyle="#fff",l.fillRect(0,0,u.width,u.height),canvg(u,t,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0}),this.addImage(u.toDataURL("image/jpeg",1),e,n,i,r,s,a),this},K.API.putTotalPages=function(t){var e,n;n=parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var r=0;r<this.internal.pages[i].length;r++)this.internal.pages[i][r]=this.internal.pages[i][r].replace(e,n);return this},K.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var i,r,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(s),l=[],c=0,h=0,f=0;function d(t,e){var n,i=!1;for(n=0;n<t.length;n+=1)t[n]===e&&(i=!0);return i}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===t||!0===e){var p=u.length;for(f=0;f<p;f+=1)n[u[f]].value=n[u[f]].defaultValue,n[u[f]].explicitSet=!1}if("object"===a(t))for(r in t)if(o=t[r],d(u,r)&&void 0!==o){if("boolean"===n[r].type&&"boolean"==typeof o)n[r].value=o;else if("name"===n[r].type&&d(n[r].valueSet,o))n[r].value=o;else if("integer"===n[r].type&&Number.isInteger(o))n[r].value=o;else if("array"===n[r].type){for(c=0;c<o.length;c+=1)if(i=!0,1===o[c].length&&"number"==typeof o[c][0])l.push(String(o[c]-1));else if(1<o[c].length){for(h=0;h<o[c].length;h+=1)"number"!=typeof o[c][h]&&(i=!1);!0===i&&l.push([o[c][0]-1,o[c][1]-1].join(" "))}n[r].value="["+l.join(" ")+"]"}else n[r].value=n[r].defaultValue;n[r].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){var t,e=[];for(t in n)!0===n[t].explicitSet&&e.push("name"===n[t].type?"/"+t+" /"+n[t].value:"/"+t+" "+n[t].value);0!==e.length&&this.internal.write("/ViewerPreferences\n<<\n"+e.join("\n")+"\n>>")})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},K.API.addMetadata=function(t,e){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:t,namespaceuri:e||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",ct),this.internal.events.subscribe("postPutResources",lt)),this},function(t){function e(t){var e,n,i,r,o,s,a;for(o="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",i=[],s=0,a=(n=Object.keys(t).sort((function(t,e){return t-e}))).length;s<a;s++)e=n[s],100<=i.length&&(o+="\n"+i.length+" beginbfchar\n"+i.join("\n")+"\nendbfchar",i=[]),null!=t[e]&&"function"==typeof t[e].toString&&(r=("0000"+t[e].toString(16)).slice(-4),e=("0000"+(+e).toString(16)).slice(-4),i.push("<"+e+"><"+r+">"));return i.length&&(o+="\n"+i.length+" beginbfchar\n"+i.join("\n")+"\nendbfchar\n"),o+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"}var n=t.API,i=n.pdfEscape16=function(t,e){for(var n,i=e.metadata.Unicode.widths,r=["","0","00","000","0000"],o=[""],s=0,a=t.length;s<a;++s){if(n=e.metadata.characterToGlyph(t.charCodeAt(s)),e.metadata.glyIdsUsed.push(n),e.metadata.toUnicode[n]=t.charCodeAt(s),-1==i.indexOf(n)&&(i.push(n),i.push([parseInt(e.metadata.widthOfGlyph(n),10)])),"0"==n)return o.join("");n=n.toString(16),o.push(r[4-n.length],n)}return o.join("")};function r(t){var e,n=t.text||"",r=t.x,o=t.y,s=t.options||{},a=t.mutex||{},u=a.pdfEscape,l=a.activeFontKey,c=a.fonts,h=l,f="",d=0,p="",m=c[h].encoding;if("Identity-H"!==c[h].encoding)return{text:n,x:r,y:o,options:s,mutex:a};for(p=n,h=l,Array.isArray(n)&&(p=n[0]),d=0;d<p.length;d+=1)c[h].metadata.hasOwnProperty("cmap")&&(e=c[h].metadata.cmap.unicode.codeMap[p[d].charCodeAt(0)]),e||p[d].charCodeAt(0)<256&&c[h].metadata.hasOwnProperty("Unicode")?f+=p[d]:f+="";var b="";return parseInt(h.slice(1))<14||"WinAnsiEncoding"===m?b=u(f,h).split("").map((function(t){return t.charCodeAt(0).toString(16)})).join(""):"Identity-H"===m&&(b=i(f,c[h])),a.isHex=!0,{text:b,x:r,y:o,options:s,mutex:a}}n.events.push(["putFont",function(n){!function(n){var i=n.font,r=n.out,o=n.newObject,s=n.putStream,a=n.pdfEscapeWithNeededParanthesis;if(i.metadata instanceof t.API.TTFFont&&"Identity-H"===i.encoding){for(var u=i.metadata.Unicode.widths,l=i.metadata.subset.encode(i.metadata.glyIdsUsed,1),c="",h=0;h<l.length;h++)c+=String.fromCharCode(l[h]);var f=o();s({data:c,addLength1:!0}),r("endobj");var d=o();s({data:e(i.metadata.toUnicode),addLength1:!0}),r("endobj");var p=o();r("<<"),r("/Type /FontDescriptor"),r("/FontName /"+a(i.fontName)),r("/FontFile2 "+f+" 0 R"),r("/FontBBox "+t.API.PDFObject.convert(i.metadata.bbox)),r("/Flags "+i.metadata.flags),r("/StemV "+i.metadata.stemV),r("/ItalicAngle "+i.metadata.italicAngle),r("/Ascent "+i.metadata.ascender),r("/Descent "+i.metadata.decender),r("/CapHeight "+i.metadata.capHeight),r(">>"),r("endobj");var m=o();r("<<"),r("/Type /Font"),r("/BaseFont /"+a(i.fontName)),r("/FontDescriptor "+p+" 0 R"),r("/W "+t.API.PDFObject.convert(u)),r("/CIDToGIDMap /Identity"),r("/DW 1000"),r("/Subtype /CIDFontType2"),r("/CIDSystemInfo"),r("<<"),r("/Supplement 0"),r("/Registry (Adobe)"),r("/Ordering ("+i.encoding+")"),r(">>"),r(">>"),r("endobj"),i.objectNumber=o(),r("<<"),r("/Type /Font"),r("/Subtype /Type0"),r("/ToUnicode "+d+" 0 R"),r("/BaseFont /"+i.fontName),r("/Encoding /"+i.encoding),r("/DescendantFonts ["+m+" 0 R]"),r(">>"),r("endobj"),i.isAlreadyPutted=!0}}(n)}]),n.events.push(["putFont",function(n){!function(n){var i=n.font,r=n.out,o=n.newObject,s=n.putStream,a=n.pdfEscapeWithNeededParanthesis;if(i.metadata instanceof t.API.TTFFont&&"WinAnsiEncoding"===i.encoding){for(var u=i.metadata.rawData,l="",c=0;c<u.length;c++)l+=String.fromCharCode(u[c]);var h=o();s({data:l,addLength1:!0}),r("endobj");var f=o();s({data:e(i.metadata.toUnicode),addLength1:!0}),r("endobj");var d=o();r("<<"),r("/Descent "+i.metadata.decender),r("/CapHeight "+i.metadata.capHeight),r("/StemV "+i.metadata.stemV),r("/Type /FontDescriptor"),r("/FontFile2 "+h+" 0 R"),r("/Flags 96"),r("/FontBBox "+t.API.PDFObject.convert(i.metadata.bbox)),r("/FontName /"+a(i.fontName)),r("/ItalicAngle "+i.metadata.italicAngle),r("/Ascent "+i.metadata.ascender),r(">>"),r("endobj"),i.objectNumber=o();for(var p=0;p<i.metadata.hmtx.widths.length;p++)i.metadata.hmtx.widths[p]=parseInt(i.metadata.hmtx.widths[p]*(1e3/i.metadata.head.unitsPerEm));r("<</Subtype/TrueType/Type/Font/ToUnicode "+f+" 0 R/BaseFont/"+i.fontName+"/FontDescriptor "+d+" 0 R/Encoding/"+i.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(i.metadata.hmtx.widths)+">>"),r("endobj"),i.isAlreadyPutted=!0}}(n)}]),n.events.push(["postProcessText",function(t){var e=t.text||"",n=[],i={text:e,x:t.x,y:t.y,options:t.options,mutex:t.mutex};if(Array.isArray(e)){var o=0;for(o=0;o<e.length;o+=1)Array.isArray(e[o])&&3===e[o].length?n.push([r(Object.assign({},i,{text:e[o][0]})).text,e[o][1],e[o][2]]):n.push(r(Object.assign({},i,{text:e[o]})).text);t.text=n}else t.text=r(Object.assign({},i,{text:e})).text}])}(K),(j=K.API).existsFileInVFS=function(t){return ht.call(this),void 0!==this.internal.vFS[t]},j.addFileToVFS=function(t,e){return ht.call(this),this.internal.vFS[t]=e,this},j.getFileFromVFS=function(t){return ht.call(this),void 0!==this.internal.vFS[t]?this.internal.vFS[t]:null},K.API.addHTML=function(t,e,n,i,r){if("undefined"==typeof html2canvas&&"undefined"==typeof rasterizeHTML)throw new Error("You need either https://github.com/niklasvh/html2canvas or https://github.com/cburgmer/rasterizeHTML.js");"number"!=typeof e&&(i=e,r=n),"function"==typeof i&&(r=i,i=null),"function"!=typeof r&&(r=function(){});var o=this.internal,s=o.scaleFactor,a=o.pageSize.getWidth(),u=o.pageSize.getHeight();if((i=i||{}).onrendered=(function(t){e=parseInt(e)||0,n=parseInt(n)||0;var o=i.dim||{},l=Object.assign({top:0,right:0,bottom:0,left:0,useFor:"content"},i.margin),c=o.h||Math.min(u,t.height/s),h=o.w||Math.min(a,t.width/s)-e,f=i.format||"JPEG",d=i.imageCompression||"SLOW";if(t.height>u-l.top-l.bottom&&i.pagesplit){var p=function(t,e,n,r,o){var s=document.createElement("canvas");s.height=o,s.width=r;var a=s.getContext("2d");return a.mozImageSmoothingEnabled=!1,a.webkitImageSmoothingEnabled=!1,a.msImageSmoothingEnabled=!1,a.imageSmoothingEnabled=!1,a.fillStyle=i.backgroundColor||"#ffffff",a.fillRect(0,0,r,o),a.drawImage(t,e,n,r,o,0,0,r,o),s},m=(function(){for(var i,o,c,m,b=0,v=0,y={},g=!1;;){if(v=0,y.top=0!==b?l.top:n,y.left=0!==b?l.left:e,g=(a-l.left-l.right)*s<t.width,"content"===l.useFor?0===b?(i=Math.min((a-l.left)*s,t.width),o=Math.min((u-l.top)*s,t.height-b)):(i=Math.min(a*s,t.width),o=Math.min(u*s,t.height-b),y.top=0):(i=Math.min((a-l.left-l.right)*s,t.width),o=Math.min((u-l.bottom-l.top)*s,t.height-b)),g)for(;"content"===l.useFor&&(0===v?i=Math.min((a-l.left)*s,t.width):(i=Math.min(a*s,t.width-v),y.left=0)),m=[c=p(t,v,b,i,o),y.left,y.top,c.width/s,c.height/s,f,null,d],this.addImage.apply(this,m),!((v+=i)>=t.width);)this.addPage();else m=[c=p(t,0,b,i,o),y.left,y.top,c.width/s,c.height/s,f,null,d],this.addImage.apply(this,m);if((b+=o)>=t.height)break;this.addPage()}r(h,b,null,m)}).bind(this);if("CANVAS"===t.nodeName){var b=new Image;b.onload=m,b.src=t.toDataURL("image/png"),t=b}else m()}else{var v=Math.random().toString(35),y=[t,e,n,h,c,f,v,d];this.addImage.apply(this,y),r(h,c,v,y)}}).bind(this),"undefined"!=typeof html2canvas&&!i.rstz)return html2canvas(t,i);if("undefined"==typeof rasterizeHTML)return null;var l="drawDocument";return"string"==typeof t&&(l=/^http/.test(t)?"drawURL":"drawHTML"),i.width=i.width||a*s,rasterizeHTML[l](t,void 0,i).then((function(t){i.onrendered(t.image)}),(function(t){r(null,t)}))},function(t){var e,n,i,r,o,s,u,l,c,h,f,d,p,m,b,v,y,g,S,w;function _(){}e=function(t){return _.prototype=t,new _},h=function(t){var e,n,i,r,o,s,a;for(n=0,i=t.length,e=void 0,s=r=!1;!r&&n!==i;)(e=t[n]=t[n].trimLeft())&&(r=!0),n++;for(n=i-1;i&&!s&&-1!==n;)(e=t[n]=t[n].trimRight())&&(s=!0),n--;for(o=/\s+$/g,a=!0,n=0;n!==i;)"\u2028"!=t[n]&&(e=t[n].replace(/\s+/g," "),a&&(e=e.trimLeft()),e&&(a=o.test(e)),t[n]=e),n++;return t},d=function(t){var e,n,r;for(e=void 0,n=(r=t.split(",")).shift();!e&&n;)e=i[n.trim().toLowerCase()],n=r.shift();return e},p=function(t){var e;return-1<(t="auto"===t?"0px":t).indexOf("em")&&!isNaN(Number(t.replace("em","")))&&(t=18.719*Number(t.replace("em",""))+"px"),-1<t.indexOf("pt")&&!isNaN(Number(t.replace("pt","")))&&(t=1.333*Number(t.replace("pt",""))+"px"),(e=m[t])?e:void 0!==(e={"xx-small":9,"x-small":11,small:13,medium:16,large:19,"x-large":23,"xx-large":28,auto:0}[t])||(e=parseFloat(t))?m[t]=e/16:(e=t.match(/([\d\.]+)(px)/),m[t]=Array.isArray(e)&&3===e.length?parseFloat(e[1])/16:1)},c=function(t){var e,n,i,a,c;return c=t,a=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(c,null):c.currentStyle?c.currentStyle:c.style,n=void 0,(e={})["font-family"]=d((i=function(t){return t=t.replace(/-\D/g,(function(t){return t.charAt(1).toUpperCase()})),a[t]})("font-family"))||"times",e["font-style"]=r[i("font-style")]||"normal",e["text-align"]=o[i("text-align")]||"left","bold"===(n=s[i("font-weight")]||"normal")&&(e["font-style"]="normal"===e["font-style"]?n:n+e["font-style"]),e["font-size"]=p(i("font-size"))||1,e["line-height"]=p(i("line-height"))||1,e.display="inline"===i("display")?"inline":"block",e["margin-top"]=(n="block"===e.display)&&p(i("margin-top"))||0,e["margin-bottom"]=n&&p(i("margin-bottom"))||0,e["padding-top"]=n&&p(i("padding-top"))||0,e["padding-bottom"]=n&&p(i("padding-bottom"))||0,e["margin-left"]=n&&p(i("margin-left"))||0,e["margin-right"]=n&&p(i("margin-right"))||0,e["padding-left"]=n&&p(i("padding-left"))||0,e["padding-right"]=n&&p(i("padding-right"))||0,e["page-break-before"]=i("page-break-before")||"auto",e.float=u[i("cssFloat")]||"none",e.clear=l[i("clear")]||"none",e.color=i("color"),e},b=function(t,e,n){var i,r,o,s,a;if(o=!1,s=r=void 0,i=n["#"+t.id])if("function"==typeof i)o=i(t,e);else for(r=0,s=i.length;!o&&r!==s;)o=i[r](t,e),r++;if(i=n[t.nodeName],!o&&i)if("function"==typeof i)o=i(t,e);else for(r=0,s=i.length;!o&&r!==s;)o=i[r](t,e),r++;for(a="string"==typeof t.className?t.className.split(" "):[],r=0;r<a.length;r++)if(i=n["."+a[r]],!o&&i)if("function"==typeof i)o=i(t,e);else for(r=0,s=i.length;!o&&r!==s;)o=i[r](t,e),r++;return o},w=function(t,e){var n,i,r,o,s,a,u,l,c;for(n=[],i=[],r=0,c=t.rows[0].cells.length,u=t.clientWidth;r<c;)i[r]={name:(l=t.rows[0].cells[r]).textContent.toLowerCase().replace(/\s+/g,""),prompt:l.textContent.replace(/\r?\n/g,""),width:l.clientWidth/u*e.pdf.internal.pageSize.getWidth()},r++;for(r=1;r<t.rows.length;){for(a=t.rows[r],s={},o=0;o<a.cells.length;)s[i[o].name]=a.cells[o].textContent.replace(/\r?\n/g,""),o++;n.push(s),r++}return{rows:n,headers:i}};var x={SCRIPT:1,STYLE:1,NOSCRIPT:1,OBJECT:1,EMBED:1,SELECT:1},k=1;n=function(t,i,r){var o,s,u,l,h,f,d,p;for(s=t.childNodes,o=void 0,(h="block"===(u=c(t)).display)&&(i.setBlockBoundary(),i.setBlockStyle(u)),l=0,f=s.length;l<f;){if("object"===a(o=s[l])){if(i.executeWatchFunctions(o),1===o.nodeType&&"HEADER"===o.nodeName){var m=o,y=i.pdf.margins_doc.top;i.pdf.internal.events.subscribe("addPage",(function(t){i.y=y,n(m,i,r),i.pdf.margins_doc.top=i.y+10,i.y+=10}),!1)}if(8===o.nodeType&&"#comment"===o.nodeName)~o.textContent.indexOf("ADD_PAGE")&&(i.pdf.addPage(),i.y=i.pdf.margins_doc.top);else if(1!==o.nodeType||x[o.nodeName])if(3===o.nodeType){var g=o.nodeValue;if(o.nodeValue&&"LI"===o.parentNode.nodeName)if("OL"===o.parentNode.parentNode.nodeName)g=k+++". "+g;else{var S=u["font-size"],_=(3-.75*S)*i.pdf.internal.scaleFactor,E=.75*S*i.pdf.internal.scaleFactor,P=1.74*S/i.pdf.internal.scaleFactor;p=function(t,e){this.pdf.circle(t+_,e+E,P,"FD")}}16&o.ownerDocument.body.compareDocumentPosition(o)&&i.addText(g,u)}else"string"==typeof o&&i.addText(o,u);else{var A;if("IMG"===o.nodeName){var L=o.getAttribute("src");A=v[i.pdf.API.__addimage__.sHashCode(L)||L]}if(A){i.pdf.internal.pageSize.getHeight()-i.pdf.margins_doc.bottom<i.y+o.height&&i.y>i.pdf.margins_doc.top&&(i.pdf.addPage(),i.y=i.pdf.margins_doc.top,i.executeWatchFunctions(o));var T=c(o),M=i.x,C=12/i.pdf.internal.scaleFactor,N=(T["margin-left"]+T["padding-left"])*C,I=(T["margin-right"]+T["padding-right"])*C,R=(T["margin-top"]+T["padding-top"])*C,O=(T["margin-bottom"]+T["padding-bottom"])*C;i.pdf.addImage(A,M+=void 0!==T.float&&"right"===T.float?i.settings.width-o.width-I:N,i.y+R,o.width,o.height),A=void 0,"right"===T.float||"left"===T.float?(i.watchFunctions.push((function(t,e,n,r){return i.y>=e?(i.x+=t,i.settings.width+=n,!0):!!(r&&1===r.nodeType&&!x[r.nodeName]&&i.x+r.width>i.pdf.margins_doc.left+i.pdf.margins_doc.width)&&(i.x+=t,i.y=e,i.settings.width+=n,!0)}).bind(this,"left"===T.float?-o.width-N-I:0,i.y+o.height+R+O,o.width)),i.watchFunctions.push((function(t,e,n){return!(i.y<t&&e===i.pdf.internal.getNumberOfPages())||1===n.nodeType&&"both"===c(n).clear&&(i.y=t,!0)}).bind(this,i.y+o.height,i.pdf.internal.getNumberOfPages())),i.settings.width-=o.width+N+I,"left"===T.float&&(i.x+=o.width+N+I)):i.y+=o.height+R+O}else if("TABLE"===o.nodeName)d=w(o,i),i.y+=10,i.pdf.table(i.x,i.y,d.rows,d.headers,{autoSize:!1,printHeaders:r.printHeaders,margins:i.pdf.margins_doc,css:c(o)}),i.y=i.pdf.lastCellPos.y+i.pdf.lastCellPos.h+20;else if("OL"===o.nodeName||"UL"===o.nodeName)k=1,b(o,i,r)||n(o,i,r),i.y+=10;else if("LI"===o.nodeName){var F=i.x;i.x+=20/i.pdf.internal.scaleFactor,i.y+=3,b(o,i,r)||n(o,i,r),i.x=F}else"BR"===o.nodeName?(i.y+=u["font-size"]*i.pdf.internal.scaleFactor,i.addText("\u2028",e(u))):b(o,i,r)||n(o,i,r)}}l++}if(r.outY=i.y,h)return i.setBlockBoundary(p)},v={},y=function(t,e,n,i){var r,o=t.getElementsByTagName("img"),s=o.length,a=0;function u(){e.pdf.internal.events.publish("imagesLoaded"),i(r)}function l(t,n,i){if(t){var o=new Image;r=++a,o.crossOrigin="",o.onerror=o.onload=function(){if(o.complete&&(0===o.src.indexOf("data:image/")&&(o.width=n||o.width||0,o.height=i||o.height||0),o.width+o.height)){var r=e.pdf.API.__addimage__.sHashCode(t)||t;v[r]=v[r]||o}--a||u()},o.src=t}}for(;s--;)l(o[s].getAttribute("src"),o[s].width,o[s].height);return a||u()},g=function(t,e,i){var r=t.getElementsByTagName("footer");if(0<r.length){r=r[0];var o=e.pdf.internal.write,s=e.y;e.pdf.internal.write=function(){},n(r,e,i);var a=Math.ceil(e.y-s)+5;e.y=s,e.pdf.internal.write=o,e.pdf.margins_doc.bottom+=a;for(var u=function(t){var o=void 0!==t?t.pageNumber:1,s=e.y;e.y=e.pdf.internal.pageSize.getHeight()-e.pdf.margins_doc.bottom,e.pdf.margins_doc.bottom-=a;for(var u=r.getElementsByTagName("span"),l=0;l<u.length;++l)-1<(" "+u[l].className+" ").replace(/[\n\t]/g," ").indexOf(" pageCounter ")&&(u[l].innerHTML=o),-1<(" "+u[l].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")&&(u[l].innerHTML="###jsPDFVarTotalPages###");n(r,e,i),e.pdf.margins_doc.bottom+=a,e.y=s},l=r.getElementsByTagName("span"),c=0;c<l.length;++c)-1<(" "+l[c].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")&&e.pdf.internal.events.subscribe("htmlRenderingFinished",e.pdf.putTotalPages.bind(e.pdf,"###jsPDFVarTotalPages###"),!0);e.pdf.internal.events.subscribe("addPage",u,!1),u(),x.FOOTER=1}},S=function(t,e,i,r,o,s){if(!e)return!1;var a,u,l,c;"string"==typeof e||e.parentNode||(e=""+e.innerHTML),"string"==typeof e&&(a=e.replace(/<\/?script[^>]*?>/gi,""),c="jsPDFhtmlText"+Date.now().toString()+(1e3*Math.random()).toFixed(0),(l=document.createElement("div")).style.cssText="position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;",l.innerHTML='<iframe style="height:1px;width:1px" name="'+c+'" />',document.body.appendChild(l),(u=window.frames[c]).document.open(),u.document.writeln(a),u.document.close(),e=u.document.body);var h,d=new f(t,i,r,o);return y.call(this,e,d,o.elementHandlers,(function(t){g(e,d,o.elementHandlers),n(e,d,o.elementHandlers),d.pdf.internal.events.publish("htmlRenderingFinished"),h=d.dispose(),"function"==typeof s?s(h):t&&console.error("jsPDF Warning: rendering issues? provide a callback to fromHTML!")})),h||{x:d.x,y:d.y}},(f=function(t,e,n,i){return this.pdf=t,this.x=e,this.y=n,this.settings=i,this.watchFunctions=[],this.init(),this}).prototype.init=function(){return this.paragraph={text:[],style:[]},this.pdf.internal.write("q")},f.prototype.dispose=function(){return this.pdf.internal.write("Q"),{x:this.x,y:this.y,ready:!0}},f.prototype.executeWatchFunctions=function(t){var e=!1,n=[];if(0<this.watchFunctions.length){for(var i=0;i<this.watchFunctions.length;++i)!0===this.watchFunctions[i](t)?e=!0:n.push(this.watchFunctions[i]);this.watchFunctions=n}return e},f.prototype.splitFragmentsIntoLines=function(t,n){var i,r,o,s,a,u,l,c,h,f,d,p,m,b;for(f=this.pdf.internal.scaleFactor,s={},u=l=c=b=a=o=h=r=void 0,p=[d=[]],i=0,m=this.settings.width;t.length;)if(a=t.shift(),b=n.shift(),a)if((o=s[(r=b["font-family"])+(h=b["font-style"])])||(o=this.pdf.internal.getFont(r,h).metadata.Unicode,s[r+h]=o),l=this.pdf.getStringUnitWidth(a,c={widths:o.widths,kerning:o.kerning,fontSize:12*b["font-size"],textIndent:i})*c.fontSize/f,"\u2028"==a)p.push(d=[]);else if(m<i+l){for(u=this.pdf.splitTextToSize(a,m,c),d.push([u.shift(),b]);u.length;)d=[[u.shift(),b]],p.push(d);i=this.pdf.getStringUnitWidth(d[0][0],c)*c.fontSize/f}else d.push([a,b]),i+=l;if(void 0!==b["text-align"]&&("center"===b["text-align"]||"right"===b["text-align"]||"justify"===b["text-align"]))for(var v=0;v<p.length;++v){var y=this.pdf.getStringUnitWidth(p[v][0][0],c)*c.fontSize/f;0<v&&(p[v][0][1]=e(p[v][0][1]));var g=m-y;if("right"===b["text-align"])p[v][0][1]["margin-left"]=g;else if("center"===b["text-align"])p[v][0][1]["margin-left"]=g/2;else if("justify"===b["text-align"]){var S=p[v][0][0].split(" ").length-1;p[v][0][1]["word-spacing"]=g/S,v===p.length-1&&(p[v][0][1]["word-spacing"]=0)}}return p},f.prototype.RenderTextFragment=function(t,e){var n,i;i=0,this.pdf.internal.pageSize.getHeight()-this.pdf.margins_doc.bottom<this.y+this.pdf.internal.getFontSize()&&(this.pdf.internal.write("ET","Q"),this.pdf.addPage(),this.y=this.pdf.margins_doc.top,this.pdf.internal.write("q","BT",this.getPdfColor(e.color),this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td"),i=Math.max(i,e["line-height"],e["font-size"]),this.pdf.internal.write(0,(-12*i).toFixed(2),"Td")),n=this.pdf.internal.getFont(e["font-family"],e["font-style"]);var r=this.getPdfColor(e.color);r!==this.lastTextColor&&(this.pdf.internal.write(r),this.lastTextColor=r),void 0!==e["word-spacing"]&&0<e["word-spacing"]&&this.pdf.internal.write(e["word-spacing"].toFixed(2),"Tw"),this.pdf.internal.write("/"+n.id,(12*e["font-size"]).toFixed(2),"Tf","("+this.pdf.internal.pdfEscape(t)+") Tj"),void 0!==e["word-spacing"]&&this.pdf.internal.write(0,"Tw")},f.prototype.getPdfColor=function(t){var e,n,i,r=/rgb\s*\(\s*(\d+),\s*(\d+),\s*(\d+\s*)\)/.exec(t);if(null!=r)e=parseInt(r[1]),n=parseInt(r[2]),i=parseInt(r[3]);else{if("string"==typeof t&&"#"!=t.charAt(0)){var o=new RGBColor(t);t=o.ok?o.toHex():"#000000"}e=t.substring(1,3),e=parseInt(e,16),n=t.substring(3,5),n=parseInt(n,16),i=t.substring(5,7),i=parseInt(i,16)}if("string"==typeof e&&/^#[0-9A-Fa-f]{6}$/.test(e)){var s=parseInt(e.substr(1),16);e=s>>16&255,n=s>>8&255,i=255&s}var a=this.f3;return 0===e&&0===n&&0===i||void 0===n?a(e/255)+" g":[a(e/255),a(n/255),a(i/255),"rg"].join(" ")},f.prototype.f3=function(t){return t.toFixed(3)},f.prototype.renderParagraph=function(t){var e,n,i,r,o,s,a,u,l,c,f,d,p;if(i=h(this.paragraph.text),d=this.paragraph.style,this.paragraph={text:[],style:[],blockstyle:{},priorblockstyle:e=this.paragraph.blockstyle},i.join("").trim()){a=this.splitFragmentsIntoLines(i,d),u=s=void 0,n=12/this.pdf.internal.scaleFactor,this.priorMarginBottom=this.priorMarginBottom||0,f=(Math.max((e["margin-top"]||0)-this.priorMarginBottom,0)+(e["padding-top"]||0))*n,c=((e["margin-bottom"]||0)+(e["padding-bottom"]||0))*n,this.priorMarginBottom=e["margin-bottom"]||0,"always"===e["page-break-before"]&&(this.pdf.addPage(),this.y=0,f=((e["margin-top"]||0)+(e["padding-top"]||0))*n),l=this.pdf.internal.write,o=r=void 0,this.y+=f,l("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td");for(var m=0;a.length;){for(r=u=0,o=(s=a.shift()).length;r!==o;)s[r][0].trim()&&(u=Math.max(u,s[r][1]["line-height"],s[r][1]["font-size"]),p=7*s[r][1]["font-size"]),r++;var b=0,v=0;for(void 0!==s[0][1]["margin-left"]&&0<s[0][1]["margin-left"]&&(b=(v=this.pdf.internal.getCoordinateString(s[0][1]["margin-left"]))-m,m=v),l(b+Math.max(e["margin-left"]||0,0)*n,(-12*u).toFixed(2),"Td"),r=0,o=s.length;r!==o;)s[r][0]&&this.RenderTextFragment(s[r][0],s[r][1]),r++;if(this.y+=u*n,this.executeWatchFunctions(s[0][1])&&0<a.length){var y=[],g=[];a.forEach((function(t){for(var e=0,n=t.length;e!==n;)t[e][0]&&(y.push(t[e][0]+" "),g.push(t[e][1])),++e})),a=this.splitFragmentsIntoLines(h(y),g),l("ET","Q"),l("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td")}}return t&&"function"==typeof t&&t.call(this,this.x-9,this.y-p/2),l("ET","Q"),this.y+=c}},f.prototype.setBlockBoundary=function(t){return this.renderParagraph(t)},f.prototype.setBlockStyle=function(t){return this.paragraph.blockstyle=t},f.prototype.addText=function(t,e){return this.paragraph.text.push(t),this.paragraph.style.push(e)},i={helvetica:"helvetica","sans-serif":"helvetica","times new roman":"times",serif:"times",times:"times",monospace:"courier",courier:"courier"},s={100:"normal",200:"normal",300:"normal",400:"normal",500:"bold",600:"bold",700:"bold",800:"bold",900:"bold",normal:"normal",bold:"bold",bolder:"bold",lighter:"normal"},r={normal:"normal",italic:"italic",oblique:"italic"},o={left:"left",right:"right",center:"center",justify:"justify"},u={none:"none",right:"right",left:"left"},l={none:"none",both:"both"},m={normal:1},t.fromHTML=function(t,e,n,i,r,o){return this.margins_doc=o||{top:0,bottom:0},i||(i={}),i.elementHandlers||(i.elementHandlers={}),S(this,t,isNaN(e)?4:e,isNaN(n)?4:n,i,r)}}(K.API),("undefined"!=typeof window&&window||void 0!==i&&i).html2pdf=function(t,e,n){var i=e.canvas;if(i){var r,o;if((i.pdf=e).annotations={_nameMap:[],createAnnotation:function(t,n){var i,r=e.context2d._wrapX(n.left),o=e.context2d._wrapY(n.top),s=t.indexOf("#");i=0<=s?{name:t.substring(s+1)}:{url:t},e.link(r,o,n.right-n.left,n.bottom-n.top,i)},setName:function(t,n){var i=e.context2d._wrapX(n.left),r=e.context2d._wrapY(n.top),o=e.context2d._page(n.top);this._nameMap[t]={page:o,x:i,y:r}}},i.annotations=e.annotations,e.context2d._pageBreakAt=function(t){this.pageBreaks.push(t)},e.context2d._gotoPage=function(t){for(;e.internal.getNumberOfPages()<t;)e.addPage();e.setPage(t)},"string"==typeof t){t=t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"");var s,a=document.createElement("iframe");document.body.appendChild(a),(s=a.contentDocument||a.contentWindow.document).open(),s.write(t),s.close(),r=s.body}else r=t;var u={async:!0,allowTaint:!0,backgroundColor:"#ffffff",canvas:i,imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1,windowHeight:o=e.internal.pageSize.getHeight(),scrollY:o};return e.context2d.pageWrapYEnabled=!0,e.context2d.pageWrapY=e.internal.pageSize.getHeight(),html2canvas(r,u).then((function(){n&&(a&&a.parentElement.removeChild(a),n(e))}))}alert("jsPDF canvas plugin not installed")},function(t){var e=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder;t.URL=t.URL||t.webkitURL||function(t,e){return(e=document.createElement("a")).href=t,e};var n=t.Blob,i=URL.createObjectURL,r=URL.revokeObjectURL,o=t.Symbol&&t.Symbol.toStringTag,s=!1,a=!1,u=!!t.ArrayBuffer,l=e&&e.prototype.append&&e.prototype.getBlob;try{s=2===new Blob(["\xe4"]).size,a=2===new Blob([new Uint8Array([1,2])]).size}catch(s){}function c(t){return t.map((function(t){if(t.buffer instanceof ArrayBuffer){var e=t.buffer;if(t.byteLength!==e.byteLength){var n=new Uint8Array(t.byteLength);n.set(new Uint8Array(e,t.byteOffset,t.byteLength)),e=n.buffer}return e}return t}))}function h(t,n){n=n||{};var i=new e;return c(t).forEach((function(t){i.append(t)})),n.type?i.getBlob(n.type):i.getBlob()}function f(t,e){return new n(c(t),e||{})}if(t.Blob&&(h.prototype=Blob.prototype,f.prototype=Blob.prototype),o)try{File.prototype[o]="File",Blob.prototype[o]="Blob",FileReader.prototype[o]="FileReader"}catch(s){}function d(){var e=!!t.ActiveXObject||"-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style,n=t.XMLHttpRequest&&t.XMLHttpRequest.prototype.send;e&&n&&(XMLHttpRequest.prototype.send=function(t){t instanceof Blob&&this.setRequestHeader("Content-Type",t.type),n.call(this,t)});try{new File([],"")}catch(e){try{var i=new Function('class File extends Blob {constructor(chunks, name, opts) {opts = opts || {};super(chunks, opts || {});this.name = name;this.lastModifiedDate = opts.lastModified ? new Date(opts.lastModified) : new Date;this.lastModified = +this.lastModifiedDate;}};return new File([], ""), File')();t.File=i}catch(e){t.File=i=function(t,e,n){var i=new Blob(t,n),r=n&&void 0!==n.lastModified?new Date(n.lastModified):new Date;return i.name=e,i.lastModifiedDate=r,i.lastModified=+r,i.toString=function(){return"[object File]"},o&&(i[o]="File"),i}}}}s?(d(),t.Blob=a?t.Blob:f):l?(d(),t.Blob=h):function(){function e(t){for(var e=[],n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e.push(i):i<2048?e.push(192|i>>6,128|63&i):i<55296||57344<=i?e.push(224|i>>12,128|i>>6&63,128|63&i):(n++,i=65536+((1023&i)<<10|1023&t.charCodeAt(n)),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return e}function n(t){var e,n,i,r,o,s;for(e="",i=t.length,n=0;n<i;)switch((r=t[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=String.fromCharCode(r);break;case 12:case 13:o=t[n++],e+=String.fromCharCode((31&r)<<6|63&o);break;case 14:o=t[n++],s=t[n++],e+=String.fromCharCode((15&r)<<12|(63&o)<<6|(63&s)<<0)}return e}function o(t){for(var e=new Array(t.byteLength),n=new Uint8Array(t),i=e.length;i--;)e[i]=n[i];return e}function s(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=[],i=0;i<t.length;i+=3){var r=t[i],o=i+1<t.length,s=o?t[i+1]:0,a=i+2<t.length,u=a?t[i+2]:0,l=(15&s)<<2|u>>6,c=63&u;a||(c=64,o||(l=64)),n.push(e[r>>2],e[(3&r)<<4|s>>4],e[l],e[c])}return n.join("")}var a=Object.create||function(t){function e(){}return e.prototype=t,new e};if(u)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(t){return t&&-1<l.indexOf(Object.prototype.toString.call(t))};function h(t,n){for(var i=0,r=(t=t||[]).length;i<r;i++){var s=t[i];t[i]=s instanceof h?s._buffer:"string"==typeof s?e(s):u&&(ArrayBuffer.prototype.isPrototypeOf(s)||c(s))?o(s):u&&(a=s)&&DataView.prototype.isPrototypeOf(a)?o(s.buffer):e(String(s))}var a;this._buffer=[].concat.apply([],t),this.size=this._buffer.length,this.type=n&&n.type||""}function f(t,e,n){var i=h.call(this,t,n=n||{})||this;return i.name=e,i.lastModifiedDate=n.lastModified?new Date(n.lastModified):new Date,i.lastModified=+i.lastModifiedDate,i}if(h.prototype.slice=function(t,e,n){return new h([this._buffer.slice(t||0,e||this._buffer.length)],{type:n})},h.prototype.toString=function(){return"[object Blob]"},(f.prototype=a(h.prototype)).constructor=f,Object.setPrototypeOf)Object.setPrototypeOf(f,h);else try{f.__proto__=h}catch(a){}function d(){if(!(this instanceof d))throw new TypeError("Failed to construct 'FileReader': Please use the 'new' operator, this DOM object constructor cannot be called as a function.");var t=document.createDocumentFragment();this.addEventListener=t.addEventListener,this.dispatchEvent=function(e){var n=this["on"+e.type];"function"==typeof n&&n(e),t.dispatchEvent(e)},this.removeEventListener=t.removeEventListener}function p(t,e,n){if(!(e instanceof h))throw new TypeError("Failed to execute '"+n+"' on 'FileReader': parameter 1 is not of type 'Blob'.");t.result="",setTimeout((function(){this.readyState=d.LOADING,t.dispatchEvent(new Event("load")),t.dispatchEvent(new Event("loadend"))}))}f.prototype.toString=function(){return"[object File]"},d.EMPTY=0,d.LOADING=1,d.DONE=2,d.prototype.error=null,d.prototype.onabort=null,d.prototype.onerror=null,d.prototype.onload=null,d.prototype.onloadend=null,d.prototype.onloadstart=null,d.prototype.onprogress=null,d.prototype.readAsDataURL=function(t){p(this,t,"readAsDataURL"),this.result="data:"+t.type+";base64,"+s(t._buffer)},d.prototype.readAsText=function(t){p(this,t,"readAsText"),this.result=n(t._buffer)},d.prototype.readAsArrayBuffer=function(t){p(this,t,"readAsText"),this.result=t._buffer.slice()},d.prototype.abort=function(){},URL.createObjectURL=function(t){return t instanceof h?"data:"+t.type+";base64,"+s(t._buffer):i.call(URL,t)},URL.revokeObjectURL=function(t){r&&r.call(URL,t)};var m=t.XMLHttpRequest&&t.XMLHttpRequest.prototype.send;m&&(XMLHttpRequest.prototype.send=function(t){t instanceof h?(this.setRequestHeader("Content-Type",t.type),m.call(this,n(t._buffer))):m.call(this,t)}),t.FileReader=d,t.File=f,t.Blob=h}()}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||void 0!==i&&i||Function('return typeof this === "object" && this.content')()||Function("return this")());try{e.GifWriter=function(t,e,n,i){var r=0,o=void 0===(i=void 0===i?{}:i).loop?null:i.loop,s=void 0===i.palette?null:i.palette;if(e<=0||n<=0||65535<e||65535<n)throw new Error("Width/Height invalid.");function a(t){var e=t.length;if(e<2||256<e||e&e-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return e}t[r++]=71,t[r++]=73,t[r++]=70,t[r++]=56,t[r++]=57,t[r++]=97;var u=0,l=0;if(null!==s){for(var c=a(s);c>>=1;)++u;if(c=1<<u,--u,void 0!==i.background){if(c<=(l=i.background))throw new Error("Background index out of range.");if(0===l)throw new Error("Background index explicitly passed as 0.")}}if(t[r++]=255&e,t[r++]=e>>8&255,t[r++]=255&n,t[r++]=n>>8&255,t[r++]=(null!==s?128:0)|u,t[r++]=l,t[r++]=0,null!==s)for(var h=0,f=s.length;h<f;++h){var d=s[h];t[r++]=d>>16&255,t[r++]=d>>8&255,t[r++]=255&d}if(null!==o){if(o<0||65535<o)throw new Error("Loop count invalid.");t[r++]=33,t[r++]=255,t[r++]=11,t[r++]=78,t[r++]=69,t[r++]=84,t[r++]=83,t[r++]=67,t[r++]=65,t[r++]=80,t[r++]=69,t[r++]=50,t[r++]=46,t[r++]=48,t[r++]=3,t[r++]=1,t[r++]=255&o,t[r++]=o>>8&255,t[r++]=0}var p=!1;this.addFrame=function(e,n,i,o,u,l){if(!0===p&&(--r,p=!1),l=void 0===l?{}:l,e<0||n<0||65535<e||65535<n)throw new Error("x/y invalid.");if(i<=0||o<=0||65535<i||65535<o)throw new Error("Width/Height invalid.");if(u.length<i*o)throw new Error("Not enough pixels for the frame size.");var c=!0,h=l.palette;if(null==h&&(c=!1,h=s),null==h)throw new Error("Must supply either a local or global palette.");for(var f=a(h),d=0;f>>=1;)++d;f=1<<d;var m=void 0===l.delay?0:l.delay,b=void 0===l.disposal?0:l.disposal;if(b<0||3<b)throw new Error("Disposal out of range.");var v=!1,y=0;if(null!=l.transparent&&(v=!0,(y=l.transparent)<0||f<=y))throw new Error("Transparent color index.");if(0===b&&!v&&0===m||(t[r++]=33,t[r++]=249,t[r++]=4,t[r++]=b<<2|(!0===v?1:0),t[r++]=255&m,t[r++]=m>>8&255,t[r++]=y,t[r++]=0),t[r++]=44,t[r++]=255&e,t[r++]=e>>8&255,t[r++]=255&n,t[r++]=n>>8&255,t[r++]=255&i,t[r++]=i>>8&255,t[r++]=255&o,t[r++]=o>>8&255,t[r++]=!0===c?128|d-1:0,!0===c)for(var g=0,S=h.length;g<S;++g){var w=h[g];t[r++]=w>>16&255,t[r++]=w>>8&255,t[r++]=255&w}return r=function(t,e,n,i){t[e++]=n;var r=e++,o=1<<n,s=o-1,a=1+o,u=1+a,l=n+1,c=0,h=0;function f(n){for(;n<=c;)t[e++]=255&h,h>>=8,c-=8,e===r+256&&(t[r]=255,r=e++)}function d(t){h|=t<<c,c+=l,f(8)}var p=i[0]&s,m={};d(o);for(var b=1,v=i.length;b<v;++b){var y=i[b]&s,g=p<<8|y,S=m[g];if(void 0===S){for(h|=p<<c,c+=l;8<=c;)t[e++]=255&h,h>>=8,c-=8,e===r+256&&(t[r]=255,r=e++);4096===u?(d(o),u=1+a,l=n+1,m={}):(1<<l<=u&&++l,m[g]=u++),p=y}else p=S}return d(p),d(a),f(1),r+1===e?t[r]=0:(t[r]=e-r-1,t[e++]=0),e}(t,r,d<2?2:d,u)},this.end=function(){return!1===p&&(t[r++]=59,p=!0),r},this.getOutputBuffer=function(){return t},this.setOutputBuffer=function(e){t=e},this.getOutputBufferPosition=function(){return r},this.setOutputBufferPosition=function(t){r=t}},e.GifReader=ft}catch(l){}function pt(t){var e,n,i,r,o,s=Math.floor,a=new Array(64),u=new Array(64),l=new Array(64),c=new Array(64),h=new Array(65535),f=new Array(65535),d=new Array(64),p=new Array(64),m=[],b=0,v=7,y=new Array(64),g=new Array(64),S=new Array(64),w=new Array(256),_=new Array(2048),x=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],k=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],C=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function N(t,e){for(var n=0,i=0,r=new Array,o=1;o<=16;o++){for(var s=1;s<=t[o];s++)r[e[i]]=[],r[e[i]][0]=n,r[e[i]][1]=o,i++,n++;n*=2}return r}function I(t){for(var e=t[0],n=t[1]-1;0<=n;)e&1<<n&&(b|=1<<v),n--,--v<0&&(255==b?(R(255),R(0)):R(b),v=7,b=0)}function R(t){m.push(t)}function O(t){R(t>>8&255),R(255&t)}function F(t,e,n,i,r){for(var o,s=r[0],a=r[240],u=function(t,e){var n,i,r,o,s,a,u,l,c,h,f=0;for(c=0;c<8;++c){var p=(n=t[f])+(l=t[f+7]),m=n-l,b=(i=t[f+1])+(u=t[f+6]),v=i-u,y=(r=t[f+2])+(a=t[f+5]),g=r-a,S=(o=t[f+3])+(s=t[f+4]),w=o-s,_=p+S,x=p-S,k=b+y,E=b-y;t[f]=_+k,t[f+4]=_-k;var P=.707106781*(E+x);t[f+2]=x+P,t[f+6]=x-P;var A=.382683433*((_=w+g)-(E=v+m)),L=.5411961*_+A,T=1.306562965*E+A,M=.707106781*(k=g+v),C=m+M,N=m-M;t[f+5]=N+L,t[f+3]=N-L,t[f+1]=C+T,t[f+7]=C-T,f+=8}for(c=f=0;c<8;++c){var I=(n=t[f])+(l=t[f+56]),R=n-l,O=(i=t[f+8])+(u=t[f+48]),F=i-u,B=(r=t[f+16])+(a=t[f+40]),D=r-a,j=(o=t[f+24])+(s=t[f+32]),V=o-s,G=I+j,U=I-j,z=O+B,W=O-B;t[f]=G+z,t[f+32]=G-z;var H=.707106781*(W+U);t[f+16]=U+H,t[f+48]=U-H;var q=.382683433*((G=V+D)-(W=F+R)),Y=.5411961*G+q,X=1.306562965*W+q,K=.707106781*(z=D+F),J=R+K,Z=R-K;t[f+40]=Z+Y,t[f+24]=Z-Y,t[f+8]=J+X,t[f+56]=J-X,f++}for(c=0;c<64;++c)d[c]=0<(h=t[c]*e[c])?.5+h|0:h-.5|0;return d}(t,e),l=0;l<64;++l)p[x[l]]=u[l];var c=p[0]-n;n=p[0],0==c?I(i[0]):(I(i[f[o=32767+c]]),I(h[o]));for(var m=63;0<m&&0==p[m];)m--;if(0==m)return I(s),n;for(var b,v=1;v<=m;){for(var y=v;0==p[v]&&v<=m;)++v;var g=v-y;if(16<=g){b=g>>4;for(var S=1;S<=b;++S)I(a);g&=15}I(r[(g<<4)+f[o=32767+p[v]]]),I(h[o]),v++}return 63!=m&&I(s),n}function B(t){t=Math.min(Math.max(t,1),100),o!=t&&(function(t){for(var e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var i=s((e[n]*t+50)/100);i=Math.min(Math.max(i,1),255),a[x[n]]=i}for(var r=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],o=0;o<64;o++){var h=s((r[o]*t+50)/100);h=Math.min(Math.max(h,1),255),u[x[o]]=h}for(var f=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],d=0,p=0;p<8;p++)for(var m=0;m<8;m++)l[d]=1/(a[x[d]]*f[p]*f[m]*8),c[d]=1/(u[x[d]]*f[p]*f[m]*8),d++}(t<50?Math.floor(5e3/t):Math.floor(200-2*t)),o=t)}this.encode=function(t,o){o&&B(o),m=new Array,b=0,v=7,O(65496),O(65504),O(16),R(74),R(70),R(73),R(70),R(0),R(1),R(1),R(0),O(1),O(1),R(0),R(0),function(){O(65499),O(132),R(0);for(var t=0;t<64;t++)R(a[t]);R(1);for(var e=0;e<64;e++)R(u[e])}(),function(t,e){O(65472),O(17),R(8),O(e),O(t),R(3),R(1),R(17),R(0),R(2),R(17),R(1),R(3),R(17),R(1)}(t.width,t.height),function(){O(65476),O(418),R(0);for(var t=0;t<16;t++)R(k[t+1]);for(var e=0;e<=11;e++)R(E[e]);R(16);for(var n=0;n<16;n++)R(P[n+1]);for(var i=0;i<=161;i++)R(A[i]);R(1);for(var r=0;r<16;r++)R(L[r+1]);for(var o=0;o<=11;o++)R(T[o]);R(17);for(var s=0;s<16;s++)R(M[s+1]);for(var a=0;a<=161;a++)R(C[a])}(),O(65498),O(12),R(3),R(1),R(0),R(2),R(17),R(3),R(17),R(0),R(63),R(0);var s=0,h=0,f=0;b=0,v=7,this.encode.displayName="_encode_";for(var d,p,w,x,N,D,j,V,G,U=t.data,z=t.height,W=4*t.width,H=0;H<z;){for(d=0;d<W;){for(N=W*H+d,j=-1,G=V=0;G<64;G++)D=N+(V=G>>3)*W+(j=4*(7&G)),z<=H+V&&(D-=W*(H+1+V-z)),W<=d+j&&(D-=d+j-W+4),p=U[D++],w=U[D++],x=U[D++],y[G]=(_[p]+_[w+256>>0]+_[x+512>>0]>>16)-128,g[G]=(_[p+768>>0]+_[w+1024>>0]+_[x+1280>>0]>>16)-128,S[G]=(_[p+1280>>0]+_[w+1536>>0]+_[x+1792>>0]>>16)-128;s=F(y,l,s,e,i),h=F(g,c,h,n,r),f=F(S,c,f,n,r),d+=32}H+=8}if(0<=v){var q=[];q[1]=v+1,q[0]=(1<<v+1)-1,I(q)}return O(65497),new Uint8Array(m)},t=t||50,function(){for(var t=String.fromCharCode,e=0;e<256;e++)w[e]=t(e)}(),e=N(k,E),n=N(L,T),i=N(P,A),r=N(M,C),function(){for(var t=1,e=2,n=1;n<=15;n++){for(var i=t;i<e;i++)f[32767+i]=n,h[32767+i]=[],h[32767+i][1]=n,h[32767+i][0]=i;for(var r=-(e-1);r<=-t;r++)f[32767+r]=n,h[32767+r]=[],h[32767+r][1]=n,h[32767+r][0]=e-1+r;t<<=1,e<<=1}}(),function(){for(var t=0;t<256;t++)_[t]=19595*t,_[t+256>>0]=38470*t,_[t+512>>0]=7471*t+32768,_[t+768>>0]=-11059*t,_[t+1024>>0]=-21709*t,_[t+1280>>0]=32768*t+8421375,_[t+1536>>0]=-27439*t,_[t+1792>>0]=-5329*t}(),B(t)}K.API.adler32cs=(V="function"==typeof ArrayBuffer&&"function"==typeof Uint8Array,G=null,U=function(){if(!V)return function(){return!1};try{var t={};"function"==typeof t.Buffer&&(G=t.Buffer)}catch(t){}return function(t){return t instanceof ArrayBuffer||null!==G&&t instanceof G}}(),z=null!==G?function(t){return new G(t,"utf8").toString("binary")}:function(t){return unescape(encodeURIComponent(t))},W=function(t,e){for(var n=65535&t,i=t>>>16,r=0,o=e.length;r<o;r++)i=(i+(n=(n+(255&e.charCodeAt(r)))%65521))%65521;return(i<<16|n)>>>0},H=function(t,e){for(var n=65535&t,i=t>>>16,r=0,o=e.length;r<o;r++)i=(i+(n=(n+e[r])%65521))%65521;return(i<<16|n)>>>0},Y=(q={}).Adler32=function(){var t=function t(e){if(!(this instanceof t))throw new TypeError("Constructor cannot called be as a function.");if(!isFinite(e=null===e?1:+e))throw new Error("First arguments needs to be a finite number.");this.checksum=e>>>0},e=t.prototype={};return(e.constructor=t).from=function(t){return t.prototype=e,t}((function(e){if(!(this instanceof t))throw new TypeError("Constructor cannot called be as a function.");if(null===e)throw new Error("First argument needs to be a string.");this.checksum=W(1,e.toString())})),t.fromUtf8=function(t){return t.prototype=e,t}((function(e){if(!(this instanceof t))throw new TypeError("Constructor cannot called be as a function.");if(null===e)throw new Error("First argument needs to be a string.");var n=z(e.toString());this.checksum=W(1,n)})),V&&(t.fromBuffer=function(t){return t.prototype=e,t}((function(e){if(!(this instanceof t))throw new TypeError("Constructor cannot called be as a function.");if(!U(e))throw new Error("First argument needs to be ArrayBuffer.");var n=new Uint8Array(e);return this.checksum=H(1,n)}))),e.update=function(t){if(null===t)throw new Error("First argument needs to be a string.");return t=t.toString(),this.checksum=W(this.checksum,t)},e.updateUtf8=function(t){if(null===t)throw new Error("First argument needs to be a string.");var e=z(t.toString());return this.checksum=W(this.checksum,e)},V&&(e.updateBuffer=function(t){if(!U(t))throw new Error("First argument needs to be ArrayBuffer.");var e=new Uint8Array(t);return this.checksum=H(this.checksum,e)}),e.clone=function(){return new Y(this.checksum)},t}(),q.from=function(t){if(null===t)throw new Error("First argument needs to be a string.");return W(1,t.toString())},q.fromUtf8=function(t){if(null===t)throw new Error("First argument needs to be a string.");var e=z(t.toString());return W(1,e)},V&&(q.fromBuffer=function(t){if(!U(t))throw new Error("First argument need to be ArrayBuffer.");var e=new Uint8Array(t);return H(1,e)}),q),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(t){var n,i,r,o,s,a,u,l=e,c=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],f={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},d={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},p=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],m=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,v=0;function y(t){var e=t.charCodeAt(),n=e>>8,i=d[n];return void 0!==i?l[256*i+(255&e)]:252==n||253==n?"AL":m.test(n)?"L":8==n?"R":"N"}function g(t,e,s,a){var u,l,c,h,f=e[a];switch(f){case"L":case"R":b=!1;break;case"N":case"AN":break;case"EN":b&&(f="AN");break;case"AL":b=!0,f="R";break;case"WS":f="N";break;case"CS":a<1||a+1>=e.length||"EN"!==(u=s[a-1])&&"AN"!==u||"EN"!==(l=e[a+1])&&"AN"!==l?f="N":b&&(l="AN"),f=l===u?l:"N";break;case"ES":f="EN"===(u=0<a?s[a-1]:"B")&&a+1<e.length&&"EN"===e[a+1]?"EN":"N";break;case"ET":if(0<a&&"EN"===s[a-1]){f="EN";break}if(b){f="N";break}for(c=a+1,h=e.length;c<h&&"ET"===e[c];)c++;f=c<h&&"EN"===e[c]?"EN":"N";break;case"NSM":if(r&&!o){for(h=e.length,c=a+1;c<h&&"NSM"===e[c];)c++;if(c<h){var d=t[a];if(u=e[c],(1425<=d&&d<=2303||64286===d)&&("R"===u||"AL"===u)){f="R";break}}}f=a<1||"B"===(u=e[a-1])?"N":s[a-1];break;case"B":n=!(b=!1),f=v;break;case"S":i=!0,f="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"BN":f="N"}return f}function S(t,e,n){var i=t.split("");return n&&k(i,n,{hiLevel:v}),i.reverse(),e&&e.reverse(),i.join("")}function w(t,e,i,r,o){if(!(o.hiLevel<t)){if(1===t&&1===v&&!n)return e.reverse(),void(i&&i.reverse());for(var s,a,u,l,c=e.length,h=0;h<c;){if(r[h]>=t){for(u=h+1;u<c&&r[u]>=t;)u++;for(l=h,a=u-1;l<a;l++,a--)s=e[l],e[l]=e[a],e[a]=s,i&&(s=i[l],i[l]=i[a],i[a]=s);h=u}h++}}}function _(t,e,n){var i=t.split(""),r={hiLevel:v};return n||(n=[]),k(i,n,r),function(t,e,n){if(0!==n.hiLevel&&u)for(var i,r=0;r<t.length;r++)1!==e[r]||0<=(i=p.indexOf(t[r]))&&(t[r]=p[i+1])}(i,n,r),w(2,i,e,n,r),w(1,i,e,n,r),i.join("")}this.__bidiEngine__={};var x=function(t){for(var e,n=0;n<t.length;n++){if("L"===(e=y(t.charAt(n))))return!1;if("R"===e)return!0}return!1},k=function(t,e,r){var o,s,a,u,l,d=-1,p=t.length,m=0,S=[],w=v?h:c,_=[];for(i=n=b=!1,s=0;s<p;s++)_[s]=y(t[s]);for(a=0;a<p;a++){if(l=m,S[a]=g(t,_,S,a),o=240&(m=w[l][f[S[a]]]),e[a]=u=w[m&=15][5],0<o)if(16==o){for(s=d;s<a;s++)e[s]=1;d=-1}else d=-1;if(w[m][6])-1===d&&(d=a);else if(-1<d){for(s=d;s<a;s++)e[s]=u;d=-1}"B"===_[a]&&(e[a]=0),r.hiLevel|=u}i&&function(t,e,n){for(var i=0;i<n;i++)if("S"===t[i]){e[i]=v;for(var r=i-1;0<=r&&"WS"===t[r];r--)e[r]=v}}(_,e,p)};return this.__bidiEngine__.doBidiReorder=function(t,e,n){if(function(t,e){if(e)for(var n=0;n<t.length;n++)e[n]=n;void 0===o&&(o=x(t)),void 0===a&&(a=x(t))}(t,e),r||!s||a)if(r&&s&&o^a)v=o?1:0,t=S(t,e,n);else if(!r&&s&&a)v=o?1:0,t=S(t=_(t,e,n),e);else if(!r||o||s||a){if(r&&!s&&o^a)t=S(t,e),t=o?(v=0,_(t,e,n)):(v=1,S(t=_(t,e,n),e));else if(r&&o&&!s&&a)v=1,t=S(t=_(t,e,n),e);else if(!r&&!s&&o^a){var i=u;o?(v=1,t=_(t,e,n),v=0,u=!1,t=_(t,e,n),u=i):(v=0,t=S(t=_(t,e,n),e),u=!(v=1),t=_(t,e,n),u=i,t=S(t,e))}}else v=0,t=_(t,e,n);else v=o?1:0,t=_(t,e,n);return t},this.__bidiEngine__.setOptions=function(t){t&&(r=t.isInputVisual,s=t.isOutputVisual,o=t.isInputRtl,a=t.isOutputRtl,u=t.isSymmetricSwapping)},this.__bidiEngine__.setOptions(t),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(t){var e=t.text,i=t.options||{},r=[];if(i.isInputVisual="boolean"!=typeof i.isInputVisual||i.isInputVisual,n.setOptions(i),"[object Array]"===Object.prototype.toString.call(e)){var o=0;for(r=[],o=0;o<e.length;o+=1)"[object Array]"===Object.prototype.toString.call(e[o])?r.push([n.doBidiReorder(e[o][0]),e[o][1],e[o][2]]):r.push([n.doBidiReorder(e[o])]);t.text=r}else t.text=n.doBidiReorder(e);n.setOptions({isInputVisual:!0})}])}(K);try{e.JPEGEncoder=pt}catch(l){}function mt(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}mt.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:r,green:i,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},mt.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP;this.data=new Uint8Array(this.width*this.height*4),this[t]()}catch(t){console.log("bit decode error:"+t)}},mt.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;0<=t;t--){for(var i=this.bottom_up?t:this.height-1-t,r=0;r<e;r++)for(var o=this.datav.getUint8(this.pos++,!0),s=i*this.width*4+8*r*4,a=0;a<8&&8*r+a<this.width;a++){var u=this.palette[o>>7-a&1];this.data[s+4*a]=u.blue,this.data[s+4*a+1]=u.green,this.data[s+4*a+2]=u.red,this.data[s+4*a+3]=255}0!=n&&(this.pos+=4-n)}},mt.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;0<=n;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<t;r++){var o=this.datav.getUint8(this.pos++,!0),s=i*this.width*4+2*r*4,a=15&o,u=this.palette[o>>4];if(this.data[s]=u.blue,this.data[1+s]=u.green,this.data[2+s]=u.red,this.data[3+s]=255,2*r+1>=this.width)break;this.data[4+s]=(u=this.palette[a]).blue,this.data[4+s+1]=u.green,this.data[4+s+2]=u.red,this.data[4+s+3]=255}0!=e&&(this.pos+=4-e)}},mt.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;0<=e;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var r=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*i;if(r<this.palette.length){var s=this.palette[r];this.data[o]=s.red,this.data[1+o]=s.green,this.data[2+o]=s.blue,this.data[3+o]=255}else this.data[o]=255,this.data[1+o]=255,this.data[2+o]=255,this.data[3+o]=255}0!=t&&(this.pos+=4-t)}},mt.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;0<=n;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,a=(o>>5&e)/e*255|0,u=o>>15?255:0,l=i*this.width*4+4*r;this.data[l]=(o>>10&e)/e*255|0,this.data[1+l]=a,this.data[2+l]=s,this.data[3+l]=u}this.pos+=t}},mt.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),i=this.height-1;0<=i;i--){for(var r=this.bottom_up?i:this.height-1-i,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,u=(s>>5&n)/n*255|0,l=r*this.width*4+4*o;this.data[l]=(s>>11)/e*255|0,this.data[1+l]=u,this.data[2+l]=a,this.data[3+l]=255}this.pos+=t}},mt.prototype.bit24=function(){for(var t=this.height-1;0<=t;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*n;this.data[s]=o,this.data[1+s]=r,this.data[2+s]=i,this.data[3+s]=255}this.pos+=this.width%4}},mt.prototype.bit32=function(){for(var t=this.height-1;0<=t;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=o,this.data[1+a]=r,this.data[2+a]=i,this.data[3+a]=s}},mt.prototype.getData=function(){return this.data};try{e.BmpDecoder=mt}catch(l){}function bt(t){function e(t){if(!t)throw Error("assert :P")}function n(t,e,n){for(var i=0;i<4;i++)if(t[e+i]!=n.charCodeAt(i))return!0;return!1}function i(t,e,n,i,r){for(var o=0;o<r;o++)t[e+o]=n[i+o]}function r(t,e,n,i){for(var r=0;r<i;r++)t[e+r]=n}function o(t){return new Int32Array(t)}function s(t,e){for(var n=[],i=0;i<t;i++)n.push(new e);return n}function a(t,e){var n=[];return function t(n,i,r){for(var o=r[i],s=0;s<o&&(n.push(r.length>i+1?[]:new e),!(r.length<i+1));s++)t(n[s],i+1,r)}(n,0,t),n}function u(t,e){for(var n="",i=0;i<4;i++)n+=String.fromCharCode(t[e++]);return n}function l(t,e){return(t[e+0]<<0|t[e+1]<<8|t[e+2]<<16)>>>0}function c(t,e){return(t[e+0]<<0|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}new(bt=function(){var t=this;function u(t,e){for(var n=1<<e-1>>>0;t&n;)n>>>=1;return n?(t&n-1)+n:t}function l(t,n,i,r,o){for(e(!(r%i));t[n+(r-=i)]=o,0<r;);}function c(t,n,i,r,s){if(e(s<=2328),s<=512)var a=o(512);else if(null==(a=o(s)))return 0;return function(t,n,i,r,s,a){var c,f,d=n,p=1<<i,m=o(16),b=o(16);for(e(0!=s),e(null!=r),e(null!=t),e(0<i),f=0;f<s;++f){if(15<r[f])return 0;++m[r[f]]}if(m[0]==s)return 0;for(b[1]=0,c=1;c<15;++c){if(m[c]>1<<c)return 0;b[c+1]=b[c]+m[c]}for(f=0;f<s;++f)c=r[f],0<r[f]&&(a[b[c]++]=f);if(1==b[15])return(r=new h).g=0,r.value=a[0],l(t,d,1,p,r),p;var v,y=-1,g=p-1,S=0,w=1,_=1,x=1<<i;for(f=0,c=1,s=2;c<=i;++c,s<<=1){if(w+=_<<=1,(_-=m[c])<0)return 0;for(;0<m[c];--m[c])(r=new h).g=c,r.value=a[f++],l(t,d+S,s,x,r),S=u(S,c)}for(c=i+1,s=2;c<=15;++c,s<<=1){if(w+=_<<=1,(_-=m[c])<0)return 0;for(;0<m[c];--m[c]){if(r=new h,(S&g)!=y){for(d+=x,v=1<<(y=c)-i;y<15&&!((v-=m[y])<=0);)++y,v<<=1;p+=x=1<<(v=y-i),t[n+(y=S&g)].g=v+i,t[n+y].value=d-n-y}r.g=c-i,r.value=a[f++],l(t,d+(S>>i),s,x,r),S=u(S,c)}}return w!=2*b[15]-1?0:p}(t,n,i,r,s,a)}function h(){this.value=this.g=0}function f(){this.value=this.g=0}function d(){this.G=s(5,h),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(Dn,f)}function p(t,n,i,r){e(null!=t),e(null!=n),e(r<2147483648),t.Ca=254,t.I=0,t.b=-8,t.Ka=0,t.oa=n,t.pa=i,t.Jd=n,t.Yc=i+r,t.Zc=4<=r?i+r-4+1:i,P(t)}function m(t,e){for(var n=0;0<e--;)n|=L(t,128)<<e;return n}function b(t,e){var n=m(t,e);return A(t)?-n:n}function v(t,n,i,r){var o,s=0;for(e(null!=t),e(null!=n),e(r<4294967288),t.Sb=r,t.Ra=0,t.u=0,4<r&&(r=4),o=t.h=0;o<r;++o)s+=n[i+o]<<8*o;t.Ra=s,t.bb=r,t.oa=n,t.pa=i}function y(t){for(;8<=t.u&&t.bb<t.Sb;)t.Ra>>>=8,t.Ra+=t.oa[t.pa+t.bb]<<Gn-8>>>0,++t.bb,t.u-=8;x(t)&&(t.h=1,t.u=0)}function g(t,n){if(e(0<=n),!t.h&&n<=Vn){var i=_(t)&jn[n];return t.u+=n,y(t),i}return t.h=1,t.u=0}function S(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function w(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function _(t){return t.Ra>>>(t.u&Gn-1)>>>0}function x(t){return e(t.bb<=t.Sb),t.h||t.bb==t.Sb&&t.u>Gn}function k(t,e){t.u=e,t.h=x(t)}function E(t){t.u>=Un&&(e(t.u>=Un),y(t))}function P(t){e(null!=t&&null!=t.oa),t.pa<t.Zc?(t.I=(t.oa[t.pa++]|t.I<<8)>>>0,t.b+=8):(e(null!=t&&null!=t.oa),t.pa<t.Yc?(t.b+=8,t.I=t.oa[t.pa++]|t.I<<8):t.Ka?t.b=0:(t.I<<=8,t.b+=8,t.Ka=1))}function A(t){return m(t,1)}function L(t,e){var n=t.Ca;t.b<0&&P(t);var i=t.b,r=n*e>>>8,o=(t.I>>>i>r)+0;for(o?(n-=r,t.I-=r+1<<i>>>0):n=r+1,i=n,r=0;256<=i;)r+=8,i>>=8;return t.b-=i=7^r+zn[i],t.Ca=(n<<i)-1,o}function T(t,e,n){t[e+0]=n>>24&255,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=n>>0&255}function M(t,e){return t[e+0]<<0|t[e+1]<<8}function C(t,e){return M(t,e)|t[e+2]<<16}function N(t,e){return M(t,e)|M(t,e+2)<<16}function I(t,n){var i=1<<n;return e(null!=t),e(0<n),t.X=o(i),null==t.X?0:(t.Mb=32-n,t.Xa=n,1)}function R(t,n){e(null!=t),e(null!=n),e(t.Xa==n.Xa),i(n.X,0,t.X,0,1<<n.Xa)}function O(){this.X=[],this.Xa=this.Mb=0}function F(t,n,i,r){e(null!=i),e(null!=r);var o=i[0],s=r[0];return 0==o&&(o=(t*s+n/2)/n),0==s&&(s=(n*o+t/2)/t),o<=0||s<=0?0:(i[0]=o,r[0]=s,1)}function B(t,e){return t+(1<<e)-1>>>e}function D(t,e){return((4278255360&t)+(4278255360&e)>>>0&4278255360)+((16711935&t)+(16711935&e)>>>0&16711935)>>>0}function j(e,n){t[n]=function(n,i,r,o,s,a,u){var l;for(l=0;l<s;++l){var c=t[e](a[u+l-1],r,o+l);a[u+l]=D(n[i+l],c)}}}function V(){this.ud=this.hd=this.jd=0}function G(t,e){return((4278124286&(t^e))>>>1)+(t&e)>>>0}function U(t){return 0<=t&&t<256?t:t<0?0:255<t?255:void 0}function z(t,e){return U(t+(t-e+.5>>1))}function W(t,e,n){return Math.abs(e-n)-Math.abs(t-n)}function H(t,e,n,i,r,o,s){for(i=o[s-1],n=0;n<r;++n)o[s+n]=i=D(t[e+n],i)}function q(t,e,n,i,r){var o;for(o=0;o<n;++o){var s=t[e+o],a=s>>8&255,u=16711935&(u=(u=16711935&s)+((a<<16)+a));i[r+o]=(4278255360&s)+u>>>0}}function Y(t,e){e.jd=t>>0&255,e.hd=t>>8&255,e.ud=t>>16&255}function X(t,e,n,i,r,o){var s;for(s=0;s<i;++s){var a=e[n+s],u=a>>>8,l=a,c=255&(c=(c=a>>>16)+((t.jd<<24>>24)*(u<<24>>24)>>>5));l=255&(l=(l+=(t.hd<<24>>24)*(u<<24>>24)>>>5)+((t.ud<<24>>24)*(c<<24>>24)>>>5)),r[o+s]=(4278255360&a)+(c<<16)+l}}function K(e,n,i,r,o){t[n]=function(t,e,n,i,s,a,u,l,c){for(i=u;i<l;++i)for(u=0;u<c;++u)s[a++]=o(n[r(t[e++])])},t[e]=function(e,n,s,a,u,l,c){var h=8>>e.b,f=e.Ea,d=e.K[0],p=e.w;if(h<8)for(e=(1<<e.b)-1,p=(1<<h)-1;n<s;++n){var m,b=0;for(m=0;m<f;++m)m&e||(b=r(a[u++])),l[c++]=o(d[b&p]),b>>=h}else t["VP8LMapColor"+i](a,u,d,p,l,c,n,s,f)}}function J(t,e,n,i,r){for(n=e+n;e<n;){var o=t[e++];i[r++]=o>>16&255,i[r++]=o>>8&255,i[r++]=o>>0&255}}function Z(t,e,n,i,r){for(n=e+n;e<n;){var o=t[e++];i[r++]=o>>16&255,i[r++]=o>>8&255,i[r++]=o>>0&255,i[r++]=o>>24&255}}function Q(t,e,n,i,r){for(n=e+n;e<n;){var o=(s=t[e++])>>16&240|s>>12&15,s=s>>0&240|s>>28&15;i[r++]=o,i[r++]=s}}function $(t,e,n,i,r){for(n=e+n;e<n;){var o=(s=t[e++])>>16&248|s>>13&7,s=s>>5&224|s>>3&31;i[r++]=o,i[r++]=s}}function tt(t,e,n,i,r){for(n=e+n;e<n;){var o=t[e++];i[r++]=o>>0&255,i[r++]=o>>8&255,i[r++]=o>>16&255}}function et(t,e,n,r,o,s){if(0==s)for(n=e+n;e<n;)T(r,((s=t[e++])[0]>>24|s[1]>>8&65280|s[2]<<8&16711680|s[3]<<24)>>>0),o+=32;else i(r,o,t,e,n)}function nt(e,n){t[n][0]=t[e+"0"],t[n][1]=t[e+"1"],t[n][2]=t[e+"2"],t[n][3]=t[e+"3"],t[n][4]=t[e+"4"],t[n][5]=t[e+"5"],t[n][6]=t[e+"6"],t[n][7]=t[e+"7"],t[n][8]=t[e+"8"],t[n][9]=t[e+"9"],t[n][10]=t[e+"10"],t[n][11]=t[e+"11"],t[n][12]=t[e+"12"],t[n][13]=t[e+"13"],t[n][14]=t[e+"0"],t[n][15]=t[e+"0"]}function it(t){return t==Ui||t==zi||t==Wi||t==Hi}function rt(){this.eb=[],this.size=this.A=this.fb=0}function ot(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function st(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new rt,this.f.kb=new ot,this.sd=null}function at(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ut(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function lt(t){return alert("todo:WebPSamplerProcessPlane"),t.T}function ct(t,e){var n=t.T,r=e.ba.f.RGBA,o=r.eb,s=r.fb+t.ka*r.A,a=br[e.ba.S],u=t.y,l=t.O,c=t.f,h=t.N,f=t.ea,d=t.W,p=e.cc,m=e.dc,b=e.Mc,v=e.Nc,y=t.ka,g=t.ka+t.T,S=t.U,w=S+1>>1;for(0==y?a(u,l,null,null,c,h,f,d,c,h,f,d,o,s,null,null,S):(a(e.ec,e.fc,u,l,p,m,b,v,c,h,f,d,o,s-r.A,o,s,S),++n);y+2<g;y+=2)a(u,(l+=2*t.fa)-t.fa,u,l,p=c,m=h,b=f,v=d,c,h+=t.Rc,f,d+=t.Rc,o,(s+=2*r.A)-r.A,o,s,S);return l+=t.fa,t.j+g<t.o?(i(e.ec,e.fc,u,l,S),i(e.cc,e.dc,c,h,w),i(e.Mc,e.Nc,f,d,w),n--):1&g||a(u,l,null,null,c,h,f,d,c,h,f,d,o,s+r.A,null,null,S),n}function ht(t,n,i){var r=t.F,o=[t.J];if(null!=r){var s=t.U,a=n.ba.S,u=a==ji||a==Wi;n=n.ba.f.RGBA;var l=[0],c=t.ka;l[0]=t.T,t.Kb&&(0==c?--l[0]:(--c,o[0]-=t.width),t.j+t.ka+t.T==t.o&&(l[0]=t.o-t.j-c));var h=n.eb;t=ki(r,o[0],t.width,s,l,h,(c=n.fb+c*n.A)+(u?0:3),n.A),e(i==l),t&&it(a)&&_i(h,c,u,s,l,n.A)}return 0}function ft(t){var e=t.ma,n=e.ba.S,i=n<11,r=n==Fi||n==Di||n==ji||n==Vi||12==n||it(n);if(e.memory=null,e.Ib=null,e.Jb=null,e.Nd=null,!On(e.Oa,t,r?11:12))return 0;if(r&&it(n)&&yn(),t.da)alert("todo:use_scaling");else{if(i){if(e.Ib=lt,t.Kb){if(e.memory=o(t.U+2*(n=t.U+1>>1)),null==e.memory)return 0;e.ec=e.memory,e.fc=0,e.cc=e.ec,e.dc=e.fc+t.U,e.Mc=e.cc,e.Nc=e.dc+n,e.Ib=ct,yn()}}else alert("todo:EmitYUV");r&&(e.Jb=ht,i&&bn())}if(i&&!Mr){for(t=0;t<256;++t)Cr[t]=89858*(t-128)+Er>>kr,Rr[t]=-22014*(t-128)+Er,Ir[t]=-45773*(t-128),Nr[t]=113618*(t-128)+Er>>kr;for(t=Pr;t<Ar;++t)Or[t-Pr]=Ht(e=76283*(t-16)+Er>>kr,255),Fr[t-Pr]=Ht(e+8>>4,15);Mr=1}return 1}function dt(t){var n=t.ma,i=t.U,r=t.T;return e(!(1&t.ka)),i<=0||r<=0?0:(i=n.Ib(t,n),null!=n.Jb&&n.Jb(t,n,i),n.Dc+=i,1)}function pt(t){t.ma.memory=null}function mt(t,e,n,i){return 47!=g(t,8)?0:(e[0]=g(t,14)+1,n[0]=g(t,14)+1,i[0]=g(t,1),0!=g(t,3)?0:!t.h)}function bt(t,e){if(t<4)return t+1;var n=t-2>>1;return(2+(1&t)<<n)+g(e,n)+1}function vt(t,e){return 120<e?e-120:1<=(n=((n=Zi[e-1])>>4)*t+(8-(15&n)))?n:1;var n}function yt(t,e,n){var i=_(n),r=t[e+=255&i].g-8;return 0<r&&(k(n,n.u+8),i=_(n),e+=t[e].value,e+=i&(1<<r)-1),k(n,n.u+t[e].g),t[e].value}function gt(t,n,i){return i.g+=t.g,i.value+=t.value<<n>>>0,e(i.g<=8),t.g}function St(t,n,i){var r=t.xc;return e((n=0==r?0:t.vc[t.md*(i>>r)+(n>>r)])<t.Wb),t.Ya[n]}function wt(t,n,r,o){var s=t.ab,a=t.c*n,u=t.C;n=u+n;var l=r,c=o;for(o=t.Ta,r=t.Ua;0<s--;){var h=t.gc[s],f=u,d=n,p=l,m=c,b=(c=o,l=r,h.Ea);switch(e(f<d),e(d<=h.nc),h.hc){case 2:qn(p,m,(d-f)*b,c,l);break;case 0:var v=f,y=d,g=c,S=l,w=(P=h).Ea;0==v&&(Wn(p,m,null,null,1,g,S),H(p,m+1,0,0,w-1,g,S+1),m+=w,S+=w,++v);for(var _=1<<P.b,x=_-1,k=B(w,P.b),E=P.K,P=P.w+(v>>P.b)*k;v<y;){var A=E,L=P,T=1;for(Hn(p,m,g,S-w,1,g,S);T<w;){var M=(T&~x)+_;w<M&&(M=w),(0,Zn[A[L++]>>8&15])(p,m+ +T,g,S+T-w,M-T,g,S+T),T=M}m+=w,S+=w,++v&x||(P+=k)}d!=h.nc&&i(c,l-b,c,l+(d-f-1)*b,b);break;case 1:for(b=p,y=m,w=(p=h.Ea)-(S=p&~(g=(m=1<<h.b)-1)),v=B(p,h.b),_=h.K,h=h.w+(f>>h.b)*v;f<d;){for(x=_,k=h,E=new V,P=y+S,A=y+p;y<P;)Y(x[k++],E),Qn(E,b,y,m,c,l),y+=m,l+=m;y<A&&(Y(x[k++],E),Qn(E,b,y,w,c,l),y+=w,l+=w),++f&g||(h+=v)}break;case 3:if(p==c&&m==l&&0<h.b){for(p=b=l+(d-f)*b-(S=(d-f)*B(h.Ea,h.b)),m=y=c,g=l,v=[],S=(w=S)-1;0<=S;--S)v[S]=m[g+S];for(S=w-1;0<=S;--S)y[p+S]=v[S];Yn(h,f,d,c,b,c,l)}else Yn(h,f,d,p,m,c,l)}l=o,c=r}c!=r&&i(o,r,l,c,a)}function _t(t,n){var i=t.V,r=t.Ba+t.c*t.C,o=n-t.C;if(e(n<=t.l.o),e(o<=16),0<o){var s=t.l,a=t.Ta,u=t.Ua,l=s.width;if(wt(t,o,i,r),o=u=[u],e((i=t.C)<(r=n)),e(s.v<s.va),r>s.o&&(r=s.o),i<s.j){var c=s.j-i;i=s.j,o[0]+=c*l}if(i=r<=i?0:(o[0]+=4*s.v,s.ka=i-s.j,s.U=s.va-s.v,s.T=r-i,1)){if(u=u[0],(i=t.ca).S<11){var h=i.f.RGBA,f=(r=i.S,o=s.U,s=s.T,c=h.eb,h.A),d=s;for(h=h.fb+t.Ma*h.A;0<d--;){var p=a,m=u,b=o,v=c,y=h;switch(r){case Oi:$n(p,m,b,v,y);break;case Fi:ti(p,m,b,v,y);break;case Ui:ti(p,m,b,v,y),_i(v,y,0,b,1,0);break;case Bi:ii(p,m,b,v,y);break;case Di:et(p,m,b,v,y,1);break;case zi:et(p,m,b,v,y,1),_i(v,y,0,b,1,0);break;case ji:et(p,m,b,v,y,0);break;case Wi:et(p,m,b,v,y,0),_i(v,y,1,b,1,0);break;case Vi:ei(p,m,b,v,y);break;case Hi:ei(p,m,b,v,y),xi(v,y,b,1,0);break;case Gi:ni(p,m,b,v,y);break;default:e(0)}u+=l,h+=f}t.Ma+=s}else alert("todo:EmitRescaledRowsYUVA");e(t.Ma<=i.height)}}t.C=n,e(t.C<=t.i)}function xt(t){var e;if(0<t.ua)return 0;for(e=0;e<t.Wb;++e){var n=t.Ya[e].G,i=t.Ya[e].H;if(0<n[1][i[1]+0].g||0<n[2][i[2]+0].g||0<n[3][i[3]+0].g)return 0}return 1}function kt(t,n,i,r,o,s){if(0!=t.Z){var a=t.qd,u=t.rd;for(e(null!=mr[t.Z]);n<i;++n)mr[t.Z](a,u,r,o,r,o,s),a=r,u=o,o+=s;t.qd=a,t.rd=u}}function Et(t,n){var i=t.l.ma,r=0==i.Z||1==i.Z?t.l.j:t.C;if(r=t.C<r?r:t.C,e(n<=t.l.o),r<n){var o=t.l.width,s=i.ca,a=i.tb+o*r,u=t.V,l=t.Ba+t.c*r,c=t.gc;e(1==t.ab),e(3==c[0].hc),Kn(c[0],r,n,u,l,s,a),kt(i,r,n,s,a,o)}t.C=t.Ma=n}function Pt(t,n,i,r,o,s,a){var u=t.$/r,l=t.$%r,c=t.m,h=t.s,f=i+t.$,d=f;o=i+r*o;var p=i+r*s,m=280+h.ua,b=t.Pb?u:16777216,v=0<h.ua?h.Wa:null,y=h.wc,g=f<p?St(h,l,u):null;e(t.C<s),e(p<=o);var S=!1;t:for(;;){for(;S||f<p;){var w=0;if(b<=u){var P=f-i;e((b=t).Pb),b.wd=b.m,b.xd=P,0<b.s.ua&&R(b.s.Wa,b.s.vb),b=u+$i}if(l&y||(g=St(h,l,u)),e(null!=g),g.Qb&&(n[f]=g.qb,S=!0),!S)if(E(c),g.jc){P=n;var A=f,L=g.pd[_(w=c)&Dn-1];e(g.jc),0==(w=L.g<256?(k(w,w.u+L.g),P[A]=L.value,0):(k(w,w.u+L.g-256),e(256<=L.value),L.value))&&(S=!0)}else w=yt(g.G[0],g.H[0],c);if(c.h)break;if(S||w<256){if(!S)if(g.nd)n[f]=(g.qb|w<<8)>>>0;else{if(E(c),S=yt(g.G[1],g.H[1],c),E(c),P=yt(g.G[2],g.H[2],c),A=yt(g.G[3],g.H[3],c),c.h)break;n[f]=(A<<24|S<<16|w<<8|P)>>>0}if(S=!1,++f,r<=++l&&(l=0,++u,null!=a&&u<=s&&!(u%16)&&a(t,u),null!=v))for(;d<f;)w=n[d++],v.X[(506832829*w&4294967295)>>>v.Mb]=w}else if(w<280){if(w=bt(w-256,c),P=yt(g.G[4],g.H[4],c),E(c),P=vt(r,P=bt(P,c)),c.h)break;if(f-i<P||o-f<w)break t;for(A=0;A<w;++A)n[f+A]=n[f+A-P];for(f+=w,l+=w;r<=l;)l-=r,++u,null!=a&&u<=s&&!(u%16)&&a(t,u);if(e(f<=o),l&y&&(g=St(h,l,u)),null!=v)for(;d<f;)w=n[d++],v.X[(506832829*w&4294967295)>>>v.Mb]=w}else{if(!(w<m))break t;for(S=w-280,e(null!=v);d<f;)w=n[d++],v.X[(506832829*w&4294967295)>>>v.Mb]=w;w=f,e(!(S>>>(P=v).Xa)),n[w]=P.X[S],S=!0}S||e(c.h==x(c))}if(t.Pb&&c.h&&f<o)e(t.m.h),t.a=5,t.m=t.wd,t.$=t.xd,0<t.s.ua&&R(t.s.vb,t.s.Wa);else{if(c.h)break t;null!=a&&a(t,s<u?s:u),t.a=0,t.$=f-i}return 1}return t.a=3,0}function At(t){e(null!=t),t.vc=null,t.yc=null,t.Ya=null;var n=t.Wa;null!=n&&(n.X=null),e((t.vb=null)!=t)}function Lt(){var e=new sn;return null==e?null:(e.a=0,e.xb=pr,nt("Predictor","VP8LPredictors"),nt("Predictor","VP8LPredictors_C"),nt("PredictorAdd","VP8LPredictorsAdd"),nt("PredictorAdd","VP8LPredictorsAdd_C"),qn=q,Qn=X,$n=J,ti=Z,ei=Q,ni=$,ii=tt,t.VP8LMapColor32b=Xn,t.VP8LMapColor8b=Jn,e)}function Tt(t,n,i,a,u){var l=1,f=[t],p=[n],m=a.m,b=a.s,v=null,y=0;t:for(;;){if(i)for(;l&&g(m,1);){var S=f,w=p,x=a,P=1,A=x.m,L=x.gc[x.ab],T=g(A,2);if(x.Oc&1<<T)l=0;else{switch(x.Oc|=1<<T,L.hc=T,L.Ea=S[0],L.nc=w[0],L.K=[null],++x.ab,e(x.ab<=4),T){case 0:case 1:L.b=g(A,3)+2,P=Tt(B(L.Ea,L.b),B(L.nc,L.b),0,x,L.K),L.K=L.K[0];break;case 3:var M,C=g(A,8)+1,N=16<C?0:4<C?1:2<C?2:3;if(S[0]=B(L.Ea,N),L.b=N,M=P=Tt(C,1,0,x,L.K)){var R,O=C,F=L,j=1<<(8>>F.b),V=o(j);if(null==V)M=0;else{var G=F.K[0],U=F.w;for(V[0]=F.K[0][0],R=1;R<1*O;++R)V[R]=D(G[U+R],V[R-1]);for(;R<4*j;++R)V[R]=0;F.K[0]=null,F.K[0]=V,M=1}}P=M;break;case 2:break;default:e(0)}l=P}}if(f=f[0],p=p[0],l&&g(m,1)&&!(l=1<=(y=g(m,4))&&y<=11)){a.a=3;break t}var z;if(z=l)e:{var W,H,q,Y=a,X=f,K=p,J=y,Z=i,Q=Y.m,$=Y.s,tt=[null],et=1,nt=0,it=Qi[J];n:for(;;){if(Z&&g(Q,1)){var rt=g(Q,3)+2,ot=B(X,rt),st=B(K,rt),at=ot*st;if(!Tt(ot,st,0,Y,tt))break n;for(tt=tt[0],$.xc=rt,W=0;W<at;++W){var ut=tt[W]>>8&65535;et<=(tt[W]=ut)&&(et=1+ut)}}if(Q.h)break n;for(H=0;H<5;++H){var lt=Xi[H];!H&&0<J&&(lt+=1<<J),nt<lt&&(nt=lt)}var ct=s(et*it,h),ht=et,ft=s(ht,d);if(null==ft)var dt=null;else e(ht<=65536),dt=ft;var pt=o(nt);if(null==dt||null==pt||null==ct){Y.a=1;break n}var mt=ct;for(W=q=0;W<et;++W){var bt=dt[W],vt=bt.G,yt=bt.H,St=0,wt=1,_t=0;for(H=0;H<5;++H){lt=Xi[H],!H&&0<J&&(lt+=1<<J);i:{var xt,kt=lt,Et=Y,Lt=pt,Mt=vt[H]=mt,Ct=yt[H]=q,Nt=0,It=Et.m,Rt=g(It,1);if(r(Lt,0,0,kt),Rt){var Ot=g(It,1)+1,Ft=g(It,0==g(It,1)?1:8);Lt[Ft]=1,2==Ot&&(Lt[Ft=g(It,8)]=1);var Bt=1}else{var Dt=o(19),jt=g(It,4)+4;if(19<jt){Et.a=3;var Vt=0;break i}for(xt=0;xt<jt;++xt)Dt[Ji[xt]]=g(It,3);var Gt=void 0,Ut=void 0,zt=Et,Wt=Dt,Ht=kt,qt=Lt,Yt=0,Xt=zt.m,Kt=8,Jt=s(128,h);r:for(;c(Jt,0,7,Wt,19);){if(g(Xt,1)){if(Ht<(Gt=2+g(Xt,2+2*g(Xt,3))))break r}else Gt=Ht;for(Ut=0;Ut<Ht&&Gt--;){E(Xt);var Zt=Jt[0+(127&_(Xt))];k(Xt,Xt.u+Zt.g);var Qt=Zt.value;if(Qt<16)0!=(qt[Ut++]=Qt)&&(Kt=Qt);else{var $t=16==Qt,te=Qt-16,ee=Yi[te],ne=g(Xt,qi[te])+ee;if(Ht<Ut+ne)break r;for(var ie=$t?Kt:0;0<ne--;)qt[Ut++]=ie}}Yt=1;break r}Yt||(zt.a=3),Bt=Yt}(Bt=Bt&&!It.h)&&(Nt=c(Mt,Ct,8,Lt,kt)),Vt=Bt&&0!=Nt?Nt:(Et.a=3,0)}if(0==Vt)break n;if(wt&&1==Ki[H]&&(wt=0==mt[q].g),St+=mt[q].g,q+=Vt,H<=3){var re,oe=pt[0];for(re=1;re<lt;++re)pt[re]>oe&&(oe=pt[re]);_t+=oe}}if(bt.nd=wt,bt.Qb=0,wt&&(bt.qb=(vt[3][yt[3]+0].value<<24|vt[1][yt[1]+0].value<<16|vt[2][yt[2]+0].value)>>>0,0==St&&vt[0][yt[0]+0].value<256&&(bt.Qb=1,bt.qb+=vt[0][yt[0]+0].value<<8)),bt.jc=!bt.Qb&&_t<6,bt.jc){var se,ae=bt;for(se=0;se<Dn;++se){var ue=se,le=ae.pd[ue],ce=ae.G[0][ae.H[0]+ue];256<=ce.value?(le.g=ce.g+256,le.value=ce.value):(le.g=0,le.value=0,ue>>=gt(ce,8,le),ue>>=gt(ae.G[1][ae.H[1]+ue],16,le),ue>>=gt(ae.G[2][ae.H[2]+ue],0,le),gt(ae.G[3][ae.H[3]+ue],24,le))}}}$.vc=tt,$.Wb=et,$.Ya=dt,$.yc=ct,z=1;break e}z=0}if(!(l=z)){a.a=3;break t}if(0<y){if(b.ua=1<<y,!I(b.Wa,y)){a.a=1,l=0;break t}}else b.ua=0;var he=a,fe=f,de=p,pe=he.s,me=pe.xc;if(he.c=fe,he.i=de,pe.md=B(fe,me),pe.wc=0==me?-1:(1<<me)-1,i){a.xb=dr;break t}if(null==(v=o(f*p))){a.a=1,l=0;break t}l=(l=Pt(a,v,0,f,p,p,null))&&!m.h;break t}return l?(null!=u?u[0]=v:(e(null==v),e(i)),a.$=0,i||At(b)):At(b),l}function Mt(t,n){var i=t.c*t.i,r=i+n+16*n;return e(t.c<=n),t.V=o(r),null==t.V?(t.Ta=null,t.Ua=0,t.a=1,0):(t.Ta=t.V,t.Ua=t.Ba+i+n,1)}function Ct(t,n){var i=t.C,r=n-i,o=t.V,s=t.Ba+t.c*i;for(e(n<=t.l.o);0<r;){var a=16<r?16:r,u=t.l.ma,l=t.l.width,c=l*a,h=u.ca,f=u.tb+l*i,d=t.Ta,p=t.Ua;wt(t,a,o,s),Ei(d,p,h,f,c),kt(u,i,i+a,h,f,l),r-=a,o+=a*t.c,i+=a}e(i==n),t.C=t.Ma=n}function Nt(){this.ub=this.yd=this.td=this.Rb=0}function It(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Rt(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Ot(){this.Yb=function(){var t=[];return function t(e,n,i){for(var r=i[n],o=0;o<r&&(e.push(i.length>n+1?[]:0),!(i.length<n+1));o++)t(e[o],n+1,i)}(t,0,[3,11]),t}()}function Ft(){this.jb=o(3),this.Wc=a([4,8],Ot),this.Xc=a([4,17],Ot)}function Bt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Dt(){this.ld=this.La=this.dd=this.tc=0}function jt(){this.Na=this.la=0}function Vt(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Gt(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ut(){this.uc=this.M=this.Nb=0,this.wa=Array(new Dt),this.Y=0,this.ya=Array(new Gt),this.aa=0,this.l=new qt}function zt(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Wt(){this.cb=this.a=0,this.sc="",this.m=new S,this.Od=new Nt,this.Kc=new It,this.ed=new Bt,this.Qa=new Rt,this.Ic=this.$c=this.Aa=0,this.D=new Ut,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,S),this.ia=0,this.pb=s(4,Vt),this.Pa=new Ft,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new zt),this.Hd=0,this.rb=Array(new jt),this.sb=0,this.wa=Array(new Dt),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Gt),this.L=this.aa=0,this.gd=a([4,2],Dt),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ht(t,e){return t<0?0:e<t?e:t}function qt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Yt(){var t=new Wt;return null!=t&&(t.a=0,t.sc="OK",t.cb=0,t.Xb=0,nr||(nr=Zt)),t}function Xt(t,e,n){return 0==t.a&&(t.a=e,t.sc=n,t.cb=0),0}function Kt(t,e,n){return 3<=n&&157==t[e+0]&&1==t[e+1]&&42==t[e+2]}function Jt(t,n){if(null==t)return 0;if(t.a=0,t.sc="OK",null==n)return Xt(t,2,"null VP8Io passed to VP8GetHeaders()");var i=n.data,o=n.w,s=n.ha;if(s<4)return Xt(t,7,"Truncated header.");var a=i[o+0]|i[o+1]<<8|i[o+2]<<16,u=t.Od;if(u.Rb=!(1&a),u.td=a>>1&7,u.yd=a>>4&1,u.ub=a>>5,3<u.td)return Xt(t,3,"Incorrect keyframe parameters.");if(!u.yd)return Xt(t,4,"Frame not displayable.");o+=3,s-=3;var l=t.Kc;if(u.Rb){if(s<7)return Xt(t,7,"cannot parse picture header");if(!Kt(i,o,s))return Xt(t,3,"Bad code word");l.c=16383&(i[o+4]<<8|i[o+3]),l.Td=i[o+4]>>6,l.i=16383&(i[o+6]<<8|i[o+5]),l.Ud=i[o+6]>>6,o+=7,s-=7,t.za=l.c+15>>4,t.Ub=l.i+15>>4,n.width=l.c,n.height=l.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,r((a=t.Pa).jb,0,255,a.jb.length),e(null!=(a=t.Qa)),a.Cb=0,a.Bb=0,a.Fb=1,r(a.Zb,0,0,a.Zb.length),r(a.Lb,0,0,a.Lb)}if(u.ub>s)return Xt(t,7,"bad partition length");p(a=t.m,i,o,u.ub),o+=u.ub,s-=u.ub,u.Rb&&(l.Ld=A(a),l.Kd=A(a)),l=t.Qa;var c,h=t.Pa;if(e(null!=a),e(null!=l),l.Cb=A(a),l.Cb){if(l.Bb=A(a),A(a)){for(l.Fb=A(a),c=0;c<4;++c)l.Zb[c]=A(a)?b(a,7):0;for(c=0;c<4;++c)l.Lb[c]=A(a)?b(a,6):0}if(l.Bb)for(c=0;c<3;++c)h.jb[c]=A(a)?m(a,8):255}else l.Bb=0;if(a.Ka)return Xt(t,3,"cannot parse segment header");if((l=t.ed).zd=A(a),l.Tb=m(a,6),l.wb=m(a,3),l.Pc=A(a),l.Pc&&A(a)){for(h=0;h<4;++h)A(a)&&(l.vd[h]=b(a,6));for(h=0;h<4;++h)A(a)&&(l.od[h]=b(a,6))}if(t.L=0==l.Tb?0:l.zd?1:2,a.Ka)return Xt(t,3,"cannot parse filter header");var f=s;if(o=(s=c=o)+f,l=f,t.Xb=(1<<m(t.m,2))-1,f<3*(h=t.Xb))i=7;else{for(c+=3*h,l-=3*h,f=0;f<h;++f){var d=i[s+0]|i[s+1]<<8|i[s+2]<<16;l<d&&(d=l),p(t.Jc[+f],i,c,d),c+=d,l-=d,s+=3}p(t.Jc[+h],i,c,l),i=c<o?0:5}if(0!=i)return Xt(t,i,"cannot parse partitions");for(i=m(c=t.m,7),s=A(c)?b(c,4):0,o=A(c)?b(c,4):0,l=A(c)?b(c,4):0,h=A(c)?b(c,4):0,c=A(c)?b(c,4):0,f=t.Qa,d=0;d<4;++d){if(f.Cb){var v=f.Zb[d];f.Fb||(v+=i)}else{if(0<d){t.pb[d]=t.pb[0];continue}v=i}var y=t.pb[d];y.Sc[0]=tr[Ht(v+s,127)],y.Sc[1]=er[Ht(v+0,127)],y.Eb[0]=2*tr[Ht(v+o,127)],y.Eb[1]=101581*er[Ht(v+l,127)]>>16,y.Eb[1]<8&&(y.Eb[1]=8),y.Qc[0]=tr[Ht(v+h,117)],y.Qc[1]=er[Ht(v+c,127)],y.lc=v+c}if(!u.Rb)return Xt(t,4,"Not a key frame.");for(A(a),u=t.Pa,i=0;i<4;++i){for(s=0;s<8;++s)for(o=0;o<3;++o)for(l=0;l<11;++l)h=L(a,ur[i][s][o][l])?m(a,8):sr[i][s][o][l],u.Wc[i][s].Yb[o][l]=h;for(s=0;s<17;++s)u.Xc[i][s]=u.Wc[i][lr[s]]}return t.kc=A(a),t.kc&&(t.Bd=m(a,8)),t.cb=1}function Zt(t,e,n,i,r,o,s){var a=e[r].Yb[n];for(n=0;r<16;++r){if(!L(t,a[n+0]))return r;for(;!L(t,a[n+1]);)if(a=e[++r].Yb[0],n=0,16==r)return 16;var u=e[r+1].Yb;if(L(t,a[n+2])){var l=t,c=0;if(L(l,(f=a)[(h=n)+3]))if(L(l,f[h+6])){for(a=0,h=2*(c=L(l,f[h+8]))+(f=L(l,f[h+9+c])),c=0,f=ir[h];f[a];++a)c+=c+L(l,f[a]);c+=3+(8<<h)}else L(l,f[h+7])?(c=7+2*L(l,165),c+=L(l,145)):c=5+L(l,159);else c=L(l,f[h+4])?3+L(l,f[h+5]):2;a=u[2]}else a=u[c=1];u=s+rr[r],(l=t).b<0&&P(l);var h,f=l.b,d=(h=l.Ca>>1)-(l.I>>f)>>31;--l.b,l.Ca+=d,l.Ca|=1,l.I-=(h+1&d)<<f,o[u]=((c^d)-d)*i[(0<r)+0]}return 16}function Qt(t){var e=t.rb[t.sb-1];e.la=0,e.Na=0,r(t.zc,0,0,t.zc.length),t.ja=0}function $t(t,e,n,i,r){t[e+n+32*i]=-256&(r=t[e+n+32*i]+(r>>3))?r<0?0:255:r}function te(t,e,n,i,r,o){$t(t,e,0,n,i+r),$t(t,e,1,n,i+o),$t(t,e,2,n,i-o),$t(t,e,3,n,i-r)}function ee(t){return(20091*t>>16)+t}function ne(t,e,n,i){var r,s=0,a=o(16);for(r=0;r<4;++r){var u=t[e+0]+t[e+8],l=t[e+0]-t[e+8],c=(35468*t[e+4]>>16)-ee(t[e+12]),h=ee(t[e+4])+(35468*t[e+12]>>16);a[s+0]=u+h,a[s+1]=l+c,a[s+2]=l-c,a[s+3]=u-h,s+=4,e++}for(r=s=0;r<4;++r)u=(t=a[s+0]+4)+a[s+8],l=t-a[s+8],c=(35468*a[s+4]>>16)-ee(a[s+12]),$t(n,i,0,0,u+(h=ee(a[s+4])+(35468*a[s+12]>>16))),$t(n,i,1,0,l+c),$t(n,i,2,0,l-c),$t(n,i,3,0,u-h),s++,i+=32}function ie(t,e,n,i){var r=t[e+0]+4,o=35468*t[e+4]>>16,s=ee(t[e+4]),a=35468*t[e+1]>>16;te(n,i,0,r+s,t=ee(t[e+1]),a),te(n,i,1,r+o,t,a),te(n,i,2,r-o,t,a),te(n,i,3,r-s,t,a)}function re(t,e,n,i,r){ne(t,e,n,i),r&&ne(t,e+16,n,i+4)}function oe(t,e,n,i){oi(t,e+0,n,i,1),oi(t,e+32,n,i+128,1)}function se(t,e,n,i){var r;for(t=t[e+0]+4,r=0;r<4;++r)for(e=0;e<4;++e)$t(n,i,e,r,t)}function ae(t,e,n,i){t[e+0]&&ui(t,e+0,n,i),t[e+16]&&ui(t,e+16,n,i+4),t[e+32]&&ui(t,e+32,n,i+128),t[e+48]&&ui(t,e+48,n,i+128+4)}function ue(t,e,n,i){var r,s=o(16);for(r=0;r<4;++r){var a=t[e+0+r]+t[e+12+r],u=t[e+4+r]+t[e+8+r],l=t[e+4+r]-t[e+8+r],c=t[e+0+r]-t[e+12+r];s[0+r]=a+u,s[8+r]=a-u,s[4+r]=c+l,s[12+r]=c-l}for(r=0;r<4;++r)a=(t=s[0+4*r]+3)+s[3+4*r],l=s[1+4*r]-s[2+4*r],c=t-s[3+4*r],n[i+0]=a+(u=s[1+4*r]+s[2+4*r])>>3,n[i+16]=c+l>>3,n[i+32]=a-u>>3,n[i+48]=c-l>>3,i+=64}function le(t,e,n){var i,r=e-32,o=Ii,s=255-t[r-1];for(i=0;i<n;++i){var a,u=o,l=s+t[e-1];for(a=0;a<n;++a)t[e+a]=u[l+t[r+a]];e+=32}}function ce(t,e){le(t,e,4)}function he(t,e){le(t,e,8)}function fe(t,e){le(t,e,16)}function de(t,e){var n;for(n=0;n<16;++n)i(t,e+32*n,t,e-32,16)}function pe(t,e){var n;for(n=16;0<n;--n)r(t,e,t[e-1],16),e+=32}function me(t,e,n){var i;for(i=0;i<16;++i)r(e,n+32*i,t,16)}function be(t,e){var n,i=16;for(n=0;n<16;++n)i+=t[e-1+32*n]+t[e+n-32];me(i>>5,t,e)}function ve(t,e){var n,i=8;for(n=0;n<16;++n)i+=t[e-1+32*n];me(i>>4,t,e)}function ye(t,e){var n,i=8;for(n=0;n<16;++n)i+=t[e+n-32];me(i>>4,t,e)}function ge(t,e){me(128,t,e)}function Se(t,e,n){return t+2*e+n+2>>2}function we(t,e){var n,r=e-32;for(r=new Uint8Array([Se(t[r-1],t[r+0],t[r+1]),Se(t[r+0],t[r+1],t[r+2]),Se(t[r+1],t[r+2],t[r+3]),Se(t[r+2],t[r+3],t[r+4])]),n=0;n<4;++n)i(t,e+32*n,r,0,r.length)}function _e(t,e){var n=t[e-1],i=t[e-1+32],r=t[e-1+64],o=t[e-1+96];T(t,e+0,16843009*Se(t[e-1-32],n,i)),T(t,e+32,16843009*Se(n,i,r)),T(t,e+64,16843009*Se(i,r,o)),T(t,e+96,16843009*Se(r,o,o))}function xe(t,e){var n,i=4;for(n=0;n<4;++n)i+=t[e+n-32]+t[e-1+32*n];for(i>>=3,n=0;n<4;++n)r(t,e+32*n,i,4)}function ke(t,e){var n=t[e-1+0],i=t[e-1+32],r=t[e-1+64],o=t[e-1-32],s=t[e+0-32],a=t[e+1-32],u=t[e+2-32],l=t[e+3-32];t[e+0+96]=Se(i,r,t[e-1+96]),t[e+1+96]=t[e+0+64]=Se(n,i,r),t[e+2+96]=t[e+1+64]=t[e+0+32]=Se(o,n,i),t[e+3+96]=t[e+2+64]=t[e+1+32]=t[e+0+0]=Se(s,o,n),t[e+3+64]=t[e+2+32]=t[e+1+0]=Se(a,s,o),t[e+3+32]=t[e+2+0]=Se(u,a,s),t[e+3+0]=Se(l,u,a)}function Ee(t,e){var n=t[e+1-32],i=t[e+2-32],r=t[e+3-32],o=t[e+4-32],s=t[e+5-32],a=t[e+6-32],u=t[e+7-32];t[e+0+0]=Se(t[e+0-32],n,i),t[e+1+0]=t[e+0+32]=Se(n,i,r),t[e+2+0]=t[e+1+32]=t[e+0+64]=Se(i,r,o),t[e+3+0]=t[e+2+32]=t[e+1+64]=t[e+0+96]=Se(r,o,s),t[e+3+32]=t[e+2+64]=t[e+1+96]=Se(o,s,a),t[e+3+64]=t[e+2+96]=Se(s,a,u),t[e+3+96]=Se(a,u,u)}function Pe(t,e){var n=t[e-1+0],i=t[e-1+32],r=t[e-1+64],o=t[e-1-32],s=t[e+0-32],a=t[e+1-32],u=t[e+2-32],l=t[e+3-32];t[e+0+0]=t[e+1+64]=o+s+1>>1,t[e+1+0]=t[e+2+64]=s+a+1>>1,t[e+2+0]=t[e+3+64]=a+u+1>>1,t[e+3+0]=u+l+1>>1,t[e+0+96]=Se(r,i,n),t[e+0+64]=Se(i,n,o),t[e+0+32]=t[e+1+96]=Se(n,o,s),t[e+1+32]=t[e+2+96]=Se(o,s,a),t[e+2+32]=t[e+3+96]=Se(s,a,u),t[e+3+32]=Se(a,u,l)}function Ae(t,e){var n=t[e+0-32],i=t[e+1-32],r=t[e+2-32],o=t[e+3-32],s=t[e+4-32],a=t[e+5-32],u=t[e+6-32],l=t[e+7-32];t[e+0+0]=n+i+1>>1,t[e+1+0]=t[e+0+64]=i+r+1>>1,t[e+2+0]=t[e+1+64]=r+o+1>>1,t[e+3+0]=t[e+2+64]=o+s+1>>1,t[e+0+32]=Se(n,i,r),t[e+1+32]=t[e+0+96]=Se(i,r,o),t[e+2+32]=t[e+1+96]=Se(r,o,s),t[e+3+32]=t[e+2+96]=Se(o,s,a),t[e+3+64]=Se(s,a,u),t[e+3+96]=Se(a,u,l)}function Le(t,e){var n=t[e-1+0],i=t[e-1+32],r=t[e-1+64],o=t[e-1+96];t[e+0+0]=n+i+1>>1,t[e+2+0]=t[e+0+32]=i+r+1>>1,t[e+2+32]=t[e+0+64]=r+o+1>>1,t[e+1+0]=Se(n,i,r),t[e+3+0]=t[e+1+32]=Se(i,r,o),t[e+3+32]=t[e+1+64]=Se(r,o,o),t[e+3+64]=t[e+2+64]=t[e+0+96]=t[e+1+96]=t[e+2+96]=t[e+3+96]=o}function Te(t,e){var n=t[e-1+0],i=t[e-1+32],r=t[e-1+64],o=t[e-1+96],s=t[e-1-32],a=t[e+0-32],u=t[e+1-32],l=t[e+2-32];t[e+0+0]=t[e+2+32]=n+s+1>>1,t[e+0+32]=t[e+2+64]=i+n+1>>1,t[e+0+64]=t[e+2+96]=r+i+1>>1,t[e+0+96]=o+r+1>>1,t[e+3+0]=Se(a,u,l),t[e+2+0]=Se(s,a,u),t[e+1+0]=t[e+3+32]=Se(n,s,a),t[e+1+32]=t[e+3+64]=Se(i,n,s),t[e+1+64]=t[e+3+96]=Se(r,i,n),t[e+1+96]=Se(o,r,i)}function Me(t,e){var n;for(n=0;n<8;++n)i(t,e+32*n,t,e-32,8)}function Ce(t,e){var n;for(n=0;n<8;++n)r(t,e,t[e-1],8),e+=32}function Ne(t,e,n){var i;for(i=0;i<8;++i)r(e,n+32*i,t,8)}function Ie(t,e){var n,i=8;for(n=0;n<8;++n)i+=t[e+n-32]+t[e-1+32*n];Ne(i>>4,t,e)}function Re(t,e){var n,i=4;for(n=0;n<8;++n)i+=t[e+n-32];Ne(i>>3,t,e)}function Oe(t,e){var n,i=4;for(n=0;n<8;++n)i+=t[e-1+32*n];Ne(i>>3,t,e)}function Fe(t,e){Ne(128,t,e)}function Be(t,e,n){var i=t[e-n],r=t[e+0],o=3*(r-i)+Ci[1020+t[e-2*n]-t[e+n]],s=Ni[112+(o+4>>3)];t[e-n]=Ii[255+i+Ni[112+(o+3>>3)]],t[e+0]=Ii[255+r-s]}function De(t,e,n,i){return Ri[255+t[e-2*n]-t[e-n]]>i||Ri[255+t[e+n]-t[e+0]]>i}function je(t,e,n,i){return 4*Ri[255+t[e-n]-t[e+0]]+Ri[255+t[e-2*n]-t[e+n]]<=i}function Ve(t,e,n,i,r){var o=t[e-3*n],s=t[e-2*n],a=t[e-n],u=t[e+0],l=t[e+n],c=t[e+2*n];return 4*Ri[255+a-u]+Ri[255+s-l]>i?0:Ri[255+t[e-4*n]-o]<=r&&Ri[255+o-s]<=r&&Ri[255+s-a]<=r&&Ri[255+t[e+3*n]-c]<=r&&Ri[255+c-l]<=r&&Ri[255+l-u]<=r}function Ge(t,e,n,i){var r=2*i+1;for(i=0;i<16;++i)je(t,e+i,n,r)&&Be(t,e+i,n)}function Ue(t,e,n,i){var r=2*i+1;for(i=0;i<16;++i)je(t,e+i*n,1,r)&&Be(t,e+i*n,1)}function ze(t,e,n,i){var r;for(r=3;0<r;--r)Ge(t,e+=4*n,n,i)}function We(t,e,n,i){var r;for(r=3;0<r;--r)Ue(t,e+=4,n,i)}function He(t,e,n,i,r,o,s,a){for(o=2*o+1;0<r--;){if(Ve(t,e,n,o,s))if(De(t,e,n,a))Be(t,e,n);else{var u=t,l=e,c=n,h=u[l-2*c],f=u[l-c],d=u[l+0],p=u[l+c],m=u[l+2*c],b=27*(y=Ci[1020+3*(d-f)+Ci[1020+h-p]])+63>>7,v=18*y+63>>7,y=9*y+63>>7;u[l-3*c]=Ii[255+u[l-3*c]+y],u[l-2*c]=Ii[255+h+v],u[l-c]=Ii[255+f+b],u[l+0]=Ii[255+d-b],u[l+c]=Ii[255+p-v],u[l+2*c]=Ii[255+m-y]}e+=i}}function qe(t,e,n,i,r,o,s,a){for(o=2*o+1;0<r--;){if(Ve(t,e,n,o,s))if(De(t,e,n,a))Be(t,e,n);else{var u=t,l=e,c=n,h=u[l-c],f=u[l+0],d=u[l+c],p=Ni[112+(4+(m=3*(f-h))>>3)],m=Ni[112+(m+3>>3)],b=p+1>>1;u[l-2*c]=Ii[255+u[l-2*c]+b],u[l-c]=Ii[255+h+m],u[l+0]=Ii[255+f-p],u[l+c]=Ii[255+d-b]}e+=i}}function Ye(t,e,n,i,r,o){He(t,e,n,1,16,i,r,o)}function Xe(t,e,n,i,r,o){He(t,e,1,n,16,i,r,o)}function Ke(t,e,n,i,r,o){var s;for(s=3;0<s;--s)qe(t,e+=4*n,n,1,16,i,r,o)}function Je(t,e,n,i,r,o){var s;for(s=3;0<s;--s)qe(t,e+=4,1,n,16,i,r,o)}function Ze(t,e,n,i,r,o,s,a){He(t,e,r,1,8,o,s,a),He(n,i,r,1,8,o,s,a)}function Qe(t,e,n,i,r,o,s,a){He(t,e,1,r,8,o,s,a),He(n,i,1,r,8,o,s,a)}function $e(t,e,n,i,r,o,s,a){qe(t,e+4*r,r,1,8,o,s,a),qe(n,i+4*r,r,1,8,o,s,a)}function tn(t,e,n,i,r,o,s,a){qe(t,e+4,1,r,8,o,s,a),qe(n,i+4,1,r,8,o,s,a)}function en(){this.ba=new st,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ut,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function nn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function rn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function on(){this.ua=0,this.Wa=new O,this.vb=new O,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new d,this.yc=new h}function sn(){this.xb=this.a=0,this.l=new qt,this.ca=new st,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new w,this.Pb=0,this.wd=new w,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new on,this.ab=0,this.gc=s(4,rn),this.Oc=0}function an(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new qt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function un(t,e,n,i,r,o,s){for(t=null==t?0:t[e+0],e=0;e<s;++e)r[o+e]=t+n[i+e]&255,t=r[o+e]}function ln(t,e,n,i,r,o,s){var a;if(null==t)un(null,null,n,i,r,o,s);else for(a=0;a<s;++a)r[o+a]=t[e+a]+n[i+a]&255}function cn(t,e,n,i,r,o,s){if(null==t)un(null,null,n,i,r,o,s);else{var a,u=t[e+0],l=u,c=u;for(a=0;a<s;++a)l=c+(u=t[e+a])-l,c=n[i+a]+(-256&l?l<0?0:255:l)&255,l=u,r[o+a]=c}}function hn(t,n,r,s){var a=n.width,u=n.o;if(e(null!=t&&null!=n),r<0||s<=0||u<r+s)return null;if(!t.Cc){if(null==t.ga){var l;if(t.ga=new an,(l=null==t.ga)||(l=n.width*n.o,e(0==t.Gb.length),t.Gb=o(l),t.Uc=0,l=!(l=null==t.Gb?0:(t.mb=t.Gb,t.nb=t.Uc,t.rc=null,1))),!l){var c=t.Fa,h=t.P,f=t.qc,d=t.mb,p=t.nb,m=h+1,b=f-1,y=(l=t.ga).l;if(e(null!=c&&null!=d&&null!=n),mr[0]=null,mr[1]=un,mr[2]=ln,mr[3]=cn,l.ca=d,l.tb=p,l.c=n.width,l.i=n.height,e(0<l.c&&0<l.i),f<=1)n=0;else if(l.$a=c[h+0]>>0&3,l.Z=c[h+0]>>2&3,l.Lc=c[h+0]>>4&3,h=c[h+0]>>6&3,l.$a<0||1<l.$a||4<=l.Z||1<l.Lc||h)n=0;else if(y.put=dt,y.ac=ft,y.bc=pt,y.ma=l,y.width=n.width,y.height=n.height,y.Da=n.Da,y.v=n.v,y.va=n.va,y.j=n.j,y.o=n.o,l.$a)t:{e(1==l.$a),n=Lt();e:for(;;){if(null==n){n=0;break t}if(e(null!=l),(l.mc=n).c=l.c,n.i=l.i,n.l=l.l,n.l.ma=l,n.l.width=l.c,n.l.height=l.i,n.a=0,v(n.m,c,m,b),!Tt(l.c,l.i,1,n,null))break e;if(!(n=1==n.ab&&3==n.gc[0].hc&&xt(n.s)?(l.ic=1,c=n.c*n.i,n.Ta=null,n.Ua=0,n.V=o(c),n.Ba=0,null==n.V?(n.a=1,0):1):(l.ic=0,Mt(n,l.c))))break e;n=1;break t}l.mc=null,n=0}else n=b>=l.c*l.i;l=!n}if(l)return null;1!=t.ga.Lc?t.Ga=0:s=u-r}e(null!=t.ga),e(r+s<=u);t:{if(n=(c=t.ga).c,u=c.l.o,0==c.$a){if(m=t.rc,b=t.Vc,y=t.Fa,f=t.mb,d=t.nb+r*n,e((h=t.P+1+r*n)<=t.P+t.qc),0!=c.Z)for(e(null!=mr[c.Z]),l=0;l<s;++l)mr[c.Z](m,b,y,h,f,d,n),m=f,b=d,d+=n,h+=n;else for(l=0;l<s;++l)i(f,d,y,h,n),m=f,b=d,d+=n,h+=n;t.rc=m,t.Vc=b}else{if(e(null!=c.mc),n=r+s,e(null!=(l=c.mc)),e(n<=l.i),l.C>=n)n=1;else if(c.ic||bn(),c.ic){c=l.V,m=l.Ba;var g=l.i,S=(y=1,h=l.$/(b=l.c),f=l.$%b,d=l.m,p=l.s,l.$),w=b*g,_=b*n,k=p.wc,P=S<_?St(p,f,h):null;e(S<=w),e(n<=g),e(xt(p));e:for(;;){for(;!d.h&&S<_;){if(f&k||(P=St(p,f,h)),e(null!=P),E(d),(g=yt(P.G[0],P.H[0],d))<256)c[m+S]=g,++S,b<=++f&&(f=0,++h<=n&&!(h%16)&&Et(l,h));else{if(!(g<280)){y=0;break e}g=bt(g-256,d);var A,L=yt(P.G[4],P.H[4],d);if(E(d),!((L=vt(b,L=bt(L,d)))<=S&&g<=w-S)){y=0;break e}for(A=0;A<g;++A)c[m+S+A]=c[m+S+A-L];for(S+=g,f+=g;b<=f;)f-=b,++h<=n&&!(h%16)&&Et(l,h);S<_&&f&k&&(P=St(p,f,h))}e(d.h==x(d))}Et(l,n<h?n:h);break e}!y||d.h&&S<w?(y=0,l.a=d.h?5:3):l.$=S,n=y}else n=Pt(l,l.V,l.Ba,l.c,l.i,n,Ct);if(!n){s=0;break t}}u<=r+s&&(t.Cc=1),s=1}if(!s)return null;if(t.Cc&&(null!=(s=t.ga)&&(s.mc=null),t.ga=null,0<t.Ga))return alert("todo:WebPDequantizeLevels"),null}return t.nb+r*a}function fn(t,e,n,i,r,o){for(;0<r--;){var s,a=t,u=e+(n?1:0),l=t,c=e+(n?0:3);for(s=0;s<i;++s){var h=l[c+4*s];255!=h&&(a[u+4*s+0]=a[u+4*s+0]*(h*=32897)>>23,a[u+4*s+1]=a[u+4*s+1]*h>>23,a[u+4*s+2]=a[u+4*s+2]*h>>23)}e+=o}}function dn(t,e,n,i,r){for(;0<i--;){var o;for(o=0;o<n;++o){var s=t[e+2*o+0],a=15&(l=t[e+2*o+1]),u=4369*a,l=(240&l|l>>4)*u>>16;t[e+2*o+0]=(240&s|s>>4)*u>>16&240|(15&s|s<<4)*u>>16>>4&15,t[e+2*o+1]=240&l|a}e+=r}}function pn(t,e,n,i,r,o,s,a){var u,l,c=255;for(l=0;l<r;++l){for(u=0;u<i;++u)c&=o[s+4*u]=t[e+u];e+=n,s+=a}return 255!=c}function mn(t,e,n,i,r){var o;for(o=0;o<r;++o)n[i+o]=t[e+o]>>8}function bn(){_i=fn,xi=dn,ki=pn,Ei=mn}function vn(n,i,r){t[n]=function(t,n,o,s,a,u,l,c,h,f,d,p,m,b,v,y,g){var S,w=g-1>>1,_=a[u+0]|l[c+0]<<16,x=h[f+0]|d[p+0]<<16;e(null!=t);var k=3*_+x+131074>>2;for(i(t[n+0],255&k,k>>16,m,b),null!=o&&i(o[s+0],255&(k=3*x+_+131074>>2),k>>16,v,y),S=1;S<=w;++S){var E=a[u+S]|l[c+S]<<16,P=h[f+S]|d[p+S]<<16,A=_+E+x+P+524296,L=A+2*(E+x)>>3;k=L+_>>1,_=(A=A+2*(_+P)>>3)+E>>1,i(t[n+2*S-1],255&k,k>>16,m,b+(2*S-1)*r),i(t[n+2*S-0],255&_,_>>16,m,b+(2*S-0)*r),null!=o&&(_=L+P>>1,i(o[s+2*S-1],255&(k=A+x>>1),k>>16,v,y+(2*S-1)*r),i(o[s+2*S+0],255&_,_>>16,v,y+(2*S+0)*r)),_=E,x=P}1&g||(i(t[n+g-1],255&(k=3*_+x+131074>>2),k>>16,m,b+(g-1)*r),null!=o&&i(o[s+g-1],255&(k=3*x+_+131074>>2),k>>16,v,y+(g-1)*r))}}function yn(){br[Oi]=vr,br[Fi]=gr,br[Bi]=yr,br[Di]=Sr,br[ji]=wr,br[Vi]=_r,br[Gi]=xr,br[Ui]=gr,br[zi]=Sr,br[Wi]=wr,br[Hi]=_r}function gn(t){return t&~Tr?t<0?0:255:t>>Lr}function Sn(t,e){return gn((19077*t>>8)+(26149*e>>8)-14234)}function wn(t,e,n){return gn((19077*t>>8)-(6419*e>>8)-(13320*n>>8)+8708)}function _n(t,e){return gn((19077*t>>8)+(33050*e>>8)-17685)}function xn(t,e,n,i,r){i[r+0]=Sn(t,n),i[r+1]=wn(t,e,n),i[r+2]=_n(t,e)}function kn(t,e,n,i,r){i[r+0]=_n(t,e),i[r+1]=wn(t,e,n),i[r+2]=Sn(t,n)}function En(t,e,n,i,r){var o=wn(t,e,n);e=o<<3&224|_n(t,e)>>3,i[r+0]=248&Sn(t,n)|o>>5,i[r+1]=e}function Pn(t,e,n,i,r){var o=240&_n(t,e)|15;i[r+0]=240&Sn(t,n)|wn(t,e,n)>>4,i[r+1]=o}function An(t,e,n,i,r){i[r+0]=255,xn(t,e,n,i,r+1)}function Ln(t,e,n,i,r){kn(t,e,n,i,r),i[r+3]=255}function Tn(t,e,n,i,r){xn(t,e,n,i,r),i[r+3]=255}function Ht(t,e){return t<0?0:e<t?e:t}function Mn(e,n,i){t[e]=function(t,e,r,o,s,a,u,l,c){for(var h=l+(-2&c)*i;l!=h;)n(t[e+0],r[o+0],s[a+0],u,l),n(t[e+1],r[o+0],s[a+0],u,l+i),e+=2,++o,++a,l+=2*i;1&c&&n(t[e+0],r[o+0],s[a+0],u,l)}}function Cn(t,e,n){return 0==n?0==t?0==e?6:5:0==e?4:0:n}function Nn(t,e,n,i,r){switch(t>>>30){case 3:oi(e,n,i,r,0);break;case 2:si(e,n,i,r);break;case 1:ui(e,n,i,r)}}function In(t,e){var n,o,s=e.M,a=e.Nb,u=t.oc,l=t.pc+40,c=t.oc,h=t.pc+584,f=t.oc,d=t.pc+600;for(n=0;n<16;++n)u[l+32*n-1]=129;for(n=0;n<8;++n)c[h+32*n-1]=129,f[d+32*n-1]=129;for(0<s?u[l-1-32]=c[h-1-32]=f[d-1-32]=129:(r(u,l-32-1,127,21),r(c,h-32-1,127,9),r(f,d-32-1,127,9)),o=0;o<t.za;++o){var p=e.ya[e.aa+o];if(0<o){for(n=-1;n<16;++n)i(u,l+32*n-4,u,l+32*n+12,4);for(n=-1;n<8;++n)i(c,h+32*n-4,c,h+32*n+4,4),i(f,d+32*n-4,f,d+32*n+4,4)}var m=t.Gd,b=t.Hd+o,v=p.ad,y=p.Hc;if(0<s&&(i(u,l-32,m[b].y,0,16),i(c,h-32,m[b].f,0,8),i(f,d-32,m[b].ea,0,8)),p.Za){var g=u,S=l-32+16;for(0<s&&(o>=t.za-1?r(g,S,m[b].y[15],4):i(g,S,m[b+1].y,0,4)),n=0;n<4;n++)g[S+128+n]=g[S+256+n]=g[S+384+n]=g[S+0+n];for(n=0;n<16;++n,y<<=2)hr[p.Ob[n]](g=u,S=l+Br[n]),Nn(y,v,16*+n,g,S)}else if(g=Cn(o,s,p.Ob[0]),cr[g](u,l),0!=y)for(n=0;n<16;++n,y<<=2)Nn(y,v,16*+n,u,l+Br[n]);for(n=p.Gc,g=Cn(o,s,p.Dd),fr[g](c,h),fr[g](f,d),y=v,g=c,S=h,255&(p=n>>0)&&(170&p?ai(y,256,g,S):li(y,256,g,S)),p=f,y=d,255&(n>>=8)&&(170&n?ai(v,320,p,y):li(v,320,p,y)),s<t.Ub-1&&(i(m[b].y,0,u,l+480,16),i(m[b].f,0,c,h+224,8),i(m[b].ea,0,f,d+224,8)),m=t.sa,b=t.ta+16*o+16*a*t.R,v=t.qa,p=t.ra+8*o+(n=8*a*t.B),y=t.Ha,g=t.Ia+8*o+n,n=0;n<16;++n)i(m,b+n*t.R,u,l+32*n,16);for(n=0;n<8;++n)i(v,p+n*t.B,c,h+32*n,8),i(y,g+n*t.B,f,d+32*n,8)}}function Rn(t,i,r,o,s,a,u,l,c){var h=[0],f=[0],d=0,p=null!=c?c.kd:0,m=null!=c?c:new nn;if(null==t||r<12)return 7;m.data=t,i=[m.w=i],r=[m.ha=r],m.gb=[m.gb];t:{var b=i,y=r,g=m.gb;if(e(null!=t),e(null!=y),e(null!=g),12<=y[g[0]=0]&&!n(t,b[0],"RIFF")){if(n(t,b[0]+8,"WEBP")){g=3;break t}var S=N(t,b[0]+4);if(S<12||4294967286<S){g=3;break t}if(p&&S>y[0]-8){g=7;break t}g[0]=S,b[0]+=12,y[0]-=12}g=0}if(0!=g)return g;for(S=0<m.gb[0],r=r[0];;){t:{var _=t;y=i;var x=h,k=f,E=b=[0];if((g=r)[(L=d=[d])[0]=0]<8)g=7;else{if(!n(_,y[0],"VP8X")){if(10!=N(_,y[0]+4)){g=3;break t}if(g[0]<18){g=7;break t}var P=N(_,y[0]+8),A=1+C(_,y[0]+12);if(2147483648<=A*(_=1+C(_,y[0]+15))){g=3;break t}null!=E&&(E[0]=P),null!=x&&(x[0]=A),null!=k&&(k[0]=_),y[0]+=18,g[0]-=18,L[0]=1}g=0}}if(d=d[0],0!=g)return g;if(y=!!(2&(b=b[0])),!S&&d)return 3;if(null!=a&&(a[0]=!!(16&b)),null!=u&&(u[0]=y),null!=l&&(l[0]=0),u=h[0],b=f[0],d&&y&&null==c){g=0;break}if(r<4){g=7;break}if(S&&d||!S&&!d&&!n(t,i[0],"ALPH")){r=[r],m.na=[m.na],m.P=[m.P],m.Sa=[m.Sa];t:{g=i,S=r;var L=m.gb;x=m.na,k=m.P,E=m.Sa,A=22,e(null!=(P=t)),e(null!=S),_=g[0];var T=S[0];for(e(null!=x),e(null!=E),x[0]=null,k[0]=null,E[0]=0;;){if(g[0]=_,(S[0]=T)<8){g=7;break t}var M=N(P,_+4);if(4294967286<M){g=3;break t}var I=8+M+1&-2;if(A+=I,0<L&&L<A){g=3;break t}if(!n(P,_,"VP8 ")||!n(P,_,"VP8L")){g=0;break t}if(T[0]<I){g=7;break t}n(P,_,"ALPH")||(x[0]=P,k[0]=_+8,E[0]=M),_+=I,T-=I}}if(r=r[0],m.na=m.na[0],m.P=m.P[0],m.Sa=m.Sa[0],0!=g)break}r=[r],m.Ja=[m.Ja],m.xa=[m.xa];t:if(L=t,g=i,S=r,x=m.gb[0],k=m.Ja,E=m.xa,P=g[0],_=!n(L,P,"VP8 "),A=!n(L,P,"VP8L"),e(null!=L),e(null!=S),e(null!=k),e(null!=E),S[0]<8)g=7;else{if(_||A){if(L=N(L,P+4),12<=x&&x-12<L){g=3;break t}if(p&&L>S[0]-8){g=7;break t}k[0]=L,g[0]+=8,S[0]-=8,E[0]=A}else E[0]=5<=S[0]&&47==L[P+0]&&!(L[P+4]>>5),k[0]=S[0];g=0}if(r=r[0],m.Ja=m.Ja[0],m.xa=m.xa[0],i=i[0],0!=g)break;if(4294967286<m.Ja)return 3;if(null==l||y||(l[0]=m.xa?2:1),u=[u],b=[b],m.xa){if(r<5){g=7;break}l=u,p=b,y=a,t=null==t||r<5?0:5<=r&&47==t[i+0]&&!(t[i+4]>>5)?(S=[0],L=[0],x=[0],v(k=new w,t,i,r),mt(k,S,L,x)?(null!=l&&(l[0]=S[0]),null!=p&&(p[0]=L[0]),null!=y&&(y[0]=x[0]),1):0):0}else{if(r<10){g=7;break}l=b,t=null==t||r<10||!Kt(t,i+3,r-3)?0:(p=t[i+0]|t[i+1]<<8|t[i+2]<<16,y=16383&(t[i+7]<<8|t[i+6]),t=16383&(t[i+9]<<8|t[i+8]),1&p||3<(p>>1&7)||!(p>>4&1)||p>>5>=m.Ja||!y||!t?0:(u&&(u[0]=y),l&&(l[0]=t),1))}if(!t)return 3;if(u=u[0],b=b[0],d&&(h[0]!=u||f[0]!=b))return 3;null!=c&&(c[0]=m,c.offset=i-c.w,e(i-c.w<4294967286),e(c.offset==c.ha-r));break}return 0==g||7==g&&d&&null==c?(null!=a&&(a[0]|=null!=m.na&&0<m.na.length),null!=o&&(o[0]=u),null!=s&&(s[0]=b),0):g}function On(t,e,n){var i=e.width,r=e.height,o=0,s=0,a=i,u=r;if(e.Da=null!=t&&0<t.Da,e.Da&&(a=t.cd,u=t.bd,o=t.v,s=t.j,n<11||(o&=-2,s&=-2),o<0||s<0||a<=0||u<=0||i<o+a||r<s+u))return 0;if(e.v=o,e.j=s,e.va=o+a,e.o=s+u,e.U=a,e.T=u,e.da=null!=t&&0<t.da,e.da){if(!F(a,u,n=[t.ib],o=[t.hb]))return 0;e.ib=n[0],e.hb=o[0]}return e.ob=null!=t&&t.ob,e.Kb=null==t||!t.Sd,e.da&&(e.ob=e.ib<3*i/4&&e.hb<3*r/4,e.Kb=0),1}function Fn(t){if(null==t)return 2;if(t.S<11){var e=t.f.RGBA;e.fb+=(t.height-1)*e.A,e.A=-e.A}else(e=t.f.kb).O+=((t=t.height)-1)*e.fa,e.fa=-e.fa,e.N+=(t-1>>1)*e.Ab,e.Ab=-e.Ab,e.W+=(t-1>>1)*e.Db,e.Db=-e.Db,null!=e.F&&(e.J+=(t-1)*e.lb,e.lb=-e.lb);return 0}function Bn(t,e,n,i){if(null==i||t<=0||e<=0)return 2;if(null!=n){if(n.Da){var r=n.cd,s=n.bd,a=-2&n.v,u=-2&n.j;if(a<0||u<0||r<=0||s<=0||t<a+r||e<u+s)return 2;t=r,e=s}if(n.da){if(!F(t,e,r=[n.ib],s=[n.hb]))return 2;t=r[0],e=s[0]}}i.width=t,i.height=e;t:{var l=i.width,c=i.height;if(t=i.S,l<=0||c<=0||!(Oi<=t&&t<13))t=2;else{if(i.Rd<=0&&null==i.sd){a=s=r=e=0;var h=(u=l*Vr[t])*c;if(t<11||(s=(c+1)/2*(e=(l+1)/2),12==t&&(a=(r=l)*c)),null==(c=o(h+2*s+a))){t=1;break t}i.sd=c,t<11?((l=i.f.RGBA).eb=c,l.fb=0,l.A=u,l.size=h):((l=i.f.kb).y=c,l.O=0,l.fa=u,l.Fd=h,l.f=c,l.N=0+h,l.Ab=e,l.Cd=s,l.ea=c,l.W=0+h+s,l.Db=e,l.Ed=s,12==t&&(l.F=c,l.J=0+h+2*s),l.Tc=a,l.lb=r)}if(e=1,s=i.width,a=i.height,Oi<=(r=i.S)&&r<13)if(r<11)t=i.f.RGBA,e&=(u=Math.abs(t.A))*(a-1)+s<=t.size,e&=u>=s*Vr[r],e&=null!=t.eb;else{t=i.f.kb,u=(s+1)/2,h=(a+1)/2,l=Math.abs(t.fa),c=Math.abs(t.Ab);var f=Math.abs(t.Db),d=Math.abs(t.lb);e&=l*(a-1)+s<=t.Fd,e&=c*(h-1)+u<=t.Cd,e=(e&=f*(h-1)+u<=t.Ed)&s<=l&u<=c&u<=f,e&=null!=t.y,e&=null!=t.f,e&=null!=t.ea,12==r&&(e&=s<=d,e&=d*(a-1)+s<=t.Tc,e&=null!=t.F)}else e=0;t=e?0:2}}return 0!=t||null!=n&&n.fd&&(t=Fn(i)),t}var Dn=64,jn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Vn=24,Gn=32,Un=8,zn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];j("Predictor0","PredictorAdd0"),t.Predictor0=function(){return 4278190080},t.Predictor1=function(t){return t},t.Predictor2=function(t,e,n){return e[n+0]},t.Predictor3=function(t,e,n){return e[n+1]},t.Predictor4=function(t,e,n){return e[n-1]},t.Predictor5=function(t,e,n){return G(G(t,e[n+1]),e[n+0])},t.Predictor6=function(t,e,n){return G(t,e[n-1])},t.Predictor7=function(t,e,n){return G(t,e[n+0])},t.Predictor8=function(t,e,n){return G(e[n-1],e[n+0])},t.Predictor9=function(t,e,n){return G(e[n+0],e[n+1])},t.Predictor10=function(t,e,n){return G(G(t,e[n-1]),G(e[n+0],e[n+1]))},t.Predictor11=function(t,e,n){var i=e[n+0];return W(i>>24&255,t>>24&255,(e=e[n-1])>>24&255)+W(i>>16&255,t>>16&255,e>>16&255)+W(i>>8&255,t>>8&255,e>>8&255)+W(255&i,255&t,255&e)<=0?i:t},t.Predictor12=function(t,e,n){var i=e[n+0];return(U((t>>24&255)+(i>>24&255)-((e=e[n-1])>>24&255))<<24|U((t>>16&255)+(i>>16&255)-(e>>16&255))<<16|U((t>>8&255)+(i>>8&255)-(e>>8&255))<<8|U((255&t)+(255&i)-(255&e)))>>>0},t.Predictor13=function(t,e,n){var i=e[n-1];return(z((t=G(t,e[n+0]))>>24&255,i>>24&255)<<24|z(t>>16&255,i>>16&255)<<16|z(t>>8&255,i>>8&255)<<8|z(t>>0&255,i>>0&255))>>>0};var Wn=t.PredictorAdd0;t.PredictorAdd1=H,j("Predictor2","PredictorAdd2"),j("Predictor3","PredictorAdd3"),j("Predictor4","PredictorAdd4"),j("Predictor5","PredictorAdd5"),j("Predictor6","PredictorAdd6"),j("Predictor7","PredictorAdd7"),j("Predictor8","PredictorAdd8"),j("Predictor9","PredictorAdd9"),j("Predictor10","PredictorAdd10"),j("Predictor11","PredictorAdd11"),j("Predictor12","PredictorAdd12"),j("Predictor13","PredictorAdd13");var Hn=t.PredictorAdd2;K("ColorIndexInverseTransform","MapARGB","32b",(function(t){return t>>8&255}),(function(t){return t})),K("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(t){return t}),(function(t){return t>>8&255}));var qn,Yn=t.ColorIndexInverseTransform,Xn=t.MapARGB,Kn=t.VP8LColorIndexInverseTransformAlpha,Jn=t.MapAlpha,Zn=t.VP8LPredictorsAdd=[];Zn.length=16,(t.VP8LPredictors=[]).length=16,(t.VP8LPredictorsAdd_C=[]).length=16,(t.VP8LPredictors_C=[]).length=16;var Qn,$n,ti,ei,ni,ii,ri,oi,si,ai,ui,li,ci,hi,fi,di,pi,mi,bi,vi,yi,gi,Si,wi,_i,xi,ki,Ei,Pi=o(511),Ai=o(2041),Li=o(225),Ti=o(767),Mi=0,Ci=Ai,Ni=Li,Ii=Ti,Ri=Pi,Oi=0,Fi=1,Bi=2,Di=3,ji=4,Vi=5,Gi=6,Ui=7,zi=8,Wi=9,Hi=10,qi=[2,3,7],Yi=[3,3,11],Xi=[280,256,256,256,40],Ki=[0,1,1,1,0],Ji=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Zi=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Qi=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],$i=8,tr=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],er=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],nr=null,ir=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],rr=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],or=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],sr=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ar=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ur=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],lr=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],cr=[],hr=[],fr=[],dr=1,pr=2,mr=[],br=[];vn("UpsampleRgbLinePair",xn,3),vn("UpsampleBgrLinePair",kn,3),vn("UpsampleRgbaLinePair",Tn,4),vn("UpsampleBgraLinePair",Ln,4),vn("UpsampleArgbLinePair",An,4),vn("UpsampleRgba4444LinePair",Pn,2),vn("UpsampleRgb565LinePair",En,2);var vr=void 0,yr=void 0,gr=void 0,Sr=void 0,wr=void 0,_r=void 0,xr=void 0,kr=16,Er=1<<kr-1,Pr=-227,Ar=482,Lr=6,Tr=(256<<Lr)-1,Mr=0,Cr=o(256),Nr=o(256),Ir=o(256),Rr=o(256),Or=o(Ar-Pr),Fr=o(Ar-Pr);Mn("YuvToRgbRow",xn,3),Mn("YuvToBgrRow",kn,3),Mn("YuvToRgbaRow",Tn,4),Mn("YuvToBgraRow",Ln,4),Mn("YuvToArgbRow",An,4),Mn("YuvToRgba4444Row",Pn,2),Mn("YuvToRgb565Row",En,2);var Br=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Dr=[0,2,8],jr=[8,7,6,4,4,2,2,2,1,1,1,1];this.WebPDecodeRGBA=function(t,n,a,u,l){var c=Fi,h=new en,f=new st;(h.ba=f).S=c,f.width=[f.width],f.height=[f.height];var d=f.width,p=f.height,m=new at;if(null==m||null==t)var b=2;else e(null!=m),b=Rn(t,n,a,m.width,m.height,m.Pd,m.Qd,m.format,null);if(d=0!=b?0:(null!=d&&(d[0]=m.width[0]),null!=p&&(p[0]=m.height[0]),1)){f.width=f.width[0],f.height=f.height[0],null!=u&&(u[0]=f.width),null!=l&&(l[0]=f.height);t:{if(u=new qt,(l=new nn).data=t,l.w=n,l.ha=a,l.kd=1,n=[0],e(null!=l),0!=(t=Rn(l.data,l.w,l.ha,null,null,null,n,null,l))&&7!=t||!n[0]||(t=4),0==(n=t)){if(e(null!=h),u.data=l.data,u.w=l.w+l.offset,u.ha=l.ha-l.offset,u.put=dt,u.ac=ft,u.bc=pt,u.ma=h,l.xa){if(null==(t=Lt())){h=1;break t}if(function(t,n){var i=[0],r=[0],o=[0];e:for(;;){if(null==t)return 0;if(null==n)return t.a=2,0;if(t.l=n,t.a=0,v(t.m,n.data,n.w,n.ha),!mt(t.m,i,r,o)){t.a=3;break e}if(t.xb=pr,n.width=i[0],n.height=r[0],!Tt(i[0],r[0],1,t,null))break e;return 1}return e(0!=t.a),0}(t,u)){if(u=0==(n=Bn(u.width,u.height,h.Oa,h.ba))){e:{u=t;n:for(;;){if(null==u){u=0;break e}if(e(null!=u.s.yc),e(null!=u.s.Ya),e(0<u.s.Wb),e(null!=(a=u.l)),e(null!=(l=a.ma)),0!=u.xb){if(u.ca=l.ba,u.tb=l.tb,e(null!=u.ca),!On(l.Oa,a,Di)){u.a=2;break n}if(!Mt(u,a.width))break n;if(a.da)break n;if((a.da||it(u.ca.S))&&bn(),u.ca.S<11||(alert("todo:WebPInitConvertARGBToYUV"),null!=u.ca.f.kb.F&&bn()),u.Pb&&0<u.s.ua&&null==u.s.vb.X&&!I(u.s.vb,u.s.Wa.Xa)){u.a=1;break n}u.xb=0}if(!Pt(u,u.V,u.Ba,u.c,u.i,a.o,_t))break n;l.Dc=u.Ma,u=1;break e}e(0!=u.a),u=0}u=!u}u&&(n=t.a)}else n=t.a}else{if(null==(t=new Yt)){h=1;break t}if(t.Fa=l.na,t.P=l.P,t.qc=l.Sa,Jt(t,u)){if(0==(n=Bn(u.width,u.height,h.Oa,h.ba))){if(t.Aa=0,a=h.Oa,e(null!=(l=t)),null!=a){if(0<(d=(d=a.Md)<0?0:100<d?255:255*d/100)){for(p=m=0;p<4;++p)(b=l.pb[p]).lc<12&&(b.ia=d*jr[b.lc<0?0:b.lc]>>3),m|=b.ia;m&&(alert("todo:VP8InitRandom"),l.ia=1)}l.Ga=a.Id,100<l.Ga?l.Ga=100:l.Ga<0&&(l.Ga=0)}(function(t,n){if(null==t)return 0;if(null==n)return Xt(t,2,"NULL VP8Io parameter in VP8Decode().");if(!t.cb&&!Jt(t,n))return 0;if(e(t.cb),null==n.ac||n.ac(n)){n.ob&&(t.L=0);var a=Dr[t.L];if(2==t.L?(t.yb=0,t.zb=0):(t.yb=n.v-a>>4,t.zb=n.j-a>>4,t.yb<0&&(t.yb=0),t.zb<0&&(t.zb=0)),t.Va=n.o+15+a>>4,t.Hb=n.va+15+a>>4,t.Hb>t.za&&(t.Hb=t.za),t.Va>t.Ub&&(t.Va=t.Ub),0<t.L){var u=t.ed;for(a=0;a<4;++a){var l;if(t.Qa.Cb){var c=t.Qa.Lb[a];t.Qa.Fb||(c+=u.Tb)}else c=u.Tb;for(l=0;l<=1;++l){var h=t.gd[a][l],f=c;if(u.Pc&&(f+=u.vd[0],l&&(f+=u.od[0])),0<(f=f<0?0:63<f?63:f)){var d=f;0<u.wb&&(d=4<u.wb?d>>2:d>>1)>9-u.wb&&(d=9-u.wb),d<1&&(d=1),h.dd=d,h.tc=2*f+d,h.ld=40<=f?2:15<=f?1:0}else h.tc=0;h.La=l}}}a=0}else Xt(t,6,"Frame setup failed"),a=t.a;if(a=0==a){if(a){(t.$c=0)<t.Aa||(t.Ic=1);e:{u=4*(d=t.za);var p=32*d,m=d+1,b=0<t.L?d*(0<t.Aa?2:1):0,v=(2==t.Aa?2:1)*d;if((h=u+832+(l=3*(16*(a=t.Ic)+Dr[t.L])/2*p)+(c=null!=t.Fa&&0<t.Fa.length?t.Kc.c*t.Kc.i:0))!=h)a=0;else{if(h>t.Vb){if(t.Vb=0,t.Ec=o(h),t.Fc=0,null==t.Ec){a=Xt(t,1,"no memory during frame initialization.");break e}t.Vb=h}f=t.Fc,t.Ac=h=t.Ec,t.Bc=f,f+=u,t.Gd=s(p,zt),t.Hd=0,t.rb=s(m+1,jt),t.sb=1,t.wa=b?s(b,Dt):null,t.Y=0,t.D.Nb=0,t.D.wa=t.wa,t.D.Y=t.Y,0<t.Aa&&(t.D.Y+=d),e(!0),t.oc=h,t.pc=f,f+=832,t.ya=s(v,Gt),t.aa=0,t.D.ya=t.ya,t.D.aa=t.aa,2==t.Aa&&(t.D.aa+=d),t.R=16*d,t.B=8*d,d=(p=Dr[t.L])*t.R,p=p/2*t.B,t.sa=h,t.ta=f+d,t.qa=t.sa,t.ra=t.ta+16*a*t.R+p,t.Ha=t.qa,t.Ia=t.ra+8*a*t.B+p,t.$c=0,f+=l,t.mb=c?h:null,t.nb=c?f:null,e(f+c<=t.Fc+t.Vb),Qt(t),r(t.Ac,t.Bc,0,u),a=1}}if(a){if(n.ka=0,n.y=t.sa,n.O=t.ta,n.f=t.qa,n.N=t.ra,n.ea=t.Ha,n.Vd=t.Ia,n.fa=t.R,n.Rc=t.B,n.F=null,n.J=0,!Mi){for(a=-255;a<=255;++a)Pi[255+a]=a<0?-a:a;for(a=-1020;a<=1020;++a)Ai[1020+a]=a<-128?-128:127<a?127:a;for(a=-112;a<=112;++a)Li[112+a]=a<-16?-16:15<a?15:a;for(a=-255;a<=510;++a)Ti[255+a]=a<0?0:255<a?255:a;Mi=1}ri=ue,oi=re,ai=oe,ui=se,li=ae,si=ie,ci=Ye,hi=Xe,fi=Ze,di=Qe,pi=Ke,mi=Je,bi=$e,vi=tn,yi=Ge,gi=Ue,Si=ze,wi=We,hr[0]=xe,hr[1]=ce,hr[2]=we,hr[3]=_e,hr[4]=ke,hr[5]=Pe,hr[6]=Ee,hr[7]=Ae,hr[8]=Te,hr[9]=Le,cr[0]=be,cr[1]=fe,cr[2]=de,cr[3]=pe,cr[4]=ve,cr[5]=ye,cr[6]=ge,fr[0]=Ie,fr[1]=he,fr[2]=Me,fr[3]=Ce,fr[4]=Oe,fr[5]=Re,fr[6]=Fe,a=1}else a=0}a&&(a=function(t,n){for(t.M=0;t.M<t.Va;++t.M){var s,a=t.Jc[t.M&t.Xb],u=t.m,l=t;for(s=0;s<l.za;++s){var c=u,h=l,f=h.Ac,d=h.Bc+4*s,p=h.zc,m=h.ya[h.aa+s];if(m.$b=h.Qa.Bb?L(c,h.Pa.jb[0])?2+L(c,h.Pa.jb[2]):L(c,h.Pa.jb[1]):0,h.kc&&(m.Ad=L(c,h.Bd)),m.Za=!L(c,145)+0,m.Za){var b=m.Ob,v=0;for(h=0;h<4;++h){var y,g=p[0+h];for(y=0;y<4;++y){for(var S=or[L(c,(g=ar[f[d+y]][g])[0])];0<S;)S=or[2*S+L(c,g[S])];f[d+y]=g=-S}i(b,v,f,d,4),v+=4,p[0+h]=g}}else g=L(c,156)?L(c,128)?1:3:L(c,163)?2:0,r(f,d,m.Ob[0]=g,4),r(p,0,g,4);m.Dd=L(c,142)?L(c,114)?L(c,183)?1:3:2:0}if(l.m.Ka)return Xt(t,7,"Premature end-of-partition0 encountered.");for(;t.ja<t.za;++t.ja){if(l=a,c=(u=t).rb[u.sb-1],f=u.rb[u.sb+u.ja],s=u.ya[u.aa+u.ja],d=u.kc?s.Ad:0)c.la=f.la=0,s.Za||(c.Na=f.Na=0),s.Hc=0,s.Gc=0,s.ia=0;else{var w,_;if(c=f,f=l,d=u.Pa.Xc,m=u.pb[(p=u.ya[u.aa+u.ja]).$b],v=u.rb[u.sb-1],g=y=0,r(h=p.ad,b=0,0,384),p.Za)var x=0,k=d[3];else{S=o(16);var E=c.Na+v.Na;if(E=nr(f,d[1],E,m.Eb,0,S,0),c.Na=v.Na=(0<E)+0,1<E)ri(S,0,h,b);else{var P=S[0]+3>>3;for(S=0;S<256;S+=16)h[b+S]=P}x=1,k=d[0]}var A=15&c.la,T=15&v.la;for(S=0;S<4;++S){var M=1&T;for(P=_=0;P<4;++P)A=A>>1|(M=x<(E=nr(f,k,E=M+(1&A),m.Sc,x,h,b)))<<7,_=_<<2|(3<E?3:1<E?2:0!=h[b+0]),b+=16;A>>=4,T=T>>1|M<<7,y=(y<<8|_)>>>0}for(k=A,x=T>>4,w=0;w<4;w+=2){for(_=0,A=c.la>>4+w,T=v.la>>4+w,S=0;S<2;++S){for(M=1&T,P=0;P<2;++P)A=A>>1|(M=0<(E=nr(f,d[2],E=M+(1&A),m.Qc,0,h,b)))<<3,_=_<<2|(3<E?3:1<E?2:0!=h[b+0]),b+=16;A>>=2,T=T>>1|M<<5}g|=_<<4*w,k|=A<<4<<w,x|=(240&T)<<w}c.la=k,v.la=x,p.Hc=y,p.Gc=g,p.ia=43690&g?0:m.ia,d=!(y|g)}if(0<u.L&&(u.wa[u.Y+u.ja]=u.gd[s.$b][s.Za],u.wa[u.Y+u.ja].La|=!d),l.Ka)return Xt(t,7,"Premature end-of-file encountered.")}if(Qt(t),u=n,l=1,s=(a=t).D,c=0<a.L&&a.M>=a.zb&&a.M<=a.Va,0==a.Aa)e:{if(s.M=a.M,s.uc=c,In(a,s),l=1,s=(_=a.D).Nb,c=(g=Dr[a.L])*a.R,d=a.sa,p=a.ta-c+(S=16*s*a.R),m=a.qa,h=a.ra-(f=g/2*a.B)+(P=8*s*a.B),b=a.Ha,v=a.Ia-f+P,T=0==(A=_.M),y=A>=a.Va-1,2==a.Aa&&In(a,_),_.uc)for(M=(E=a).D.M,e(E.D.uc),_=E.yb;_<E.Hb;++_){k=M;var C=(N=(G=E).D).Nb,N=N.wa[N.Y+(x=_)],I=G.sa,R=G.ta+16*C*(w=G.R)+16*x,O=N.dd,F=N.tc;if(0!=F)if(e(3<=F),1==G.L)0<x&&gi(I,R,w,F+4),N.La&&wi(I,R,w,F),0<k&&yi(I,R,w,F+4),N.La&&Si(I,R,w,F);else{var B=G.B,D=G.qa,j=G.ra+8*C*B+8*x,V=G.Ha,G=G.Ia+8*C*B+8*x;C=N.ld,0<x&&(hi(I,R,w,F+4,O,C),di(D,j,V,G,B,F+4,O,C)),N.La&&(mi(I,R,w,F,O,C),vi(D,j,V,G,B,F,O,C)),0<k&&(ci(I,R,w,F+4,O,C),fi(D,j,V,G,B,F+4,O,C)),N.La&&(pi(I,R,w,F,O,C),bi(D,j,V,G,B,F,O,C))}}if(a.ia&&alert("todo:DitherRow"),null!=u.put){if(_=16*A,A=16*(A+1),T?(u.y=a.sa,u.O=a.ta+S,u.f=a.qa,u.N=a.ra+P,u.ea=a.Ha,u.W=a.Ia+P):(_-=g,u.y=d,u.O=p,u.f=m,u.N=h,u.ea=b,u.W=v),y||(A-=g),A>u.o&&(A=u.o),u.F=null,(u.J=null)!=a.Fa&&0<a.Fa.length&&_<A&&(u.J=hn(a,u,_,A-_),u.F=a.mb,null==u.F&&0==u.F.length)){l=Xt(a,3,"Could not decode alpha data.");break e}_<u.j&&(g=u.j-_,_=u.j,e(!(1&g)),u.O+=a.R*g,u.N+=a.B*(g>>1),u.W+=a.B*(g>>1),null!=u.F&&(u.J+=u.width*g)),_<A&&(u.O+=u.v,u.N+=u.v>>1,u.W+=u.v>>1,null!=u.F&&(u.J+=u.v),u.ka=_-u.j,u.U=u.va-u.v,u.T=A-_,l=u.put(u))}s+1!=a.Ic||y||(i(a.sa,a.ta-c,d,p+16*a.R,c),i(a.qa,a.ra-f,m,h+8*a.B,f),i(a.Ha,a.Ia-f,b,v+8*a.B,f))}if(!l)return Xt(t,6,"Output aborted.")}return 1}(t,n)),null!=n.bc&&n.bc(n),a&=1}return a?(t.cb=0,a):0})(t,u)||(n=t.a)}}else n=t.a}0==n&&null!=h.Oa&&h.Oa.fd&&(n=Fn(h.ba))}h=n}c=0!=h?null:c<11?f.f.RGBA.eb:f.f.kb.y}else c=null;return c};var Vr=[3,4,3,4,4,2,2,4,4,4,2,1,1]});var h=[0],f=[0],d=[],p=new bt,m=t,b=function(t,e){var n={},i=0,r=!1,o=0,s=0;if(n.frames=[],!function(t,e,n,i){for(var r=0;r<4;r++)if(t[e+r]!="RIFF".charCodeAt(r))return!0;return!1}(t,e)){var a,h;for(c(t,e+=4),e+=8;e<t.length;){var f=u(t,e),d=c(t,e+=4);e+=4;var p=d+(1&d);switch(f){case"VP8 ":case"VP8L":void 0===n.frames[i]&&(n.frames[i]={}),(v=n.frames[i]).src_off=r?s:e-8,v.src_size=o+d+8,i++,r&&(r=!1,s=o=0);break;case"VP8X":(v=n.header={}).feature_flags=t[e];var m=e+4;v.canvas_width=1+l(t,m),v.canvas_height=1+l(t,m+=3),m+=3;break;case"ALPH":r=!0,o=p+8,s=e-8;break;case"ANIM":(v=n.header).bgcolor=c(t,e),v.loop_count=(a=t)[(h=m=e+4)+0]<<0|a[h+1]<<8,m+=2;break;case"ANMF":var b,v;(v=n.frames[i]={}).offset_x=2*l(t,e),v.offset_y=2*l(t,e+=3),v.width=1+l(t,e+=3),v.height=1+l(t,e+=3),v.duration=l(t,e+=3),e+=3,b=t[e++],v.dispose=1&b,v.blend=b>>1&1}"ANMF"!=f&&(e+=p)}return n}}(m,0);b.response=m,b.rgbaoutput=!0,b.dataurl=!1;var v=b.header?b.header:null,y=b.frames?b.frames:null;if(v){v.loop_counter=v.loop_count,h=v.canvas_height,f=v.canvas_width;for(var g=0;g<y.length&&0!=y[g].blend;g++);}var S=y[0],w=p.WebPDecodeRGBA(m,S.src_off,S.src_size,f,h);S.rgba=w,S.imgwidth=f[0],S.imgheight=h[0];for(var _=0;_<f[0]*h[0]*4;_++)d[_]=w[_];return this.width=f,this.height=h,this.data=d,this}bt.prototype.getData=function(){return this.data};try{e.WebPDecoder=bt}catch(l){}!function(t){var e=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];function n(){var t=this;function e(t,e){for(var n=0;n|=1&t,t>>>=1,n<<=1,0<--e;);return n>>>1}t.build_tree=function(n){var i,r,o,s=t.dyn_tree,a=t.stat_desc.static_tree,u=t.stat_desc.elems,l=-1;for(n.heap_len=0,n.heap_max=573,i=0;i<u;i++)0!==s[2*i]?(n.heap[++n.heap_len]=l=i,n.depth[i]=0):s[2*i+1]=0;for(;n.heap_len<2;)s[2*(o=n.heap[++n.heap_len]=l<2?++l:0)]=1,n.depth[o]=0,n.opt_len--,a&&(n.static_len-=a[2*o+1]);for(t.max_code=l,i=Math.floor(n.heap_len/2);1<=i;i--)n.pqdownheap(s,i);for(o=u;i=n.heap[1],n.heap[1]=n.heap[n.heap_len--],n.pqdownheap(s,1),r=n.heap[1],n.heap[--n.heap_max]=i,n.heap[--n.heap_max]=r,s[2*o]=s[2*i]+s[2*r],n.depth[o]=Math.max(n.depth[i],n.depth[r])+1,s[2*i+1]=s[2*r+1]=o,n.heap[1]=o++,n.pqdownheap(s,1),2<=n.heap_len;);n.heap[--n.heap_max]=n.heap[1],function(e){var n,i,r,o,s,a,u=t.dyn_tree,l=t.stat_desc.static_tree,c=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,f=t.stat_desc.max_length,d=0;for(o=0;o<=15;o++)e.bl_count[o]=0;for(u[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)f<(o=u[2*u[2*(i=e.heap[n])+1]+1]+1)&&(o=f,d++),u[2*i+1]=o,i>t.max_code||(e.bl_count[o]++,s=0,h<=i&&(s=c[i-h]),e.opt_len+=(a=u[2*i])*(o+s),l&&(e.static_len+=a*(l[2*i+1]+s)));if(0!==d){do{for(o=f-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[f]--,d-=2}while(0<d);for(o=f;0!==o;o--)for(i=e.bl_count[o];0!==i;)(r=e.heap[--n])>t.max_code||(u[2*r+1]!==o&&(e.opt_len+=(o-u[2*r+1])*u[2*r],u[2*r+1]=o),i--)}}(n),function(t,n,i){var r,o,s,a=[],u=0;for(r=1;r<=15;r++)a[r]=u=u+i[r-1]<<1;for(o=0;o<=n;o++)0!==(s=t[2*o+1])&&(t[2*o]=e(a[s]++,s))}(s,t.max_code,n.bl_count)}}function i(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r}function r(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}n._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],n.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],n.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],n.d_code=function(t){return t<256?e[t]:e[256+(t>>>7)]},n.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],n.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],n.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],n.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],i.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],i.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],i.static_l_desc=new i(i.static_ltree,n.extra_lbits,257,286,15),i.static_d_desc=new i(i.static_dtree,n.extra_dbits,0,30,15),i.static_bl_desc=new i(null,n.extra_blbits,0,19,7);var o=[new r(0,0,0,0,0),new r(4,4,8,4,1),new r(4,5,16,8,1),new r(4,6,32,32,1),new r(4,4,16,16,2),new r(8,16,32,32,2),new r(8,16,128,128,2),new r(8,32,128,256,2),new r(32,128,258,1024,2),new r(32,258,258,4096,2)],s=["need dictionary","stream end","","","stream error","data error","","buffer error","",""];function a(t,e,n,i){var r=t[2*e],o=t[2*n];return r<o||r===o&&i[e]<=i[n]}function u(){var t,e,r,u,l,c,h,f,d,p,m,b,v,y,g,S,w,_,x,k,E,P,A,L,T,M,C,N,I,R,O,F,B,D,j,V,G,U,z,W,H,q=this,Y=new n,X=new n,K=new n;function J(){var t;for(t=0;t<286;t++)O[2*t]=0;for(t=0;t<30;t++)F[2*t]=0;for(t=0;t<19;t++)B[2*t]=0;O[512]=1,q.opt_len=q.static_len=0,V=U=0}function Z(t,e){var n,i,r=-1,o=t[1],s=0,a=7,u=4;for(0===o&&(a=138,u=3),t[2*(e+1)+1]=65535,n=0;n<=e;n++)i=o,o=t[2*(n+1)+1],++s<a&&i===o||(s<u?B[2*i]+=s:0!==i?(i!==r&&B[2*i]++,B[32]++):s<=10?B[34]++:B[36]++,r=i,u=(s=0)===o?(a=138,3):i===o?(a=6,3):(a=7,4))}function Q(t){q.pending_buf[q.pending++]=t}function $(t){Q(255&t),Q(t>>>8&255)}function tt(t,e){var n,i=e;16-i<H?($(W|=(n=t)<<H&65535),W=n>>>16-H,H+=i-16):(W|=t<<H&65535,H+=i)}function et(t,e){var n=2*t;tt(65535&e[n],65535&e[1+n])}function nt(t,e){var n,i,r=-1,o=t[1],s=0,a=7,u=4;for(0===o&&(a=138,u=3),n=0;n<=e;n++)if(i=o,o=t[2*(n+1)+1],!(++s<a&&i===o)){if(s<u)for(;et(i,B),0!=--s;);else 0!==i?(i!==r&&(et(i,B),s--),et(16,B),tt(s-3,2)):s<=10?(et(17,B),tt(s-3,3)):(et(18,B),tt(s-11,7));r=i,u=(s=0)===o?(a=138,3):i===o?(a=6,3):(a=7,4)}}function it(){16===H?($(W),H=W=0):8<=H&&(Q(255&W),W>>>=8,H-=8)}function rt(t,e){var i,r,o;if(q.pending_buf[G+2*V]=t>>>8&255,q.pending_buf[G+2*V+1]=255&t,q.pending_buf[D+V]=255&e,V++,0===t?O[2*e]++:(U++,t--,O[2*(n._length_code[e]+256+1)]++,F[2*n.d_code(t)]++),0==(8191&V)&&2<C){for(i=8*V,r=E-w,o=0;o<30;o++)i+=F[2*o]*(5+n.extra_dbits[o]);if(i>>>=3,U<Math.floor(V/2)&&i<Math.floor(r/2))return!0}return V===j-1}function ot(t,e){var i,r,o,s,a=0;if(0!==V)for(;i=q.pending_buf[G+2*a]<<8&65280|255&q.pending_buf[G+2*a+1],r=255&q.pending_buf[D+a],a++,0===i?et(r,t):(et((o=n._length_code[r])+256+1,t),0!==(s=n.extra_lbits[o])&&tt(r-=n.base_length[o],s),et(o=n.d_code(--i),e),0!==(s=n.extra_dbits[o])&&tt(i-=n.base_dist[o],s)),a<V;);et(256,t),z=t[513]}function st(){8<H?$(W):0<H&&Q(255&W),H=W=0}function at(t,e,n){tt(0+(n?1:0),3),function(t,e,n){st(),z=8,$(e),$(~e),q.pending_buf.set(f.subarray(t,t+e),q.pending),q.pending+=e}(t,e)}function ut(e){(function(t,e,r){var o,s,a=0;0<C?(Y.build_tree(q),X.build_tree(q),a=function(){var t;for(Z(O,Y.max_code),Z(F,X.max_code),K.build_tree(q),t=18;3<=t&&0===B[2*n.bl_order[t]+1];t--);return q.opt_len+=3*(t+1)+5+5+4,t}(),(s=q.static_len+3+7>>>3)<=(o=q.opt_len+3+7>>>3)&&(o=s)):o=s=e+5,e+4<=o&&-1!==t?at(t,e,r):s===o?(tt(2+(r?1:0),3),ot(i.static_ltree,i.static_dtree)):(tt(4+(r?1:0),3),function(t,e,i){var r;for(tt(t-257,5),tt(e-1,5),tt(i-4,4),r=0;r<i;r++)tt(B[2*n.bl_order[r]+1],3);nt(O,t-1),nt(F,e-1)}(Y.max_code+1,X.max_code+1,a+1),ot(O,F)),J(),r&&st()})(0<=w?w:-1,E-w,e),w=E,t.flush_pending()}function lt(){var e,n,i,r;do{if(0==(r=d-A-E)&&0===E&&0===A)r=l;else if(-1===r)r--;else if(l+l-262<=E){for(f.set(f.subarray(l,l+l),0),P-=l,E-=l,w-=l,i=e=v;n=65535&m[--i],m[i]=l<=n?n-l:0,0!=--e;);for(i=e=l;n=65535&p[--i],p[i]=l<=n?n-l:0,0!=--e;);r+=l}if(0===t.avail_in)return;e=t.read_buf(f,E+A,r),3<=(A+=e)&&(b=((b=255&f[E])<<S^255&f[E+1])&g)}while(A<262&&0!==t.avail_in)}function ct(t){var e,n,i=T,r=E,o=L,s=l-262<E?E-(l-262):0,a=R,u=h,c=E+258,d=f[r+o-1],m=f[r+o];I<=L&&(i>>=2),A<a&&(a=A);do{if(f[(e=t)+o]===m&&f[e+o-1]===d&&f[e]===f[r]&&f[++e]===f[r+1]){r+=2,e++;do{}while(f[++r]===f[++e]&&f[++r]===f[++e]&&f[++r]===f[++e]&&f[++r]===f[++e]&&f[++r]===f[++e]&&f[++r]===f[++e]&&f[++r]===f[++e]&&f[++r]===f[++e]&&r<c);if(n=258-(c-r),r=c-258,o<n){if(P=t,a<=(o=n))break;d=f[r+o-1],m=f[r+o]}}}while((t=65535&p[t&u])>s&&0!=--i);return o<=A?o:A}function ht(t){return t.total_in=t.total_out=0,t.msg=null,q.pending=0,q.pending_out=0,e=113,u=0,Y.dyn_tree=O,Y.stat_desc=i.static_l_desc,X.dyn_tree=F,X.stat_desc=i.static_d_desc,K.dyn_tree=B,K.stat_desc=i.static_bl_desc,H=W=0,z=8,J(),function(){var t;for(d=2*l,t=m[v-1]=0;t<v-1;t++)m[t]=0;M=o[C].max_lazy,I=o[C].good_length,R=o[C].nice_length,T=o[C].max_chain,_=L=2,b=k=A=w=E=0}(),0}q.depth=[],q.bl_count=[],q.heap=[],O=[],F=[],B=[],q.pqdownheap=function(t,e){for(var n=q.heap,i=n[e],r=e<<1;r<=q.heap_len&&(r<q.heap_len&&a(t,n[r+1],n[r],q.depth)&&r++,!a(t,i,n[r],q.depth));)n[e]=n[r],e=r,r<<=1;n[e]=i},q.deflateInit=function(t,e,n,i,o,s){return i||(i=8),o||(o=8),s||(s=0),t.msg=null,-1===e&&(e=6),o<1||9<o||8!==i||n<9||15<n||e<0||9<e||s<0||2<s?-2:(t.dstate=q,h=(l=1<<(c=n))-1,g=(v=1<<(y=o+7))-1,S=Math.floor((y+3-1)/3),f=new Uint8Array(2*l),p=[],m=[],j=1<<o+6,q.pending_buf=new Uint8Array(4*j),r=4*j,G=Math.floor(j/2),D=3*j,C=e,N=s,ht(t))},q.deflateEnd=function(){return 42!==e&&113!==e&&666!==e?-2:(q.pending_buf=null,f=p=m=null,q.dstate=null,113===e?-3:0)},q.deflateParams=function(t,e,n){var i=0;return-1===e&&(e=6),e<0||9<e||n<0||2<n?-2:(o[C].func!==o[e].func&&0!==t.total_in&&(i=t.deflate(1)),C!==e&&(M=o[C=e].max_lazy,I=o[C].good_length,R=o[C].nice_length,T=o[C].max_chain),N=n,i)},q.deflateSetDictionary=function(t,n,i){var r,o=i,s=0;if(!n||42!==e)return-2;if(o<3)return 0;for(l-262<o&&(s=i-(o=l-262)),f.set(n.subarray(s,s+o),0),w=E=o,b=((b=255&f[0])<<S^255&f[1])&g,r=0;r<=o-3;r++)p[r&h]=m[b=(b<<S^255&f[r+2])&g],m[b]=r;return 0},q.deflate=function(n,a){var d,y,T,I,R;if(4<a||a<0)return-2;if(!n.next_out||!n.next_in&&0!==n.avail_in||666===e&&4!==a)return n.msg=s[4],-2;if(0===n.avail_out)return n.msg=s[7],-5;if(t=n,I=u,u=a,42===e&&(y=8+(c-8<<4)<<8,3<(T=(C-1&255)>>1)&&(T=3),y|=T<<6,0!==E&&(y|=32),e=113,function(t){Q(t>>8&255),Q(255&t)}(y+=31-y%31)),0!==q.pending){if(t.flush_pending(),0===t.avail_out)return u=-1,0}else if(0===t.avail_in&&a<=I&&4!==a)return t.msg=s[7],-5;if(666===e&&0!==t.avail_in)return n.msg=s[7],-5;if(0!==t.avail_in||0!==A||0!==a&&666!==e){switch(R=-1,o[C].func){case 0:R=function(e){var n,i=65535;for(r-5<i&&(i=r-5);;){if(A<=1){if(lt(),0===A&&0===e)return 0;if(0===A)break}if(E+=A,n=w+i,((A=0)===E||n<=E)&&(A=E-n,E=n,ut(!1),0===t.avail_out))return 0;if(l-262<=E-w&&(ut(!1),0===t.avail_out))return 0}return ut(4===e),0===t.avail_out?4===e?2:0:4===e?3:1}(a);break;case 1:R=function(e){for(var n,i=0;;){if(A<262){if(lt(),A<262&&0===e)return 0;if(0===A)break}if(3<=A&&(i=65535&m[b=(b<<S^255&f[E+2])&g],p[E&h]=m[b],m[b]=E),0!==i&&(E-i&65535)<=l-262&&2!==N&&(_=ct(i)),3<=_)if(n=rt(E-P,_-3),A-=_,_<=M&&3<=A){for(_--;b=(b<<S^255&f[2+ ++E])&g,i=65535&m[b],p[E&h]=m[b],m[b]=E,0!=--_;);E++}else E+=_,_=0,b=((b=255&f[E])<<S^255&f[E+1])&g;else n=rt(0,255&f[E]),A--,E++;if(n&&(ut(!1),0===t.avail_out))return 0}return ut(4===e),0===t.avail_out?4===e?2:0:4===e?3:1}(a);break;case 2:R=function(e){for(var n,i,r=0;;){if(A<262){if(lt(),A<262&&0===e)return 0;if(0===A)break}if(3<=A&&(r=65535&m[b=(b<<S^255&f[E+2])&g],p[E&h]=m[b],m[b]=E),L=_,x=P,_=2,0!==r&&L<M&&(E-r&65535)<=l-262&&(2!==N&&(_=ct(r)),_<=5&&(1===N||3===_&&4096<E-P)&&(_=2)),3<=L&&_<=L){for(i=E+A-3,n=rt(E-1-x,L-3),A-=L-1,L-=2;++E<=i&&(r=65535&m[b=(b<<S^255&f[E+2])&g],p[E&h]=m[b],m[b]=E),0!=--L;);if(k=0,_=2,E++,n&&(ut(!1),0===t.avail_out))return 0}else if(0!==k){if((n=rt(0,255&f[E-1]))&&ut(!1),E++,A--,0===t.avail_out)return 0}else k=1,E++,A--}return 0!==k&&(n=rt(0,255&f[E-1]),k=0),ut(4===e),0===t.avail_out?4===e?2:0:4===e?3:1}(a)}if(2!==R&&3!==R||(e=666),0===R||2===R)return 0===t.avail_out&&(u=-1),0;if(1===R){if(1===a)tt(2,3),et(256,i.static_ltree),it(),1+z+10-H<9&&(tt(2,3),et(256,i.static_ltree),it()),z=7;else if(at(0,0,!1),3===a)for(d=0;d<v;d++)m[d]=0;if(t.flush_pending(),0===t.avail_out)return u=-1,0}}return 4!==a?0:1}}function l(){this.next_in_index=0,this.next_out_index=0,this.avail_in=0,this.total_in=0,this.avail_out=0,this.total_out=0}l.prototype={deflateInit:function(t,e){return this.dstate=new u,e||(e=15),this.dstate.deflateInit(this,t,e)},deflate:function(t){return this.dstate?this.dstate.deflate(this,t):-2},deflateEnd:function(){if(!this.dstate)return-2;var t=this.dstate.deflateEnd();return this.dstate=null,t},deflateParams:function(t,e){return this.dstate?this.dstate.deflateParams(this,t,e):-2},deflateSetDictionary:function(t,e){return this.dstate?this.dstate.deflateSetDictionary(this,t,e):-2},read_buf:function(t,e,n){var i=this.avail_in;return n<i&&(i=n),0===i?0:(this.avail_in-=i,t.set(this.next_in.subarray(this.next_in_index,this.next_in_index+i),e),this.next_in_index+=i,this.total_in+=i,i)},flush_pending:function(){var t=this,e=t.dstate.pending;e>t.avail_out&&(e=t.avail_out),0!==e&&(t.next_out.set(t.dstate.pending_buf.subarray(t.dstate.pending_out,t.dstate.pending_out+e),t.next_out_index),t.next_out_index+=e,t.dstate.pending_out+=e,t.total_out+=e,t.avail_out-=e,t.dstate.pending-=e,0===t.dstate.pending&&(t.dstate.pending_out=0))}};var c=t.zip||t;c.Deflater=c._jzlib_Deflater=function(t){var e=new l,n=new Uint8Array(512),i=t?t.level:-1;void 0===i&&(i=-1),e.deflateInit(i),e.next_out=n,this.append=function(t,i){var r,o=[],s=0,a=0,u=0;if(t.length){e.next_in_index=0,e.next_in=t,e.avail_in=t.length;do{if(e.next_out_index=0,e.avail_out=512,0!==e.deflate(0))throw new Error("deflating: "+e.msg);e.next_out_index&&o.push(512===e.next_out_index?new Uint8Array(n):new Uint8Array(n.subarray(0,e.next_out_index))),u+=e.next_out_index,i&&0<e.next_in_index&&e.next_in_index!==s&&(i(e.next_in_index),s=e.next_in_index)}while(0<e.avail_in||0===e.avail_out);return r=new Uint8Array(u),o.forEach((function(t){r.set(t,a),a+=t.length})),r}},this.flush=function(){var t,i,r=[],o=0,s=0;do{if(e.next_out_index=0,e.avail_out=512,1!==(t=e.deflate(4))&&0!==t)throw new Error("deflating: "+e.msg);0<512-e.avail_out&&r.push(new Uint8Array(n.subarray(0,e.next_out_index))),s+=e.next_out_index}while(0<e.avail_in||0===e.avail_out);return e.deflateEnd(),i=new Uint8Array(s),r.forEach((function(t){i.set(t,o),o+=t.length})),i}}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||void 0!==i&&i||Function('return typeof this === "object" && this.content')()||Function("return this")()),("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||void 0!==i&&i||Function('return typeof this === "object" && this.content')()||Function("return this")()).RGBColor=function(t){var e;t=t||"",this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],i=0;i<n.length;i++){var r=n[i].process,o=n[i].re.exec(t);o&&(e=r(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:255<this.r?255:this.r,this.g=this.g<0||isNaN(this.g)?0:255<this.g?255:this.g,this.b=this.b<0||isNaN(this.b)?0:255<this.b?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n}},function(t){function e(t){var e;if(this.rawData=t,e=this.contents=new n(t),this.contents.pos=4,"ttcf"===e.readString(4))throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new V(this),this.registerTTF()}t.API.TTFFont=(e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new o(this.contents),this.head=new h(this),this.name=new k(this),this.cmap=new m(this),this.toUnicode={},this.hhea=new v(this),this.maxp=new P(this),this.hmtx=new L(this),this.post=new w(this),this.os2=new g(this),this.loca=new B(this),this.glyf=new C(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,e,n,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.bbox).length;t<e;t++)i.push(Math.round(n[t]*this.scaleFactor));return i}).call(this),this.stemV=0,this.post.exists?(e=255&(n=this.post.italic_angle),0!=(32768&(t=n>>16))&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+e)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(i=this.familyClass)||2===i||3===i||4===i||5===i||7===i,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var e;return(null!=(e=this.cmap.unicode)?e.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},e.prototype.widthOfString=function(t,e,n){var i,r,o,s;for(r=o=0,s=(t=""+t).length;0<=s?r<s:s<r;r=0<=s?++r:--r)i=t.charCodeAt(r),o+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/e)||0;return o*(e/1e3)},e.prototype.lineHeight=function(t,e){return null==e&&(e=!1),(this.ascender+(e?this.lineGap:0)-this.decender)/1e3*t},e);var n=(i.prototype.readByte=function(){return this.data[this.pos++]},i.prototype.writeByte=function(t){return this.data[this.pos++]=t},i.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},i.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},i.prototype.readInt32=function(){var t;return 2147483648<=(t=this.readUInt32())?t-4294967296:t},i.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},i.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},i.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},i.prototype.readInt16=function(){var t;return 32768<=(t=this.readUInt16())?t-65536:t},i.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},i.prototype.readString=function(t){var e,n;for(n=[],e=0;0<=t?e<t:t<e;e=0<=t?++e:--e)n[e]=String.fromCharCode(this.readByte());return n.join("")},i.prototype.writeString=function(t){var e,n,i;for(i=[],e=0,n=t.length;0<=n?e<n:n<e;e=0<=n?++e:--e)i.push(this.writeByte(t.charCodeAt(e)));return i},i.prototype.readShort=function(){return this.readInt16()},i.prototype.writeShort=function(t){return this.writeInt16(t)},i.prototype.readLongLong=function(){var t,e,n,i,r,o,s,a;return t=this.readByte(),e=this.readByte(),n=this.readByte(),i=this.readByte(),r=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^r)+65536*(255^o)+256*(255^s)+(255^a)+1):72057594037927940*t+281474976710656*e+1099511627776*n+4294967296*i+16777216*r+65536*o+256*s+a},i.prototype.writeLongLong=function(t){var e,n;return e=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},i.prototype.readInt=function(){return this.readInt32()},i.prototype.writeInt=function(t){return this.writeInt32(t)},i.prototype.read=function(t){var e,n;for(e=[],n=0;0<=t?n<t:t<n;n=0<=t?++n:--n)e.push(this.readByte());return e},i.prototype.write=function(t){var e,n,i;for(i=[],e=0,n=t.length;e<n;e++)i.push(this.writeByte(t[e]));return i},i);function i(t){this.data=null!=t?t:[],this.pos=0,this.length=this.data.length}var r,o=(s.prototype.encode=function(t){var e,i,o,s,a,u,l,c,h,f,d,p;for(p in f=Object.keys(t).length,a=Math.log(2),c=16*Math.floor(Math.log(f)/a),o=Math.floor(c/a),l=16*f-c,(i=new n).writeInt(this.scalarType),i.writeShort(f),i.writeShort(c),i.writeShort(o),i.writeShort(l),u=i.pos+16*f,s=null,d=[],t)for(h=t[p],i.writeString(p),i.writeInt(r(h)),i.writeInt(u),i.writeInt(h.length),d=d.concat(h),"head"===p&&(s=u),u+=h.length;u%4;)d.push(0),u++;return i.write(d),e=2981146554-r(i.data),i.pos=s+8,i.writeUInt32(e),i.data},r=function(t){var e,i,r,o;for(t=M.call(t);t.length%4;)t.push(0);for(r=new n(t),e=i=0,o=t.length;e<o;e=e+=4)i+=r.readUInt32();return 4294967295&i},s);function s(t){var e,n,i;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},n=0,i=this.tableCount;0<=i?n<i:i<n;n=0<=i?++n:--n)e={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[e.tag]=e}function a(t,e){for(var n in e)l.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t}var u,l={}.hasOwnProperty;function c(t){var e;this.file=t,this.exists=!!(e=this.file.directory.tables[this.tag]),e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}c.prototype.parse=function(){},c.prototype.encode=function(){},c.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null};var h=(a(f,u=c),f.prototype.tag="head",f.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},f.prototype.encode=function(t){var e;return(e=new n).writeInt(this.version),e.writeInt(this.revision),e.writeInt(this.checkSumAdjustment),e.writeInt(this.magicNumber),e.writeShort(this.flags),e.writeShort(this.unitsPerEm),e.writeLongLong(this.created),e.writeLongLong(this.modified),e.writeShort(this.xMin),e.writeShort(this.yMin),e.writeShort(this.xMax),e.writeShort(this.yMax),e.writeShort(this.macStyle),e.writeShort(this.lowestRecPPEM),e.writeShort(this.fontDirectionHint),e.writeShort(t),e.writeShort(this.glyphDataFormat),e.data},f);function f(){return f.__super__.constructor.apply(this,arguments)}var d=(p.encode=function(t,e){var i,r,o,s,a,u,l,c,h,f,d,p,m,b,v,y,g,S,w,_,x,k,E,P,A,L,T,M,C,N,I,R,O,F,B,D,j,V,G,U,z,W,H,q,Y;switch(T=new n,s=Object.keys(t).sort((function(t,e){return t-e})),e){case"macroman":for(m=0,b=function(){var t=[];for(p=0;p<256;++p)t.push(0);return t}(),y={0:0},o={},M=0,R=s.length;M<R;M++)null==y[W=t[r=s[M]]]&&(y[W]=++m),o[r]={old:t[r],new:y[t[r]]},b[r]=y[t[r]];return T.writeUInt16(1),T.writeUInt16(0),T.writeUInt32(12),T.writeUInt16(0),T.writeUInt16(262),T.writeUInt16(0),T.write(b),{charMap:o,subtable:T.data,maxGlyphID:m+1};case"unicode":for(A=[],h=[],y={},i={},v=l=null,C=g=0,O=s.length;C<O;C++)null==y[S=t[r=s[C]]]&&(y[S]=++g),i[r]={old:S,new:y[S]},a=y[S]-r,null!=v&&a===l||(v&&h.push(v),A.push(r),l=a),v=r;for(v&&h.push(v),h.push(65535),A.push(65535),E=2*(k=A.length),x=2*Math.pow(Math.log(k)/Math.LN2,2),f=Math.log(x/2)/Math.LN2,_=2*k-x,u=[],w=[],d=[],p=N=0,F=A.length;N<F;p=++N){if(c=h[p],65535===(P=A[p])){u.push(0),w.push(0);break}if(32768<=P-(L=i[P].new))for(u.push(0),w.push(2*(d.length+k-p)),r=I=P;P<=c?I<=c:c<=I;r=P<=c?++I:--I)d.push(i[r].new);else u.push(L-P),w.push(0)}for(T.writeUInt16(3),T.writeUInt16(1),T.writeUInt32(12),T.writeUInt16(4),T.writeUInt16(16+8*k+2*d.length),T.writeUInt16(0),T.writeUInt16(E),T.writeUInt16(x),T.writeUInt16(f),T.writeUInt16(_),U=0,B=h.length;U<B;U++)T.writeUInt16(r=h[U]);for(T.writeUInt16(0),z=0,D=A.length;z<D;z++)T.writeUInt16(r=A[z]);for(H=0,j=u.length;H<j;H++)T.writeUInt16(a=u[H]);for(q=0,V=w.length;q<V;q++)T.writeUInt16(w[q]);for(Y=0,G=d.length;Y<G;Y++)T.writeUInt16(m=d[Y]);return{charMap:i,subtable:T.data,maxGlyphID:g+1}}},p);function p(t,e){var n,i,r,o,s,a,u,l,c,h,f,d,p,m,b,v,y;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),c=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(a=0;a<256;++a)this.codeMap[a]=t.readByte();break;case 4:for(f=t.readUInt16(),h=f/2,t.pos+=6,r=function(){var e,n;for(n=[],a=e=0;0<=h?e<h:h<e;a=0<=h?++e:--e)n.push(t.readUInt16());return n}(),t.pos+=2,p=function(){var e,n;for(n=[],a=e=0;0<=h?e<h:h<e;a=0<=h?++e:--e)n.push(t.readUInt16());return n}(),u=function(){var e,n;for(n=[],a=e=0;0<=h?e<h:h<e;a=0<=h?++e:--e)n.push(t.readUInt16());return n}(),l=function(){var e,n;for(n=[],a=e=0;0<=h?e<h:h<e;a=0<=h?++e:--e)n.push(t.readUInt16());return n}(),i=(this.length-t.pos+this.offset)/2,s=function(){var e,n;for(n=[],a=e=0;0<=i?e<i:i<e;a=0<=i?++e:--e)n.push(t.readUInt16());return n}(),a=b=0,y=r.length;b<y;a=++b)for(m=r[a],n=v=d=p[a];d<=m?v<=m:m<=v;n=d<=m?++v:--v)0===l[a]?o=n+u[a]:0!==(o=s[l[a]/2+(n-d)-(h-a)]||0)&&(o+=u[a]),this.codeMap[n]=65535&o}t.pos=c}var m=(a(b,u),b.prototype.tag="cmap",b.prototype.parse=function(t){var e,n,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:i<n;n=0<=i?++n:--n)e=new d(t,this.offset),this.tables.push(e),!e.isUnicode||null==this.unicode&&(this.unicode=e);return!0},b.encode=function(t,e){var i,r;return null==e&&(e="macroman"),i=d.encode(t,e),(r=new n).writeUInt16(0),r.writeUInt16(1),i.table=r.data.concat(i.subtable),i},b);function b(){return b.__super__.constructor.apply(this,arguments)}var v=(a(y,u),y.prototype.tag="hhea",y.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},y);function y(){return y.__super__.constructor.apply(this,arguments)}var g=(a(S,u),S.prototype.tag="OS/2",S.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var e,n;for(n=[],e=0;e<10;++e)n.push(t.readByte());return n}(),this.charRange=function(){var e,n;for(n=[],e=0;e<4;++e)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),0<this.version&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var e,n;for(n=[],e=0;e<2;e=++e)n.push(t.readInt());return n}(),1<this.version))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},S);function S(){return S.__super__.constructor.apply(this,arguments)}var w=(a(_,u),_.prototype.tag="post",_.prototype.parse=function(t){var e,n,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var r;for(n=t.readUInt16(),this.glyphNameIndex=[],r=0;0<=n?r<n:n<r;r=0<=n?++r:--r)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)e=t.readByte(),i.push(this.names.push(t.readString(e)));return i;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 196608:break;case 262144:return this.map=(function(){var e,n,i;for(i=[],r=e=0,n=this.file.maxp.numGlyphs;0<=n?e<n:n<e;r=0<=n?++e:--e)i.push(t.readUInt32());return i}).call(this)}},_);function _(){return _.__super__.constructor.apply(this,arguments)}var x=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},k=(a(E,u),E.prototype.tag="name",E.prototype.parse=function(t){var e,n,i,r,o,s,a,u,l,c,h;for(t.pos=this.offset,t.readShort(),e=t.readShort(),s=t.readShort(),n=[],r=0;0<=e?r<e:e<r;r=0<=e?++r:--r)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+s+t.readShort()});for(a={},r=l=0,c=n.length;l<c;r=++l)t.pos=(i=n[r]).offset,u=t.readString(i.length),o=new x(u,i),null==a[h=i.nameID]&&(a[h]=[]),a[i.nameID].push(o);this.strings=a,this.copyright=a[0],this.fontFamily=a[1],this.fontSubfamily=a[2],this.uniqueSubfamily=a[3],this.fontName=a[4],this.version=a[5];try{this.postscriptName=a[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(t){this.postscriptName=a[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=a[7],this.manufacturer=a[8],this.designer=a[9],this.description=a[10],this.vendorUrl=a[11],this.designerUrl=a[12],this.license=a[13],this.licenseUrl=a[14],this.preferredFamily=a[15],this.preferredSubfamily=a[17],this.compatibleFull=a[18],this.sampleText=a[19]},E);function E(){return E.__super__.constructor.apply(this,arguments)}var P=(a(A,u),A.prototype.tag="maxp",A.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},A);function A(){return A.__super__.constructor.apply(this,arguments)}var L=(a(T,u),T.prototype.tag="hmtx",T.prototype.parse=function(t){var e,n,i,r,o,s;for(t.pos=this.offset,this.metrics=[],e=0,o=this.file.hhea.numberOfMetrics;0<=o?e<o:o<e;e=0<=o?++e:--e)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,r;for(r=[],e=n=0;0<=i?n<i:i<n;e=0<=i?++n:--n)r.push(t.readInt16());return r}(),this.widths=(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.metrics).length;t<e;t++)i.push(n[t].advance);return i}).call(this),n=this.widths[this.widths.length-1],s=[],e=r=0;0<=i?r<i:i<r;e=0<=i?++r:--r)s.push(this.widths.push(n));return s},T.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},T);function T(){return T.__super__.constructor.apply(this,arguments)}var M=[].slice,C=(a(N,u),N.prototype.tag="glyf",N.prototype.parse=function(){return this.cache={}},N.prototype.glyphFor=function(t){var e,i,r,o,s,a,u,l,c,h;return t in this.cache?this.cache[t]:(e=this.file.contents,i=(o=this.file.loca).indexOf(t),0===(r=o.lengthOf(t))?this.cache[t]=null:(e.pos=this.offset+i,s=(a=new n(e.read(r))).readShort(),l=a.readShort(),h=a.readShort(),u=a.readShort(),c=a.readShort(),this.cache[t]=-1===s?new O(a,l,h,u,c):new I(a,s,l,h,u,c),this.cache[t]))},N.prototype.encode=function(t,e,n){var i,r,o,s,a;for(o=[],r=[],s=0,a=e.length;s<a;s++)i=t[e[s]],r.push(o.length),i&&(o=o.concat(i.encode(n)));return r.push(o.length),{table:o,offsets:r}},N);function N(){return N.__super__.constructor.apply(this,arguments)}var I=(R.prototype.encode=function(){return this.raw.data},R);function R(t,e,n,i,r,o){this.raw=t,this.numberOfContours=e,this.xMin=n,this.yMin=i,this.xMax=r,this.yMax=o,this.compound=!1}var O=(F.prototype.encode=function(){var t,e,i;for(e=new n(M.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)e.pos=this.glyphOffsets[t];return e.data},F);function F(t,e,n,i,r){var o,s;for(this.raw=t,this.xMin=e,this.yMin=n,this.xMax=i,this.yMax=r,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;s=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readShort()),32&s;)o.pos+=1&s?4:2,128&s?o.pos+=8:64&s?o.pos+=4:8&s&&(o.pos+=2)}var B=(a(D,u),D.prototype.tag="loca",D.prototype.parse=function(t){var e;return t.pos=this.offset,this.offsets=0===this.file.head.indexToLocFormat?(function(){var n,i;for(i=[],e=0,n=this.length;e<n;e+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var n,i;for(i=[],e=0,n=this.length;e<n;e+=4)i.push(t.readUInt32());return i}).call(this)},D.prototype.indexOf=function(t){return this.offsets[t]},D.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},D.prototype.encode=function(t,e){for(var n=new Uint32Array(this.offsets.length),i=0,r=0,o=0;o<n.length;++o)if(n[o]=i,r<e.length&&e[r]==o){++r,n[o]=i;var s=this.offsets[o+1]-this.offsets[o];0<s&&(i+=s)}for(var a=new Array(4*n.length),u=0;u<n.length;++u)a[4*u+3]=255&n[u],a[4*u+2]=(65280&n[u])>>8,a[4*u+1]=(16711680&n[u])>>16,a[4*u]=(4278190080&n[u])>>24;return a},D);function D(){return D.__super__.constructor.apply(this,arguments)}var j,V=(G.prototype.generateCmap=function(){var t,e,n,i;for(e in n=this.font.cmap.tables[0].codeMap,t={},i=this.subset)t[e]=n[i[e]];return t},G.prototype.glyphsFor=function(t){var e,n,i,r,o,s,a;for(i={},o=0,s=t.length;o<s;o++)i[r=t[o]]=this.font.glyf.glyphFor(r);for(r in e=[],i)(null!=(n=i[r])?n.compound:void 0)&&e.push.apply(e,n.glyphIDs);if(0<e.length)for(r in a=this.glyphsFor(e))i[r]=n=a[r];return i},G.prototype.encode=function(t,e){var n,i,r,o,s,a,u,l,c,h,f,d,p,b;for(i in n=m.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),h={0:0},b=n.charMap)h[(s=b[i]).old]=s.new;for(f in c=n.maxGlyphID,o)f in h||(h[f]=c++);return u=function(t){var e,n;for(e in n={},t)n[t[e]]=e;return n}(h),l=Object.keys(u).sort((function(t,e){return t-e})),d=function(){var t,e,n;for(n=[],t=0,e=l.length;t<e;t++)n.push(u[l[t]]);return n}(),r=this.font.glyf.encode(o,d,h),a=this.font.loca.encode(r.offsets,d),p={cmap:this.font.cmap.raw(),glyf:r.table,loca:a,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(p["OS/2"]=this.font.os2.raw()),this.font.directory.encode(p)},G);function G(t){this.font=t,this.subset={},this.unicodes={},this.next=33}function U(){}t.API.PDFObject=(j=function(t,e){return(Array(e+1).join("0")+t).slice(-e)},U.convert=function(t){var e,n;if(Array.isArray(t))return"["+function(){var e,n,i;for(i=[],e=0,n=t.length;e<n;e++)i.push(U.convert(t[e]));return i}().join(" ")+"]";if("string"==typeof t)return"/"+t;if(null!=t?t.isString:void 0)return"("+t+")";if(t instanceof Date)return"(D:"+j(t.getUTCFullYear(),4)+j(t.getUTCMonth(),2)+j(t.getUTCDate(),2)+j(t.getUTCHours(),2)+j(t.getUTCMinutes(),2)+j(t.getUTCSeconds(),2)+"Z)";if("[object Object]"!=={}.toString.call(t))return""+t;for(e in n=["<<"],t)n.push("/"+e+" "+U.convert(t[e]));return n.push(">>"),n.join("\n")},U)}(K),(X="undefined"!=typeof self&&self||"undefined"!=typeof window&&window||void 0!==i&&i||Function('return typeof this === "object" && this.content')()||Function("return this")()).PNG=function(){var t,e,n;function i(t){var e,n,i,r,o,s,a,u,l,c,h,f,d;for(this.data=t,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},o=null;;){switch(e=this.readUInt32(),u=(function(){var t,e;for(e=[],t=0;t<4;++t)e.push(String.fromCharCode(this.data[this.pos++]));return e}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(e);break;case"fcTL":o&&this.animation.frames.push(o),this.pos+=4,o={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},r=this.readUInt16(),i=this.readUInt16()||100,o.delay=1e3*r/i,o.disposeOp=this.data[this.pos++],o.blendOp=this.data[this.pos++],o.data=[];break;case"IDAT":case"fdAT":for("fdAT"===u&&(this.pos+=4,e-=4),t=(null!=o?o.data:void 0)||this.imgData,h=0;0<=e?h<e:e<h;0<=e?++h:--h)t.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(n=this.palette.length/3,this.transparency.indexed=this.read(e),this.transparency.indexed.length>n)throw new Error("More transparent colors than palette size");if(0<(l=n-this.transparency.indexed.length))for(f=0;0<=l?f<l:l<f;0<=l?++f:--f)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(e)[0];break;case 2:this.transparency.rgb=this.read(e)}break;case"tEXt":s=(c=this.read(e)).indexOf(0),a=String.fromCharCode.apply(String,c.slice(0,s)),this.text[a]=String.fromCharCode.apply(String,c.slice(s+1));break;case"IEND":return o&&this.animation.frames.push(o),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=4===(d=this.colorType)||6===d,this.pixelBitlength=this.bits*(this.colors+(this.hasAlphaChannel?1:0)),this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=e}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}function r(){if("[object Window]"!==Object.prototype.toString.call(X))return!1;try{e=X.document.createElement("canvas"),n=e.getContext("2d")}catch(t){return!1}return!0}return i.prototype.read=function(t){var e,n;for(n=[],e=0;0<=t?e<t:t<e;0<=t?++e:--e)n.push(this.data[this.pos++]);return n},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(t){var e=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*e),i=0,r=this;if(null==t&&(t=this.imgData),0===t.length)return new Uint8Array(0);function o(o,s,a,u){var l,c,h,f,d,p,m,b,v,y,g,S,w,_,x,k,E,P,A,L,T=Math.ceil((r.width-o)/a),M=Math.ceil((r.height-s)/u),C=r.width==T&&r.height==M;for(w=e*T,g=C?n:new Uint8Array(w*M),p=t.length,c=S=0;S<M&&i<p;){switch(t[i++]){case 0:for(f=k=0;k<w;f=k+=1)g[c++]=t[i++];break;case 1:for(f=E=0;E<w;f=E+=1)l=t[i++],d=f<e?0:g[c-e],g[c++]=(l+d)%256;break;case 2:for(f=P=0;P<w;f=P+=1)l=t[i++],h=(f-f%e)/e,g[c++]=((_=S&&g[(S-1)*w+h*e+f%e])+l)%256;break;case 3:for(f=A=0;A<w;f=A+=1)l=t[i++],h=(f-f%e)/e,d=f<e?0:g[c-e],_=S&&g[(S-1)*w+h*e+f%e],g[c++]=(l+Math.floor((d+_)/2))%256;break;case 4:for(f=L=0;L<w;f=L+=1)l=t[i++],h=(f-f%e)/e,0===S?_=x=0:(_=g[(S-1)*w+h*e+f%e],x=h&&g[(S-1)*w+(h-1)*e+f%e]),m=(d=f<e?0:g[c-e])+_-x,b=Math.abs(m-d),v=Math.abs(m-_),y=Math.abs(m-x),g[c++]=(l+(b<=v&&b<=y?d:v<=y?_:x))%256;break;default:throw new Error("Invalid filter algorithm: "+t[i-1])}if(!C){var N=((s+S*u)*r.width+o)*e,I=S*w;for(f=0;f<T;f+=1){for(var R=0;R<e;R+=1)n[N++]=g[I++];N+=(a-1)*e}}S++}}return t=(t=new gt(t)).getBytes(),1==r.interlaceMethod?(o(0,0,8,8),o(4,0,8,8),o(0,4,4,8),o(2,0,4,4),o(0,2,2,4),o(1,0,2,2),o(0,1,1,2)):o(0,0,1,1),n},i.prototype.decodePalette=function(){var t,e,n,i,r,o,s,a,u;for(n=this.palette,o=this.transparency.indexed||[],r=new Uint8Array((o.length||0)+n.length),e=s=t=i=0,a=n.length;s<a;e=s+=3)r[i++]=n[e],r[i++]=n[e+1],r[i++]=n[e+2],r[i++]=null!=(u=o[t++])?u:255;return r},i.prototype.copyToImageData=function(t,e){var n,i,r,o,s,a,u,l,c,h,f;if(i=this.colors,c=null,n=this.hasAlphaChannel,this.palette.length&&(c=null!=(f=this._decodedPalette)?f:this._decodedPalette=this.decodePalette(),i=4,n=!0),l=(r=t.data||t).length,s=c||e,o=a=0,1===i)for(;o<l;)u=c?4*e[o/4]:a,h=s[u++],r[o++]=h,r[o++]=h,r[o++]=h,r[o++]=n?s[u++]:255,a=u;else for(;o<l;)u=c?4*e[o/4]:a,r[o++]=s[u++],r[o++]=s[u++],r[o++]=s[u++],r[o++]=n?s[u++]:255,a=u},i.prototype.decode=function(){var t;return t=new Uint8Array(this.width*this.height*4),this.copyToImageData(t,this.decodePixels()),t},r(),t=function(t){if(!0!==r())throw new Error("This method requires a Browser with Canvas-capability.");var i;return n.width=t.width,n.height=t.height,n.clearRect(0,0,t.width,t.height),n.putImageData(t,0,0),(i=new Image).src=e.toDataURL(),i},i.prototype.decodeFrames=function(e){var n,i,r,o,s,a,u,l;if(this.animation){for(l=[],i=s=0,a=(u=this.animation.frames).length;s<a;i=++s)r=e.createImageData((n=u[i]).width,n.height),o=this.decodePixels(new Uint8Array(n.data)),this.copyToImageData(r,o),n.imageData=r,l.push(n.image=t(r));return l}},i.prototype.renderFrame=function(t,e){var n,i,r;return n=(i=this.animation.frames)[e],r=i[e-1],0===e&&t.clearRect(0,0,this.width,this.height),1===(null!=r?r.disposeOp:void 0)?t.clearRect(r.xOffset,r.yOffset,r.width,r.height):2===(null!=r?r.disposeOp:void 0)&&t.putImageData(r.imageData,r.xOffset,r.yOffset),0===n.blendOp&&t.clearRect(n.xOffset,n.yOffset,n.width,n.height),t.drawImage(n.image,n.xOffset,n.yOffset)},i.prototype.animate=function(t){var e,n,i,r,o,s,a=this;return n=0,r=(s=this.animation).numFrames,i=s.frames,o=s.numPlays,(e=function(){var s,u;if(s=n++%r,u=i[s],a.renderFrame(t,s),1<r&&n/r<o)return a.animation._timeout=setTimeout(e,u.delay)})()},i.prototype.stopAnimation=function(){var t;return clearTimeout(null!=(t=this.animation)?t._timeout:void 0)},i.prototype.render=function(t){var e,n;return t._png&&t._png.stopAnimation(),t._png=this,t.width=this.width,t.height=this.height,e=t.getContext("2d"),this.animation?(this.decodeFrames(e),this.animate(e)):(n=e.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),e.putImageData(n,0,0))},i}();var vt=(yt.prototype={ensureBuffer:function(t){var e=this.buffer,n=e?e.byteLength:0;if(t<n)return e;for(var i=512;i<t;)i<<=1;for(var r=new Uint8Array(i),o=0;o<n;++o)r[o]=e[o];return this.buffer=r},getByte:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(t){var e=this.pos;if(t){this.ensureBuffer(e+t);for(var n=e+t;!this.eof&&this.bufferLength<n;)this.readBlock();var i=this.bufferLength;i<n&&(n=i)}else{for(;!this.eof;)this.readBlock();n=this.bufferLength}return this.pos=n,this.buffer.subarray(e,n)},lookChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(t,e,n){for(var i=t+e;this.bufferLength<=i&&!this.eof;)this.readBlock();return new Stream(this.buffer,t,e,n)},skip:function(t){t||(t=1),this.pos+=t},reset:function(){this.pos=0}},yt);function yt(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}var gt=("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||void 0!==i&&i||Function('return typeof this === "object" && this.content')()||Function("return this")()).FlateStream=function(){if("undefined"!=typeof Uint32Array){var t=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),e=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),n=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),i=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],r=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];return(s.prototype=Object.create(vt.prototype)).getBits=function(t){for(var e,n=this.codeSize,i=this.codeBuf,r=this.bytes,s=this.bytesPos;n<t;)void 0===(e=r[s++])&&o("Bad encoding in flate stream"),i|=e<<n,n+=8;return e=i&(1<<t)-1,this.codeBuf=i>>t,this.codeSize=n-=t,this.bytesPos=s,e},s.prototype.getCode=function(t){for(var e=t[0],n=t[1],i=this.codeSize,r=this.codeBuf,s=this.bytes,a=this.bytesPos;i<n;){var u;void 0===(u=s[a++])&&o("Bad encoding in flate stream"),r|=u<<i,i+=8}var l=e[r&(1<<n)-1],c=l>>16,h=65535&l;return(0==i||i<c||0==c)&&o("Bad encoding in flate stream"),this.codeBuf=r>>c,this.codeSize=i-c,this.bytesPos=a,h},s.prototype.generateHuffmanTable=function(t){for(var e=t.length,n=0,i=0;i<e;++i)t[i]>n&&(n=t[i]);for(var r=1<<n,o=new Uint32Array(r),s=1,a=0,u=2;s<=n;++s,a<<=1,u<<=1)for(var l=0;l<e;++l)if(t[l]==s){var c=0,h=a;for(i=0;i<s;++i)c=c<<1|1&h,h>>=1;for(i=c;i<r;i+=u)o[i]=s<<16|l;++a}return[o,n]},s.prototype.readBlock=function(){function s(t,e,n,i,r){for(var o=t.getBits(n)+i;0<o--;)e[p++]=r}var a=this.getBits(3);if(1&a&&(this.eof=!0),0!=(a>>=1)){var u,l;if(1==a)u=i,l=r;else if(2==a){for(var c=this.getBits(5)+257,h=this.getBits(5)+1,f=this.getBits(4)+4,d=Array(t.length),p=0;p<f;)d[t[p++]]=this.getBits(3);for(var m=this.generateHuffmanTable(d),b=0,v=(p=0,c+h),y=new Array(v);p<v;){var g=this.getCode(m);16==g?s(this,y,2,3,b):17==g?s(this,y,3,3,b=0):18==g?s(this,y,7,11,b=0):y[p++]=b=g}u=this.generateHuffmanTable(y.slice(0,c)),l=this.generateHuffmanTable(y.slice(c,v))}else o("Unknown block type in flate stream");for(var S=(N=this.buffer)?N.length:0,w=this.bufferLength;;){var _=this.getCode(u);if(_<256)S<=w+1&&(S=(N=this.ensureBuffer(w+1)).length),N[w++]=_;else{if(256==_)return void(this.bufferLength=w);var x=(_=e[_-=257])>>16;0<x&&(x=this.getBits(x)),b=(65535&_)+x,_=this.getCode(l),0<(x=(_=n[_])>>16)&&(x=this.getBits(x));var k=(65535&_)+x;S<=w+b&&(S=(N=this.ensureBuffer(w+b)).length);for(var E=0;E<b;++E,++w)N[w]=N[w-k]}}}else{var P,A=this.bytes,L=this.bytesPos;void 0===(P=A[L++])&&o("Bad block header in flate stream");var T=P;void 0===(P=A[L++])&&o("Bad block header in flate stream"),T|=P<<8,void 0===(P=A[L++])&&o("Bad block header in flate stream");var M=P;void 0===(P=A[L++])&&o("Bad block header in flate stream"),(M|=P<<8)!=(65535&~T)&&o("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var C=this.bufferLength,N=this.ensureBuffer(C+T),I=C+T;this.bufferLength=I;for(var R=C;R<I;++R){if(void 0===(P=A[L++])){this.eof=!0;break}N[R]=P}this.bytesPos=L}},s}function o(t){throw new Error(t)}function s(t){var e=0,n=t[e++],i=t[e++];-1!=n&&-1!=i||o("Invalid header in flate stream"),8!=(15&n)&&o("Unknown compression method in flate stream"),((n<<8)+i)%31!=0&&o("Bad FCHECK in flate stream"),32&i&&o("FDICT bit set in flate stream"),this.bytes=t,this.bytesPos=2,this.codeSize=0,this.codeBuf=0,vt.call(this)}}();return window,o=[],void 0===(s="function"==typeof(r=function(){var e="object"===("undefined"==typeof window?"undefined":a(window))&&window.window===window?window:"object"===("undefined"==typeof self?"undefined":a(self))&&self.self===self?self:"object"===(void 0===i?"undefined":a(i))&&i.global===i?i:void 0;function n(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){s(i.response,e,n)},i.onerror=function(){console.error("could not download file")},i.send()}function r(t){var e=new XMLHttpRequest;return e.open("HEAD",t,!1),e.send(),200<=e.status&&e.status<=299}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var s=e.saveAs||("object"!==("undefined"==typeof window?"undefined":a(window))||window!==e?function(){}:"download"in HTMLAnchorElement.prototype?function(t,i,s){var a=e.URL||e.webkitURL,u=document.createElement("a");u.download=i=i||t.name||"download",u.rel="noopener","string"==typeof t?(u.href=t,u.origin!==location.origin?r(u.href)?n(t,i,s):o(u,u.target="_blank"):o(u)):(u.href=a.createObjectURL(t),setTimeout((function(){a.revokeObjectURL(u.href)}),4e4),setTimeout((function(){o(u)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,e,i){if(e=e||t.name||"download","string"==typeof t)if(r(t))n(t,e,i);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout((function(){o(s)}))}else navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!==a(e)&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}(t,i),e)}:function(t,i,r,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof t)return n(t,i,r);var s="application/octet-stream"===t.type,u=/constructor/i.test(e.HTMLElement)||e.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||s&&u)&&"object"===("undefined"==typeof FileReader?"undefined":a(FileReader))){var c=new FileReader;c.onloadend=function(){var t=c.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=t:location=t,o=null},c.readAsDataURL(t)}else{var h=e.URL||e.webkitURL,f=h.createObjectURL(t);o?o.location=f:location.href=f,o=null,setTimeout((function(){h.revokeObjectURL(f)}),4e4)}});e.saveAs=s.saveAs=s,t.exports=s})?r.apply(e,o):r)||(t.exports=s),K},void 0===(s="function"==typeof r?r.call(e,n,e,t):r)||(t.exports=s);try{t.exports=jsPDF}catch(t){}}).call(this,n(28))},function(t,e,n){t.exports=function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};e[s][0].call(l.exports,(function(t){return r(e[s][1][t]||t)}),l,l.exports,t,e,n,i)}return n[s].exports}for(var o=!1,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){"use strict";function i(t,e){"single"!=(e=function(t,e){if(!t)return e;var n={};for(var i in e)n[i]=r.call(t,i)?t[i]:e[i];return n}(e,i.options)).quotes&&"double"!=e.quotes&&(e.quotes="single");for(var n="double"==e.quotes?'"':"'",u=e.isIdentifier,l=t.charAt(0),c="",h=0,f=t.length;h<f;){var d=t.charAt(h++),p=d.charCodeAt(),m=void 0;if(p<32||126<p){if(55296<=p&&p<=56319&&h<f){var b=t.charCodeAt(h++);56320==(64512&b)?p=((1023&p)<<10)+(1023&b)+65536:h--}m="\\"+p.toString(16).toUpperCase()+" "}else m=e.escapeEverything?o.test(d)?"\\"+d:"\\"+p.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(d)?"\\"+p.toString(16).toUpperCase()+" ":"\\"==d||!u&&('"'==d&&n==d||"'"==d&&n==d)||u&&s.test(d)?"\\"+d:d;c+=m}return u&&(/^-[-\d]/.test(c)?c="\\-"+c.slice(1):/\d/.test(l)&&(c="\\3"+l+" "+c.slice(1))),c=c.replace(a,(function(t,e,n){return e&&e.length%2?t:(e||"")+n})),!u&&e.wrap?n+c+n:c}var r={}.hasOwnProperty,o=/[ -,\.\/:-@\[-\^`\{-~]/,s=/[ -,\.\/:-@\[\]\^`\{-~]/,a=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g;i.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1},i.version="3.0.0",e.exports=i},{}],2:[function(t,e,n){var i=/[a-z0-9_-]/i,r=/[\s\t]/,o=/[^a-z0-9_-]/i;e.exports={parse:function(t){for(var e,n,o=!0,s=0,a="",u=0,l=[];;){if(n=t[u],0===s){if(!n&&o)break;if(!n&&!o)throw new Error("Parse error");if('"'===n||"'"===n)e=n,o=!(s=1);else if(r.test(n));else{if(!i.test(n))throw new Error("Parse error");o=!(s=3),u--}}else if(1===s){if(!n)throw new Error("Parse Error");"\\"===n?s=2:n===e?(l.push(a),a="",s=4):a+=n}else if(2===s){if(n!==e&&"\\"!==n)throw new Error("Parse error");a+=n,s=1}else if(3===s){if(!n){l.push(a);break}if(i.test(n))a+=n;else if(","===n)l.push(a),a="",s=0;else{if(!r.test(n))throw new Error("Parse error");s=5}}else if(5===s){if(!n){l.push(a);break}if(i.test(n))a+=" "+n,s=3;else if(","===n)l.push(a),a="",s=0;else if(!r.test(n))throw new Error("Parse error")}else if(4===s){if(!n)break;if(","===n)s=0;else if(!r.test(n))throw new Error("Parse error")}u++}return l},stringify:function(t,e){var n=e&&e.quote||'"';if('"'!==n&&"'"!==n)throw new Error("Quote must be `'` or `\"`");for(var i=new RegExp(n,"g"),r=[],s=0;s<t.length;++s){var a=t[s];o.test(a)&&(a=n+(a=a.replace(/\\/g,"\\\\").replace(i,"\\"+n))+n),r.push(a)}return r.join(", ")}}},{}],3:[function(t,e,n){"use strict";e.exports=t("./lib/svgpath")},{"./lib/svgpath":8}],4:[function(t,e,n){"use strict";var i=2*Math.PI;function r(t,e,n,i){var r=t*n+e*i;return 1<r&&(r=1),r<-1&&(r=-1),(t*i-e*n<0?-1:1)*Math.acos(r)}e.exports=function(t,e,n,o,s,a,u,l,c){var h=Math.sin(c*i/360),f=Math.cos(c*i/360),d=f*(t-n)/2+h*(e-o)/2,p=-h*(t-n)/2+f*(e-o)/2;if(0==d&&0==p)return[];if(0===u||0===l)return[];u=Math.abs(u),l=Math.abs(l);var m=d*d/(u*u)+p*p/(l*l);1<m&&(u*=Math.sqrt(m),l*=Math.sqrt(m));var b,v,y,g,S,w,_,x=function(t,e,n,o,s,a,u,l,c,h){var f=h*(t-n)/2+c*(e-o)/2,d=-c*(t-n)/2+h*(e-o)/2,p=u*u,m=l*l,b=f*f,v=d*d,y=p*m-p*v-m*b;y<0&&(y=0),y/=p*v+m*b;var g=(y=Math.sqrt(y)*(s===a?-1:1))*u/l*d,S=y*-l/u*f,w=h*g-c*S+(t+n)/2,_=c*g+h*S+(e+o)/2,x=(f-g)/u,k=(d-S)/l,E=(-f-g)/u,P=(-d-S)/l,A=r(1,0,x,k),L=r(x,k,E,P);return 0===a&&0<L&&(L-=i),1===a&&L<0&&(L+=i),[w,_,A,L]}(t,e,n,o,s,a,u,l,h,f),k=[],E=x[2],P=x[3],A=Math.max(Math.ceil(Math.abs(P)/(i/4)),1);P/=A;for(var L=0;L<A;L++)k.push((b=E,v=P,y=4/3*Math.tan(v/4),[g=Math.cos(b),S=Math.sin(b),g-S*y,S+g*y,(w=Math.cos(b+v))+(_=Math.sin(b+v))*y,_-w*y,w,_])),E+=P;return k.map((function(t){for(var e=0;e<t.length;e+=2){var n=t[e+0],i=t[e+1],r=f*(n*=u)-h*(i*=l),o=h*n+f*i;t[e+0]=r+x[0],t[e+1]=o+x[1]}return t}))}},{}],5:[function(t,e,n){"use strict";var i=1e-10,r=Math.PI/180;function o(t,e,n){if(!(this instanceof o))return new o(t,e,n);this.rx=t,this.ry=e,this.ax=n}o.prototype.transform=function(t){var e=Math.cos(this.ax*r),n=Math.sin(this.ax*r),o=[this.rx*(t[0]*e+t[2]*n),this.rx*(t[1]*e+t[3]*n),this.ry*(-t[0]*n+t[2]*e),this.ry*(-t[1]*n+t[3]*e)],s=o[0]*o[0]+o[2]*o[2],a=o[1]*o[1]+o[3]*o[3],u=((o[0]-o[3])*(o[0]-o[3])+(o[2]+o[1])*(o[2]+o[1]))*((o[0]+o[3])*(o[0]+o[3])+(o[2]-o[1])*(o[2]-o[1])),l=(s+a)/2;if(u<i*l)return this.rx=this.ry=Math.sqrt(l),this.ax=0,this;var c=o[0]*o[1]+o[2]*o[3],h=l+(u=Math.sqrt(u))/2,f=l-u/2;return this.ax=Math.abs(c)<i&&Math.abs(h-a)<i?90:180*Math.atan(Math.abs(c)>Math.abs(h-a)?(h-s)/c:c/(h-a))/Math.PI,0<=this.ax?(this.rx=Math.sqrt(h),this.ry=Math.sqrt(f)):(this.ax+=90,this.rx=Math.sqrt(f),this.ry=Math.sqrt(h)),this},o.prototype.isDegenerate=function(){return this.rx<i*this.ry||this.ry<i*this.rx},e.exports=o},{}],6:[function(t,e,n){"use strict";function i(){if(!(this instanceof i))return new i;this.queue=[],this.cache=null}i.prototype.matrix=function(t){return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]||(this.cache=null,this.queue.push(t)),this},i.prototype.translate=function(t,e){return 0===t&&0===e||(this.cache=null,this.queue.push([1,0,0,1,t,e])),this},i.prototype.scale=function(t,e){return 1===t&&1===e||(this.cache=null,this.queue.push([t,0,0,e,0,0])),this},i.prototype.rotate=function(t,e,n){var i,r,o;return 0!==t&&(this.translate(e,n),i=t*Math.PI/180,r=Math.cos(i),o=Math.sin(i),this.queue.push([r,o,-o,r,0,0]),this.cache=null,this.translate(-e,-n)),this},i.prototype.skewX=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,0,Math.tan(t*Math.PI/180),1,0,0])),this},i.prototype.skewY=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,Math.tan(t*Math.PI/180),0,1,0,0])),this},i.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],1===this.queue.length)return this.cache;for(var t=1;t<this.queue.length;t++)this.cache=[(e=this.cache)[0]*(n=this.queue[t])[0]+e[2]*n[1],e[1]*n[0]+e[3]*n[1],e[0]*n[2]+e[2]*n[3],e[1]*n[2]+e[3]*n[3],e[0]*n[4]+e[2]*n[5]+e[4],e[1]*n[4]+e[3]*n[5]+e[5]];var e,n;return this.cache},i.prototype.calc=function(t,e,n){var i;return this.queue.length?(this.cache||(this.cache=this.toArray()),[t*(i=this.cache)[0]+e*i[2]+(n?0:i[4]),t*i[1]+e*i[3]+(n?0:i[5])]):[t,e]},e.exports=i},{}],7:[function(t,e,n){"use strict";var i={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},r=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function o(t){return 48<=t&&t<=57}function s(t){this.index=0,this.path=t,this.max=t.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function a(t){for(;t.index<t.max&&(10===(e=t.path.charCodeAt(t.index))||13===e||8232===e||8233===e||32===e||9===e||11===e||12===e||160===e||5760<=e&&0<=r.indexOf(e));)t.index++;var e}function u(t){var e,n=t.index,i=n,r=t.max,s=!1,a=!1,u=!1,l=!1;if(r<=i)t.err="SvgPath: missed param (at pos "+i+")";else if(43!==(e=t.path.charCodeAt(i))&&45!==e||(e=++i<r?t.path.charCodeAt(i):0),o(e)||46===e){if(46!==e){if(s=48===e,e=++i<r?t.path.charCodeAt(i):0,s&&i<r&&e&&o(e))return void(t.err="SvgPath: numbers started with `0` such as `09` are ilegal (at pos "+n+")");for(;i<r&&o(t.path.charCodeAt(i));)i++,a=!0;e=i<r?t.path.charCodeAt(i):0}if(46===e){for(l=!0,i++;o(t.path.charCodeAt(i));)i++,u=!0;e=i<r?t.path.charCodeAt(i):0}if(101===e||69===e){if(l&&!a&&!u)return void(t.err="SvgPath: invalid float exponent (at pos "+i+")");if(43!==(e=++i<r?t.path.charCodeAt(i):0)&&45!==e||i++,!(i<r&&o(t.path.charCodeAt(i))))return void(t.err="SvgPath: invalid float exponent (at pos "+i+")");for(;i<r&&o(t.path.charCodeAt(i));)i++}t.index=i,t.param=parseFloat(t.path.slice(n,i))+0}else t.err="SvgPath: param should start with 0..9 or `.` (at pos "+i+")"}function l(t){var e,n;n=(e=t.path[t.segmentStart]).toLowerCase();var r=t.data;if("m"===n&&2<r.length&&(t.result.push([e,r[0],r[1]]),r=r.slice(2),n="l",e="m"===e?"l":"L"),"r"===n)t.result.push([e].concat(r));else for(;r.length>=i[n]&&(t.result.push([e].concat(r.splice(0,i[n]))),i[n]););}function c(t){var e,n,r,o=t.max;if(t.segmentStart=t.index,function(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}(t.path.charCodeAt(t.index)))if(n=i[t.path[t.index].toLowerCase()],t.index++,a(t),t.data=[],n){for(e=!1;;){for(r=n;0<r;r--){if(u(t),t.err.length)return;t.data.push(t.param),a(t),e=!1,t.index<o&&44===t.path.charCodeAt(t.index)&&(t.index++,a(t),e=!0)}if(!e){if(t.index>=t.max)break;if(!(48<=(s=t.path.charCodeAt(t.index))&&s<=57||43===s||45===s||46===s))break}}var s;l(t)}else l(t);else t.err="SvgPath: bad command "+t.path[t.index]+" (at pos "+t.index+")"}e.exports=function(t){var e=new s(t),n=e.max;for(a(e);e.index<n&&!e.err.length;)c(e);return e.err.length?e.result=[]:e.result.length&&("mM".indexOf(e.result[0][0])<0?(e.err="SvgPath: string should start with `M` or `m`",e.result=[]):e.result[0][0]="M"),{err:e.err,segments:e.result}}},{}],8:[function(t,e,n){"use strict";var i=t("./path_parse"),r=t("./transform_parse"),o=t("./matrix"),s=t("./a2c"),a=t("./ellipse");function u(t){if(!(this instanceof u))return new u(t);var e=i(t);this.segments=e.segments,this.err=e.err,this.__stack=[]}u.prototype.__matrix=function(t){var e,n=this;t.queue.length&&this.iterate((function(i,r,o,s){var u,l,c,h;switch(i[0]){case"v":l=0===(u=t.calc(0,i[1],!0))[0]?["v",u[1]]:["l",u[0],u[1]];break;case"V":l=(u=t.calc(o,i[1],!1))[0]===t.calc(o,s,!1)[0]?["V",u[1]]:["L",u[0],u[1]];break;case"h":l=0===(u=t.calc(i[1],0,!0))[1]?["h",u[0]]:["l",u[0],u[1]];break;case"H":l=(u=t.calc(i[1],s,!1))[1]===t.calc(o,s,!1)[1]?["H",u[0]]:["L",u[0],u[1]];break;case"a":case"A":var f=t.toArray(),d=a(i[1],i[2],i[3]).transform(f);if(f[0]*f[3]-f[1]*f[2]<0&&(i[5]=i[5]?"0":"1"),u=t.calc(i[6],i[7],"a"===i[0]),"A"===i[0]&&i[6]===o&&i[7]===s||"a"===i[0]&&0===i[6]&&0===i[7]){l=["a"===i[0]?"l":"L",u[0],u[1]];break}l=d.isDegenerate()?["a"===i[0]?"l":"L",u[0],u[1]]:[i[0],d.rx,d.ry,d.ax,i[4],i[5],u[0],u[1]];break;case"m":l=["m",(u=t.calc(i[1],i[2],h=0<r))[0],u[1]];break;default:for(l=[c=i[0]],h=c.toLowerCase()===c,e=1;e<i.length;e+=2)u=t.calc(i[e],i[e+1],h),l.push(u[0],u[1])}n.segments[r]=l}),!0)},u.prototype.__evaluateStack=function(){var t,e;if(this.__stack.length){if(1===this.__stack.length)return this.__matrix(this.__stack[0]),void(this.__stack=[]);for(t=o(),e=this.__stack.length;0<=--e;)t.matrix(this.__stack[e].toArray());this.__matrix(t),this.__stack=[]}},u.prototype.toString=function(){var t,e=[];this.__evaluateStack();for(var n=0;n<this.segments.length;n++)t=this.segments[n][0],e=e.concat(0<n&&"m"!==t&&"M"!==t&&t===this.segments[n-1][0]?this.segments[n].slice(1):this.segments[n]);return e.join(" ").replace(/ ?([achlmqrstvz]) ?/gi,"$1").replace(/ \-/g,"-").replace(/zm/g,"z m")},u.prototype.translate=function(t,e){return this.__stack.push(o().translate(t,e||0)),this},u.prototype.scale=function(t,e){return this.__stack.push(o().scale(t,e||0===e?e:t)),this},u.prototype.rotate=function(t,e,n){return this.__stack.push(o().rotate(t,e||0,n||0)),this},u.prototype.skewX=function(t){return this.__stack.push(o().skewX(t)),this},u.prototype.skewY=function(t){return this.__stack.push(o().skewY(t)),this},u.prototype.matrix=function(t){return this.__stack.push(o().matrix(t)),this},u.prototype.transform=function(t){return t.trim()&&this.__stack.push(r(t)),this},u.prototype.round=function(t){var e,n=0,i=0,r=0,o=0;return t=t||0,this.__evaluateStack(),this.segments.forEach((function(s){var a=s[0].toLowerCase()===s[0];switch(s[0]){case"H":case"h":return a&&(s[1]+=r),r=s[1]-s[1].toFixed(t),void(s[1]=+s[1].toFixed(t));case"V":case"v":return a&&(s[1]+=o),o=s[1]-s[1].toFixed(t),void(s[1]=+s[1].toFixed(t));case"Z":case"z":return r=n,void(o=i);case"M":case"m":return a&&(s[1]+=r,s[2]+=o),r=s[1]-s[1].toFixed(t),o=s[2]-s[2].toFixed(t),n=r,i=o,s[1]=+s[1].toFixed(t),void(s[2]=+s[2].toFixed(t));case"A":case"a":return a&&(s[6]+=r,s[7]+=o),r=s[6]-s[6].toFixed(t),o=s[7]-s[7].toFixed(t),s[1]=+s[1].toFixed(t),s[2]=+s[2].toFixed(t),s[3]=+s[3].toFixed(t+2),s[6]=+s[6].toFixed(t),void(s[7]=+s[7].toFixed(t));default:return e=s.length,a&&(s[e-2]+=r,s[e-1]+=o),r=s[e-2]-s[e-2].toFixed(t),o=s[e-1]-s[e-1].toFixed(t),void s.forEach((function(e,n){n&&(s[n]=+s[n].toFixed(t))}))}})),this},u.prototype.iterate=function(t,e){var n,i,r,o=this.segments,s={},a=!1,u=0,l=0,c=0,h=0;if(e||this.__evaluateStack(),o.forEach((function(e,n){var i=t(e,n,u,l);Array.isArray(i)&&(s[n]=i,a=!0);var r=e[0]===e[0].toLowerCase();switch(e[0]){case"m":case"M":return c=u=e[1]+(r?u:0),void(h=l=e[2]+(r?l:0));case"h":case"H":return void(u=e[1]+(r?u:0));case"v":case"V":return void(l=e[1]+(r?l:0));case"z":case"Z":return u=c,void(l=h);default:u=e[e.length-2]+(r?u:0),l=e[e.length-1]+(r?l:0)}})),!a)return this;for(r=[],n=0;n<o.length;n++)if(void 0!==s[n])for(i=0;i<s[n].length;i++)r.push(s[n][i]);else r.push(o[n]);return this.segments=r,this},u.prototype.abs=function(){return this.iterate((function(t,e,n,i){var r,o=t[0],s=o.toUpperCase();if(o!==s)switch(t[0]=s,o){case"v":return void(t[1]+=i);case"a":return t[6]+=n,void(t[7]+=i);default:for(r=1;r<t.length;r++)t[r]+=r%2?n:i}}),!0),this},u.prototype.rel=function(){return this.iterate((function(t,e,n,i){var r,o=t[0],s=o.toLowerCase();if(o!==s&&(0!==e||"M"!==o))switch(t[0]=s,o){case"V":return void(t[1]-=i);case"A":return t[6]-=n,void(t[7]-=i);default:for(r=1;r<t.length;r++)t[r]-=r%2?n:i}}),!0),this},u.prototype.unarc=function(){return this.iterate((function(t,e,n,i){var r,o,a,u=[],l=t[0];return"A"!==l&&"a"!==l?null:(a="a"===l?(o=n+t[6],i+t[7]):(o=t[6],t[7]),0===(r=s(n,i,o,a,t[4],t[5],t[1],t[2],t[3])).length?[["a"===t[0]?"l":"L",t[6],t[7]]]:(r.forEach((function(t){u.push(["C",t[2],t[3],t[4],t[5],t[6],t[7]])})),u))})),this},u.prototype.unshort=function(){var t,e,n,i,r,o=this.segments;return this.iterate((function(s,a,u,l){var c,h=s[0],f=h.toUpperCase();a&&("T"===f?(e="Q"===(n=o[a-1])[0]?(t=n[1]-u,n[2]-l):"q"===n[0]?(t=n[1]-n[3],n[2]-n[4]):t=0,i=-t,r=-e,(c="t"===h)||(i+=u,r+=l),o[a]=[c?"q":"Q",i,r,s[1],s[2]]):"S"===f&&(e="C"===(n=o[a-1])[0]?(t=n[3]-u,n[4]-l):"c"===n[0]?(t=n[3]-n[5],n[4]-n[6]):t=0,i=-t,r=-e,(c="s"===h)||(i+=u,r+=l),o[a]=[c?"c":"C",i,r,s[1],s[2],s[3],s[4]]))})),this},e.exports=u},{"./a2c":4,"./ellipse":5,"./matrix":6,"./path_parse":7,"./transform_parse":9}],9:[function(t,e,n){"use strict";var i=t("./matrix"),r={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},o=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,s=/[\s,]+/;e.exports=function(t){var e,n,a=new i;return t.split(o).forEach((function(t){if(t.length)if(void 0===r[t])switch(n=t.split(s).map((function(t){return+t||0})),e){case"matrix":return void(6===n.length&&a.matrix(n));case"scale":return void(1===n.length?a.scale(n[0],n[0]):2===n.length&&a.scale(n[0],n[1]));case"rotate":return void(1===n.length?a.rotate(n[0],0,0):3===n.length&&a.rotate(n[0],n[1],n[2]));case"translate":return void(1===n.length?a.translate(n[0],0):2===n.length&&a.translate(n[0],n[1]));case"skewX":return void(1===n.length&&a.skewX(n[0]));case"skewY":return void(1===n.length&&a.skewY(n[0]))}else e=t})),a}},{"./matrix":6}],10:[function(t,e,n){function i(t){this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=(t=t.replace(/ /g,"")).toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var n in e)t==n&&(t=e[n]);for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],o=0;o<r.length;o++){var s=r[o].process,a=r[o].re.exec(t);if(a){var u=s(a);this.r=u[0],this.g=u[1],this.b=u[2],this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:255<this.r?255:this.r,this.g=this.g<0||isNaN(this.g)?0:255<this.g?255:this.g,this.b=this.b<0||isNaN(this.b)?0:255<this.b?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n},this.getHelpXML=function(){for(var t=new Array,n=0;n<r.length;n++)for(var o=r[n].example,s=0;s<o.length;s++)t[t.length]=o[s];for(var a in e)t[t.length]=a;var u=document.createElement("ul");for(u.setAttribute("id","rgbcolor-examples"),n=0;n<t.length;n++)try{var l=document.createElement("li"),c=new i(t[n]),h=document.createElement("div");h.style.cssText="margin: 3px; border: 1px solid black; background:"+c.toHex()+"; color:"+c.toHex(),h.appendChild(document.createTextNode("test"));var f=document.createTextNode(" "+t[n]+" -> "+c.toRGB()+" -> "+c.toHex());l.appendChild(h),l.appendChild(f),u.appendChild(l)}catch(t){}return u}}var r;r="undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this,void 0!==e&&e.exports?e.exports=i:r.RGBColor=i},{}],11:[function(t,e,n){!function(n){function i(t){var e=d(t,"d");if(!e)return[];s&&(e=s(e).unshort().unarc().abs().toString(),t.setAttribute("d",e));var n=t.pathSegList;if(n)return n;n=[];for(var i,r=/([a-df-zA-DF-Z])([^a-df-zA-DF-Z]*)/g;i=r.exec(e);){var o=B(i[2]),a=i[1],u=0<="zZ".indexOf(a)?0:0<="hHvV".indexOf(a)?1:0<="mMlLtT".indexOf(a)?2:0<="sSqQ".indexOf(a)?4:0<="aA".indexOf(a)?7:0<="cC".indexOf(a)?6:-1,l=0;do{var c={pathSegTypeAsLetter:a};switch(a){case"h":case"H":c.x=o[l];break;case"v":case"V":c.y=o[l];break;case"c":case"C":c.x1=o[l+u-6],c.y1=o[l+u-5];case"s":case"S":c.x2=o[l+u-4],c.y2=o[l+u-3];case"t":case"T":case"l":case"L":case"m":case"M":c.x=o[l+u-2],c.y=o[l+u-1];break;case"q":case"Q":c.x1=o[l],c.y1=o[l+1],c.x=o[l+2],c.y=o[l+3];break;case"a":case"A":throw new Error("Cannot convert Arcs without SvgPath package")}n.push(c),"m"===a?a="l":"M"===a&&(a="L"),l+=u}while(l<o.length)}return n.getItem=function(t){return this[t]},n.numberOfItems=n.length,n}function r(t,e){return Math.atan2(e[1]-t[1],e[0]-t[0])}var o,s,a,u,l,c=/url\(["']?#([^"']+)["']?\)/,h=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*\s*)$/i,f="http://www.w3.org/2000/svg",d=function(t,e,n){return t.style[n=n||e]||(t.hasAttribute(e)?t.getAttribute(e):void 0)},p=function(t,e){return 0<=e.split(",").indexOf(t.tagName.toLowerCase())},m=function(t,e){for(var n=[],i=0;i<t.childNodes.length;i++){var r=t.childNodes[i];"#"!==r.nodeName.charAt(0)&&n.push(r)}for(i=0;i<n.length;i++)e(i,n[i])};function b(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);return[t[0]/e,t[1]/e]}function v(t,e){return b([e[0]-t[0],e[1]-t[1]])}function y(t,e){return[t[0]+e[0],t[1]+e[1]]}function g(t,e){return[t[0]+2*(e[0]-t[0]),t[1]+2*(e[1]-t[1])]}function S(t,e){return[2/3*(e[0]-t[0])+t[0],2/3*(e[1]-t[1])+t[1]]}function w(t,e,n,i,r){var o=n.getItem(t-1);return 0<t&&("C"===o.pathSegTypeAsLetter||"S"===o.pathSegTypeAsLetter)?g([o.x2,o.y2],e):0<t&&("c"===o.pathSegTypeAsLetter||"s"===o.pathSegTypeAsLetter)?g([o.x2+i,o.y2+r],e):[e[0],e[1]]}function _(t){this.renderedElements={},this.rootSvg=t}_.prototype.getRendered=function(t){if(this.renderedElements.hasOwnProperty(t))return this.renderedElements[t];var e=this.rootSvg.querySelector("#"+u(t,{isIdentifier:!0}));if(p(e,"lineargradient"))K(e,"axial",[e.getAttribute("x1")||0,e.getAttribute("y1")||0,e.getAttribute("x2")||1,e.getAttribute("y2")||0]);else if(p(e,"radialgradient"))K(e,"radial",[e.getAttribute("fx")||e.getAttribute("cx")||.5,e.getAttribute("fy")||e.getAttribute("cy")||.5,0,e.getAttribute("cx")||.5,e.getAttribute("cy")||.5,e.getAttribute("r")||.5]);else if(p(e,"pattern"))J(e,this,x.default());else if(p(e,"marker")){var n=O(e),i=D(e);l.beginFormObject(i[0],i[1],i[2],i[3],n),X(e,l.unitMatrix,this,!1,!1,x.default()),l.endFormObject(e.getAttribute("id"))}else p(e,"clippath")||et(e,l.unitMatrix,this,!0,!1,x.default());return this.renderedElements[t]=e};var x=function(){this.xmlSpace=null,this.color=null,this.fill=null,this.fillOpacity=1,this.fontFamily=null,this.fontSize=16,this.fontStyle=null,this.fontWeight=null,this.opacity=1,this.stroke=null,this.strokeDasharray=null,this.strokeDashoffset=null,this.strokeLinecap=null,this.strokeLinejoin=null,this.strokeMiterlimit=4,this.strokeOpacity=1,this.strokeWidth=1,this.textAnchor=null,this.visibility=null};function k(){this.markers=[]}function E(t,e,n){this.id=t,this.anchor=e,this.angle=n}function P(t){return t.replace(/[\n\r]/g,"")}function A(t){return t.replace(/[\t]/g," ")}function L(t){return t.replace(/ +/g," ")}function T(t,e,n,i,r,o){var s,a,u=e[0],c=e[1],h=e[2],f=e[3],d=r/h,p=o/f,m=t.getAttribute("preserveAspectRatio");if(m){var b=m.split(" ");"defer"===b[0]&&(b=b.slice(1)),s=b[0],a=b[1]||"meet"}else s="xMidYMid",a="meet";"none"!==s&&("meet"===a?d=p=Math.min(d,p):"slice"===a&&(d=p=Math.max(d,p)));var v=n-u*d,y=i-c*p;0<=s.indexOf("xMid")?v+=(r-h*d)/2:0<=s.indexOf("xMax")&&(v+=r-h*d),0<=s.indexOf("yMid")?y+=(o-f*p)/2:0<=s.indexOf("yMax")&&(y+=o-f*p);var g=new l.Matrix(1,0,0,1,v,y),S=new l.Matrix(d,0,0,p,0,0);return l.matrixMult(S,g)}function M(t){for(var e=B(t),n=[],i=0;i<e.length-1;i+=2)n.push([e[i],e[i+1]]);return n}function C(t,e){var n=t[0],i=t[1];return[e.a*n+e.c*i+e.e,e.b*n+e.d*i+e.f]}function N(t,e){switch(d(t,"text-transform")){case"uppercase":return e.toUpperCase();case"lowercase":return e.toLowerCase();default:return e}}x.default=function(){var t=new x;return t.xmlSpace="default",t.fill=new o("rgb(0, 0, 0)"),t.fillOpacity=1,t.fontFamily="times",t.fontSize=16,t.fontStyle="normal",t.fontWeight="normal",t.opacity=1,t.stroke=null,t.strokeDasharray=null,t.strokeDashoffset=null,t.strokeLinecap="butt",t.strokeLinejoin="miter",t.strokeMiterlimit=4,t.strokeOpacity=1,t.strokeWidth=1,t.textAnchor="start",t.visibility="visible",t},x.prototype.clone=function(){var t=new x;return t.xmlSpace=this.xmlSpace,t.fill=this.fill,t.fillOpacity=this.fillOpacity,t.fontFamily=this.fontFamily,t.fontSize=this.fontSize,t.fontStyle=this.fontStyle,t.fontWeight=this.fontWeight,t.opacity=this.opacity,t.stroke=this.stroke,t.strokeDasharray=this.strokeDasharray,t.strokeDashoffset=this.strokeDashoffset,t.strokeLinecap=this.strokeLinecap,t.strokeLinejoin=this.strokeLinejoin,t.strokeMiterlimit=this.strokeMiterlimit,t.strokeOpacity=this.strokeOpacity,t.strokeWidth=this.strokeWidth,t.textAnchor=this.textAnchor,t.visibility=this.visibility,t},k.prototype.addMarker=function(t){this.markers.push(t)},k.prototype.draw=function(t,e,n){for(var i=0;i<this.markers.length;i++){var r,o=this.markers[i],s=o.angle,a=o.anchor,u=Math.cos(s),c=Math.sin(s);r=new l.Matrix(u,c,-c,u,a[0],a[1]),r=l.matrixMult(new l.Matrix(n.strokeWidth,0,0,n.strokeWidth,0,0),r),r=l.matrixMult(r,t),l.saveGraphicsState(),l.setLineWidth(1),e.getRendered(o.id),l.doFormObject(o.id,r),l.restoreGraphicsState()}};var I,R,O=function(t){var e,n,i,r=l.unitMatrix;if(p(t,"svg,g"))if(n=parseFloat(d(t,"x"))||0,i=parseFloat(d(t,"y"))||0,e=t.getAttribute("viewBox")){var o=B(e);r=T(t,o,n,i,parseFloat(d(t,"width"))||o[2],parseFloat(d(t,"height"))||o[3])}else r=new l.Matrix(1,0,0,1,n,i);else if(p(t,"marker"))if(n=parseFloat(t.getAttribute("refX"))||0,i=parseFloat(t.getAttribute("refY"))||0,e=t.getAttribute("viewBox")){var s=B(e);s[0]=s[1]=0,r=T(t,s,0,0,parseFloat(t.getAttribute("markerWidth"))||3,parseFloat(t.getAttribute("markerHeight"))||3),r=l.matrixMult(new l.Matrix(1,0,0,1,-n,-i),r)}else r=new l.Matrix(1,0,0,1,-n,-i);var a=d(t,"transform");return a?l.matrixMult(r,F(a)):r},F=function(t){if(!t||"none"===t)return l.unitMatrix;for(var e,n=/^[\s,]*matrix\(([^\)]+)\)\s*/,i=/^[\s,]*translate\(([^\)]+)\)\s*/,r=/^[\s,]*rotate\(([^\)]+)\)\s*/,o=/^[\s,]*scale\(([^\)]+)\)\s*/,s=/^[\s,]*skewX\(([^\)]+)\)\s*/,a=/^[\s,]*skewY\(([^\)]+)\)\s*/,u=l.unitMatrix;0<t.length;){var c=n.exec(t);if(c&&(e=B(c[1]),u=l.matrixMult(new l.Matrix(e[0],e[1],e[2],e[3],e[4],e[5]),u),t=t.substr(c[0].length)),c=r.exec(t)){e=B(c[1]);var h=Math.PI*e[0]/180;if(u=l.matrixMult(new l.Matrix(Math.cos(h),Math.sin(h),-Math.sin(h),Math.cos(h),0,0),u),e[1]&&e[2]){var f=new l.Matrix(1,0,0,1,e[1],e[2]),d=new l.Matrix(1,0,0,1,-e[1],-e[2]);u=l.matrixMult(d,l.matrixMult(u,f))}t=t.substr(c[0].length)}(c=i.exec(t))&&(e=B(c[1]),u=l.matrixMult(new l.Matrix(1,0,0,1,e[0],e[1]||0),u),t=t.substr(c[0].length)),(c=o.exec(t))&&((e=B(c[1]))[1]||(e[1]=e[0]),u=l.matrixMult(new l.Matrix(e[0],0,0,e[1],0,0),u),t=t.substr(c[0].length)),(c=s.exec(t))&&(e=parseFloat(c[1]),e*=Math.PI/180,u=l.matrixMult(new l.Matrix(1,0,Math.tan(e),1,0,0),u),t=t.substr(c[0].length)),(c=a.exec(t))&&(e=parseFloat(c[1]),e*=Math.PI/180,u=l.matrixMult(new l.Matrix(1,Math.tan(e),0,1,0,0),u),t=t.substr(c[0].length))}return u},B=function(t){for(var e,n=[],i=/[+-]?(?:(?:\d+\.?\d*)|(?:\d*\.?\d+))(?:[eE][+-]?\d+)?/g;e=i.exec(t);)n.push(parseFloat(e[0]));return n},D=function t(e){if("none"===d(e,"display"))return[0,0,0,0];var n,r,o,s,a,u,l,c,h=parseFloat;if(p(e,"polygon,polyline")){var f=M(e.getAttribute("points"));for(r=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,n=0;n<f.length;n++){var b=f[n];r=Math.min(r,b[0]),s=Math.max(s,b[0]),o=Math.min(o,b[1]),a=Math.max(a,b[1])}c=[r,o,s-r,a-o]}else if(p(e,"path")){var v=i(e);r=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY;var y,g,_,x,k,E,P,A=0,L=0;for(n=0;n<v.numberOfItems;n++){var T=v.getItem(n),C=T.pathSegTypeAsLetter;switch(C){case"H":_=T.x,x=L;break;case"h":_=T.x+A,x=L;break;case"V":_=A,x=T.y;break;case"v":_=A,x=T.y+L;break;case"C":k=[T.x1,T.y1],E=[T.x2,T.y2],P=[T.x,T.y];break;case"c":k=[T.x1+A,T.y1+L],E=[T.x2+A,T.y2+L],P=[T.x+A,T.y+L];break;case"S":k=w(n,[A,L],v,y,g),E=[T.x2,T.y2],P=[T.x,T.y];break;case"s":k=w(n,[A,L],v,y,g),E=[T.x2+A,T.y2+L],P=[T.x+A,T.y+L];break;case"Q":k=S([A,L],h=[T.x1,T.y1]),E=S([T.x,T.y],h),P=[T.x,T.y];break;case"q":k=S([A,L],h=[T.x1+A,T.y1+L]),E=S([A+T.x,L+T.y],h),P=[T.x+A,T.y+L];break;case"T":k=w(n,[A,L],v,y,g),k=S([A,L],h),E=S([T.x,T.y],h),P=[T.x,T.y];break;case"t":k=S([A,L],h=w(n,[A,L],v,y,g)),E=S([A+T.x,L+T.y],h),P=[T.x+A,T.y+L]}0<="sScCqQtT".indexOf(C)&&(y=A,g=L),0<="MLCSQT".indexOf(C)?(A=T.x,L=T.y):0<="mlcsqt".indexOf(C)?(A=T.x+A,L=T.y+L):"zZ".indexOf(C)<0&&(A=_,L=x),a=0<="CSQTcsqt".indexOf(C)?(r=Math.min(r,A,k[0],E[0],P[0]),s=Math.max(s,A,k[0],E[0],P[0]),o=Math.min(o,L,k[1],E[1],P[1]),Math.max(a,L,k[1],E[1],P[1])):(r=Math.min(r,A),s=Math.max(s,A),o=Math.min(o,L),Math.max(a,L))}c=[r,o,s-r,a-o]}else{if(p(e,"svg"))return(u=e.getAttribute("viewBox"))&&(l=B(u)),[h(d(e,"x"))||l&&l[0]||0,h(d(e,"y"))||l&&l[1]||0,h(d(e,"width"))||l&&l[2]||0,h(d(e,"height"))||l&&l[3]||0];if(p(e,"g,clippath"))c=[0,0,0,0],m(e,(function(e,n){var i=t(n);c=[Math.min(c[0],i[0]),Math.min(c[1],i[1]),Math.max(c[0]+c[2],i[0]+i[2])-Math.min(c[0],i[0]),Math.max(c[1]+c[3],i[1]+i[3])-Math.min(c[1],i[1])]}));else{if(p(e,"marker"))return(u=e.getAttribute("viewBox"))&&(l=B(u)),[l&&l[0]||0,l&&l[1]||0,l&&l[2]||h(e.getAttribute("marker-width"))||0,l&&l[3]||h(e.getAttribute("marker-height"))||0];if(p(e,"pattern"))return[h(e.getAttribute("x"))||0,h(e.getAttribute("y"))||0,h(e.getAttribute("width"))||0,h(e.getAttribute("height"))||0];var N=h(e.getAttribute("x1"))||h(d(e,"x"))||h(d(e,"cx")-h(d(e,"r")))||0,I=h(e.getAttribute("x2"))||N+h(d(e,"width"))||h(d(e,"cx"))+h(d(e,"r"))||0,R=h(e.getAttribute("y1"))||h(d(e,"y"))||h(d(e,"cy"))-h(d(e,"r"))||0,O=h(e.getAttribute("y2"))||R+h(d(e,"height"))||h(d(e,"cy"))+h(d(e,"r"))||0;c=[Math.min(N,I),Math.min(R,O),Math.max(N,I)-Math.min(N,I),Math.max(R,O)-Math.min(R,O)]}}if(p(e,"marker,svg,g"))return c;var F=d(e,"stroke-width")||1;return d(e,"stroke-miterlimit")&&(F*=.5/Math.sin(Math.PI/12)),[c[0]-F,c[1]-F,c[2]+2*F,c[3]+2*F]},j=null,V=(I="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789!\"$%&/()=?'\\+*-_.:,;^}][{#~|<>",R={},function(t){var e=R[t];if(!e){var n=G(I,t,"16px","normal","normal"),i=U(I,t,"16px","normal","normal");e=Math.abs(n-i)<.1?G:U,R[t]=e}return e});function G(t,e,n,i,r){var o=document.createElement("canvas").getContext("2d");return o.font=[i,r,n,e].join(" "),o.measureText(t).width}function U(t,e,n,i,r){var o=function(){if(!j){j=document.createElementNS(f,"text");var t=document.createElementNS(f,"svg");t.appendChild(j),t.style.setProperty("position","absolute"),t.style.setProperty("visibility","hidden"),document.body.appendChild(t)}return j}();return o.setAttribute("font-family",e),o.setAttribute("font-size",n),o.setAttribute("font-style",i),o.setAttribute("font-weight",r),o.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),o.textContent=t,o.getBBox().width}function z(t,e){return 0===t.length?0:V(e.fontFamily)(t,e.fontFamily,e.fontSize+"px",e.fontStyle,e.fontWeight)}function W(t){var e="invisible";return t.fill&&t.stroke?e="fillThenStroke":t.fill?e="fill":t.stroke&&(e="stroke"),e}function H(t,e,n){this.texts=[],this.textNodes=[],this.textAnchor=t,this.originX=e,this.originY=n}function q(t,e){var n;return(n=t&&t.toString().match(/^([\-0-9.]+)em$/))?parseFloat(n[1])*e:(n=t&&t.toString().match(/^([\-0-9.]+)(px|)$/))?parseFloat(n[1]):0}function Y(t,e,n,i,r){l.saveGraphicsState();var o,s,a=0,u=l.getFontSize(),c=q(t.getAttribute("x"),u),h=q(t.getAttribute("y"),u);o=q(t.getAttribute("dx"),u),s=q(t.getAttribute("dy"),u);var f=r.visibility,m=t.childElementCount;if(0===m){var b=function(t,e){return t=A(t=P(t)),"default"===e.xmlSpace&&(t=L(t=t.trim())),t}(t.textContent,r),v=N(t,b);if(a=function(t,e){var n=e.textAnchor;if("start"===n)return 0;var i=z(t,e),r=0;switch(n){case"end":r=i;break;case"middle":r=i/2}return r}(v,r),"visible"===f){var y=W(r);l.text(v,c+o-a,h+s,{angle:e,renderingMode:"fill"===y?void 0:y})}}else{for(var g=new H(r.textAnchor,c+o,h+s),S=0;S<t.childNodes.length;S++){var w=t.childNodes[S];if(w.textContent){var _=r.xmlSpace,x=w.textContent;if("#text"===w.nodeName);else{if(p(w,"title"))continue;if(p(w,"tspan")){var k,E=w;if(0<E.childElementCount){x="";for(var T=0;T<E.childNodes.length;T++)"#text"===E.childNodes[T].nodeName&&(x+=E.childNodes[T].textContent)}var M=E.getAttribute("x");if(null!==M){var C=q(M,u);k=g.put(e,r),g=new H(d(E,"text-anchor")||r.textAnchor,C,k[1])}var I=E.getAttribute("y");if(null!==I){var R=q(I,u);k=g.put(e,r),g=new H(d(E,"text-anchor")||r.textAnchor,k[0],R)}var O=E.getAttribute("xml:space");O&&(_=O)}}b=A(b=P(x)),"default"===_&&(0===S&&(b=b.replace(/^\s+/,"")),S===m-1&&(b=b.replace(/\s+$/,"")),b=L(b)),v=N(t,b),g.add(w,v)}}g.put(e,r)}l.restoreGraphicsState()}H.prototype.add=function(t,e){this.texts.push(e),this.textNodes.push(t)},H.prototype.put=function(t,e){var n,i,r,s=[],a=[],u=[],c=this.originX,h=this.originY,f=c,p=c;for(n=0;n<this.textNodes.length;n++){var m=c,b=h;if("#text"===(i=this.textNodes[n]).nodeName)v=e;else{var v=e.clone(),y=d(i,"fill");Q(i,y&&new o(y),v);var g=d(i,"stroke");g&&(x=new o(g)).ok&&(v.stroke=x);var S=d(i,"stroke-width");void 0!==S&&(v.strokeWidth=parseFloat(S));var w=i.getAttribute("dx");null!==w&&(m+=q(w,v.fontSize));var _=i.getAttribute("dy");null!==_&&(b+=q(_,v.fontSize))}u[n]=v,s[n]=m,a[n]=b,c=m+z(this.texts[n],v),h=b,f=Math.min(f,m),p=Math.max(p,c)}switch(this.textAnchor){case"start":r=0;break;case"middle":r=(p-f)/2;break;case"end":r=p-f}for(n=0;n<this.textNodes.length;n++)if("#text"===(i=this.textNodes[n]).nodeName||"hidden"!==(d(i,"visibility")||e.visibility)){if(l.saveGraphicsState(),$(u[n],e),u[n].stroke&&u[n].stroke!==e.stroke&&u[n].stroke.ok){var x=u[n].stroke;l.setDrawColor(x.r,x.g,x.b)}null!==u[n].strokeWidth&&u[n].strokeWidth!==e.strokeWidth&&l.setLineWidth(u[n].strokeWidth);var k=W(u[n]);l.text(this.texts[n],s[n]-r,a[n],{angle:t,renderingMode:"fill"===k?void 0:k}),l.restoreGraphicsState()}return[c,h]};var X=function(t,e,n,i,r,o){m(t,(function(t,s){et(s,e,n,i,r,o)}))},K=function(t,e,n){var i,r=[],s=0,a=!1;m(t,(function(t,e){if("stop"===e.tagName.toLowerCase()){var n=new o(d(e,"stop-color"));r.push({offset:function(t){var e=parseFloat(t);return!isNaN(e)&&0<=t.indexOf("%")?e/100:e}(e.getAttribute("offset")),color:[n.r,n.g,n.b]});var i=d(e,"stop-opacity");i&&1!=i&&(s+=parseFloat(i),a=!0)}})),a&&(i=new l.GState({opacity:s/r.length}));var u=new l.ShadingPattern(e,n,r,i),c=t.getAttribute("id");l.addShadingPattern(c,u)},J=function(t,e,n){var i=t.getAttribute("id"),r=D(t),o=new l.TilingPattern([r[0],r[1],r[0]+r[2],r[1]+r[3]],r[2],r[3],null,l.unitMatrix);l.beginTilingPattern(o),X(t,l.unitMatrix,e,!1,!1,n),l.endTilingPattern(i,o)},Z={"sans-serif":"helvetica",verdana:"helvetica",arial:"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",serif:"times",cursive:"times",fantasy:"times"};function Q(t,e,n){e&&e.ok&&(n.fill=e);var i=d(t,"font-weight");i&&(n.fontWeight=i);var r=d(t,"font-style");r&&(n.fontStyle=r);var o=d(t,"font-family");if(o){var s=a.parse(o);n.fontFamily=function(t,e){var n="";"bold"===t.fontWeight&&(n="bold"),"italic"===t.fontStyle&&(n+="italic"),""===n&&(n="normal");var i=l.getFontList(),r="";return e.some((function(t){var e=i[t];return e&&0<=e.indexOf(n)?(r=t,!0):(t=t.toLowerCase(),!!Z.hasOwnProperty(t)&&(r=t,!0))}))||(r="times"),r}(n,s)}var u=d(t,"font-size");u&&(n.fontSize=parseFloat(u));var c=d(t,"text-anchor");c&&(n.textAnchor=c)}function $(t,e){if(t.fontFamily!==e.fontFamily&&(Z.hasOwnProperty(t.fontFamily)?l.setFont(Z[t.fontFamily]):l.setFont(t.fontFamily)),t.fill&&t.fill!==e.fill&&t.fill.ok){var n=t.fill;l.setTextColor(n.r,n.g,n.b)}if(t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle){var i="";"bold"===t.fontWeight&&(i="bold"),"italic"===t.fontStyle&&(i+="italic"),""===i&&(i="normal"),l.setFontType(i)}t.fontSize!==e.fontSize&&l.setFontSize(t.fontSize*l.internal.scaleFactor)}function tt(t,e,n){var i=n.scale||1,r=n.xOffset||0,o=n.yOffset||0;return(l=e).advancedAPI((function(){l.saveGraphicsState(),l.setCurrentTransformationMatrix(new l.Matrix(i,0,0,i,r,o));var e=x.default();l.setLineWidth(e.strokeWidth);var n=e.fill;l.setFillColor(n.r,n.g,n.b),l.setFont(e.fontFamily),l.setFontSize(e.fontSize*l.internal.scaleFactor);var s=new _(t);et(t.cloneNode(!0),l.unitMatrix,s,!1,!1,e),l.restoreGraphicsState()})),j&&(document.body.removeChild(j.parentNode),j=null),l}var et=function t(e,n,s,a,u,f){var g=f;if(f=f.clone(),!p(e,"defs,clippath,pattern,lineargradient,radialgradient,marker")&&"none"!==d(e,"display")&&("hidden"!==(f.visibility=d(e,"visibility")||f.visibility)||p(e,"svg,g,marker,a,pattern,defs,text"))){var P,A,L=!1,T=null,N="inherit",I="inherit",R=void 0,j=a&&!p(e,"lineargradient,radialgradient,pattern,clippath");j?(P=O(e),A=D(e),l.beginFormObject(A[0],A[1],A[2],A[3],P),P=l.unitMatrix,a=!1):(P=l.matrixMult(O(e),n),u||l.saveGraphicsState());var V=e.hasAttribute("clip-path")&&"none"!==d(e,"clip-path");if(V){var G=c.exec(d(e,"clip-path")),U=s.getRendered(G[1]);if(!function t(e,n){if("none"===d(e,"display"))return!1;var i=!n,r=d(e,"visibility");if(r&&(i="hidden"!==r),p(e,"svg,g,marker,a,pattern,defs,text,clippath")){var o=!1;if(m(e,(function(e,n){o=!0,t(n,!i)&&(i=!0)})),!o)return!1}return i}(U))return void l.restoreGraphicsState();var z=P;U.hasAttribute("clipPathUnits")&&"objectboundingbox"===U.getAttribute("clipPathUnits").toLowerCase()&&(A=D(e),z=l.matrixMult(new l.Matrix(A[2],0,0,A[3],A[0],A[1]),z)),z=l.matrixMult(O(U),z),l.saveGraphicsState(),l.setCurrentTransformationMatrix(z),X(U,l.unitMatrix,s,!1,!0,x.default()),l.clip().discardPath(),l.setCurrentTransformationMatrix(z.inversed())}if(p(e,"svg,g,path,rect,text,ellipse,line,circle,polygon,polyline")){var W=d(e,"fill");if(W){var H=c.exec(W);if(H){var q=H[1],K=s.getRendered(q);if(K&&p(K,"lineargradient,radialgradient")){var J;J=K.hasAttribute("gradientUnits")&&"objectboundingbox"!==K.getAttribute("gradientUnits").toLowerCase()?l.unitMatrix:(A=A||D(e),new l.Matrix(A[2],0,0,A[3],A[0],A[1]));var Z=F(d(K,"gradientTransform","transform"));R={key:q,matrix:l.matrixMult(Z,J)},N=!0}else if(K&&p(K,"pattern")){var tt,et,nt,it,rt;R={key:q};var ot=l.unitMatrix;K.hasAttribute("patternUnits")&&"objectboundingbox"!==K.getAttribute("patternUnits").toLowerCase()||(A=A||D(e),ot=new l.Matrix(1,0,0,1,A[0],A[1]),rt=(tt=D(K))[0]*A[0],R.boundingBox=[rt,et=tt[1]*A[1],rt+(nt=tt[2]*A[2]),et+(it=tt[3]*A[3])],R.xStep=nt,R.yStep=it);var st=l.unitMatrix;K.hasAttribute("patternContentUnits")&&"objectboundingbox"===K.getAttribute("patternContentUnits").toLowerCase()&&(A=A||D(e),st=new l.Matrix(A[2],0,0,A[3],0,0),rt=(tt=R.boundingBox||D(K))[0]/A[0],R.boundingBox=[rt,et=tt[1]/A[1],rt+(nt=tt[2]/A[2]),et+(it=tt[3]/A[3])],R.xStep=nt,R.yStep=it);var at=l.unitMatrix;K.hasAttribute("patternTransform")&&(at=F(d(K,"patternTransform","transform")));var ut=st;ut=l.matrixMult(ut,ot),ut=l.matrixMult(ut,at),ut=l.matrixMult(ut,P),R.matrix=ut,N=!0}else T=new o("rgb(0, 0, 0)"),N=L=!0}else N=!!(T=function(t){if("transparent"===t){var e=new o("rgb(0,0,0)");return e.a=0,e}var n=/\s*rgba\(((?:[^,\)]*,){3}[^,\)]*)\)\s*/.exec(t);if(n){var i=B(n[1]),r=new o("rgb("+i.slice(0,3).join(",")+")");return r.a=i[3],r}return new o(t)}(W)).ok&&(L=!0)}var lt=1,ct=1,ht=d(e,"fill-opacity");ht&&(lt*=parseFloat(ht)),T&&"number"==typeof T.a&&(lt*=T.a);var ft=d(e,"stroke-opacity");ft&&(ct*=parseFloat(ft)),St&&"number"==typeof St.a&&(ct*=St.a);var dt=d(e,"opacity");if(dt){var pt=parseFloat(dt);ct*=pt,lt*=pt}var mt=lt<1,bt=ct<1;if(mt||bt){var vt={};mt&&(vt.opacity=lt),bt&&(vt["stroke-opacity"]=ct),l.setGState(new l.GState(vt))}}if(p(e,"svg,text,g,path,rect,ellipse,line,circle,polygon,polyline")){"none"===W?f.fill=null:L&&(f.fill=T,p(e,"text")||l.setFillColor(T.r,T.g,T.b));var yt=d(e,"stroke-width");void 0!==yt&&""!==yt?(yt=Math.abs(parseFloat(yt)),f.strokeWidth=yt,l.setLineWidth(yt)):yt=f.strokeWidth;var gt=d(e,"stroke");if(gt)if("none"===gt)f.stroke=null;else{var St=new o(gt);St.ok&&(f.stroke=St,l.setDrawColor(St.r,St.g,St.b),I=0!==yt)}var wt=d(e,"stroke-linecap");wt&&l.setLineCap(f.strokeLinecap=wt);var _t=d(e,"stroke-linejoin");_t&&l.setLineJoin(f.strokeLinejoin=_t);var xt=d(e,"stroke-dasharray");if(xt){xt=B(xt);var kt=parseInt(d(e,"stroke-dashoffset"))||0;f.strokeDasharray=xt,f.strokeDashoffset=kt,l.setLineDashPattern(xt,kt)}var Et=d(e,"stroke-miterlimit");void 0!==Et&&""!==Et&&l.setLineMiterLimit(f.strokeMiterlimit=parseFloat(Et))}"inherit"===N&&(N=null!==f.fill),"inherit"===I&&(I=null!==f.stroke);var Pt=e.getAttribute("xml:space");switch(Pt&&(f.xmlSpace=Pt),Q(e,T,f),$(f,g),e.tagName.toLowerCase()){case"svg":case"g":case"a":X(e,P,s,a,!1,f);break;case"use":!function(t,e,n){var i=t.getAttribute("href")||t.getAttribute("xlink:href");if(i){var r=i.substring(1);n.getRendered(r);var o=l.getFormObject(r),s=d(t,"x")||0,a=d(t,"y")||0,u=d(t,"width")||o.width,c=d(t,"height")||o.height,h=new l.Matrix(u/o.width||0,0,0,c/o.height||0,s,a);h=l.matrixMult(h,e),l.doFormObject(r,h)}}(e,P,s);break;case"line":u||(l.setCurrentTransformationMatrix(P),function(t,e,n){var i=[parseFloat(t.getAttribute("x1")||0),parseFloat(t.getAttribute("y1")||0)],o=[parseFloat(t.getAttribute("x2")||0),parseFloat(t.getAttribute("y2")||0)];null!==n.stroke&&l.line(i[0],i[1],o[0],o[1]);var s=d(t,"marker-start"),a=d(t,"marker-end");if(s||a){var u=new k,h=r(i,o);s&&u.addMarker(new E(c.exec(s)[1],i,h)),a&&u.addMarker(new E(c.exec(a)[1],o,h)),u.draw(l.unitMatrix,e,n)}}(e,s,f));break;case"rect":u||l.setCurrentTransformationMatrix(P),function(t){var e=parseFloat(d(t,"width")),n=parseFloat(d(t,"height"));!isFinite(e)||e<=0||!isFinite(n)||n<=0||l.roundedRect(parseFloat(d(t,"x"))||0,parseFloat(d(t,"y"))||0,e,n,parseFloat(d(t,"rx"))||0,parseFloat(d(t,"ry"))||0)}(e);break;case"ellipse":u||l.setCurrentTransformationMatrix(P),function(t){var e=parseFloat(d(t,"rx")),n=parseFloat(d(t,"ry"));!isFinite(e)||e<=0||!isFinite(n)||n<=0||l.ellipse(parseFloat(d(t,"cx"))||0,parseFloat(d(t,"cy"))||0,e,n)}(e);break;case"circle":u||l.setCurrentTransformationMatrix(P),function(t){var e=parseFloat(d(t,"r"));!isFinite(e)||e<=0||l.ellipse(parseFloat(d(t,"cx"))||0,parseFloat(d(t,"cy"))||0,e,e)}(e);break;case"text":Y(e,P,0,0,f);break;case"path":u||l.setCurrentTransformationMatrix(P),function(t,e,n,o,s){var a=i(t),u=d(t,"marker-end"),h=d(t,"marker-start"),f=d(t,"marker-mid");u=u&&c.exec(u)[1],h=h&&c.exec(h)[1],f=f&&c.exec(f)[1];var p=function(){for(var t,n,i,s,l,c,d,p,m,g,_=0,x=0,P=_,A=x,L=[],T=new k,M=[0,0],N=0;N<a.numberOfItems;N++){var I=a.getItem(N),R=I.pathSegTypeAsLetter;switch(R){case"M":P=_,A=x,l=[I.x,I.y],m="m";break;case"m":P=_,A=x,l=[I.x+_,I.y+x],m="m";break;case"L":l=[I.x,I.y],m="l";break;case"l":l=[I.x+_,I.y+x],m="l";break;case"H":l=[I.x,x],m="l",i=I.x,s=x;break;case"h":l=[I.x+_,x],m="l",i=I.x+_,s=x;break;case"V":l=[_,I.y],m="l",i=_,s=I.y;break;case"v":l=[_,I.y+x],m="l",i=_,s=I.y+x;break;case"C":d=[I.x1,I.y1],p=[I.x2,I.y2],l=[I.x,I.y];break;case"c":d=[I.x1+_,I.y1+x],p=[I.x2+_,I.y2+x],l=[I.x+_,I.y+x];break;case"S":d=w(N,[_,x],a,t,n),p=[I.x2,I.y2],l=[I.x,I.y];break;case"s":d=w(N,[_,x],a,t,n),p=[I.x2+_,I.y2+x],l=[I.x+_,I.y+x];break;case"Q":d=S([_,x],c=[I.x1,I.y1]),p=S([I.x,I.y],c),l=[I.x,I.y];break;case"q":d=S([_,x],c=[I.x1+_,I.y1+x]),p=S([_+I.x,x+I.y],c),l=[I.x+_,I.y+x];break;case"T":d=S([_,x],c=w(N,[_,x],a,t,n)),p=S([I.x,I.y],c),l=[I.x,I.y];break;case"t":d=S([_,x],c=w(N,[_,x],a,t,n)),p=S([_+I.x,x+I.y],c),l=[I.x+_,I.y+x];break;case"Z":case"z":_=P,x=A,L.push({op:"h"})}var O=h&&(1===N||"mM".indexOf(R)<0&&0<="mM".indexOf(a.getItem(N-1).pathSegTypeAsLetter)),F=u&&(N===a.numberOfItems-1||"mM".indexOf(R)<0&&0<="mM".indexOf(a.getItem(N+1).pathSegTypeAsLetter)),B=f&&0<N&&!(1===N&&0<="mM".indexOf(a.getItem(N-1).pathSegTypeAsLetter));if(0<="sScCqQtT".indexOf(R))O&&T.addMarker(new E(h,[_,x],r([_,x],d))),F&&T.addMarker(new E(u,l,r(p,l))),B&&(g=v([_,x],d),g=0<="mM".indexOf(a.getItem(N-1).pathSegTypeAsLetter)?g:b(y(M,g)),T.addMarker(new E(f,[_,x],Math.atan2(g[1],g[0])))),M=v(p,l),t=_,n=x,o&&(d=C(d,e),p=C(p,e),l=C(l,e)),L.push({op:"c",c:[d[0],d[1],p[0],p[1],l[0],l[1]]});else if(0<="lLhHvVmM".indexOf(R)){if(g=v([_,x],l),O&&T.addMarker(new E(h,[_,x],Math.atan2(g[1],g[0]))),F&&T.addMarker(new E(u,l,Math.atan2(g[1],g[0]))),B){var D=0<="mM".indexOf(R)?M:0<="mM".indexOf(a.getItem(N-1).pathSegTypeAsLetter)?g:b(y(M,g));T.addMarker(new E(f,[_,x],Math.atan2(D[1],D[0])))}M=g,o&&(l=C(l,e)),L.push({op:m,c:l})}0<="MLCSQT".indexOf(R)?(_=I.x,x=I.y):0<="mlcsqt".indexOf(R)?(_=I.x+_,x=I.y+x):"zZ".indexOf(R)<0&&(_=i,x=s)}return{lines:L,markers:T}}();0<p.lines.length&&l.path(p.lines),(u||h||f)&&p.markers.draw(l.unitMatrix,n,s)}(e,P,s,u,f);break;case"polygon":case"polyline":u||l.setCurrentTransformationMatrix(P),function(t,e,n,i){if(t.hasAttribute("points")&&""!==t.getAttribute("points")){var r,o,s=M(t.getAttribute("points")),a=[{op:"m",c:s[0]}];for(r=1;r<s.length;r++)a.push({op:"l",c:s[r]});i&&a.push({op:"h"}),l.path(a);var u=d(t,"marker-end"),h=d(t,"marker-start"),f=d(t,"marker-mid");if(h||f||u){var p=a.length,m=new k;if(h&&(h=c.exec(h)[1],o=y(v(a[0].c,a[1].c),v(a[p-2].c,a[0].c)),m.addMarker(new E(h,a[0].c,Math.atan2(o[1],o[0])))),f){f=c.exec(f)[1];var b,g=v(a[0].c,a[1].c);for(r=1;r<a.length-2;r++)o=y(g,b=v(a[r].c,a[r+1].c)),m.addMarker(new E(f,a[r].c,Math.atan2(o[1],o[0]))),g=b;o=y(g,b=v(a[p-2].c,a[0].c)),m.addMarker(new E(f,a[p-2].c,Math.atan2(o[1],o[0])))}u&&(u=c.exec(u)[1],o=y(v(a[0].c,a[1].c),v(a[p-2].c,a[0].c)),m.addMarker(new E(u,a[0].c,Math.atan2(o[1],o[0])))),m.draw(l.unitMatrix,e,n)}}}(e,s,f,"polygon"===e.tagName.toLowerCase());break;case"image":l.setCurrentTransformationMatrix(P),function(e){var n=parseFloat(d(e,"width")),i=parseFloat(d(e,"height")),r=parseFloat(d(e,"x")||0),o=parseFloat(d(e,"y")||0);if(!(!isFinite(n)||n<=0||!isFinite(i)||i<=0)){var s=e.getAttribute("xlink:href")||e.getAttribute("href");if(s){var a=s.match(h);if(a&&"image/svg+xml"===a[2]){var u=a[5];u="base64"===a[4]?atob(u):decodeURIComponent(u);var c=(new DOMParser).parseFromString(u,"image/svg+xml").firstElementChild,f=e.getAttribute("preserveAspectRatio");return f&&!(f.indexOf("defer")<0)&&c.getAttribute("preserveAspectRatio")||c.setAttribute("preserveAspectRatio",f),c.setAttribute("x",String(r)),c.setAttribute("y",String(o)),c.setAttribute("width",String(n)),c.setAttribute("height",String(i)),t(c,l.unitMatrix,new _(c),!1,!1,x.default())}try{l.addImage(s,"",r,o,n,i)}catch(e){"object"==typeof console&&console.warn&&console.warn('svg2pdfjs: Images with external resource link are not supported! ("'+s+'")')}}}}(e)}if(p(e,"path,rect,ellipse,circle,polygon,polyline")&&!u){var At="evenodd"===d(e,"fill-rule");N&&I?At?l.fillStrokeEvenOdd(R):l.fillStroke(R):N?At?l.fillEvenOdd(R):l.fill(R):I?l.stroke():l.discardPath()}j?l.endFormObject(e.getAttribute("id")):u||l.restoreGraphicsState(),V&&l.restoreGraphicsState()}};void 0!==e&&e.exports?(o=t("./rgbcolor.js"),s=t("svgpath"),a=t("font-family-papandreou"),u=t("cssesc"),e.exports=tt):(s=n.SvgPath,o=n.RGBColor,a=n.FontFamily,u=n.cssesc,n.svg2pdf=tt,n.svgElementToPdf=tt)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this)},{"./rgbcolor.js":10,cssesc:1,"font-family-papandreou":2,svgpath:3}]},{},[11])(11)},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(29)),i(n(265))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){h(this,t)}return d(t,null,[{key:"log",value:function(t,e){return Math.log(e)/Math.log(t)}},{key:"log10",value:function(e){return t.log(10,e)}},{key:"meanSimple",value:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e/t.length}},{key:"meanWeighted",value:function(t,e){if(t.length!==e.length||0===t.length)return 0;for(var n=0,i=0,r=0;r<t.length;r++){var o=e[r];n+=t[r]*o,i+=o}return n/i}}]),t}();e.PSMath=i},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(0)),i(n(2)),i(n(267)),i(n(268))},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(46)),i(n(70)),i(n(8))},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(165)),i(n(67))}])},bsdL:function(t,e,n){"use strict";n.r(e),n.d(e,"ComposicionModule",(function(){return C}));var i,r,o,s,a=n("ofXK"),u=n("tyNb"),l=n("fXoL"),c=n("3Pt+"),f=n("AytR"),p=n("tk/3"),m=((i=function(){function t(e){h(this,t),this.httpClient=e}return d(t,[{key:"getAvailableInstruments",value:function(){return this.httpClient.get(f.a.apiUrl+"/util/available-instruments")}},{key:"getAvailableMeasures",value:function(){return this.httpClient.get(f.a.apiUrl+"/util/available-measures")}},{key:"getAvailableTonalities",value:function(){return this.httpClient.get(f.a.apiUrl+"/util/available-tonalities")}}]),t}()).\u0275fac=function(t){return new(t||i)(l.Yb(p.a))},i.\u0275prov=l.Kb({token:i,factory:i.\u0275fac}),i),b=n("qtJ6"),v=((s=function(){function t(e){h(this,t),this.httpClient=e}return d(t,[{key:"getInstruments",value:function(){return this.httpClient.get(f.a.apiUrl+"/instruments")}}]),t}()).\u0275fac=function(t){return new(t||s)(l.Yb(p.a))},s.\u0275prov=l.Kb({token:s,factory:s.\u0275fac}),s),y=((o=function(){function t(e){h(this,t),this.httpClient=e}return d(t,[{key:"getTonalities",value:function(){return this.httpClient.get(f.a.apiUrl+"/tonalities")}}]),t}()).\u0275fac=function(t){return new(t||o)(l.Yb(p.a))},o.\u0275prov=l.Kb({token:o,factory:o.\u0275fac}),o),g=((r=function(){function t(e){h(this,t),this.httpClient=e}return d(t,[{key:"getMeasures",value:function(){return this.httpClient.get(f.a.apiUrl+"/measures")}}]),t}()).\u0275fac=function(t){return new(t||r)(l.Yb(p.a))},r.\u0275prov=l.Kb({token:r,factory:r.\u0275fac}),r),S=n("aceb");function w(t,e){if(1&t&&(l.Ub(0,"nb-option",13),l.Ec(1),l.Tb()),2&t){var n=e.$implicit;l.lc("value",n),l.Cb(1),l.Fc(n.name)}}function _(t,e){if(1&t&&(l.Ub(0,"nb-option",13),l.Ec(1),l.Tb()),2&t){var n=e.$implicit;l.lc("value",n),l.Cb(1),l.Fc(n.nombre)}}function x(t,e){if(1&t&&(l.Ub(0,"nb-option",13),l.Ec(1),l.Tb()),2&t){var n=e.$implicit;l.lc("value",n),l.Cb(1),l.Hc("",n.numerador,"/",n.denominador,"")}}var k,E,P,A,L=((k=function(){function t(e,n,i,r,o,s,a){h(this,t),this.compositionService=e,this.formBuilder=n,this.toastrService=i,this.userService=r,this.instrumentService=o,this.tonalityService=s,this.measureService=a,this.authors=["Javier Olmo Injerto"]}return d(t,[{key:"ngOnInit",value:function(){var t=this;this.instrumentService.getInstruments().subscribe((function(e){return t.instrumentos=e})),this.measureService.getMeasures().subscribe((function(e){return t.compases=e})),this.tonalityService.getTonalities().subscribe((function(e){return t.tonalidades=e})),this.requestForm=new c.e({movementTitle:new c.c("",c.t.minLength(3)),movementNumber:new c.c("",c.t.required),measures:new c.c("",c.t.pattern("[0-9]*")),instrumentos:new c.c(c.t.required),tonalidad:new c.c("",c.t.required),compas:new c.c("")})}},{key:"submit",value:function(t){var e=this;if(t.valid){var n=t.value;n.authors=["Javier Olmo Injerto"],this.userService.postSheetRequest(n,1).subscribe((function(t){e.showToast("Tu composici\xf3n se ha puesto a la cola. Dentro de poco estar\xe1 disponible","Solicitud creada!","top-right","success")}),(function(t){e.showToast("El servidor no ha podido procesar tu solicitud","Error en el servidor!","top-right","danger")}))}else this.showToast("Par\xe1metros incorrectos","Error","top-right","warning")}},{key:"showToast",value:function(t,e,n,i){this.toastrService.show(t,e,{position:n,status:i})}}]),t}()).\u0275fac=function(t){return new(t||k)(l.Ob(m),l.Ob(c.b),l.Ob(S.ib),l.Ob(b.a),l.Ob(v),l.Ob(y),l.Ob(g))},k.\u0275cmp=l.Ib({type:k,selectors:[["ngx-composition-request-form"]],decls:24,vars:4,consts:[[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-9"],["type","text","nbInput","","placeholder","T\xedtulo","fullWidth","","formControlName","movementTitle"],[1,"col-3"],["type","text","nbInput","","placeholder","N\xfamero de movimiento","formControlName","movementNumber",1,"col"],[1,"col"],["type","text","nbInput","","placeholder","N\xfamero de compases","formControlName","measures",1,"col-6"],["multiple","","formControlName","instrumentos","placeholder","Instrumentos",1,"col-6"],[3,"value",4,"ngFor","ngForOf"],["formControlName","tonalidad","placeholder","Tonalidad"],["formControlName","compas","placeholder","Comp\xe1s"],["nbButton","","status","basic","type","submit"],[3,"value"]],template:function(t,e){1&t&&(l.Ub(0,"nb-card"),l.Ub(1,"nb-card-header"),l.Ec(2,"Especificaciones"),l.Tb(),l.Ub(3,"nb-card-body"),l.Ub(4,"form",0),l.bc("ngSubmit",(function(){return e.submit(e.requestForm)})),l.Ub(5,"div",1),l.Ub(6,"div",2),l.Pb(7,"input",3),l.Tb(),l.Ub(8,"div",4),l.Pb(9,"input",5),l.Tb(),l.Tb(),l.Ub(10,"div",1),l.Ub(11,"div",6),l.Pb(12,"input",7),l.Tb(),l.Ub(13,"div",6),l.Ub(14,"nb-select",8),l.Cc(15,w,2,2,"nb-option",9),l.Tb(),l.Tb(),l.Ub(16,"div",6),l.Ub(17,"nb-select",10),l.Cc(18,_,2,2,"nb-option",9),l.Tb(),l.Tb(),l.Ub(19,"div",6),l.Ub(20,"nb-select",11),l.Cc(21,x,2,3,"nb-option",9),l.Tb(),l.Tb(),l.Tb(),l.Ub(22,"button",12),l.Ec(23,"Componer!"),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Cb(4),l.lc("formGroup",e.requestForm),l.Cb(11),l.lc("ngForOf",e.instrumentos),l.Cb(3),l.lc("ngForOf",e.tonalidades),l.Cb(3),l.lc("ngForOf",e.compases))},directives:[S.n,S.o,S.m,c.u,c.n,c.f,S.F,c.a,c.m,c.d,S.X,a.l,S.k,S.T],styles:["input[_ngcontent-%COMP%], nb-select[_ngcontent-%COMP%]{margin:20px;width:100%}"]}),k),T=[{path:"",component:(E=function(){function t(){h(this,t)}return d(t,[{key:"ngOnInit",value:function(){}}]),t}(),E.\u0275fac=function(t){return new(t||E)},E.\u0275cmp=l.Ib({type:E,selectors:[["ngx-composicion"]],decls:1,vars:0,template:function(t,e){1&t&&l.Pb(0,"ngx-composition-request-form")},directives:[L],styles:[""]}),E)}],M=((A=function t(){h(this,t)}).\u0275mod=l.Mb({type:A}),A.\u0275inj=l.Lb({factory:function(t){return new(t||A)},imports:[[u.g.forChild(T)],u.g]}),A),C=((P=function t(){h(this,t)}).\u0275mod=l.Mb({type:P}),P.\u0275inj=l.Lb({factory:function(t){return new(t||P)},providers:[m,v,y,g],imports:[[a.c,M,c.r,S.G,S.Y,S.l,S.p,c.g,S.hb]]}),P)},dgmN:function(t,e,n){"use strict";n.r(e),n.d(e,"PagesModule",(function(){return _}));var i,r,o,s,a=n("aceb"),u=n("tyNb"),l=[{title:"General",group:!0},{title:"Home",icon:"home",link:"/pages/home",home:!0},{title:"Composici\xf3n",icon:"music-outline",link:"/pages/composicion"},{title:"Mi repositorio",icon:"pantone-outline",link:"/pages/repositorio"},{title:"Administraci\xf3n",icon:"pantone-outline",children:[{title:"Logs",link:"/pages/admin/logs"}]},{title:"Cuenta",group:!0},{title:"Cerrar sesi\xf3n",icon:"log-out-outline",link:"/auth/logout"}],c=n("fXoL"),f=n("mgFL"),p=((i=function t(){h(this,t),this.menu=l}).\u0275fac=function(t){return new(t||i)},i.\u0275cmp=c.Ib({type:i,selectors:[["ngx-pages"]],decls:3,vars:1,consts:[[3,"items"]],template:function(t,e){1&t&&(c.Ub(0,"ngx-one-column-layout"),c.Pb(1,"nb-menu",0),c.Pb(2,"router-outlet"),c.Tb()),2&t&&(c.Cb(1),c.lc("items",e.menu))},directives:[f.a,a.Q,u.h],styles:[".nb-theme-default   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@-webkit-keyframes fade{0%{opacity:0}to{opacity:1}}.nb-theme-corporate   [_nghost-%COMP%]     router-outlet+*, .nb-theme-cosmic   [_nghost-%COMP%]     router-outlet+*, .nb-theme-dark   [_nghost-%COMP%]     router-outlet+*, .nb-theme-material-dark   [_nghost-%COMP%]     router-outlet+*, .nb-theme-material-light   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@keyframes fade{0%{opacity:0}to{opacity:1}}"]}),i),m=n("w+5F"),b=[{path:"",component:p,children:[{path:"home",component:(r=function(){function t(){h(this,t)}return d(t,[{key:"ngOnInit",value:function(){}}]),t}(),r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=c.Ib({type:r,selectors:[["ngx-home"]],decls:13,vars:0,template:function(t,e){1&t&&(c.Ub(0,"nb-card"),c.Ub(1,"nb-card-header"),c.Ec(2,"INTRODUCCI\xd3N"),c.Tb(),c.Ub(3,"nb-card-body"),c.Ec(4," Descripci\xf3n breve del proyecto "),c.Tb(),c.Tb(),c.Ub(5,"nb-card"),c.Ub(6,"nb-card-header"),c.Ec(7,"OBJETIVOS"),c.Tb(),c.Pb(8,"nb-card-body"),c.Tb(),c.Ub(9,"nb-card"),c.Ub(10,"nb-card-header"),c.Ec(11,"DEPENDENCIAS"),c.Tb(),c.Pb(12,"nb-card-body"),c.Tb())},directives:[a.n,a.o,a.m],styles:[""]}),r)},{path:"miscellaneous",loadChildren:function(){return Promise.resolve().then(n.bind(null,"ivxX")).then((function(t){return t.MiscellaneousModule}))}},{path:"composicion",loadChildren:function(){return Promise.resolve().then(n.bind(null,"bsdL")).then((function(t){return t.ComposicionModule}))}},{path:"repositorio",loadChildren:function(){return Promise.resolve().then(n.bind(null,"zQxy")).then((function(t){return t.RepositorioModule}))}},{path:"profile",loadChildren:function(){return n.e(7).then(n.bind(null,"723k")).then((function(t){return t.ProfileModule}))}},{path:"admin",loadChildren:function(){return n.e(6).then(n.bind(null,"GCp2")).then((function(t){return t.AdminModule}))}},{path:"",redirectTo:"home",pathMatch:"full"},{path:"**",component:m.a}]}],v=((o=function t(){h(this,t)}).\u0275mod=c.Mb({type:o}),o.\u0275inj=c.Lb({factory:function(t){return new(t||o)},imports:[[u.g.forChild(b)],u.g]}),o),y=n("ivxX"),g=n("vTDv"),S=n("zQxy"),w=n("bsdL"),_=((s=function t(){h(this,t)}).\u0275mod=c.Mb({type:s}),s.\u0275inj=c.Lb({factory:function(t){return new(t||s)},imports:[[v,a.R,y.MiscellaneousModule,g.a,a.p,S.RepositorioModule,w.ComposicionModule]]}),s)},ivxX:function(t,e,n){"use strict";n.r(e),n.d(e,"MiscellaneousModule",(function(){return d}));var i,r,o,s=n("aceb"),a=n("vTDv"),u=n("tyNb"),l=n("fXoL"),c=[{path:"",component:(i=function t(){h(this,t)},i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=l.Ib({type:i,selectors:[["ngx-miscellaneous"]],decls:1,vars:0,template:function(t,e){1&t&&l.Pb(0,"router-outlet")},directives:[u.h],encapsulation:2}),i),children:[{path:"404",component:n("w+5F").a}]}],f=((o=function t(){h(this,t)}).\u0275mod=l.Mb({type:o}),o.\u0275inj=l.Lb({factory:function(t){return new(t||o)},imports:[[u.g.forChild(c)],u.g]}),o),d=((r=function t(){h(this,t)}).\u0275mod=l.Mb({type:r}),r.\u0275inj=l.Lb({factory:function(t){return new(t||r)},imports:[[a.a,s.p,s.l,f]]}),r)},kLqA:function(t,e,n){"use strict";e.__esModule=!0;var i=function(){function t(e){if(!e)throw new TypeError("Invalid argument; `value` has no value.");this.value=t.EMPTY,e&&t.isGuid(e)&&(this.value=e)}return t.isGuid=function(e){var n=e.toString();return e&&(e instanceof t||t.validator.test(n))},t.create=function(){return new t([t.gen(2),t.gen(1),t.gen(1),t.gen(1),t.gen(3)].join("-"))},t.createEmpty=function(){return new t("emptyguid")},t.parse=function(e){return new t(e)},t.raw=function(){return[t.gen(2),t.gen(1),t.gen(1),t.gen(1),t.gen(3)].join("-")},t.gen=function(t){for(var e="",n=0;n<t;n++)e+=(65536*(1+Math.random())|0).toString(16).substring(1);return e},t.prototype.equals=function(e){return t.isGuid(e)&&this.value===e.toString()},t.prototype.isEmpty=function(){return this.value===t.EMPTY},t.prototype.toString=function(){return this.value},t.prototype.toJSON=function(){return{value:this.value}},t.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),t.EMPTY="00000000-0000-0000-0000-000000000000",t}();e.Guid=i},"w+5F":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("fXoL"),r=n("aceb"),o=n("FKr1"),s=function(){var t=function(){function t(e){h(this,t),this.menuService=e}return d(t,[{key:"goToHome",value:function(){this.menuService.navigateHome()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Ob(r.S))},t.\u0275cmp=i.Ib({type:t,selectors:[["ngx-not-found"]],decls:11,vars:0,consts:[[1,"row"],[1,"col-md-12"],[1,"flex-centered","col-xl-4","col-lg-6","col-md-8","col-sm-12"],[1,"title"],[1,"sub-title"],["nbButton","","matRipple","","fullWidth","","type","button",1,"home-button",3,"click"]],template:function(t,e){1&t&&(i.Ub(0,"div",0),i.Ub(1,"div",1),i.Ub(2,"nb-card"),i.Ub(3,"nb-card-body"),i.Ub(4,"div",2),i.Ub(5,"h2",3),i.Ec(6,"404 Page Not Found"),i.Tb(),i.Ub(7,"small",4),i.Ec(8,"The page you were looking for doesn't exist"),i.Tb(),i.Ub(9,"button",5),i.bc("click",(function(){return e.goToHome()})),i.Ec(10," Take me home "),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Tb())},directives:[r.n,r.m,r.k,o.i],styles:[".flex-centered[_ngcontent-%COMP%]{margin:auto}nb-card-body[_ngcontent-%COMP%]{display:flex}.sub-title[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{text-align:center}.sub-title[_ngcontent-%COMP%]{display:block;margin-bottom:3rem}.home-button[_ngcontent-%COMP%]{margin-bottom:2rem}"]}),t}()},zQxy:function(e,i,o){"use strict";o.r(i),o.d(i,"RepositorioModule",(function(){return Ln}));var s,a=o("ofXK"),l=o("tyNb"),c=o("FUAB"),f=o("AytR"),p=o("fXoL"),m=o("aceb"),b=((s=function(){function t(e){h(this,t),this.dialogRef=e}return d(t,[{key:"ngOnInit",value:function(){}},{key:"downloadMusicXML",value:function(){window.location.href="".concat(f.a.apiUrl,"/sheets/").concat(this.sheet.id,"/file/musicxml"),this.dialogRef.close()}},{key:"downloadPDF",value:function(){window.location.href="".concat(f.a.apiUrl,"/sheets/").concat(this.sheet.id,"/file/pdf"),this.dialogRef.close()}},{key:"close",value:function(){this.dialogRef.close()}}]),t}()).\u0275fac=function(t){return new(t||s)(p.Ob(m.x))},s.\u0275cmp=p.Ib({type:s,selectors:[["ngx-download-dialog"]],inputs:{sheet:"sheet"},decls:14,vars:2,consts:[[1,"my-4"],["fullWidth","","nbButton","","status","primary",3,"disabled","click"],["icon","download-outline"]],template:function(t,e){1&t&&(p.Ub(0,"nb-card"),p.Ub(1,"nb-card-header"),p.Ec(2,"Descargar partitura"),p.Tb(),p.Ub(3,"nb-card-body"),p.Ub(4,"p"),p.Ec(5,"Elige un formato:"),p.Tb(),p.Ub(6,"div",0),p.Ub(7,"button",1),p.bc("click",(function(){return e.downloadMusicXML()})),p.Pb(8,"nb-icon",2),p.Ec(9," MusicXML "),p.Tb(),p.Tb(),p.Ub(10,"div",0),p.Ub(11,"button",1),p.bc("click",(function(){return e.downloadPDF()})),p.Pb(12,"nb-icon",2),p.Ec(13," PDF "),p.Tb(),p.Tb(),p.Tb(),p.Tb()),2&t&&(p.Cb(7),p.lc("disabled",!e.sheet.xml),p.Cb(4),p.lc("disabled",!e.sheet.pdf))},directives:[m.n,m.o,m.m,m.k,m.B],styles:["nb-card[_ngcontent-%COMP%]{min-width:300px}"]}),s),v=o("rDax"),y=o("+rOU"),g=o("FKr1"),S=o("cH1L"),w=o("XNiG"),_=o("NXyV"),x=o("LRne"),k=o("pLZG"),E=o("IzEk"),P=o("JX91"),A=o("R0Ic"),L=o("FtGj"),T=o("u47x");function M(t,e){}var C,N,I=function t(){h(this,t),this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0},R={dialogContainer:Object(A.m)("dialogContainer",[Object(A.j)("void, exit",Object(A.k)({opacity:0,transform:"scale(0.7)"})),Object(A.j)("enter",Object(A.k)({transform:"none"})),Object(A.l)("* => enter",Object(A.e)("150ms cubic-bezier(0, 0, 0.2, 1)",Object(A.k)({transform:"none",opacity:1}))),Object(A.l)("* => void, * => exit",Object(A.e)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",Object(A.k)({opacity:0})))])},O=((N=function(t){n(i,t);var e=r(i);function i(t,n,r,o,s,a){var u;return h(this,i),(u=e.call(this))._elementRef=t,u._focusTrapFactory=n,u._changeDetectorRef=r,u._config=s,u._focusMonitor=a,u._animationStateChanged=new p.o,u._elementFocusedBeforeDialogWasOpened=null,u._closeInteractionType=null,u.attachDomPortal=function(t){return u._portalOutlet.hasAttached(),u._portalOutlet.attachDomPortal(t)},u._ariaLabelledBy=s.ariaLabelledBy||null,u._document=o,u}return d(i,[{key:"_initializeWithAttachedContent",value:function(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}},{key:"attachComponentPortal",value:function(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}},{key:"attachTemplatePortal",value:function(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}},{key:"_recaptureFocus",value:function(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}},{key:"_trapFocus",value:function(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}},{key:"_restoreFocus",value:function(){var t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){var e=this._document.activeElement,n=this._elementRef.nativeElement;e&&e!==this._document.body&&e!==n&&!n.contains(e)||(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}},{key:"_setupFocusTrap",value:function(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}},{key:"_capturePreviouslyFocusedElement",value:function(){this._document&&(this._elementFocusedBeforeDialogWasOpened=this._document.activeElement)}},{key:"_focusDialogContainer",value:function(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}},{key:"_containsFocus",value:function(){var t=this._elementRef.nativeElement,e=this._document.activeElement;return t===e||t.contains(e)}}]),i}(y.a)).\u0275fac=function(t){return new(t||N)(p.Ob(p.l),p.Ob(T.g),p.Ob(p.h),p.Ob(a.d,8),p.Ob(I),p.Ob(T.e))},N.\u0275dir=p.Jb({type:N,viewQuery:function(t,e){var n;1&t&&p.yc(y.c,!0),2&t&&p.pc(n=p.cc())&&(e._portalOutlet=n.first)},features:[p.zb]}),N),F=((C=function(t){n(i,t);var e=r(i);function i(){var t;return h(this,i),(t=e.apply(this,arguments))._state="enter",t}return d(i,[{key:"_onAnimationDone",value:function(t){var e=t.toState,n=t.totalTime;"enter"===e?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:n})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:n}))}},{key:"_onAnimationStart",value:function(t){var e=t.toState,n=t.totalTime;"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:n}):"exit"!==e&&"void"!==e||this._animationStateChanged.next({state:"closing",totalTime:n})}},{key:"_startExitAnimation",value:function(){this._state="exit",this._changeDetectorRef.markForCheck()}}]),i}(O)).\u0275fac=function(t){return B(t||C)},C.\u0275cmp=p.Ib({type:C,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,e){1&t&&p.Ac("@dialogContainer.start",(function(t){return e._onAnimationStart(t)}))("@dialogContainer.done",(function(t){return e._onAnimationDone(t)})),2&t&&(p.Xb("id",e._id),p.Db("role",e._config.role)("aria-labelledby",e._config.ariaLabel?null:e._ariaLabelledBy)("aria-label",e._config.ariaLabel)("aria-describedby",e._config.ariaDescribedBy||null),p.Bc("@dialogContainer",e._state))},features:[p.zb],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,e){1&t&&p.Cc(0,M,0,0,"ng-template",0)},directives:[y.c],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[R.dialogContainer]}}),C),B=p.Wb(F),D=0,j=function(){function t(e,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mat-dialog-"+D++;h(this,t),this._overlayRef=e,this._containerInstance=n,this.id=r,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new w.a,this._afterClosed=new w.a,this._beforeClosed=new w.a,this._state=0,n._id=r,n._animationStateChanged.pipe(Object(k.a)((function(t){return"opened"===t.state})),Object(E.a)(1)).subscribe((function(){i._afterOpened.next(),i._afterOpened.complete()})),n._animationStateChanged.pipe(Object(k.a)((function(t){return"closed"===t.state})),Object(E.a)(1)).subscribe((function(){clearTimeout(i._closeFallbackTimeout),i._finishDialogClose()})),e.detachments().subscribe((function(){i._beforeClosed.next(i._result),i._beforeClosed.complete(),i._afterClosed.next(i._result),i._afterClosed.complete(),i.componentInstance=null,i._overlayRef.dispose()})),e.keydownEvents().pipe(Object(k.a)((function(t){return t.keyCode===L.e&&!i.disableClose&&!Object(L.o)(t)}))).subscribe((function(t){t.preventDefault(),V(i,"keyboard")})),e.backdropClick().subscribe((function(){i.disableClose?i._containerInstance._recaptureFocus():V(i,"mouse")}))}return d(t,[{key:"close",value:function(t){var e=this;this._result=t,this._containerInstance._animationStateChanged.pipe(Object(k.a)((function(t){return"closing"===t.state})),Object(E.a)(1)).subscribe((function(n){e._beforeClosed.next(t),e._beforeClosed.complete(),e._overlayRef.detachBackdrop(),e._closeFallbackTimeout=setTimeout((function(){return e._finishDialogClose()}),n.totalTime+100)})),this._state=1,this._containerInstance._startExitAnimation()}},{key:"afterOpened",value:function(){return this._afterOpened}},{key:"afterClosed",value:function(){return this._afterClosed}},{key:"beforeClosed",value:function(){return this._beforeClosed}},{key:"backdropClick",value:function(){return this._overlayRef.backdropClick()}},{key:"keydownEvents",value:function(){return this._overlayRef.keydownEvents()}},{key:"updatePosition",value:function(t){var e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}},{key:"updateSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this._getPositionStrategy().width(t).height(e),this._overlayRef.updatePosition(),this}},{key:"addPanelClass",value:function(t){return this._overlayRef.addPanelClass(t),this}},{key:"removePanelClass",value:function(t){return this._overlayRef.removePanelClass(t),this}},{key:"getState",value:function(){return this._state}},{key:"_finishDialogClose",value:function(){this._state=2,this._overlayRef.dispose()}},{key:"_getPositionStrategy",value:function(){return this._overlayRef.getConfig().positionStrategy}}]),t}();function V(t,e,n){return void 0!==t._containerInstance&&(t._containerInstance._closeInteractionType=e),t.close(n)}var G,U,z,W,H,q,Y,X=new p.r("MatDialogData"),K=new p.r("mat-dialog-default-options"),J=new p.r("mat-dialog-scroll-strategy"),Z={provide:J,deps:[v.f],useFactory:function(t){return function(){return t.scrollStrategies.block()}}},Q=((z=function(){function t(e,n,i,r,o,s,a,u,l){var c=this;h(this,t),this._overlay=e,this._injector=n,this._defaultOptions=i,this._parentDialog=r,this._overlayContainer=o,this._dialogRefConstructor=a,this._dialogContainerType=u,this._dialogDataToken=l,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new w.a,this._afterOpenedAtThisLevel=new w.a,this._ariaHiddenElements=new Map,this.afterAllClosed=Object(_.a)((function(){return c.openDialogs.length?c._getAfterAllClosed():c._getAfterAllClosed().pipe(Object(P.a)(void 0))})),this._scrollStrategy=s}return d(t,[{key:"_getAfterAllClosed",value:function(){var t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}},{key:"open",value:function(t,e){var n=this;(e=function(t,e){return Object.assign(Object.assign({},e),t)}(e,this._defaultOptions||new I)).id&&this.getDialogById(e.id);var i=this._createOverlay(e),r=this._attachDialogContainer(i,e),o=this._attachDialogContent(t,r,i,e);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(o),o.afterClosed().subscribe((function(){return n._removeOpenDialog(o)})),this.afterOpened.next(o),r._initializeWithAttachedContent(),o}},{key:"closeAll",value:function(){this._closeDialogs(this.openDialogs)}},{key:"getDialogById",value:function(t){return this.openDialogs.find((function(e){return e.id===t}))}},{key:"ngOnDestroy",value:function(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}},{key:"_createOverlay",value:function(t){var e=this._getOverlayConfig(t);return this._overlay.create(e)}},{key:"_getOverlayConfig",value:function(t){var e=new v.g({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(e.backdropClass=t.backdropClass),e}},{key:"_attachDialogContainer",value:function(t,e){var n=p.s.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:I,useValue:e}]}),i=new y.d(this._dialogContainerType,e.viewContainerRef,n,e.componentFactoryResolver);return t.attach(i).instance}},{key:"_attachDialogContent",value:function(t,e,n,i){var r=new this._dialogRefConstructor(n,e,i.id);if(t instanceof p.N)e.attachTemplatePortal(new y.h(t,null,{$implicit:i.data,dialogRef:r}));else{var o=this._createInjector(i,r,e),s=e.attachComponentPortal(new y.d(t,i.viewContainerRef,o));r.componentInstance=s.instance}return r.updateSize(i.width,i.height).updatePosition(i.position),r}},{key:"_createInjector",value:function(t,e,n){var i=t&&t.viewContainerRef&&t.viewContainerRef.injector,r=[{provide:this._dialogContainerType,useValue:n},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:e}];return!t.direction||i&&i.get(S.b,null)||r.push({provide:S.b,useValue:{value:t.direction,change:Object(x.a)()}}),p.s.create({parent:i||this._injector,providers:r})}},{key:"_removeOpenDialog",value:function(t){var e=this.openDialogs.indexOf(t);e>-1&&(this.openDialogs.splice(e,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((function(t,e){t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")})),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}},{key:"_hideNonDialogContentFromAssistiveTechnology",value:function(){var t=this._overlayContainer.getContainerElement();if(t.parentElement)for(var e=t.parentElement.children,n=e.length-1;n>-1;n--){var i=e[n];i===t||"SCRIPT"===i.nodeName||"STYLE"===i.nodeName||i.hasAttribute("aria-live")||(this._ariaHiddenElements.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}}},{key:"_closeDialogs",value:function(t){for(var e=t.length;e--;)t[e].close()}},{key:"openDialogs",get:function(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}},{key:"afterOpened",get:function(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}}]),t}()).\u0275fac=function(t){return new(t||z)(p.Ob(v.f),p.Ob(p.s),p.Ob(void 0),p.Ob(void 0),p.Ob(v.h),p.Ob(void 0),p.Ob(p.P),p.Ob(p.P),p.Ob(p.r))},z.\u0275dir=p.Jb({type:z}),z),$=((U=function(t){n(i,t);var e=r(i);function i(t,n,r,o,s,a,u){return h(this,i),e.call(this,t,n,o,a,u,s,j,F,X)}return i}(Q)).\u0275fac=function(t){return new(t||U)(p.Yb(v.f),p.Yb(p.s),p.Yb(a.i,8),p.Yb(K,8),p.Yb(J),p.Yb(U,12),p.Yb(v.h))},U.\u0275prov=p.Kb({token:U,factory:U.\u0275fac}),U),tt=((G=function t(){h(this,t)}).\u0275mod=p.Mb({type:G}),G.\u0275inj=p.Lb({factory:function(t){return new(t||G)},providers:[$,Z],imports:[[v.i,y.g,g.f],g.f]}),G),et=o("R1ws"),nt=["mat-button",""],it=["*"],rt=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],ot=Object(g.m)(Object(g.o)(Object(g.n)((function t(e){h(this,t),this._elementRef=e})))),st=((H=function(t){n(i,t);var e=r(i);function i(t,n,r){var o;h(this,i),(o=e.call(this,t))._focusMonitor=n,o._animationMode=r,o.isRoundButton=o._hasHostAttributes("mat-fab","mat-mini-fab"),o.isIconButton=o._hasHostAttributes("mat-icon-button");var s,a=u(rt);try{for(a.s();!(s=a.n()).done;){var l=s.value;o._hasHostAttributes(l)&&o._getHostElement().classList.add(l)}}catch(c){a.e(c)}finally{a.f()}return t.nativeElement.classList.add("mat-button-base"),o.isRoundButton&&(o.color="accent"),o}return d(i,[{key:"ngAfterViewInit",value:function(){this._focusMonitor.monitor(this._elementRef,!0)}},{key:"ngOnDestroy",value:function(){this._focusMonitor.stopMonitoring(this._elementRef)}},{key:"focus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"program",e=arguments.length>1?arguments[1]:void 0;this._focusMonitor.focusVia(this._getHostElement(),t,e)}},{key:"_getHostElement",value:function(){return this._elementRef.nativeElement}},{key:"_isRippleDisabled",value:function(){return this.disableRipple||this.disabled}},{key:"_hasHostAttributes",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.some((function(e){return t._getHostElement().hasAttribute(e)}))}}]),i}(ot)).\u0275fac=function(t){return new(t||H)(p.Ob(p.l),p.Ob(T.e),p.Ob(et.a,8))},H.\u0275cmp=p.Ib({type:H,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,e){var n;1&t&&p.Ic(g.i,!0),2&t&&p.pc(n=p.cc())&&(e.ripple=n.first)},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,e){2&t&&(p.Db("disabled",e.disabled||null),p.Gb("_mat-animation-noopable","NoopAnimations"===e._animationMode)("mat-button-disabled",e.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[p.zb],attrs:nt,ngContentSelectors:it,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,e){1&t&&(p.kc(),p.Ub(0,"span",0),p.jc(1),p.Tb(),p.Pb(2,"span",1),p.Pb(3,"span",2)),2&t&&(p.Cb(2),p.Gb("mat-button-ripple-round",e.isRoundButton||e.isIconButton),p.lc("matRippleDisabled",e._isRippleDisabled())("matRippleCentered",e.isIconButton)("matRippleTrigger",e._getHostElement()))},directives:[g.i],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.cdk-high-contrast-active .mat-button-focus-overlay{background-color:#fff}.cdk-high-contrast-black-on-white .mat-button-focus-overlay{background-color:#000}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}\n"],encapsulation:2,changeDetection:0}),H),at=((W=function t(){h(this,t)}).\u0275mod=p.Mb({type:W}),W.\u0275inj=p.Lb({factory:function(t){return new(t||W)},imports:[[g.j,g.f],g.f]}),W),ut=o("1G5W"),lt=o("8LU1"),ct=o("itXk"),ht=o("GyhO"),ft=o("HDdC"),dt=o("zP0r"),pt=o("Kj3r"),mt=o("lJxs"),bt=o("nLfN"),vt=new Set,yt=((Y=function(){function t(e){h(this,t),this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):gt}return d(t,[{key:"matchMedia",value:function(t){return this._platform.WEBKIT&&function(t){if(!vt.has(t))try{q||((q=document.createElement("style")).setAttribute("type","text/css"),document.head.appendChild(q)),q.sheet&&(q.sheet.insertRule("@media ".concat(t," {.fx-query-test{ }}"),0),vt.add(t))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}]),t}()).\u0275fac=function(t){return new(t||Y)(p.Yb(bt.a))},Y.\u0275prov=Object(p.Kb)({factory:function(){return new Y(Object(p.Yb)(bt.a))},token:Y,providedIn:"root"}),Y);function gt(t){return{matches:"all"===t||""===t,media:t,addListener:function(){},removeListener:function(){}}}var St,wt=((St=function(){function t(e,n){h(this,t),this._mediaMatcher=e,this._zone=n,this._queries=new Map,this._destroySubject=new w.a}return d(t,[{key:"ngOnDestroy",value:function(){this._destroySubject.next(),this._destroySubject.complete()}},{key:"isMatched",value:function(t){var e=this;return _t(Object(lt.b)(t)).some((function(t){return e._registerQuery(t).mql.matches}))}},{key:"observe",value:function(t){var e=this,n=_t(Object(lt.b)(t)).map((function(t){return e._registerQuery(t).observable})),i=Object(ct.a)(n);return(i=Object(ht.a)(i.pipe(Object(E.a)(1)),i.pipe(Object(dt.a)(1),Object(pt.a)(0)))).pipe(Object(mt.a)((function(t){var e={matches:!1,breakpoints:{}};return t.forEach((function(t){var n=t.matches,i=t.query;e.matches=e.matches||n,e.breakpoints[i]=n})),e})))}},{key:"_registerQuery",value:function(t){var e=this;if(this._queries.has(t))return this._queries.get(t);var n=this._mediaMatcher.matchMedia(t),i={observable:new ft.a((function(t){var i=function(n){return e._zone.run((function(){return t.next(n)}))};return n.addListener(i),function(){n.removeListener(i)}})).pipe(Object(P.a)(n),Object(mt.a)((function(e){var n=e.matches;return{query:t,matches:n}})),Object(ut.a)(this._destroySubject)),mql:n};return this._queries.set(t,i),i}}]),t}()).\u0275fac=function(t){return new(t||St)(p.Yb(yt),p.Yb(p.A))},St.\u0275prov=Object(p.Kb)({factory:function(){return new St(Object(p.Yb)(yt),Object(p.Yb)(p.A))},token:St,providedIn:"root"}),St);function _t(t){return t.map((function(t){return t.split(",")})).reduce((function(t,e){return t.concat(e)})).map((function(t){return t.trim()}))}function xt(t,e){if(1&t){var n=p.Vb();p.Ub(0,"div",1),p.Ub(1,"button",2),p.bc("click",(function(){return p.tc(n),p.fc().action()})),p.Ec(2),p.Tb(),p.Tb()}if(2&t){var i=p.fc();p.Cb(2),p.Fc(i.data.action)}}function kt(t,e){}var Et,Pt,At,Lt,Tt=new p.r("MatSnackBarData"),Mt=function t(){h(this,t),this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"},Ct=Math.pow(2,31)-1,Nt=function(){function t(e,n){var i=this;h(this,t),this._overlayRef=n,this._afterDismissed=new w.a,this._afterOpened=new w.a,this._onAction=new w.a,this._dismissedByAction=!1,this.containerInstance=e,this.onAction().subscribe((function(){return i.dismiss()})),e._onExit.subscribe((function(){return i._finishDismiss()}))}return d(t,[{key:"dismiss",value:function(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}},{key:"dismissWithAction",value:function(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete())}},{key:"closeWithAction",value:function(){this.dismissWithAction()}},{key:"_dismissAfter",value:function(t){var e=this;this._durationTimeoutId=setTimeout((function(){return e.dismiss()}),Math.min(t,Ct))}},{key:"_open",value:function(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}},{key:"_finishDismiss",value:function(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}},{key:"afterDismissed",value:function(){return this._afterDismissed}},{key:"afterOpened",value:function(){return this.containerInstance._onEnter}},{key:"onAction",value:function(){return this._onAction}}]),t}(),It=((Et=function(){function t(e,n){h(this,t),this.snackBarRef=e,this.data=n}return d(t,[{key:"action",value:function(){this.snackBarRef.dismissWithAction()}},{key:"hasAction",get:function(){return!!this.data.action}}]),t}()).\u0275fac=function(t){return new(t||Et)(p.Ob(Nt),p.Ob(Tt))},Et.\u0275cmp=p.Ib({type:Et,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(t,e){1&t&&(p.Ub(0,"span"),p.Ec(1),p.Tb(),p.Cc(2,xt,3,1,"div",0)),2&t&&(p.Cb(1),p.Fc(e.data.message),p.Cb(1),p.lc("ngIf",e.hasAction))},directives:[a.m,st],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),Et),Rt={snackBarState:Object(A.m)("state",[Object(A.j)("void, hidden",Object(A.k)({transform:"scale(0.8)",opacity:0})),Object(A.j)("visible",Object(A.k)({transform:"scale(1)",opacity:1})),Object(A.l)("* => visible",Object(A.e)("150ms cubic-bezier(0, 0, 0.2, 1)")),Object(A.l)("* => void, * => hidden",Object(A.e)("75ms cubic-bezier(0.4, 0.0, 1, 1)",Object(A.k)({opacity:0})))])},Ot=((At=function(t){n(i,t);var e=r(i);function i(t,n,r,o){var s;return h(this,i),(s=e.call(this))._ngZone=t,s._elementRef=n,s._changeDetectorRef=r,s.snackBarConfig=o,s._destroyed=!1,s._onExit=new w.a,s._onEnter=new w.a,s._animationState="void",s.attachDomPortal=function(t){return s._assertNotAttached(),s._applySnackBarClasses(),s._portalOutlet.attachDomPortal(t)},s._role="assertive"!==o.politeness||o.announcementMessage?"off"===o.politeness?null:"status":"alert",s}return d(i,[{key:"attachComponentPortal",value:function(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(t)}},{key:"attachTemplatePortal",value:function(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(t)}},{key:"onAnimationEnd",value:function(t){var e=t.fromState,n=t.toState;if(("void"===n&&"void"!==e||"hidden"===n)&&this._completeExit(),"visible"===n){var i=this._onEnter;this._ngZone.run((function(){i.next(),i.complete()}))}}},{key:"enter",value:function(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges())}},{key:"exit",value:function(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),this._onExit}},{key:"ngOnDestroy",value:function(){this._destroyed=!0,this._completeExit()}},{key:"_completeExit",value:function(){var t=this;this._ngZone.onMicrotaskEmpty.pipe(Object(E.a)(1)).subscribe((function(){t._onExit.next(),t._onExit.complete()}))}},{key:"_applySnackBarClasses",value:function(){var t=this._elementRef.nativeElement,e=this.snackBarConfig.panelClass;e&&(Array.isArray(e)?e.forEach((function(e){return t.classList.add(e)})):t.classList.add(e)),"center"===this.snackBarConfig.horizontalPosition&&t.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&t.classList.add("mat-snack-bar-top")}},{key:"_assertNotAttached",value:function(){this._portalOutlet.hasAttached()}}]),i}(y.a)).\u0275fac=function(t){return new(t||At)(p.Ob(p.A),p.Ob(p.l),p.Ob(p.h),p.Ob(Mt))},At.\u0275cmp=p.Ib({type:At,selectors:[["snack-bar-container"]],viewQuery:function(t,e){var n;1&t&&p.yc(y.c,!0),2&t&&p.pc(n=p.cc())&&(e._portalOutlet=n.first)},hostAttrs:[1,"mat-snack-bar-container"],hostVars:2,hostBindings:function(t,e){1&t&&p.Ac("@state.done",(function(t){return e.onAnimationEnd(t)})),2&t&&(p.Db("role",e._role),p.Bc("@state",e._animationState))},features:[p.zb],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,e){1&t&&p.Cc(0,kt,0,0,"ng-template",0)},directives:[y.c],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[Rt.snackBarState]}}),At),Ft=((Pt=function t(){h(this,t)}).\u0275mod=p.Mb({type:Pt}),Pt.\u0275inj=p.Lb({factory:function(t){return new(t||Pt)},imports:[[v.i,y.g,a.c,at,g.f],g.f]}),Pt),Bt=new p.r("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new Mt}}),Dt=((Lt=function(){function t(e,n,i,r,o,s){h(this,t),this._overlay=e,this._live=n,this._injector=i,this._breakpointObserver=r,this._parentSnackBar=o,this._defaultConfig=s,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=It,this.snackBarContainerComponent=Ot,this.handsetCssClass="mat-snack-bar-handset"}return d(t,[{key:"openFromComponent",value:function(t,e){return this._attach(t,e)}},{key:"openFromTemplate",value:function(t,e){return this._attach(t,e)}},{key:"open",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=Object.assign(Object.assign({},this._defaultConfig),n);return i.data={message:t,action:e},i.announcementMessage===t&&(i.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,i)}},{key:"dismiss",value:function(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}},{key:"ngOnDestroy",value:function(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}},{key:"_attachSnackBarContainer",value:function(t,e){var n=p.s.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:Mt,useValue:e}]}),i=new y.d(this.snackBarContainerComponent,e.viewContainerRef,n),r=t.attach(i);return r.instance.snackBarConfig=e,r.instance}},{key:"_attach",value:function(t,e){var n=this,i=Object.assign(Object.assign(Object.assign({},new Mt),this._defaultConfig),e),r=this._createOverlay(i),o=this._attachSnackBarContainer(r,i),s=new Nt(o,r);if(t instanceof p.N){var a=new y.h(t,null,{$implicit:i.data,snackBarRef:s});s.instance=o.attachTemplatePortal(a)}else{var u=this._createInjector(i,s),l=new y.d(t,void 0,u),c=o.attachComponentPortal(l);s.instance=c.instance}return this._breakpointObserver.observe("(max-width: 599.99px) and (orientation: portrait)").pipe(Object(ut.a)(r.detachments())).subscribe((function(t){var e=r.overlayElement.classList;t.matches?e.add(n.handsetCssClass):e.remove(n.handsetCssClass)})),this._animateSnackBar(s,i),this._openedSnackBarRef=s,this._openedSnackBarRef}},{key:"_animateSnackBar",value:function(t,e){var n=this;t.afterDismissed().subscribe((function(){n._openedSnackBarRef==t&&(n._openedSnackBarRef=null),e.announcementMessage&&n._live.clear()})),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe((function(){t.containerInstance.enter()})),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),e.duration&&e.duration>0&&t.afterOpened().subscribe((function(){return t._dismissAfter(e.duration)})),e.announcementMessage&&this._live.announce(e.announcementMessage,e.politeness)}},{key:"_createOverlay",value:function(t){var e=new v.g;e.direction=t.direction;var n=this._overlay.position().global(),i="rtl"===t.direction,r="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!i||"end"===t.horizontalPosition&&i,o=!r&&"center"!==t.horizontalPosition;return r?n.left("0"):o?n.right("0"):n.centerHorizontally(),"top"===t.verticalPosition?n.top("0"):n.bottom("0"),e.positionStrategy=n,this._overlay.create(e)}},{key:"_createInjector",value:function(t,e){return p.s.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:Nt,useValue:e},{provide:Tt,useValue:t.data}]})}},{key:"_openedSnackBarRef",get:function(){var t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel},set:function(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}}]),t}()).\u0275fac=function(t){return new(t||Lt)(p.Yb(v.f),p.Yb(T.j),p.Yb(p.s),p.Yb(wt),p.Yb(Lt,12),p.Yb(Bt))},Lt.\u0275prov=Object(p.Kb)({factory:function(){return new Lt(Object(p.Yb)(v.f),Object(p.Yb)(T.j),Object(p.Yb)(p.p),Object(p.Yb)(wt),Object(p.Yb)(Lt,12),Object(p.Yb)(Bt))},token:Lt,providedIn:Ft}),Lt),jt=o("3Pt+"),Vt=o("GU7r"),Gt=o("VRyK"),Ut=o("xgIS"),zt=["underline"],Wt=["connectionContainer"],Ht=["inputContainer"],qt=["label"];function Yt(t,e){1&t&&(p.Sb(0),p.Ub(1,"div",14),p.Pb(2,"div",15),p.Pb(3,"div",16),p.Pb(4,"div",17),p.Tb(),p.Ub(5,"div",18),p.Pb(6,"div",15),p.Pb(7,"div",16),p.Pb(8,"div",17),p.Tb(),p.Rb())}function Xt(t,e){1&t&&(p.Ub(0,"div",19),p.jc(1,1),p.Tb())}function Kt(t,e){if(1&t&&(p.Sb(0),p.jc(1,2),p.Ub(2,"span"),p.Ec(3),p.Tb(),p.Rb()),2&t){var n=p.fc(2);p.Cb(3),p.Fc(n._control.placeholder)}}function Jt(t,e){1&t&&p.jc(0,3,["*ngSwitchCase","true"])}function Zt(t,e){1&t&&(p.Ub(0,"span",23),p.Ec(1," *"),p.Tb())}function Qt(t,e){if(1&t){var n=p.Vb();p.Ub(0,"label",20,21),p.bc("cdkObserveContent",(function(){return p.tc(n),p.fc().updateOutlineGap()})),p.Cc(2,Kt,4,1,"ng-container",12),p.Cc(3,Jt,1,0,"ng-content",12),p.Cc(4,Zt,2,0,"span",22),p.Tb()}if(2&t){var i=p.fc();p.Gb("mat-empty",i._control.empty&&!i._shouldAlwaysFloat())("mat-form-field-empty",i._control.empty&&!i._shouldAlwaysFloat())("mat-accent","accent"==i.color)("mat-warn","warn"==i.color),p.lc("cdkObserveContentDisabled","outline"!=i.appearance)("id",i._labelId)("ngSwitch",i._hasLabel()),p.Db("for",i._control.id)("aria-owns",i._control.id),p.Cb(2),p.lc("ngSwitchCase",!1),p.Cb(1),p.lc("ngSwitchCase",!0),p.Cb(1),p.lc("ngIf",!i.hideRequiredMarker&&i._control.required&&!i._control.disabled)}}function $t(t,e){1&t&&(p.Ub(0,"div",24),p.jc(1,4),p.Tb())}function te(t,e){if(1&t&&(p.Ub(0,"div",25,26),p.Pb(2,"span",27),p.Tb()),2&t){var n=p.fc();p.Cb(2),p.Gb("mat-accent","accent"==n.color)("mat-warn","warn"==n.color)}}function ee(t,e){if(1&t&&(p.Ub(0,"div"),p.jc(1,5),p.Tb()),2&t){var n=p.fc();p.lc("@transitionMessages",n._subscriptAnimationState)}}function ne(t,e){if(1&t&&(p.Ub(0,"div",31),p.Ec(1),p.Tb()),2&t){var n=p.fc(2);p.lc("id",n._hintLabelId),p.Cb(1),p.Fc(n.hintLabel)}}function ie(t,e){if(1&t&&(p.Ub(0,"div",28),p.Cc(1,ne,2,2,"div",29),p.jc(2,6),p.Pb(3,"div",30),p.jc(4,7),p.Tb()),2&t){var n=p.fc();p.lc("@transitionMessages",n._subscriptAnimationState),p.Cb(1),p.lc("ngIf",n.hintLabel)}}var re,oe,se,ae,ue,le=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],ce=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],he=new p.r("MatError"),fe={transitionMessages:Object(A.m)("transitionMessages",[Object(A.j)("enter",Object(A.k)({opacity:1,transform:"translateY(0%)"})),Object(A.l)("void => enter",[Object(A.k)({opacity:0,transform:"translateY(-100%)"}),Object(A.e)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},de=((re=function t(){h(this,t)}).\u0275fac=function(t){return new(t||re)},re.\u0275dir=p.Jb({type:re}),re),pe=new p.r("MatHint"),me=((se=function t(){h(this,t)}).\u0275fac=function(t){return new(t||se)},se.\u0275dir=p.Jb({type:se,selectors:[["mat-label"]]}),se),be=((oe=function t(){h(this,t)}).\u0275fac=function(t){return new(t||oe)},oe.\u0275dir=p.Jb({type:oe,selectors:[["mat-placeholder"]]}),oe),ve=new p.r("MatPrefix"),ye=new p.r("MatSuffix"),ge=0,Se=Object(g.m)((function t(e){h(this,t),this._elementRef=e}),"primary"),we=new p.r("MAT_FORM_FIELD_DEFAULT_OPTIONS"),_e=new p.r("MatFormField"),xe=((ue=function(e){n(o,e);var i=r(o);function o(t,e,n,r,s,a,u,l){var c;return h(this,o),(c=i.call(this,t))._elementRef=t,c._changeDetectorRef=e,c._dir=r,c._defaults=s,c._platform=a,c._ngZone=u,c._outlineGapCalculationNeededImmediately=!1,c._outlineGapCalculationNeededOnStable=!1,c._destroyed=new w.a,c._showAlwaysAnimate=!1,c._subscriptAnimationState="",c._hintLabel="",c._hintLabelId="mat-hint-"+ge++,c._labelId="mat-form-field-label-"+ge++,c._labelOptions=n||{},c.floatLabel=c._getDefaultFloatLabelState(),c._animationsEnabled="NoopAnimations"!==l,c.appearance=s&&s.appearance?s.appearance:"legacy",c._hideRequiredMarker=!(!s||null==s.hideRequiredMarker)&&s.hideRequiredMarker,c}return d(o,[{key:"_shouldAlwaysFloat",value:function(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}},{key:"_canLabelFloat",value:function(){return"never"!==this.floatLabel}},{key:"getLabelId",value:function(){return this._hasFloatingLabel()?this._labelId:null}},{key:"getConnectedOverlayOrigin",value:function(){return this._connectionContainerRef||this._elementRef}},{key:"ngAfterContentInit",value:function(){var t=this;this._validateControlChild();var e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add("mat-form-field-type-"+e.controlType),e.stateChanges.pipe(Object(P.a)(null)).subscribe((function(){t._validatePlaceholders(),t._syncDescribedByIds(),t._changeDetectorRef.markForCheck()})),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Object(ut.a)(this._destroyed)).subscribe((function(){return t._changeDetectorRef.markForCheck()})),this._ngZone.runOutsideAngular((function(){t._ngZone.onStable.pipe(Object(ut.a)(t._destroyed)).subscribe((function(){t._outlineGapCalculationNeededOnStable&&t.updateOutlineGap()}))})),Object(Gt.a)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe((function(){t._outlineGapCalculationNeededOnStable=!0,t._changeDetectorRef.markForCheck()})),this._hintChildren.changes.pipe(Object(P.a)(null)).subscribe((function(){t._processHints(),t._changeDetectorRef.markForCheck()})),this._errorChildren.changes.pipe(Object(P.a)(null)).subscribe((function(){t._syncDescribedByIds(),t._changeDetectorRef.markForCheck()})),this._dir&&this._dir.change.pipe(Object(ut.a)(this._destroyed)).subscribe((function(){"function"==typeof requestAnimationFrame?t._ngZone.runOutsideAngular((function(){requestAnimationFrame((function(){return t.updateOutlineGap()}))})):t.updateOutlineGap()}))}},{key:"ngAfterContentChecked",value:function(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}},{key:"ngAfterViewInit",value:function(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}},{key:"ngOnDestroy",value:function(){this._destroyed.next(),this._destroyed.complete()}},{key:"_shouldForward",value:function(t){var e=this._control?this._control.ngControl:null;return e&&e[t]}},{key:"_hasPlaceholder",value:function(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}},{key:"_hasLabel",value:function(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}},{key:"_shouldLabelFloat",value:function(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}},{key:"_hideControlPlaceholder",value:function(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}},{key:"_hasFloatingLabel",value:function(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}},{key:"_getDisplayedMessages",value:function(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}},{key:"_animateAndLockLabel",value:function(){var t=this;this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Object(Ut.a)(this._label.nativeElement,"transitionend").pipe(Object(E.a)(1)).subscribe((function(){t._showAlwaysAnimate=!1}))),this.floatLabel="always",this._changeDetectorRef.markForCheck())}},{key:"_validatePlaceholders",value:function(){}},{key:"_processHints",value:function(){this._validateHints(),this._syncDescribedByIds()}},{key:"_validateHints",value:function(){}},{key:"_getDefaultFloatLabelState",value:function(){return this._defaults&&this._defaults.floatLabel||this._labelOptions.float||"auto"}},{key:"_syncDescribedByIds",value:function(){if(this._control){var e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push.apply(e,t(this._control.userAriaDescribedBy.split(" "))),"hint"===this._getDisplayedMessages()){var n=this._hintChildren?this._hintChildren.find((function(t){return"start"===t.align})):null,i=this._hintChildren?this._hintChildren.find((function(t){return"end"===t.align})):null;n?e.push(n.id):this._hintLabel&&e.push(this._hintLabelId),i&&e.push(i.id)}else this._errorChildren&&e.push.apply(e,t(this._errorChildren.map((function(t){return t.id}))));this._control.setDescribedByIds(e)}}},{key:"_validateControlChild",value:function(){}},{key:"updateOutlineGap",value:function(){var t=this._label?this._label.nativeElement:null;if("outline"===this.appearance&&t&&t.children.length&&t.textContent.trim()&&this._platform.isBrowser)if(this._isAttachedToDOM()){var e=0,n=0,i=this._connectionContainerRef.nativeElement,r=i.querySelectorAll(".mat-form-field-outline-start"),o=i.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){var s=i.getBoundingClientRect();if(0===s.width&&0===s.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);for(var a=this._getStartEnd(s),u=t.children,l=this._getStartEnd(u[0].getBoundingClientRect()),c=0,h=0;h<u.length;h++)c+=u[h].offsetWidth;e=Math.abs(l-a)-5,n=c>0?.75*c+10:0}for(var f=0;f<r.length;f++)r[f].style.width=e+"px";for(var d=0;d<o.length;d++)o[d].style.width=n+"px";this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}else this._outlineGapCalculationNeededImmediately=!0}},{key:"_getStartEnd",value:function(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}},{key:"_isAttachedToDOM",value:function(){var t=this._elementRef.nativeElement;if(t.getRootNode){var e=t.getRootNode();return e&&e!==t}return document.documentElement.contains(t)}},{key:"appearance",get:function(){return this._appearance},set:function(t){var e=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&e!==t&&(this._outlineGapCalculationNeededOnStable=!0)}},{key:"hideRequiredMarker",get:function(){return this._hideRequiredMarker},set:function(t){this._hideRequiredMarker=Object(lt.c)(t)}},{key:"hintLabel",get:function(){return this._hintLabel},set:function(t){this._hintLabel=t,this._processHints()}},{key:"floatLabel",get:function(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel},set:function(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}},{key:"_control",get:function(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic},set:function(t){this._explicitFormFieldControl=t}}]),o}(Se)).\u0275fac=function(t){return new(t||ue)(p.Ob(p.l),p.Ob(p.h),p.Ob(g.b,8),p.Ob(S.b,8),p.Ob(we,8),p.Ob(bt.a),p.Ob(p.A),p.Ob(et.a,8))},ue.\u0275cmp=p.Ib({type:ue,selectors:[["mat-form-field"]],contentQueries:function(t,e,n){var i;1&t&&(p.Hb(n,de,!0),p.xc(n,de,!0),p.Hb(n,me,!0),p.xc(n,me,!0),p.Hb(n,be,!0),p.Hb(n,he,!0),p.Hb(n,pe,!0),p.Hb(n,ve,!0),p.Hb(n,ye,!0)),2&t&&(p.pc(i=p.cc())&&(e._controlNonStatic=i.first),p.pc(i=p.cc())&&(e._controlStatic=i.first),p.pc(i=p.cc())&&(e._labelChildNonStatic=i.first),p.pc(i=p.cc())&&(e._labelChildStatic=i.first),p.pc(i=p.cc())&&(e._placeholderChild=i.first),p.pc(i=p.cc())&&(e._errorChildren=i),p.pc(i=p.cc())&&(e._hintChildren=i),p.pc(i=p.cc())&&(e._prefixChildren=i),p.pc(i=p.cc())&&(e._suffixChildren=i))},viewQuery:function(t,e){var n;1&t&&(p.Ic(zt,!0),p.yc(Wt,!0),p.Ic(Ht,!0),p.Ic(qt,!0)),2&t&&(p.pc(n=p.cc())&&(e.underlineRef=n.first),p.pc(n=p.cc())&&(e._connectionContainerRef=n.first),p.pc(n=p.cc())&&(e._inputContainerRef=n.first),p.pc(n=p.cc())&&(e._label=n.first))},hostAttrs:[1,"mat-form-field"],hostVars:44,hostBindings:function(t,e){2&t&&p.Gb("mat-form-field-appearance-standard","standard"==e.appearance)("mat-form-field-appearance-fill","fill"==e.appearance)("mat-form-field-appearance-outline","outline"==e.appearance)("mat-form-field-appearance-legacy","legacy"==e.appearance)("mat-form-field-invalid",e._control.errorState)("mat-form-field-can-float",e._canLabelFloat())("mat-form-field-should-float",e._shouldLabelFloat())("mat-form-field-has-label",e._hasFloatingLabel())("mat-form-field-hide-placeholder",e._hideControlPlaceholder())("mat-form-field-disabled",e._control.disabled)("mat-form-field-autofilled",e._control.autofilled)("mat-focused",e._control.focused)("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)("ng-untouched",e._shouldForward("untouched"))("ng-touched",e._shouldForward("touched"))("ng-pristine",e._shouldForward("pristine"))("ng-dirty",e._shouldForward("dirty"))("ng-valid",e._shouldForward("valid"))("ng-invalid",e._shouldForward("invalid"))("ng-pending",e._shouldForward("pending"))("_mat-animation-noopable",!e._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[p.Bb([{provide:_e,useExisting:ue}]),p.zb],ngContentSelectors:ce,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,e){1&t&&(p.kc(le),p.Ub(0,"div",0),p.Ub(1,"div",1,2),p.bc("click",(function(t){return e._control.onContainerClick&&e._control.onContainerClick(t)})),p.Cc(3,Yt,9,0,"ng-container",3),p.Cc(4,Xt,2,0,"div",4),p.Ub(5,"div",5,6),p.jc(7),p.Ub(8,"span",7),p.Cc(9,Qt,5,16,"label",8),p.Tb(),p.Tb(),p.Cc(10,$t,2,0,"div",9),p.Tb(),p.Cc(11,te,3,4,"div",10),p.Ub(12,"div",11),p.Cc(13,ee,2,1,"div",12),p.Cc(14,ie,5,2,"div",13),p.Tb(),p.Tb()),2&t&&(p.Cb(3),p.lc("ngIf","outline"==e.appearance),p.Cb(1),p.lc("ngIf",e._prefixChildren.length),p.Cb(5),p.lc("ngIf",e._hasFloatingLabel()),p.Cb(1),p.lc("ngIf",e._suffixChildren.length),p.Cb(1),p.lc("ngIf","outline"!=e.appearance),p.Cb(1),p.lc("ngSwitch",e._getDisplayedMessages()),p.Cb(1),p.lc("ngSwitchCase","error"),p.Cb(1),p.lc("ngSwitchCase","hint"))},directives:[a.m,a.n,a.o,Vt.a],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:scaleX(1);transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[fe.transitionMessages]},changeDetection:0}),ue),ke=((ae=function t(){h(this,t)}).\u0275mod=p.Mb({type:ae}),ae.\u0275inj=p.Lb({factory:function(t){return new(t||ae)},imports:[[a.c,g.f,Vt.c],g.f]}),ae),Ee=o("EY2u");o("3UWI");var Pe,Ae,Le,Te,Me=Object(bt.f)({passive:!0}),Ce=((Ae=function(){function t(e,n){h(this,t),this._platform=e,this._ngZone=n,this._monitoredElements=new Map}return d(t,[{key:"monitor",value:function(t){var e=this;if(!this._platform.isBrowser)return Ee.a;var n=Object(lt.e)(t),i=this._monitoredElements.get(n);if(i)return i.subject;var r=new w.a,o="cdk-text-field-autofilled",s=function(t){"cdk-text-field-autofill-start"!==t.animationName||n.classList.contains(o)?"cdk-text-field-autofill-end"===t.animationName&&n.classList.contains(o)&&(n.classList.remove(o),e._ngZone.run((function(){return r.next({target:t.target,isAutofilled:!1})}))):(n.classList.add(o),e._ngZone.run((function(){return r.next({target:t.target,isAutofilled:!0})})))};return this._ngZone.runOutsideAngular((function(){n.addEventListener("animationstart",s,Me),n.classList.add("cdk-text-field-autofill-monitored")})),this._monitoredElements.set(n,{subject:r,unlisten:function(){n.removeEventListener("animationstart",s,Me)}}),r}},{key:"stopMonitoring",value:function(t){var e=Object(lt.e)(t),n=this._monitoredElements.get(e);n&&(n.unlisten(),n.subject.complete(),e.classList.remove("cdk-text-field-autofill-monitored"),e.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(e))}},{key:"ngOnDestroy",value:function(){var t=this;this._monitoredElements.forEach((function(e,n){return t.stopMonitoring(n)}))}}]),t}()).\u0275fac=function(t){return new(t||Ae)(p.Yb(bt.a),p.Yb(p.A))},Ae.\u0275prov=Object(p.Kb)({factory:function(){return new Ae(Object(p.Yb)(bt.a),Object(p.Yb)(p.A))},token:Ae,providedIn:"root"}),Ae),Ne=((Pe=function t(){h(this,t)}).\u0275mod=p.Mb({type:Pe}),Pe.\u0275inj=p.Lb({factory:function(t){return new(t||Pe)},imports:[[bt.b]]}),Pe),Ie=new p.r("MAT_INPUT_VALUE_ACCESSOR"),Re=["button","checkbox","file","hidden","image","radio","range","reset","submit"],Oe=0,Fe=Object(g.p)((function t(e,n,i,r){h(this,t),this._defaultErrorStateMatcher=e,this._parentForm=n,this._parentFormGroup=i,this.ngControl=r})),Be=((Te=function(t){n(i,t);var e=r(i);function i(t,n,r,o,s,a,u,l,c,f){var d;h(this,i),(d=e.call(this,a,o,s,r))._elementRef=t,d._platform=n,d.ngControl=r,d._autofillMonitor=l,d._formField=f,d._uid="mat-input-"+Oe++,d.focused=!1,d.stateChanges=new w.a,d.controlType="mat-input",d.autofilled=!1,d._disabled=!1,d._required=!1,d._type="text",d._readonly=!1,d._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter((function(t){return Object(bt.e)().has(t)}));var p=d._elementRef.nativeElement,m=p.nodeName.toLowerCase();return d._inputValueAccessor=u||p,d._previousNativeValue=d.value,d.id=d.id,n.IOS&&c.runOutsideAngular((function(){t.nativeElement.addEventListener("keyup",(function(t){var e=t.target;e.value||e.selectionStart||e.selectionEnd||(e.setSelectionRange(1,1),e.setSelectionRange(0,0))}))})),d._isServer=!d._platform.isBrowser,d._isNativeSelect="select"===m,d._isTextarea="textarea"===m,d._isNativeSelect&&(d.controlType=p.multiple?"mat-native-select-multiple":"mat-native-select"),d}return d(i,[{key:"ngAfterViewInit",value:function(){var t=this;this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe((function(e){t.autofilled=e.isAutofilled,t.stateChanges.next()}))}},{key:"ngOnChanges",value:function(){this.stateChanges.next()}},{key:"ngOnDestroy",value:function(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}},{key:"ngDoCheck",value:function(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}},{key:"focus",value:function(t){this._elementRef.nativeElement.focus(t)}},{key:"_focusChanged",value:function(t){t===this.focused||this.readonly&&t||(this.focused=t,this.stateChanges.next())}},{key:"_onInput",value:function(){}},{key:"_dirtyCheckPlaceholder",value:function(){var t,e,n=(null===(e=null===(t=this._formField)||void 0===t?void 0:t._hideControlPlaceholder)||void 0===e?void 0:e.call(t))?null:this.placeholder;if(n!==this._previousPlaceholder){var i=this._elementRef.nativeElement;this._previousPlaceholder=n,n?i.setAttribute("placeholder",n):i.removeAttribute("placeholder")}}},{key:"_dirtyCheckNativeValue",value:function(){var t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}},{key:"_validateType",value:function(){Re.indexOf(this._type)}},{key:"_isNeverEmpty",value:function(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}},{key:"_isBadInput",value:function(){var t=this._elementRef.nativeElement.validity;return t&&t.badInput}},{key:"setDescribedByIds",value:function(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}},{key:"onContainerClick",value:function(){this.focused||this.focus()}},{key:"disabled",get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(t){this._disabled=Object(lt.c)(t),this.focused&&(this.focused=!1,this.stateChanges.next())}},{key:"id",get:function(){return this._id},set:function(t){this._id=t||this._uid}},{key:"required",get:function(){return this._required},set:function(t){this._required=Object(lt.c)(t)}},{key:"type",get:function(){return this._type},set:function(t){this._type=t||"text",this._validateType(),!this._isTextarea&&Object(bt.e)().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}},{key:"value",get:function(){return this._inputValueAccessor.value},set:function(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}},{key:"readonly",get:function(){return this._readonly},set:function(t){this._readonly=Object(lt.c)(t)}},{key:"empty",get:function(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}},{key:"shouldLabelFloat",get:function(){if(this._isNativeSelect){var t=this._elementRef.nativeElement,e=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&e&&e.label)}return this.focused||!this.empty}}]),i}(Fe)).\u0275fac=function(t){return new(t||Te)(p.Ob(p.l),p.Ob(bt.a),p.Ob(jt.l,10),p.Ob(jt.o,8),p.Ob(jt.f,8),p.Ob(g.a),p.Ob(Ie,10),p.Ob(Ce),p.Ob(p.A),p.Ob(_e,8))},Te.\u0275dir=p.Jb({type:Te,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:9,hostBindings:function(t,e){1&t&&p.bc("focus",(function(){return e._focusChanged(!0)}))("blur",(function(){return e._focusChanged(!1)}))("input",(function(){return e._onInput()})),2&t&&(p.Xb("disabled",e.disabled)("required",e.required),p.Db("id",e.id)("data-placeholder",e.placeholder)("readonly",e.readonly&&!e._isNativeSelect||null)("aria-invalid",e.errorState)("aria-required",e.required.toString()),p.Gb("mat-input-server",e._isServer))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"]},exportAs:["matInput"],features:[p.Bb([{provide:de,useExisting:Te}]),p.zb,p.Ab]}),Te),De=((Le=function t(){h(this,t)}).\u0275mod=p.Mb({type:Le}),Le.\u0275inj=p.Lb({factory:function(t){return new(t||Le)},providers:[g.a],imports:[[Ne,ke],Ne,ke]}),Le);function je(t,e){if(1&t&&(p.ec(),p.Pb(0,"circle",3)),2&t){var n=p.fc();p.zc("animation-name","mat-progress-spinner-stroke-rotate-"+n._spinnerAnimationLabel)("stroke-dashoffset",n._getStrokeDashOffset(),"px")("stroke-dasharray",n._getStrokeCircumference(),"px")("stroke-width",n._getCircleStrokeWidth(),"%"),p.Db("r",n._getCircleRadius())}}function Ve(t,e){if(1&t&&(p.ec(),p.Pb(0,"circle",3)),2&t){var n=p.fc();p.zc("stroke-dashoffset",n._getStrokeDashOffset(),"px")("stroke-dasharray",n._getStrokeCircumference(),"px")("stroke-width",n._getCircleStrokeWidth(),"%"),p.Db("r",n._getCircleRadius())}}function Ge(t,e){if(1&t&&(p.ec(),p.Pb(0,"circle",3)),2&t){var n=p.fc();p.zc("animation-name","mat-progress-spinner-stroke-rotate-"+n._spinnerAnimationLabel)("stroke-dashoffset",n._getStrokeDashOffset(),"px")("stroke-dasharray",n._getStrokeCircumference(),"px")("stroke-width",n._getCircleStrokeWidth(),"%"),p.Db("r",n._getCircleRadius())}}function Ue(t,e){if(1&t&&(p.ec(),p.Pb(0,"circle",3)),2&t){var n=p.fc();p.zc("stroke-dashoffset",n._getStrokeDashOffset(),"px")("stroke-dasharray",n._getStrokeCircumference(),"px")("stroke-width",n._getCircleStrokeWidth(),"%"),p.Db("r",n._getCircleRadius())}}var ze,We,He,qe=".mat-progress-spinner{display:block;position:relative}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:currentColor}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate]{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate]{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate]{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate]{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n",Ye=Object(g.m)((function t(e){h(this,t),this._elementRef=e}),"primary"),Xe=new p.r("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}}),Ke=((He=function(t){n(i,t);var e=r(i);function i(t,n,r,o,s){var a;h(this,i),(a=e.call(this,t))._elementRef=t,a._document=r,a._diameter=100,a._value=0,a._fallbackAnimation=!1,a.mode="determinate";var u=i._diameters;return a._spinnerAnimationLabel=a._getSpinnerAnimationLabel(),u.has(r.head)||u.set(r.head,new Set([100])),a._fallbackAnimation=n.EDGE||n.TRIDENT,a._noopAnimations="NoopAnimations"===o&&!!s&&!s._forceAnimations,s&&(s.diameter&&(a.diameter=s.diameter),s.strokeWidth&&(a.strokeWidth=s.strokeWidth)),a}return d(i,[{key:"ngOnInit",value:function(){var t=this._elementRef.nativeElement;this._styleRoot=Object(bt.c)(t)||this._document.head,this._attachStyleNode(),t.classList.add("mat-progress-spinner-indeterminate".concat(this._fallbackAnimation?"-fallback":"","-animation"))}},{key:"_getCircleRadius",value:function(){return(this.diameter-10)/2}},{key:"_getViewBox",value:function(){var t=2*this._getCircleRadius()+this.strokeWidth;return"0 0 ".concat(t," ").concat(t)}},{key:"_getStrokeCircumference",value:function(){return 2*Math.PI*this._getCircleRadius()}},{key:"_getStrokeDashOffset",value:function(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._getStrokeCircumference():null}},{key:"_getCircleStrokeWidth",value:function(){return this.strokeWidth/this.diameter*100}},{key:"_attachStyleNode",value:function(){var t=this._styleRoot,e=this._diameter,n=i._diameters,r=n.get(t);if(!r||!r.has(e)){var o=this._document.createElement("style");o.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),o.textContent=this._getAnimationText(),t.appendChild(o),r||(r=new Set,n.set(t,r)),r.add(e)}}},{key:"_getAnimationText",value:function(){var t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,""+this._spinnerAnimationLabel)}},{key:"_getSpinnerAnimationLabel",value:function(){return this.diameter.toString().replace(".","_")}},{key:"diameter",get:function(){return this._diameter},set:function(t){this._diameter=Object(lt.f)(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),!this._fallbackAnimation&&this._styleRoot&&this._attachStyleNode()}},{key:"strokeWidth",get:function(){return this._strokeWidth||this.diameter/10},set:function(t){this._strokeWidth=Object(lt.f)(t)}},{key:"value",get:function(){return"determinate"===this.mode?this._value:0},set:function(t){this._value=Math.max(0,Math.min(100,Object(lt.f)(t)))}}]),i}(Ye)).\u0275fac=function(t){return new(t||He)(p.Ob(p.l),p.Ob(bt.a),p.Ob(a.d,8),p.Ob(et.a,8),p.Ob(Xe))},He.\u0275cmp=p.Ib({type:He,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(p.Db("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),p.zc("width",e.diameter,"px")("height",e.diameter,"px"),p.Gb("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",mode:"mode",diameter:"diameter",strokeWidth:"strokeWidth",value:"value"},exportAs:["matProgressSpinner"],features:[p.zb],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(p.ec(),p.Ub(0,"svg",0),p.Cc(1,je,1,9,"circle",1),p.Cc(2,Ve,1,7,"circle",2),p.Tb()),2&t&&(p.zc("width",e.diameter,"px")("height",e.diameter,"px"),p.lc("ngSwitch","indeterminate"===e.mode),p.Db("viewBox",e._getViewBox()),p.Cb(1),p.lc("ngSwitchCase",!0),p.Cb(1),p.lc("ngSwitchCase",!1))},directives:[a.n,a.o],styles:[qe],encapsulation:2,changeDetection:0}),He._diameters=new WeakMap,He),Je=((We=function(t){n(i,t);var e=r(i);function i(t,n,r,o,s){var a;return h(this,i),(a=e.call(this,t,n,r,o,s)).mode="indeterminate",a}return i}(Ke)).\u0275fac=function(t){return new(t||We)(p.Ob(p.l),p.Ob(bt.a),p.Ob(a.d,8),p.Ob(et.a,8),p.Ob(Xe))},We.\u0275cmp=p.Ib({type:We,selectors:[["mat-spinner"]],hostAttrs:["role","progressbar","mode","indeterminate",1,"mat-spinner","mat-progress-spinner"],hostVars:6,hostBindings:function(t,e){2&t&&(p.zc("width",e.diameter,"px")("height",e.diameter,"px"),p.Gb("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color"},features:[p.zb],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(p.ec(),p.Ub(0,"svg",0),p.Cc(1,Ge,1,9,"circle",1),p.Cc(2,Ue,1,7,"circle",2),p.Tb()),2&t&&(p.zc("width",e.diameter,"px")("height",e.diameter,"px"),p.lc("ngSwitch","indeterminate"===e.mode),p.Db("viewBox",e._getViewBox()),p.Cb(1),p.lc("ngSwitchCase",!0),p.Cb(1),p.lc("ngSwitchCase",!1))},directives:[a.n,a.o],styles:[qe],encapsulation:2,changeDetection:0}),We),Ze=((ze=function t(){h(this,t)}).\u0275mod=p.Mb({type:ze}),ze.\u0275inj=p.Lb({factory:function(t){return new(t||ze)},imports:[[g.f,a.c],g.f]}),ze);function Qe(t,e){1&t&&(p.Ub(0,"span"),p.Pb(1,"nb-icon",1),p.Tb())}function $e(t,e){if(1&t){var n=p.Vb();p.Ub(0,"span"),p.Pb(1,"nb-icon",2),p.Ub(2,"button",3),p.bc("click",(function(){p.tc(n);var t=p.fc();return t.retry(t.sheet.id)})),p.Pb(3,"nb-icon",4),p.Tb(),p.Tb()}}function tn(t,e){1&t&&(p.Ub(0,"span"),p.Pb(1,"mat-spinner",5),p.Tb()),2&t&&(p.Cb(1),p.lc("diameter",20))}var en,nn=((en=function(){function t(e,n){h(this,t),this.sheetService=e,this.toastrService=n}return d(t,[{key:"ngOnInit",value:function(){}},{key:"retry",value:function(t){var e=this;this.sheetService.retry(this.sheet.id).subscribe((function(t){e.sheet.finished=!1,e.toastrService.success(t,"Tarea planificada")}),(function(t){console.log(t),e.toastrService.danger(t.error.message,"Error al reintentar")}))}}]),t}()).\u0275fac=function(t){return new(t||en)(p.Ob(c.a),p.Ob(m.ib))},en.\u0275cmp=p.Ib({type:en,selectors:[["ngx-status"]],inputs:{sheet:"sheet"},decls:3,vars:3,consts:[[4,"ngIf"],["status","success","icon","checkmark-outline"],["status","danger","icon","alert-triangle-outline"],["nbButton","","ghost","","shape","round","nbTooltip","Reintentar",1,"mx-2",3,"click"],["icon","sync-outline"],[3,"diameter"]],template:function(t,e){1&t&&(p.Cc(0,Qe,2,0,"span",0),p.Cc(1,$e,4,0,"span",0),p.Cc(2,tn,2,1,"span",0)),2&t&&(p.lc("ngIf",e.sheet.finished&&e.sheet.pdf&&e.sheet.xml&&e.sheet.specs),p.Cb(1),p.lc("ngIf",e.sheet.finished&&(!e.sheet.pdf||!e.sheet.xml||!e.sheet.specs)),p.Cb(1),p.lc("ngIf",!e.sheet.finished))},directives:[a.m,m.B,m.k,m.jb,Je],styles:[""]}),en);function rn(t,e){if(1&t){var n=p.Vb();p.Ub(0,"nb-list-item",5),p.Ub(1,"span",6),p.Ec(2),p.Tb(),p.Ub(3,"span",6),p.Ec(4),p.Tb(),p.Pb(5,"ngx-status",7),p.Ub(6,"nb-actions",8),p.Ub(7,"nb-action",9),p.bc("click",(function(){p.tc(n);var t=e.$implicit,i=p.fc();return t.pdf?i.openNewTab(t.id):null})),p.Tb(),p.Ub(8,"nb-action",10),p.bc("click",(function(){p.tc(n);var t=e.$implicit;return p.fc().openDownloadDialog(t)})),p.Tb(),p.Ub(9,"nb-action",11),p.bc("click",(function(){p.tc(n);var t=e.$implicit;return p.fc().deleteSheet(t.id)})),p.Tb(),p.Tb(),p.Tb()}if(2&t){var i=e.$implicit;p.Cb(2),p.Fc(i.name),p.Cb(2),p.Fc(i.date),p.Cb(1),p.lc("sheet",i),p.Cb(2),p.lc("disabled",!i.pdf)}}var on,sn,an=[{path:"",component:(on=function(){function t(e,n,i,r,o,s,a){h(this,t),this.sheetService=e,this.dialog=n,this._snackBar=i,this.formBuilder=r,this.nbDialogService=o,this.toastrService=s,this.dialogService=a,this.sheets=[],this.text="",this.loading=!1,this.busquedaForm=r.group({text:""})}return d(t,[{key:"ngOnInit",value:function(){this.refreshSheets(void 0)}},{key:"refreshSheets",value:function(t){var e=this;this.loading=!0,this.sheetService.getSheets(t).subscribe((function(t){e.sheets=t,e.loading=!1}))}},{key:"onSubmit",value:function(t){this.text=t.text,this.busquedaForm.valid&&this.refreshSheets(this.text)}},{key:"openDownloadDialog",value:function(t){this.dialogService.open(b,{context:{sheet:t}})}},{key:"deleteSheet",value:function(t){var e=this;this.sheetService.deleteSheet(t).subscribe((function(t){e.showToast("Partitura eliminada con \xe9xito!","\xc9xito","top-right","success"),e.refreshSheets(e.text)}),(function(t){e.showToast("No se ha podido eliminar la partitura","Error","top-right","danger")}))}},{key:"showToast",value:function(t,e,n,i){this.toastrService.show(t,e,{position:n,status:i})}},{key:"openNewTab",value:function(t){window.open("".concat(f.a.apiUrl,"/sheets/").concat(t,".pdf"),"_blank")}}]),t}(),on.\u0275fac=function(t){return new(t||on)(p.Ob(c.a),p.Ob($),p.Ob(Dt),p.Ob(jt.b),p.Ob(m.y),p.Ob(m.ib),p.Ob(m.y))},on.\u0275cmp=p.Ib({type:on,selectors:[["ngx-repositorio"]],decls:12,vars:3,consts:[[1,"busquedaForm"],[3,"formGroup","ngSubmit"],["matInput","","formControlName","text"],[3,"nbSpinner"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"col"],[1,"col",3,"sheet"],["size","small","disabled","!sheet.finished",1,"ml-auto"],["icon","eye-outline",3,"disabled","click"],["icon","download-outline",3,"click"],["icon","trash-2-outline",3,"click"]],template:function(t,e){1&t&&(p.Ub(0,"nb-card"),p.Ub(1,"nb-card-header"),p.Ec(2,"Repositorio"),p.Tb(),p.Ub(3,"nb-card-body"),p.Ub(4,"div",0),p.Ub(5,"form",1),p.bc("ngSubmit",(function(){return e.onSubmit(e.busquedaForm.value)})),p.Ub(6,"mat-form-field"),p.Ub(7,"mat-label"),p.Ec(8,"Filtrar"),p.Tb(),p.Pb(9,"input",2),p.Tb(),p.Tb(),p.Tb(),p.Ub(10,"nb-list",3),p.Cc(11,rn,10,4,"nb-list-item",4),p.Tb(),p.Tb(),p.Tb()),2&t&&(p.Cb(5),p.lc("formGroup",e.busquedaForm),p.Cb(5),p.lc("nbSpinner",e.loading),p.Cb(1),p.lc("ngForOf",e.sheets))},directives:[m.n,m.o,m.m,jt.u,jt.n,jt.f,xe,me,Be,jt.a,jt.m,jt.d,m.M,m.cb,a.l,m.N,nn,m.g,m.f],styles:["mat-spinner[_ngcontent-%COMP%]{display:inline}nb-list[_ngcontent-%COMP%]{overflow:hidden}"]}),on)}],un=((sn=function t(){h(this,t)}).\u0275mod=p.Mb({type:sn}),sn.\u0275inj=p.Lb({factory:function(t){return new(t||sn)},imports:[[l.g.forChild(an)],l.g]}),sn),ln=o("tR1z"),cn=o("f6nW");o("0EQZ"),o("2Vo4"),o("quSY");var hn,fn=((hn=function t(){h(this,t)}).\u0275mod=p.Mb({type:hn}),hn.\u0275inj=p.Lb({factory:function(t){return new(t||hn)},imports:[[cn.r,g.f],g.f]}),hn),dn=o("vxfF");o("eIep"),o("/uUt");var pn,mn,bn,vn,yn={provide:new p.r("mat-select-scroll-strategy"),deps:[v.f],useFactory:function(t){return function(){return t.scrollStrategies.reposition()}}},gn=((pn=function t(){h(this,t)}).\u0275mod=p.Mb({type:pn}),pn.\u0275inj=p.Lb({factory:function(t){return new(t||pn)},providers:[yn],imports:[[a.c,v.i,g.h,g.f],dn.a,ke,g.h,g.f]}),pn),Sn={provide:new p.r("mat-tooltip-scroll-strategy"),deps:[v.f],useFactory:function(t){return function(){return t.scrollStrategies.reposition({scrollThrottle:20})}}},wn=((bn=function t(){h(this,t)}).\u0275mod=p.Mb({type:bn}),bn.\u0275inj=p.Lb({factory:function(t){return new(t||bn)},providers:[Sn],imports:[[T.a,a.c,v.i,g.f],g.f,dn.a]}),bn),_n=((mn=function t(){h(this,t),this.changes=new w.a,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=function(t,e,n){if(0==n||0==e)return"0 of "+n;var i=t*e;return"".concat(i+1," \u2013 ").concat(i<(n=Math.max(n,0))?Math.min(i+e,n):i+e," of ").concat(n)}}).\u0275fac=function(t){return new(t||mn)},mn.\u0275prov=Object(p.Kb)({factory:function(){return new mn},token:mn,providedIn:"root"}),mn),xn={provide:_n,deps:[[new p.B,new p.L,_n]],useFactory:function(t){return t||new _n}},kn=((vn=function t(){h(this,t)}).\u0275mod=p.Mb({type:vn}),vn.\u0275inj=p.Lb({factory:function(t){return new(t||vn)},providers:[xn],imports:[[a.c,at,gn,wn]]}),vn);o("kLqA"),o("KTiS");var En,Pn,An=((Pn=function t(){h(this,t)}).\u0275mod=p.Mb({type:Pn}),Pn.\u0275inj=p.Lb({factory:function(t){return new(t||Pn)},imports:[[]]}),Pn),Ln=((En=function t(){h(this,t)}).\u0275mod=p.Mb({type:En}),En.\u0275inj=p.Lb({factory:function(t){return new(t||En)},providers:[c.a],imports:[[a.c,un,tt,kn,Ft,ke,De,fn,Ze,at,gn,jt.g,jt.r,ln.a,m.D,m.O,m.p,An,m.w,m.db,m.h,m.u,m.l,m.kb,m.U]]}),En)}}])}();